import{a as D,b as ne}from"./chunk-2NFLSA4Y.js";var OS=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),Aa=class t{element=null;classNames=[];attrs=[];notSelectors=[];static parse(e){let n=[],r=(l,c)=>{c.notSelectors.length>0&&!c.element&&c.classNames.length==0&&c.attrs.length==0&&(c.element="*"),l.push(c)},i=new t,s,o=i,a=!1;for(OS.lastIndex=0;s=OS.exec(e);){if(s[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,o=new t,i.notSelectors.push(o)}let l=s[2];if(l){let u=s[3];u==="#"?o.addAttribute("id",l.slice(1)):u==="."?o.addClassName(l.slice(1)):o.setElement(l)}let c=s[4];if(c&&o.addAttribute(o.unescapeAttribute(c),s[6]),s[7]&&(a=!1,o=i),s[8]){if(a)throw new Error("Multiple selectors in :not are not supported");r(n,i),i=o=new t}}return r(n,i),n}unescapeAttribute(e){let n="",r=!1;for(let i=0;i<e.length;i++){let s=e.charAt(i);if(s==="\\"){r=!0;continue}if(s==="$"&&!r)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,n+=s}return n}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&this.classNames.length==0&&this.attrs.length==0&&this.notSelectors.length===0}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){let e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,n=""){this.attrs.push(e,n&&n.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(n=>e+=`.${n}`),this.attrs)for(let n=0;n<this.attrs.length;n+=2){let r=this.escapeAttribute(this.attrs[n]),i=this.attrs[n+1];e+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(n=>e+=`:not(${n})`),e}},If=class t{static createNotMatcher(e){let n=new t;return n.addSelectables(e,null),n}_elementMap=new Map;_elementPartialMap=new Map;_classMap=new Map;_classPartialMap=new Map;_attrValueMap=new Map;_attrValuePartialMap=new Map;_listContexts=[];addSelectables(e,n){let r=null;e.length>1&&(r=new Uv(e),this._listContexts.push(r));for(let i=0;i<e.length;i++)this._addSelectable(e[i],n,r)}_addSelectable(e,n,r){let i=this,s=e.element,o=e.classNames,a=e.attrs,l=new $v(e,n,r);if(s&&(a.length===0&&o.length===0?this._addTerminal(i._elementMap,s,l):i=this._addPartial(i._elementPartialMap,s)),o)for(let c=0;c<o.length;c++){let u=a.length===0&&c===o.length-1,h=o[c];u?this._addTerminal(i._classMap,h,l):i=this._addPartial(i._classPartialMap,h)}if(a)for(let c=0;c<a.length;c+=2){let u=c===a.length-2,h=a[c],p=a[c+1];if(u){let m=i._attrValueMap,g=m.get(h);g||(g=new Map,m.set(h,g)),this._addTerminal(g,p,l)}else{let m=i._attrValuePartialMap,g=m.get(h);g||(g=new Map,m.set(h,g)),i=this._addPartial(g,p)}}}_addTerminal(e,n,r){let i=e.get(n);i||(i=[],e.set(n,i)),i.push(r)}_addPartial(e,n){let r=e.get(n);return r||(r=new t,e.set(n,r)),r}match(e,n){let r=!1,i=e.element,s=e.classNames,o=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(r=this._matchTerminal(this._elementMap,i,e,n)||r,r=this._matchPartial(this._elementPartialMap,i,e,n)||r,s)for(let a=0;a<s.length;a++){let l=s[a];r=this._matchTerminal(this._classMap,l,e,n)||r,r=this._matchPartial(this._classPartialMap,l,e,n)||r}if(o)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1],u=this._attrValueMap.get(l);c&&(r=this._matchTerminal(u,"",e,n)||r),r=this._matchTerminal(u,c,e,n)||r;let h=this._attrValuePartialMap.get(l);c&&(r=this._matchPartial(h,"",e,n)||r),r=this._matchPartial(h,c,e,n)||r}return r}_matchTerminal(e,n,r,i){if(!e||typeof n!="string")return!1;let s=e.get(n)||[],o=e.get("*");if(o&&(s=s.concat(o)),s.length===0)return!1;let a,l=!1;for(let c=0;c<s.length;c++)a=s[c],l=a.finalize(r,i)||l;return l}_matchPartial(e,n,r,i){if(!e||typeof n!="string")return!1;let s=e.get(n);return s?s.match(r,i):!1}},Uv=class{selectors;alreadyMatched=!1;constructor(e){this.selectors=e}},$v=class{selector;cbContext;listContext;notSelectors;constructor(e,n,r){this.selector=e,this.cbContext=n,this.listContext=r,this.notSelectors=e.notSelectors}finalize(e,n){let r=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(r=!If.createNotMatcher(this.notSelectors).match(e,null)),r&&n&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),n(this.selector,this.cbContext)),r}},Af=class{registry;constructor(e){this.registry=e}match(e){return this.registry.has(e)?this.registry.get(e):[]}};var $s=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})($s||{}),h0=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(h0||{}),lc=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(lc||{}),FS={name:"custom-elements"},VS={name:"no-errors-schema"};var Le=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t[t.ATTRIBUTE_NO_BINDING=6]="ATTRIBUTE_NO_BINDING",t})(Le||{});function u2(t){let e=t.classNames&&t.classNames.length?[8,...t.classNames]:[];return[t.element&&t.element!=="*"?t.element:"",...t.attrs,...e]}function d2(t){let e=t.classNames&&t.classNames.length?[8,...t.classNames]:[];return t.element?[5,t.element,...t.attrs,...e]:t.attrs.length?[3,...t.attrs,...e]:t.classNames&&t.classNames.length?[9,...t.classNames]:[]}function f2(t){let e=u2(t),n=t.notSelectors&&t.notSelectors.length?t.notSelectors.map(r=>d2(r)):[];return e.concat(...n)}function p0(t){return t?Aa.parse(t).map(f2):[]}var Ci=(function(t){return t[t.Directive=0]="Directive",t[t.Component=1]="Component",t[t.Injectable=2]="Injectable",t[t.Pipe=3]="Pipe",t[t.NgModule=4]="NgModule",t})(Ci||{});var Df;function h2(t){return v2(g2(t.nodes).join("")+`[${t.meaning}]`)}function p2(t){return t.id||Ix(t)}function Ix(t){let e=new Hv,n=t.nodes.map(r=>r.visit(e,null));return Ax(n.join(""),t.meaning)}var kf=class{visitText(e,n){return e.value}visitContainer(e,n){return`[${e.children.map(r=>r.visit(this)).join(", ")}]`}visitIcu(e,n){let r=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expression}, ${e.type}, ${r.join(", ")}}`}visitTagPlaceholder(e,n){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,n){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,n){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,n){return`<ph block name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}},m2=new kf;function g2(t){return t.map(e=>e.visit(m2,null))}var Hv=class extends kf{visitIcu(e){let n=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.type}, ${n.join(", ")}}`}};function v2(t){Df??=new TextEncoder;let e=[...Df.encode(t)],n=_2(e,m0.Big),r=e.length*8,i=new Uint32Array(80),s=1732584193,o=4023233417,a=2562383102,l=271733878,c=3285377520;n[r>>5]|=128<<24-r%32,n[(r+64>>9<<4)+15]=r;for(let u=0;u<n.length;u+=16){let h=s,p=o,m=a,g=l,y=c;for(let _=0;_<80;_++){_<16?i[_]=n[u+_]:i[_]=wv(i[_-3]^i[_-8]^i[_-14]^i[_-16],1);let w=y2(_,o,a,l),A=w[0],k=w[1],T=[wv(s,5),A,c,k,i[_]].reduce(da);c=l,l=a,a=wv(o,30),o=s,s=T}s=da(s,h),o=da(o,p),a=da(a,m),l=da(l,g),c=da(c,y)}return tc(s)+tc(o)+tc(a)+tc(l)+tc(c)}function tc(t){return(t>>>0).toString(16).padStart(8,"0")}function y2(t,e,n,r){return t<20?[e&n|~e&r,1518500249]:t<40?[e^n^r,1859775393]:t<60?[e&n|e&r|n&r,2400959708]:[e^n^r,3395469782]}function BS(t){Df??=new TextEncoder;let e=Df.encode(t),n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=US(n,e.length,0),i=US(n,e.length,102072);return r==0&&(i==0||i==1)&&(r=r^319790063,i=i^-1801410264),BigInt.asUintN(32,BigInt(r))<<BigInt(32)|BigInt.asUintN(32,BigInt(i))}function Ax(t,e=""){let n=BS(t);return e&&(n=BigInt.asUintN(64,n<<BigInt(1))|n>>BigInt(63)&BigInt(1),n+=BS(e)),BigInt.asUintN(63,n).toString()}function US(t,e,n){let r=2654435769,i=2654435769,s=0,o=e-12;for(;s<=o;s+=12){r+=t.getUint32(s,!0),i+=t.getUint32(s+4,!0),n+=t.getUint32(s+8,!0);let l=$S(r,i,n);r=l[0],i=l[1],n=l[2]}let a=e-s;return n+=e,a>=4?(r+=t.getUint32(s,!0),s+=4,a>=8?(i+=t.getUint32(s,!0),s+=4,a>=9&&(n+=t.getUint8(s++)<<8),a>=10&&(n+=t.getUint8(s++)<<16),a===11&&(n+=t.getUint8(s++)<<24)):(a>=5&&(i+=t.getUint8(s++)),a>=6&&(i+=t.getUint8(s++)<<8),a===7&&(i+=t.getUint8(s++)<<16))):(a>=1&&(r+=t.getUint8(s++)),a>=2&&(r+=t.getUint8(s++)<<8),a===3&&(r+=t.getUint8(s++)<<16)),$S(r,i,n)[2]}function $S(t,e,n){return t-=e,t-=n,t^=n>>>13,e-=n,e-=t,e^=t<<8,n-=t,n-=e,n^=e>>>13,t-=e,t-=n,t^=n>>>12,e-=n,e-=t,e^=t<<16,n-=t,n-=e,n^=e>>>5,t-=e,t-=n,t^=n>>>3,e-=n,e-=t,e^=t<<10,n-=t,n-=e,n^=e>>>15,[t,e,n]}var m0=(function(t){return t[t.Little=0]="Little",t[t.Big=1]="Big",t})(m0||{});function da(t,e){return w2(t,e)[1]}function w2(t,e){let n=(t&65535)+(e&65535),r=(t>>>16)+(e>>>16)+(n>>>16);return[r>>>16,r<<16|n&65535]}function wv(t,e){return t<<e|t>>>32-e}function _2(t,e){let n=t.length+3>>>2,r=[];for(let i=0;i<n;i++)r[i]=E2(t,i*4,e);return r}function HS(t,e){return e>=t.length?0:t[e]}function E2(t,e,n){let r=0;if(n===m0.Big)for(let i=0;i<4;i++)r+=HS(t,e+i)<<24-8*i;else for(let i=0;i<4;i++)r+=HS(t,e+i)<<8*i;return r}var Dx=(function(t){return t[t.None=0]="None",t[t.Const=1]="Const",t})(Dx||{}),Mf=class{modifiers;constructor(e=Dx.None){this.modifiers=e}hasModifier(e){return(this.modifiers&e)!==0}},ki=(function(t){return t[t.Dynamic=0]="Dynamic",t[t.Bool=1]="Bool",t[t.String=2]="String",t[t.Int=3]="Int",t[t.Number=4]="Number",t[t.Function=5]="Function",t[t.Inferred=6]="Inferred",t[t.None=7]="None",t})(ki||{}),Zr=class extends Mf{name;constructor(e,n){super(n),this.name=e}visitType(e,n){return e.visitBuiltinType(this,n)}},Xn=class extends Mf{value;typeParams;constructor(e,n,r=null){super(n),this.value=e,this.typeParams=r}visitType(e,n){return e.visitExpressionType(this,n)}};var Fh=new Zr(ki.Dynamic),vr=new Zr(ki.Inferred),C2=new Zr(ki.Bool),nX=new Zr(ki.Int),g0=new Zr(ki.Number),v0=new Zr(ki.String),rX=new Zr(ki.Function),ei=new Zr(ki.None),wc=(function(t){return t[t.Minus=0]="Minus",t[t.Plus=1]="Plus",t})(wc||{}),P=(function(t){return t[t.Equals=0]="Equals",t[t.NotEquals=1]="NotEquals",t[t.Assign=2]="Assign",t[t.Identical=3]="Identical",t[t.NotIdentical=4]="NotIdentical",t[t.Minus=5]="Minus",t[t.Plus=6]="Plus",t[t.Divide=7]="Divide",t[t.Multiply=8]="Multiply",t[t.Modulo=9]="Modulo",t[t.And=10]="And",t[t.Or=11]="Or",t[t.BitwiseOr=12]="BitwiseOr",t[t.BitwiseAnd=13]="BitwiseAnd",t[t.Lower=14]="Lower",t[t.LowerEquals=15]="LowerEquals",t[t.Bigger=16]="Bigger",t[t.BiggerEquals=17]="BiggerEquals",t[t.NullishCoalesce=18]="NullishCoalesce",t[t.Exponentiation=19]="Exponentiation",t[t.In=20]="In",t[t.AdditionAssignment=21]="AdditionAssignment",t[t.SubtractionAssignment=22]="SubtractionAssignment",t[t.MultiplicationAssignment=23]="MultiplicationAssignment",t[t.DivisionAssignment=24]="DivisionAssignment",t[t.RemainderAssignment=25]="RemainderAssignment",t[t.ExponentiationAssignment=26]="ExponentiationAssignment",t[t.AndAssignment=27]="AndAssignment",t[t.OrAssignment=28]="OrAssignment",t[t.NullishCoalesceAssignment=29]="NullishCoalesceAssignment",t})(P||{});function S2(t,e){return t==null||e==null?t==e:t.isEquivalent(e)}function kx(t,e,n){let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function Pn(t,e){return kx(t,e,(n,r)=>n.isEquivalent(r))}var Ie=class{type;sourceSpan;constructor(e,n){this.type=e||null,this.sourceSpan=n||null}prop(e,n){return new Ln(this,e,null,n)}key(e,n,r){return new Ii(this,e,n,r)}callFn(e,n,r){return new yn(this,e,null,n,r)}instantiate(e,n,r){return new Ec(this,e,n,r)}conditional(e,n=null,r){return new ti(this,e,n,null,r)}equals(e,n){return new Se(P.Equals,this,e,null,n)}notEquals(e,n){return new Se(P.NotEquals,this,e,null,n)}identical(e,n){return new Se(P.Identical,this,e,null,n)}notIdentical(e,n){return new Se(P.NotIdentical,this,e,null,n)}minus(e,n){return new Se(P.Minus,this,e,null,n)}plus(e,n){return new Se(P.Plus,this,e,null,n)}divide(e,n){return new Se(P.Divide,this,e,null,n)}multiply(e,n){return new Se(P.Multiply,this,e,null,n)}modulo(e,n){return new Se(P.Modulo,this,e,null,n)}power(e,n){return new Se(P.Exponentiation,this,e,null,n)}and(e,n){return new Se(P.And,this,e,null,n)}bitwiseOr(e,n){return new Se(P.BitwiseOr,this,e,null,n)}bitwiseAnd(e,n){return new Se(P.BitwiseAnd,this,e,null,n)}or(e,n){return new Se(P.Or,this,e,null,n)}lower(e,n){return new Se(P.Lower,this,e,null,n)}lowerEquals(e,n){return new Se(P.LowerEquals,this,e,null,n)}bigger(e,n){return new Se(P.Bigger,this,e,null,n)}biggerEquals(e,n){return new Se(P.BiggerEquals,this,e,null,n)}isBlank(e){return this.equals(A2,e)}nullishCoalesce(e,n){return new Se(P.NullishCoalesce,this,e,null,n)}toStmt(){return new qt(this,null)}},yr=class t extends Ie{name;constructor(e,n,r){super(n,r),this.name=e}isEquivalent(e){return e instanceof t&&this.name===e.name}isConstant(){return!1}visitExpression(e,n){return e.visitReadVarExpr(this,n)}clone(){return new t(this.name,this.type,this.sourceSpan)}set(e){return new Se(P.Assign,this,e,null,this.sourceSpan)}},Da=class t extends Ie{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitTypeofExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},Nf=class t extends Ie{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitVoidExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},_e=class t extends Ie{node;constructor(e,n,r){super(n,r),this.node=e}isEquivalent(e){return e instanceof t&&this.node===e.node}isConstant(){return!1}visitExpression(e,n){return e.visitWrappedNodeExpr(this,n)}clone(){return new t(this.node,this.type,this.sourceSpan)}},yn=class t extends Ie{fn;args;pure;constructor(e,n,r,i,s=!1){super(r,i),this.fn=e,this.args=n,this.pure=s}get receiver(){return this.fn}isEquivalent(e){return e instanceof t&&this.fn.isEquivalent(e.fn)&&Pn(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,n){return e.visitInvokeFunctionExpr(this,n)}clone(){return new t(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}},_c=class t extends Ie{tag;template;constructor(e,n,r,i){super(r,i),this.tag=e,this.template=n}isEquivalent(e){return e instanceof t&&this.tag.isEquivalent(e.tag)&&this.template.isEquivalent(e.template)}isConstant(){return!1}visitExpression(e,n){return e.visitTaggedTemplateLiteralExpr(this,n)}clone(){return new t(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}},Ec=class t extends Ie{classExpr;args;constructor(e,n,r,i){super(r,i),this.classExpr=e,this.args=n}isEquivalent(e){return e instanceof t&&this.classExpr.isEquivalent(e.classExpr)&&Pn(this.args,e.args)}isConstant(){return!1}visitExpression(e,n){return e.visitInstantiateExpr(this,n)}clone(){return new t(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}},ka=class t extends Ie{body;flags;constructor(e,n,r){super(null,r),this.body=e,this.flags=n}isEquivalent(e){return e instanceof t&&this.body===e.body&&this.flags===e.flags}isConstant(){return!0}visitExpression(e,n){return e.visitRegularExpressionLiteral(this,n)}clone(){return new t(this.body,this.flags,this.sourceSpan)}},Ot=class t extends Ie{value;constructor(e,n,r){super(n,r),this.value=e}isEquivalent(e){return e instanceof t&&this.value===e.value}isConstant(){return!0}visitExpression(e,n){return e.visitLiteralExpr(this,n)}clone(){return new t(this.value,this.type,this.sourceSpan)}},Cc=class t extends Ie{elements;expressions;constructor(e,n,r){super(null,r),this.elements=e,this.expressions=n}isEquivalent(e){return e instanceof t&&kx(this.elements,e.elements,(n,r)=>n.text===r.text)&&Pn(this.expressions,e.expressions)}isConstant(){return!1}visitExpression(e,n){return e.visitTemplateLiteralExpr(this,n)}clone(){return new t(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}},Rf=class t extends Ie{text;rawText;constructor(e,n,r){super(v0,n),this.text=e,this.rawText=r??Gv(Ef(e))}visitExpression(e,n){return e.visitTemplateLiteralElementExpr(this,n)}isEquivalent(e){return e instanceof t&&e.text===this.text&&e.rawText===this.rawText}isConstant(){return!0}clone(){return new t(this.text,this.sourceSpan,this.rawText)}},Ys=class{text;sourceSpan;constructor(e,n){this.text=e,this.sourceSpan=n}},xa=class{text;sourceSpan;associatedMessage;constructor(e,n,r){this.text=e,this.sourceSpan=n,this.associatedMessage=r}},b2="|",GS="@@",x2="\u241F",Pf=class t extends Ie{metaBlock;messageParts;placeHolderNames;expressions;constructor(e,n,r,i,s){super(v0,s),this.metaBlock=e,this.messageParts=n,this.placeHolderNames=r,this.expressions=i}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,n){return e.visitLocalizedString(this,n)}clone(){return new t(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}${b2}${e}`),this.metaBlock.customId&&(e=`${e}${GS}${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(n=>{e=`${e}${x2}${n}`}),qS(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){let n=this.placeHolderNames[e-1],r=this.messageParts[e],i=n.text;return n.associatedMessage?.legacyIds.length===0&&(i+=`${GS}${Ax(n.associatedMessage.messageString,n.associatedMessage.meaning)}`),qS(i,r.text,this.getMessagePartSourceSpan(e))}},Ef=t=>t.replace(/\\/g,"\\\\"),T2=t=>t.replace(/^:/,"\\:"),I2=t=>t.replace(/:/g,"\\:"),Gv=t=>t.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function qS(t,e,n){return t===""?{cooked:e,raw:Gv(T2(Ef(e))),range:n}:{cooked:`:${t}:${e}`,raw:Gv(`:${I2(Ef(t))}:${Ef(e)}`),range:n}}var ro=class t extends Ie{value;typeParams;constructor(e,n,r=null,i){super(n,i),this.value=e,this.typeParams=r}isEquivalent(e){return e instanceof t&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName}isConstant(){return!1}visitExpression(e,n){return e.visitExternalExpr(this,n)}clone(){return new t(this.value,this.type,this.typeParams,this.sourceSpan)}};var ti=class t extends Ie{condition;falseCase;trueCase;constructor(e,n,r=null,i,s){super(i||n.type,s),this.condition=e,this.falseCase=r,this.trueCase=n}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&S2(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,n){return e.visitConditionalExpr(this,n)}clone(){return new t(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}};var Sc=class t extends Ie{condition;constructor(e,n){super(C2,n),this.condition=e}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,n){return e.visitNotExpr(this,n)}clone(){return new t(this.condition.clone(),this.sourceSpan)}},Nt=class t{name;type;constructor(e,n=null){this.name=e,this.type=n}isEquivalent(e){return this.name===e.name}clone(){return new t(this.name,this.type)}},Zi=class t extends Ie{params;statements;name;constructor(e,n,r,i,s){super(r,i),this.params=e,this.statements=n,this.name=s}isEquivalent(e){return(e instanceof t||e instanceof bc)&&Pn(this.params,e.params)&&Pn(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,n){return e.visitFunctionExpr(this,n)}toDeclStmt(e,n){return new bc(e,this.params,this.statements,this.type,n,this.sourceSpan)}clone(){return new t(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}},io=class t extends Ie{params;body;constructor(e,n,r,i){super(r,i),this.params=e,this.body=n}isEquivalent(e){return!(e instanceof t)||!Pn(this.params,e.params)?!1:this.body instanceof Ie&&e.body instanceof Ie?this.body.isEquivalent(e.body):Array.isArray(this.body)&&Array.isArray(e.body)?Pn(this.body,e.body):!1}isConstant(){return!1}visitExpression(e,n){return e.visitArrowFunctionExpr(this,n)}clone(){return new t(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,n){return new _t(e,this,vr,n,this.sourceSpan)}},so=class t extends Ie{operator;expr;parens;constructor(e,n,r,i,s=!0){super(r||g0,i),this.operator=e,this.expr=n,this.parens=s}isEquivalent(e){return e instanceof t&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,n){return e.visitUnaryOperatorExpr(this,n)}clone(){return new t(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}},wr=class t extends Ie{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitParenthesizedExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},Se=class t extends Ie{operator;rhs;lhs;constructor(e,n,r,i,s){super(i||n.type,s),this.operator=e,this.rhs=r,this.lhs=n}isEquivalent(e){return e instanceof t&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,n){return e.visitBinaryOperatorExpr(this,n)}clone(){return new t(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan)}isAssignment(){let e=this.operator;return e===P.Assign||e===P.AdditionAssignment||e===P.SubtractionAssignment||e===P.MultiplicationAssignment||e===P.DivisionAssignment||e===P.RemainderAssignment||e===P.ExponentiationAssignment||e===P.AndAssignment||e===P.OrAssignment||e===P.NullishCoalesceAssignment}},Ln=class t extends Ie{receiver;name;constructor(e,n,r,i){super(r,i),this.receiver=e,this.name=n}get index(){return this.name}isEquivalent(e){return e instanceof t&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,n){return e.visitReadPropExpr(this,n)}set(e){return new Se(P.Assign,this.receiver.prop(this.name),e,null,this.sourceSpan)}clone(){return new t(this.receiver.clone(),this.name,this.type,this.sourceSpan)}},Ii=class t extends Ie{receiver;index;constructor(e,n,r,i){super(r,i),this.receiver=e,this.index=n}isEquivalent(e){return e instanceof t&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,n){return e.visitReadKeyExpr(this,n)}set(e){return new Se(P.Assign,this.receiver.key(this.index),e,null,this.sourceSpan)}clone(){return new t(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}},ni=class t extends Ie{entries;constructor(e,n,r){super(n,r),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof t&&Pn(this.entries,e.entries)}visitExpression(e,n){return e.visitLiteralArrayExpr(this,n)}clone(){return new t(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}},Ma=class t{key;value;quoted;constructor(e,n,r){this.key=e,this.value=n,this.quoted=r}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new t(this.key,this.value.clone(),this.quoted)}isConstant(){return this.value.isConstant()}},es=class t{expression;constructor(e){this.expression=e}isEquivalent(e){return e instanceof t&&this.expression.isEquivalent(e.expression)}clone(){return new t(this.expression.clone())}isConstant(){return this.expression.isConstant()}},_r=class t extends Ie{entries;valueType=null;constructor(e,n,r){super(n,r),this.entries=e,n&&(this.valueType=n.valueType)}isEquivalent(e){return e instanceof t&&Pn(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.isConstant())}visitExpression(e,n){return e.visitLiteralMapExpr(this,n)}clone(){let e=this.entries.map(n=>n.clone());return new t(e,this.type,this.sourceSpan)}};var oo=class t extends Ie{expression;constructor(e,n){super(null,n),this.expression=e}isEquivalent(e){return e instanceof t&&this.expression.isEquivalent(e.expression)}isConstant(){return this.expression.isConstant()}visitExpression(e,n){return e.visitSpreadElementExpr(this,n)}clone(){return new t(this.expression.clone(),this.sourceSpan)}},Na=new Ot(null,null,null),A2=new Ot(null,vr,null),Rt=(function(t){return t[t.None=0]="None",t[t.Final=1]="Final",t[t.Private=2]="Private",t[t.Exported=4]="Exported",t[t.Static=8]="Static",t})(Rt||{}),qv=class{text;multiline;trailingNewline;constructor(e,n,r){this.text=e,this.multiline=n,this.trailingNewline=r}toString(){return this.multiline?` ${this.text} `:this.text}},Lf=class extends qv{tags;constructor(e){super("",!0,!0),this.tags=e}toString(){return R2(this.tags)}},ao=class{modifiers;sourceSpan;leadingComments;constructor(e=Rt.None,n=null,r){this.modifiers=e,this.sourceSpan=n,this.leadingComments=r}hasModifier(e){return(this.modifiers&e)!==0}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}},_t=class t extends ao{name;value;type;constructor(e,n,r,i,s,o){super(i,s,o),this.name=e,this.value=n,this.type=r||n&&n.type||null}isEquivalent(e){return e instanceof t&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,n){return e.visitDeclareVarStmt(this,n)}},bc=class t extends ao{name;params;statements;type;constructor(e,n,r,i,s,o,a){super(s,o,a),this.name=e,this.params=n,this.statements=r,this.type=i||null}isEquivalent(e){return e instanceof t&&Pn(this.params,e.params)&&Pn(this.statements,e.statements)}visitStatement(e,n){return e.visitDeclareFunctionStmt(this,n)}},qt=class t extends ao{expr;constructor(e,n,r){super(Rt.None,n,r),this.expr=e}isEquivalent(e){return e instanceof t&&this.expr.isEquivalent(e.expr)}visitStatement(e,n){return e.visitExpressionStmt(this,n)}},Pt=class t extends ao{value;constructor(e,n=null,r){super(Rt.None,n,r),this.value=e}isEquivalent(e){return e instanceof t&&this.value.isEquivalent(e.value)}visitStatement(e,n){return e.visitReturnStmt(this,n)}},Of=class t extends ao{condition;trueCase;falseCase;constructor(e,n,r=[],i,s){super(Rt.None,i,s),this.condition=e,this.trueCase=n,this.falseCase=r}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)&&Pn(this.trueCase,e.trueCase)&&Pn(this.falseCase,e.falseCase)}visitStatement(e,n){return e.visitIfStmt(this,n)}};function D2(t=[]){return new Lf(t)}function Ee(t,e,n){return new yr(t,e,n)}function W(t,e=null,n){return new ro(t,null,e,n)}function Lt(t,e,n){return new Xn(t,e,n)}function gu(t){return new Da(t)}function Me(t,e,n){return new ni(t,e,n)}function Zn(t,e=null){return new _r(t.map(n=>new Ma(n.key,n.value,n.quoted)),e,null)}function k2(t,e){return new Sc(t,e)}function ts(t,e,n,r,i){return new Zi(t,e,n,r,i)}function ri(t,e,n,r){return new io(t,e,n,r)}function Vh(t,e,n,r,i){return new Of(t,e,n,r,i)}function M2(t,e,n,r){return new _c(t,e,n,r)}function I(t,e,n){return new Ot(t,e,n)}function N2(t,e,n,r,i){return new Pf(t,e,n,r,i)}function jS(t){let e="";if(t.tagName&&(e+=` @${t.tagName}`),t.text){if(t.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+t.text.replace(/@/g,"\\@")}return e}function R2(t){if(t.length===0)return"";if(t.length===1&&t[0].tagName&&!t[0].text)return`*${jS(t[0])} `;let e=`*
`;for(let n of t)e+=" *",e+=jS(n).replace(/\n/g,`
 * `),e+=`
`;return e+=" ",e}var P2="_c",L2={},O2=50,Ff=class t extends Ie{resolved;original;shared=!1;constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,n){return n===L2?this.original.visitExpression(e,n):this.resolved.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}},Vf=class{isClosureCompilerEnabled;statements=[];literals=new Map;literalFactories=new Map;sharedConstants=new Map;_claimedNames=new Map;nextNameIndex=0;constructor(e=!1){this.isClosureCompilerEnabled=e}getConstLiteral(e,n){if(e instanceof Ot&&!WS(e)||e instanceof Ff)return e;let r=xc.INSTANCE.keyOf(e),i=this.literals.get(r),s=!1;if(i||(i=new Ff(e),this.literals.set(r,i),s=!0),!s&&!i.shared||s&&n){let o=this.freshName(),a,l;this.isClosureCompilerEnabled&&WS(e)?(a=new Zi([],[new Pt(e)]),l=Ee(o).callFn([])):(a=e,l=Ee(o)),this.statements.push(new _t(o,a,vr,Rt.Final)),i.fixup(l)}return i}getSharedConstant(e,n){let r=e.keyOf(n);if(!this.sharedConstants.has(r)){let i=this.freshName();this.sharedConstants.set(r,Ee(i)),this.statements.push(e.toSharedConstantDeclaration(i,n))}return this.sharedConstants.get(r)}getSharedFunctionReference(e,n,r=!0){let i=e instanceof io;for(let o of this.statements)if(i&&o instanceof _t&&o.value?.isEquivalent(e)||!i&&o instanceof bc&&e instanceof Zi&&e.isEquivalent(o))return Ee(o.name);let s=r?this.uniqueName(n):n;return this.statements.push(e instanceof Zi?e.toDeclStmt(s,Rt.Final):new _t(s,e,vr,Rt.Final,e.sourceSpan)),Ee(s)}uniqueName(e,n=!0){let r=this._claimedNames.get(e)??0,i=r===0&&!n?`${e}`:`${e}${r}`;return this._claimedNames.set(e,r+1),i}freshName(){return this.uniqueName(P2)}},xc=class t{static INSTANCE=new t;keyOf(e){if(e instanceof Ot&&typeof e.value=="string")return`"${e.value}"`;if(e instanceof Ot)return String(e.value);if(e instanceof ka)return`/${e.body}/${e.flags??""}`;if(e instanceof ni){let n=[];for(let r of e.entries)n.push(this.keyOf(r));return`[${n.join(",")}]`}else if(e instanceof _r){let n=[];for(let r of e.entries)if(r instanceof es)n.push("..."+this.keyOf(r.expression));else{let i=r.key;r.quoted&&(i=`"${i}"`),n.push(i+":"+this.keyOf(r.value))}return`{${n.join(",")}}`}else{if(e instanceof ro)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof yr)return`read(${e.name})`;if(e instanceof Da)return`typeof(${this.keyOf(e.expr)})`;if(e instanceof oo)return`...${this.keyOf(e.expression)}`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}};function WS(t){return t instanceof Ot&&typeof t.value=="string"&&t.value.length>=O2}var x="@angular/core",C=(()=>{class t{static core={name:null,moduleName:x};static namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:x};static namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:x};static namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:x};static element={name:"\u0275\u0275element",moduleName:x};static elementStart={name:"\u0275\u0275elementStart",moduleName:x};static elementEnd={name:"\u0275\u0275elementEnd",moduleName:x};static domElement={name:"\u0275\u0275domElement",moduleName:x};static domElementStart={name:"\u0275\u0275domElementStart",moduleName:x};static domElementEnd={name:"\u0275\u0275domElementEnd",moduleName:x};static domElementContainer={name:"\u0275\u0275domElementContainer",moduleName:x};static domElementContainerStart={name:"\u0275\u0275domElementContainerStart",moduleName:x};static domElementContainerEnd={name:"\u0275\u0275domElementContainerEnd",moduleName:x};static domTemplate={name:"\u0275\u0275domTemplate",moduleName:x};static domListener={name:"\u0275\u0275domListener",moduleName:x};static advance={name:"\u0275\u0275advance",moduleName:x};static syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:x};static syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:x};static attribute={name:"\u0275\u0275attribute",moduleName:x};static classProp={name:"\u0275\u0275classProp",moduleName:x};static elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:x};static elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:x};static elementContainer={name:"\u0275\u0275elementContainer",moduleName:x};static styleMap={name:"\u0275\u0275styleMap",moduleName:x};static classMap={name:"\u0275\u0275classMap",moduleName:x};static styleProp={name:"\u0275\u0275styleProp",moduleName:x};static interpolate={name:"\u0275\u0275interpolate",moduleName:x};static interpolate1={name:"\u0275\u0275interpolate1",moduleName:x};static interpolate2={name:"\u0275\u0275interpolate2",moduleName:x};static interpolate3={name:"\u0275\u0275interpolate3",moduleName:x};static interpolate4={name:"\u0275\u0275interpolate4",moduleName:x};static interpolate5={name:"\u0275\u0275interpolate5",moduleName:x};static interpolate6={name:"\u0275\u0275interpolate6",moduleName:x};static interpolate7={name:"\u0275\u0275interpolate7",moduleName:x};static interpolate8={name:"\u0275\u0275interpolate8",moduleName:x};static interpolateV={name:"\u0275\u0275interpolateV",moduleName:x};static nextContext={name:"\u0275\u0275nextContext",moduleName:x};static resetView={name:"\u0275\u0275resetView",moduleName:x};static templateCreate={name:"\u0275\u0275template",moduleName:x};static defer={name:"\u0275\u0275defer",moduleName:x};static deferWhen={name:"\u0275\u0275deferWhen",moduleName:x};static deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:x};static deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:x};static deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:x};static deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:x};static deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:x};static deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:x};static deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:x};static deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:x};static deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:x};static deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:x};static deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:x};static deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:x};static deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:x};static deferHydrateWhen={name:"\u0275\u0275deferHydrateWhen",moduleName:x};static deferHydrateNever={name:"\u0275\u0275deferHydrateNever",moduleName:x};static deferHydrateOnIdle={name:"\u0275\u0275deferHydrateOnIdle",moduleName:x};static deferHydrateOnImmediate={name:"\u0275\u0275deferHydrateOnImmediate",moduleName:x};static deferHydrateOnTimer={name:"\u0275\u0275deferHydrateOnTimer",moduleName:x};static deferHydrateOnHover={name:"\u0275\u0275deferHydrateOnHover",moduleName:x};static deferHydrateOnInteraction={name:"\u0275\u0275deferHydrateOnInteraction",moduleName:x};static deferHydrateOnViewport={name:"\u0275\u0275deferHydrateOnViewport",moduleName:x};static deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:x};static conditionalCreate={name:"\u0275\u0275conditionalCreate",moduleName:x};static conditionalBranchCreate={name:"\u0275\u0275conditionalBranchCreate",moduleName:x};static conditional={name:"\u0275\u0275conditional",moduleName:x};static repeater={name:"\u0275\u0275repeater",moduleName:x};static repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:x};static repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:x};static repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:x};static componentInstance={name:"\u0275\u0275componentInstance",moduleName:x};static text={name:"\u0275\u0275text",moduleName:x};static enableBindings={name:"\u0275\u0275enableBindings",moduleName:x};static disableBindings={name:"\u0275\u0275disableBindings",moduleName:x};static getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:x};static textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:x};static textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:x};static textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:x};static textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:x};static textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:x};static textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:x};static textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:x};static textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:x};static textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:x};static textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:x};static restoreView={name:"\u0275\u0275restoreView",moduleName:x};static pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:x};static pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:x};static pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:x};static pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:x};static pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:x};static pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:x};static pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:x};static pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:x};static pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:x};static pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:x};static pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:x};static pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:x};static pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:x};static pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:x};static pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:x};static domProperty={name:"\u0275\u0275domProperty",moduleName:x};static ariaProperty={name:"\u0275\u0275ariaProperty",moduleName:x};static property={name:"\u0275\u0275property",moduleName:x};static control={name:"\u0275\u0275control",moduleName:x};static controlCreate={name:"\u0275\u0275controlCreate",moduleName:x};static animationEnterListener={name:"\u0275\u0275animateEnterListener",moduleName:x};static animationLeaveListener={name:"\u0275\u0275animateLeaveListener",moduleName:x};static animationEnter={name:"\u0275\u0275animateEnter",moduleName:x};static animationLeave={name:"\u0275\u0275animateLeave",moduleName:x};static i18n={name:"\u0275\u0275i18n",moduleName:x};static i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:x};static i18nExp={name:"\u0275\u0275i18nExp",moduleName:x};static i18nStart={name:"\u0275\u0275i18nStart",moduleName:x};static i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:x};static i18nApply={name:"\u0275\u0275i18nApply",moduleName:x};static i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:x};static pipe={name:"\u0275\u0275pipe",moduleName:x};static projection={name:"\u0275\u0275projection",moduleName:x};static projectionDef={name:"\u0275\u0275projectionDef",moduleName:x};static reference={name:"\u0275\u0275reference",moduleName:x};static inject={name:"\u0275\u0275inject",moduleName:x};static injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:x};static directiveInject={name:"\u0275\u0275directiveInject",moduleName:x};static invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:x};static invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:x};static templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:x};static forwardRef={name:"forwardRef",moduleName:x};static resolveForwardRef={name:"resolveForwardRef",moduleName:x};static replaceMetadata={name:"\u0275\u0275replaceMetadata",moduleName:x};static getReplaceMetadataURL={name:"\u0275\u0275getReplaceMetadataURL",moduleName:x};static \u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:x};static declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:x};static InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:x};static resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:x};static resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:x};static resolveBody={name:"\u0275\u0275resolveBody",moduleName:x};static getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:x};static defineComponent={name:"\u0275\u0275defineComponent",moduleName:x};static declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:x};static setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:x};static ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:x};static ViewEncapsulation={name:"ViewEncapsulation",moduleName:x};static ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:x};static FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:x};static declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:x};static FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:x};static defineDirective={name:"\u0275\u0275defineDirective",moduleName:x};static declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:x};static DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:x};static InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:x};static InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:x};static defineInjector={name:"\u0275\u0275defineInjector",moduleName:x};static declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:x};static NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:x};static ModuleWithProviders={name:"ModuleWithProviders",moduleName:x};static defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:x};static declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:x};static setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:x};static registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:x};static PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:x};static definePipe={name:"\u0275\u0275definePipe",moduleName:x};static declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:x};static declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:x};static declareClassMetadataAsync={name:"\u0275\u0275ngDeclareClassMetadataAsync",moduleName:x};static setClassMetadata={name:"\u0275setClassMetadata",moduleName:x};static setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:x};static setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:x};static queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:x};static viewQuery={name:"\u0275\u0275viewQuery",moduleName:x};static loadQuery={name:"\u0275\u0275loadQuery",moduleName:x};static contentQuery={name:"\u0275\u0275contentQuery",moduleName:x};static viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:x};static contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:x};static queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:x};static twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:x};static twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:x};static twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:x};static declareLet={name:"\u0275\u0275declareLet",moduleName:x};static storeLet={name:"\u0275\u0275storeLet",moduleName:x};static readContextLet={name:"\u0275\u0275readContextLet",moduleName:x};static attachSourceLocations={name:"\u0275\u0275attachSourceLocations",moduleName:x};static NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:x};static InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:x};static ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:x};static HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:x};static ExternalStylesFeature={name:"\u0275\u0275ExternalStylesFeature",moduleName:x};static listener={name:"\u0275\u0275listener",moduleName:x};static getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:x};static sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:x};static sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:x};static validateAttribute={name:"\u0275\u0275validateAttribute",moduleName:x};static sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:x};static sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:x};static sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:x};static sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:x};static trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:x};static trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:x};static inputDecorator={name:"Input",moduleName:x};static outputDecorator={name:"Output",moduleName:x};static viewChildDecorator={name:"ViewChild",moduleName:x};static viewChildrenDecorator={name:"ViewChildren",moduleName:x};static contentChildDecorator={name:"ContentChild",moduleName:x};static contentChildrenDecorator={name:"ContentChildren",moduleName:x};static InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:x};static UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:x};static unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:x};static assertType={name:"\u0275assertType",moduleName:x}}return t})(),F2=/-+([a-z0-9])/g;function V2(t){return t.replace(F2,(...e)=>e[1].toUpperCase())}function B2(t,e){return Mx(t,":",e)}function U2(t,e){return Mx(t,".",e)}function Mx(t,e,n){let r=t.indexOf(e);return r==-1?n:[t.slice(0,r).trim(),t.slice(r+1).trim()]}function $2(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319&&t.length>n+1){let i=t.charCodeAt(n+1);i>=56320&&i<=57343&&(n++,r=(r-55296<<10)+i-56320+65536)}r<=127?e.push(r):r<=2047?e.push(r>>6&31|192,r&63|128):r<=65535?e.push(r>>12|224,r>>6&63|128,r&63|128):r<=2097151&&e.push(r>>18&7|240,r>>12&63|128,r>>6&63|128,r&63|128)}return e}function Nx(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Nx).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;if(!t.toString)return"object";let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}var jv=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},hc=globalThis,H2=/^([1-9]|1[0-8])\./;function Rx(t){return t.startsWith("0.")?!0:!H2.test(t)}var G2=3,q2="# sourceMappingURL=data:application/json;base64,",Wv=class{file;sourcesContent=new Map;lines=[];lastCol0=0;hasMappings=!1;constructor(e=null){this.file=e}addSource(e,n=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,n),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,n,r,i){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(n!=null&&!this.sourcesContent.has(n))throw new Error(`Unknown source file "${n}"`);if(e==null)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(n&&(r==null||i==null))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:n,sourceLine0:r,sourceCol0:i}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;let e=new Map,n=[],r=[];Array.from(this.sourcesContent.keys()).forEach((c,u)=>{e.set(c,u),n.push(c),r.push(this.sourcesContent.get(c)||null)});let i="",s=0,o=0,a=0,l=0;return this.lines.forEach(c=>{s=0,i+=c.map(u=>{let h=af(u.col0-s);return s=u.col0,u.sourceUrl!=null&&(h+=af(e.get(u.sourceUrl)-o),o=e.get(u.sourceUrl),h+=af(u.sourceLine0-a),a=u.sourceLine0,h+=af(u.sourceCol0-l),l=u.sourceCol0),h}).join(","),i+=";"}),i=i.slice(0,-1),{file:this.file||"",version:G2,sourceRoot:"",sources:n,sourcesContent:r,mappings:i}}toJsComment(){return this.hasMappings?"//"+q2+j2(JSON.stringify(this,null,0)):""}};function j2(t){let e="",n=$2(t);for(let r=0;r<n.length;){let i=n[r++],s=r<n.length?n[r++]:null,o=r<n.length?n[r++]:null;e+=cc(i>>2),e+=cc((i&3)<<4|(s===null?0:s>>4)),e+=s===null?"=":cc((s&15)<<2|(o===null?0:o>>6)),e+=s===null||o===null?"=":cc(o&63)}return e}function af(t){t=t<0?(-t<<1)+1:t<<1;let e="";do{let n=t&31;t=t>>5,t>0&&(n=n|32),e+=cc(n)}while(t>0);return e}var W2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function cc(t){if(t<0||t>=64)throw new Error("Can only encode value in the range [0, 63]");return W2[t]}var z2=/'|\\|\n|\r|\$/g,J2=/^[$A-Z_][0-9A-Z_$]*$/i,zv="  ",Bf=class{indent;partsLength=0;parts=[];srcSpans=[];constructor(e){this.indent=e}},Y2=new Map([[P.And,"&&"],[P.Bigger,">"],[P.BiggerEquals,">="],[P.BitwiseOr,"|"],[P.BitwiseAnd,"&"],[P.Divide,"/"],[P.Assign,"="],[P.Equals,"=="],[P.Identical,"==="],[P.Lower,"<"],[P.LowerEquals,"<="],[P.Minus,"-"],[P.Modulo,"%"],[P.Exponentiation,"**"],[P.Multiply,"*"],[P.NotEquals,"!="],[P.NotIdentical,"!=="],[P.NullishCoalesce,"??"],[P.Or,"||"],[P.Plus,"+"],[P.In,"in"],[P.AdditionAssignment,"+="],[P.SubtractionAssignment,"-="],[P.MultiplicationAssignment,"*="],[P.DivisionAssignment,"/="],[P.RemainderAssignment,"%="],[P.ExponentiationAssignment,"**="],[P.AndAssignment,"&&="],[P.OrAssignment,"||="],[P.NullishCoalesceAssignment,"??="]]),Jv=class t{_indent;static createRoot(){return new t(0)}_lines;constructor(e){this._indent=e,this._lines=[new Bf(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,n=""){this.print(e||null,n,!0)}lineIsEmpty(){return this._currentLine.parts.length===0}lineLength(){return this._currentLine.indent*zv.length+this._currentLine.partsLength}print(e,n,r=!1){n.length>0&&(this._currentLine.parts.push(n),this._currentLine.partsLength+=n.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),r&&this._lines.push(new Bf(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?zS(e.indent)+e.parts.join(""):"").join(`
`)}toSourceMapGenerator(e,n=0){let r=new Wv(e),i=!1,s=()=>{i||(r.addSource(e," ").addMapping(0,e,0,0),i=!0)};for(let o=0;o<n;o++)r.addLine(),s();return this.sourceLines.forEach((o,a)=>{r.addLine();let l=o.srcSpans,c=o.parts,u=o.indent*zv.length,h=0;for(;h<l.length&&!l[h];)u+=c[h].length,h++;for(h<l.length&&a===0&&u===0?i=!0:s();h<l.length;){let p=l[h],m=p.start.file,g=p.start.line,y=p.start.col;for(r.addSource(m.url,m.content).addMapping(u,m.url,g,y),u+=c[h].length,h++;h<l.length&&(p===l[h]||!l[h]);)u+=c[h].length,h++}}),r}spanOf(e,n){let r=this._lines[e];if(r){let i=n-zS(r.indent).length;for(let s=0;s<r.parts.length;s++){let o=r.parts[s];if(o.length>i)return r.srcSpans[s];i-=o.length}}return null}get sourceLines(){return this._lines.length&&this._lines[this._lines.length-1].parts.length===0?this._lines.slice(0,-1):this._lines}},Yv=class{_escapeDollarInStrings;lastIfCondition=null;constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,n){if(e.leadingComments!==void 0)for(let r of e.leadingComments)r instanceof Lf?n.print(e,`/*${r.toString()}*/`,r.trailingNewline):r.multiline?n.print(e,`/* ${r.text} */`,r.trailingNewline):r.text.split(`
`).forEach(i=>{n.println(e,`// ${i}`)})}visitExpressionStmt(e,n){return this.printLeadingComments(e,n),e.expr.visitExpression(this,n),n.println(e,";"),null}visitReturnStmt(e,n){return this.printLeadingComments(e,n),n.print(e,"return "),e.value.visitExpression(this,n),n.println(e,";"),null}visitIfStmt(e,n){this.printLeadingComments(e,n),n.print(e,"if ("),this.lastIfCondition=e.condition,e.condition.visitExpression(this,n),this.lastIfCondition=null,n.print(e,") {");let r=e.falseCase!=null&&e.falseCase.length>0;return e.trueCase.length<=1&&!r?(n.print(e," "),this.visitAllStatements(e.trueCase,n),n.removeEmptyLastLine(),n.print(e," ")):(n.println(),n.incIndent(),this.visitAllStatements(e.trueCase,n),n.decIndent(),r&&(n.println(e,"} else {"),n.incIndent(),this.visitAllStatements(e.falseCase,n),n.decIndent())),n.println(e,"}"),null}visitInvokeFunctionExpr(e,n){let r=e.fn instanceof io;return r&&n.print(e.fn,"("),e.fn.visitExpression(this,n),r&&n.print(e.fn,")"),n.print(e,"("),this.visitAllExpressions(e.args,n,","),n.print(e,")"),null}visitTaggedTemplateLiteralExpr(e,n){return e.tag.visitExpression(this,n),e.template.visitExpression(this,n),null}visitTemplateLiteralExpr(e,n){n.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(n.print(i,"${"),i.visitExpression(this,n),n.print(i,"}"))}n.print(e,"`")}visitTemplateLiteralElementExpr(e,n){n.print(e,e.rawText)}visitWrappedNodeExpr(e,n){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,n){n.print(e,"typeof "),e.expr.visitExpression(this,n)}visitVoidExpr(e,n){n.print(e,"void "),e.expr.visitExpression(this,n)}visitReadVarExpr(e,n){return n.print(e,e.name),null}visitInstantiateExpr(e,n){return n.print(e,"new "),e.classExpr.visitExpression(this,n),n.print(e,"("),this.visitAllExpressions(e.args,n,","),n.print(e,")"),null}visitLiteralExpr(e,n){let r=e.value;return typeof r=="string"?n.print(e,js(r,this._escapeDollarInStrings)):n.print(e,`${r}`),null}visitRegularExpressionLiteral(e,n){return n.print(e,`/${e.body}/${e.flags||""}`),null}visitLocalizedString(e,n){let r=e.serializeI18nHead();n.print(e,"$localize `"+r.raw);for(let i=1;i<e.messageParts.length;i++)n.print(e,"${"),e.expressions[i-1].visitExpression(this,n),n.print(e,`}${e.serializeI18nTemplatePart(i).raw}`);return n.print(e,"`"),null}visitConditionalExpr(e,n){return n.print(e,"("),e.condition.visitExpression(this,n),n.print(e,"? "),e.trueCase.visitExpression(this,n),n.print(e,": "),e.falseCase.visitExpression(this,n),n.print(e,")"),null}visitDynamicImportExpr(e,n){n.print(e,`import(${e.url})`)}visitNotExpr(e,n){return n.print(e,"!"),e.condition.visitExpression(this,n),null}visitUnaryOperatorExpr(e,n){let r;switch(e.operator){case wc.Plus:r="+";break;case wc.Minus:r="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}let i=e!==this.lastIfCondition;return i&&n.print(e,"("),n.print(e,r),e.expr.visitExpression(this,n),i&&n.print(e,")"),null}visitBinaryOperatorExpr(e,n){let r=Y2.get(e.operator);if(!r)throw new Error(`Unknown operator ${e.operator}`);let i=e!==this.lastIfCondition;return i&&n.print(e,"("),e.lhs.visitExpression(this,n),n.print(e,` ${r} `),e.rhs.visitExpression(this,n),i&&n.print(e,")"),null}visitReadPropExpr(e,n){return e.receiver.visitExpression(this,n),n.print(e,"."),n.print(e,e.name),null}visitReadKeyExpr(e,n){return e.receiver.visitExpression(this,n),n.print(e,"["),e.index.visitExpression(this,n),n.print(e,"]"),null}visitLiteralArrayExpr(e,n){return n.print(e,"["),this.visitAllExpressions(e.entries,n,","),n.print(e,"]"),null}visitLiteralMapExpr(e,n){return n.print(e,"{"),this.visitAllObjects(r=>{r instanceof es?(n.print(e,"..."),r.expression.visitExpression(this,n)):(n.print(e,`${js(r.key,this._escapeDollarInStrings,r.quoted)}:`),r.value.visitExpression(this,n))},e.entries,n,","),n.print(e,"}"),null}visitCommaExpr(e,n){return n.print(e,"("),this.visitAllExpressions(e.parts,n,","),n.print(e,")"),null}visitParenthesizedExpr(e,n){e.expr.visitExpression(this,n)}visitSpreadElementExpr(e,n){n.print(e,"..."),e.expression.visitExpression(this,n)}visitAllExpressions(e,n,r){this.visitAllObjects(i=>i.visitExpression(this,n),e,n,r)}visitAllObjects(e,n,r,i){let s=!1;for(let o=0;o<n.length;o++)o>0&&(r.lineLength()>80?(r.print(null,i,!0),s||(r.incIndent(),r.incIndent(),s=!0)):r.print(null,i,!1)),e(n[o]);s&&(r.decIndent(),r.decIndent())}visitAllStatements(e,n){e.forEach(r=>r.visitStatement(this,n))}};function js(t,e,n=!0){if(t==null)return null;let r=t.replace(z2,(...s)=>s[0]=="$"?e?"\\$":"$":s[0]==`
`?"\\n":s[0]=="\r"?"\\r":`\\${s[0]}`);return n||!J2.test(r)?`'${r}'`:r}function zS(t){let e="";for(let n=0;n<t;n++)e+=zv;return e}function Bh(t,e){if(e===0)return Lt(t);let n=[];for(let r=0;r<e;r++)n.push(Fh);return Lt(t,void 0,n)}function K2(t,e){let n=js(e,!1,!1);return n!==e?`${t}[${n}]`:`${t}.${e}`}function Q2(t){return X2("ngJitMode",t)}function X2(t,e){let n=new ro({name:t,moduleName:null}),r=new Se(P.Identical,new Da(n),I("undefined")),i=new Se(P.Or,r,n,void 0,void 0);return new Se(P.And,i,e)}function yt(t){let e=new _e(t);return{value:e,type:e}}function Ws(t,e){let n=Me(t.map(r=>r.value));return e?ri([],n):n}function y0(t,e){return{expression:t,forwardRef:e}}function Z2({expression:t,forwardRef:e}){switch(e){case 0:case 1:return t;case 2:return eR(t)}}function eR(t){return W(C.forwardRef).callFn([ri([],t)])}var Uf=(function(t){return t[t.Class=0]="Class",t[t.Function=1]="Function",t})(Uf||{});function Hs(t){let e=Ee("__ngFactoryType__"),n=null,r=YS(t)?e:new Se(P.Or,e,t.type.value),i=null;t.deps!==null?t.deps!=="invalid"&&(i=new Ec(r,JS(t.deps,t.target))):(n=Ee(`\u0275${t.name}_BaseFactory`),i=n.callFn([r]));let s=[],o=null;function a(c){let u=Ee("__ngConditionalFactory__");s.push(new _t(u.name,Na,vr));let h=i!==null?u.set(i).toStmt():W(C.invalidFactory).callFn([]).toStmt();return s.push(Vh(e,[h],[u.set(c).toStmt()])),u}if(YS(t)){let c=JS(t.delegateDeps,t.target),u=new(t.delegateType===Uf.Class?Ec:yn)(t.delegate,c);o=a(u)}else sR(t)?o=a(t.expression):o=i;if(o===null)s.push(W(C.invalidFactory).callFn([]).toStmt());else if(n!==null){let c=W(C.getInheritedFactory).callFn([t.type.value]),u=new Se(P.Or,n,n.set(c));s.push(new Pt(u.callFn([r])))}else s.push(new Pt(o));let l=ts([new Nt(e.name,Fh)],s,vr,void 0,`${t.name}_Factory`);return n!==null&&(l=ri([],[new _t(n.name),new Pt(l)]).callFn([],void 0,!0)),{expression:l,statements:[],type:tR(t)}}function tR(t){let e=t.deps!==null&&t.deps!=="invalid"?rR(t.deps):ei;return Lt(W(C.FactoryDeclaration,[Bh(t.type.type,t.typeArgumentCount),e]))}function JS(t,e){return t.map((n,r)=>nR(n,e,r))}function nR(t,e,n){if(t.token===null)return W(C.invalidFactoryDep).callFn([I(n)]);if(t.attributeNameType===null){let r=0|(t.self?2:0)|(t.skipSelf?4:0)|(t.host?1:0)|(t.optional?8:0)|(e===Ci.Pipe?16:0),i=r!==0||t.optional?I(r):null,s=[t.token];i&&s.push(i);let o=oR(e);return W(o).callFn(s)}else return W(C.injectAttribute).callFn([t.token])}function rR(t){let e=!1,n=t.map(r=>{let i=iR(r);return i!==null?(e=!0,i):I(null)});return e?Lt(Me(n)):ei}function iR(t){let e=[];return t.attributeNameType!==null&&e.push({key:"attribute",value:t.attributeNameType,quoted:!1}),t.optional&&e.push({key:"optional",value:I(!0),quoted:!1}),t.host&&e.push({key:"host",value:I(!0),quoted:!1}),t.self&&e.push({key:"self",value:I(!0),quoted:!1}),t.skipSelf&&e.push({key:"skipSelf",value:I(!0),quoted:!1}),e.length>0?Zn(e):null}function YS(t){return t.delegateType!==void 0}function sR(t){return t.expression!==void 0}function oR(t){switch(t){case Ci.Component:case Ci.Directive:case Ci.Pipe:return C.directiveInject;case Ci.NgModule:case Ci.Injectable:default:return C.inject}}var lo=class{start;end;constructor(e,n){this.start=e,this.end=n}toAbsolute(e){return new Mn(e+this.start,e+this.end)}},$e=class{span;sourceSpan;constructor(e,n){this.span=e,this.sourceSpan=n}toString(){return"AST"}},Tc=class extends $e{nameSpan;constructor(e,n,r){super(e,n),this.nameSpan=r}},Qt=class extends $e{visit(e,n=null){}},ii=class extends $e{visit(e,n=null){return e.visitImplicitReceiver(this,n)}},Ic=class extends $e{visit(e,n=null){return e.visitThisReceiver?.(this,n)}},Ra=class extends $e{expressions;constructor(e,n,r){super(e,n),this.expressions=r}visit(e,n=null){return e.visitChain(this,n)}},$f=class extends $e{condition;trueExp;falseExp;constructor(e,n,r,i,s){super(e,n),this.condition=r,this.trueExp=i,this.falseExp=s}visit(e,n=null){return e.visitConditional(this,n)}},Qr=class extends Tc{receiver;name;constructor(e,n,r,i,s){super(e,n,r),this.receiver=i,this.name=s}visit(e,n=null){return e.visitPropertyRead(this,n)}},Ac=class extends Tc{receiver;name;constructor(e,n,r,i,s){super(e,n,r),this.receiver=i,this.name=s}visit(e,n=null){return e.visitSafePropertyRead(this,n)}},co=class extends $e{receiver;key;constructor(e,n,r,i){super(e,n),this.receiver=r,this.key=i}visit(e,n=null){return e.visitKeyedRead(this,n)}},Dc=class extends $e{receiver;key;constructor(e,n,r,i){super(e,n),this.receiver=r,this.key=i}visit(e,n=null){return e.visitSafeKeyedRead(this,n)}},Cf=(function(t){return t[t.ReferencedByName=0]="ReferencedByName",t[t.ReferencedDirectly=1]="ReferencedDirectly",t})(Cf||{}),Hf=class extends Tc{exp;name;args;type;constructor(e,n,r,i,s,o,a){super(e,n,a),this.exp=r,this.name=i,this.args=s,this.type=o}visit(e,n=null){return e.visitPipe(this,n)}},pn=class extends $e{value;constructor(e,n,r){super(e,n),this.value=r}visit(e,n=null){return e.visitLiteralPrimitive(this,n)}},kc=class extends $e{expressions;constructor(e,n,r){super(e,n),this.expressions=r}visit(e,n=null){return e.visitLiteralArray(this,n)}},Gf=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitSpreadElement(this,n)}},uo=class extends $e{keys;values;constructor(e,n,r,i){super(e,n),this.keys=r,this.values=i}visit(e,n=null){return e.visitLiteralMap(this,n)}},vu=class extends $e{strings;expressions;constructor(e,n,r,i){super(e,n),this.strings=r,this.expressions=i}visit(e,n=null){return e.visitInterpolation(this,n)}},Xt=class extends $e{operation;left;right;constructor(e,n,r,i,s){super(e,n),this.operation=r,this.left=i,this.right=s}visit(e,n=null){return e.visitBinary(this,n)}static isAssignmentOperation(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="||e==="**="||e==="&&="||e==="||="||e==="??="}},Ta=class t extends Xt{operator;expr;left=null;right=null;operation=null;static createMinus(e,n,r){return new t(e,n,"-",r,"-",new pn(e,n,0),r)}static createPlus(e,n,r){return new t(e,n,"+",r,"-",r,new pn(e,n,0))}constructor(e,n,r,i,s,o,a){super(e,n,s,o,a),this.operator=r,this.expr=i}visit(e,n=null){return e.visitUnary!==void 0?e.visitUnary(this,n):e.visitBinary(this,n)}},Mc=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitPrefixNot(this,n)}},Nc=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitTypeofExpression(this,n)}},Rc=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitVoidExpression(this,n)}},Pc=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitNonNullAssert(this,n)}},Pa=class extends $e{receiver;args;argumentSpan;constructor(e,n,r,i,s){super(e,n),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,n=null){return e.visitCall(this,n)}},qf=class extends $e{receiver;args;argumentSpan;constructor(e,n,r,i,s){super(e,n),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,n=null){return e.visitSafeCall(this,n)}},Lc=class extends $e{tag;template;constructor(e,n,r,i){super(e,n),this.tag=r,this.template=i}visit(e,n){return e.visitTaggedTemplateLiteral(this,n)}},Oc=class extends $e{elements;expressions;constructor(e,n,r,i){super(e,n),this.elements=r,this.expressions=i}visit(e,n){return e.visitTemplateLiteral(this,n)}},jf=class extends $e{text;constructor(e,n,r){super(e,n),this.text=r}visit(e,n){return e.visitTemplateLiteralElement(this,n)}},Fc=class extends $e{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n){return e.visitParenthesizedExpression(this,n)}},Wf=class extends $e{body;flags;constructor(e,n,r,i){super(e,n),this.body=r,this.flags=i}visit(e,n){return e.visitRegularExpressionLiteral(this,n)}},Mn=class{start;end;constructor(e,n){this.start=e,this.end=n}},mn=class extends $e{ast;source;location;errors;constructor(e,n,r,i,s){super(new lo(0,n===null?0:n.length),new Mn(i,n===null?i:i+n.length)),this.ast=e,this.source=n,this.location=r,this.errors=s}visit(e,n=null){return e.visitASTWithSource?e.visitASTWithSource(this,n):this.ast.visit(e,n)}toString(){return`${this.source} in ${this.location}`}},Vc=class{sourceSpan;key;value;constructor(e,n,r){this.sourceSpan=e,this.key=n,this.value=r}},Kv=class{sourceSpan;key;value;constructor(e,n,r){this.sourceSpan=e,this.key=n,this.value=r}},La=class{visit(e,n){e.visit(this,n)}visitUnary(e,n){this.visit(e.expr,n)}visitBinary(e,n){this.visit(e.left,n),this.visit(e.right,n)}visitChain(e,n){this.visitAll(e.expressions,n)}visitConditional(e,n){this.visit(e.condition,n),this.visit(e.trueExp,n),this.visit(e.falseExp,n)}visitPipe(e,n){this.visit(e.exp,n),this.visitAll(e.args,n)}visitImplicitReceiver(e,n){}visitThisReceiver(e,n){}visitInterpolation(e,n){this.visitAll(e.expressions,n)}visitKeyedRead(e,n){this.visit(e.receiver,n),this.visit(e.key,n)}visitLiteralArray(e,n){this.visitAll(e.expressions,n)}visitLiteralMap(e,n){this.visitAll(e.values,n)}visitLiteralPrimitive(e,n){}visitPrefixNot(e,n){this.visit(e.expression,n)}visitTypeofExpression(e,n){this.visit(e.expression,n)}visitVoidExpression(e,n){this.visit(e.expression,n)}visitNonNullAssert(e,n){this.visit(e.expression,n)}visitPropertyRead(e,n){this.visit(e.receiver,n)}visitSafePropertyRead(e,n){this.visit(e.receiver,n)}visitSafeKeyedRead(e,n){this.visit(e.receiver,n),this.visit(e.key,n)}visitCall(e,n){this.visit(e.receiver,n),this.visitAll(e.args,n)}visitSafeCall(e,n){this.visit(e.receiver,n),this.visitAll(e.args,n)}visitTemplateLiteral(e,n){for(let r=0;r<e.elements.length;r++){this.visit(e.elements[r],n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&this.visit(i,n)}}visitTemplateLiteralElement(e,n){}visitTaggedTemplateLiteral(e,n){this.visit(e.tag,n),this.visit(e.template,n)}visitParenthesizedExpression(e,n){this.visit(e.expression,n)}visitRegularExpressionLiteral(e,n){}visitSpreadElement(e,n){this.visit(e.expression,n)}visitAll(e,n){for(let r of e)this.visit(r,n)}},_a=class{name;expression;type;sourceSpan;keySpan;valueSpan;isLiteral;isLegacyAnimation;isAnimation;constructor(e,n,r,i,s,o){this.name=e,this.expression=n,this.type=r,this.sourceSpan=i,this.keySpan=s,this.valueSpan=o,this.isLiteral=this.type===zr.LITERAL_ATTR,this.isLegacyAnimation=this.type===zr.LEGACY_ANIMATION,this.isAnimation=this.type===zr.ANIMATION}},zr=(function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.LITERAL_ATTR=1]="LITERAL_ATTR",t[t.LEGACY_ANIMATION=2]="LEGACY_ANIMATION",t[t.TWO_WAY=3]="TWO_WAY",t[t.ANIMATION=4]="ANIMATION",t})(zr||{}),tn=(function(t){return t[t.Regular=0]="Regular",t[t.LegacyAnimation=1]="LegacyAnimation",t[t.TwoWay=2]="TwoWay",t[t.Animation=3]="Animation",t})(tn||{}),zf=class{name;targetOrPhase;type;handler;sourceSpan;handlerSpan;keySpan;constructor(e,n,r,i,s,o,a){this.name=e,this.targetOrPhase=n,this.type=r,this.handler=i,this.sourceSpan=s,this.handlerSpan=o,this.keySpan=a}},Qv=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}},be=(function(t){return t[t.Property=0]="Property",t[t.Attribute=1]="Attribute",t[t.Class=2]="Class",t[t.Style=3]="Style",t[t.LegacyAnimation=4]="LegacyAnimation",t[t.TwoWay=5]="TwoWay",t[t.Animation=6]="Animation",t})(be||{}),Jf=class{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.type=n,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l}},Jr=(function(t){return t[t.RAW_TEXT=0]="RAW_TEXT",t[t.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",t[t.PARSABLE_DATA=2]="PARSABLE_DATA",t})(Jr||{});function Er(t,e=!0){if(t[0]!=":")return[null,t];let n=t.indexOf(":",1);if(n===-1){if(e)throw new Error(`Unsupported format "${t}" expecting ":namespace:name"`);return[null,t]}return[t.slice(1,n),t.slice(n+1)]}function KS(t){return Er(t)[1]==="ng-container"}function Xv(t){return Er(t)[1]==="ng-content"}function aR(t){return Er(t)[1]==="ng-template"}function Zv(t){return t===null?null:Er(t)[0]}function Sf(t,e){return t?`:${t}:${e}`:e}var Uh=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e){throw new Error("visit() not implemented for Comment")}},zs=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e){return e.visitText(this)}},Oa=class{value;sourceSpan;i18n;constructor(e,n,r){this.value=e,this.sourceSpan=n,this.i18n=r}visit(e){return e.visitBoundText(this)}},Fa=class{name;value;sourceSpan;keySpan;valueSpan;i18n;constructor(e,n,r,i,s,o){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s,this.i18n=o}visit(e){return e.visitTextAttribute(this)}},ey=class t{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;i18n;constructor(e,n,r,i,s,o,a,l,c){this.name=e,this.type=n,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l,this.i18n=c}static fromBoundElementProperty(e,n){if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new t(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,n)}visit(e){return e.visitBoundAttribute(this)}},ty=class t{name;type;handler;target;phase;sourceSpan;handlerSpan;keySpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.type=n,this.handler=r,this.target=i,this.phase=s,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=l}static fromParsedEvent(e){let n=e.type===tn.Regular?e.targetOrPhase:null,r=e.type===tn.LegacyAnimation?e.targetOrPhase:null;if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new t(e.name,e.type,e.handler,n,r,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}},si=class{name;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;isVoid;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){this.name=e,this.attributes=n,this.inputs=r,this.outputs=i,this.directives=s,this.children=o,this.references=a,this.isSelfClosing=l,this.sourceSpan=c,this.startSourceSpan=u,this.endSourceSpan=h,this.isVoid=p,this.i18n=m}visit(e){return e.visitElement(this)}},oi=class{nameSpan;sourceSpan;prefetchSpan;whenOrOnSourceSpan;hydrateSpan;constructor(e,n,r,i,s){this.nameSpan=e,this.sourceSpan=n,this.prefetchSpan=r,this.whenOrOnSourceSpan=i,this.hydrateSpan=s}visit(e){return e.visitDeferredTrigger(this)}},Yf=class extends oi{value;constructor(e,n,r,i,s){super(null,n,r,i,s),this.value=e}},ny=class extends oi{},ry=class extends oi{},iy=class extends oi{},Kf=class extends oi{reference;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.reference=e}},sy=class extends oi{delay;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.delay=e}},Qf=class extends oi{reference;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.reference=e}},Bc=class extends oi{reference;options;constructor(e,n,r,i,s,o,a){super(r,i,s,o,a),this.reference=e,this.options=n}},On=class{nameSpan;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i){this.nameSpan=e,this.sourceSpan=n,this.startSourceSpan=r,this.endSourceSpan=i}},Uc=class extends On{children;minimumTime;i18n;constructor(e,n,r,i,s,o,a){super(r,i,s,o),this.children=e,this.minimumTime=n,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}},$c=class extends On{children;afterTime;minimumTime;i18n;constructor(e,n,r,i,s,o,a,l){super(i,s,o,a),this.children=e,this.afterTime=n,this.minimumTime=r,this.i18n=l}visit(e){return e.visitDeferredBlockLoading(this)}},Hc=class extends On{children;i18n;constructor(e,n,r,i,s,o){super(n,r,i,s),this.children=e,this.i18n=o}visit(e){return e.visitDeferredBlockError(this)}},fo=class extends On{children;placeholder;loading;error;mainBlockSpan;i18n;triggers;prefetchTriggers;hydrateTriggers;definedTriggers;definedPrefetchTriggers;definedHydrateTriggers;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){super(l,c,h,p),this.children=e,this.placeholder=s,this.loading=o,this.error=a,this.mainBlockSpan=u,this.i18n=m,this.triggers=n,this.prefetchTriggers=r,this.hydrateTriggers=i,this.definedTriggers=Object.keys(n),this.definedPrefetchTriggers=Object.keys(r),this.definedHydrateTriggers=Object.keys(i)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedHydrateTriggers,this.hydrateTriggers,e),this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),_v(e,this.children);let n=[this.placeholder,this.loading,this.error].filter(r=>r!==null);_v(e,n)}visitTriggers(e,n,r){_v(r,e.map(i=>n[i]))}},Xf=class extends On{expression;groups;unknownBlocks;constructor(e,n,r,i,s,o,a){super(a,i,s,o),this.expression=e,this.groups=n,this.unknownBlocks=r}visit(e){return e.visitSwitchBlock(this)}},oy=class extends On{expression;constructor(e,n,r,i,s){super(s,n,r,i),this.expression=e}visit(e){return e.visitSwitchBlockCase(this)}},Gc=class extends On{cases;children;i18n;constructor(e,n,r,i,s,o,a){super(o,r,i,s),this.cases=e,this.children=n,this.i18n=a}visit(e){return e.visitSwitchBlockCaseGroup(this)}},Va=class extends On{item;expression;trackBy;trackKeywordSpan;contextVariables;children;empty;mainBlockSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){super(p,l,u,h),this.item=e,this.expression=n,this.trackBy=r,this.trackKeywordSpan=i,this.contextVariables=s,this.children=o,this.empty=a,this.mainBlockSpan=c,this.i18n=m}visit(e){return e.visitForLoopBlock(this)}},qc=class extends On{children;i18n;constructor(e,n,r,i,s,o){super(s,n,r,i),this.children=e,this.i18n=o}visit(e){return e.visitForLoopBlockEmpty(this)}},Zf=class extends On{branches;constructor(e,n,r,i,s){super(s,n,r,i),this.branches=e}visit(e){return e.visitIfBlock(this)}},Ks=class extends On{expression;children;expressionAlias;i18n;constructor(e,n,r,i,s,o,a,l){super(a,i,s,o),this.expression=e,this.children=n,this.expressionAlias=r,this.i18n=l}visit(e){return e.visitIfBlockBranch(this)}},eh=class{name;sourceSpan;nameSpan;constructor(e,n,r){this.name=e,this.sourceSpan=n,this.nameSpan=r}visit(e){return e.visitUnknownBlock(this)}},w0=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e){return e.visitLetDeclaration(this)}},pc=class{componentName;tagName;fullName;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m,g){this.componentName=e,this.tagName=n,this.fullName=r,this.attributes=i,this.inputs=s,this.outputs=o,this.directives=a,this.children=l,this.references=c,this.isSelfClosing=u,this.sourceSpan=h,this.startSourceSpan=p,this.endSourceSpan=m,this.i18n=g}visit(e){return e.visitComponent(this)}},Px=class{name;attributes;inputs;outputs;references;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c){this.name=e,this.attributes=n,this.inputs=r,this.outputs=i,this.references=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l,this.i18n=c}visit(e){return e.visitDirective(this)}},Rn=class{tagName;attributes;inputs;outputs;directives;templateAttrs;children;references;variables;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m,g){this.tagName=e,this.attributes=n,this.inputs=r,this.outputs=i,this.directives=s,this.templateAttrs=o,this.children=a,this.references=l,this.variables=c,this.isSelfClosing=u,this.sourceSpan=h,this.startSourceSpan=p,this.endSourceSpan=m,this.i18n=g}visit(e){return e.visitTemplate(this)}},Ba=class{selector;attributes;children;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;name="ng-content";constructor(e,n,r,i,s,o,a,l){this.selector=e,this.attributes=n,this.children=r,this.isSelfClosing=i,this.sourceSpan=s,this.startSourceSpan=o,this.endSourceSpan=a,this.i18n=l}visit(e){return e.visitContent(this)}},ns=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitVariable(this)}},jc=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitReference(this)}},Lx=class{vars;placeholders;sourceSpan;i18n;constructor(e,n,r,i){this.vars=e,this.placeholders=n,this.sourceSpan=r,this.i18n=i}visit(e){return e.visitIcu(this)}},Wc=class{tagNames;bindings;listeners;sourceSpan;constructor(e,n,r,i){if(this.tagNames=e,this.bindings=n,this.listeners=r,this.sourceSpan=i,e.length===0)throw new Error("HostElement must have at least one tag name.")}visit(){throw new Error("HostElement cannot be visited")}};function _v(t,e){let n=[];if(t.visit)for(let r of e)t.visit(r);else for(let r of e){let i=r.visit(t);i&&n.push(i)}return n}var nn=class{nodes;placeholders;placeholderToMessage;meaning;description;customId;sources;id;legacyIds=[];messageString;constructor(e,n,r,i,s,o){this.nodes=e,this.placeholders=n,this.placeholderToMessage=r,this.meaning=i,this.description=s,this.customId=o,this.id=this.customId,this.messageString=lR(this.nodes),e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}},nc=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e,n){return e.visitText(this,n)}},xi=class{children;sourceSpan;constructor(e,n){this.children=e,this.sourceSpan=n}visit(e,n){return e.visitContainer(this,n)}},th=class{expression;type;cases;sourceSpan;expressionPlaceholder;constructor(e,n,r,i,s){this.expression=e,this.type=n,this.cases=r,this.sourceSpan=i,this.expressionPlaceholder=s}visit(e,n){return e.visitIcu(this,n)}},rs=class{tag;attrs;startName;closeName;children;isVoid;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l,c){this.tag=e,this.attrs=n,this.startName=r,this.closeName=i,this.children=s,this.isVoid=o,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c}visit(e,n){return e.visitTagPlaceholder(this,n)}},zc=class{value;name;sourceSpan;constructor(e,n,r){this.value=e,this.name=n,this.sourceSpan=r}visit(e,n){return e.visitPlaceholder(this,n)}},Ua=class{value;name;sourceSpan;previousMessage;constructor(e,n,r){this.value=e,this.name=n,this.sourceSpan=r}visit(e,n){return e.visitIcuPlaceholder(this,n)}},is=class{name;parameters;startName;closeName;children;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.parameters=n,this.startName=r,this.closeName=i,this.children=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l}visit(e,n){return e.visitBlockPlaceholder(this,n)}};function lR(t){let e=new ay;return t.map(r=>r.visit(e)).join("")}var ay=class{visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){let n=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${n.join(" ")}}`}visitTagPlaceholder(e){let n=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${n}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){let n=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${n}{$${e.closeName}}`}};var cR=class{visitTag(e){let n=this._serializeAttributes(e.attrs);if(e.children.length==0)return`<${e.name}${n}/>`;let r=e.children.map(i=>i.visit(this));return`<${e.name}${n}>${r.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){let n=Object.keys(e).map(r=>`${r}="${e[r]}"`).join(" ");return n.length>0?" "+n:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [
${e.dtd}
]>`}},mX=new cR;function uR(t){return t.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var Ox="i18n",ly="i18n-",dR="VAR_";function Fx(t){return t===Ox||t.startsWith(ly)}function fR(t){return t.attrs.some(e=>Fx(e.name))}function Vx(t){return t.nodes[0]}function _0(t={},e){let n={};return t&&Object.keys(t).length&&Object.keys(t).forEach(r=>n[yu(r,e)]=t[r]),n}function yu(t,e=!0){let n=uR(t);if(!e)return n;let r=n.split("_");if(r.length===1)return t.toLowerCase();let i;/^\d+$/.test(r[r.length-1])&&(i=r.pop());let s=r.shift().toLowerCase();return r.length&&(s+=r.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")),i?`${s}_${i}`:s}var hR=/[-.]/,E0="_t",Jc="ctx",C0="rf";function Bx(t,e){let n=null;return()=>(n||(t(new _t(E0,void 0,Fh)),n=Ee(e)),n)}function Ea(t){return Array.isArray(t)?Me(t.map(Ea)):I(t,vr)}function QS(t,e){let n=Object.getOwnPropertyNames(t);return n.length===0?null:Zn(n.map(r=>{let i=t[r],s,o,a,l;if(typeof i=="string")s=r,a=r,o=i,l=Ea(o);else{a=r,s=i.classPropertyName,o=i.bindingPropertyName;let c=o!==s,u=i.transformFunction!==null,h=lc.None;if(i.isSignal&&(h|=lc.SignalBased),u&&(h|=lc.HasDecoratorInputTransform),e&&(c||u||h!==lc.None)){let p=[I(h),Ea(o)];(c||u)&&(p.push(Ea(s)),u&&p.push(i.transformFunction)),l=Me(p)}else l=Ea(o)}return{key:a,quoted:hR.test(a),value:l}}))}var ss=class{values=[];set(e,n){if(n){let r=this.values.find(i=>i.key===e);r?r.value=n:this.values.push({key:e,value:n,quoted:!1})}}toLiteralMap(){return Zn(this.values)}};function pR(t){let e=t instanceof si?t.name:"ng-template",n=mR(t),r=new Aa,i=Er(e)[1];return r.setElement(i),Object.getOwnPropertyNames(n).forEach(s=>{let o=Er(s)[1],a=n[s];r.addAttribute(o,a),s.toLowerCase()==="class"&&a.trim().split(/\s+/).forEach(c=>r.addClassName(c))}),r}function mR(t){let e={};return t instanceof Rn&&t.tagName!=="ng-template"?t.templateAttrs.forEach(n=>e[n.name]=""):(t.attributes.forEach(n=>{Fx(n.name)||(e[n.name]=n.value)}),t.inputs.forEach(n=>{(n.type===be.Property||n.type===be.TwoWay)&&(e[n.name]="")}),t.outputs.forEach(n=>{e[n.name]=""})),e}function XS(t,e){let n=null,r={name:t.name,type:t.type,typeArgumentCount:t.typeArgumentCount,deps:[],target:Ci.Injectable};if(t.useClass!==void 0){let a=t.useClass.expression.isEquivalent(t.type.value),l;t.deps!==void 0&&(l=t.deps),l!==void 0?n=Hs(ne(D({},r),{delegate:t.useClass.expression,delegateDeps:l,delegateType:Uf.Class})):a?n=Hs(r):n={statements:[],expression:ZS(t.type.value,t.useClass.expression,e)}}else t.useFactory!==void 0?t.deps!==void 0?n=Hs(ne(D({},r),{delegate:t.useFactory,delegateDeps:t.deps||[],delegateType:Uf.Function})):n={statements:[],expression:ri([],t.useFactory.callFn([]))}:t.useValue!==void 0?n=Hs(ne(D({},r),{expression:t.useValue.expression})):t.useExisting!==void 0?n=Hs(ne(D({},r),{expression:W(C.inject).callFn([t.useExisting.expression])})):n={statements:[],expression:ZS(t.type.value,t.type.value,e)};let i=t.type.value,s=new ss;return s.set("token",i),s.set("factory",n.expression),t.providedIn.expression.value!==null&&s.set("providedIn",Z2(t.providedIn)),{expression:W(C.\u0275\u0275defineInjectable).callFn([s.toLiteralMap()],void 0,!0),type:gR(t),statements:n.statements}}function gR(t){return new Xn(W(C.InjectableDeclaration,[Bh(t.type.type,t.typeArgumentCount)]))}function ZS(t,e,n){if(t.node===e.node)return e.prop("\u0275fac");if(!n)return eb(e);let r=W(C.resolveForwardRef).callFn([e]);return eb(r)}function eb(t){let e=new Nt("__ngFactoryType__",Fh);return ri([e],t.prop("\u0275fac").callFn([Ee(e.name)]))}var Tt=0,vR=8,S0=9,Qs=10,Ux=11,$x=12,b0=13,Hx=32,cy=33,Yc=34,Gx=35,$h=36,yR=37,nh=38,Kc=39,Nn=40,Mt=41,tb=42,qx=43,gn=44,rh=45,Bs=46,Jn=47,Yr=58,Dn=59,Ia=60,Ht=61,Wn=62,nb=63,x0=48,wR=55,jx=57,ds=65,_R=69,ER=70,CR=88,Ja=90,Xr=91,Xs=92,Si=93,SR=94,fs=95,ho=97,bR=98,xR=101,T0=102,Wx=110,zx=114,Jx=116,Yx=117,Kx=118,Qx=120,wu=122,gr=123,rb=124,Zt=125,Xx=160,fa=64,uy=96;function Qc(t){return t>=S0&&t<=Hx||t==Xx}function mr(t){return x0<=t&&t<=jx}function os(t){return t>=ho&&t<=wu||t>=ds&&t<=Ja}function TR(t){return t>=ho&&t<=T0||t>=ds&&t<=ER||mr(t)}function ih(t){return t===Qs||t===b0}function ib(t){return x0<=t&&t<=wR}function mc(t){return t===Kc||t===Yc||t===uy}var Xc=class t{file;offset;line;col;constructor(e,n,r,i){this.file=e,this.offset=n,this.line=r,this.col=i}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){let n=this.file.content,r=n.length,i=this.offset,s=this.line,o=this.col;for(;i>0&&e<0;)if(i--,e++,n.charCodeAt(i)==Qs){s--;let l=n.substring(0,i-1).lastIndexOf(String.fromCharCode(Qs));o=l>0?i-l:i}else o--;for(;i<r&&e>0;){let a=n.charCodeAt(i);i++,e--,a==Qs?(s++,o=0):o++}return new t(this.file,i,s,o)}getContext(e,n){let r=this.file.content,i=this.offset;if(i!=null){i>r.length-1&&(i=r.length-1);let s=i,o=0,a=0;for(;o<e&&i>0&&(i--,o++,!(r[i]==`
`&&++a==n)););for(o=0,a=0;o<e&&s<r.length-1&&(s++,o++,!(r[s]==`
`&&++a==n)););return{before:r.substring(i,this.offset),after:r.substring(this.offset,s+1)}}return null}},sh=class{content;url;constructor(e,n){this.content=e,this.url=n}},ee=class{start;end;fullStart;details;constructor(e,n,r=e,i=null){this.start=e,this.end=n,this.fullStart=r,this.details=i}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},Qi=(function(t){return t[t.WARNING=0]="WARNING",t[t.ERROR=1]="ERROR",t})(Qi||{}),X=class extends Error{span;msg;level;relatedError;constructor(e,n,r=Qi.ERROR,i){super(n),this.span=e,this.msg=n,this.level=r,this.relatedError=i,Object.setPrototypeOf(this,new.target.prototype)}contextualMessage(){let e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${Qi[this.level]} ->]${e.after}")`:this.msg}toString(){let e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}};function IR(t,e,n){let r=`in ${t} ${e} in ${n}`,i=new sh("",r);return new ee(new Xc(i,-1,-1,-1),new Xc(i,-1,-1,-1))}var AR=0;function DR(t){if(!t||!t.reference)return null;let e=t.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let n=Nx(e);return n.indexOf("(")>=0?(n=`anonymous_${AR++}`,e.__anonymousType=n):n=Gs(n),n}function Gs(t){return t.replace(/\W/g,"_")}var sb='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})',dy=class extends Yv{constructor(){super(!1)}visitWrappedNodeExpr(e,n){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,n){return n.print(e,`var ${e.name}`),e.value&&(n.print(e," = "),e.value.visitExpression(this,n)),n.println(e,";"),null}visitTaggedTemplateLiteralExpr(e,n){let r=e.template.elements;return e.tag.visitExpression(this,n),n.print(e,`(${sb}(`),n.print(e,`[${r.map(i=>js(i.text,!1)).join(", ")}], `),n.print(e,`[${r.map(i=>js(i.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(i=>{n.print(e,", "),i.visitExpression(this,n)}),n.print(e,")"),null}visitTemplateLiteralExpr(e,n){n.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(n.print(i,"${"),i.visitExpression(this,n),n.print(i,"}"))}n.print(e,"`")}visitTemplateLiteralElementExpr(e,n){return n.print(e,e.rawText),null}visitFunctionExpr(e,n){return n.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,n),n.println(e,") {"),n.incIndent(),this.visitAllStatements(e.statements,n),n.decIndent(),n.print(e,"}"),null}visitArrowFunctionExpr(e,n){if(n.print(e,"("),this._visitParams(e.params,n),n.print(e,") =>"),Array.isArray(e.body))n.println(e,"{"),n.incIndent(),this.visitAllStatements(e.body,n),n.decIndent(),n.print(e,"}");else{let r=e.body instanceof _r;r&&n.print(e,"("),e.body.visitExpression(this,n),r&&n.print(e,")")}return null}visitDeclareFunctionStmt(e,n){return n.print(e,`function ${e.name}(`),this._visitParams(e.params,n),n.println(e,") {"),n.incIndent(),this.visitAllStatements(e.statements,n),n.decIndent(),n.println(e,"}"),null}visitLocalizedString(e,n){n.print(e,`$localize(${sb}(`);let r=[e.serializeI18nHead()];for(let i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return n.print(e,`[${r.map(i=>js(i.cooked,!1)).join(", ")}], `),n.print(e,`[${r.map(i=>js(i.raw,!1)).join(", ")}])`),e.expressions.forEach(i=>{n.print(e,", "),i.visitExpression(this,n)}),n.print(e,")"),null}_visitParams(e,n){this.visitAllObjects(r=>n.print(null,r.name),e,n,",")}},lf;function kR(){if(lf===void 0){let t=hc.trustedTypes;if(lf=null,t)try{lf=t.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return lf}function MR(t){return kR()?.createScript(t)||t}function ob(...t){if(!hc.trustedTypes)return new Function(...t);let e=t.slice(0,-1).join(","),n=t[t.length-1],r=`(function anonymous(${e}
) { ${n}
})`,i=hc.eval(MR(r));return i.bind===void 0?new Function(...t):(i.toString=()=>r,i.bind(hc))}var fy=class{evaluateStatements(e,n,r,i){let s=new hy(r),o=Jv.createRoot();return n.length>0&&!NR(n[0])&&(n=[I("use strict").toStmt(),...n]),s.visitAllStatements(n,o),s.createReturnStmt(o),this.evaluateCode(e,o,s.getArgs(),i)}evaluateCode(e,n,r,i){let s=`"use strict";${n.toSource()}
//# sourceURL=${e}`,o=[],a=[];for(let c in r)a.push(r[c]),o.push(c);if(i){let c=ob(...o.concat("return null;")).toString(),u=c.slice(0,c.indexOf("return null;")).split(`
`).length-1;s+=`
${n.toSourceMapGenerator(e,u).toJsComment()}`}let l=ob(...o.concat(s));return this.executeFunction(l,a)}executeFunction(e,n){return e(...n)}},hy=class extends dy{refResolver;_evalArgNames=[];_evalArgValues=[];_evalExportedVars=[];constructor(e){super(),this.refResolver=e}createReturnStmt(e){new Pt(new _r(this._evalExportedVars.map(r=>new Ma(r,Ee(r),!1)))).visitStatement(this,e)}getArgs(){let e={};for(let n=0;n<this._evalArgNames.length;n++)e[this._evalArgNames[n]]=this._evalArgValues[n];return e}visitExternalExpr(e,n){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),n),null}visitWrappedNodeExpr(e,n){return this._emitReferenceToExternal(e,e.node,n),null}visitDeclareVarStmt(e,n){return e.hasModifier(Rt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,n)}visitDeclareFunctionStmt(e,n){return e.hasModifier(Rt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,n)}_emitReferenceToExternal(e,n,r){let i=this._evalArgValues.indexOf(n);if(i===-1){i=this._evalArgValues.length,this._evalArgValues.push(n);let s=DR({reference:n})||"val";this._evalArgNames.push(`jit_${s}_${i}`)}r.print(e,this._evalArgNames[i])}};function NR(t){return t.isEquivalent(I("use strict").toStmt())}function ab(t){let e=new ss;t.providers!==null&&e.set("providers",t.providers),t.imports.length>0&&e.set("imports",Me(t.imports));let n=W(C.defineInjector).callFn([e.toLiteralMap()],void 0,!0),r=RR(t);return{expression:n,type:r,statements:[]}}function RR(t){return new Xn(W(C.InjectorDeclaration,[new Xn(t.type.type)]))}var py=class{context;constructor(e){this.context=e}resolveExternalReference(e){if(e.moduleName!=="@angular/core")throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}},oh=(function(t){return t[t.Inline=0]="Inline",t[t.SideEffect=1]="SideEffect",t[t.Omit=2]="Omit",t})(oh||{}),Xi=(function(t){return t[t.Global=0]="Global",t[t.Local=1]="Local",t})(Xi||{});function PR(t){let e=[],n=new ss;if(n.set("type",t.type.value),t.kind===Xi.Global&&t.bootstrap.length>0&&n.set("bootstrap",Ws(t.bootstrap,t.containsForwardDecls)),t.selectorScopeMode===oh.Inline)t.declarations.length>0&&n.set("declarations",Ws(t.declarations,t.containsForwardDecls)),t.imports.length>0&&n.set("imports",Ws(t.imports,t.containsForwardDecls)),t.exports.length>0&&n.set("exports",Ws(t.exports,t.containsForwardDecls));else if(t.selectorScopeMode===oh.SideEffect){let s=FR(t);s!==null&&e.push(s)}t.schemas!==null&&t.schemas.length>0&&n.set("schemas",Me(t.schemas.map(s=>s.value))),t.id!==null&&(n.set("id",t.id),e.push(W(C.registerNgModuleType).callFn([t.type.value,t.id]).toStmt()));let r=W(C.defineNgModule).callFn([n.toLiteralMap()],void 0,!0),i=OR(t);return{expression:r,type:i,statements:e}}function LR(t){let e=new ss;return e.set("type",new _e(t.type)),t.bootstrap!==void 0&&e.set("bootstrap",new _e(t.bootstrap)),t.declarations!==void 0&&e.set("declarations",new _e(t.declarations)),t.imports!==void 0&&e.set("imports",new _e(t.imports)),t.exports!==void 0&&e.set("exports",new _e(t.exports)),t.schemas!==void 0&&e.set("schemas",new _e(t.schemas)),t.id!==void 0&&e.set("id",new _e(t.id)),W(C.defineNgModule).callFn([e.toLiteralMap()])}function OR(t){if(t.kind===Xi.Local)return new Xn(t.type.value);let{type:e,declarations:n,exports:r,imports:i,includeImportTypes:s,publicDeclarationTypes:o}=t;return new Xn(W(C.NgModuleDeclaration,[new Xn(e.type),o===null?Ev(n):VR(o),s?Ev(i):ei,Ev(r)]))}function FR(t){let e=new ss;if(t.kind===Xi.Global?t.declarations.length>0&&e.set("declarations",Ws(t.declarations,t.containsForwardDecls)):t.declarationsExpression&&e.set("declarations",t.declarationsExpression),t.kind===Xi.Global?t.imports.length>0&&e.set("imports",Ws(t.imports,t.containsForwardDecls)):t.importsExpression&&e.set("imports",t.importsExpression),t.kind===Xi.Global?t.exports.length>0&&e.set("exports",Ws(t.exports,t.containsForwardDecls)):t.exportsExpression&&e.set("exports",t.exportsExpression),t.kind===Xi.Local&&t.bootstrapExpression&&e.set("bootstrap",t.bootstrapExpression),Object.keys(e.values).length===0)return null;let n=new yn(W(C.setNgModuleScope),[t.type.value,e.toLiteralMap()]),r=Q2(n),i=new Zi([],[r.toStmt()]);return new yn(i,[]).toStmt()}function Ev(t){let e=t.map(n=>gu(n.type));return t.length>0?Lt(Me(e)):ei}function VR(t){let e=t.map(n=>gu(n));return t.length>0?Lt(Me(e)):ei}function lb(t){let e=[];e.push({key:"name",value:I(t.pipeName??t.name),quoted:!1}),e.push({key:"type",value:t.type.value,quoted:!1}),e.push({key:"pure",value:I(t.pure),quoted:!1}),t.isStandalone===!1&&e.push({key:"standalone",value:I(!1),quoted:!1});let n=W(C.definePipe).callFn([Zn(e)],void 0,!0),r=BR(t);return{expression:n,type:r,statements:[]}}function BR(t){return new Xn(W(C.PipeDeclaration,[Bh(t.type.type,t.typeArgumentCount),new Xn(new Ot(t.pipeName)),new Xn(new Ot(t.isStandalone))]))}var $a=(function(t){return t[t.Directive=0]="Directive",t[t.Pipe=1]="Pipe",t[t.NgModule=2]="NgModule",t})($a||{}),UR=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),$R=["@media","@supports","@document","@layer","@container","@scope","@starting-style"],my=class{shimCssText(e,n,r=""){let i=[];e=e.replace(rP,a=>{if(a.match(iP))i.push(a);else{let l=a.match(nP);i.push((l?.join("")??"")+`
`)}return A0}),e=this._insertDirectives(e);let s=this._scopeCssText(e,n,r),o=0;return s.replace(sP,()=>i[o++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,n){let r=new Set,i=cf(e,s=>this._scopeLocalKeyframeDeclarations(s,n,r));return cf(i,s=>this._scopeAnimationRule(s,n,r))}_scopeLocalKeyframeDeclarations(e,n,r){return ne(D({},e),{selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(i,s,o,a,l)=>(r.add(db(a,o)),`${s}${o}${n}_${a}${o}${l}`))})}_scopeAnimationKeyframe(e,n,r){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(i,s,o,a,l)=>(a=`${r.has(db(a,o))?n+"_":""}${a}`,`${s}${o}${a}${o}${l}`))}_animationDeclarationKeyframesRe=/(^|\s+|,)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g;_scopeAnimationRule(e,n,r){let i=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation\s*:\s*),*([^;]+)/g,(s,o,a)=>o+a.replace(this._animationDeclarationKeyframesRe,(l,c,u="",h,p)=>h?`${c}${this._scopeAnimationKeyframe(`${u}${h}${u}`,n,r)}`:UR.has(p)?l:`${c}${this._scopeAnimationKeyframe(p,n,r)}`));return i=i.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(s,o,a)=>`${o}${a.split(",").map(l=>this._scopeAnimationKeyframe(l,n,r)).join(",")}`),ne(D({},e),{content:i})}_insertPolyfillDirectivesInCssText(e){return e.replace(GR,function(...n){return n[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(qR,(...n)=>{let r=n[0].replace(n[1],"").replace(n[2],"");return n[4]+r})}_scopeCssText(e,n,r){let i=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),n&&(e=this._scopeKeyframesRelatedCss(e,n),e=this._scopeSelectors(e,n,r)),e=e+`
`+i,e.trim()}_extractUnscopedRulesFromCssText(e){let n="",r;for(cb.lastIndex=0;(r=cb.exec(e))!==null;){let i=r[0].replace(r[2],"").replace(r[1],r[4]);n+=i+`

`}return n}_convertColonHost(e){return e.replace(JR,(n,r,i)=>{if(r){let s=[];for(let o of this._splitOnTopLevelCommas(r,!0)){let a=o.trim();if(!a)break;let l=Ji+a.replace(ah,"")+i;s.push(l)}return s.join(",")}else return Ji+i})}*_splitOnTopLevelCommas(e,n){let r=e.length,i=0,s=0;for(let o=0;o<r;o++){let a=e.charCodeAt(o);if(a===Nn)i++;else if(a===Mt){if(i--,i<0&&n){yield e.slice(s,o);return}}else a===gn&&i===0&&(yield e.slice(s,o),s=o+1)}yield e.slice(s)}_convertColonHostContext(e){let n=[];for(let r of this._splitOnTopLevelCommas(e,!1))n.push(this._convertColonHostContextInSelectorPart(r));return n.join(",")}_convertColonHostContextInSelectorPart(e){return e.replace(KR,(n,r)=>{let i=[[]],s=n.indexOf(wa);for(;s!==-1;){let o=n.substring(s+wa.length);if(!o||o[0]!=="("){n=o,s=n.indexOf(wa);continue}let a=[],l=0;for(let u of this._splitOnTopLevelCommas(o.substring(1),!0)){l=l+u.length+1;let h=u.trim();h&&a.push(h)}let c=i.length;gP(i,a.length);for(let u=0;u<a.length;u++)for(let h=0;h<c;h++)i[h+u*c].push(a[u]);n=o.substring(l+1),s=n.indexOf(wa)}return i.map(o=>mP(o,n,r)).join(", ")})}_convertShadowDOMSelectors(e){return XR.reduce((n,r)=>n.replace(r," "),e)}_scopeSelectors(e,n,r){return cf(e,i=>{let s=i.selector,o=i.content;return i.selector[0]!=="@"?s=this._scopeSelector({selector:s,scopeSelector:n,hostSelector:r,isParentSelector:!0}):$R.some(a=>i.selector.startsWith(a))?o=this._scopeSelectors(i.content,n,r):(i.selector.startsWith("@font-face")||i.selector.startsWith("@page"))&&(o=this._stripScopingSelectors(i.content)),new Zc(s,o)})}_stripScopingSelectors(e){return cf(e,n=>{let r=n.selector.replace(ub," ").replace(Cv," ");return new Zc(r,n.content)})}_safeSelector;_shouldScopeIndicator;_scopeSelector({selector:e,scopeSelector:n,hostSelector:r,isParentSelector:i=!1}){let s=/ ?,(?!(?:[^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\))) ?/;return e.split(s).map(o=>o.split(ub)).map(o=>{let[a,...l]=o;return[(u=>this._selectorNeedsScoping(u,n)?this._applySelectorScope({selector:u,scopeSelector:n,hostSelector:r,isParentSelector:i}):u)(a),...l].join(" ")}).join(", ")}_selectorNeedsScoping(e,n){return!this._makeScopeMatcher(n).test(e)}_makeScopeMatcher(e){let n=/\[/g,r=/\]/g;return e=e.replace(n,"\\[").replace(r,"\\]"),new RegExp("^("+e+")"+ZR,"m")}_applySimpleSelectorScope(e,n,r){if(Ca.lastIndex=0,Ca.test(e)){let i=`[${r}]`,s=e;for(;s.match(Cv);)s=s.replace(Cv,(o,a)=>a.replace(/([^:\)]*)(:*)(.*)/,(l,c,u,h)=>c+i+u+h));return s.replace(Ca,i)}return n+" "+e}_applySelectorScope({selector:e,scopeSelector:n,hostSelector:r,isParentSelector:i}){let s=/\[is=([^\]]*)\]/g;n=n.replace(s,(y,..._)=>_[0]);let o=`[${n}]`,a=y=>{let _=y.trim();if(!_)return y;if(y.includes(Ji)){if(_=this._applySimpleSelectorScope(y,n,r),!y.match(QR)){let[w,A,k,T]=_.match(/([^:]*)(:*)([\s\S]*)/);_=A+o+k+T}}else{let w=y.replace(Ca,"");if(w.length>0){let A=w.match(/([^:]*)(:*)([\s\S]*)/);A&&(_=A[1]+o+A[2]+A[3])}}return _},l=y=>{let _="",w=[],A;for(;(A=rc.exec(y))!==null;){let k=1,T=rc.lastIndex;for(;T<y.length;){let L=y[T];if(T++,L==="("){k++;continue}if(L===")"){if(k--,k===0)break;continue}}w.push(`${A[0]}${y.slice(rc.lastIndex,T)}`),rc.lastIndex=T}return w.join("")===y?_=w.map(k=>{let[T]=k.match(rc)??[],L=k.slice(T?.length,-1);L.includes(Ji)&&(this._shouldScopeIndicator=!0);let R=this._scopeSelector({selector:L,scopeSelector:n,hostSelector:r});return`${T}${R})`}).join(""):(this._shouldScopeIndicator=this._shouldScopeIndicator||y.includes(Ji),_=this._shouldScopeIndicator?a(y):y),_};i&&(this._safeSelector=new gy(e),e=this._safeSelector.content());let c="",u=0,h,p=/( |>|\+|~(?!=))(?!([^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\)))\s*/g,m=e.includes(Ji);for((i||this._shouldScopeIndicator)&&(this._shouldScopeIndicator=!m);(h=p.exec(e))!==null;){let y=h[1],_=e.slice(u,h.index);if(_.match(/__esc-ph-(\d+)__/)&&e[h.index+1]?.match(/[a-fA-F\d]/))continue;let w=l(_);c+=`${w} ${y} `,u=p.lastIndex}let g=e.substring(u);return c+=l(g),this._safeSelector.restore(c)}_insertPolyfillHostInCssText(e){return e.replace(tP,wa).replace(eP,ah)}},gy=class{placeholders=[];index=0;_content;constructor(e){e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=e.replace(/(\\.)/g,(n,r)=>{let i=`__esc-ph-${this.index}__`;return this.placeholders.push(r),this.index++,i}),this._content=e.replace(zR,(n,r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(`(${i})`),this.index++,r+s})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(n,r)=>this.placeholders[+r])}content(){return this._content}_escapeRegexMatches(e,n){return e.replace(n,(r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(i),this.index++,s})}},HR="(:(where|is)\\()?",rc=/:(where|is)\(/gi,GR=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,qR=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,cb=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,ah="-shadowcsshost",wa="-shadowcsscontext",vy="[^)(]*",jR=String.raw`(?:\(${vy}\)|${vy})+?`,WR=String.raw`(?:\(${jR}\)|${vy})+?`,I0=String.raw`(?:\((${WR})\))`,zR=new RegExp(String.raw`(:nth-[-\w]+)`+I0,"g"),JR=new RegExp(ah+I0+"?([^,{]*)","gim"),YR=wa+I0+"?([^{]*)",KR=new RegExp(`${HR}(${YR})`,"gim"),Ji=ah+"-no-combinator",QR=new RegExp(`${Ji}(?![^(]*\\))`,"g"),Cv=/-shadowcsshost-no-combinator([^\s,]*)/,XR=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],ub=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,ZR="([>\\s~+[.,{:][\\s\\S]*)?$",Ca=/-shadowcsshost/gim,eP=/:host/gim,tP=/:host-context/gim,nP=/\r?\n/g,rP=/\/\*[\s\S]*?\*\//g,iP=/\/\*\s*#\s*source(Mapping)?URL=/g,A0="%COMMENT%",sP=new RegExp(A0,"g"),Sv="%BLOCK%",oP=new RegExp(`(\\s*(?:${A0}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),aP=new Map([["{","}"]]),Zx="%COMMA_IN_PLACEHOLDER%",eT="%SEMI_IN_PLACEHOLDER%",tT="%COLON_IN_PLACEHOLDER%",lP=new RegExp(Zx,"g"),cP=new RegExp(eT,"g"),uP=new RegExp(tT,"g"),Zc=class{selector;content;constructor(e,n){this.selector=e,this.content=n}};function cf(t,e){let n=hP(t),r=dP(n,aP,Sv),i=0,s=r.escapedString.replace(oP,(...o)=>{let a=o[2],l="",c=o[4],u="";c&&c.startsWith("{"+Sv)&&(l=r.blocks[i++],c=c.substring(Sv.length+1),u="{");let h=e(new Zc(a,l));return`${o[1]}${h.selector}${o[3]}${u}${h.content}${c}`});return pP(s)}var yy=class{escapedString;blocks;constructor(e,n){this.escapedString=e,this.blocks=n}};function dP(t,e,n){let r=[],i=[],s=0,o=0,a=-1,l,c;for(let u=0;u<t.length;u++){let h=t[u];h==="\\"?u++:h===c?(s--,s===0&&(i.push(t.substring(a,u)),r.push(n),o=u,a=-1,l=c=void 0)):h===l?s++:s===0&&e.has(h)&&(l=h,c=e.get(h),s=1,a=u+1,r.push(t.substring(o,a)))}return a!==-1?(i.push(t.substring(a)),r.push(n)):r.push(t.substring(o)),new yy(r.join(""),i)}var fP={";":eT,",":Zx,":":tT};function hP(t){let e=t,n=null;for(let r=0;r<e.length;r++){let i=e[r];if(i==="\\")r++;else if(n!==null)if(i===n)n=null;else{let s=fP[i];s&&(e=`${e.substr(0,r)}${s}${e.substr(r+1)}`,r+=s.length-1)}else(i==="'"||i==='"')&&(n=i)}return e}function pP(t){let e=t.replace(lP,",");return e=e.replace(cP,";"),e=e.replace(uP,":"),e}function db(t,e){return e?t.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):t}function mP(t,e,n=""){let r=Ji;Ca.lastIndex=0;let i=Ca.test(e);if(t.length===0)return r+e;let s=[t.pop()||""];for(;t.length>0;){let o=s.length,a=t.pop();for(let l=0;l<o;l++){let c=s[l];s[o*2+l]=c+" "+a,s[o+l]=a+" "+c,s[l]=a+c}}return s.map(o=>i?`${n}${o}${e}`:`${n}${o}${r}${e}, ${n}${o} ${r}${e}`).join(",")}function gP(t,e){let n=t.length;for(let r=1;r<e;r++)for(let i=0;i<n;i++)t[i+r*n]=t[i].slice(0)}var v=(function(t){return t[t.ListEnd=0]="ListEnd",t[t.Statement=1]="Statement",t[t.Variable=2]="Variable",t[t.ElementStart=3]="ElementStart",t[t.Element=4]="Element",t[t.Template=5]="Template",t[t.ElementEnd=6]="ElementEnd",t[t.ContainerStart=7]="ContainerStart",t[t.Container=8]="Container",t[t.ContainerEnd=9]="ContainerEnd",t[t.DisableBindings=10]="DisableBindings",t[t.ConditionalCreate=11]="ConditionalCreate",t[t.ConditionalBranchCreate=12]="ConditionalBranchCreate",t[t.Conditional=13]="Conditional",t[t.EnableBindings=14]="EnableBindings",t[t.Text=15]="Text",t[t.Listener=16]="Listener",t[t.InterpolateText=17]="InterpolateText",t[t.Binding=18]="Binding",t[t.Property=19]="Property",t[t.StyleProp=20]="StyleProp",t[t.ClassProp=21]="ClassProp",t[t.StyleMap=22]="StyleMap",t[t.ClassMap=23]="ClassMap",t[t.Advance=24]="Advance",t[t.Pipe=25]="Pipe",t[t.Attribute=26]="Attribute",t[t.ExtractedAttribute=27]="ExtractedAttribute",t[t.Defer=28]="Defer",t[t.DeferOn=29]="DeferOn",t[t.DeferWhen=30]="DeferWhen",t[t.I18nMessage=31]="I18nMessage",t[t.DomProperty=32]="DomProperty",t[t.Namespace=33]="Namespace",t[t.ProjectionDef=34]="ProjectionDef",t[t.Projection=35]="Projection",t[t.RepeaterCreate=36]="RepeaterCreate",t[t.Repeater=37]="Repeater",t[t.TwoWayProperty=38]="TwoWayProperty",t[t.TwoWayListener=39]="TwoWayListener",t[t.DeclareLet=40]="DeclareLet",t[t.StoreLet=41]="StoreLet",t[t.I18nStart=42]="I18nStart",t[t.I18n=43]="I18n",t[t.I18nEnd=44]="I18nEnd",t[t.I18nExpression=45]="I18nExpression",t[t.I18nApply=46]="I18nApply",t[t.IcuStart=47]="IcuStart",t[t.IcuEnd=48]="IcuEnd",t[t.IcuPlaceholder=49]="IcuPlaceholder",t[t.I18nContext=50]="I18nContext",t[t.I18nAttributes=51]="I18nAttributes",t[t.SourceLocation=52]="SourceLocation",t[t.Animation=53]="Animation",t[t.AnimationString=54]="AnimationString",t[t.AnimationBinding=55]="AnimationBinding",t[t.AnimationListener=56]="AnimationListener",t[t.Control=57]="Control",t[t.ControlCreate=58]="ControlCreate",t})(v||{}),z=(function(t){return t[t.LexicalRead=0]="LexicalRead",t[t.Context=1]="Context",t[t.TrackContext=2]="TrackContext",t[t.ReadVariable=3]="ReadVariable",t[t.NextContext=4]="NextContext",t[t.Reference=5]="Reference",t[t.StoreLet=6]="StoreLet",t[t.ContextLetReference=7]="ContextLetReference",t[t.GetCurrentView=8]="GetCurrentView",t[t.RestoreView=9]="RestoreView",t[t.ResetView=10]="ResetView",t[t.PureFunctionExpr=11]="PureFunctionExpr",t[t.PureFunctionParameterExpr=12]="PureFunctionParameterExpr",t[t.PipeBinding=13]="PipeBinding",t[t.PipeBindingVariadic=14]="PipeBindingVariadic",t[t.SafePropertyRead=15]="SafePropertyRead",t[t.SafeKeyedRead=16]="SafeKeyedRead",t[t.SafeInvokeFunction=17]="SafeInvokeFunction",t[t.SafeTernaryExpr=18]="SafeTernaryExpr",t[t.EmptyExpr=19]="EmptyExpr",t[t.AssignTemporaryExpr=20]="AssignTemporaryExpr",t[t.ReadTemporaryExpr=21]="ReadTemporaryExpr",t[t.SlotLiteralExpr=22]="SlotLiteralExpr",t[t.ConditionalCase=23]="ConditionalCase",t[t.ConstCollected=24]="ConstCollected",t[t.TwoWayBindingSet=25]="TwoWayBindingSet",t})(z||{}),Kn=(function(t){return t[t.None=0]="None",t[t.AlwaysInline=1]="AlwaysInline",t})(Kn||{}),It=(function(t){return t[t.Context=0]="Context",t[t.Identifier=1]="Identifier",t[t.SavedView=2]="SavedView",t[t.Alias=3]="Alias",t})(It||{}),Fn=(function(t){return t[t.Normal=0]="Normal",t[t.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",t})(Fn||{}),U=(function(t){return t[t.Attribute=0]="Attribute",t[t.ClassName=1]="ClassName",t[t.StyleProperty=2]="StyleProperty",t[t.Property=3]="Property",t[t.Template=4]="Template",t[t.I18n=5]="I18n",t[t.LegacyAnimation=6]="LegacyAnimation",t[t.TwoWayProperty=7]="TwoWayProperty",t[t.Animation=8]="Animation",t})(U||{}),eu=(function(t){return t[t.Creation=0]="Creation",t[t.Postproccessing=1]="Postproccessing",t})(eu||{}),Ya=(function(t){return t[t.I18nText=0]="I18nText",t[t.I18nAttribute=1]="I18nAttribute",t})(Ya||{}),Ue=(function(t){return t[t.None=0]="None",t[t.ElementTag=1]="ElementTag",t[t.TemplateTag=2]="TemplateTag",t[t.OpenTag=4]="OpenTag",t[t.CloseTag=8]="CloseTag",t[t.ExpressionIndex=16]="ExpressionIndex",t})(Ue||{}),Gt=(function(t){return t[t.HTML=0]="HTML",t[t.SVG=1]="SVG",t[t.Math=2]="Math",t})(Gt||{}),Pe=(function(t){return t[t.Idle=0]="Idle",t[t.Immediate=1]="Immediate",t[t.Timer=2]="Timer",t[t.Hover=3]="Hover",t[t.Interaction=4]="Interaction",t[t.Viewport=5]="Viewport",t[t.Never=6]="Never",t})(Pe||{}),Js=(function(t){return t[t.RootI18n=0]="RootI18n",t[t.Icu=1]="Icu",t[t.Attr=2]="Attr",t})(Js||{}),vn=(function(t){return t[t.NgTemplate=0]="NgTemplate",t[t.Structural=1]="Structural",t[t.Block=2]="Block",t})(vn||{}),nT=Symbol("ConsumesSlot"),D0=Symbol("DependsOnSlotContext"),Ka=Symbol("ConsumesVars"),Hh=Symbol("UsesVarOffset"),tr={[nT]:!0,numSlotsUsed:1},wn={[D0]:!0},rn={[Ka]:!0};function Qa(t){return t[nT]===!0}function tu(t){return t[D0]===!0}function bv(t){return t[Ka]===!0}function fb(t){return t[Hh]===!0}function er(t){return D({kind:v.Statement,statement:t},te)}function Ki(t,e,n,r){return D({kind:v.Variable,xref:t,variable:e,initializer:n,flags:r},te)}var te={debugListId:null,prev:null,next:null};function vP(t,e,n){return D(D(D({kind:v.InterpolateText,target:t,interpolation:e,sourceSpan:n},wn),rn),te)}var Xe=class{strings;expressions;i18nPlaceholders;constructor(e,n,r){if(this.strings=e,this.expressions=n,this.i18nPlaceholders=r,r.length!==0&&r.length!==n.length)throw new Error(`Expected ${n.length} placeholders to match interpolation expression count, but got ${r.length}`)}};function po(t,e,n,r,i,s,o,a,l,c,u){return D({kind:v.Binding,bindingKind:e,target:t,name:n,expression:r,unit:i,securityContext:s,isTextAttribute:o,isStructuralTemplateAttribute:a,templateKind:l,i18nContext:null,i18nMessage:c,sourceSpan:u},te)}function yP(t,e,n,r,i,s,o,a,l,c){return D(D(D({kind:v.Property,target:t,name:e,expression:n,bindingKind:r,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:s,templateKind:o,i18nContext:a,i18nMessage:l,sourceSpan:c},wn),rn),te)}function wP(t,e,n,r,i,s,o,a,l){return D(D(D({kind:v.TwoWayProperty,target:t,name:e,expression:n,securityContext:r,sanitizer:null,isStructuralTemplateAttribute:i,templateKind:s,i18nContext:o,i18nMessage:a,sourceSpan:l},wn),rn),te)}function _P(t,e,n,r,i){return D(D(D({kind:v.StyleProp,target:t,name:e,expression:n,unit:r,sourceSpan:i},wn),rn),te)}function EP(t,e,n,r){return D(D(D({kind:v.ClassProp,target:t,name:e,expression:n,sourceSpan:r},wn),rn),te)}function CP(t,e,n){return D(D(D({kind:v.StyleMap,target:t,expression:e,sourceSpan:n},wn),rn),te)}function SP(t,e,n){return D(D(D({kind:v.ClassMap,target:t,expression:e,sourceSpan:n},wn),rn),te)}function hb(t,e,n,r,i,s,o,a,l,c){return D(D(D({kind:v.Attribute,target:t,namespace:e,name:n,expression:r,securityContext:i,sanitizer:null,isTextAttribute:s,isStructuralTemplateAttribute:o,templateKind:a,i18nContext:null,i18nMessage:l,sourceSpan:c},wn),rn),te)}function bP(t,e){return D({kind:v.Advance,delta:t,sourceSpan:e},te)}function rT(t,e,n,r){return D(D(D({kind:v.Conditional,target:t,test:e,conditions:n,processed:null,sourceSpan:r,contextValue:null},te),wn),rn)}function xP(t,e,n,r){return D(D({kind:v.Repeater,target:t,targetSlot:e,collection:n,sourceSpan:r},te),wn)}function pb(t,e,n,r,i,s,o){return D({kind:v.AnimationBinding,name:t,target:e,animationKind:n,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s,animationBindingKind:o},te)}function TP(t,e,n,r){return D(D(D({kind:v.DeferWhen,target:t,expr:e,modifier:n,sourceSpan:r},te),wn),rn)}function iT(t,e,n,r,i,s,o,a,l,c,u){return D(D(D({kind:v.I18nExpression,context:t,target:e,i18nOwner:n,handle:r,expression:i,icuPlaceholder:s,i18nPlaceholder:o,resolutionTime:a,usage:l,name:c,sourceSpan:u},te),rn),wn)}function IP(t,e,n){return D({kind:v.I18nApply,owner:t,handle:e,sourceSpan:n},te)}function AP(t,e,n,r){return D(D(D({kind:v.StoreLet,target:t,declaredName:e,value:n,sourceSpan:r},wn),rn),te)}function DP(t){return D(D(D({kind:v.Control,target:t.target,name:t.name,expression:t.expression,bindingKind:t.bindingKind,securityContext:t.securityContext,sanitizer:null,isStructuralTemplateAttribute:t.isStructuralTemplateAttribute,templateKind:t.templateKind,i18nContext:t.i18nContext,i18nMessage:t.i18nMessage,sourceSpan:t.sourceSpan},wn),rn),te)}function ai(t){return t instanceof Oe}var Oe=class extends Ie{constructor(e=null){super(null,e)}},kt=class t extends Oe{name;kind=z.LexicalRead;constructor(e){super(),this.name=e}visitExpression(e,n){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.name)}},lh=class t extends Oe{target;targetSlot;offset;kind=z.Reference;constructor(e,n,r){super(),this.target=e,this.targetSlot=n,this.offset=r}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.target,this.targetSlot,this.offset)}},nu=class t extends Oe{target;value;sourceSpan;kind=z.StoreLet;[Ka]=!0;[D0]=!0;constructor(e,n,r){super(),this.target=e,this.value=n,this.sourceSpan=r}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target&&e.value.isEquivalent(this.value)}isConstant(){return!1}transformInternalExpressions(e,n){this.value=V(this.value,e,n)}clone(){return new t(this.target,this.value,this.sourceSpan)}},ru=class t extends Oe{target;targetSlot;kind=z.ContextLetReference;constructor(e,n){super(),this.target=e,this.targetSlot=n}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.target,this.targetSlot)}},as=class t extends Oe{view;kind=z.Context;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.view)}},wy=class t extends Oe{view;kind=z.TrackContext;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.view)}},ch=class t extends Oe{kind=z.NextContext;steps=1;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof t&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new t;return e.steps=this.steps,e}},_y=class t extends Oe{kind=z.GetCurrentView;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof t}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t}},uh=class t extends Oe{view;kind=z.RestoreView;constructor(e){super(),this.view=e}visitExpression(e,n){typeof this.view!="number"&&this.view.visitExpression(e,n)}isEquivalent(e){return!(e instanceof t)||typeof e.view!=typeof this.view?!1:typeof this.view=="number"?this.view===e.view:this.view.isEquivalent(e.view)}isConstant(){return!1}transformInternalExpressions(e,n){typeof this.view!="number"&&(this.view=V(this.view,e,n))}clone(){return new t(this.view instanceof Ie?this.view.clone():this.view)}},Ey=class t extends Oe{expr;kind=z.ResetView;constructor(e){super(),this.expr=e}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,n){this.expr=V(this.expr,e,n)}clone(){return new t(this.expr.clone())}},dh=class t extends Oe{target;value;kind=z.TwoWayBindingSet;constructor(e,n){super(),this.target=e,this.value=n}visitExpression(e,n){this.target.visitExpression(e,n),this.value.visitExpression(e,n)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,n){this.target=V(this.target,e,n),this.value=V(this.value,e,n)}clone(){return new t(this.target,this.value)}},Ti=class t extends Oe{xref;kind=z.ReadVariable;name=null;constructor(e){super(),this.xref=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new t(this.xref);return e.name=this.name,e}},mo=class t extends Oe{kind=z.PureFunctionExpr;[Ka]=!0;[Hh]=!0;varOffset=null;body;args;fn=null;constructor(e,n){super(),this.body=e,this.args=n}visitExpression(e,n){this.body?.visitExpression(e,n);for(let r of this.args)r.visitExpression(e,n)}isEquivalent(e){return!(e instanceof t)||e.args.length!==this.args.length?!1:e.body!==null&&this.body!==null&&e.body.isEquivalent(this.body)&&e.args.every((n,r)=>n.isEquivalent(this.args[r]))}isConstant(){return!1}transformInternalExpressions(e,n){this.body!==null?this.body=V(this.body,e,n|xe.InChildOperation):this.fn!==null&&(this.fn=V(this.fn,e,n));for(let r=0;r<this.args.length;r++)this.args[r]=V(this.args[r],e,n)}clone(){let e=new t(this.body?.clone()??null,this.args.map(n=>n.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}},ls=class t extends Oe{index;kind=z.PureFunctionParameterExpr;constructor(e){super(),this.index=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new t(this.index)}},go=class t extends Oe{target;targetSlot;name;args;kind=z.PipeBinding;[Ka]=!0;[Hh]=!0;varOffset=null;constructor(e,n,r,i){super(),this.target=e,this.targetSlot=n,this.name=r,this.args=i}visitExpression(e,n){for(let r of this.args)r.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){for(let r=0;r<this.args.length;r++)this.args[r]=V(this.args[r],e,n)}clone(){let e=new t(this.target,this.targetSlot,this.name,this.args.map(n=>n.clone()));return e.varOffset=this.varOffset,e}},iu=class t extends Oe{target;targetSlot;name;args;numArgs;kind=z.PipeBindingVariadic;[Ka]=!0;[Hh]=!0;varOffset=null;constructor(e,n,r,i,s){super(),this.target=e,this.targetSlot=n,this.name=r,this.args=i,this.numArgs=s}visitExpression(e,n){this.args.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.args=V(this.args,e,n)}clone(){let e=new t(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}},Ha=class t extends Oe{receiver;name;kind=z.SafePropertyRead;constructor(e,n){super(),this.receiver=e,this.name=n}get index(){return this.name}visitExpression(e,n){this.receiver.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=V(this.receiver,e,n)}clone(){return new t(this.receiver.clone(),this.name)}},Ga=class t extends Oe{receiver;index;kind=z.SafeKeyedRead;constructor(e,n,r){super(r),this.receiver=e,this.index=n}visitExpression(e,n){this.receiver.visitExpression(e,n),this.index.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=V(this.receiver,e,n),this.index=V(this.index,e,n)}clone(){return new t(this.receiver.clone(),this.index.clone(),this.sourceSpan)}},vo=class t extends Oe{receiver;args;kind=z.SafeInvokeFunction;constructor(e,n){super(),this.receiver=e,this.args=n}visitExpression(e,n){this.receiver.visitExpression(e,n);for(let r of this.args)r.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=V(this.receiver,e,n);for(let r=0;r<this.args.length;r++)this.args[r]=V(this.args[r],e,n)}clone(){return new t(this.receiver.clone(),this.args.map(e=>e.clone()))}},qa=class t extends Oe{guard;expr;kind=z.SafeTernaryExpr;constructor(e,n){super(),this.guard=e,this.expr=n}visitExpression(e,n){this.guard.visitExpression(e,n),this.expr.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.guard=V(this.guard,e,n),this.expr=V(this.expr,e,n)}clone(){return new t(this.guard.clone(),this.expr.clone())}},su=class t extends Oe{kind=z.EmptyExpr;visitExpression(e,n){}isEquivalent(e){return e instanceof t}isConstant(){return!0}clone(){return new t}transformInternalExpressions(){}},li=class t extends Oe{expr;xref;kind=z.AssignTemporaryExpr;name=null;constructor(e,n){super(),this.expr=e,this.xref=n}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.expr=V(this.expr,e,n)}clone(){let e=new t(this.expr.clone(),this.xref);return e.name=this.name,e}},cs=class t extends Oe{xref;kind=z.ReadTemporaryExpr;name=null;constructor(e){super(),this.xref=e}visitExpression(e,n){}isEquivalent(){return this.xref===this.xref}isConstant(){return!1}transformInternalExpressions(e,n){}clone(){let e=new t(this.xref);return e.name=this.name,e}},fh=class t extends Oe{slot;kind=z.SlotLiteralExpr;constructor(e){super(),this.slot=e}visitExpression(e,n){}isEquivalent(e){return e instanceof t&&e.slot===this.slot}isConstant(){return!0}clone(){return new t(this.slot)}transformInternalExpressions(){}},hh=class t extends Oe{expr;target;targetSlot;alias;kind=z.ConditionalCase;constructor(e,n,r,i=null){super(),this.expr=e,this.target=n,this.targetSlot=r,this.alias=i}visitExpression(e,n){this.expr!==null&&this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&e.expr===this.expr}isConstant(){return!0}clone(){return new t(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,n){this.expr!==null&&(this.expr=V(this.expr,e,n))}},ou=class t extends Oe{expr;kind=z.ConstCollected;constructor(e){super(),this.expr=e}transformInternalExpressions(e,n){this.expr=e(this.expr,n)}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t?this.expr.isEquivalent(e.expr):!1}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr)}};function At(t,e){st(t,(n,r)=>(e(n,r),n),xe.None)}var xe=(function(t){return t[t.None=0]="None",t[t.InChildOperation=1]="InChildOperation",t})(xe||{});function xv(t,e,n){for(let r=0;r<t.expressions.length;r++)t.expressions[r]=V(t.expressions[r],e,n)}function st(t,e,n){switch(t.kind){case v.StyleProp:case v.StyleMap:case v.ClassProp:case v.ClassMap:case v.AnimationString:case v.AnimationBinding:case v.Binding:t.expression instanceof Xe?xv(t.expression,e,n):t.expression=V(t.expression,e,n);break;case v.Property:case v.DomProperty:case v.Attribute:case v.Control:t.expression instanceof Xe?xv(t.expression,e,n):t.expression=V(t.expression,e,n),t.sanitizer=t.sanitizer&&V(t.sanitizer,e,n);break;case v.TwoWayProperty:t.expression=V(t.expression,e,n),t.sanitizer=t.sanitizer&&V(t.sanitizer,e,n);break;case v.I18nExpression:t.expression=V(t.expression,e,n);break;case v.InterpolateText:xv(t.interpolation,e,n);break;case v.Statement:ph(t.statement,e,n);break;case v.Variable:t.initializer=V(t.initializer,e,n);break;case v.Conditional:for(let r of t.conditions)r.expr!==null&&(r.expr=V(r.expr,e,n));t.processed!==null&&(t.processed=V(t.processed,e,n)),t.contextValue!==null&&(t.contextValue=V(t.contextValue,e,n));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:for(let r of t.handlerOps)st(r,e,n|xe.InChildOperation);break;case v.ExtractedAttribute:t.expression=t.expression&&V(t.expression,e,n),t.trustedValueFn=t.trustedValueFn&&V(t.trustedValueFn,e,n);break;case v.RepeaterCreate:if(t.trackByOps===null)t.track=V(t.track,e,n);else for(let r of t.trackByOps)st(r,e,n|xe.InChildOperation);t.trackByFn!==null&&(t.trackByFn=V(t.trackByFn,e,n));break;case v.Repeater:t.collection=V(t.collection,e,n);break;case v.Defer:t.loadingConfig!==null&&(t.loadingConfig=V(t.loadingConfig,e,n)),t.placeholderConfig!==null&&(t.placeholderConfig=V(t.placeholderConfig,e,n)),t.resolverFn!==null&&(t.resolverFn=V(t.resolverFn,e,n));break;case v.I18nMessage:for(let[r,i]of t.params)t.params.set(r,V(i,e,n));for(let[r,i]of t.postprocessingParams)t.postprocessingParams.set(r,V(i,e,n));break;case v.DeferWhen:t.expr=V(t.expr,e,n);break;case v.StoreLet:t.value=V(t.value,e,n);break;case v.Advance:case v.Container:case v.ContainerEnd:case v.ContainerStart:case v.DeferOn:case v.DisableBindings:case v.Element:case v.ElementEnd:case v.ElementStart:case v.EnableBindings:case v.I18n:case v.I18nApply:case v.I18nContext:case v.I18nEnd:case v.I18nStart:case v.IcuEnd:case v.IcuStart:case v.Namespace:case v.Pipe:case v.Projection:case v.ProjectionDef:case v.Template:case v.Text:case v.I18nAttributes:case v.IcuPlaceholder:case v.DeclareLet:case v.SourceLocation:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.ControlCreate:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${v[t.kind]}`)}}function V(t,e,n){if(t instanceof Oe)t.transformInternalExpressions(e,n);else if(t instanceof Se)t.lhs=V(t.lhs,e,n),t.rhs=V(t.rhs,e,n);else if(t instanceof so)t.expr=V(t.expr,e,n);else if(t instanceof Ln)t.receiver=V(t.receiver,e,n);else if(t instanceof Ii)t.receiver=V(t.receiver,e,n),t.index=V(t.index,e,n);else if(t instanceof yn){t.fn=V(t.fn,e,n);for(let r=0;r<t.args.length;r++)t.args[r]=V(t.args[r],e,n)}else if(t instanceof ni)for(let r=0;r<t.entries.length;r++)t.entries[r]=V(t.entries[r],e,n);else if(t instanceof _r)for(let r of t.entries)r instanceof es?r.expression=V(r.expression,e,n):r.value=V(r.value,e,n);else if(t instanceof ti)t.condition=V(t.condition,e,n),t.trueCase=V(t.trueCase,e,n),t.falseCase!==null&&(t.falseCase=V(t.falseCase,e,n));else if(t instanceof Da)t.expr=V(t.expr,e,n);else if(t instanceof Nf)t.expr=V(t.expr,e,n);else if(t instanceof Pf)for(let r=0;r<t.expressions.length;r++)t.expressions[r]=V(t.expressions[r],e,n);else if(t instanceof Sc)t.condition=V(t.condition,e,n);else if(t instanceof _c)t.tag=V(t.tag,e,n),t.template.expressions=t.template.expressions.map(r=>V(r,e,n));else if(t instanceof io)if(Array.isArray(t.body))for(let r=0;r<t.body.length;r++)ph(t.body[r],e,n);else t.body=V(t.body,e,n);else if(!(t instanceof _e)){if(t instanceof Cc)for(let r=0;r<t.expressions.length;r++)t.expressions[r]=V(t.expressions[r],e,n);else if(t instanceof wr)t.expr=V(t.expr,e,n);else if(t instanceof oo)t.expression=V(t.expression,e,n);else if(!(t instanceof yr||t instanceof ro||t instanceof Ot||t instanceof ka))throw new Error(`Unhandled expression kind: ${t.constructor.name}`)}return e(t,n)}function ph(t,e,n){if(t instanceof qt)t.expr=V(t.expr,e,n);else if(t instanceof Pt)t.value=V(t.value,e,n);else if(t instanceof _t)t.value!==void 0&&(t.value=V(t.value,e,n));else if(t instanceof Of){t.condition=V(t.condition,e,n);for(let r of t.trueCase)ph(r,e,n);for(let r of t.falseCase)ph(r,e,n)}else throw new Error(`Unhandled statement kind: ${t.constructor.name}`)}function sT(t){return t instanceof Ot&&typeof t.value=="string"}var N=(()=>{class t{static nextListId=0;debugListId=t.nextListId++;head={kind:v.ListEnd,next:null,prev:null,debugListId:this.debugListId};tail={kind:v.ListEnd,next:null,prev:null,debugListId:this.debugListId};constructor(){this.head.next=this.tail,this.tail.prev=this.head}push(n){if(Array.isArray(n)){for(let i of n)this.push(i);return}t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=this.debugListId;let r=this.tail.prev;n.prev=r,r.next=n,n.next=this.tail,this.tail.prev=n}prepend(n){if(n.length===0)return;for(let s of n)t.assertIsNotEnd(s),t.assertIsUnowned(s),s.debugListId=this.debugListId;let r=this.head.next,i=this.head;for(let s of n)i.next=s,s.prev=i,i=s;i.next=r,r.prev=i}*[Symbol.iterator](){let n=this.head.next;for(;n!==this.tail;){t.assertIsOwned(n,this.debugListId);let r=n.next;yield n,n=r}}*reversed(){let n=this.tail.prev;for(;n!==this.head;){t.assertIsOwned(n,this.debugListId);let r=n.prev;yield n,n=r}}static replace(n,r){t.assertIsNotEnd(n),t.assertIsNotEnd(r),t.assertIsOwned(n),t.assertIsUnowned(r),r.debugListId=n.debugListId,n.prev!==null&&(n.prev.next=r,r.prev=n.prev),n.next!==null&&(n.next.prev=r,r.next=n.next),n.debugListId=null,n.prev=null,n.next=null}static replaceWithMany(n,r){if(r.length===0){t.remove(n);return}t.assertIsNotEnd(n),t.assertIsOwned(n);let i=n.debugListId;n.debugListId=null;for(let u of r)t.assertIsNotEnd(u),t.assertIsUnowned(u);let{prev:s,next:o}=n;n.prev=null,n.next=null;let a=s;for(let u of r)t.assertIsUnowned(u),u.debugListId=i,a.next=u,u.prev=a,u.next=null,a=u;let l=r[0],c=a;s!==null&&(s.next=l,l.prev=s),o!==null&&(o.prev=c,c.next=o)}static remove(n){t.assertIsNotEnd(n),t.assertIsOwned(n),n.prev.next=n.next,n.next.prev=n.prev,n.debugListId=null,n.prev=null,n.next=null}static insertBefore(n,r){if(Array.isArray(n)){for(let i of n)t.insertBefore(i,r);return}if(t.assertIsOwned(r),r.prev===null)throw new Error("AssertionError: illegal operation on list start");t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=r.debugListId,n.prev=null,r.prev.next=n,n.prev=r.prev,n.next=r,r.prev=n}static insertAfter(n,r){if(t.assertIsOwned(r),r.next===null)throw new Error("AssertionError: illegal operation on list end");t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=r.debugListId,r.next.prev=n,n.next=r.next,n.prev=r,r.next=n}static assertIsUnowned(n){if(n.debugListId!==null)throw new Error(`AssertionError: illegal operation on owned node: ${v[n.kind]}`)}static assertIsOwned(n,r){if(n.debugListId===null)throw new Error(`AssertionError: illegal operation on unowned node: ${v[n.kind]}`);if(r!==void 0&&n.debugListId!==r)throw new Error(`AssertionError: node belongs to the wrong list (expected ${r}, actual ${n.debugListId})`)}static assertIsNotEnd(n){if(n.kind===v.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return t})(),Ft=class{slot=null},kP=new Set([v.Element,v.ElementStart,v.Container,v.ContainerStart,v.Template,v.RepeaterCreate,v.ConditionalCreate,v.ConditionalBranchCreate]);function us(t){return kP.has(t.kind)}function MP(t,e,n,r,i,s){return D(D({kind:v.ElementStart,xref:e,tag:t,handle:new Ft,attributes:null,localRefs:[],nonBindable:!1,namespace:n,i18nPlaceholder:r,startSourceSpan:i,wholeSourceSpan:s},tr),te)}function oT(t,e,n,r,i,s,o,a){return D(D({kind:v.Template,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ft,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},tr),te)}function aT(t,e,n,r,i,s,o,a){return D(D({kind:v.ConditionalCreate,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ft,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},tr),te)}function lT(t,e,n,r,i,s,o,a){return D(D({kind:v.ConditionalBranchCreate,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ft,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},tr),te)}function NP(t,e,n,r,i,s,o,a,l,c){return ne(D(D(D({kind:v.RepeaterCreate,attributes:null,xref:t,handle:new Ft,emptyView:e,track:r,trackByFn:null,trackByOps:null,tag:n,emptyTag:s,emptyAttributes:null,functionNameSuffix:"For",namespace:Gt.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:i,usesComponentInstance:!1,i18nPlaceholder:o,emptyI18nPlaceholder:a,startSourceSpan:l,wholeSourceSpan:c},tr),te),rn),{numSlotsUsed:e===null?2:3})}function RP(t,e){return D({kind:v.ElementEnd,xref:t,sourceSpan:e},te)}function PP(t){return D({kind:v.DisableBindings,xref:t},te)}function LP(t){return D({kind:v.EnableBindings,xref:t},te)}function cT(t,e,n,r){return D(D({kind:v.Text,xref:t,handle:new Ft,initialValue:e,icuPlaceholder:n,sourceSpan:r},tr),te)}function OP(t,e,n,r,i,s){return D({kind:v.AnimationString,name:t,target:e,animationKind:n,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},te)}function FP(t,e,n,r,i,s){let o=new N;return o.push(r),D({kind:v.Animation,name:t,target:e,animationKind:n,handlerOps:o,handlerFnName:null,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},te)}function k0(t,e,n,r,i,s,o,a,l){let c=new N;return c.push(i),D({kind:v.Listener,target:t,targetSlot:e,tag:r,hostListener:a,name:n,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isLegacyAnimationListener:s!==null,legacyAnimationPhase:s,eventTarget:o,sourceSpan:l},te)}function uT(t,e,n,r,i,s,o,a,l){let c=new N;return c.push(i),D({kind:v.AnimationListener,target:t,targetSlot:e,tag:r,hostListener:a,name:n,animationKind:s,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,eventTarget:o,sourceSpan:l},te)}function dT(t,e,n,r,i,s){let o=new N;return o.push(i),D({kind:v.TwoWayListener,target:t,targetSlot:e,tag:r,name:n,handlerOps:o,handlerFnName:null,sourceSpan:s},te)}function fT(t,e,n){return D(D({kind:v.Pipe,xref:t,handle:e,name:n},te),tr)}function VP(t){return D({kind:v.Namespace,active:t},te)}function BP(t){return D({kind:v.ProjectionDef,def:t},te)}function UP(t,e,n,r,i){return ne(D(D({kind:v.Projection,xref:t,handle:new Ft,selector:e,i18nPlaceholder:n,fallbackView:r,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:i},te),tr),{numSlotsUsed:r===null?1:2})}function An(t,e,n,r,i,s,o,a){return D({kind:v.ExtractedAttribute,target:t,bindingKind:e,namespace:n,name:r,expression:i,i18nContext:s,i18nMessage:o,securityContext:a,trustedValueFn:null},te)}function $P(t,e,n,r,i,s){return ne(D(D({kind:v.Defer,xref:t,handle:new Ft,mainView:e,mainSlot:n,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,ownResolverFn:r,resolverFn:i,flags:null,sourceSpan:s},te),tr),{numSlotsUsed:2})}function zi(t,e,n,r){return D({kind:v.DeferOn,defer:t,trigger:e,modifier:n,sourceSpan:r},te)}function HP(t,e,n){return D(D({kind:v.DeclareLet,xref:t,declaredName:e,sourceSpan:n,handle:new Ft},tr),te)}function GP(t,e,n,r,i,s,o,a){return D({kind:v.I18nMessage,xref:t,i18nContext:e,i18nBlock:n,message:r,messagePlaceholder:i,params:s,postprocessingParams:o,needsPostprocessing:a,subMessages:[]},te)}function Gh(t,e,n,r){return D(D({kind:v.I18nStart,xref:t,handle:new Ft,root:n??t,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:r},te),tr)}function qh(t,e){return D({kind:v.I18nEnd,xref:t,sourceSpan:e},te)}function qP(t,e,n,r){return D({kind:v.IcuStart,xref:t,message:e,messagePlaceholder:n,context:null,sourceSpan:r},te)}function jP(t){return D({kind:v.IcuEnd,xref:t},te)}function WP(t,e,n){return D({kind:v.IcuPlaceholder,xref:t,name:e,strings:n,expressionPlaceholders:[]},te)}function Tv(t,e,n,r,i){if(n===null&&t!==Js.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return D({kind:v.I18nContext,contextKind:t,xref:e,i18nBlock:n,message:r,sourceSpan:i,params:new Map,postprocessingParams:new Map},te)}function hT(t,e,n){return D(D({kind:v.I18nAttributes,xref:t,handle:e,target:n,i18nAttributesConfig:null},te),tr)}function zP(t,e){return D({kind:v.SourceLocation,templatePath:t,locations:e},te)}function JP(t){return D({kind:v.ControlCreate,sourceSpan:t},te)}function YP(t,e,n,r,i,s){return D(D({kind:v.DomProperty,name:t,expression:e,bindingKind:n,i18nContext:r,securityContext:i,sanitizer:null,sourceSpan:s},rn),te)}var pT="CTX_REF_MARKER",F=(function(t){return t[t.Tmpl=0]="Tmpl",t[t.Host=1]="Host",t[t.Both=2]="Both",t})(F||{}),fn=(function(t){return t[t.Full=0]="Full",t[t.DomOnly=1]="DomOnly",t})(fn||{}),mh=class{componentName;pool;compatibility;mode;constructor(e,n,r,i){this.componentName=e,this.pool=n,this.compatibility=r,this.mode=i}kind=F.Both;allocateXrefId(){return this.nextXrefId++}nextXrefId=0},au=class extends mh{relativeContextFilePath;i18nUseExternalIds;deferMeta;allDeferrableDepsFn;relativeTemplatePath;enableDebugLocations;constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i),this.relativeContextFilePath=s,this.i18nUseExternalIds=o,this.deferMeta=a,this.allDeferrableDepsFn=l,this.relativeTemplatePath=c,this.enableDebugLocations=u,this.root=new Qn(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}kind=F.Tmpl;fnSuffix="Template";root;views=new Map;contentSelectors=null;allocateView(e){let n=new Qn(this,this.allocateXrefId(),e);return this.views.set(n.xref,n),n}get units(){return this.views.values()}addConst(e,n){for(let i=0;i<this.consts.length;i++)if(this.consts[i].isEquivalent(e))return i;let r=this.consts.length;return this.consts.push(e),n&&this.constsInitializers.push(...n),r}consts=[];constsInitializers=[]},gh=class{xref;constructor(e){this.xref=e}create=new N;update=new N;fnName=null;vars=null;*ops(){for(let e of this.create)if(yield e,e.kind===v.Listener||e.kind===v.Animation||e.kind===v.AnimationListener||e.kind===v.TwoWayListener)for(let n of e.handlerOps)yield n;else if(e.kind===v.RepeaterCreate&&e.trackByOps!==null)for(let n of e.trackByOps)yield n;for(let e of this.update)yield e}},Qn=class extends gh{job;parent;constructor(e,n,r){super(n),this.job=e,this.parent=r}contextVariables=new Map;aliases=new Set;decls=null},vh=class extends mh{constructor(e,n,r,i){super(e,n,r,i),this.root=new Cy(this)}kind=F.Host;fnSuffix="HostBindings";root;get units(){return[this.root]}},Cy=class extends gh{job;constructor(e){super(0),this.job=e}attributes=null};function KP(t){for(let e of t.units)for(let n of e.ops())st(n,QP,xe.None)}function QP(t){if(t instanceof yn&&t.fn instanceof kt&&t.fn.name==="$any"){if(t.args.length!==1)throw new Error("The $any builtin function expects exactly one argument.");return t.args[0]}return t}function XP(t){let e=new Map;for(let n of t.units)for(let r of n.create)r.kind===v.I18nContext&&e.set(r.xref,r);for(let n of t.units)for(let r of n.update)r.kind===v.I18nExpression&&ZP(e,r)&&N.insertAfter(IP(r.i18nOwner,r.handle,null),r)}function ZP(t,e){if(e.next?.kind!==v.I18nExpression)return!0;let n=t.get(e.context),r=t.get(e.next.context);if(n===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(r===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return n.i18nBlock!==null?n.i18nBlock!==r.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function eL(t){for(let e of t.units){let n=e.update.head,r=[],i=null;for(let s of e.create){if(s.kind===v.I18nStart)i={blockXref:s.xref,lastSlotConsumer:s.xref};else if(s.kind===v.I18nEnd){for(let o of r)o.target=i.lastSlotConsumer,N.insertBefore(o,n);r.length=0,i=null}if(Qa(s))for(i!==null&&(i.lastSlotConsumer=s.xref);n.next!==null;){if(i!==null&&n.kind===v.I18nExpression&&n.usage===Ya.I18nText&&n.i18nOwner===i.blockXref){let a=n;n=n.next,N.remove(a),r.push(a);continue}let o=!1;if(tu(n)&&n.target!==s.xref?o=!0:(n.kind===v.Statement||n.kind===v.Variable)&&At(n,a=>{!o&&tu(a)&&a.target!==s.xref&&(o=!0)}),o)break;n=n.next}}}}function tL(t){if(!(!t.enableDebugLocations||t.relativeTemplatePath===null))for(let e of t.units){let n=[];for(let r of e.create)if(r.kind===v.ElementStart||r.kind===v.Element){let i=r.startSourceSpan.start;n.push({targetSlot:r.handle,offset:i.offset,line:i.line,column:i.col})}n.length>0&&e.create.push(zP(t.relativeTemplatePath,n))}}function mT(t){let e=new Map;for(let n of t.create)Qa(n)&&(e.set(n.xref,n),n.kind===v.RepeaterCreate&&n.emptyView!==null&&e.set(n.emptyView,n));return e}function nL(t){for(let e of t.units){let n=mT(e);for(let r of e.ops())switch(r.kind){case v.Attribute:rL(e,r,n);break;case v.Property:if(r.bindingKind!==U.LegacyAnimation&&r.bindingKind!==U.Animation){let i;r.i18nMessage!==null&&r.templateKind===null?i=U.I18n:r.isStructuralTemplateAttribute?i=U.Template:i=U.Property,N.insertBefore(An(r.target,i,null,r.name,null,null,null,r.securityContext),Us(n,r.target))}break;case v.Control:N.insertBefore(An(r.target,U.Property,null,r.name,null,null,null,r.securityContext),Us(n,r.target));break;case v.TwoWayProperty:N.insertBefore(An(r.target,U.TwoWayProperty,null,r.name,null,null,null,r.securityContext),Us(n,r.target));break;case v.StyleProp:case v.ClassProp:e.job.compatibility===Fn.TemplateDefinitionBuilder&&r.expression instanceof su&&N.insertBefore(An(r.target,U.Property,null,r.name,null,null,null,Le.STYLE),Us(n,r.target));break;case v.Listener:if(!r.isLegacyAnimationListener){let i=An(r.target,U.Property,null,r.name,null,null,null,Le.NONE);if(t.kind===F.Host){if(t.compatibility)break;e.create.push(i)}else N.insertBefore(i,Us(n,r.target))}break;case v.TwoWayListener:if(t.kind!==F.Host){let i=An(r.target,U.Property,null,r.name,null,null,null,Le.NONE);N.insertBefore(i,Us(n,r.target))}break}}}function Us(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function rL(t,e,n){if(e.expression instanceof Xe)return;let r=e.isTextAttribute||e.expression.isConstant();if(t.job.compatibility===Fn.TemplateDefinitionBuilder&&(r&&=e.isTextAttribute),r){let i=An(e.target,e.isStructuralTemplateAttribute?U.Template:U.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(t.job.kind===F.Host)t.create.push(i);else{let s=Us(n,e.target);N.insertBefore(i,s)}N.remove(e)}}var mb="aria-";function gT(t){return t.startsWith(mb)&&t.length>mb.length}function iL(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function sL(t){let e=new Map;for(let n of t.units)for(let r of n.create)us(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.ops())if(r.kind===v.Binding)switch(r.bindingKind){case U.Attribute:if(r.name==="ngNonBindable"){N.remove(r);let i=iL(e,r.target);i.nonBindable=!0}else if(r.name.startsWith("animate."))N.replace(r,pb(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,0));else{let[i,s]=Er(r.name);N.replace(r,hb(r.target,i,s,r.expression,r.securityContext,r.isTextAttribute,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan))}break;case U.Animation:N.replace(r,pb(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,1));break;case U.Property:case U.LegacyAnimation:t.mode===fn.DomOnly&&gT(r.name)?N.replace(r,hb(r.target,null,r.name,r.expression,r.securityContext,!1,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan)):t.kind===F.Host?N.replace(r,YP(r.name,r.expression,r.bindingKind,r.i18nContext,r.securityContext,r.sourceSpan)):r.name==="formField"?N.replace(r,DP(r)):N.replace(r,yP(r.target,r.name,r.expression,r.bindingKind,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case U.TwoWayProperty:if(!(r.expression instanceof Ie))throw new Error(`Expected value of two-way property binding "${r.name}" to be an expression`);N.replace(r,wP(r.target,r.name,r.expression,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case U.I18n:case U.ClassName:case U.StyleProperty:throw new Error(`Unhandled binding of kind ${U[r.bindingKind]}`)}}var gb=new Map([[C.ariaProperty,C.ariaProperty],[C.attribute,C.attribute],[C.classProp,C.classProp],[C.element,C.element],[C.elementContainer,C.elementContainer],[C.elementContainerEnd,C.elementContainerEnd],[C.elementContainerStart,C.elementContainerStart],[C.elementEnd,C.elementEnd],[C.elementStart,C.elementStart],[C.domProperty,C.domProperty],[C.i18nExp,C.i18nExp],[C.listener,C.listener],[C.listener,C.listener],[C.property,C.property],[C.styleProp,C.styleProp],[C.syntheticHostListener,C.syntheticHostListener],[C.syntheticHostProperty,C.syntheticHostProperty],[C.templateCreate,C.templateCreate],[C.twoWayProperty,C.twoWayProperty],[C.twoWayListener,C.twoWayListener],[C.declareLet,C.declareLet],[C.conditionalCreate,C.conditionalBranchCreate],[C.conditionalBranchCreate,C.conditionalBranchCreate],[C.domElement,C.domElement],[C.domElementStart,C.domElementStart],[C.domElementEnd,C.domElementEnd],[C.domElementContainer,C.domElementContainer],[C.domElementContainerStart,C.domElementContainerStart],[C.domElementContainerEnd,C.domElementContainerEnd],[C.domListener,C.domListener],[C.domTemplate,C.domTemplate],[C.animationEnter,C.animationEnter],[C.animationLeave,C.animationLeave],[C.animationEnterListener,C.animationEnterListener],[C.animationLeaveListener,C.animationLeaveListener]]),oL=256;function aL(t){for(let e of t.units)vb(e.create),vb(e.update)}function vb(t){let e=null;for(let n of t){if(n.kind!==v.Statement||!(n.statement instanceof qt)){e=null;continue}if(!(n.statement.expr instanceof yn)||!(n.statement.expr.fn instanceof ro)){e=null;continue}let r=n.statement.expr.fn.value;if(!gb.has(r)){e=null;continue}if(e!==null&&gb.get(e.instruction)===r&&e.length<oL){let i=e.expression.callFn(n.statement.expr.args,n.statement.expr.sourceSpan,n.statement.expr.pure);e.expression=i,e.op.statement=i.toStmt(),e.length++,N.remove(n)}else e={op:n,instruction:r,expression:n.statement.expr,length:1}}}function lL(t){for(let e of t.units)for(let n of e.update)(n.kind===v.Attribute||n.kind===v.StyleProp||n.kind==v.StyleMap||n.kind===v.ClassMap)&&n.expression instanceof Xe&&n.expression.strings.length===2&&n.expression.strings.every(i=>i==="")&&(n.expression=n.expression.expressions[0])}function cL(t){for(let e of t.units)for(let n of e.ops()){if(n.kind!==v.Conditional)continue;let r,i=n.conditions.findIndex(a=>a.expr===null);if(i>=0){let a=n.conditions.splice(i,1)[0].targetSlot;r=new fh(a)}else r=I(-1);let s=n.test==null?null:new li(n.test,t.allocateXrefId()),o=null;for(let a=n.conditions.length-1;a>=0;a--){let l=n.conditions[a];if(l.expr!==null){if(s!==null){let c=a===0?s:new cs(s.xref);l.expr=new Se(P.Identical,c,l.expr)}else l.alias!==null&&(o??=t.allocateXrefId(),l.expr=new li(l.expr,o),n.contextValue=new cs(o));r=new ti(l.expr,new fh(l.targetSlot),r)}}n.processed=r,n.conditions=[]}}var uL=new Map([["&&",P.And],[">",P.Bigger],[">=",P.BiggerEquals],["|",P.BitwiseOr],["&",P.BitwiseAnd],["/",P.Divide],["=",P.Assign],["==",P.Equals],["===",P.Identical],["<",P.Lower],["<=",P.LowerEquals],["-",P.Minus],["%",P.Modulo],["**",P.Exponentiation],["*",P.Multiply],["!=",P.NotEquals],["!==",P.NotIdentical],["??",P.NullishCoalesce],["||",P.Or],["+",P.Plus],["in",P.In],["+=",P.AdditionAssignment],["-=",P.SubtractionAssignment],["*=",P.MultiplicationAssignment],["/=",P.DivisionAssignment],["%=",P.RemainderAssignment],["**=",P.ExponentiationAssignment],["&&=",P.AndAssignment],["||=",P.OrAssignment],["??=",P.NullishCoalesceAssignment]]);function vT(t){let e=new Map([["svg",Gt.SVG],["math",Gt.Math]]);return t===null?Gt.HTML:e.get(t)??Gt.HTML}function dL(t){let e=new Map([["svg",Gt.SVG],["math",Gt.Math]]);for(let[n,r]of e.entries())if(r===t)return n;return null}function fL(t,e){return e===Gt.HTML?t:`:${dL(e)}:${t}`}function ja(t){return Array.isArray(t)?Me(t.map(ja)):I(t)}function hL(t){let e=new Map;for(let n of t.units)for(let r of n.create)if(r.kind===v.ExtractedAttribute){let i=e.get(r.target)||new Sy(t.compatibility);e.set(r.target,i),i.add(r.bindingKind,r.name,r.expression,r.namespace,r.trustedValueFn),N.remove(r)}if(t instanceof au)for(let n of t.units)for(let r of n.create)if(r.kind==v.Projection){let i=e.get(r.xref);if(i!==void 0){let s=by(i);s.entries.length>0&&(r.attributes=s)}}else us(r)&&(r.attributes=yb(t,e,r.xref),r.kind===v.RepeaterCreate&&r.emptyView!==null&&(r.emptyAttributes=yb(t,e,r.emptyView)));else if(t instanceof vh)for(let[n,r]of e.entries()){if(n!==t.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");let i=by(r);i.entries.length>0&&(t.root.attributes=i)}}function yb(t,e,n){let r=e.get(n);if(r!==void 0){let i=by(r);if(i.entries.length>0)return t.addConst(i)}return null}var ha=Object.freeze([]),Sy=class{compatibility;known=new Map;byKind=new Map;propertyBindings=null;projectAs=null;get attributes(){return this.byKind.get(U.Attribute)??ha}get classes(){return this.byKind.get(U.ClassName)??ha}get styles(){return this.byKind.get(U.StyleProperty)??ha}get bindings(){return this.propertyBindings??ha}get template(){return this.byKind.get(U.Template)??ha}get i18n(){return this.byKind.get(U.I18n)??ha}constructor(e){this.compatibility=e}isKnown(e,n){let r=this.known.get(e)??new Set;return this.known.set(e,r),r.has(n)?!0:(r.add(n),!1)}add(e,n,r,i,s){if(!(this.compatibility===Fn.TemplateDefinitionBuilder&&(e===U.Attribute||e===U.ClassName||e===U.StyleProperty))&&this.isKnown(e,n))return;if(n==="ngProjectAs"){if(r===null||!(r instanceof Ot)||r.value==null||typeof r.value?.toString()!="string")throw Error("ngProjectAs must have a string literal value");this.projectAs=r.value.toString()}let a=this.arrayFor(e);if(a.push(...pL(i,n)),e===U.Attribute||e===U.StyleProperty){if(r===null)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(s!==null){if(!sT(r))throw Error("AssertionError: extracted attribute value should be string literal");a.push(M2(s,new Cc([new Rf(r.value)],[]),void 0,r.sourceSpan))}else a.push(r)}}arrayFor(e){return e===U.Property||e===U.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}};function pL(t,e){let n=I(e);return t?[I(0),I(t),n]:[n]}function by({attributes:t,bindings:e,classes:n,i18n:r,projectAs:i,styles:s,template:o}){let a=[...t];if(i!==null){let l=p0(i)[0];a.push(I(5),ja(l))}return n.length>0&&a.push(I(1),...n),s.length>0&&a.push(I(2),...s),e.length>0&&a.push(I(3),...e),o.length>0&&a.push(I(4),...o),r.length>0&&a.push(I(6),...r),Me(a)}function mL(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function gL(t){let e=new Map;for(let n of t.units)for(let r of n.create)us(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.ops())if(r.kind===v.AnimationBinding){let i=vL(r);t.kind===F.Host?n.create.push(i):N.insertAfter(i,mL(e,r.target)),N.remove(r)}}function vL(t){if(t.animationBindingKind===0)return OP(t.name,t.target,t.name==="animate.enter"?"enter":"leave",t.expression,t.securityContext,t.sourceSpan);{let e=t.expression;return FP(t.name,t.target,t.name==="animate.enter"?"enter":"leave",[er(new Pt(e,e.sourceSpan))],t.securityContext,t.sourceSpan)}}function yL(t){let e=new Map;for(let n of t.units){for(let r of n.create)r.kind===v.I18nAttributes&&e.set(r.target,r);for(let r of n.update)switch(r.kind){case v.Property:case v.Attribute:if(r.i18nContext===null||!(r.expression instanceof Xe))continue;let i=e.get(r.target);if(i===void 0)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(i.target!==r.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");let s=[];for(let o=0;o<r.expression.expressions.length;o++){let a=r.expression.expressions[o];if(r.expression.i18nPlaceholders.length!==r.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${r.expression.i18nPlaceholders.length} placeholders and ${r.expression.expressions.length} expressions`);s.push(iT(r.i18nContext,i.target,i.xref,i.handle,a,null,r.expression.i18nPlaceholders[o],eu.Creation,Ya.I18nAttribute,r.name,r.sourceSpan))}N.replaceWithMany(r,s);break}}}function wL(t){let e=new Map;for(let i of t.units)for(let s of i.ops())switch(s.kind){case v.Binding:case v.Property:case v.Attribute:case v.ExtractedAttribute:if(s.i18nMessage===null)continue;if(!e.has(s.i18nMessage)){let o=Tv(Js.Attr,t.allocateXrefId(),null,s.i18nMessage,null);i.create.push(o),e.set(s.i18nMessage,o.xref)}s.i18nContext=e.get(s.i18nMessage);break}let n=new Map;for(let i of t.units)for(let s of i.create)switch(s.kind){case v.I18nStart:if(s.xref===s.root){let o=Tv(Js.RootI18n,t.allocateXrefId(),s.xref,s.message,null);i.create.push(o),s.context=o.xref,n.set(s.xref,o)}break}for(let i of t.units)for(let s of i.create)if(s.kind===v.I18nStart&&s.xref!==s.root){let o=n.get(s.root);if(o===void 0)throw Error("AssertionError: Root i18n block i18n context should have been created.");s.context=o.xref,n.set(s.xref,o)}let r=null;for(let i of t.units)for(let s of i.create)switch(s.kind){case v.I18nStart:r=s;break;case v.I18nEnd:r=null;break;case v.IcuStart:if(r===null)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(s.message.id!==r.message.id){let o=Tv(Js.Icu,t.allocateXrefId(),r.root,s.message,null);i.create.push(o),s.context=o.xref}else s.context=r.context,n.get(r.xref).contextKind=Js.Icu;break}}function _L(t){let e=new Map;for(let n of t.units)for(let r of n.update.reversed())if(r.kind===v.Binding&&r.isTextAttribute){let i=e.get(r.target)||new Set;i.has(r.name)&&t.compatibility===Fn.TemplateDefinitionBuilder&&(r.name==="style"||r.name==="class")&&N.remove(r),i.add(r.name),e.set(r.target,i)}}function EL(t){for(let e of t.units)for(let n of e.create)n.kind===v.Defer&&(n.placeholderMinimumTime!==null&&(n.placeholderConfig=new ou(ja([n.placeholderMinimumTime]))),(n.loadingMinimumTime!==null||n.loadingAfterTime!==null)&&(n.loadingConfig=new ou(ja([n.loadingMinimumTime,n.loadingAfterTime]))))}function CL(t){let e=new Map;function n(i){if(e.has(i.xref))return e.get(i.xref);let s=new SL;for(let o of i.create)if(!(!us(o)||o.localRefs===null)){if(!Array.isArray(o.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(let a of o.localRefs)a.target===""&&s.targets.set(a.name,{xref:o.xref,slot:o.handle})}return e.set(i.xref,s),s}function r(i,s,o){switch(s.trigger.kind){case Pe.Idle:case Pe.Never:case Pe.Immediate:case Pe.Timer:return;case Pe.Hover:case Pe.Interaction:case Pe.Viewport:if(s.trigger.targetName===null){if(o===null)throw new Error("defer on trigger with no target name must have a placeholder block");let c=t.views.get(o);if(c==null)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(let u of c.create)if(Qa(u)&&(us(u)||u.kind===v.Projection)){s.trigger.targetXref=u.xref,s.trigger.targetView=o,s.trigger.targetSlotViewSteps=-1,s.trigger.targetSlot=u.handle;return}return}let a=o!==null?t.views.get(o):i,l=o!==null?-1:0;for(;a!==null;){let c=n(a);if(c.targets.has(s.trigger.targetName)){let{xref:u,slot:h}=c.targets.get(s.trigger.targetName);s.trigger.targetXref=u,s.trigger.targetView=a.xref,s.trigger.targetSlotViewSteps=l,s.trigger.targetSlot=h;return}a=a.parent!==null?t.views.get(a.parent):null,l++}break;default:throw new Error(`Trigger kind ${s.trigger.kind} not handled`)}}for(let i of t.units){let s=new Map;for(let o of i.create)switch(o.kind){case v.Defer:s.set(o.xref,o);break;case v.DeferOn:let a=s.get(o.defer);r(i,o,o.modifier==="hydrate"?a.mainView:a.placeholderView);break}}}var SL=class{targets=new Map},bL=new Map([[v.ElementEnd,[v.ElementStart,v.Element]],[v.ContainerEnd,[v.ContainerStart,v.Container]],[v.I18nEnd,[v.I18nStart,v.I18n]]]),xL=new Set([v.Pipe]);function TL(t){for(let e of t.units)for(let n of e.create){let r=bL.get(n.kind);if(r===void 0)continue;let[i,s]=r,o=n.prev;for(;o!==null&&xL.has(o.kind);)o=o.prev;o!==null&&o.kind===i&&(o.kind=s,N.remove(n))}}function IL(t){for(let e of t.units)for(let n of e.ops())st(n,r=>RL(r,{job:t}),xe.None),st(n,PL,xe.None)}function In(t){return t instanceof so?In(t.expr):t instanceof Se?In(t.lhs)||In(t.rhs):t instanceof ti?t.falseCase&&In(t.falseCase)?!0:In(t.condition)||In(t.trueCase):t instanceof Sc?In(t.condition):t instanceof li?In(t.expr):t instanceof Ln?In(t.receiver):t instanceof Ii?In(t.receiver)||In(t.index):t instanceof wr?In(t.expr):t instanceof yn||t instanceof ni||t instanceof _r||t instanceof vo||t instanceof go}function AL(t){let e=new Set;return V(t,n=>(n instanceof li&&e.add(n.xref),n),xe.None),e}function DL(t,e,n){return V(t,r=>{if(r instanceof li&&e.has(r.xref)){let i=new cs(r.xref);return n.job.compatibility===Fn.TemplateDefinitionBuilder?new li(i,i.xref):i}return r},xe.None),t}function pa(t,e,n){let r;if(In(t)){let i=n.job.allocateXrefId();r=[new li(t,i),new cs(i)]}else r=[t,t.clone()],DL(r[1],AL(r[0]),n);return new qa(r[0],e(r[1]))}function kL(t){return t instanceof Ha||t instanceof Ga||t instanceof vo}function ML(t){return t instanceof Ln||t instanceof Ii||t instanceof yn}function yT(t){return kL(t)||ML(t)}function NL(t){if(yT(t)&&t.receiver instanceof qa){let e=t.receiver;for(;e.expr instanceof qa;)e=e.expr;return e}return null}function RL(t,e){if(!yT(t))return t;let n=NL(t);if(n){if(t instanceof yn)return n.expr=n.expr.callFn(t.args),t.receiver;if(t instanceof Ln)return n.expr=n.expr.prop(t.name),t.receiver;if(t instanceof Ii)return n.expr=n.expr.key(t.index),t.receiver;if(t instanceof vo)return n.expr=pa(n.expr,r=>r.callFn(t.args),e),t.receiver;if(t instanceof Ha)return n.expr=pa(n.expr,r=>r.prop(t.name),e),t.receiver;if(t instanceof Ga)return n.expr=pa(n.expr,r=>r.key(t.index),e),t.receiver}else{if(t instanceof vo)return pa(t.receiver,r=>r.callFn(t.args),e);if(t instanceof Ha)return pa(t.receiver,r=>r.prop(t.name),e);if(t instanceof Ga)return pa(t.receiver,r=>r.key(t.index),e)}return t}function PL(t){return t instanceof qa?new wr(new ti(new Se(P.Equals,t.guard,Na),Na,t.expr)):t}var wb="\uFFFD",LL="#",OL="*",FL="/",VL=":",BL="[",UL="]",$L="|";function HL(t){let e=new Map,n=new Map,r=new Map;for(let s of t.units)for(let o of s.create)switch(o.kind){case v.I18nContext:let a=GL(t,o);s.create.push(a),e.set(o.xref,a),r.set(o.xref,o);break;case v.I18nStart:n.set(o.xref,o);break}let i=null;for(let s of t.units)for(let o of s.create)switch(o.kind){case v.IcuStart:i=o,N.remove(o);let a=r.get(o.context);if(a.contextKind!==Js.Icu)continue;let l=n.get(a.i18nBlock);if(l.context===a.xref)continue;let c=n.get(l.root),u=e.get(c.context);if(u===void 0)throw Error("AssertionError: ICU sub-message should belong to a root message.");let h=e.get(a.xref);h.messagePlaceholder=o.messagePlaceholder,u.subMessages.push(h.xref);break;case v.IcuEnd:i=null,N.remove(o);break;case v.IcuPlaceholder:if(i===null||i.context==null)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(i.context).postprocessingParams.set(o.name,I(qL(o))),N.remove(o);break}}function GL(t,e,n){let r=_b(e.params),i=_b(e.postprocessingParams),s=[...e.params.values()].some(o=>o.length>1);return GP(t.allocateXrefId(),e.xref,e.i18nBlock,e.message,null,r,i,s)}function qL(t){if(t.strings.length!==t.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${t.strings.length} strings and ${t.expressionPlaceholders.length} expressions`);let e=t.expressionPlaceholders.map(Sa);return t.strings.flatMap((n,r)=>[n,e[r]||""]).join("")}function _b(t){let e=new Map;for(let[n,r]of t){let i=jL(r);i!==null&&e.set(n,I(i))}return e}function jL(t){if(t.length===0)return null;let e=t.map(n=>Sa(n));return e.length===1?e[0]:`${BL}${e.join($L)}${UL}`}function Sa(t){if(t.flags&Ue.ElementTag&&t.flags&Ue.TemplateTag){if(typeof t.value!="object")throw Error("AssertionError: Expected i18n param value to have an element and template slot");let i=Sa(ne(D({},t),{value:t.value.element,flags:t.flags&~Ue.TemplateTag})),s=Sa(ne(D({},t),{value:t.value.template,flags:t.flags&~Ue.ElementTag}));return t.flags&Ue.OpenTag&&t.flags&Ue.CloseTag?`${s}${i}${s}`:t.flags&Ue.CloseTag?`${i}${s}`:`${s}${i}`}if(t.flags&Ue.OpenTag&&t.flags&Ue.CloseTag)return`${Sa(ne(D({},t),{flags:t.flags&~Ue.CloseTag}))}${Sa(ne(D({},t),{flags:t.flags&~Ue.OpenTag}))}`;if(t.flags===Ue.None)return`${t.value}`;let e="",n="";t.flags&Ue.ElementTag?e=LL:t.flags&Ue.TemplateTag&&(e=OL),e!==""&&(n=t.flags&Ue.CloseTag?FL:"");let r=t.subTemplateIndex===null?"":`${VL}${t.subTemplateIndex}`;return`${wb}${n}${e}${t.value}${r}${wb}`}function WL(t){for(let e of t.units){let n=new Map;for(let i of e.create){if(Qa(i)){if(i.handle.slot===null)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls")}else continue;n.set(i.xref,i.handle.slot)}let r=0;for(let i of e.update){let s=null;if(tu(i)?s=i:At(i,a=>{s===null&&tu(a)&&(s=a)}),s===null)continue;if(!n.has(s.target))throw new Error(`AssertionError: reference to unknown slot for target ${s.target}`);let o=n.get(s.target);if(r!==o){let a=o-r;if(a<0)throw new Error("AssertionError: slot counter should never need to move backwards");N.insertBefore(bP(a,s.sourceSpan),i),r=o}}}}function zL(t){for(let e of t.units)for(let n of e.update){if(n.kind!==v.StoreLet)continue;let r={kind:It.Identifier,name:null,identifier:n.declaredName,local:!0};N.replace(n,Ki(t.allocateXrefId(),r,new nu(n.target,n.value,n.sourceSpan),Kn.None))}}function JL(t){let e=t.compatibility===Fn.TemplateDefinitionBuilder,n=[],r=0;for(let i of t.units)for(let s of i.create)s.kind===v.Projection&&(n.push(s.selector),s.projectionSlotIndex=r++);if(n.length>0){let i=null;if(n.length>1||n[0]!=="*"){let s=n.map(o=>o==="*"?o:p0(o));i=t.pool.getConstLiteral(ja(s),e)}t.contentSelectors=t.pool.getConstLiteral(ja(n),e),t.root.create.prepend([BP(i)])}}function YL(t){uc(t.root,null)}function uc(t,e){let n=KL(t,e);for(let r of t.create)switch(r.kind){case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:uc(t.job.views.get(r.xref),n);break;case v.Projection:r.fallbackView!==null&&uc(t.job.views.get(r.fallbackView),n);break;case v.RepeaterCreate:uc(t.job.views.get(r.xref),n),r.emptyView&&uc(t.job.views.get(r.emptyView),n),r.trackByOps!==null&&r.trackByOps.prepend(bf(t,n,!1));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:r.handlerOps.prepend(bf(t,n,!0));break}t.update.prepend(bf(t,n,!1))}function KL(t,e){let n={view:t.xref,viewContextVariable:{kind:It.Context,name:null,view:t.xref},contextVariables:new Map,aliases:t.aliases,references:[],letDeclarations:[],parent:e};for(let r of t.contextVariables.keys())n.contextVariables.set(r,{kind:It.Identifier,name:null,identifier:r,local:!1});for(let r of t.create)switch(r.kind){case v.ElementStart:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!Array.isArray(r.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let i=0;i<r.localRefs.length;i++)n.references.push({name:r.localRefs[i].name,targetId:r.xref,targetSlot:r.handle,offset:i,variable:{kind:It.Identifier,name:null,identifier:r.localRefs[i].name,local:!1}});break;case v.DeclareLet:n.letDeclarations.push({targetId:r.xref,targetSlot:r.handle,variable:{kind:It.Identifier,name:null,identifier:r.declaredName,local:!1}});break}return n}function bf(t,e,n){let r=[];e.view!==t.xref&&r.push(Ki(t.job.allocateXrefId(),e.viewContextVariable,new ch,Kn.None));let i=t.job.views.get(e.view);for(let[s,o]of i.contextVariables){let a=new as(e.view),l=o===pT?a:new Ln(a,o);r.push(Ki(t.job.allocateXrefId(),e.contextVariables.get(s),l,Kn.None))}for(let s of i.aliases)r.push(Ki(t.job.allocateXrefId(),s,s.expression.clone(),Kn.AlwaysInline));for(let s of e.references)r.push(Ki(t.job.allocateXrefId(),s.variable,new lh(s.targetId,s.targetSlot,s.offset),Kn.None));if(e.view!==t.xref||n)for(let s of e.letDeclarations)r.push(Ki(t.job.allocateXrefId(),s.variable,new ru(s.targetId,s.targetSlot),Kn.None));return e.parent!==null&&r.push(...bf(t,e.parent,!1)),r}function QL(t){for(let e of t.units)for(let n of e.ops())st(n,r=>r instanceof ou?I(t.addConst(r.expr)):r,xe.None)}var Eb="style.",Cb="class.",XL="style!",Sb="class!",bb="!important";function ZL(t){for(let e of t.root.update)if(e.kind===v.Binding&&e.bindingKind===U.Property)if(e.name.endsWith(bb)&&(e.name=e.name.substring(0,e.name.length-bb.length)),e.name.startsWith(Eb)){e.bindingKind=U.StyleProperty,e.name=e.name.substring(Eb.length),eO(e.name)||(e.name=tO(e.name));let{property:n,suffix:r}=Iv(e.name);e.name=n,e.unit=r}else e.name.startsWith(XL)?(e.bindingKind=U.StyleProperty,e.name="style"):e.name.startsWith(Cb)?(e.bindingKind=U.ClassName,e.name=Iv(e.name.substring(Cb.length)).property):e.name.startsWith(Sb)&&(e.bindingKind=U.ClassName,e.name=Iv(e.name.substring(Sb.length)).property)}function eO(t){return t.startsWith("--")}function tO(t){return t.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function Iv(t){let e=t.indexOf("!important");e!==-1&&(t=e>0?t.substring(0,e):"");let n=null,r=t,i=t.lastIndexOf(".");return i>0&&(n=t.slice(i+1),r=t.substring(0,i)),{property:r,suffix:n}}function xy(t,e=!1){return Zn(Object.keys(t).map(n=>({key:n,quoted:e,value:t[n]})))}var Ty=class{visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){let n=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${n.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,n){return this.formatPh(e.name)}formatPh(e){return`{${yu(e,!1)}}`}},nO=new Ty;function wT(t){return t.visit(nO)}var Ai=class{sourceSpan;i18n;constructor(e,n){this.sourceSpan=e,this.i18n=n}},yo=class extends Ai{value;tokens;constructor(e,n,r,i){super(n,i),this.value=e,this.tokens=r}visit(e,n){return e.visitText(this,n)}},Zs=class extends Ai{switchValue;type;cases;switchValueSourceSpan;constructor(e,n,r,i,s,o){super(i,o),this.switchValue=e,this.type=n,this.cases=r,this.switchValueSourceSpan=s}visit(e,n){return e.visitExpansion(this,n)}},yh=class{value;expression;sourceSpan;valueSourceSpan;expSourceSpan;constructor(e,n,r,i,s){this.value=e,this.expression=n,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=s}visit(e,n){return e.visitExpansionCase(this,n)}},Iy=class extends Ai{name;value;keySpan;valueSpan;valueTokens;constructor(e,n,r,i,s,o,a){super(r,a),this.name=e,this.value=n,this.keySpan=i,this.valueSpan=s,this.valueTokens=o}visit(e,n){return e.visitAttribute(this,n)}},zn=class extends Ai{name;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;isVoid;constructor(e,n,r,i,s,o,a,l=null,c,u){super(o,u),this.name=e,this.attrs=n,this.directives=r,this.children=i,this.isSelfClosing=s,this.startSourceSpan=a,this.endSourceSpan=l,this.isVoid=c}visit(e,n){return e.visitElement(this,n)}},lu=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e,n){return e.visitComment(this,n)}},Yn=class extends Ai{name;parameters;children;nameSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a=null,l){super(i,l),this.name=e,this.parameters=n,this.children=r,this.nameSpan=s,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,n){return e.visitBlock(this,n)}},hn=class extends Ai{componentName;tagName;fullName;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l,c,u=null,h){super(l,h),this.componentName=e,this.tagName=n,this.fullName=r,this.attrs=i,this.directives=s,this.children=o,this.isSelfClosing=a,this.startSourceSpan=c,this.endSourceSpan=u}visit(e,n){return e.visitComponent(this,n)}},Ay=class{name;attrs;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s=null){this.name=e,this.attrs=n,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=s}visit(e,n){return e.visitDirective(this,n)}},wh=class{expression;sourceSpan;constructor(e,n){this.expression=e,this.sourceSpan=n}visit(e,n){return e.visitBlockParameter(this,n)}},_h=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e,n){return e.visitLetDeclaration(this,n)}};function We(t,e,n=null){let r=[],i=t.visit?s=>t.visit(s,n)||s.visit(t,n):s=>s.visit(t,n);return e.forEach(s=>{let o=i(s);o&&r.push(o)}),r}var cu={AElig:"\xC6",AMP:"&",amp:"&",Aacute:"\xC1",Abreve:"\u0102",Acirc:"\xC2",Acy:"\u0410",Afr:"\u{1D504}",Agrave:"\xC0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2A53",Aogon:"\u0104",Aopf:"\u{1D538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xC5",angst:"\xC5",Ascr:"\u{1D49C}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xC3",Auml:"\xC4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2AE7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212C",Bscr:"\u212C",bernou:"\u212C",Beta:"\u0392",Bfr:"\u{1D505}",Bopf:"\u{1D539}",Breve:"\u02D8",breve:"\u02D8",Bumpeq:"\u224E",HumpDownHump:"\u224E",bump:"\u224E",CHcy:"\u0427",COPY:"\xA9",copy:"\xA9",Cacute:"\u0106",Cap:"\u22D2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212D",Cfr:"\u212D",Ccaron:"\u010C",Ccedil:"\xC7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010A",Cedilla:"\xB8",cedil:"\xB8",CenterDot:"\xB7",centerdot:"\xB7",middot:"\xB7",Chi:"\u03A7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201D",rdquo:"\u201D",rdquor:"\u201D",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2A74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222F",DoubleContourIntegral:"\u222F",ContourIntegral:"\u222E",conint:"\u222E",oint:"\u222E",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2A2F",Cscr:"\u{1D49E}",Cup:"\u22D3",CupCap:"\u224D",asympeq:"\u224D",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040F",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21A1",Dashv:"\u2AE4",DoubleLeftTee:"\u2AE4",Dcaron:"\u010E",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1D507}",DiacriticalAcute:"\xB4",acute:"\xB4",DiacriticalDot:"\u02D9",dot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",dblac:"\u02DD",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02DC",tilde:"\u02DC",Diamond:"\u22C4",diam:"\u22C4",diamond:"\u22C4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1D53B}",Dot:"\xA8",DoubleDot:"\xA8",die:"\xA8",uml:"\xA8",DotDot:"\u20DC",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21D3",Downarrow:"\u21D3",dArr:"\u21D3",DoubleLeftArrow:"\u21D0",Leftarrow:"\u21D0",lArr:"\u21D0",DoubleLeftRightArrow:"\u21D4",Leftrightarrow:"\u21D4",hArr:"\u21D4",iff:"\u21D4",DoubleLongLeftArrow:"\u27F8",Longleftarrow:"\u27F8",xlArr:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",Longleftrightarrow:"\u27FA",xhArr:"\u27FA",DoubleLongRightArrow:"\u27F9",Longrightarrow:"\u27F9",xrArr:"\u27F9",DoubleRightArrow:"\u21D2",Implies:"\u21D2",Rightarrow:"\u21D2",rArr:"\u21D2",DoubleRightTee:"\u22A8",vDash:"\u22A8",DoubleUpArrow:"\u21D1",Uparrow:"\u21D1",uArr:"\u21D1",DoubleUpDownArrow:"\u21D5",Updownarrow:"\u21D5",vArr:"\u21D5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",duarr:"\u21F5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",leftharpoondown:"\u21BD",lhard:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",rhard:"\u21C1",rightharpoondown:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",top:"\u22A4",DownTeeArrow:"\u21A7",mapstodown:"\u21A7",Dscr:"\u{1D49F}",Dstrok:"\u0110",ENG:"\u014A",ETH:"\xD0",Eacute:"\xC9",Ecaron:"\u011A",Ecirc:"\xCA",Ecy:"\u042D",Edot:"\u0116",Efr:"\u{1D508}",Egrave:"\xC8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25FB",EmptyVerySmallSquare:"\u25AB",Eogon:"\u0118",Eopf:"\u{1D53C}",Epsilon:"\u0395",Equal:"\u2A75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21CC",rightleftharpoons:"\u21CC",rlhar:"\u21CC",Escr:"\u2130",expectation:"\u2130",Esim:"\u2A73",Eta:"\u0397",Euml:"\xCB",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1D509}",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",blacksquare:"\u25AA",squarf:"\u25AA",squf:"\u25AA",Fopf:"\u{1D53D}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03DC",Gbreve:"\u011E",Gcedil:"\u0122",Gcirc:"\u011C",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1D50A}",Gg:"\u22D9",ggg:"\u22D9",Gopf:"\u{1D53E}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22DB",gel:"\u22DB",gtreqless:"\u22DB",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2A7E",geqslant:"\u2A7E",ges:"\u2A7E",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1D4A2}",Gt:"\u226B",NestedGreaterGreater:"\u226B",gg:"\u226B",HARDcy:"\u042A",Hacek:"\u02C7",caron:"\u02C7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210C",Poincareplane:"\u210C",HilbertSpace:"\u210B",Hscr:"\u210B",hamilt:"\u210B",Hopf:"\u210D",quaternions:"\u210D",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224F",bumpe:"\u224F",bumpeq:"\u224F",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xCD",Icirc:"\xCE",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xCC",Imacr:"\u012A",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222C",Integral:"\u222B",int:"\u222B",Intersection:"\u22C2",bigcap:"\u22C2",xcap:"\u22C2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012E",Iopf:"\u{1D540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xCF",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1D50D}",Jopf:"\u{1D541}",Jscr:"\u{1D4A5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040C",Kappa:"\u039A",Kcedil:"\u0136",Kcy:"\u041A",Kfr:"\u{1D50E}",Kopf:"\u{1D542}",Kscr:"\u{1D4A6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039B",Lang:"\u27EA",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219E",twoheadleftarrow:"\u219E",Lcaron:"\u013D",Lcedil:"\u013B",Lcy:"\u041B",LeftAngleBracket:"\u27E8",lang:"\u27E8",langle:"\u27E8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21E4",larrb:"\u21E4",LeftArrowRightArrow:"\u21C6",leftrightarrows:"\u21C6",lrarr:"\u21C6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27E6",lobrk:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",dharl:"\u21C3",downharpoonleft:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",lfloor:"\u230A",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294E",LeftTee:"\u22A3",dashv:"\u22A3",LeftTeeArrow:"\u21A4",mapstoleft:"\u21A4",LeftTeeVector:"\u295A",LeftTriangle:"\u22B2",vartriangleleft:"\u22B2",vltri:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",ltrie:"\u22B4",trianglelefteq:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",uharl:"\u21BF",upharpoonleft:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",leftharpoonup:"\u21BC",lharu:"\u21BC",LeftVectorBar:"\u2952",LessEqualGreater:"\u22DA",leg:"\u22DA",lesseqgtr:"\u22DA",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2AA1",LessSlantEqual:"\u2A7D",leqslant:"\u2A7D",les:"\u2A7D",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1D50F}",Ll:"\u22D8",Lleftarrow:"\u21DA",lAarr:"\u21DA",Lmidot:"\u013F",LongLeftArrow:"\u27F5",longleftarrow:"\u27F5",xlarr:"\u27F5",LongLeftRightArrow:"\u27F7",longleftrightarrow:"\u27F7",xharr:"\u27F7",LongRightArrow:"\u27F6",longrightarrow:"\u27F6",xrarr:"\u27F6",Lopf:"\u{1D543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21B0",lsh:"\u21B0",Lstrok:"\u0141",Lt:"\u226A",NestedLessLess:"\u226A",ll:"\u226A",Map:"\u2905",Mcy:"\u041C",MediumSpace:"\u205F",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1D510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1D544}",Mu:"\u039C",NJcy:"\u040A",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041D",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",ZeroWidthSpace:"\u200B",NewLine:`
`,Nfr:"\u{1D511}",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nbsp:"\xA0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2AEC",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226F",ngt:"\u226F",ngtr:"\u226F",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",nGtv:"\u226B\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224E\u0338",nbump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",nbumpe:"\u224F\u0338",NotLeftTriangle:"\u22EA",nltri:"\u22EA",ntriangleleft:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",nltrie:"\u22EC",ntrianglelefteq:"\u22EC",NotLess:"\u226E",nless:"\u226E",nlt:"\u226E",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226A\u0338",nLtv:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",npre:"\u2AAF\u0338",npreceq:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",nprcue:"\u22E0",NotReverseElement:"\u220C",notni:"\u220C",notniva:"\u220C",NotRightTriangle:"\u22EB",nrtri:"\u22EB",ntriangleright:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",nrtrie:"\u22ED",ntrianglerighteq:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",nsqsube:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",nsqsupe:"\u22E3",NotSubset:"\u2282\u20D2",nsubset:"\u2282\u20D2",vnsub:"\u2282\u20D2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",nsce:"\u2AB0\u0338",nsucceq:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",nsccue:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",nsupset:"\u2283\u20D2",vnsup:"\u2283\u20D2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1D4A9}",Ntilde:"\xD1",Nu:"\u039D",OElig:"\u0152",Oacute:"\xD3",Ocirc:"\xD4",Ocy:"\u041E",Odblac:"\u0150",Ofr:"\u{1D512}",Ograve:"\xD2",Omacr:"\u014C",Omega:"\u03A9",ohm:"\u03A9",Omicron:"\u039F",Oopf:"\u{1D546}",OpenCurlyDoubleQuote:"\u201C",ldquo:"\u201C",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2A54",Oscr:"\u{1D4AA}",Oslash:"\xD8",Otilde:"\xD5",Otimes:"\u2A37",Ouml:"\xD6",OverBar:"\u203E",oline:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",tbrk:"\u23B4",OverParenthesis:"\u23DC",PartialD:"\u2202",part:"\u2202",Pcy:"\u041F",Pfr:"\u{1D513}",Phi:"\u03A6",Pi:"\u03A0",PlusMinus:"\xB1",plusmn:"\xB1",pm:"\xB1",Popf:"\u2119",primes:"\u2119",Pr:"\u2ABB",Precedes:"\u227A",pr:"\u227A",prec:"\u227A",PrecedesEqual:"\u2AAF",pre:"\u2AAF",preceq:"\u2AAF",PrecedesSlantEqual:"\u227C",prcue:"\u227C",preccurlyeq:"\u227C",PrecedesTilde:"\u227E",precsim:"\u227E",prsim:"\u227E",Prime:"\u2033",Product:"\u220F",prod:"\u220F",Proportional:"\u221D",prop:"\u221D",propto:"\u221D",varpropto:"\u221D",vprop:"\u221D",Pscr:"\u{1D4AB}",Psi:"\u03A8",QUOT:'"',quot:'"',Qfr:"\u{1D514}",Qopf:"\u211A",rationals:"\u211A",Qscr:"\u{1D4AC}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xAE",circledR:"\xAE",reg:"\xAE",Racute:"\u0154",Rang:"\u27EB",Rarr:"\u21A0",twoheadrightarrow:"\u21A0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211C",Rfr:"\u211C",real:"\u211C",realpart:"\u211C",ReverseElement:"\u220B",SuchThat:"\u220B",ni:"\u220B",niv:"\u220B",ReverseEquilibrium:"\u21CB",leftrightharpoons:"\u21CB",lrhar:"\u21CB",ReverseUpEquilibrium:"\u296F",duhar:"\u296F",Rho:"\u03A1",RightAngleBracket:"\u27E9",rang:"\u27E9",rangle:"\u27E9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21E5",rarrb:"\u21E5",RightArrowLeftArrow:"\u21C4",rightleftarrows:"\u21C4",rlarr:"\u21C4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27E7",robrk:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",dharr:"\u21C2",downharpoonright:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rfloor:"\u230B",RightTee:"\u22A2",vdash:"\u22A2",RightTeeArrow:"\u21A6",map:"\u21A6",mapsto:"\u21A6",RightTeeVector:"\u295B",RightTriangle:"\u22B3",vartriangleright:"\u22B3",vrtri:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",rtrie:"\u22B5",trianglerighteq:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",uharr:"\u21BE",upharpoonright:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",rharu:"\u21C0",rightharpoonup:"\u21C0",RightVectorBar:"\u2953",Ropf:"\u211D",reals:"\u211D",RoundImplies:"\u2970",Rrightarrow:"\u21DB",rAarr:"\u21DB",Rscr:"\u211B",realine:"\u211B",Rsh:"\u21B1",rsh:"\u21B1",RuleDelayed:"\u29F4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042C",Sacute:"\u015A",Sc:"\u2ABC",Scaron:"\u0160",Scedil:"\u015E",Scirc:"\u015C",Scy:"\u0421",Sfr:"\u{1D516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03A3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1D54A}",Sqrt:"\u221A",radic:"\u221A",Square:"\u25A1",squ:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228F",sqsub:"\u228F",sqsubset:"\u228F",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1D4AE}",Star:"\u22C6",sstarf:"\u22C6",Sub:"\u22D0",Subset:"\u22D0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227B",sc:"\u227B",succ:"\u227B",SucceedsEqual:"\u2AB0",sce:"\u2AB0",succeq:"\u2AB0",SucceedsSlantEqual:"\u227D",sccue:"\u227D",succcurlyeq:"\u227D",SucceedsTilde:"\u227F",scsim:"\u227F",succsim:"\u227F",Sum:"\u2211",sum:"\u2211",Sup:"\u22D1",Supset:"\u22D1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xDE",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040B",TScy:"\u0426",Tab:"	",Tau:"\u03A4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1D517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223C",sim:"\u223C",thicksim:"\u223C",thksim:"\u223C",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1D54B}",TripleDot:"\u20DB",tdot:"\u20DB",Tscr:"\u{1D4AF}",Tstrok:"\u0166",Uacute:"\xDA",Uarr:"\u219F",Uarrocir:"\u2949",Ubrcy:"\u040E",Ubreve:"\u016C",Ucirc:"\xDB",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1D518}",Ugrave:"\xD9",Umacr:"\u016A",UnderBar:"_",lowbar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",bbrk:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",bigcup:"\u22C3",xcup:"\u22C3",UnionPlus:"\u228E",uplus:"\u228E",Uogon:"\u0172",Uopf:"\u{1D54C}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",udarr:"\u21C5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296E",udhar:"\u296E",UpTee:"\u22A5",bot:"\u22A5",bottom:"\u22A5",perp:"\u22A5",UpTeeArrow:"\u21A5",mapstoup:"\u21A5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",Uring:"\u016E",Uscr:"\u{1D4B0}",Utilde:"\u0168",Uuml:"\xDC",VDash:"\u22AB",Vbar:"\u2AEB",Vcy:"\u0412",Vdash:"\u22A9",Vdashl:"\u2AE6",Vee:"\u22C1",bigvee:"\u22C1",xvee:"\u22C1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200A",hairsp:"\u200A",Vfr:"\u{1D519}",Vopf:"\u{1D54D}",Vscr:"\u{1D4B1}",Vvdash:"\u22AA",Wcirc:"\u0174",Wedge:"\u22C0",bigwedge:"\u22C0",xwedge:"\u22C0",Wfr:"\u{1D51A}",Wopf:"\u{1D54E}",Wscr:"\u{1D4B2}",Xfr:"\u{1D51B}",Xi:"\u039E",Xopf:"\u{1D54F}",Xscr:"\u{1D4B3}",YAcy:"\u042F",YIcy:"\u0407",YUcy:"\u042E",Yacute:"\xDD",Ycirc:"\u0176",Ycy:"\u042B",Yfr:"\u{1D51C}",Yopf:"\u{1D550}",Yscr:"\u{1D4B4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017D",Zcy:"\u0417",Zdot:"\u017B",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1D4B5}",aacute:"\xE1",abreve:"\u0103",ac:"\u223E",mstpos:"\u223E",acE:"\u223E\u0333",acd:"\u223F",acirc:"\xE2",acy:"\u0430",aelig:"\xE6",afr:"\u{1D51E}",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03B1",amacr:"\u0101",amalg:"\u2A3F",and:"\u2227",wedge:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",angle:"\u2220",ange:"\u29A4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angzarr:"\u237C",aogon:"\u0105",aopf:"\u{1D552}",apE:"\u2A70",apacir:"\u2A6F",ape:"\u224A",approxeq:"\u224A",apid:"\u224B",apos:"'",aring:"\xE5",ascr:"\u{1D4B6}",ast:"*",midast:"*",atilde:"\xE3",auml:"\xE4",awint:"\u2A11",bNot:"\u2AED",backcong:"\u224C",bcong:"\u224C",backepsilon:"\u03F6",bepsi:"\u03F6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223D",bsim:"\u223D",backsimeq:"\u22CD",bsime:"\u22CD",barvee:"\u22BD",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23B6",bcy:"\u0431",bdquo:"\u201E",ldquor:"\u201E",bemptyv:"\u29B0",beta:"\u03B2",beth:"\u2136",between:"\u226C",twixt:"\u226C",bfr:"\u{1D51F}",bigcirc:"\u25EF",xcirc:"\u25EF",bigodot:"\u2A00",xodot:"\u2A00",bigoplus:"\u2A01",xoplus:"\u2A01",bigotimes:"\u2A02",xotime:"\u2A02",bigsqcup:"\u2A06",xsqcup:"\u2A06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25BD",xdtri:"\u25BD",bigtriangleup:"\u25B3",xutri:"\u25B3",biguplus:"\u2A04",xuplus:"\u2A04",bkarow:"\u290D",rbarr:"\u290D",blacklozenge:"\u29EB",lozf:"\u29EB",blacktriangle:"\u25B4",utrif:"\u25B4",blacktriangledown:"\u25BE",dtrif:"\u25BE",blacktriangleleft:"\u25C2",ltrif:"\u25C2",blacktriangleright:"\u25B8",rtrif:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bnot:"\u2310",bopf:"\u{1D553}",bowtie:"\u22C8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255D",boxUR:"\u255A",boxUl:"\u255C",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256C",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256B",boxVl:"\u2562",boxVr:"\u255F",boxbox:"\u29C9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250C",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252C",boxhu:"\u2534",boxminus:"\u229F",minusb:"\u229F",boxplus:"\u229E",plusb:"\u229E",boxtimes:"\u22A0",timesb:"\u22A0",boxuL:"\u255B",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256A",boxvL:"\u2561",boxvR:"\u255E",boxvh:"\u253C",boxvl:"\u2524",boxvr:"\u251C",brvbar:"\xA6",bscr:"\u{1D4B7}",bsemi:"\u204F",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2AAE",cacute:"\u0107",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",caps:"\u2229\uFE00",caret:"\u2041",ccaps:"\u2A4D",ccaron:"\u010D",ccedil:"\xE7",ccirc:"\u0109",ccups:"\u2A4C",ccupssm:"\u2A50",cdot:"\u010B",cemptyv:"\u29B2",cent:"\xA2",cfr:"\u{1D520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03C7",cir:"\u25CB",cirE:"\u29C3",circ:"\u02C6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21BA",olarr:"\u21BA",circlearrowright:"\u21BB",orarr:"\u21BB",circledS:"\u24C8",oS:"\u24C8",circledast:"\u229B",oast:"\u229B",circledcirc:"\u229A",ocir:"\u229A",circleddash:"\u229D",odash:"\u229D",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2A6D",copf:"\u{1D554}",copysr:"\u2117",crarr:"\u21B5",cross:"\u2717",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",curlyeqprec:"\u22DE",cuesc:"\u22DF",curlyeqsucc:"\u22DF",cularr:"\u21B6",curvearrowleft:"\u21B6",cularrp:"\u293D",cup:"\u222A",cupbrcap:"\u2A48",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curvearrowright:"\u21B7",curarrm:"\u293C",curlyvee:"\u22CE",cuvee:"\u22CE",curlywedge:"\u22CF",cuwed:"\u22CF",curren:"\xA4",cwint:"\u2231",cylcty:"\u232D",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290F",rBarr:"\u290F",dcaron:"\u010F",dcy:"\u0434",ddarr:"\u21CA",downdownarrows:"\u21CA",ddotseq:"\u2A77",eDDot:"\u2A77",deg:"\xB0",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",dfr:"\u{1D521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03DD",gammad:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",djcy:"\u0452",dlcorn:"\u231E",llcorner:"\u231E",dlcrop:"\u230D",dollar:"$",dopf:"\u{1D555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22A1",sdotb:"\u22A1",drcorn:"\u231F",lrcorner:"\u231F",drcrop:"\u230C",dscr:"\u{1D4B9}",dscy:"\u0455",dsol:"\u29F6",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",triangledown:"\u25BF",dwangle:"\u29A6",dzcy:"\u045F",dzigrarr:"\u27FF",eacute:"\xE9",easter:"\u2A6E",ecaron:"\u011B",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xEA",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044D",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1D522}",eg:"\u2A9A",egrave:"\xE8",egs:"\u2A96",eqslantgtr:"\u2A96",egsdot:"\u2A98",el:"\u2A99",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",eqslantless:"\u2A95",elsdot:"\u2A97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014B",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",epsilon:"\u03B5",epsiv:"\u03F5",straightepsilon:"\u03F5",varepsilon:"\u03F5",equals:"=",equest:"\u225F",questeq:"\u225F",equivDD:"\u2A78",eqvparsl:"\u29E5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212F",eta:"\u03B7",eth:"\xF0",euml:"\xEB",euro:"\u20AC",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",ffr:"\u{1D523}",filig:"\uFB01",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",fopf:"\u{1D557}",fork:"\u22D4",pitchfork:"\u22D4",forkv:"\u2AD9",fpartint:"\u2A0D",frac12:"\xBD",half:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1D4BB}",gEl:"\u2A8C",gtreqqless:"\u2A8C",gacute:"\u01F5",gamma:"\u03B3",gap:"\u2A86",gtrapprox:"\u2A86",gbreve:"\u011F",gcirc:"\u011D",gcy:"\u0433",gdot:"\u0121",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",gfr:"\u{1D524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2A92",gla:"\u2AA5",glj:"\u2AA4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gneq:"\u2A88",gnsim:"\u22E7",gopf:"\u{1D558}",gscr:"\u210A",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtrdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrarr:"\u2978",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",hardcy:"\u044A",harrcir:"\u2948",harrw:"\u21AD",leftrightsquigarrow:"\u21AD",hbar:"\u210F",hslash:"\u210F",planck:"\u210F",plankv:"\u210F",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",larrhk:"\u21A9",hookrightarrow:"\u21AA",rarrhk:"\u21AA",hopf:"\u{1D559}",horbar:"\u2015",hscr:"\u{1D4BD}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xED",icirc:"\xEE",icy:"\u0438",iecy:"\u0435",iexcl:"\xA1",ifr:"\u{1D526}",igrave:"\xEC",iiiint:"\u2A0C",qint:"\u2A0C",iiint:"\u222D",tint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012B",imath:"\u0131",inodot:"\u0131",imof:"\u22B7",imped:"\u01B5",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",intcal:"\u22BA",intercal:"\u22BA",intlarhk:"\u2A17",intprod:"\u2A3C",iprod:"\u2A3C",iocy:"\u0451",iogon:"\u012F",iopf:"\u{1D55A}",iota:"\u03B9",iquest:"\xBF",iscr:"\u{1D4BE}",isinE:"\u22F9",isindot:"\u22F5",isins:"\u22F4",isinsv:"\u22F3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xEF",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1D527}",jmath:"\u0237",jopf:"\u{1D55B}",jscr:"\u{1D4BF}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03BA",kappav:"\u03F0",varkappa:"\u03F0",kcedil:"\u0137",kcy:"\u043A",kfr:"\u{1D528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045C",kopf:"\u{1D55C}",kscr:"\u{1D4C0}",lAtail:"\u291B",lBarr:"\u290E",lEg:"\u2A8B",lesseqqgtr:"\u2A8B",lHar:"\u2962",lacute:"\u013A",laemptyv:"\u29B4",lambda:"\u03BB",langd:"\u2991",lap:"\u2A85",lessapprox:"\u2A85",laquo:"\xAB",larrbfs:"\u291F",larrfs:"\u291D",larrlp:"\u21AB",looparrowleft:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",leftarrowtail:"\u21A2",lat:"\u2AAB",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",lcaron:"\u013E",lcedil:"\u013C",lcy:"\u043B",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21C7",llarr:"\u21C7",leftthreetimes:"\u22CB",lthree:"\u22CB",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessdot:"\u22D6",ltdot:"\u22D6",lfisht:"\u297C",lfr:"\u{1D529}",lgE:"\u2A91",lharul:"\u296A",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296B",lltri:"\u25FA",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lneq:"\u2A87",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",longmapsto:"\u27FC",xmap:"\u27FC",looparrowright:"\u21AC",rarrlp:"\u21AC",lopar:"\u2985",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",loz:"\u25CA",lozenge:"\u25CA",lpar:"(",lparlt:"\u2993",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",lsime:"\u2A8D",lsimg:"\u2A8F",lsquor:"\u201A",sbquo:"\u201A",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltrPar:"\u2996",ltri:"\u25C3",triangleleft:"\u25C3",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",mDDot:"\u223A",macr:"\xAF",strns:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25AE",mcomma:"\u2A29",mcy:"\u043C",mdash:"\u2014",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midcir:"\u2AF0",minus:"\u2212",minusdu:"\u2A2A",mlcp:"\u2ADB",models:"\u22A7",mopf:"\u{1D55E}",mscr:"\u{1D4C2}",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nGg:"\u22D9\u0338",nGt:"\u226B\u20D2",nLeftarrow:"\u21CD",nlArr:"\u21CD",nLeftrightarrow:"\u21CE",nhArr:"\u21CE",nLl:"\u22D8\u0338",nLt:"\u226A\u20D2",nRightarrow:"\u21CF",nrArr:"\u21CF",nVDash:"\u22AF",nVdash:"\u22AE",nacute:"\u0144",nang:"\u2220\u20D2",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",natur:"\u266E",natural:"\u266E",ncap:"\u2A43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",ncy:"\u043D",ndash:"\u2013",neArr:"\u21D7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1D52B}",nharr:"\u21AE",nleftrightarrow:"\u21AE",nhpar:"\u2AF2",nis:"\u22FC",nisd:"\u22FA",njcy:"\u045A",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219A",nleftarrow:"\u219A",nldr:"\u2025",nopf:"\u{1D55F}",not:"\xAC",notinE:"\u22F9\u0338",notindot:"\u22F5\u0338",notinvb:"\u22F7",notinvc:"\u22F6",notnivb:"\u22FE",notnivc:"\u22FD",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",nrarr:"\u219B",nrightarrow:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nscr:"\u{1D4C3}",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsubseteqq:"\u2AC5\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupseteqq:"\u2AC6\u0338",ntilde:"\xF1",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22AD",nvHarr:"\u2904",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwArr:"\u21D6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xF3",ocirc:"\xF4",ocy:"\u043E",odblac:"\u0151",odiv:"\u2A38",odsold:"\u29BC",oelig:"\u0153",ofcir:"\u29BF",ofr:"\u{1D52C}",ogon:"\u02DB",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",olcir:"\u29BE",olcross:"\u29BB",olt:"\u29C0",omacr:"\u014D",omega:"\u03C9",omicron:"\u03BF",omid:"\u29B6",oopf:"\u{1D560}",opar:"\u29B7",operp:"\u29B9",or:"\u2228",vee:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oslash:"\xF8",osol:"\u2298",otilde:"\xF5",otimesas:"\u2A36",ouml:"\xF6",ovbar:"\u233D",para:"\xB6",parsim:"\u2AF3",parsl:"\u2AFD",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1D52D}",phi:"\u03C6",phiv:"\u03D5",straightphi:"\u03D5",varphi:"\u03D5",phone:"\u260E",pi:"\u03C0",piv:"\u03D6",varpi:"\u03D6",planckh:"\u210E",plus:"+",plusacir:"\u2A23",pluscir:"\u2A22",plusdu:"\u2A25",pluse:"\u2A72",plussim:"\u2A26",plustwo:"\u2A27",pointint:"\u2A15",popf:"\u{1D561}",pound:"\xA3",prE:"\u2AB3",prap:"\u2AB7",precapprox:"\u2AB7",precnapprox:"\u2AB9",prnap:"\u2AB9",precneqq:"\u2AB5",prnE:"\u2AB5",precnsim:"\u22E8",prnsim:"\u22E8",prime:"\u2032",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prurel:"\u22B0",pscr:"\u{1D4C5}",psi:"\u03C8",puncsp:"\u2008",qfr:"\u{1D52E}",qopf:"\u{1D562}",qprime:"\u2057",qscr:"\u{1D4C6}",quatint:"\u2A16",quest:"?",rAtail:"\u291C",rHar:"\u2964",race:"\u223D\u0331",racute:"\u0155",raemptyv:"\u29B3",rangd:"\u2992",range:"\u29A5",raquo:"\xBB",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21A3",rightarrowtail:"\u21A3",rarrw:"\u219D",rightsquigarrow:"\u219D",ratail:"\u291A",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21B3",rect:"\u25AD",rfisht:"\u297D",rfr:"\u{1D52F}",rharul:"\u296C",rho:"\u03C1",rhov:"\u03F1",varrho:"\u03F1",rightrightarrows:"\u21C9",rrarr:"\u21C9",rightthreetimes:"\u22CC",rthree:"\u22CC",ring:"\u02DA",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",ropar:"\u2986",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rsaquo:"\u203A",rscr:"\u{1D4C7}",rtimes:"\u22CA",rtri:"\u25B9",triangleright:"\u25B9",rtriltri:"\u29CE",ruluhar:"\u2968",rx:"\u211E",sacute:"\u015B",scE:"\u2AB4",scap:"\u2AB8",succapprox:"\u2AB8",scaron:"\u0161",scedil:"\u015F",scirc:"\u015D",scnE:"\u2AB6",succneqq:"\u2AB6",scnap:"\u2ABA",succnapprox:"\u2ABA",scnsim:"\u22E9",succnsim:"\u22E9",scpolint:"\u2A13",scy:"\u0441",sdot:"\u22C5",sdote:"\u2A66",seArr:"\u21D8",sect:"\xA7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1D530}",sharp:"\u266F",shchcy:"\u0449",shcy:"\u0448",shy:"\xAD",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",varsigma:"\u03C2",simdot:"\u2A6A",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",smashp:"\u2A33",smeparsl:"\u29E4",smile:"\u2323",ssmile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\uFE00",sqcups:"\u2294\uFE00",sscr:"\u{1D4C8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2AC5",subseteqq:"\u2AC5",subdot:"\u2ABD",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subsetneqq:"\u2ACB",subne:"\u228A",subsetneq:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supE:"\u2AC6",supseteqq:"\u2AC6",supdot:"\u2ABE",supdsub:"\u2AD8",supedot:"\u2AC4",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supsetneqq:"\u2ACC",supne:"\u228B",supsetneq:"\u228B",supplus:"\u2AC0",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swArr:"\u21D9",swnwar:"\u292A",szlig:"\xDF",target:"\u2316",tau:"\u03C4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1D531}",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",vartheta:"\u03D1",thorn:"\xFE",times:"\xD7",timesbar:"\u2A31",timesd:"\u2A30",topbot:"\u2336",topcir:"\u2AF1",topf:"\u{1D565}",topfork:"\u2ADA",tprime:"\u2034",triangle:"\u25B5",utri:"\u25B5",triangleq:"\u225C",trie:"\u225C",tridot:"\u25EC",triminus:"\u2A3A",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",tscr:"\u{1D4C9}",tscy:"\u0446",tshcy:"\u045B",tstrok:"\u0167",uHar:"\u2963",uacute:"\xFA",ubrcy:"\u045E",ubreve:"\u016D",ucirc:"\xFB",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297E",ufr:"\u{1D532}",ugrave:"\xF9",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",umacr:"\u016B",uogon:"\u0173",uopf:"\u{1D566}",upsi:"\u03C5",upsilon:"\u03C5",upuparrows:"\u21C8",uuarr:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",uring:"\u016F",urtri:"\u25F9",uscr:"\u{1D4CA}",utdot:"\u22F0",utilde:"\u0169",uuml:"\xFC",uwangle:"\u29A7",vBar:"\u2AE8",vBarv:"\u2AE9",vangrt:"\u299C",varsubsetneq:"\u228A\uFE00",vsubne:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",vsubnE:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",vsupne:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vsupnE:"\u2ACC\uFE00",vcy:"\u0432",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",vfr:"\u{1D533}",vopf:"\u{1D567}",vscr:"\u{1D4CB}",vzigzag:"\u299A",wcirc:"\u0175",wedbar:"\u2A5F",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1D534}",wopf:"\u{1D568}",wscr:"\u{1D4CC}",xfr:"\u{1D535}",xi:"\u03BE",xnis:"\u22FB",xopf:"\u{1D569}",xscr:"\u{1D4CD}",yacute:"\xFD",yacy:"\u044F",ycirc:"\u0177",ycy:"\u044B",yen:"\xA5",yfr:"\u{1D536}",yicy:"\u0457",yopf:"\u{1D56A}",yscr:"\u{1D4CE}",yucy:"\u044E",yuml:"\xFF",zacute:"\u017A",zcaron:"\u017E",zcy:"\u0437",zdot:"\u017C",zeta:"\u03B6",zfr:"\u{1D537}",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},_T="\uE500";cu.ngsp=_T;var Dy=class{tokens;errors;nonNormalizedIcuExpressions;constructor(e,n,r){this.tokens=e,this.errors=n,this.nonNormalizedIcuExpressions=r}};function rO(t,e,n,r={}){let i=new My(new sh(t,e),n,r);return i.tokenize(),new Dy(hO(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}var iO=/\r\n?/g;function ma(t){return`Unexpected character "${t===Tt?"EOF":String.fromCharCode(t)}"`}function xb(t){return`Unknown entity "${t}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function sO(t,e){return`Unable to parse entity "${e}" - ${t} character reference entities must end with ";"`}var ky=(function(t){return t.HEX="hexadecimal",t.DEC="decimal",t})(ky||{}),oO=["@if","@else","@for","@switch","@case","@default","@empty","@defer","@placeholder","@loading","@error"],ic={start:"{{",end:"}}"},My=class{_getTagDefinition;_cursor;_tokenizeIcu;_leadingTriviaCodePoints;_currentTokenStart=null;_currentTokenType=null;_expansionCaseStack=[];_openDirectiveCount=0;_inInterpolation=!1;_preserveLineEndings;_i18nNormalizeLineEndingsInICUs;_tokenizeBlocks;_tokenizeLet;_selectorlessEnabled;tokens=[];errors=[];nonNormalizedIcuExpressions=[];constructor(e,n,r){this._getTagDefinition=n,this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map(s=>s.codePointAt(0)||0);let i=r.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new Ny(e,i):new Eh(e,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=r.tokenizeBlocks??!0,this._tokenizeLet=r.tokenizeLet??!0,this._selectorlessEnabled=r.selectorlessEnabled??!1;try{this._cursor.init()}catch(s){this.handleError(s)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(iO,`
`)}tokenize(){for(;this._cursor.peek()!==Tt;){let e=this._cursor.clone();try{this._attemptCharCode(Ia)?this._attemptCharCode(cy)?this._attemptCharCode(Xr)?this._consumeCdata(e):this._attemptCharCode(rh)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(Jn)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeLet&&this._cursor.peek()===fa&&!this._inInterpolation&&this._isLetStart()?this._consumeLetDeclaration(e):this._tokenizeBlocks&&this._isBlockStart()?this._consumeBlockStart(e):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(Zt)?this._consumeBlockEnd(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(n){this.handleError(n)}}this._beginToken(41),this._endToken([])}_getBlockName(){let e=!1,n=this._cursor.clone();return this._attemptCharCodeUntilFn(r=>Qc(r)?!e:fO(r)?(e=!0,!1):!0),this._cursor.getChars(n).trim()}_consumeBlockStart(e){this._requireCharCode(fa),this._beginToken(24,e);let n=this._endToken([this._getBlockName()]);if(this._cursor.peek()===Nn)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(Ke),this._attemptCharCode(Mt))this._attemptCharCodeUntilFn(Ke);else{n.type=28;return}this._attemptCharCode(gr)?(this._beginToken(25),this._endToken([])):this._isBlockStart()&&(n.parts[0]==="case"||n.parts[0]==="default")?(this._beginToken(25),this._endToken([]),this._beginToken(26),this._endToken([])):n.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(Ib);this._cursor.peek()!==Mt&&this._cursor.peek()!==Tt;){this._beginToken(27);let e=this._cursor.clone(),n=null,r=0;for(;this._cursor.peek()!==Dn&&this._cursor.peek()!==Tt||n!==null;){let i=this._cursor.peek();if(i===Xs)this._cursor.advance();else if(i===n)n=null;else if(n===null&&mc(i))n=i;else if(i===Nn&&n===null)r++;else if(i===Mt&&n===null){if(r===0)break;r>0&&r--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(Ib)}}_consumeLetDeclaration(e){if(this._requireStr("@let"),this._beginToken(29,e),Qc(this._cursor.peek()))this._attemptCharCodeUntilFn(Ke);else{let i=this._endToken([this._cursor.getChars(e)]);i.type=32;return}let n=this._endToken([this._getLetDeclarationName()]);if(this._attemptCharCodeUntilFn(Ke),!this._attemptCharCode(Ht)){n.type=32;return}this._attemptCharCodeUntilFn(i=>Ke(i)&&!ih(i)),this._consumeLetDeclarationValue(),this._cursor.peek()===Dn?(this._beginToken(31),this._endToken([]),this._cursor.advance()):(n.type=32,n.sourceSpan=this._cursor.getSpan(e))}_getLetDeclarationName(){let e=this._cursor.clone(),n=!1;return this._attemptCharCodeUntilFn(r=>os(r)||r===$h||r===fs||n&&mr(r)?(n=!0,!1):!0),this._cursor.getChars(e).trim()}_consumeLetDeclarationValue(){let e=this._cursor.clone();for(this._beginToken(30,e);this._cursor.peek()!==Tt;){let n=this._cursor.peek();if(n===Dn)break;mc(n)&&(this._cursor.advance(),this._attemptCharCodeUntilFn(r=>r===Xs?(this._cursor.advance(),!1):r===n)),this._cursor.advance()}this._endToken([this._cursor.getChars(e)])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(uO(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===Zt){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,n=this._cursor.clone()){this._currentTokenStart=n,this._currentTokenType=e}_endToken(e,n){if(this._currentTokenStart===null)throw new X(this._cursor.getSpan(n),"Programming error - attempted to end a token when there was no start to the token");if(this._currentTokenType===null)throw new X(this._cursor.getSpan(this._currentTokenStart),"Programming error - attempted to end a token which has no token type");let r={type:this._currentTokenType,parts:e,sourceSpan:(n??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(r),this._currentTokenStart=null,this._currentTokenType=null,r}_createError(e,n){this._isInExpansionForm()&&(e+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let r=new X(n,e);return this._currentTokenStart=null,this._currentTokenType=null,r}handleError(e){if(e instanceof uu&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),e instanceof X)this.errors.push(e);else throw e}_attemptCharCode(e){return this._cursor.peek()===e?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(e){return dO(this._cursor.peek(),e)?(this._cursor.advance(),!0):!1}_requireCharCode(e){let n=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(ma(this._cursor.peek()),this._cursor.getSpan(n))}_attemptStr(e){let n=e.length;if(this._cursor.charsLeft()<n)return!1;let r=this._cursor.clone();for(let i=0;i<n;i++)if(!this._attemptCharCode(e.charCodeAt(i)))return this._cursor=r,!1;return!0}_attemptStrCaseInsensitive(e){for(let n=0;n<e.length;n++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(n)))return!1;return!0}_requireStr(e){let n=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(ma(this._cursor.peek()),this._cursor.getSpan(n))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,n){let r=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(r)<n)throw this._createError(ma(this._cursor.peek()),this._cursor.getSpan(r))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){let e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_peekStr(e){let n=e.length;if(this._cursor.charsLeft()<n)return!1;let r=this._cursor.clone();for(let i=0;i<n;i++){if(r.peek()!==e.charCodeAt(i))return!1;r.advance()}return!0}_isBlockStart(){return this._cursor.peek()===fa&&oO.some(e=>this._peekStr(e))}_isLetStart(){return this._cursor.peek()===fa&&this._peekStr("@let")}_consumeEntity(e){this._beginToken(9);let n=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(Gx)){let r=this._attemptCharCode(Qx)||this._attemptCharCode(CR),i=this._cursor.clone();if(this._attemptCharCodeUntilFn(lO),this._cursor.peek()!=Dn){this._cursor.advance();let o=r?ky.HEX:ky.DEC;throw this._createError(sO(o,this._cursor.getChars(n)),this._cursor.getSpan())}let s=this._cursor.getChars(i);this._cursor.advance();try{let o=parseInt(s,r?16:10);this._endToken([String.fromCodePoint(o),this._cursor.getChars(n)])}catch{throw this._createError(xb(this._cursor.getChars(n)),this._cursor.getSpan())}}else{let r=this._cursor.clone();if(this._attemptCharCodeUntilFn(cO),this._cursor.peek()!=Dn)this._beginToken(e,n),this._cursor=r,this._endToken(["&"]);else{let i=this._cursor.getChars(r);this._cursor.advance();let s=cu.hasOwnProperty(i)&&cu[i];if(!s)throw this._createError(xb(i),this._cursor.getSpan(n));this._endToken([s,`&${i};`])}}}_consumeRawText(e,n){this._beginToken(e?6:7);let r=[];for(;;){let i=this._cursor.clone(),s=n();if(this._cursor=i,s)break;e&&this._cursor.peek()===nh?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(6),this._beginToken(6)):r.push(this._readChar())}this._endToken([this._processCarriageReturns(r.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(rh),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);let n=this._cursor.clone();this._attemptUntilChar(Wn);let r=this._cursor.getChars(n);this._cursor.advance(),this._endToken([r])}_consumePrefixAndName(e){let n=this._cursor.clone(),r="";for(;this._cursor.peek()!==Yr&&!aO(this._cursor.peek());)this._cursor.advance();let i;this._cursor.peek()===Yr?(r=this._cursor.getChars(n),this._cursor.advance(),i=this._cursor.clone()):i=n,this._requireCharCodeUntilFn(e,r===""?0:1);let s=this._cursor.getChars(i);return[r,s]}_consumeTagOpen(e){let n,r,i,s;try{if(this._selectorlessEnabled&&uf(this._cursor.peek()))s=this._consumeComponentOpenStart(e),[i,r,n]=s.parts,r&&(i+=`:${r}`),n&&(i+=`:${n}`),this._attemptCharCodeUntilFn(Ke);else{if(!os(this._cursor.peek()))throw this._createError(ma(this._cursor.peek()),this._cursor.getSpan(e));s=this._consumeTagOpenStart(e),r=s.parts[0],n=i=s.parts[1],this._attemptCharCodeUntilFn(Ke)}for(;!Db(this._cursor.peek());)if(this._selectorlessEnabled&&this._cursor.peek()===fa){let a=this._cursor.clone(),l=a.clone();l.advance(),uf(l.peek())&&this._consumeDirective(a,l)}else this._consumeAttribute();s.type===33?this._consumeComponentOpenEnd():this._consumeTagOpenEnd()}catch(a){if(a instanceof X){s?s.type=s.type===33?37:4:(this._beginToken(5,e),this._endToken(["<"]));return}throw a}let o=this._getTagDefinition(n).getContentType(r);o===Jr.RAW_TEXT?this._consumeRawTextWithTagClose(s,i,!1):o===Jr.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(s,i,!0)}_consumeRawTextWithTagClose(e,n,r){this._consumeRawText(r,()=>!this._attemptCharCode(Ia)||!this._attemptCharCode(Jn)||(this._attemptCharCodeUntilFn(Ke),!this._attemptStrCaseInsensitive(n))?!1:(this._attemptCharCodeUntilFn(Ke),this._attemptCharCode(Wn))),this._beginToken(e.type===33?36:3),this._requireCharCodeUntilFn(i=>i===Wn,3),this._cursor.advance(),this._endToken(e.parts)}_consumeTagOpenStart(e){this._beginToken(0,e);let n=this._consumePrefixAndName(Vs);return this._endToken(n)}_consumeComponentOpenStart(e){this._beginToken(33,e);let n=this._consumeComponentName();return this._endToken(n)}_consumeComponentName(){let e=this._cursor.clone();for(;Ab(this._cursor.peek());)this._cursor.advance();let n=this._cursor.getChars(e),r="",i="";return this._cursor.peek()===Yr&&(this._cursor.advance(),[r,i]=this._consumePrefixAndName(Vs)),[n,r,i]}_consumeAttribute(){this._consumeAttributeName(),this._attemptCharCodeUntilFn(Ke),this._attemptCharCode(Ht)&&(this._attemptCharCodeUntilFn(Ke),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(Ke)}_consumeAttributeName(){let e=this._cursor.peek();if(e===Kc||e===Yc)throw this._createError(ma(e),this._cursor.getSpan());this._beginToken(14);let n;if(this._openDirectiveCount>0){let i=0;n=s=>{if(this._openDirectiveCount>0){if(s===Nn)i++;else if(s===Mt){if(i===0)return!0;i--}}return Vs(s)}}else if(e===Xr){let i=0;n=s=>(s===Xr?i++:s===Si&&i--,i<=0?Vs(s):ih(s))}else n=Vs;let r=this._consumePrefixAndName(n);this._endToken(r)}_consumeAttributeValue(){if(this._cursor.peek()===Kc||this._cursor.peek()===Yc){let e=this._cursor.peek();this._consumeQuote(e);let n=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,n,n),this._consumeQuote(e)}else{let e=()=>Vs(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){let e=this._attemptCharCode(Jn)?2:1;this._beginToken(e),this._requireCharCode(Wn),this._endToken([])}_consumeComponentOpenEnd(){let e=this._attemptCharCode(Jn)?35:34;this._beginToken(e),this._requireCharCode(Wn),this._endToken([])}_consumeTagClose(e){if(this._selectorlessEnabled){let r=e.clone();for(;r.peek()!==Wn&&!uf(r.peek());)r.advance();if(uf(r.peek())){this._beginToken(36,e);let i=this._consumeComponentName();this._attemptCharCodeUntilFn(Ke),this._requireCharCode(Wn),this._endToken(i);return}}this._beginToken(3,e),this._attemptCharCodeUntilFn(Ke);let n=this._consumePrefixAndName(Vs);this._attemptCharCodeUntilFn(Ke),this._requireCharCode(Wn),this._endToken(n)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(gr),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);let e=this._readUntil(gn),n=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([n]);else{let i=this._endToken([e]);n!==e&&this.nonNormalizedIcuExpressions.push(i)}this._requireCharCode(gn),this._attemptCharCodeUntilFn(Ke),this._beginToken(7);let r=this._readUntil(gn);this._endToken([r]),this._requireCharCode(gn),this._attemptCharCodeUntilFn(Ke)}_consumeExpansionCaseStart(){this._beginToken(20);let e=this._readUntil(gr).trim();this._endToken([e]),this._attemptCharCodeUntilFn(Ke),this._beginToken(21),this._requireCharCode(gr),this._endToken([]),this._attemptCharCodeUntilFn(Ke),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(Zt),this._endToken([]),this._attemptCharCodeUntilFn(Ke),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(Zt),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,n,r,i){this._beginToken(e);let s=[];for(;!r();){let o=this._cursor.clone();this._attemptStr(ic.start)?(this._endToken([this._processCarriageReturns(s.join(""))],o),s.length=0,this._consumeInterpolation(n,o,i),this._beginToken(e)):this._cursor.peek()===nh?(this._endToken([this._processCarriageReturns(s.join(""))]),s.length=0,this._consumeEntity(e),this._beginToken(e)):s.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(s.join(""))])}_consumeInterpolation(e,n,r){let i=[];this._beginToken(e,n),i.push(ic.start);let s=this._cursor.clone(),o=null,a=!1;for(;this._cursor.peek()!==Tt&&(r===null||!r());){let l=this._cursor.clone();if(this._isTagStart()){this._cursor=l,i.push(this._getProcessedChars(s,l)),this._endToken(i);return}if(o===null)if(this._attemptStr(ic.end)){i.push(this._getProcessedChars(s,l)),i.push(ic.end),this._endToken(i);return}else this._attemptStr("//")&&(a=!0);let c=this._cursor.peek();this._cursor.advance(),c===Xs?this._cursor.advance():c===o?o=null:!a&&o===null&&mc(c)&&(o=c)}i.push(this._getProcessedChars(s,this._cursor)),this._endToken(i)}_consumeDirective(e,n){for(this._requireCharCode(fa),this._cursor.advance();Ab(this._cursor.peek());)this._cursor.advance();this._beginToken(38,e);let r=this._cursor.getChars(n);if(this._endToken([r]),this._attemptCharCodeUntilFn(Ke),this._cursor.peek()===Nn){for(this._openDirectiveCount++,this._beginToken(39),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Ke);!Db(this._cursor.peek())&&this._cursor.peek()!==Mt;)this._consumeAttribute();if(this._attemptCharCodeUntilFn(Ke),this._openDirectiveCount--,this._cursor.peek()!==Mt){if(this._cursor.peek()===Wn||this._cursor.peek()===Jn)return;throw this._createError(ma(this._cursor.peek()),this._cursor.getSpan(e))}this._beginToken(40),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Ke)}}_getProcessedChars(e,n){return this._processCarriageReturns(n.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===Tt||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===Zt&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._isLetStart()||this._cursor.peek()===Zt))}_isTagStart(){if(this._cursor.peek()===Ia){let e=this._cursor.clone();e.advance();let n=e.peek();if(ho<=n&&n<=wu||ds<=n&&n<=Ja||n===Jn||n===cy)return!0}return!1}_readUntil(e){let n=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(n)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===21}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===19}isExpansionFormStart(){if(this._cursor.peek()!==gr)return!1;let e=this._cursor.clone(),n=this._attemptStr(ic.start);return this._cursor=e,!n}};function Ke(t){return!Qc(t)||t===Tt}function Vs(t){return Qc(t)||t===Wn||t===Ia||t===Jn||t===Kc||t===Yc||t===Ht||t===Tt}function aO(t){return(t<ho||wu<t)&&(t<ds||Ja<t)&&(t<x0||t>jx)}function lO(t){return t===Dn||t===Tt||!TR(t)}function cO(t){return t===Dn||t===Tt||!os(t)}function uO(t){return t!==Zt}function dO(t,e){return Tb(t)===Tb(e)}function Tb(t){return t>=ho&&t<=wu?t-ho+ds:t}function fO(t){return os(t)||mr(t)||t===fs}function Ib(t){return t!==Dn&&Ke(t)}function uf(t){return t===fs||t>=ds&&t<=Ja}function Ab(t){return os(t)||mr(t)||t===fs}function Db(t){return t===Jn||t===Wn||t===Ia||t===Tt}function hO(t){let e=[],n;for(let r=0;r<t.length;r++){let i=t[r];n&&n.type===5&&i.type===5||n&&n.type===16&&i.type===16?(n.parts[0]+=i.parts[0],n.sourceSpan.end=i.sourceSpan.end):(n=i,e.push(n))}return e}var Eh=class t{state;file;input;end;constructor(e,n){if(e instanceof t){this.file=e.file,this.input=e.input,this.end=e.end;let r=e.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!n)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=n.endPos,this.state={peek:-1,offset:n.startPos,line:n.startLine,column:n.startCol}}}clone(){return new t(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,n){e=e||this;let r=e;if(n)for(;this.diff(e)>0&&n.indexOf(e.peek())!==-1;)r===e&&(e=e.clone()),e.advance();let i=this.locationFromCursor(e),s=this.locationFromCursor(this),o=r!==e?this.locationFromCursor(r):i;return new ee(i,s,o)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new uu('Unexpected character "EOF"',this);let n=this.charAt(e.offset);n===Qs?(e.line++,e.column=0):ih(n)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?Tt:this.charAt(e.offset)}locationFromCursor(e){return new Xc(e.file,e.state.offset,e.state.line,e.state.column)}},Ny=class t extends Eh{internalState;constructor(e,n){e instanceof t?(super(e),this.internalState=D({},e.internalState)):(super(e,n),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new t(this)}getChars(e){let n=e.clone(),r="";for(;n.internalState.offset<this.internalState.offset;)r+=String.fromCodePoint(n.peek()),n.advance();return r}processEscapeSequence(){let e=()=>this.internalState.peek;if(e()===Xs)if(this.internalState=D({},this.state),this.advanceState(this.internalState),e()===Wx)this.state.peek=Qs;else if(e()===zx)this.state.peek=b0;else if(e()===Kx)this.state.peek=Ux;else if(e()===Jx)this.state.peek=S0;else if(e()===bR)this.state.peek=vR;else if(e()===T0)this.state.peek=$x;else if(e()===Yx)if(this.advanceState(this.internalState),e()===gr){this.advanceState(this.internalState);let n=this.clone(),r=0;for(;e()!==Zt;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(n,r)}else{let n=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(n,4)}else if(e()===Qx){this.advanceState(this.internalState);let n=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(n,2)}else if(ib(e())){let n="",r=0,i=this.clone();for(;ib(e())&&r<3;)i=this.clone(),n+=String.fromCodePoint(e()),this.advanceState(this.internalState),r++;this.state.peek=parseInt(n,8),this.internalState=i.internalState}else ih(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,n){let r=this.input.slice(e.internalState.offset,e.internalState.offset+n),i=parseInt(r,16);if(isNaN(i))throw e.state=e.internalState,new uu("Invalid hexadecimal escape sequence",e);return i}},uu=class extends Error{msg;cursor;constructor(e,n){super(e),this.msg=e,this.cursor=n,Object.setPrototypeOf(this,new.target.prototype)}},ut=class t extends X{elementName;static create(e,n,r){return new t(e,n,r)}constructor(e,n,r){super(n,r),this.elementName=e}},Ch=class{rootNodes;errors;constructor(e,n){this.rootNodes=e,this.errors=n}},pO=class{getTagDefinition;constructor(e){this.getTagDefinition=e}parse(e,n,r){let i=rO(e,n,this.getTagDefinition,r),s=new Ry(i.tokens,this.getTagDefinition);return s.build(),new Ch(s.rootNodes,[...i.errors,...s.errors])}},Ry=class t{tokens;tagDefinitionResolver;_index=-1;_peek;_containerStack=[];rootNodes=[];errors=[];constructor(e,n){this.tokens=e,this.tagDefinitionResolver=n,this._advance()}build(){for(;this._peek.type!==41;)this._peek.type===0||this._peek.type===4?this._consumeElementStartTag(this._advance()):this._peek.type===3?this._consumeElementEndTag(this._advance()):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===19?this._consumeExpansion(this._advance()):this._peek.type===24?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===26?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===28?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeLet(this._advance())):this._peek.type===32?(this._closeVoidElement(),this._consumeIncompleteLet(this._advance())):this._peek.type===33||this._peek.type===37?this._consumeComponentStartTag(this._advance()):this._peek.type===36?this._consumeComponentEndTag(this._advance()):this._advance();for(let e of this._containerStack)e instanceof Yn&&this.errors.push(ut.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){let e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){let n=this._advanceIf(7),r=this._advanceIf(11),i=n!=null?n.parts[0].trim():null,s=r==null?e.sourceSpan:new ee(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new lu(i,s))}_consumeExpansion(e){let n=this._advance(),r=this._advance(),i=[];for(;this._peek.type===20;){let o=this._parseExpansionCase();if(!o)return;i.push(o)}if(this._peek.type!==23){this.errors.push(ut.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let s=new ee(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Zs(n.parts[0],r.parts[0],i,s,n.sourceSpan)),this._advance()}_parseExpansionCase(){let e=this._advance();if(this._peek.type!==21)return this.errors.push(ut.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let n=this._advance(),r=this._collectExpansionExpTokens(n);if(!r)return null;let i=this._advance();r.push({type:41,parts:[],sourceSpan:i.sourceSpan});let s=new t(r,this.tagDefinitionResolver);if(s.build(),s.errors.length>0)return this.errors=this.errors.concat(s.errors),null;let o=new ee(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart),a=new ee(n.sourceSpan.start,i.sourceSpan.end,n.sourceSpan.fullStart);return new yh(e.parts[0],s.rootNodes,o,e.sourceSpan,a)}_collectExpansionExpTokens(e){let n=[],r=[21];for(;;){if((this._peek.type===19||this._peek.type===21)&&r.push(this._peek.type),this._peek.type===22)if(kb(r,21)){if(r.pop(),r.length===0)return n}else return this.errors.push(ut.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===23)if(kb(r,19))r.pop();else return this.errors.push(ut.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===41)return this.errors.push(ut.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.push(this._advance())}}_consumeText(e){let n=[e],r=e.sourceSpan,i=e.parts[0];if(i.length>0&&i[0]===`
`){let s=this._getContainer();s!=null&&s.children.length===0&&this._getTagDefinition(s)?.ignoreFirstLf&&(i=i.substring(1),n[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[i]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)e=this._advance(),n.push(e),e.type===8?i+=e.parts.join("").replace(/&([^;]+);/g,Mb):e.type===9?i+=e.parts[0]:i+=e.parts.join("");if(i.length>0){let s=e.sourceSpan;this._addToParent(new yo(i,new ee(r.start,s.end,r.fullStart,r.details),n))}}_closeVoidElement(){let e=this._getContainer();e!==null&&this._getTagDefinition(e)?.isVoid&&this._containerStack.pop()}_consumeElementStartTag(e){let n=[],r=[];this._consumeAttributesAndDirectives(n,r);let i=this._getElementFullName(e,this._getClosestElementLikeParent()),s=this._getTagDefinition(i),o=!1;this._peek.type===2?(this._advance(),o=!0,s?.canSelfClose||Zv(i)!==null||s?.isVoid||this.errors.push(ut.create(i,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))):this._peek.type===1&&(this._advance(),o=!1);let a=this._peek.sourceSpan.fullStart,l=new ee(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new ee(e.sourceSpan.start,a,e.sourceSpan.fullStart),u=new zn(i,n,r,[],o,l,c,void 0,s?.isVoid??!1),h=this._getContainer(),p=h!==null&&!!this._getTagDefinition(h)?.isClosedByChild(u.name);this._pushContainer(u,p),o?this._popContainer(i,zn,l):e.type===4&&(this._popContainer(i,zn,null),this.errors.push(ut.create(i,l,`Opening tag "${i}" not terminated.`)))}_consumeComponentStartTag(e){let n=e.parts[0],r=[],i=[];this._consumeAttributesAndDirectives(r,i);let s=this._getClosestElementLikeParent(),o=this._getComponentTagName(e,s),a=this._getComponentFullName(e,s),l=this._peek.type===35;this._advance();let c=this._peek.sourceSpan.fullStart,u=new ee(e.sourceSpan.start,c,e.sourceSpan.fullStart),h=new ee(e.sourceSpan.start,c,e.sourceSpan.fullStart),p=new hn(n,o,a,r,i,[],l,u,h,void 0),m=this._getContainer(),g=m!==null&&p.tagName!==null&&!!this._getTagDefinition(m)?.isClosedByChild(p.tagName);this._pushContainer(p,g),l?this._popContainer(a,hn,u):e.type===37&&(this._popContainer(a,hn,null),this.errors.push(ut.create(a,u,`Opening tag "${a}" not terminated.`)))}_consumeAttributesAndDirectives(e,n){for(;this._peek.type===14||this._peek.type===38;)this._peek.type===38?n.push(this._consumeDirective(this._peek)):e.push(this._consumeAttr(this._advance()))}_consumeComponentEndTag(e){let n=this._getComponentFullName(e,this._getClosestElementLikeParent());if(!this._popContainer(n,hn,e.sourceSpan)){let r=this._containerStack[this._containerStack.length-1],i;r instanceof hn&&r.componentName===e.parts[0]?i=`, did you mean "${r.fullName}"?`:i=". It may happen when the tag has already been closed by another tag.";let s=`Unexpected closing tag "${n}"${i}`;this.errors.push(ut.create(n,e.sourceSpan,s))}}_getTagDefinition(e){return typeof e=="string"?this.tagDefinitionResolver(e):e instanceof zn?this.tagDefinitionResolver(e.name):e instanceof hn&&e.tagName!==null?this.tagDefinitionResolver(e.tagName):null}_pushContainer(e,n){n&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeElementEndTag(e){let n=this._getElementFullName(e,this._getClosestElementLikeParent());if(this._getTagDefinition(n)?.isVoid)this.errors.push(ut.create(n,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popContainer(n,zn,e.sourceSpan)){let r=`Unexpected closing tag "${n}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(ut.create(n,e.sourceSpan,r))}}_popContainer(e,n,r){let i=!1;for(let s=this._containerStack.length-1;s>=0;s--){let o=this._containerStack[s];if(((o instanceof hn?o.fullName:o.name)===e||e===null)&&o instanceof n)return o.endSourceSpan=r,o.sourceSpan.end=r!==null?r.end:o.sourceSpan.end,this._containerStack.splice(s,this._containerStack.length-s),!i;(o instanceof Yn||!this._getTagDefinition(o)?.closedByParent)&&(i=!0)}return!1}_consumeAttr(e){let n=Sf(e.parts[0],e.parts[1]),r=e.sourceSpan.end;this._peek.type===15&&this._advance();let i="",s=[],o,a;if(this._peek.type===16)for(o=this._peek.sourceSpan,a=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let u=this._advance();s.push(u),u.type===17?i+=u.parts.join("").replace(/&([^;]+);/g,Mb):u.type===9?i+=u.parts[0]:i+=u.parts.join(""),a=r=u.sourceSpan.end}this._peek.type===15&&(r=this._advance().sourceSpan.end);let c=o&&a&&new ee(o.start,a,o.fullStart);return new Iy(n,i,new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),e.sourceSpan,c,s.length>0?s:void 0,void 0)}_consumeDirective(e){let n=[],r=e.sourceSpan.end,i=null;if(this._advance(),this._peek.type===39){for(r=this._peek.sourceSpan.end,this._advance();this._peek.type===14;)n.push(this._consumeAttr(this._advance()));this._peek.type===40?(i=this._peek.sourceSpan,this._advance()):this.errors.push(ut.create(null,e.sourceSpan,"Unterminated directive definition"))}let s=new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new ee(s.start,i===null?e.sourceSpan.end:i.end,s.fullStart);return new Ay(e.parts[0],n,o,s,i)}_consumeBlockOpen(e){let n=[];for(;this._peek.type===27;){let a=this._advance();n.push(new wh(a.parts[0],a.sourceSpan))}this._peek.type===25&&this._advance();let r=this._peek.sourceSpan.fullStart,i=new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new Yn(e.parts[0],n,[],i,e.sourceSpan,s);this._pushContainer(o,!1)}_consumeBlockClose(e){this._popContainer(null,Yn,e.sourceSpan)||this.errors.push(ut.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){let n=[];for(;this._peek.type===27;){let a=this._advance();n.push(new wh(a.parts[0],a.sourceSpan))}let r=this._peek.sourceSpan.fullStart,i=new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new ee(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new Yn(e.parts[0],n,[],i,e.sourceSpan,s);this._pushContainer(o,!1),this._popContainer(null,Yn,null),this.errors.push(ut.create(e.parts[0],i,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_consumeLet(e){let n=e.parts[0],r,i;if(this._peek.type!==30){this.errors.push(ut.create(e.parts[0],e.sourceSpan,`Invalid @let declaration "${n}". Declaration must have a value.`));return}else r=this._advance();if(this._peek.type!==31){this.errors.push(ut.create(e.parts[0],e.sourceSpan,`Unterminated @let declaration "${n}". Declaration must be terminated with a semicolon.`));return}else i=this._advance();let s=i.sourceSpan.fullStart,o=new ee(e.sourceSpan.start,s,e.sourceSpan.fullStart),a=e.sourceSpan.toString().lastIndexOf(n),l=e.sourceSpan.start.moveBy(a),c=new ee(l,e.sourceSpan.end),u=new _h(n,r.parts[0],o,c,r.sourceSpan);this._addToParent(u)}_consumeIncompleteLet(e){let n=e.parts[0]??"",r=n?` "${n}"`:"";if(n.length>0){let i=e.sourceSpan.toString().lastIndexOf(n),s=e.sourceSpan.start.moveBy(i),o=new ee(s,e.sourceSpan.end),a=new ee(e.sourceSpan.start,e.sourceSpan.start.moveBy(0)),l=new _h(n,"",e.sourceSpan,o,a);this._addToParent(l)}this.errors.push(ut.create(e.parts[0],e.sourceSpan,`Incomplete @let declaration${r}. @let declarations must be written as \`@let <name> = <value>;\``))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestElementLikeParent(){for(let e=this._containerStack.length-1;e>-1;e--){let n=this._containerStack[e];if(n instanceof zn||n instanceof hn)return n}return null}_addToParent(e){let n=this._getContainer();n===null?this.rootNodes.push(e):n.children.push(e)}_getElementFullName(e,n){let r=this._getPrefix(e,n);return Sf(r,e.parts[1])}_getComponentFullName(e,n){let r=e.parts[0],i=this._getComponentTagName(e,n);return i===null?r:i.startsWith(":")?r+i:`${r}:${i}`}_getComponentTagName(e,n){let r=this._getPrefix(e,n),i=e.parts[2];return!r&&!i?null:!r&&i?i:Sf(r,i||"ng-component")}_getPrefix(e,n){let r,i;if(e.type===33||e.type===37||e.type===36?(r=e.parts[1],i=e.parts[2]):(r=e.parts[0],i=e.parts[1]),r=r||this._getTagDefinition(i)?.implicitNamespacePrefix||"",!r&&n){let s=n instanceof zn?n.name:n.tagName;if(s!==null){let o=Er(s)[1],a=this._getTagDefinition(o);a!==null&&!a.preventNamespaceInheritance&&(r=Zv(s))}}return r}};function kb(t,e){return t.length>0&&t[t.length-1]===e}function Mb(t,e){return cu[e]!==void 0?cu[e]||t:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):t}var ET="ngPreserveWhitespaces",Nb=new Set(["pre","template","textarea","script","style"]),CT=` \f
\r	\v\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,mO=new RegExp(`[^${CT}]`),gO=new RegExp(`[${CT}]{2,}`,"g");function Rb(t){return t.some(e=>e.name===ET)}function ST(t){return t.replace(new RegExp(_T,"g")," ")}var Sh=class{preserveSignificantWhitespace;originalNodeMap;requireContext;icuExpansionDepth=0;constructor(e,n,r=!0){this.preserveSignificantWhitespace=e,this.originalNodeMap=n,this.requireContext=r}visitElement(e,n){if(Nb.has(e.name)||Rb(e.attrs)){let i=new zn(e.name,jr(this,e.attrs),jr(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new zn(e.name,e.attrs,e.directives,jr(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(r,e),r}visitAttribute(e,n){return e.name!==ET?e:null}visitText(e,n){let r=e.value.match(mO),i=n&&(n.prev instanceof Zs||n.next instanceof Zs);if(this.icuExpansionDepth>0&&this.preserveSignificantWhitespace)return e;if(r||i){let o=e.tokens.map(u=>u.type===5?_O(u):u);if(!this.preserveSignificantWhitespace&&o.length>0){let u=o[0];o.splice(0,1,vO(u,n));let h=o[o.length-1];o.splice(o.length-1,1,yO(h,n))}let a=xT(e.value),l=this.preserveSignificantWhitespace?a:wO(a,n),c=new yo(l,e.sourceSpan,o,e.i18n);return this.originalNodeMap?.set(c,e),c}return null}visitComment(e,n){return e}visitExpansion(e,n){this.icuExpansionDepth++;let r;try{r=new Zs(e.switchValue,e.type,jr(this,e.cases),e.sourceSpan,e.switchValueSourceSpan,e.i18n)}finally{this.icuExpansionDepth--}return this.originalNodeMap?.set(r,e),r}visitExpansionCase(e,n){let r=new yh(e.value,jr(this,e.expression),e.sourceSpan,e.valueSourceSpan,e.expSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlock(e,n){let r=new Yn(e.name,e.parameters,jr(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlockParameter(e,n){return e}visitLetDeclaration(e,n){return e}visitComponent(e,n){if(e.tagName&&Nb.has(e.tagName)||Rb(e.attrs)){let i=new hn(e.componentName,e.tagName,e.fullName,jr(this,e.attrs),jr(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new hn(e.componentName,e.tagName,e.fullName,e.attrs,e.directives,jr(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(r,e),r}visitDirective(e,n){return e}visit(e,n){if(this.requireContext&&!n)throw new Error("WhitespaceVisitor requires context. Visit via `visitAllWithSiblings` to get this context.");return!1}};function vO(t,e){return t.type!==5||!!e?.prev?t:bT(t,r=>r.trimStart())}function yO(t,e){return t.type!==5||!!e?.next?t:bT(t,r=>r.trimEnd())}function wO(t,e){let n=!e?.prev,r=!e?.next,i=n?t.trimStart():t;return r?i.trimEnd():i}function _O({type:t,parts:e,sourceSpan:n}){return{type:t,parts:[xT(e[0])],sourceSpan:n}}function bT({type:t,parts:e,sourceSpan:n},r){return{type:t,parts:[r(e[0])],sourceSpan:n}}function xT(t){return ST(t).replace(gO," ")}function jr(t,e){let n=[];return e.forEach((r,i)=>{let s={prev:e[i-1],next:e[i+1]},o=r.visit(t,s);o&&n.push(o)}),n}var Z=(function(t){return t[t.Character=0]="Character",t[t.Identifier=1]="Identifier",t[t.PrivateIdentifier=2]="PrivateIdentifier",t[t.Keyword=3]="Keyword",t[t.String=4]="String",t[t.Operator=5]="Operator",t[t.Number=6]="Number",t[t.RegExpBody=7]="RegExpBody",t[t.RegExpFlags=8]="RegExpFlags",t[t.Error=9]="Error",t})(Z||{}),eo=(function(t){return t[t.Plain=0]="Plain",t[t.TemplateLiteralPart=1]="TemplateLiteralPart",t[t.TemplateLiteralEnd=2]="TemplateLiteralEnd",t})(eo||{}),EO=["var","let","as","null","undefined","true","false","if","else","this","typeof","void","in"],du=class{tokenize(e){return new Py(e).scan()}},Vn=class{index;end;type;numValue;strValue;constructor(e,n,r,i,s){this.index=e,this.end=n,this.type=r,this.numValue=i,this.strValue=s}isCharacter(e){return this.type===Z.Character&&this.numValue===e}isNumber(){return this.type===Z.Number}isString(){return this.type===Z.String}isOperator(e){return this.type===Z.Operator&&this.strValue===e}isIdentifier(){return this.type===Z.Identifier}isPrivateIdentifier(){return this.type===Z.PrivateIdentifier}isKeyword(){return this.type===Z.Keyword}isKeywordLet(){return this.type===Z.Keyword&&this.strValue==="let"}isKeywordAs(){return this.type===Z.Keyword&&this.strValue==="as"}isKeywordNull(){return this.type===Z.Keyword&&this.strValue==="null"}isKeywordUndefined(){return this.type===Z.Keyword&&this.strValue==="undefined"}isKeywordTrue(){return this.type===Z.Keyword&&this.strValue==="true"}isKeywordFalse(){return this.type===Z.Keyword&&this.strValue==="false"}isKeywordThis(){return this.type===Z.Keyword&&this.strValue==="this"}isKeywordTypeof(){return this.type===Z.Keyword&&this.strValue==="typeof"}isKeywordVoid(){return this.type===Z.Keyword&&this.strValue==="void"}isKeywordIn(){return this.type===Z.Keyword&&this.strValue==="in"}isError(){return this.type===Z.Error}isRegExpBody(){return this.type===Z.RegExpBody}isRegExpFlags(){return this.type===Z.RegExpFlags}toNumber(){return this.type===Z.Number?this.numValue:-1}isTemplateLiteralPart(){return this.isString()&&this.kind===eo.TemplateLiteralPart}isTemplateLiteralEnd(){return this.isString()&&this.kind===eo.TemplateLiteralEnd}isTemplateLiteralInterpolationStart(){return this.isOperator("${")}toString(){switch(this.type){case Z.Character:case Z.Identifier:case Z.Keyword:case Z.Operator:case Z.PrivateIdentifier:case Z.String:case Z.Error:case Z.RegExpBody:case Z.RegExpFlags:return this.strValue;case Z.Number:return this.numValue.toString();default:return null}}},gc=class extends Vn{kind;constructor(e,n,r,i){super(e,n,Z.String,0,r),this.kind=i}};function sc(t,e,n){return new Vn(t,e,Z.Character,n,String.fromCharCode(n))}function CO(t,e,n){return new Vn(t,e,Z.Identifier,0,n)}function SO(t,e,n){return new Vn(t,e,Z.PrivateIdentifier,0,n)}function bO(t,e,n){return new Vn(t,e,Z.Keyword,0,n)}function ga(t,e,n){return new Vn(t,e,Z.Operator,0,n)}function xO(t,e,n){return new Vn(t,e,Z.Number,n,"")}function TO(t,e,n){return new Vn(t,e,Z.Error,0,n)}function IO(t,e,n){return new Vn(t,e,Z.RegExpBody,0,n)}function AO(t,e,n){return new Vn(t,e,Z.RegExpFlags,0,n)}var df=new Vn(-1,-1,Z.Character,0,""),Py=class{input;tokens=[];length;peek=0;index=-1;braceStack=[];constructor(e){this.input=e,this.length=e.length,this.advance()}scan(){let e=this.scanToken();for(;e!==null;)this.tokens.push(e),e=this.scanToken();return this.tokens}advance(){this.peek=++this.index>=this.length?Tt:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,n=this.length,r=this.peek,i=this.index;for(;r<=Hx;)if(++i>=n){r=Tt;break}else r=e.charCodeAt(i);if(this.peek=r,this.index=i,i>=n)return null;if(Pb(r))return this.scanIdentifier();if(mr(r))return this.scanNumber(i);let s=i;switch(r){case Bs:return this.advance(),mr(this.peek)?this.scanNumber(s):this.peek!==Bs?sc(s,this.index,Bs):(this.advance(),this.peek===Bs?(this.advance(),ga(s,this.index,"...")):this.error(`Unexpected character [${String.fromCharCode(r)}]`,0));case Nn:case Mt:case Xr:case Si:case gn:case Yr:case Dn:return this.scanCharacter(s,r);case gr:return this.scanOpenBrace(s,r);case Zt:return this.scanCloseBrace(s,r);case Kc:case Yc:return this.scanString();case uy:return this.advance(),this.scanTemplateLiteralPart(s);case Gx:return this.scanPrivateIdentifier();case qx:return this.scanComplexOperator(s,"+",Ht,"=");case rh:return this.scanComplexOperator(s,"-",Ht,"=");case Jn:return this.isStartOfRegex()?this.scanRegex(i):this.scanComplexOperator(s,"/",Ht,"=");case yR:return this.scanComplexOperator(s,"%",Ht,"=");case SR:return this.scanOperator(s,"^");case tb:return this.scanStar(s);case nb:return this.scanQuestion(s);case Ia:case Wn:return this.scanComplexOperator(s,String.fromCharCode(r),Ht,"=");case cy:case Ht:return this.scanComplexOperator(s,String.fromCharCode(r),Ht,"=",Ht,"=");case nh:return this.scanComplexOperator(s,"&",nh,"&",Ht,"=");case rb:return this.scanComplexOperator(s,"|",rb,"|",Ht,"=");case Xx:for(;Qc(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(r)}]`,0)}scanCharacter(e,n){return this.advance(),sc(e,this.index,n)}scanOperator(e,n){return this.advance(),ga(e,this.index,n)}scanOpenBrace(e,n){return this.braceStack.push("expression"),this.advance(),sc(e,this.index,n)}scanCloseBrace(e,n){return this.advance(),this.braceStack.pop()==="interpolation"?(this.tokens.push(sc(e,this.index,Zt)),this.scanTemplateLiteralPart(this.index)):sc(e,this.index,n)}scanComplexOperator(e,n,r,i,s,o){this.advance();let a=n;return this.peek==r&&(this.advance(),a+=i),s!=null&&this.peek==s&&(this.advance(),a+=o),ga(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();Lb(this.peek);)this.advance();let n=this.input.substring(e,this.index);return EO.indexOf(n)>-1?bO(e,this.index,n):CO(e,this.index,n)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!Pb(this.peek))return this.error("Invalid character [#]",-1);for(;Lb(this.peek);)this.advance();let n=this.input.substring(e,this.index);return SO(e,this.index,n)}scanNumber(e){let n=this.index===e,r=!1;for(this.advance();;){if(!mr(this.peek))if(this.peek===fs){if(!mr(this.input.charCodeAt(this.index-1))||!mr(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);r=!0}else if(this.peek===Bs)n=!1;else if(DO(this.peek)){if(this.advance(),kO(this.peek)&&this.advance(),!mr(this.peek))return this.error("Invalid exponent",-1);n=!1}else break;this.advance()}let i=this.input.substring(e,this.index);r&&(i=i.replace(/_/g,""));let s=n?NO(i):parseFloat(i);return xO(e,this.index,s)}scanString(){let e=this.index,n=this.peek;this.advance();let r="",i=this.index,s=this.input;for(;this.peek!=n;)if(this.peek==Xs){let a=this.scanStringBackslash(r,i);if(typeof a!="string")return a;r=a,i=this.index}else{if(this.peek==Tt)return this.error("Unterminated quote",0);this.advance()}let o=s.substring(i,this.index);return this.advance(),new gc(e,this.index,r+o,eo.Plain)}scanQuestion(e){this.advance();let n="?";return this.peek===nb?(n+="?",this.advance(),this.peek===Ht&&(n+="=",this.advance())):this.peek===Bs&&(n+=".",this.advance()),ga(e,this.index,n)}scanTemplateLiteralPart(e){let n="",r=this.index;for(;this.peek!==uy;)if(this.peek===Xs){let s=this.scanStringBackslash(n,r);if(typeof s!="string")return s;n=s,r=this.index}else if(this.peek===$h){let s=this.index;if(this.advance(),this.peek===gr)return this.braceStack.push("interpolation"),this.tokens.push(new gc(e,s,n+this.input.substring(r,s),eo.TemplateLiteralPart)),this.advance(),ga(s,this.index,this.input.substring(s,this.index))}else{if(this.peek===Tt)return this.error("Unterminated template literal",0);this.advance()}let i=this.input.substring(r,this.index);return this.advance(),new gc(e,this.index,n+i,eo.TemplateLiteralEnd)}error(e,n){let r=this.index+n;return TO(r,this.index,`Lexer Error: ${e} at column ${r} in expression [${this.input}]`)}scanStringBackslash(e,n){e+=this.input.substring(n,this.index);let r;if(this.advance(),this.peek===Yx){let i=this.input.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(i))r=parseInt(i,16);else return this.error(`Invalid unicode escape [\\u${i}]`,0);for(let s=0;s<5;s++)this.advance()}else r=MO(this.peek),this.advance();return e+=String.fromCharCode(r),e}scanStar(e){this.advance();let n="*";return this.peek===tb?(n+="*",this.advance(),this.peek===Ht&&(n+="=",this.advance())):this.peek===Ht&&(n+="=",this.advance()),ga(e,this.index,n)}isStartOfRegex(){if(this.tokens.length===0)return!0;let e=this.tokens[this.tokens.length-1];if(e.isOperator("!")){let n=this.tokens.length>1?this.tokens[this.tokens.length-2]:null;return n===null||n.type!==Z.Identifier&&!n.isCharacter(Mt)&&!n.isCharacter(Si)}return e.type===Z.Operator||e.isCharacter(Nn)||e.isCharacter(Xr)||e.isCharacter(gn)||e.isCharacter(Yr)}scanRegex(e){this.advance();let n=this.index,r=!1,i=!1;for(;;){let l=this.peek;if(l===Tt)return this.error("Unterminated regular expression",0);if(r)r=!1;else if(l===Xs)r=!0;else if(l===Xr)i=!0;else if(l===Si)i=!1;else if(l===Jn&&!i)break;this.advance()}let s=this.input.substring(n,this.index);this.advance();let o=IO(e,this.index,s),a=this.scanRegexFlags(this.index);return a!==null?(this.tokens.push(o),a):o}scanRegexFlags(e){if(!os(this.peek))return null;for(;os(this.peek);)this.advance();return AO(e,this.index,this.input.substring(e,this.index))}};function Pb(t){return ho<=t&&t<=wu||ds<=t&&t<=Ja||t==fs||t==$h}function Lb(t){return os(t)||mr(t)||t==fs||t==$h}function DO(t){return t==xR||t==_R}function kO(t){return t==rh||t==qx}function MO(t){switch(t){case Wx:return Qs;case T0:return $x;case zx:return b0;case Jx:return S0;case Kx:return Ux;default:return t}}function NO(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Ly=class{strings;expressions;offsets;constructor(e,n,r){this.strings=e,this.expressions=n,this.offsets=r}},Oy=class{templateBindings;warnings;errors;constructor(e,n,r){this.templateBindings=e,this.warnings=n,this.errors=r}};function Yi(t){return t.start.toString()||"(unknown)"}var bh=class{_lexer;_supportsDirectPipeReferences;constructor(e,n=!1){this._lexer=e,this._supportsDirectPipeReferences=n}parseAction(e,n,r){let i=[];this._checkNoInterpolation(i,e,n);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s),a=new qs(e,n,r,o,1,i,0,this._supportsDirectPipeReferences).parseChain();return new mn(a,e,Yi(n),r,i)}parseBinding(e,n,r){let i=[],s=this._parseBindingAst(e,n,r,i);return new mn(s,e,Yi(n),r,i)}checkSimpleExpression(e){let n=new Fy;return e.visit(n),n.errors}parseSimpleBinding(e,n,r){let i=[],s=this._parseBindingAst(e,n,r,i),o=this.checkSimpleExpression(s);return o.length>0&&i.push(ba(`Host binding expression cannot contain ${o.join(" ")}`,e,"",n)),new mn(s,e,Yi(n),r,i)}_parseBindingAst(e,n,r,i){this._checkNoInterpolation(i,e,n);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s);return new qs(e,n,r,o,0,i,0,this._supportsDirectPipeReferences).parseChain()}parseTemplateBindings(e,n,r,i,s){let o=this._lexer.tokenize(n),a=[];return new qs(n,r,s,o,0,a,0,this._supportsDirectPipeReferences).parseTemplateBindings({source:e,span:new Mn(i,i+e.length)})}parseInterpolation(e,n,r,i){let s=[],{strings:o,expressions:a,offsets:l}=this.splitInterpolation(e,n,s,i);if(a.length===0)return null;let c=[];for(let u=0;u<a.length;++u){let h=i?.[u*2+1]?.sourceSpan,p=a[u].text,{stripped:m,hasComments:g}=this._stripComments(p),y=this._lexer.tokenize(m);if(g&&m.trim().length===0&&y.length===0){s.push(ba("Interpolation expression cannot only contain a comment",e,`at column ${a[u].start} in`,n));continue}let _=new qs(h?p:e,h||n,r,y,0,s,l[u],this._supportsDirectPipeReferences).parseChain();c.push(_)}return this.createInterpolationAst(o.map(u=>u.text),c,e,Yi(n),r,s)}parseInterpolationExpression(e,n,r){let{stripped:i}=this._stripComments(e),s=this._lexer.tokenize(i),o=[],a=new qs(e,n,r,s,0,o,0,this._supportsDirectPipeReferences).parseChain(),l=["",""];return this.createInterpolationAst(l,[a],e,Yi(n),r,o)}createInterpolationAst(e,n,r,i,s,o){let a=new lo(0,r.length),l=new vu(a,a.toAbsolute(s),e,n);return new mn(l,r,i,s,o)}splitInterpolation(e,n,r,i){let s=[],o=[],a=[],l=i?RO(i):null,c=0,u=!1,h=!1,p="{{",m="}}";for(;c<e.length;)if(u){let g=c,y=g+p.length,_=this._getInterpolationEndIndex(e,m,y);if(_===-1){u=!1,h=!0;break}let w=_+m.length,A=e.substring(y,_);A.trim().length===0&&r.push(ba("Blank expressions are not allowed in interpolated strings",e,`at column ${c} in`,n)),o.push({text:A,start:g,end:w});let T=(l?.get(g)??g)+p.length;a.push(T),c=w,u=!1}else{let g=c;c=e.indexOf(p,c),c===-1&&(c=e.length);let y=e.substring(g,c);s.push({text:y,start:g,end:c}),u=!0}if(!u)if(h){let g=s[s.length-1];g.text+=e.substring(c),g.end=e.length}else s.push({text:e.substring(c),start:c,end:e.length});return new Ly(s,o,a)}wrapLiteralPrimitive(e,n,r){let i=new lo(0,e==null?0:e.length);return new mn(new pn(i,i.toAbsolute(r),e),e,typeof n=="string"?n:Yi(n),r,[])}_stripComments(e){let n=this._commentStart(e);return n!=null?{stripped:e.substring(0,n),hasComments:!0}:{stripped:e,hasComments:!1}}_commentStart(e){let n=null;for(let r=0;r<e.length-1;r++){let i=e.charCodeAt(r),s=e.charCodeAt(r+1);if(i===Jn&&s==Jn&&n==null)return r;n===i?n=null:n==null&&mc(i)&&(n=i)}return null}_checkNoInterpolation(e,n,r){let i=-1,s=-1;for(let o of this._forEachUnquotedChar(n,0))if(i===-1)n.startsWith("{{")&&(i=o);else if(s=this._getInterpolationEndIndex(n,"}}",o),s>-1)break;i>-1&&s>-1&&e.push(ba("Got interpolation ({{}}) where expression was expected",n,`at column ${i} in`,r))}_getInterpolationEndIndex(e,n,r){for(let i of this._forEachUnquotedChar(e,r)){if(e.startsWith(n,i))return i;if(e.startsWith("//",i))return e.indexOf(n,i)}return-1}*_forEachUnquotedChar(e,n){let r=null,i=0;for(let s=n;s<e.length;s++){let o=e[s];mc(e.charCodeAt(s))&&(r===null||r===o)&&i%2===0?r=r===null?o:null:r===null&&(yield s),i=o==="\\"?i+1:0}}},dc=(function(t){return t[t.None=0]="None",t[t.Writable=1]="Writable",t})(dc||{}),Ob=new Set(["d","g","i","m","s","u","v","y"]),qs=class{input;parseSourceSpan;absoluteOffset;tokens;parseFlags;errors;offset;supportsDirectPipeReferences;rparensExpected=0;rbracketsExpected=0;rbracesExpected=0;context=dc.None;sourceSpanCache=new Map;index=0;constructor(e,n,r,i,s,o,a,l){this.input=e,this.parseSourceSpan=n,this.absoluteOffset=r,this.tokens=i,this.parseFlags=s,this.errors=o,this.offset=a,this.supportsDirectPipeReferences=l}peek(e){let n=this.index+e;return n<this.tokens.length?this.tokens[n]:df}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,n){let r=this.currentEndIndex;if(n!==void 0&&n>this.currentEndIndex&&(r=n),e>r){let i=r;r=e,e=i}return new lo(e,r)}sourceSpan(e,n){let r=`${e}@${this.inputIndex}:${n}`;return this.sourceSpanCache.has(r)||this.sourceSpanCache.set(r,this.span(e,n).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(r)}advance(){this.index++}withContext(e,n){this.context|=e;let r=n();return this.context^=e,r}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}isAssignmentOperator(e){return e.type===Z.Operator&&Xt.isAssignmentOperation(e.strValue)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===df?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],n=this.inputIndex;for(;this.index<this.tokens.length;){let r=this.parsePipe();if(e.push(r),this.consumeOptionalCharacter(Dn))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(Dn););else if(this.index<this.tokens.length){let i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(e.length===0){let r=this.offset,i=this.offset+this.input.length;return new Qt(this.span(r,i),this.sourceSpan(r,i))}return e.length==1?e[0]:new Ra(this.span(n),this.sourceSpan(n),e)}parsePipe(){let e=this.inputIndex,n=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let r=this.inputIndex,i=this.expectIdentifierOrKeyword(),s,o;i!==null?s=this.sourceSpan(r):(i="",o=this.next.index!==-1?this.next.index:this.input.length+this.offset,s=new lo(o,o).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter(Yr);)a.push(this.parseExpression());let l;if(this.supportsDirectPipeReferences){let c=i.charCodeAt(0);l=c===fs||c>=ds&&c<=Ja?Cf.ReferencedDirectly:Cf.ReferencedByName}else l=Cf.ReferencedByName;n=new Hf(this.span(e),this.sourceSpan(e,o),n,i,a,l,s)}while(this.consumeOptionalOperator("|"))}return n}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,n=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let r=this.parsePipe(),i;if(this.consumeOptionalCharacter(Yr))i=this.parsePipe();else{let s=this.inputIndex,o=this.input.substring(e,s);this.error(`Conditional expression ${o} requires all 3 expressions`),i=new Qt(this.span(e),this.sourceSpan(e))}return new $f(this.span(e),this.sourceSpan(e),n,r,i)}else return n}parseLogicalOr(){let e=this.inputIndex,n=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let r=this.parseLogicalAnd();n=new Xt(this.span(e),this.sourceSpan(e),"||",n,r)}return n}parseLogicalAnd(){let e=this.inputIndex,n=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let r=this.parseNullishCoalescing();n=new Xt(this.span(e),this.sourceSpan(e),"&&",n,r)}return n}parseNullishCoalescing(){let e=this.inputIndex,n=this.parseEquality();for(;this.consumeOptionalOperator("??");){let r=this.parseEquality();n=new Xt(this.span(e),this.sourceSpan(e),"??",n,r)}return n}parseEquality(){let e=this.inputIndex,n=this.parseRelational();for(;this.next.type==Z.Operator;){let r=this.next.strValue;switch(r){case"==":case"===":case"!=":case"!==":this.advance();let i=this.parseRelational();n=new Xt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseRelational(){let e=this.inputIndex,n=this.parseAdditive();for(;this.next.type==Z.Operator||this.next.isKeywordIn;){let r=this.next.strValue;switch(r){case"<":case">":case"<=":case">=":case"in":this.advance();let i=this.parseAdditive();n=new Xt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseAdditive(){let e=this.inputIndex,n=this.parseMultiplicative();for(;this.next.type==Z.Operator;){let r=this.next.strValue;switch(r){case"+":case"-":this.advance();let i=this.parseMultiplicative();n=new Xt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseMultiplicative(){let e=this.inputIndex,n=this.parseExponentiation();for(;this.next.type==Z.Operator;){let r=this.next.strValue;switch(r){case"*":case"%":case"/":this.advance();let i=this.parseExponentiation();n=new Xt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseExponentiation(){let e=this.inputIndex,n=this.parsePrefix();for(;this.next.type==Z.Operator&&this.next.strValue==="**";){(n instanceof Ta||n instanceof Mc||n instanceof Nc||n instanceof Rc)&&this.error("Unary operator used immediately before exponentiation expression. Parenthesis must be used to disambiguate operator precedence"),this.advance();let r=this.parseExponentiation();n=new Xt(this.span(e),this.sourceSpan(e),"**",n,r)}return n}parsePrefix(){if(this.next.type==Z.Operator){let e=this.inputIndex,n=this.next.strValue,r;switch(n){case"+":return this.advance(),r=this.parsePrefix(),Ta.createPlus(this.span(e),this.sourceSpan(e),r);case"-":return this.advance(),r=this.parsePrefix(),Ta.createMinus(this.span(e),this.sourceSpan(e),r);case"!":return this.advance(),r=this.parsePrefix(),new Mc(this.span(e),this.sourceSpan(e),r)}}else if(this.next.isKeywordTypeof()){let e=this.inputIndex;this.advance();let n=this.parsePrefix();return new Nc(this.span(e),this.sourceSpan(e),n)}else if(this.next.isKeywordVoid()){let e=this.inputIndex;this.advance();let n=this.parsePrefix();return new Rc(this.span(e),this.sourceSpan(e),n)}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,n=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(Bs))n=this.parseAccessMember(n,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(Nn)?n=this.parseCall(n,e,!0):n=this.consumeOptionalCharacter(Xr)?this.parseKeyedReadOrWrite(n,e,!0):this.parseAccessMember(n,e,!0);else if(this.consumeOptionalCharacter(Xr))n=this.parseKeyedReadOrWrite(n,e,!1);else if(this.consumeOptionalCharacter(Nn))n=this.parseCall(n,e,!1);else if(this.consumeOptionalOperator("!"))n=new Pc(this.span(e),this.sourceSpan(e),n);else if(this.next.isTemplateLiteralEnd())n=this.parseNoInterpolationTaggedTemplateLiteral(n,e);else if(this.next.isTemplateLiteralPart())n=this.parseTaggedTemplateLiteral(n,e);else return n}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(Nn)){this.rparensExpected++;let n=this.parsePipe();return this.consumeOptionalCharacter(Mt)||(this.error("Missing closing parentheses"),this.consumeOptionalCharacter(Mt)),this.rparensExpected--,new Fc(this.span(e),this.sourceSpan(e),n)}else{if(this.next.isKeywordNull())return this.advance(),new pn(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new pn(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new pn(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new pn(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordIn())return this.advance(),new pn(this.span(e),this.sourceSpan(e),"in");if(this.next.isKeywordThis())return this.advance(),new Ic(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(Xr))return this.parseLiteralArray(e);if(this.next.isCharacter(gr))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new ii(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let n=this.next.toNumber();return this.advance(),new pn(this.span(e),this.sourceSpan(e),n)}else{if(this.next.isTemplateLiteralEnd())return this.parseNoInterpolationTemplateLiteral();if(this.next.isTemplateLiteralPart())return this.parseTemplateLiteral();if(this.next.isString()&&this.next.kind===eo.Plain){let n=this.next.toString();return this.advance(),new pn(this.span(e),this.sourceSpan(e),n)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new Qt(this.span(e),this.sourceSpan(e))):this.next.isRegExpBody()?this.parseRegularExpressionLiteral():this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new Qt(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new Qt(this.span(e),this.sourceSpan(e)))}}}parseLiteralArray(e){this.rbracketsExpected++;let n=[];do if(this.next.isOperator("..."))n.push(this.parseSpreadElement());else if(!this.next.isCharacter(Si))n.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(gn));return this.rbracketsExpected--,this.expectCharacter(Si),new kc(this.span(e),this.sourceSpan(e),n)}parseLiteralMap(){let e=[],n=[],r=this.inputIndex;if(this.expectCharacter(gr),!this.consumeOptionalCharacter(Zt)){this.rbracesExpected++;do{let i=this.inputIndex;if(this.next.isOperator("...")){this.advance(),e.push({kind:"spread",span:this.span(i),sourceSpan:this.sourceSpan(i)}),n.push(this.parsePipe());continue}let s=this.next.isString(),o=this.expectIdentifierOrKeywordOrString(),a=this.span(i),l=this.sourceSpan(i),c={kind:"property",key:o,quoted:s,span:a,sourceSpan:l};e.push(c),s?(this.expectCharacter(Yr),n.push(this.parsePipe())):this.consumeOptionalCharacter(Yr)?n.push(this.parsePipe()):(c.isShorthandInitialized=!0,n.push(new Qr(a,l,l,new ii(a,l),o)))}while(this.consumeOptionalCharacter(gn)&&!this.next.isCharacter(Zt));this.rbracesExpected--,this.expectCharacter(Zt)}return new uo(this.span(r),this.sourceSpan(r),e,n)}parseAccessMember(e,n,r){let i=this.inputIndex,s=this.withContext(dc.Writable,()=>{let a=this.expectIdentifierOrKeyword()??"";return a.length===0&&this.error("Expected identifier for property access",e.span.end),a}),o=this.sourceSpan(i);if(r)return this.isAssignmentOperator(this.next)?(this.advance(),this.error("The '?.' operator cannot be used in the assignment"),new Qt(this.span(n),this.sourceSpan(n))):new Ac(this.span(n),this.sourceSpan(n),o,e,s);if(this.isAssignmentOperator(this.next)){let a=this.next.strValue;if(!(this.parseFlags&1))return this.advance(),this.error("Bindings cannot contain assignments"),new Qt(this.span(n),this.sourceSpan(n));let l=new Qr(this.span(n),this.sourceSpan(n),o,e,s);this.advance();let c=this.parseConditional();return new Xt(this.span(n),this.sourceSpan(n),a,l,c)}else return new Qr(this.span(n),this.sourceSpan(n),o,e,s)}parseCall(e,n,r){let i=this.inputIndex;this.rparensExpected++;let s=this.parseCallArguments(),o=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(Mt),this.rparensExpected--;let a=this.span(n),l=this.sourceSpan(n);return r?new qf(a,l,e,s,o):new Pa(a,l,e,s,o)}parseCallArguments(){if(this.next.isCharacter(Mt))return[];let e=[];do e.push(this.next.isOperator("...")?this.parseSpreadElement():this.parsePipe());while(this.consumeOptionalCharacter(gn));return e}parseSpreadElement(){this.next.isOperator("...")||this.error("Spread element must start with '...' operator");let e=this.inputIndex;this.advance();let n=this.parsePipe(),r=this.span(e),i=this.sourceSpan(e);return new Gf(r,i,n)}expectTemplateBindingKey(){let e="",n=!1,r=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),n=this.consumeOptionalOperator("-"),n&&(e+="-");while(n);return{source:e,span:new Mn(r,r+e.length)}}parseTemplateBindings(e){let n=[];for(n.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let r=this.parseLetBinding();if(r)n.push(r);else{let i=this.expectTemplateBindingKey(),s=this.parseAsBinding(i);s?n.push(s):(i.source=e.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),n.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new Oy(n,[],this.errors)}parseKeyedReadOrWrite(e,n,r){return this.withContext(dc.Writable,()=>{this.rbracketsExpected++;let i=this.parsePipe();if(i instanceof Qt&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(Si),this.isAssignmentOperator(this.next)){let s=this.next.strValue;if(r)this.advance(),this.error("The '?.' operator cannot be used in the assignment");else{let o=new co(this.span(n),this.sourceSpan(n),e,i);this.advance();let a=this.parseConditional();return new Xt(this.span(n),this.sourceSpan(n),s,o,a)}}else return r?new Dc(this.span(n),this.sourceSpan(n),e,i):new co(this.span(n),this.sourceSpan(n),e,i);return new Qt(this.span(n),this.sourceSpan(n))})}parseDirectiveKeywordBindings(e){let n=[];this.consumeOptionalCharacter(Yr);let r=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,s=this.parseAsBinding(e);s||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);let o=new Mn(e.span.start,i);return n.push(new Kv(o,e,r)),s&&n.push(s),n}getDirectiveBoundTarget(){if(this.next===df||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:n,end:r}=e.span,i=this.input.substring(n,r);return new mn(e,i,Yi(this.parseSourceSpan),this.absoluteOffset+n,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let n=this.expectTemplateBindingKey();this.consumeStatementTerminator();let r=new Mn(e.span.start,this.currentAbsoluteOffset);return new Vc(r,n,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let n=this.expectTemplateBindingKey(),r=null;this.consumeOptionalOperator("=")&&(r=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let i=new Mn(e,this.currentAbsoluteOffset);return new Vc(i,n,r)}parseNoInterpolationTaggedTemplateLiteral(e,n){let r=this.parseNoInterpolationTemplateLiteral();return new Lc(this.span(n),this.sourceSpan(n),e,r)}parseNoInterpolationTemplateLiteral(){let e=this.next.strValue,n=this.inputIndex;this.advance();let r=this.span(n),i=this.sourceSpan(n);return new Oc(r,i,[new jf(r,i,e)],[])}parseTaggedTemplateLiteral(e,n){let r=this.parseTemplateLiteral();return new Lc(this.span(n),this.sourceSpan(n),e,r)}parseTemplateLiteral(){let e=[],n=[],r=this.inputIndex;for(;this.next!==df;){let i=this.next;if(i.isTemplateLiteralPart()||i.isTemplateLiteralEnd()){let s=this.inputIndex;if(this.advance(),e.push(new jf(this.span(s),this.sourceSpan(s),i.strValue)),i.isTemplateLiteralEnd())break}else if(i.isTemplateLiteralInterpolationStart()){this.advance(),this.rbracesExpected++;let s=this.parsePipe();s instanceof Qt?this.error("Template literal interpolation cannot be empty"):n.push(s),this.rbracesExpected--}else this.advance()}return new Oc(this.span(r),this.sourceSpan(r),e,n)}parseRegularExpressionLiteral(){let e=this.next;if(this.advance(),!e.isRegExpBody())return new Qt(this.span(this.inputIndex),this.sourceSpan(this.inputIndex));let n=null;if(this.next.isRegExpFlags()){n=this.next,this.advance();let s=new Set;for(let o=0;o<n.strValue.length;o++){let a=n.strValue[o];Ob.has(a)?s.has(a)?this.error(`Duplicate regular expression flag "${a}"`,n.index+o):s.add(a):this.error(`Unsupported regular expression flag "${a}". The supported flags are: `+Array.from(Ob,l=>`"${l}"`).join(", "),n.index+o)}}let r=e.index,i=n?n.end:e.end;return new Wf(this.span(r,i),this.sourceSpan(r,i),e.strValue,n?n.strValue:null)}consumeStatementTerminator(){this.consumeOptionalCharacter(Dn)||this.consumeOptionalCharacter(gn)}error(e,n=this.index){this.errors.push(ba(e,this.input,this.getErrorLocationText(n),this.parseSourceSpan)),this.skip()}getErrorLocationText(e){return e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,n){let r=`Private identifiers are not supported. Unexpected private identifier: ${e}`;n!==null&&(r+=`, ${n}`),this.error(r)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(Dn)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(Mt))&&(this.rbracesExpected<=0||!e.isCharacter(Zt))&&(this.rbracketsExpected<=0||!e.isCharacter(Si))&&(!(this.context&dc.Writable)||!this.isAssignmentOperator(e));)this.next.isError()&&this.errors.push(ba(this.next.toString(),this.input,this.getErrorLocationText(this.next.index),this.parseSourceSpan)),this.advance(),e=this.next}};function ba(t,e,n,r){n.length>0&&(n=` ${n} `);let i=Yi(r),s=`Parser Error: ${t}${n}[${e}] in ${i}`;return new X(r,s)}var Fy=class extends La{errors=[];visitPipe(){this.errors.push("pipes")}};function RO(t){let e=new Map,n=0,r=0,i=0;for(;i<t.length;){let s=t[i];if(s.type===9){let[o,a]=s.parts;n+=a.length,r+=o.length}else{let o=s.parts.reduce((a,l)=>a+l.length,0);r+=o,n+=o}e.set(r,n),i++}return e}function PO(t){return t.visit(new Vy)}var Vy=class{visitUnary(e,n){return`${e.operator}${e.expr.visit(this,n)}`}visitBinary(e,n){return`${e.left.visit(this,n)} ${e.operation} ${e.right.visit(this,n)}`}visitChain(e,n){return e.expressions.map(r=>r.visit(this,n)).join("; ")}visitConditional(e,n){return`${e.condition.visit(this,n)} ? ${e.trueExp.visit(this,n)} : ${e.falseExp.visit(this,n)}`}visitThisReceiver(){return"this"}visitImplicitReceiver(){return""}visitInterpolation(e,n){return OO(e.strings,e.expressions.map(r=>r.visit(this,n))).join("")}visitKeyedRead(e,n){return`${e.receiver.visit(this,n)}[${e.key.visit(this,n)}]`}visitLiteralArray(e,n){return`[${e.expressions.map(r=>r.visit(this,n)).join(", ")}]`}visitLiteralMap(e,n){return`{${LO(e.keys.map(r=>r.kind==="spread"?"...":r.quoted?`'${r.key}'`:r.key),e.values.map(r=>r.visit(this,n))).map(([r,i])=>`${r}: ${i}`).join(", ")}}`}visitLiteralPrimitive(e){if(e.value===null)return"null";switch(typeof e.value){case"number":case"boolean":return e.value.toString();case"undefined":return"undefined";case"string":return`'${e.value.replace(/'/g,"\\'")}'`;default:throw new Error(`Unsupported primitive type: ${e.value}`)}}visitPipe(e,n){return`${e.exp.visit(this,n)} | ${e.name}`}visitPrefixNot(e,n){return`!${e.expression.visit(this,n)}`}visitNonNullAssert(e,n){return`${e.expression.visit(this,n)}!`}visitPropertyRead(e,n){return e.receiver instanceof ii||e.receiver instanceof Ic?e.name:`${e.receiver.visit(this,n)}.${e.name}`}visitSafePropertyRead(e,n){return`${e.receiver.visit(this,n)}?.${e.name}`}visitSafeKeyedRead(e,n){return`${e.receiver.visit(this,n)}?.[${e.key.visit(this,n)}]`}visitCall(e,n){return`${e.receiver.visit(this,n)}(${e.args.map(r=>r.visit(this,n)).join(", ")})`}visitSafeCall(e,n){return`${e.receiver.visit(this,n)}?.(${e.args.map(r=>r.visit(this,n)).join(", ")})`}visitTypeofExpression(e,n){return`typeof ${e.expression.visit(this,n)}`}visitVoidExpression(e,n){return`void ${e.expression.visit(this,n)}`}visitRegularExpressionLiteral(e,n){return`/${e.body}/${e.flags||""}`}visitASTWithSource(e,n){return e.ast.visit(this,n)}visitTemplateLiteral(e,n){let r="";for(let i=0;i<e.elements.length;i++){r+=e.elements[i].visit(this,n);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&(r+="${"+s.visit(this,n)+"}")}return"`"+r+"`"}visitTemplateLiteralElement(e,n){return e.text}visitTaggedTemplateLiteral(e,n){return e.tag.visit(this,n)+e.template.visit(this,n)}visitSpreadElement(e,n){return`...${e.expression.visit(this,n)}`}visitParenthesizedExpression(e,n){return"("+e.expression.visit(this,n)+")"}};function LO(t,e){if(t.length!==e.length)throw new Error("Array lengths must match");return t.map((n,r)=>[n,e[r]])}function OO(t,e){let n=[];for(let r=0;r<Math.max(t.length,e.length);r++)r<t.length&&n.push(t[r]),r<e.length&&n.push(e[r]);return n}var xf;function Fb(){return xf||(xf={},oc(Le.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),oc(Le.STYLE,["*|style"]),oc(Le.URL,["*|formAction","area|href","a|href","a|xlink:href","form|action","annotation|href","annotation|xlink:href","annotation-xml|href","annotation-xml|xlink:href","maction|href","maction|xlink:href","malignmark|href","malignmark|xlink:href","math|href","math|xlink:href","mroot|href","mroot|xlink:href","msqrt|href","msqrt|xlink:href","merror|href","merror|xlink:href","mfrac|href","mfrac|xlink:href","mglyph|href","mglyph|xlink:href","msub|href","msub|xlink:href","msup|href","msup|xlink:href","msubsup|href","msubsup|xlink:href","mmultiscripts|href","mmultiscripts|xlink:href","mprescripts|href","mprescripts|xlink:href","mi|href","mi|xlink:href","mn|href","mn|xlink:href","mo|href","mo|xlink:href","mpadded|href","mpadded|xlink:href","mphantom|href","mphantom|xlink:href","mrow|href","mrow|xlink:href","ms|href","ms|xlink:href","mspace|href","mspace|xlink:href","mstyle|href","mstyle|xlink:href","mtable|href","mtable|xlink:href","mtd|href","mtd|xlink:href","mtr|href","mtr|xlink:href","mtext|href","mtext|xlink:href","mover|href","mover|xlink:href","munder|href","munder|xlink:href","munderover|href","munderover|xlink:href","semantics|href","semantics|xlink:href","none|href","none|xlink:href","img|src","video|src"]),oc(Le.RESOURCE_URL,["base|href","embed|src","frame|src","iframe|src","link|href","object|codebase","object|data","script|src","script|href","script|xlink:href"]),oc(Le.ATTRIBUTE_NO_BINDING,["animate|attributeName","set|attributeName","animateMotion|attributeName","animateTransform|attributeName","unknown|attributeName","iframe|sandbox","iframe|allow","iframe|allowFullscreen","iframe|referrerPolicy","iframe|csp","iframe|fetchPriority","unknown|sandbox","unknown|allow","unknown|allowFullscreen","unknown|referrerPolicy","unknown|csp","unknown|fetchPriority"])),xf}function oc(t,e){for(let n of e)xf[n.toLowerCase()]=t}var By=class{},FO="boolean",VO="number",BO="string",UO="object",$O=["[Element]|textContent,%ariaActiveDescendantElement,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColIndexText,%ariaColSpan,%ariaControlsElements,%ariaCurrent,%ariaDescribedByElements,%ariaDescription,%ariaDetailsElements,%ariaDisabled,%ariaErrorMessageElements,%ariaExpanded,%ariaFlowToElements,%ariaHasPopup,%ariaHidden,%ariaInvalid,%ariaKeyShortcuts,%ariaLabel,%ariaLabelledByElements,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaOwnsElements,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowIndexText,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,search,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","geolocation^[HTMLElement]|accuracymode,!autolocate,*location,*promptaction,*promptdismiss,*validationstatuschange,!watch","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","selectedcontent^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","search^[HTMLELement]|","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],TT=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex","aria-activedescendant":"ariaActiveDescendantElement","aria-atomic":"ariaAtomic","aria-autocomplete":"ariaAutoComplete","aria-busy":"ariaBusy","aria-checked":"ariaChecked","aria-colcount":"ariaColCount","aria-colindex":"ariaColIndex","aria-colindextext":"ariaColIndexText","aria-colspan":"ariaColSpan","aria-controls":"ariaControlsElements","aria-current":"ariaCurrent","aria-describedby":"ariaDescribedByElements","aria-description":"ariaDescription","aria-details":"ariaDetailsElements","aria-disabled":"ariaDisabled","aria-errormessage":"ariaErrorMessageElements","aria-expanded":"ariaExpanded","aria-flowto":"ariaFlowToElements","aria-haspopup":"ariaHasPopup","aria-hidden":"ariaHidden","aria-invalid":"ariaInvalid","aria-keyshortcuts":"ariaKeyShortcuts","aria-label":"ariaLabel","aria-labelledby":"ariaLabelledByElements","aria-level":"ariaLevel","aria-live":"ariaLive","aria-modal":"ariaModal","aria-multiline":"ariaMultiLine","aria-multiselectable":"ariaMultiSelectable","aria-orientation":"ariaOrientation","aria-owns":"ariaOwnsElements","aria-placeholder":"ariaPlaceholder","aria-posinset":"ariaPosInSet","aria-pressed":"ariaPressed","aria-readonly":"ariaReadOnly","aria-required":"ariaRequired","aria-roledescription":"ariaRoleDescription","aria-rowcount":"ariaRowCount","aria-rowindex":"ariaRowIndex","aria-rowindextext":"ariaRowIndexText","aria-rowspan":"ariaRowSpan","aria-selected":"ariaSelected","aria-setsize":"ariaSetSize","aria-sort":"ariaSort","aria-valuemax":"ariaValueMax","aria-valuemin":"ariaValueMin","aria-valuenow":"ariaValueNow","aria-valuetext":"ariaValueText"})),HO=Array.from(TT).reduce((t,[e,n])=>(t.set(e,n),t),new Map),Wa=class extends By{_schema=new Map;_eventSchema=new Map;constructor(){super(),$O.forEach(e=>{let n=new Map,r=new Set,[i,s]=e.split("|"),o=s.split(","),[a,l]=i.split("^");a.split(",").forEach(u=>{this._schema.set(u.toLowerCase(),n),this._eventSchema.set(u.toLowerCase(),r)});let c=l&&this._schema.get(l.toLowerCase());if(c){for(let[u,h]of c)n.set(u,h);for(let u of this._eventSchema.get(l.toLowerCase()))r.add(u)}o.forEach(u=>{if(u.length>0)switch(u[0]){case"*":r.add(u.substring(1));break;case"!":n.set(u.substring(1),FO);break;case"#":n.set(u.substring(1),VO);break;case"%":n.set(u.substring(1),UO);break;default:n.set(u,BO)}})})}hasProperty(e,n,r){if(r.some(s=>s.name===VS.name))return!0;if(e.indexOf("-")>-1){if(KS(e)||Xv(e))return!1;if(r.some(s=>s.name===FS.name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(n)}hasElement(e,n){return n.some(r=>r.name===VS.name)||e.indexOf("-")>-1&&(KS(e)||Xv(e)||n.some(r=>r.name===FS.name))?!0:this._schema.has(e.toLowerCase())}securityContext(e,n,r){r&&(n=this.getMappedPropName(n)),e=e.toLowerCase(),n=n.toLowerCase();let i=Fb()[e+"|"+n];return i||(i=Fb()["*|"+n],i||Le.NONE)}getMappedPropName(e){return TT.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...
If '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){let n=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(n.keys()).map(r=>HO.get(r)??r)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return V2(e)}normalizeAnimationStyleValue(e,n,r){let i="",s=r.toString().trim(),o=null;if(GO(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&(o=`Please provide a CSS unit value for ${n}:${r}`)}return{error:o,value:s+i}}};function GO(t){switch(t){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var ye=class{closedByChildren={};contentType;closedByParent=!1;implicitNamespacePrefix;isVoid;ignoreFirstLf;canSelfClose;preventNamespaceInheritance;constructor({closedByChildren:e,implicitNamespacePrefix:n,contentType:r=Jr.PARSABLE_DATA,closedByParent:i=!1,isVoid:s=!1,ignoreFirstLf:o=!1,preventNamespaceInheritance:a=!1,canSelfClose:l=!1}={}){e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=s,this.closedByParent=i||s,this.implicitNamespacePrefix=n||null,this.contentType=r,this.ignoreFirstLf=o,this.preventNamespaceInheritance=a,this.canSelfClose=l??s}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return typeof this.contentType=="object"?(e===void 0?void 0:this.contentType[e])??this.contentType.default:this.contentType}},Vb,va;function Uy(t){return va||(Vb=new ye({canSelfClose:!0}),va=Object.assign(Object.create(null),{base:new ye({isVoid:!0}),meta:new ye({isVoid:!0}),area:new ye({isVoid:!0}),embed:new ye({isVoid:!0}),link:new ye({isVoid:!0}),img:new ye({isVoid:!0}),input:new ye({isVoid:!0}),param:new ye({isVoid:!0}),hr:new ye({isVoid:!0}),br:new ye({isVoid:!0}),source:new ye({isVoid:!0}),track:new ye({isVoid:!0}),wbr:new ye({isVoid:!0}),p:new ye({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new ye({closedByChildren:["tbody","tfoot"]}),tbody:new ye({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new ye({closedByChildren:["tbody"],closedByParent:!0}),tr:new ye({closedByChildren:["tr"],closedByParent:!0}),td:new ye({closedByChildren:["td","th"],closedByParent:!0}),th:new ye({closedByChildren:["td","th"],closedByParent:!0}),col:new ye({isVoid:!0}),svg:new ye({implicitNamespacePrefix:"svg"}),foreignObject:new ye({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new ye({implicitNamespacePrefix:"math"}),li:new ye({closedByChildren:["li"],closedByParent:!0}),dt:new ye({closedByChildren:["dt","dd"]}),dd:new ye({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new ye({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new ye({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new ye({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new ye({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new ye({closedByChildren:["optgroup"],closedByParent:!0}),option:new ye({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new ye({ignoreFirstLf:!0}),listing:new ye({ignoreFirstLf:!0}),style:new ye({contentType:Jr.RAW_TEXT}),script:new ye({contentType:Jr.RAW_TEXT}),title:new ye({contentType:{default:Jr.ESCAPABLE_RAW_TEXT,svg:Jr.PARSABLE_DATA}}),textarea:new ye({contentType:Jr.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new Wa().allKnownElementNames().forEach(e=>{!va[e]&&Zv(e)===null&&(va[e]=new ye({canSelfClose:!1}))})),va[t]??va[t.toLowerCase()]??Vb}var Bb={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},$y=class{_placeHolderNameCounts={};_signatureToName={};getStartTagPlaceholderName(e,n,r){let i=this._hashTag(e,n,r);if(this._signatureToName[i])return this._signatureToName[i];let s=e.toUpperCase(),o=Bb[s]||`TAG_${s}`,a=this._generateUniqueName(r?o:`START_${o}`);return this._signatureToName[i]=a,a}getCloseTagPlaceholderName(e){let n=this._hashClosingTag(e);if(this._signatureToName[n])return this._signatureToName[n];let r=e.toUpperCase(),i=Bb[r]||`TAG_${r}`,s=this._generateUniqueName(`CLOSE_${i}`);return this._signatureToName[n]=s,s}getPlaceholderName(e,n){let r=e.toUpperCase(),i=`PH: ${r}=${n}`;if(this._signatureToName[i])return this._signatureToName[i];let s=this._generateUniqueName(r);return this._signatureToName[i]=s,s}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,n){let r=this._hashBlock(e,n);if(this._signatureToName[r])return this._signatureToName[r];let i=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[r]=i,i}getCloseBlockPlaceholderName(e){let n=this._hashClosingBlock(e);if(this._signatureToName[n])return this._signatureToName[n];let r=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[n]=r,r}_hashTag(e,n,r){let i=`<${e}`,s=Object.keys(n).sort().map(a=>` ${a}=${n[a]}`).join(""),o=r?"/>":`></${e}>`;return i+s+o}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,n){let r=n.length===0?"":` (${n.sort().join("; ")})`;return`@${e}${r} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;let r=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=r+1,`${e}_${r}`}},qO=new bh(new du);function jO(t,e){let n=new Hy(qO,t,e);return(r,i,s,o,a)=>n.toI18nMessage(r,i,s,o,a)}function WO(t,e){return e}var Hy=class{_expressionParser;_retainEmptyTokens;_preserveExpressionWhitespace;constructor(e,n,r){this._expressionParser=e,this._retainEmptyTokens=n,this._preserveExpressionWhitespace=r}toI18nMessage(e,n="",r="",i="",s){let o={isIcu:e.length==1&&e[0]instanceof Zs,icuDepth:0,placeholderRegistry:new $y,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:s||WO},a=We(this,e,o);return new nn(a,o.placeholderToContent,o.placeholderToMessage,n,r,i)}visitElement(e,n){return this._visitElementLike(e,n)}visitComponent(e,n){return this._visitElementLike(e,n)}visitDirective(e,n){throw new Error("Unreachable code")}visitAttribute(e,n){let r=e.valueTokens===void 0||e.valueTokens.length===1?new nc(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,n,e.i18n);return n.visitNodeFn(e,r)}visitText(e,n){let r=e.tokens.length===1?new nc(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,n,e.i18n);return n.visitNodeFn(e,r)}visitComment(e,n){return null}visitExpansion(e,n){n.icuDepth++;let r={},i=new th(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach(a=>{r[a.value]=new xi(a.expression.map(l=>l.visit(this,n)),a.expSourceSpan)}),n.icuDepth--,n.isIcu||n.icuDepth>0){let a=n.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return i.expressionPlaceholder=a,n.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},n.visitNodeFn(e,i)}let s=n.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());n.placeholderToMessage[s]=this.toI18nMessage([e],"","","",void 0);let o=new Ua(i,s,e.sourceSpan);return n.visitNodeFn(e,o)}visitExpansionCase(e,n){throw new Error("Unreachable code")}visitBlock(e,n){let r=We(this,e.children,n);if(e.name==="switch")return new xi(r,e.sourceSpan);let i=e.parameters.map(l=>l.expression),s=n.placeholderRegistry.getStartBlockPlaceholderName(e.name,i),o=n.placeholderRegistry.getCloseBlockPlaceholderName(e.name);n.placeholderToContent[s]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},n.placeholderToContent[o]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};let a=new is(e.name,i,s,o,r,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return n.visitNodeFn(e,a)}visitBlockParameter(e,n){throw new Error("Unreachable code")}visitLetDeclaration(e,n){return null}_visitElementLike(e,n){let r=We(this,e.children,n),i={},s=h=>{i[h.name]=h.value},o,a;e instanceof zn?(o=e.name,a=Uy(e.name).isVoid):(o=e.fullName,a=e.tagName?Uy(e.tagName).isVoid:!1),e.attrs.forEach(s),e.directives.forEach(h=>h.attrs.forEach(s));let l=n.placeholderRegistry.getStartTagPlaceholderName(o,i,a);n.placeholderToContent[l]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let c="";a||(c=n.placeholderRegistry.getCloseTagPlaceholderName(o),n.placeholderToContent[c]={text:`</${o}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});let u=new rs(o,i,l,c,r,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return n.visitNodeFn(e,u)}_visitTextWithInterpolation(e,n,r,i){let s=[],o=!1;for(let a of e)switch(a.type){case 8:case 17:o=!0;let[l,c,u]=a.parts,h=QO(c)||"INTERPOLATION",p=r.placeholderRegistry.getPlaceholderName(h,c);if(this._preserveExpressionWhitespace)r.placeholderToContent[p]={text:a.parts.join(""),sourceSpan:a.sourceSpan},s.push(new zc(c,p,a.sourceSpan));else{let m=this.normalizeExpression(a);r.placeholderToContent[p]={text:`${l}${m}${u}`,sourceSpan:a.sourceSpan},s.push(new zc(m,p,a.sourceSpan))}break;default:if(a.parts[0].length>0||this._retainEmptyTokens){let m=s[s.length-1];m instanceof nc?(m.value+=a.parts[0],m.sourceSpan=new ee(m.sourceSpan.start,a.sourceSpan.end,m.sourceSpan.fullStart,m.sourceSpan.details)):s.push(new nc(a.parts[0],a.sourceSpan))}else this._retainEmptyTokens&&s.push(new nc(a.parts[0],a.sourceSpan));break}return o?(zO(s,i),new xi(s,n)):s[0]}normalizeExpression(e){let n=e.parts[1],r=this._expressionParser.parseBinding(n,e.sourceSpan,e.sourceSpan.start.offset);return PO(r)}};function zO(t,e){if(e instanceof nn&&(JO(e),e=e.nodes[0]),e instanceof xi){YO(e.children,t);for(let n=0;n<t.length;n++)t[n].sourceSpan=e.children[n].sourceSpan}}function JO(t){let e=t.nodes;if(e.length!==1||!(e[0]instanceof xi))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}function YO(t,e){if(t.length!==e.length)throw new Error(`
The number of i18n message children changed between first and second pass.

First pass (${t.length} tokens):
${t.map(n=>`"${n.sourceSpan.toString()}"`).join(`
`)}

Second pass (${e.length} tokens):
${e.map(n=>`"${n.sourceSpan.toString()}"`).join(`
`)}
    `.trim());if(t.some((n,r)=>e[r].constructor!==n.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}var KO=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function QO(t){return t.split(KO)[2]}var Ub=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function $b(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),Ub.has(t+"|"+e)||Ub.has("*|"+e)}var XO=t=>(e,n)=>{let r=t.get(e)??e;return r instanceof Ai&&(n instanceof Ua&&r.i18n instanceof nn&&(n.previousMessage=r.i18n),r.i18n=n),n},xh=class{keepI18nAttrs;enableI18nLegacyMessageIdFormat;preserveSignificantWhitespace;retainEmptyTokens;hasI18nMeta=!1;_errors=[];constructor(e=!1,n=!1,r=!0,i=!r){this.keepI18nAttrs=e,this.enableI18nLegacyMessageIdFormat=n,this.preserveSignificantWhitespace=r,this.retainEmptyTokens=i}_generateI18nMessage(e,n="",r){let{meaning:i,description:s,customId:o}=this._parseMetadata(n),l=jO(this.retainEmptyTokens,this.preserveSignificantWhitespace)(e,i,s,o,r);return this._setMessageId(l,n),this._setLegacyIds(l,n),l}visitAllWithErrors(e){let n=e.map(r=>r.visit(this,null));return new Ch(n,this._errors)}visitElement(e){return this._visitElementLike(e),e}visitComponent(e,n){return this._visitElementLike(e),e}visitExpansion(e,n){let r,i=e.i18n;if(this.hasI18nMeta=!0,i instanceof Ua){let s=i.name;r=this._generateI18nMessage([e],i);let o=Vx(r);o.name=s,n!==null&&(n.placeholderToMessage[s]=r)}else r=this._generateI18nMessage([e],n||i);return e.i18n=r,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,n){return We(this,e.children,n),e}visitBlockParameter(e,n){return e}visitLetDeclaration(e,n){return e}visitDirective(e,n){return e}_visitElementLike(e){let n;if(fR(e)){this.hasI18nMeta=!0;let r=[],i={};for(let s of e.attrs)if(s.name===Ox){let o=e.i18n||s.value,a=new Map,l=this.preserveSignificantWhitespace?e.children:jr(new Sh(!1,a),e.children);n=this._generateI18nMessage(l,o,XO(a)),n.nodes.length===0&&(n=void 0),e.i18n=n}else if(s.name.startsWith(ly)){let o=s.name.slice(ly.length),a;e instanceof hn?a=e.tagName===null?!1:$b(e.tagName,o):a=$b(e.name,o),a?this._reportError(s,`Translating attribute '${o}' is disallowed for security reasons.`):i[o]=s.value}else r.push(s);if(Object.keys(i).length)for(let s of r){let o=i[s.name];o!==void 0&&s.value&&(s.i18n=this._generateI18nMessage([s],s.i18n||o))}this.keepI18nAttrs||(e.attrs=r)}We(this,e.children,n)}_parseMetadata(e){return typeof e=="string"?tF(e):e instanceof nn?e:{}}_setMessageId(e,n){e.id||(e.id=n instanceof nn&&n.id||p2(e))}_setLegacyIds(e,n){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[h2(e),Ix(e)];else if(typeof n!="string"){let r=n instanceof nn?n:n instanceof Ua?n.previousMessage:void 0;e.legacyIds=r?r.legacyIds:[]}}_reportError(e,n){this._errors.push(new X(e.sourceSpan,n))}},ZO="|",eF="@@";function tF(t=""){let e,n,r;if(t=t.trim(),t){let i=t.indexOf(eF),s=t.indexOf(ZO),o;[o,e]=i>-1?[t.slice(0,i),t.slice(i+2)]:[t,""],[n,r]=s>-1?[o.slice(0,s),o.slice(s+1)]:["",o]}return{customId:e,meaning:n,description:r}}function nF(t){let e=[];return t.description?e.push({tagName:"desc",text:t.description}):e.push({tagName:"suppress",text:"{msgDescriptions}"}),t.meaning&&e.push({tagName:"meaning",text:t.meaning}),D2(e)}var rF="goog.getMsg";function iF(t,e,n,r){let i=oF(e),s=[I(i)];Object.keys(r).length&&(s.push(xy(_0(r,!0),!0)),s.push(xy({original_code:Zn(Object.keys(r).map(l=>({key:yu(l),quoted:!0,value:e.placeholders[l]?I(e.placeholders[l].sourceSpan.toString()):I(e.placeholderToMessage[l].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));let o=new _t(n.name,Ee(rF).callFn(s),vr,Rt.Final);o.addLeadingComment(nF(e));let a=new qt(t.set(n));return[o,a]}var Gy=class{formatPh(e){return`{$${yu(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){return wT(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,n){return this.formatPh(e.name)}},sF=new Gy;function oF(t){return t.nodes.map(e=>e.visit(sF,null)).join("")}function aF(t,e,n){let{messageParts:r,placeHolders:i}=lF(e),s=cF(e),o=i.map(c=>n[c.text]),a=N2(e,r,i,o,s),l=t.set(a);return[new qt(l)]}var qy=class{placeholderToMessage;pieces;constructor(e,n){this.placeholderToMessage=e,this.pieces=n}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Ys)this.pieces[this.pieces.length-1].text+=e.value;else{let n=new ee(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Ys(e.value,n))}}visitContainer(e){e.children.forEach(n=>n.visit(this))}visitIcu(e){this.pieces.push(new Ys(wT(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(n=>n.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(n=>n.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,n,r){return new xa(yu(e,!1),n,r)}};function lF(t){let e=[],n=new qy(t.placeholderToMessage,e);return t.nodes.forEach(r=>r.visit(n)),uF(e)}function cF(t){let e=t.nodes[0],n=t.nodes[t.nodes.length-1];return new ee(e.sourceSpan.fullStart,n.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}function uF(t){let e=[],n=[];t[0]instanceof xa&&e.push(Av(t[0].sourceSpan.start));for(let r=0;r<t.length;r++){let i=t[r];i instanceof Ys?e.push(i):(n.push(i),t[r-1]instanceof xa&&e.push(Av(t[r-1].sourceSpan.end)))}return t[t.length-1]instanceof xa&&e.push(Av(t[t.length-1].sourceSpan.end)),{messageParts:e,placeHolders:n}}function Av(t){return new Ys("",new ee(t,t))}var Hb="ngI18nClosureMode",dF="i18n_",fF="I18N_EXP_",Gb="\uFFFD",hF="MSG_";function qb(t){return`${hF}${t}`.toUpperCase()}function pF(t){return new _t(t.name,void 0,vr,void 0,t.sourceSpan)}function mF(t){let e=t.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",n=new Map,r=new Map,i=new Map,s=new Map;for(let l of t.units)for(let c of l.ops())if(c.kind===v.ExtractedAttribute&&c.i18nContext!==null){let u=n.get(c.i18nContext)??[];u.push(c),n.set(c.i18nContext,u)}else if(c.kind===v.I18nAttributes)r.set(c.target,c);else if(c.kind===v.I18nExpression&&c.usage===Ya.I18nAttribute){let u=i.get(c.target)??[];u.push(c),i.set(c.target,u)}else c.kind===v.I18nMessage&&s.set(c.xref,c);let o=new Map,a=new Map;for(let l of t.units)for(let c of l.create)if(c.kind===v.I18nMessage){if(c.messagePlaceholder===null){let{mainVar:u,statements:h}=IT(t,e,s,c);if(c.i18nBlock!==null){let p=t.addConst(u,h);a.set(c.i18nBlock,p)}else{t.constsInitializers.push(...h),o.set(c.i18nContext,u);let p=n.get(c.i18nContext);if(p!==void 0)for(let m of p)m.expression=u.clone()}}N.remove(c)}for(let l of t.units)for(let c of l.create)if(us(c)){let u=r.get(c.xref);if(u===void 0)continue;let h=i.get(c.xref);if(h===void 0)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");let p=new Set;h=h.filter(g=>{let y=p.has(g.name);return p.add(g.name),!y});let m=h.flatMap(g=>{let y=o.get(g.context);if(y===void 0)throw new Error("AssertionError: Could not find i18n expression's value");return[I(g.name),y]});u.i18nAttributesConfig=t.addConst(new ni(m))}for(let l of t.units)for(let c of l.create)if(c.kind===v.I18nStart){let u=a.get(c.root);if(u===void 0)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=u}}function IT(t,e,n,r){let i=[],s=new Map;for(let c of r.subMessages){let u=n.get(c),{mainVar:h,statements:p}=IT(t,e,n,u);i.push(...p);let m=s.get(u.messagePlaceholder)??[];m.push(h),s.set(u.messagePlaceholder,m)}gF(r,s),r.params=new Map([...r.params.entries()].sort());let o=Ee(t.pool.uniqueName(dF)),a=wF(t.pool,r.message.id,e,t.i18nUseExternalIds),l;if(r.needsPostprocessing||r.postprocessingParams.size>0){let c=Object.fromEntries([...r.postprocessingParams.entries()].sort()),u=_0(c,!1),h=[];r.postprocessingParams.size>0&&h.push(xy(u,!0)),l=p=>W(C.i18nPostprocess).callFn([p,...h])}return i.push(...vF(r.message,o,a,r.params,l)),{mainVar:o,statements:i}}function gF(t,e){for(let[n,r]of e)r.length===1?t.params.set(n,r[0]):(t.params.set(n,I(`${Gb}${fF}${n}${Gb}`)),t.postprocessingParams.set(n,Me(r)))}function vF(t,e,n,r,i){let s=Object.fromEntries(r),o=[pF(e),Vh(yF(),iF(e,t,n,s),aF(e,t,_0(s,!1)))];return i&&o.push(new qt(e.set(i(e)))),o}function yF(){return gu(Ee(Hb)).notIdentical(I("undefined",v0)).and(Ee(Hb))}function wF(t,e,n,r){let i,s=n;if(r){let o=qb("EXTERNAL_"),a=t.uniqueName(s);i=`${o}${Gs(e)}$$${a}`}else{let o=qb(s);i=t.uniqueName(o)}return Ee(i)}function _F(t){for(let e of t.units){let n=null,r=null,i=new Map,s=new Map,o=new Map;for(let a of e.create)switch(a.kind){case v.I18nStart:if(a.context===null)throw Error("I18n op should have its context set.");n=a;break;case v.I18nEnd:n=null;break;case v.IcuStart:if(a.context===null)throw Error("Icu op should have its context set.");r=a;break;case v.IcuEnd:r=null;break;case v.Text:if(n!==null)if(i.set(a.xref,n),s.set(a.xref,r),a.icuPlaceholder!==null){let l=WP(t.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);N.replace(a,l),o.set(a.xref,l)}else N.remove(a);break}for(let a of e.update)switch(a.kind){case v.InterpolateText:if(!i.has(a.target))continue;let l=i.get(a.target),c=s.get(a.target),u=o.get(a.target),h=c?c.context:l.context,p=c?eu.Postproccessing:eu.Creation,m=[];for(let g=0;g<a.interpolation.expressions.length;g++){let y=a.interpolation.expressions[g];m.push(iT(h,l.xref,l.xref,l.handle,y,u?.xref??null,a.interpolation.i18nPlaceholders[g]??null,p,Ya.I18nText,"",y.sourceSpan??a.sourceSpan))}N.replaceWithMany(a,m),u!==void 0&&(u.strings=a.interpolation.strings);break}}}function EF(t){for(let e of t.units)for(let n of e.create)switch(n.kind){case v.ElementStart:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!Array.isArray(n.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(n.numSlotsUsed+=n.localRefs.length,n.localRefs.length>0){let r=CF(n.localRefs);n.localRefs=t.addConst(r)}else n.localRefs=null;break}}function CF(t){let e=[];for(let n of t)e.push(I(n.name),I(n.target));return Me(e)}function SF(t){for(let e of t.units){let n=Gt.HTML;for(let r of e.create)r.kind===v.ElementStart&&r.namespace!==n&&(N.insertBefore(VP(r.namespace),r),n=r.namespace)}}function bF(t){let e=[],n=0,r=0,i=0,s=0,o=0,a=null;for(;n<t.length;)switch(t.charCodeAt(n++)){case 40:r++;break;case 41:r--;break;case 39:i===0?i=39:i===39&&t.charCodeAt(n-1)!==92&&(i=0);break;case 34:i===0?i=34:i===34&&t.charCodeAt(n-1)!==92&&(i=0);break;case 58:!a&&r===0&&i===0&&(a=AT(t.substring(o,n-1).trim()),s=n);break;case 59:if(a&&s>0&&r===0&&i===0){let c=t.substring(s,n-1).trim();e.push(a,c),o=n,s=0,a=null}break}if(a&&s){let l=t.slice(s).trim();e.push(a,l)}return e}function AT(t){return t.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function xF(t){let e=new Map;for(let n of t.units)for(let r of n.create)us(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.create)if(r.kind===v.ExtractedAttribute&&r.bindingKind===U.Attribute&&sT(r.expression)){let i=e.get(r.target);if(i!==void 0&&(i.kind===v.Template||i.kind===v.ConditionalCreate||i.kind===v.ConditionalBranchCreate)&&i.templateKind===vn.Structural)continue;if(r.name==="style"){let s=bF(r.expression.value);for(let o=0;o<s.length-1;o+=2)N.insertBefore(An(r.target,U.StyleProperty,null,s[o],I(s[o+1]),null,null,Le.STYLE),r);N.remove(r)}else if(r.name==="class"){let s=r.expression.value.trim().split(/\s+/g);for(let o of s)N.insertBefore(An(r.target,U.ClassName,null,o,null,null,null,Le.NONE),r);N.remove(r)}}}function TF(t){fc(t.root,t.componentName,{index:0},t.compatibility===Fn.TemplateDefinitionBuilder)}function fc(t,e,n,r){t.fnName===null&&(t.fnName=t.job.pool.uniqueName(Gs(`${e}_${t.job.fnSuffix}`),!1));let i=new Map;for(let s of t.ops())switch(s.kind){case v.Property:case v.DomProperty:s.bindingKind===U.LegacyAnimation&&(s.name="@"+s.name);break;case v.Animation:if(s.handlerFnName===null){let u=s.name.replace(".","");s.handlerFnName=`${t.fnName}_${u}_cb`,s.handlerFnName=Gs(s.handlerFnName)}break;case v.AnimationListener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let o=s.name.replace(".","");s.hostListener?s.handlerFnName=`${e}_${o}_HostBindingHandler`:s.handlerFnName=`${t.fnName}_${s.tag.replace("-","_")}_${o}_${s.targetSlot.slot}_listener`,s.handlerFnName=Gs(s.handlerFnName);break;case v.Listener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let a="";s.isLegacyAnimationListener&&(s.name=`@${s.name}.${s.legacyAnimationPhase}`,a="animation"),s.hostListener?s.handlerFnName=`${e}_${a}${s.name}_HostBindingHandler`:s.handlerFnName=`${t.fnName}_${s.tag.replace("-","_")}_${a}${s.name}_${s.targetSlot.slot}_listener`,s.handlerFnName=Gs(s.handlerFnName);break;case v.TwoWayListener:if(s.handlerFnName!==null)break;if(s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");s.handlerFnName=Gs(`${t.fnName}_${s.tag.replace("-","_")}_${s.name}_${s.targetSlot.slot}_listener`);break;case v.Variable:i.set(s.xref,IF(t,s.variable,n));break;case v.RepeaterCreate:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.emptyView!==null){let u=t.job.views.get(s.emptyView);fc(u,`${e}_${s.functionNameSuffix}Empty_${s.handle.slot+2}`,n,r)}fc(t.job.views.get(s.xref),`${e}_${s.functionNameSuffix}_${s.handle.slot+1}`,n,r);break;case v.Projection:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.fallbackView!==null){let u=t.job.views.get(s.fallbackView);fc(u,`${e}_ProjectionFallback_${s.handle.slot}`,n,r)}break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");let l=t.job.views.get(s.xref);if(s.handle.slot===null)throw new Error("Expected slot to be assigned");let c=s.functionNameSuffix.length===0?"":`_${s.functionNameSuffix}`;fc(l,`${e}${c}_${s.handle.slot}`,n,r);break;case v.StyleProp:s.name=AF(s.name),r&&(s.name=jb(s.name));break;case v.ClassProp:r&&(s.name=jb(s.name));break}for(let s of t.ops())At(s,o=>{if(!(!(o instanceof Ti)||o.name!==null)){if(!i.has(o.xref))throw new Error(`Variable ${o.xref} not yet named`);o.name=i.get(o.xref)}})}function IF(t,e,n){if(e.name===null)switch(e.kind){case It.Context:e.name=`ctx_r${n.index++}`;break;case It.Identifier:if(t.job.compatibility===Fn.TemplateDefinitionBuilder){let r=e.identifier==="ctx"?"i":"";e.name=`${e.identifier}_${r}r${++n.index}`}else e.name=`${e.identifier}_i${n.index++}`;break;default:e.name=`_r${++n.index}`;break}return e.name}function AF(t){return t.startsWith("--")?t:AT(t)}function jb(t){let e=t.indexOf("!important");return e>-1?t.substring(0,e):t}function DF(t){for(let e of t.units){for(let n of e.create)(n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener)&&Wb(n.handlerOps);Wb(e.update)}}function Wb(t){for(let e of t){if(e.kind!==v.Statement||!(e.statement instanceof qt)||!(e.statement.expr instanceof ch))continue;let n=e.statement.expr.steps,r=!0;for(let i=e.next;i.kind!==v.ListEnd&&r;i=i.next)At(i,(s,o)=>{if(!ai(s))return s;if(r&&!(o&xe.InChildOperation))switch(s.kind){case z.NextContext:s.steps+=n,N.remove(e),r=!1;break;case z.GetCurrentView:case z.Reference:case z.ContextLetReference:r=!1;break}})}}var kF="ng-container";function MF(t){for(let e of t.units){let n=new Set;for(let r of e.create)r.kind===v.ElementStart&&r.tag===kF&&(r.kind=v.ContainerStart,n.add(r.xref)),r.kind===v.ElementEnd&&n.has(r.xref)&&(r.kind=v.ContainerEnd)}}function NF(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function RF(t){let e=new Map;for(let n of t.units)for(let r of n.create)us(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.create)(r.kind===v.ElementStart||r.kind===v.ContainerStart)&&r.nonBindable&&N.insertAfter(PP(r.xref),r),(r.kind===v.ElementEnd||r.kind===v.ContainerEnd)&&NF(e,r.xref).nonBindable&&N.insertBefore(LP(r.xref),r)}function Kr(t){return e=>e.kind===t}function vc(t,e){return n=>n.kind===t&&e===n.expression instanceof Xe}function PF(t){return t.kind===v.Listener&&!(t.hostListener&&t.isLegacyAnimationListener)||t.kind===v.TwoWayListener||t.kind===v.Animation||t.kind===v.AnimationListener}function LF(t){return(t.kind===v.Property||t.kind===v.TwoWayProperty)&&!(t.expression instanceof Xe)}var OF=[{test:t=>t.kind===v.Listener&&t.hostListener&&t.isLegacyAnimationListener},{test:PF}],FF=[{test:Kr(v.StyleMap),transform:Th},{test:Kr(v.ClassMap),transform:Th},{test:Kr(v.StyleProp)},{test:Kr(v.ClassProp)},{test:vc(v.Attribute,!0)},{test:vc(v.Property,!0)},{test:LF},{test:vc(v.Attribute,!1)},{test:Kr(v.Control)}],VF=[{test:vc(v.DomProperty,!0)},{test:vc(v.DomProperty,!1)},{test:Kr(v.Attribute)},{test:Kr(v.StyleMap),transform:Th},{test:Kr(v.ClassMap),transform:Th},{test:Kr(v.StyleProp)},{test:Kr(v.ClassProp)}],zb=new Set([v.Listener,v.TwoWayListener,v.AnimationListener,v.StyleMap,v.ClassMap,v.StyleProp,v.ClassProp,v.Property,v.TwoWayProperty,v.DomProperty,v.Attribute,v.Animation,v.Control]);function BF(t){for(let e of t.units){Jb(e.create,OF);let n=e.job.kind===F.Host?VF:FF;Jb(e.update,n)}}function Jb(t,e){let n=[],r=null;for(let i of t){let s=tu(i)?i.target:null;(!zb.has(i.kind)||s!==r&&r!==null&&s!==null)&&(N.insertBefore(Yb(n,e),i),n=[],r=null),zb.has(i.kind)&&(n.push(i),N.remove(i),r=s??r)}t.push(Yb(n,e))}function Yb(t,e){let n=Array.from(e,()=>new Array);for(let r of t){let i=e.findIndex(s=>s.test(r));n[i].push(r)}return n.flatMap((r,i)=>{let s=e[i].transform;return s?s(r):r})}function Th(t){return t.slice(t.length-1)}function UF(t){for(let e of t.units){let n=mT(e);for(let r of e.ops())if(r.kind===v.Binding){let i=HF(n,r.target);$F(r.name)&&i.kind===v.Projection&&N.remove(r)}}}function $F(t){return t.toLowerCase()==="select"}function HF(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an slottable target.");return n}function GF(t){for(let e of t.units)qF(e)}function qF(t){for(let e of t.update)At(e,(n,r)=>{if(ai(n)&&n.kind===z.PipeBinding){if(r&xe.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(t.job.compatibility){if(e.target==null)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");jF(t,e.target,n)}else t.create.push(fT(n.target,n.targetSlot,n.name))}})}function jF(t,e,n){for(let r=t.create.head.next;r.kind!==v.ListEnd;r=r.next){if(!Qa(r)||r.xref!==e)continue;for(;r.next.kind===v.Pipe;)r=r.next;let i=fT(n.target,n.targetSlot,n.name);N.insertBefore(i,r.next);return}throw new Error(`AssertionError: unable to find insertion point for pipe ${n.name}`)}function WF(t){for(let e of t.units)for(let n of e.update)st(n,r=>!(r instanceof go)||r.args.length<=4?r:new iu(r.target,r.targetSlot,r.name,Me(r.args),r.args.length),xe.None)}function zF(t){DT(t.root,0)}function DT(t,e){let n=null;for(let r of t.create)switch(r.kind){case v.I18nStart:r.subTemplateIndex=e===0?null:e,n=r;break;case v.I18nEnd:n.subTemplateIndex===null&&(e=0),n=null;break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:e=ff(t.job.views.get(r.xref),n,r.i18nPlaceholder,e);break;case v.RepeaterCreate:let i=t.job.views.get(r.xref);e=ff(i,n,r.i18nPlaceholder,e),r.emptyView!==null&&(e=ff(t.job.views.get(r.emptyView),n,r.emptyI18nPlaceholder,e));break;case v.Projection:r.fallbackView!==null&&(e=ff(t.job.views.get(r.fallbackView),n,r.fallbackViewI18nPlaceholder,e));break}return e}function ff(t,e,n,r){if(n!==void 0){if(e===null)throw Error("Expected template with i18n placeholder to be in an i18n block.");r++,JF(t,e)}return DT(t,r)}function JF(t,e){if(t.create.head.next?.kind!==v.I18nStart){let n=t.job.allocateXrefId();N.insertAfter(Gh(n,e.message,e.root,null),t.create.head),N.insertBefore(qh(n,null),t.create.tail)}}function YF(t){for(let e of t.units)for(let n of e.ops())At(n,r=>{if(!(r instanceof mo)||r.body===null)return;let i=new jy(r.args.length);r.fn=t.pool.getSharedConstant(i,r.body),r.body=null})}var jy=class extends xc{numArgs;constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof ls?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,n){let r=[];for(let s=0;s<this.numArgs;s++)r.push(new Nt("a"+s));let i=V(n,s=>s instanceof ls?Ee("a"+s.index):s,xe.None);return new _t(e,new io(r,i),void 0,Rt.Final)}};function KF(t){for(let e of t.units)for(let n of e.update)st(n,(r,i)=>i&xe.InChildOperation?r:r instanceof ni?QF(r):r instanceof _r?XF(r):r,xe.None)}function QF(t){let e=[],n=[];for(let r of t.entries){if(r instanceof oo){if(r.expression.isConstant())e.push(r);else{let i=n.length;n.push(r.expression),e.push(new oo(new ls(i)))}continue}if(r.isConstant())e.push(r);else{let i=n.length;n.push(r),e.push(new ls(i))}}return new mo(Me(e),n)}function XF(t){let e=[],n=[];for(let r of t.entries){if(r instanceof es){if(r.expression.isConstant())e.push(r);else{let i=n.length;n.push(r.expression),e.push(new es(new ls(i)))}continue}if(r.value.isConstant())e.push(r);else{let i=n.length;n.push(r.value),e.push(new Ma(r.key,new ls(i),r.quoted))}}return new mo(new _r(e),n)}function ZF(t){for(let e of t.units)for(let n of e.ops())st(n,r=>r instanceof ka&&(r.flags===null||!r.flags.includes("g"))?t.pool.getSharedConstant(new Wy,r):r,xe.None)}var Wy=class extends xc{toSharedConstantDeclaration(e,n){return new _t(e,n,void 0,Rt.Final)}};function eV(t,e,n,r,i){return hs(C.element,t,e,n,r,i)}function tV(t,e,n,r,i){return hs(C.elementStart,t,e,n,r,i)}function hs(t,e,n,r,i,s){let o=[I(e)];return n!==null&&o.push(I(n)),i!==null?o.push(I(r),I(i)):r!==null&&o.push(I(r)),ae(t,o,s)}function kT(t,e,n,r,i,s,o,a,l){let c=[I(e),n,I(r),I(i),I(s),I(o)];for(a!==null&&(c.push(I(a)),c.push(W(C.templateRefExtractor)));c[c.length-1].isEquivalent(Na);)c.pop();return ae(t,c,l)}function M0(t,e,n,r,i){let s=[I(e)];return n instanceof Xe?s.push(wo(n,i)):s.push(n),r!==null&&s.push(r),ae(t,s,i)}function nV(t){return ae(C.elementEnd,[],t)}function rV(t,e,n,r){return hs(C.elementContainerStart,t,null,e,n,r)}function iV(t,e,n,r){return hs(C.elementContainer,t,null,e,n,r)}function sV(){return ae(C.elementContainerEnd,[],null)}function oV(t,e,n,r,i,s,o,a){return kT(C.templateCreate,t,e,n,r,i,s,o,a)}function aV(){return ae(C.disableBindings,[],null)}function lV(){return ae(C.enableBindings,[],null)}function cV(t,e,n,r,i){let s=[I(t),e];return n!==null&&s.push(W(n)),ae(r?C.syntheticHostListener:C.listener,s,i)}function Kb(t,e){return W(C.twoWayBindingSet).callFn([t,e])}function uV(t,e,n){return ae(C.twoWayListener,[I(t),e],n)}function dV(t,e){return ae(C.pipe,[I(t),I(e)],null)}function fV(){return ae(C.namespaceHTML,[],null)}function hV(){return ae(C.namespaceSVG,[],null)}function pV(){return ae(C.namespaceMathML,[],null)}function mV(t,e){return ae(C.advance,t>1?[I(t)]:[],e)}function gV(t){return W(C.reference).callFn([I(t)])}function vV(t){return W(C.nextContext).callFn(t===1?[]:[I(t)])}function yV(){return W(C.getCurrentView).callFn([])}function wV(t){return W(C.restoreView).callFn([t])}function _V(t){return W(C.resetView).callFn([t])}function EV(t,e,n){let r=[I(t,null)];return e!==""&&r.push(I(e)),ae(C.text,r,n)}function CV(t,e,n,r,i,s,o,a,l,c,u){let h=[I(t),I(e),n??I(null),I(r),I(i),I(s),o??I(null),a??I(null),l?W(C.deferEnableTimerScheduling):I(null),I(u)],p;for(;(p=h[h.length-1])!==null&&p instanceof Ot&&p.value===null;)h.pop();return ae(C.defer,h,c)}var SV=new Map([[Pe.Idle,{none:C.deferOnIdle,prefetch:C.deferPrefetchOnIdle,hydrate:C.deferHydrateOnIdle}],[Pe.Immediate,{none:C.deferOnImmediate,prefetch:C.deferPrefetchOnImmediate,hydrate:C.deferHydrateOnImmediate}],[Pe.Timer,{none:C.deferOnTimer,prefetch:C.deferPrefetchOnTimer,hydrate:C.deferHydrateOnTimer}],[Pe.Hover,{none:C.deferOnHover,prefetch:C.deferPrefetchOnHover,hydrate:C.deferHydrateOnHover}],[Pe.Interaction,{none:C.deferOnInteraction,prefetch:C.deferPrefetchOnInteraction,hydrate:C.deferHydrateOnInteraction}],[Pe.Viewport,{none:C.deferOnViewport,prefetch:C.deferPrefetchOnViewport,hydrate:C.deferHydrateOnViewport}],[Pe.Never,{none:C.deferHydrateNever,prefetch:C.deferHydrateNever,hydrate:C.deferHydrateNever}]]);function bV(t,e,n,r){let i=SV.get(t)?.[n];if(i===void 0)throw new Error(`Unable to determine instruction for trigger ${t}`);return ae(i,e,r)}function xV(t){return ae(C.projectionDef,t?[t]:[],null)}function TV(t,e,n,r,i,s,o){let a=[I(t)];return(e!==0||n!==null||r!==null)&&(a.push(I(e)),n!==null&&a.push(n),r!==null&&(n===null&&a.push(I(null)),a.push(Ee(r),I(i),I(s)))),ae(C.projection,a,o)}function IV(t,e,n,r){let i=[I(t),I(e)];return n!==null&&i.push(I(n)),ae(C.i18nStart,i,r)}function AV(t,e,n,r,i,s,o,a){let l=[I(t),e,I(n),I(r),I(i),I(s)];for(o!==null&&(l.push(I(o)),l.push(W(C.templateRefExtractor)));l[l.length-1].isEquivalent(Na);)l.pop();return ae(C.conditionalCreate,l,a)}function DV(t,e,n,r,i,s,o,a){let l=[I(t),e,I(n),I(r),I(i),I(s)];for(o!==null&&(l.push(I(o)),l.push(W(C.templateRefExtractor)));l[l.length-1].isEquivalent(Na);)l.pop();return ae(C.conditionalBranchCreate,l,a)}function kV(t,e,n,r,i,s,o,a,l,c,u,h,p,m){let g=[I(t),Ee(e),I(n),I(r),I(i),I(s),o];return(a||l!==null)&&(g.push(I(a)),l!==null&&(g.push(Ee(l),I(c),I(u)),(h!==null||p!==null)&&g.push(I(h)),p!==null&&g.push(I(p)))),ae(C.repeaterCreate,g,m)}function MV(t,e){return ae(C.repeater,[t],e)}function NV(t,e,n){return t==="prefetch"?ae(C.deferPrefetchWhen,[e],n):t==="hydrate"?ae(C.deferHydrateWhen,[e],n):ae(C.deferWhen,[e],n)}function RV(t,e){return ae(C.declareLet,[I(t)],e)}function PV(t,e){return W(C.storeLet).callFn([t],e)}function LV(t){return W(C.readContextLet).callFn([I(t)])}function OV(t,e,n,r){let i=[I(t),I(e)];return n&&i.push(I(n)),ae(C.i18n,i,r)}function FV(t){return ae(C.i18nEnd,[],t)}function VV(t,e){let n=[I(t),I(e)];return ae(C.i18nAttributes,n,null)}function BV(t,e,n){return M0(C.ariaProperty,t,e,null,n)}function UV(t,e,n,r){return M0(C.property,t,e,n,r)}function $V(t,e,n,r){let i=[];return e instanceof Xe?i.push(wo(e,r)):i.push(e),i.push(I(t)),n!==null&&i.push(n),ae(C.control,i,r)}function HV(t){return ae(C.controlCreate,[],t)}function GV(t,e,n,r){let i=[I(t),e];return n!==null&&i.push(n),ae(C.twoWayProperty,i,r)}function qV(t,e,n,r,i){let s=[I(t)];return e instanceof Xe?s.push(wo(e,i)):s.push(e),(n!==null||r!==null)&&s.push(n??I(null)),r!==null&&s.push(I(r)),ae(C.attribute,s,null)}function jV(t,e,n,r){let i=[I(t)];return e instanceof Xe?i.push(wo(e,r)):i.push(e),n!==null&&i.push(I(n)),ae(C.styleProp,i,r)}function WV(t,e,n){return ae(C.classProp,[I(t),e],n)}function zV(t,e){let n=t instanceof Xe?wo(t,e):t;return ae(C.styleMap,[n],e)}function JV(t,e){let n=t instanceof Xe?wo(t,e):t;return ae(C.classMap,[n],e)}function YV(t,e,n,r,i){return hs(C.domElement,t,e,n,r,i)}function KV(t,e,n,r,i){return hs(C.domElementStart,t,e,n,r,i)}function QV(t){return ae(C.domElementEnd,[],t)}function XV(t,e,n,r){return hs(C.domElementContainerStart,t,null,e,n,r)}function ZV(t,e,n,r){return hs(C.domElementContainer,t,null,e,n,r)}function eB(){return ae(C.domElementContainerEnd,[],null)}function tB(t,e,n,r){let i=[I(t),e];return n!==null&&i.push(W(n)),ae(C.domListener,i,r)}function nB(t,e,n,r,i,s,o,a){return kT(C.domTemplate,t,e,n,r,i,s,o,a)}var Qb=[C.pipeBind1,C.pipeBind2,C.pipeBind3,C.pipeBind4];function rB(t,e,n){if(n.length<1||n.length>Qb.length)throw new Error("pipeBind() argument count out of bounds");let r=Qb[n.length-1];return W(r).callFn([I(t),I(e),...n])}function iB(t,e,n){return W(C.pipeBindV).callFn([I(t),I(e),n])}function sB(t,e,n){let r=MT(t,e);return wB(gB,[],r,n)}function oB(t,e){return ae(C.i18nExp,[t],e)}function aB(t,e){return ae(C.i18nApply,[I(t)],e)}function lB(t,e,n,r){return M0(C.domProperty,t,e,n,r)}function cB(t,e,n,r){let i=[e];n!==null&&i.push(n);let s=t==="enter"?C.animationEnter:C.animationLeave;return ae(s,i,r)}function uB(t,e,n,r){let s=[e instanceof Xe?wo(e,r):e];n!==null&&s.push(n);let o=t==="enter"?C.animationEnter:C.animationLeave;return ae(o,s,r)}function dB(t,e,n,r){let i=[e],s=t==="enter"?C.animationEnterListener:C.animationLeaveListener;return ae(s,i,r)}function fB(t,e,n){return ae(C.syntheticHostProperty,[I(t),e],n)}function hB(t,e,n){return N0(yB,[I(t),e],n,null)}function pB(t,e){return ae(C.attachSourceLocations,[I(t),e],null)}function MT(t,e){if(t.length<1||e.length!==t.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");let n=[];if(e.length===1&&t[0]===""&&t[1]==="")n.push(e[0]);else{let r;for(r=0;r<e.length;r++)n.push(I(t[r]),e[r]);n.push(I(t[r]))}return n}function wo(t,e){let n=MT(t.strings,t.expressions);return N0(vB,[],n,e)}function ae(t,e,n){let r=W(t).callFn(e,n);return er(new qt(r,n))}function mB(t,e,n){let r=[t];return e!==null&&r.push(e),ae(C.conditional,r,n)}var gB={constant:[C.textInterpolate,C.textInterpolate1,C.textInterpolate2,C.textInterpolate3,C.textInterpolate4,C.textInterpolate5,C.textInterpolate6,C.textInterpolate7,C.textInterpolate8],variable:C.textInterpolateV,mapping:t=>{if(t%2===0)throw new Error("Expected odd number of arguments");return(t-1)/2}},vB={constant:[C.interpolate,C.interpolate1,C.interpolate2,C.interpolate3,C.interpolate4,C.interpolate5,C.interpolate6,C.interpolate7,C.interpolate8],variable:C.interpolateV,mapping:t=>{if(t%2===0)throw new Error("Expected odd number of arguments");return(t-1)/2}},yB={constant:[C.pureFunction0,C.pureFunction1,C.pureFunction2,C.pureFunction3,C.pureFunction4,C.pureFunction5,C.pureFunction6,C.pureFunction7,C.pureFunction8],variable:C.pureFunctionV,mapping:t=>t};function N0(t,e,n,r){let i=t.mapping(n.length),s=n.at(-1);if(n.length>1&&s instanceof Ot&&s.value===""&&n.pop(),i<t.constant.length)return W(t.constant[i]).callFn([...e,...n],r);if(t.variable!==null)return W(t.variable).callFn([...e,Me(n)],r);throw new Error("AssertionError: unable to call variadic function")}function wB(t,e,n,r){return er(N0(t,e,n,r).toStmt())}var _B=new Map([["window",C.resolveWindow],["document",C.resolveDocument],["body",C.resolveBody]]),EB=new Map([["class","className"],["for","htmlFor"],["formaction","formAction"],["innerHtml","innerHTML"],["readonly","readOnly"],["tabindex","tabIndex"]]);function CB(t){for(let e of t.units)SB(e,e.create),R0(e,e.update)}function SB(t,e){for(let n of e)switch(st(n,NT,xe.None),n.kind){case v.Text:N.replace(n,EV(n.handle.slot,n.initialValue,n.sourceSpan));break;case v.ElementStart:N.replace(n,t.job.mode===fn.DomOnly?KV(n.handle.slot,n.tag,n.attributes,n.localRefs,n.startSourceSpan):tV(n.handle.slot,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.Element:N.replace(n,t.job.mode===fn.DomOnly?YV(n.handle.slot,n.tag,n.attributes,n.localRefs,n.wholeSourceSpan):eV(n.handle.slot,n.tag,n.attributes,n.localRefs,n.wholeSourceSpan));break;case v.ElementEnd:N.replace(n,t.job.mode===fn.DomOnly?QV(n.sourceSpan):nV(n.sourceSpan));break;case v.ContainerStart:N.replace(n,t.job.mode===fn.DomOnly?XV(n.handle.slot,n.attributes,n.localRefs,n.startSourceSpan):rV(n.handle.slot,n.attributes,n.localRefs,n.startSourceSpan));break;case v.Container:N.replace(n,t.job.mode===fn.DomOnly?ZV(n.handle.slot,n.attributes,n.localRefs,n.wholeSourceSpan):iV(n.handle.slot,n.attributes,n.localRefs,n.wholeSourceSpan));break;case v.ContainerEnd:N.replace(n,t.job.mode===fn.DomOnly?eB():sV());break;case v.I18nStart:N.replace(n,IV(n.handle.slot,n.messageIndex,n.subTemplateIndex,n.sourceSpan));break;case v.I18nEnd:N.replace(n,FV(n.sourceSpan));break;case v.I18n:N.replace(n,OV(n.handle.slot,n.messageIndex,n.subTemplateIndex,n.sourceSpan));break;case v.I18nAttributes:if(n.i18nAttributesConfig===null)throw new Error("AssertionError: i18nAttributesConfig was not set");N.replace(n,VV(n.handle.slot,n.i18nAttributesConfig));break;case v.Template:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let r=t.job.views.get(n.xref);N.replace(n,n.templateKind===vn.Block||t.job.mode===fn.DomOnly?nB(n.handle.slot,Ee(r.fnName),r.decls,r.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan):oV(n.handle.slot,Ee(r.fnName),r.decls,r.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.DisableBindings:N.replace(n,aV());break;case v.EnableBindings:N.replace(n,lV());break;case v.Pipe:N.replace(n,dV(n.handle.slot,n.name));break;case v.DeclareLet:N.replace(n,RV(n.handle.slot,n.sourceSpan));break;case v.AnimationString:N.replace(n,uB(n.animationKind,n.expression,n.sanitizer,n.sourceSpan));break;case v.Animation:let i=hf(t,n.handlerFnName,n.handlerOps,!1);N.replace(n,cB(n.animationKind,i,n.sanitizer,n.sourceSpan));break;case v.AnimationListener:let s=hf(t,n.handlerFnName,n.handlerOps,n.consumesDollarEvent);N.replace(n,dB(n.animationKind,s,null,n.sourceSpan));break;case v.Listener:let o=hf(t,n.handlerFnName,n.handlerOps,n.consumesDollarEvent),a=n.eventTarget?_B.get(n.eventTarget):null;if(a===void 0)throw new Error(`Unexpected global target '${n.eventTarget}' defined for '${n.name}' event. Supported list of global targets: window,document,body.`);N.replace(n,t.job.mode===fn.DomOnly&&!n.hostListener&&!n.isLegacyAnimationListener?tB(n.name,o,a,n.sourceSpan):cV(n.name,o,a,n.hostListener&&n.isLegacyAnimationListener,n.sourceSpan));break;case v.TwoWayListener:N.replace(n,uV(n.name,hf(t,n.handlerFnName,n.handlerOps,!0),n.sourceSpan));break;case v.Variable:if(n.variable.name===null)throw new Error(`AssertionError: unnamed variable ${n.xref}`);N.replace(n,er(new _t(n.variable.name,n.initializer,void 0,Rt.Final)));break;case v.Namespace:switch(n.active){case Gt.HTML:N.replace(n,fV());break;case Gt.SVG:N.replace(n,hV());break;case Gt.Math:N.replace(n,pV());break}break;case v.Defer:let l=!!n.loadingMinimumTime||!!n.loadingAfterTime||!!n.placeholderMinimumTime;N.replace(n,CV(n.handle.slot,n.mainSlot.slot,n.resolverFn,n.loadingSlot?.slot??null,n.placeholderSlot?.slot??null,n.errorSlot?.slot??null,n.loadingConfig,n.placeholderConfig,l,n.sourceSpan,n.flags));break;case v.DeferOn:let c=[];switch(n.trigger.kind){case Pe.Never:case Pe.Idle:case Pe.Immediate:break;case Pe.Timer:c=[I(n.trigger.delay)];break;case Pe.Viewport:n.modifier==="hydrate"?c=n.trigger.options?[n.trigger.options]:[]:(c=[I(n.trigger.targetSlot?.slot??null)],n.trigger.targetSlotViewSteps!==0?c.push(I(n.trigger.targetSlotViewSteps)):n.trigger.options&&c.push(I(null)),n.trigger.options&&c.push(n.trigger.options));break;case Pe.Interaction:case Pe.Hover:n.modifier==="hydrate"?c=[]:(c=[I(n.trigger.targetSlot?.slot??null)],n.trigger.targetSlotViewSteps!==0&&c.push(I(n.trigger.targetSlotViewSteps)));break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${n.trigger.kind}`)}N.replace(n,bV(n.trigger.kind,c,n.modifier,n.sourceSpan));break;case v.ProjectionDef:N.replace(n,xV(n.def));break;case v.Projection:if(n.handle.slot===null)throw new Error("No slot was assigned for project instruction");let u=null,h=null,p=null;if(n.fallbackView!==null){if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");let T=t.job.views.get(n.fallbackView);if(T===void 0)throw new Error("AssertionError: projection had fallback view xref, but fallback view was not found");if(T.fnName===null||T.decls===null||T.vars===null)throw new Error("AssertionError: expected projection fallback view to have been named and counted");u=T.fnName,h=T.decls,p=T.vars}N.replace(n,TV(n.handle.slot,n.projectionSlotIndex,n.attributes,u,h,p,n.sourceSpan));break;case v.ConditionalCreate:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let m=t.job.views.get(n.xref);N.replace(n,AV(n.handle.slot,Ee(m.fnName),m.decls,m.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.ConditionalBranchCreate:if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let g=t.job.views.get(n.xref);N.replace(n,DV(n.handle.slot,Ee(g.fnName),g.decls,g.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.RepeaterCreate:if(n.handle.slot===null)throw new Error("No slot was assigned for repeater instruction");if(!(t instanceof Qn))throw new Error("AssertionError: must be compiling a component");let y=t.job.views.get(n.xref);if(y.fnName===null)throw new Error("AssertionError: expected repeater primary view to have been named");let _=null,w=null,A=null;if(n.emptyView!==null){let T=t.job.views.get(n.emptyView);if(T===void 0)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(T.fnName===null||T.decls===null||T.vars===null)throw new Error("AssertionError: expected repeater empty view to have been named and counted");_=T.fnName,w=T.decls,A=T.vars}N.replace(n,kV(n.handle.slot,y.fnName,n.decls,n.vars,n.tag,n.attributes,TB(t,n),n.usesComponentInstance,_,w,A,n.emptyTag,n.emptyAttributes,n.wholeSourceSpan));break;case v.SourceLocation:let k=Me(n.locations.map(({targetSlot:T,offset:L,line:R,column:$})=>{if(T.slot===null)throw new Error("No slot was assigned for source location");return Me([I(T.slot),I(L),I(R),I($)])}));N.replace(n,pB(n.templatePath,k));break;case v.ControlCreate:N.replace(n,HV(n.sourceSpan));break;case v.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${v[n.kind]}`)}}function R0(t,e){for(let n of e)switch(st(n,NT,xe.None),n.kind){case v.Advance:N.replace(n,mV(n.delta,n.sourceSpan));break;case v.Property:N.replace(n,t.job.mode===fn.DomOnly&&n.bindingKind!==U.LegacyAnimation&&n.bindingKind!==U.Animation?Xb(n):bB(n));break;case v.Control:N.replace(n,xB(n));break;case v.TwoWayProperty:N.replace(n,GV(n.name,n.expression,n.sanitizer,n.sourceSpan));break;case v.StyleProp:N.replace(n,jV(n.name,n.expression,n.unit,n.sourceSpan));break;case v.ClassProp:N.replace(n,WV(n.name,n.expression,n.sourceSpan));break;case v.StyleMap:N.replace(n,zV(n.expression,n.sourceSpan));break;case v.ClassMap:N.replace(n,JV(n.expression,n.sourceSpan));break;case v.I18nExpression:N.replace(n,oB(n.expression,n.sourceSpan));break;case v.I18nApply:N.replace(n,aB(n.handle.slot,n.sourceSpan));break;case v.InterpolateText:N.replace(n,sB(n.interpolation.strings,n.interpolation.expressions,n.sourceSpan));break;case v.Attribute:N.replace(n,qV(n.name,n.expression,n.sanitizer,n.namespace,n.sourceSpan));break;case v.DomProperty:if(n.expression instanceof Xe)throw new Error("not yet handled");n.bindingKind===U.LegacyAnimation||n.bindingKind===U.Animation?N.replace(n,fB(n.name,n.expression,n.sourceSpan)):N.replace(n,Xb(n));break;case v.Variable:if(n.variable.name===null)throw new Error(`AssertionError: unnamed variable ${n.xref}`);N.replace(n,er(new _t(n.variable.name,n.initializer,void 0,Rt.Final)));break;case v.Conditional:if(n.processed===null)throw new Error("Conditional test was not set.");N.replace(n,mB(n.processed,n.contextValue,n.sourceSpan));break;case v.Repeater:N.replace(n,MV(n.collection,n.sourceSpan));break;case v.DeferWhen:N.replace(n,NV(n.modifier,n.expr,n.sourceSpan));break;case v.StoreLet:throw new Error(`AssertionError: unexpected storeLet ${n.declaredName}`);case v.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${v[n.kind]}`)}}function Xb(t){return lB(EB.get(t.name)??t.name,t.expression,t.sanitizer,t.sourceSpan)}function bB(t){return gT(t.name)?BV(t.name,t.expression,t.sourceSpan):UV(t.name,t.expression,t.sanitizer,t.sourceSpan)}function xB(t){return $V(t.name,t.expression,t.sanitizer,t.sourceSpan)}function NT(t){if(!ai(t))return t;switch(t.kind){case z.NextContext:return vV(t.steps);case z.Reference:return gV(t.targetSlot.slot+1+t.offset);case z.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${t.name}`);case z.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case z.RestoreView:if(typeof t.view=="number")throw new Error("AssertionError: unresolved RestoreView");return wV(t.view);case z.ResetView:return _V(t.expr);case z.GetCurrentView:return yV();case z.ReadVariable:if(t.name===null)throw new Error(`Read of unnamed variable ${t.xref}`);return Ee(t.name);case z.ReadTemporaryExpr:if(t.name===null)throw new Error(`Read of unnamed temporary ${t.xref}`);return Ee(t.name);case z.AssignTemporaryExpr:if(t.name===null)throw new Error(`Assign of unnamed temporary ${t.xref}`);return Ee(t.name).set(t.expr);case z.PureFunctionExpr:if(t.fn===null)throw new Error("AssertionError: expected PureFunctions to have been extracted");return hB(t.varOffset,t.fn,t.args);case z.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case z.PipeBinding:return rB(t.targetSlot.slot,t.varOffset,t.args);case z.PipeBindingVariadic:return iB(t.targetSlot.slot,t.varOffset,t.args);case z.SlotLiteralExpr:return I(t.slot.slot);case z.ContextLetReference:return LV(t.targetSlot.slot);case z.StoreLet:return PV(t.value,t.sourceSpan);case z.TrackContext:return Ee("this");default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${z[t.kind]}`)}}function hf(t,e,n,r){R0(t,n);let i=[];for(let o of n){if(o.kind!==v.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${v[o.kind]}`);i.push(o.statement)}let s=[];return r&&s.push(new Nt("$event")),ts(s,i,void 0,void 0,e)}function TB(t,e){if(e.trackByFn!==null)return e.trackByFn;let n=[new Nt("$index"),new Nt("$item")],r;if(e.trackByOps===null)r=e.usesComponentInstance?ts(n,[new Pt(e.track)]):ri(n,e.track);else{R0(t,e.trackByOps);let i=[];for(let s of e.trackByOps){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${v[s.kind]}`);i.push(s.statement)}r=e.usesComponentInstance||i.length!==1||!(i[0]instanceof Pt)?ts(n,i):ri(n,i[0].value)}return e.trackByFn=t.job.pool.getSharedFunctionReference(r,"_forTrack"),e.trackByFn}function IB(t){for(let e of t.units)for(let n of e.update)switch(n.kind){case v.Attribute:case v.Binding:case v.ClassProp:case v.ClassMap:case v.Property:case v.StyleProp:case v.StyleMap:n.expression instanceof su&&N.remove(n);break}}function AB(t){for(let e of t.units)for(let n of e.create)switch(n.kind){case v.I18nContext:N.remove(n);break;case v.I18nStart:n.context=null;break}}function DB(t){for(let e of t.units)for(let n of e.update){if(n.kind!==v.Variable||n.variable.kind!==It.Identifier||!(n.initializer instanceof nu))continue;let r=n.variable.identifier,i=n;for(;i&&i.kind!==v.ListEnd;)st(i,s=>s instanceof kt&&s.name===r?I(void 0):s,xe.None),i=i.prev}}function kB(t){for(let e of t.units){let n=new Set;for(let r of e.update)r.kind===v.I18nExpression&&n.add(r.i18nOwner);for(let r of e.create)switch(r.kind){case v.I18nAttributes:if(n.has(r.xref))continue;N.remove(r)}}}function MB(t){for(let e of t.units)Ih(e,e.create),Ih(e,e.update)}function Ih(t,e){let n=new Map;n.set(t.xref,Ee("ctx"));for(let r of e)switch(r.kind){case v.Variable:r.variable.kind===It.Context&&n.set(r.variable.view,new Ti(r.xref));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:Ih(t,r.handlerOps);break;case v.RepeaterCreate:r.trackByOps!==null&&Ih(t,r.trackByOps);break}t===t.job.root&&n.set(t.xref,Ee("ctx"));for(let r of e)st(r,i=>{if(i instanceof as){if(!n.has(i.view))throw new Error(`No context found for reference to view ${i.view} from view ${t.xref}`);return n.get(i.view)}else return i},xe.None)}function NB(t){for(let e of t.units)for(let n of e.create)if(n.kind===v.Defer){if(n.resolverFn!==null)continue;if(n.ownResolverFn!==null){if(n.handle.slot===null)throw new Error("AssertionError: slot must be assigned before extracting defer deps functions");let r=e.fnName?.replace("_Template","");n.resolverFn=t.pool.getSharedFunctionReference(n.ownResolverFn,`${r}_Defer_${n.handle.slot}_DepsFn`,!1)}}}function RB(t){for(let e of t.units)Zb(e.create),Zb(e.update)}function Zb(t){for(let e of t)(e.kind===v.Listener||e.kind===v.TwoWayListener||e.kind===v.AnimationListener)&&st(e,n=>n instanceof kt&&n.name==="$event"?((e.kind===v.Listener||e.kind===v.AnimationListener)&&(e.consumesDollarEvent=!0),new yr(n.name)):n,xe.InChildOperation)}function PB(t){let e=new Map,n=new Map;for(let r of t.units)for(let i of r.create)switch(i.kind){case v.I18nContext:e.set(i.xref,i);break;case v.ElementStart:n.set(i.xref,i);break}Wr(t,t.root,e,n)}function Wr(t,e,n,r,i){let s=null,o=new Map;for(let a of e.create)switch(a.kind){case v.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");s={i18nBlock:a,i18nContext:n.get(a.context)};break;case v.I18nEnd:s=null;break;case v.ElementStart:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");ex(a,s.i18nContext,s.i18nBlock,i),i&&a.i18nPlaceholder.closeName&&o.set(a.xref,i),i=void 0}break;case v.ElementEnd:let l=r.get(a.xref);if(l&&l.i18nPlaceholder!==void 0){if(s===null)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");tx(l,s.i18nContext,s.i18nBlock,o.get(a.xref)),o.delete(a.xref)}break;case v.Projection:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");ex(a,s.i18nContext,s.i18nBlock,i),tx(a,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.fallbackView!==null){let p=t.views.get(a.fallbackView);if(a.fallbackViewI18nPlaceholder===void 0)Wr(t,p,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");pf(t,p,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Wr(t,p,n,r),mf(t,p,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:let c=t.views.get(a.xref);if(a.i18nPlaceholder===void 0)Wr(t,c,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===vn.Structural?Wr(t,c,n,r,a):(pf(t,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Wr(t,c,n,r),mf(t,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0)}break;case v.RepeaterCreate:if(i!==void 0)throw Error("AssertionError: Unexpected structural directive associated with @for block");let u=a.handle.slot+1,h=t.views.get(a.xref);if(a.i18nPlaceholder===void 0)Wr(t,h,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");pf(t,h,u,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Wr(t,h,n,r),mf(t,h,u,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.emptyView!==null){let p=a.handle.slot+2,m=t.views.get(a.emptyView);if(a.emptyI18nPlaceholder===void 0)Wr(t,m,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");pf(t,m,p,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Wr(t,m,n,r),mf(t,m,p,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break}}function ex(t,e,n,r){let{startName:i,closeName:s}=t.i18nPlaceholder,o=Ue.ElementTag|Ue.OpenTag,a=t.handle.slot;r!==void 0&&(o|=Ue.TemplateTag,a={element:a,template:r.handle.slot}),s||(o|=Ue.CloseTag),za(e.params,i,a,n.subTemplateIndex,o)}function tx(t,e,n,r){let{closeName:i}=t.i18nPlaceholder;if(i){let s=Ue.ElementTag|Ue.CloseTag,o=t.handle.slot;r!==void 0&&(s|=Ue.TemplateTag,o={element:o,template:r.handle.slot}),za(e.params,i,o,n.subTemplateIndex,s)}}function pf(t,e,n,r,i,s,o){let{startName:a,closeName:l}=r,c=Ue.TemplateTag|Ue.OpenTag;l||(c|=Ue.CloseTag),o!==void 0&&za(i.params,a,o.handle.slot,s.subTemplateIndex,c),za(i.params,a,n,RT(t,s,e),c)}function mf(t,e,n,r,i,s,o){let{closeName:a}=r,l=Ue.TemplateTag|Ue.CloseTag;a&&(za(i.params,a,n,RT(t,s,e),l),o!==void 0&&za(i.params,a,o.handle.slot,s.subTemplateIndex,l))}function RT(t,e,n){for(let r of n.create)if(r.kind===v.I18nStart)return r.subTemplateIndex;return e.subTemplateIndex}function za(t,e,n,r,i){let s=t.get(e)??[];s.push({value:n,subTemplateIndex:r,flags:i}),t.set(e,s)}function LB(t){let e=new Map,n=new Map,r=new Map;for(let o of t.units)for(let a of o.create)switch(a.kind){case v.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case v.I18nContext:n.set(a.xref,a);break;case v.IcuPlaceholder:r.set(a.xref,a);break}let i=new Map,s=o=>o.usage===Ya.I18nText?o.i18nOwner:o.context;for(let o of t.units)for(let a of o.update)if(a.kind===v.I18nExpression){let l=i.get(s(a))||0,c=e.get(a.i18nOwner)??null,u={value:l,subTemplateIndex:c,flags:Ue.ExpressionIndex};OB(a,u,n,r),i.set(s(a),l+1)}}function OB(t,e,n,r){if(t.i18nPlaceholder!==null){let i=n.get(t.context),s=t.resolutionTime===eu.Creation?i.params:i.postprocessingParams,o=s.get(t.i18nPlaceholder)||[];o.push(e),s.set(t.i18nPlaceholder,o)}t.icuPlaceholder!==null&&r.get(t.icuPlaceholder)?.expressionPlaceholders.push(e)}function FB(t){for(let e of t.units)Ah(e,e.create,null),Ah(e,e.update,null)}function Ah(t,e,n){let r=new Map,i=new Map;for(let s of e)switch(s.kind){case v.Variable:switch(s.variable.kind){case It.Identifier:if(s.variable.local){if(i.has(s.variable.identifier))continue;i.set(s.variable.identifier,s.xref)}else if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case It.Alias:if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case It.SavedView:n={view:s.variable.view,variable:s.xref};break}break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:Ah(t,s.handlerOps,n);break;case v.RepeaterCreate:s.trackByOps!==null&&Ah(t,s.trackByOps,n);break}for(let s of e)s.kind==v.Listener||s.kind===v.TwoWayListener||s.kind===v.Animation||s.kind===v.AnimationListener||st(s,o=>{if(o instanceof kt)return i.has(o.name)?new Ti(i.get(o.name)):r.has(o.name)?new Ti(r.get(o.name)):new Ln(new as(t.job.root.xref),o.name);if(o instanceof uh&&typeof o.view=="number"){if(n===null||n.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${t.xref}`);return o.view=new Ti(n.variable),o}else return o},xe.None);for(let s of e)At(s,o=>{if(o instanceof kt)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}var VB=new Map([[Le.HTML,C.sanitizeHtml],[Le.RESOURCE_URL,C.sanitizeResourceUrl],[Le.SCRIPT,C.sanitizeScript],[Le.STYLE,C.sanitizeStyle],[Le.URL,C.sanitizeUrl],[Le.ATTRIBUTE_NO_BINDING,C.validateAttribute]]),BB=new Map([[Le.HTML,C.trustConstantHtml],[Le.RESOURCE_URL,C.trustConstantResourceUrl]]);function UB(t){for(let e of t.units){if(t.kind!==F.Host){for(let n of e.create)if(n.kind===v.ExtractedAttribute){let r=BB.get(nx(n.securityContext))??null;n.trustedValueFn=r!==null?W(r):null}}for(let n of e.update)switch(n.kind){case v.Property:case v.Attribute:case v.DomProperty:let r=null;Array.isArray(n.securityContext)&&n.securityContext.length===2&&n.securityContext.includes(Le.URL)&&n.securityContext.includes(Le.RESOURCE_URL)?r=C.sanitizeUrlOrResourceUrl:r=VB.get(nx(n.securityContext))??null,n.sanitizer=r!==null?W(r):null;break}}}function nx(t){if(Array.isArray(t)){if(t.length>1)throw Error("AssertionError: Ambiguous security context");return t[0]||Le.NONE}return t}function $B(t){for(let e of t.units){e.create.prepend([Ki(e.job.allocateXrefId(),{kind:It.SavedView,name:null,view:e.xref},new _y,Kn.None)]);for(let n of e.create){if(n.kind!==v.Listener&&n.kind!==v.TwoWayListener&&n.kind!==v.Animation&&n.kind!==v.AnimationListener)continue;let r=e!==t.root;if(!r)for(let i of n.handlerOps)At(i,s=>{(s instanceof lh||s instanceof ru)&&(r=!0)});r&&HB(e,n)}}}function HB(t,e){e.handlerOps.prepend([Ki(t.job.allocateXrefId(),{kind:It.Context,name:null,view:t.xref},new uh(t.xref),Kn.None)]);for(let n of e.handlerOps)n.kind===v.Statement&&n.statement instanceof Pt&&(n.statement.value=new Ey(n.statement.value))}function GB(t){let e=new Map;for(let n of t.units){let r=0;for(let i of n.create)Qa(i)&&(i.handle.slot=r,e.set(i.xref,i.handle.slot),r+=i.numSlotsUsed);n.decls=r}for(let n of t.units)for(let r of n.ops())if(r.kind===v.Template||r.kind===v.ConditionalCreate||r.kind===v.ConditionalBranchCreate||r.kind===v.RepeaterCreate){let i=t.views.get(r.xref);r.decls=i.decls}}function qB(t){let e=new Set,n=new Map;for(let r of t.units)for(let i of r.ops())i.kind===v.DeclareLet&&n.set(i.xref,i),At(i,s=>{s instanceof ru&&e.add(s.target)});for(let r of t.units)for(let i of r.update)st(i,s=>s instanceof nu&&!e.has(s.target)?(jB(s)||N.remove(n.get(s.target)),s.value):s,xe.None)}function jB(t){let e=!1;return V(t,n=>((n instanceof go||n instanceof iu)&&(e=!0),n),xe.None),e}function WB(t){let e=new Set;for(let n of t.units)for(let r of n.ops())At(r,i=>{if(i instanceof Se)switch(i.operator){case P.Exponentiation:zB(i,e);break;case P.NullishCoalesce:JB(i,e);break;case P.And:case P.Or:YB(i,e)}});for(let n of t.units)for(let r of n.ops())st(r,i=>i instanceof wr?e.has(i)?i:i.expr:i,xe.None)}function zB(t,e){t.lhs instanceof wr&&t.lhs.expr instanceof so&&e.add(t.lhs)}function JB(t,e){t.lhs instanceof wr&&(rx(t.lhs.expr)||t.lhs.expr instanceof ti)&&e.add(t.lhs),t.rhs instanceof wr&&(rx(t.rhs.expr)||t.rhs.expr instanceof ti)&&e.add(t.rhs)}function YB(t,e){t.lhs instanceof wr&&t.lhs.expr instanceof Se&&t.lhs.expr.operator===P.NullishCoalesce&&e.add(t.lhs)}function rx(t){return t instanceof Se&&(t.operator===P.And||t.operator===P.Or)}function KB(t){for(let e of t.units)for(let n of e.update)if(n.kind===v.Binding)switch(n.bindingKind){case U.ClassName:if(n.expression instanceof Xe)throw new Error("Unexpected interpolation in ClassName binding");N.replace(n,EP(n.target,n.name,n.expression,n.sourceSpan));break;case U.StyleProperty:N.replace(n,_P(n.target,n.name,n.expression,n.unit,n.sourceSpan));break;case U.Property:case U.Template:n.name==="style"?N.replace(n,CP(n.target,n.expression,n.sourceSpan)):n.name==="class"&&N.replace(n,SP(n.target,n.expression,n.sourceSpan));break}}function QB(t){for(let e of t.units)e.create.prepend(Dh(e.create)),e.update.prepend(Dh(e.update))}function Dh(t){let e=0,n=[];for(let r of t){let i=new Map;At(r,(c,u)=>{u&xe.InChildOperation||c instanceof cs&&i.set(c.xref,c)});let s=0,o=new Set,a=new Set,l=new Map;At(r,(c,u)=>{u&xe.InChildOperation||(c instanceof li?(o.has(c.xref)||(o.add(c.xref),l.set(c.xref,`tmp_${e}_${s++}`)),ix(l,c)):c instanceof cs&&(i.get(c.xref)===c&&(a.add(c.xref),s--),ix(l,c)))}),n.push(...Array.from(new Set(l.values())).map(c=>er(new _t(c)))),e++,r.kind===v.Listener||r.kind===v.Animation||r.kind===v.AnimationListener||r.kind===v.TwoWayListener?r.handlerOps.prepend(Dh(r.handlerOps)):r.kind===v.RepeaterCreate&&r.trackByOps!==null&&r.trackByOps.prepend(Dh(r.trackByOps))}return n}function ix(t,e){let n=t.get(e.xref);if(n===void 0)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=n}function XB(t){for(let e of t.units)for(let n of e.create)if(n.kind===v.RepeaterCreate)if(n.track instanceof yr&&n.track.name==="$index")n.trackByFn=W(C.repeaterTrackByIndex);else if(n.track instanceof yr&&n.track.name==="$item")n.trackByFn=W(C.repeaterTrackByIdentity);else if(ZB(t.root.xref,n.track))n.usesComponentInstance=!0,n.track.receiver.receiver.view===e.xref?n.trackByFn=n.track.receiver:(n.trackByFn=W(C.componentInstance).callFn([]).prop(n.track.receiver.name),n.track=n.trackByFn);else{n.track=V(n.track,i=>{if(i instanceof go||i instanceof iu)throw new Error("Illegal State: Pipes are not allowed in this context");return i instanceof as?(n.usesComponentInstance=!0,new wy(i.view)):i},xe.None);let r=new N;r.push(er(new Pt(n.track,n.track.sourceSpan))),n.trackByOps=r}}function ZB(t,e){if(!(e instanceof yn)||e.args.length===0||e.args.length>2||!(e.receiver instanceof Ln&&e.receiver.receiver instanceof as)||e.receiver.receiver.view!==t)return!1;let[n,r]=e.args;return!(n instanceof yr)||n.name!=="$index"?!1:e.args.length===1?!0:!(!(r instanceof yr)||r.name!=="$item")}function eU(t){for(let e of t.units)for(let n of e.create)n.kind===v.RepeaterCreate&&(n.track=V(n.track,r=>{if(r instanceof kt){if(n.varNames.$index.has(r.name))return Ee("$index");if(r.name===n.varNames.$implicit)return Ee("$item")}return r},xe.None))}function tU(t){for(let e of t.units)for(let n of e.create)n.kind===v.TwoWayListener&&st(n,r=>{if(!(r instanceof dh))return r;let{target:i,value:s}=r;if(i instanceof Ln||i instanceof Ii)return Kb(i,s).or(i.set(s));if(i instanceof Ti)return Kb(i,s);throw new Error("Unsupported expression in two-way action binding.")},xe.InChildOperation)}function nU(t){for(let e of t.units){let n=0;for(let r of e.ops())bv(r)&&(n+=rU(r));for(let r of e.ops())At(r,i=>{ai(i)&&(t.compatibility===Fn.TemplateDefinitionBuilder&&i instanceof mo||(fb(i)&&(i.varOffset=n),bv(i)&&(n+=sx(i))))});if(t.compatibility===Fn.TemplateDefinitionBuilder)for(let r of e.ops())At(r,i=>{!ai(i)||!(i instanceof mo)||(fb(i)&&(i.varOffset=n),bv(i)&&(n+=sx(i)))});e.vars=n}if(t instanceof au)for(let e of t.units)for(let n of e.create){if(n.kind!==v.Template&&n.kind!==v.RepeaterCreate&&n.kind!==v.ConditionalCreate&&n.kind!==v.ConditionalBranchCreate)continue;let r=t.views.get(n.xref);n.vars=r.vars}}function rU(t){let e;switch(t.kind){case v.Attribute:return e=1,t.expression instanceof Xe&&!iU(t.expression)&&(e+=t.expression.expressions.length),e;case v.Property:case v.DomProperty:return e=1,t.expression instanceof Xe&&(e+=t.expression.expressions.length),e;case v.Control:return 2;case v.TwoWayProperty:return 1;case v.StyleProp:case v.ClassProp:case v.StyleMap:case v.ClassMap:return e=2,t.expression instanceof Xe&&(e+=t.expression.expressions.length),e;case v.InterpolateText:return t.interpolation.expressions.length;case v.I18nExpression:case v.Conditional:case v.DeferWhen:case v.StoreLet:return 1;case v.RepeaterCreate:return t.emptyView?1:0;default:throw new Error(`Unhandled op: ${v[t.kind]}`)}}function sx(t){switch(t.kind){case z.PureFunctionExpr:return 1+t.args.length;case z.PipeBinding:return 1+t.args.length;case z.PipeBindingVariadic:return 1+t.numArgs;case z.StoreLet:return 1;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${t.constructor.name}`)}}function iU(t){return!(t.expressions.length!==1||t.strings.length!==2||t.strings[0]!==""||t.strings[1]!=="")}function sU(t){for(let e of t.units){gf(e.create),gf(e.update);for(let n of e.create)n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener?gf(n.handlerOps):n.kind===v.RepeaterCreate&&n.trackByOps!==null&&gf(n.trackByOps);vf(e.create,t.compatibility),vf(e.update,t.compatibility);for(let n of e.create)n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener?vf(n.handlerOps,t.compatibility):n.kind===v.RepeaterCreate&&n.trackByOps!==null&&vf(n.trackByOps,t.compatibility)}}var wt=(function(t){return t[t.None=0]="None",t[t.ViewContextRead=1]="ViewContextRead",t[t.ViewContextWrite=2]="ViewContextWrite",t[t.SideEffectful=4]="SideEffectful",t})(wt||{});function gf(t){let e=new Map;for(let n of t)n.kind===v.Variable&&n.flags&Kn.AlwaysInline&&(At(n,r=>{if(ai(r)&&P0(r)!==wt.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(n.xref,n)),st(n,r=>r instanceof Ti&&e.has(r.xref)?e.get(r.xref).initializer.clone():r,xe.None);for(let n of e.values())N.remove(n)}function vf(t,e){let n=new Map,r=new Map,i=new Set,s=new Map;for(let c of t){if(c.kind===v.Variable){if(n.has(c.xref)||r.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);n.set(c.xref,c),r.set(c.xref,0)}s.set(c,oU(c)),aU(c,r,i)}let o=!1;for(let c of t.reversed()){let u=s.get(c);if(c.kind===v.Variable&&r.get(c.xref)===0){if(o&&u.fences&wt.ViewContextWrite||u.fences&wt.SideEffectful){let h=er(c.initializer.toStmt());s.set(h,u),N.replace(c,h)}else lU(c,r),N.remove(c);s.delete(c),n.delete(c.xref),r.delete(c.xref);continue}u.fences&wt.ViewContextRead&&(o=!0)}let a=[];for(let[c,u]of r){let p=!!(n.get(c).flags&Kn.AlwaysInline);u!==1||p||i.has(c)||a.push(c)}let l;for(;l=a.pop();){let c=n.get(l),u=s.get(c);if(!!(c.flags&Kn.AlwaysInline))throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let p=c.next;p.kind!==v.ListEnd;p=p.next){let m=s.get(p);if(m.variablesUsed.has(l)){if(e===Fn.TemplateDefinitionBuilder&&!uU(c,p))break;if(cU(l,c.initializer,p,u.fences)){m.variablesUsed.delete(l);for(let g of u.variablesUsed)m.variablesUsed.add(g);m.fences|=u.fences,n.delete(l),r.delete(l),s.delete(c),N.remove(c)}break}if(!PT(m.fences,u.fences))break}}}function P0(t){switch(t.kind){case z.NextContext:return wt.ViewContextRead|wt.ViewContextWrite;case z.RestoreView:return wt.ViewContextRead|wt.ViewContextWrite|wt.SideEffectful;case z.StoreLet:return wt.SideEffectful;case z.Reference:case z.ContextLetReference:return wt.ViewContextRead;default:return wt.None}}function oU(t){let e=wt.None,n=new Set;return At(t,r=>{ai(r)&&(r.kind===z.ReadVariable?n.add(r.xref):e|=P0(r))}),{fences:e,variablesUsed:n}}function aU(t,e,n){At(t,(r,i)=>{if(!ai(r)||r.kind!==z.ReadVariable)return;let s=e.get(r.xref);s!==void 0&&(e.set(r.xref,s+1),i&xe.InChildOperation&&n.add(r.xref))})}function lU(t,e){At(t,n=>{if(!ai(n)||n.kind!==z.ReadVariable)return;let r=e.get(n.xref);if(r!==void 0){if(r===0)throw new Error(`Inaccurate variable count: ${n.xref} - found another read but count is already 0`);e.set(n.xref,r-1)}})}function PT(t,e){if(t&wt.ViewContextWrite){if(e&wt.ViewContextRead)return!1}else if(t&wt.ViewContextRead&&e&wt.ViewContextWrite)return!1;return!0}function cU(t,e,n,r){let i=!1,s=!0;return st(n,(o,a)=>{if(!ai(o)||i||!s)return o;if(a&xe.InChildOperation&&r&wt.ViewContextRead)return o;switch(o.kind){case z.ReadVariable:if(o.xref===t)return i=!0,e;break;default:let l=P0(o);s=s&&PT(l,r);break}return o},xe.None),i}function uU(t,e){switch(t.variable.kind){case It.Identifier:return t.initializer instanceof yr&&t.initializer.name==="ctx";case It.Context:return e.kind===v.Variable;default:return!0}}function dU(t){for(let e of t.units){let n=null,r=null;for(let i of e.create)switch(i.kind){case v.I18nStart:n=i;break;case v.I18nEnd:n=null;break;case v.IcuStart:n===null&&(r=t.allocateXrefId(),N.insertBefore(Gh(r,i.message,void 0,null),i));break;case v.IcuEnd:r!==null&&(N.insertAfter(qh(r,null),i),r=null);break}}}var fU=[{kind:F.Tmpl,fn:UF},{kind:F.Both,fn:ZF},{kind:F.Host,fn:ZL},{kind:F.Tmpl,fn:SF},{kind:F.Tmpl,fn:zF},{kind:F.Tmpl,fn:dU},{kind:F.Both,fn:_L},{kind:F.Both,fn:KB},{kind:F.Both,fn:sL},{kind:F.Both,fn:gL},{kind:F.Both,fn:nL},{kind:F.Tmpl,fn:wL},{kind:F.Both,fn:xF},{kind:F.Tmpl,fn:IB},{kind:F.Both,fn:lL},{kind:F.Both,fn:BF},{kind:F.Tmpl,fn:cL},{kind:F.Tmpl,fn:GF},{kind:F.Tmpl,fn:EL},{kind:F.Tmpl,fn:WF},{kind:F.Both,fn:KF},{kind:F.Tmpl,fn:JL},{kind:F.Tmpl,fn:zL},{kind:F.Tmpl,fn:YL},{kind:F.Tmpl,fn:$B},{kind:F.Both,fn:KP},{kind:F.Both,fn:RB},{kind:F.Tmpl,fn:eU},{kind:F.Tmpl,fn:DB},{kind:F.Both,fn:FB},{kind:F.Tmpl,fn:CL},{kind:F.Tmpl,fn:tU},{kind:F.Tmpl,fn:XB},{kind:F.Both,fn:MB},{kind:F.Both,fn:UB},{kind:F.Tmpl,fn:EF},{kind:F.Both,fn:IL},{kind:F.Both,fn:WB},{kind:F.Both,fn:QB},{kind:F.Both,fn:sU},{kind:F.Both,fn:qB},{kind:F.Tmpl,fn:_F},{kind:F.Tmpl,fn:yL},{kind:F.Tmpl,fn:kB},{kind:F.Tmpl,fn:eL},{kind:F.Tmpl,fn:XP},{kind:F.Tmpl,fn:GB},{kind:F.Tmpl,fn:PB},{kind:F.Tmpl,fn:LB},{kind:F.Tmpl,fn:HL},{kind:F.Tmpl,fn:mF},{kind:F.Tmpl,fn:QL},{kind:F.Both,fn:hL},{kind:F.Tmpl,fn:AB},{kind:F.Both,fn:nU},{kind:F.Tmpl,fn:WL},{kind:F.Both,fn:TF},{kind:F.Tmpl,fn:NB},{kind:F.Tmpl,fn:DF},{kind:F.Tmpl,fn:MF},{kind:F.Tmpl,fn:TL},{kind:F.Tmpl,fn:tL},{kind:F.Tmpl,fn:RF},{kind:F.Both,fn:YF},{kind:F.Both,fn:CB},{kind:F.Both,fn:aL}];function LT(t,e){for(let n of fU)(n.kind===e||n.kind===F.Both)&&n.fn(t)}function hU(t,e){let n=FT(t.root);return OT(t.root,e),n}function OT(t,e){for(let n of t.job.units){if(n.parent!==t.xref)continue;OT(n,e);let r=FT(n);e.statements.push(r.toDeclStmt(r.name))}}function FT(t){if(t.fnName===null)throw new Error(`AssertionError: view ${t.xref} is unnamed`);let e=[];for(let s of t.create){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${v[s.kind]}`);e.push(s.statement)}let n=[];for(let s of t.update){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${v[s.kind]}`);n.push(s.statement)}let r=kh(1,e),i=kh(2,n);return ts([new Nt("rf"),new Nt("ctx")],[...r,...i],void 0,void 0,t.fnName)}function kh(t,e){return e.length===0?[]:[Vh(new Se(P.BitwiseAnd,Ee("rf"),I(t)),e)]}function pU(t){if(t.root.fnName===null)throw new Error("AssertionError: host binding function is unnamed");let e=[];for(let s of t.root.create){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${v[s.kind]}`);e.push(s.statement)}let n=[];for(let s of t.root.update){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${v[s.kind]}`);n.push(s.statement)}if(e.length===0&&n.length===0)return null;let r=kh(1,e),i=kh(2,n);return ts([new Nt("rf"),new Nt("ctx")],[...r,...i],void 0,void 0,t.root.fnName)}var VT=Fn.TemplateDefinitionBuilder,to=new Wa,no="ng-template",mU="animate.";function Tf(t){return t instanceof nn}function gU(t){return Tf(t)&&t.nodes.length===1&&t.nodes[0]instanceof th}function vU(t,e,n,r,i,s,o,a,l,c){let u=new au(t,n,VT,r,i,s,o,a,l,c);return Di(u.root,e),u}function yU(t,e,n){let r=new vh(t.componentName,n,VT,fn.DomOnly);for(let i of t.properties??[]){let s=U.Property;i.name.startsWith("attr.")&&(i.name=i.name.substring(5),s=U.Attribute),i.isLegacyAnimation&&(s=U.LegacyAnimation),i.isAnimation&&(s=U.Animation);let o=e.calcPossibleSecurityContexts(t.componentSelector,i.name,s===U.Attribute).filter(a=>a!==Le.NONE);wU(r,i,s,o)}for(let[i,s]of Object.entries(t.attributes)??[]){let o=e.calcPossibleSecurityContexts(t.componentSelector,i,!0).filter(a=>a!==Le.NONE);_U(r,i,s,o)}for(let i of t.events??[])EU(r,i);return r}function wU(t,e,n,r){let i,s=e.expression.ast;s instanceof vu?i=new Xe(s.strings,s.expressions.map(o=>ge(o,t,e.sourceSpan)),[]):i=ge(s,t,e.sourceSpan),t.root.update.push(po(t.root.xref,n,e.name,i,null,r,!1,!1,null,null,e.sourceSpan))}function _U(t,e,n,r){let i=po(t.root.xref,U.Attribute,e,n,null,r,!0,!1,null,null,n.sourceSpan);t.root.update.push(i)}function EU(t,e){let n;if(e.type===tn.Animation)n=uT(t.root.xref,new Ft,e.name,null,fu(t.root,e.handler,e.handlerSpan),e.name.endsWith("enter")?"enter":"leave",e.targetOrPhase,!0,e.sourceSpan);else{let[r,i]=e.type!==tn.LegacyAnimation?[null,e.targetOrPhase]:[e.targetOrPhase,null];n=k0(t.root.xref,new Ft,e.name,null,fu(t.root,e.handler,e.handlerSpan),r,i,!0,e.sourceSpan)}t.root.create.push(n)}function Di(t,e){for(let n of e)if(n instanceof si)CU(t,n);else if(n instanceof Rn)SU(t,n);else if(n instanceof Ba)bU(t,n);else if(n instanceof zs)BT(t,n,null);else if(n instanceof Oa)UT(t,n,null);else if(n instanceof Zf)xU(t,n);else if(n instanceof Xf)TU(t,n);else if(n instanceof fo)IU(t,n);else if(n instanceof Lx)DU(t,n);else if(n instanceof Va)kU(t,n);else if(n instanceof w0)NU(t,n);else if(!(n instanceof pc))throw new Error(`Unsupported template node: ${n.constructor.name}`)}function CU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof nn||e.i18n instanceof rs))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let n=t.job.allocateXrefId(),[r,i]=Er(e.name),s=MP(i,n,vT(r),e.i18n instanceof rs?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);t.create.push(s),PU(t,s,e),GT(s,e);let o=null;e.i18n instanceof nn&&(o=t.job.allocateXrefId(),t.create.push(Gh(o,e.i18n,void 0,e.startSourceSpan))),Di(t,e.children);let a=RP(n,e.endSourceSpan??e.startSourceSpan);t.create.push(a);let l=e.inputs.find(c=>c.name==="formField"&&c.type===be.Property);l&&t.create.push(JP(l.sourceSpan)),o!==null&&N.insertBefore(qh(o,e.endSourceSpan??e.startSourceSpan),a)}function SU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof nn||e.i18n instanceof rs))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);let n=t.job.allocateView(t.xref),r=e.tagName,i="";e.tagName&&([i,r]=Er(e.tagName));let s=e.i18n instanceof rs?e.i18n:void 0,o=vT(i),a=r===null?"":fL(r,o),l=RU(e)?vn.NgTemplate:vn.Structural,c=oT(n.xref,l,r,a,o,s,e.startSourceSpan,e.sourceSpan);t.create.push(c),LU(t,c,e,l),GT(c,e),Di(n,e.children);for(let{name:u,value:h}of e.variables)n.contextVariables.set(u,h!==""?h:"$implicit");if(l===vn.NgTemplate&&e.i18n instanceof nn){let u=t.job.allocateXrefId();N.insertAfter(Gh(u,e.i18n,void 0,e.startSourceSpan),n.create.head),N.insertBefore(qh(u,e.endSourceSpan??e.startSourceSpan),n.create.tail)}}function bU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof rs))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let n=null;e.children.some(s=>!(s instanceof Uh)&&(!(s instanceof zs)||s.value.trim().length>0))&&(n=t.job.allocateView(t.xref),Di(n,e.children));let r=t.job.allocateXrefId(),i=UP(r,e.selector,e.i18n,n?.xref??null,e.sourceSpan);for(let s of e.attributes){let o=to.securityContext(e.name,s.name,!0);t.update.push(po(i.xref,U.Attribute,s.name,I(s.value),null,o,!0,!1,null,bi(s.i18n),s.sourceSpan))}t.create.push(i)}function BT(t,e,n){t.create.push(cT(t.job.allocateXrefId(),e.value,n,e.sourceSpan))}function UT(t,e,n){let r=e.value;if(r instanceof mn&&(r=r.ast),!(r instanceof vu))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${r.constructor.name}`);if(e.i18n!==void 0&&!(e.i18n instanceof xi))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);let i=e.i18n instanceof xi?e.i18n.children.filter(a=>a instanceof zc).map(a=>a.name):[];if(i.length>0&&i.length!==r.expressions.length)throw Error(`Unexpected number of i18n placeholders (${r.expressions.length}) for BoundText with ${r.expressions.length} expressions`);let s=t.job.allocateXrefId();t.create.push(cT(s,"",n,e.sourceSpan));let o=t.job.compatibility?null:e.sourceSpan;t.update.push(vP(s,new Xe(r.strings,r.expressions.map(a=>ge(a,t.job,o)),i),e.sourceSpan))}function xU(t,e){let n=null,r=[];for(let i=0;i<e.branches.length;i++){let s=e.branches[i],o=t.job.allocateView(t.xref),a=Mh(t,o.xref,s);s.expressionAlias!==null&&o.contextVariables.set(s.expressionAlias.name,pT);let l;if(s.i18n!==void 0){if(!(s.i18n instanceof is))throw Error(`Unhandled i18n metadata type for if block: ${s.i18n?.constructor.name}`);l=s.i18n}let u=(i===0?aT:lT)(o.xref,vn.Block,a,"Conditional",Gt.HTML,l,s.startSourceSpan,s.sourceSpan);t.create.push(u),n===null&&(n=o.xref);let h=s.expression?ge(s.expression,t.job,null):null,p=new hh(h,u.xref,u.handle,s.expressionAlias);r.push(p),Di(o,s.children)}t.update.push(rT(n,null,r,e.sourceSpan))}function TU(t,e){if(e.groups.length===0)return;let n=null,r=[];for(let i=0;i<e.groups.length;i++){let s=e.groups[i],o=t.job.allocateView(t.xref),a=Mh(t,o.xref,s),l;if(s.i18n!==void 0){if(!(s.i18n instanceof is))throw Error(`Unhandled i18n metadata type for switch block: ${s.i18n?.constructor.name}`);l=s.i18n}let u=(i===0?aT:lT)(o.xref,vn.Block,a,"Case",Gt.HTML,l,s.startSourceSpan,s.sourceSpan);t.create.push(u),n===null&&(n=o.xref);for(let h of s.cases){let p=h.expression?ge(h.expression,t.job,e.startSourceSpan):null,m=new hh(p,u.xref,u.handle);r.push(m)}Di(o,s.children)}t.update.push(rT(n,ge(e.expression,t.job,null),r,e.sourceSpan))}function yf(t,e,n,r,i){if(n!==void 0&&!(n instanceof is))throw Error("Unhandled i18n metadata type for defer block");if(r===void 0)return null;let s=t.job.allocateView(t.xref);Di(s,r);let o=oT(s.xref,vn.Block,null,`Defer${e}`,Gt.HTML,n,i,i);return t.create.push(o),o}function IU(t,e){let n=null;if(t.job.deferMeta.mode===0){if(!t.job.deferMeta.blocks.has(e))throw new Error("AssertionError: unable to find a dependency function for this deferred block");n=t.job.deferMeta.blocks.get(e)??null}let r=yf(t,"",e.i18n,e.children,e.sourceSpan),i=yf(t,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),s=yf(t,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),o=yf(t,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=t.job.allocateXrefId(),l=$P(a,r.xref,r.handle,n,t.job.allDeferrableDepsFn,e.sourceSpan);l.placeholderView=s?.xref??null,l.placeholderSlot=s?.handle??null,l.loadingSlot=i?.handle??null,l.errorSlot=o?.handle??null,l.placeholderMinimumTime=e.placeholder?.minimumTime??null,l.loadingMinimumTime=e.loading?.minimumTime??null,l.loadingAfterTime=e.loading?.afterTime??null,l.flags=AU(e),t.create.push(l);let c=[],u=[];Dv("hydrate",e.hydrateTriggers,c,u,t,a),Dv("none",e.triggers,c,u,t,a),Dv("prefetch",e.prefetchTriggers,c,u,t,a),c.some(p=>p.modifier==="none")||u.some(p=>p.modifier==="none")||c.push(zi(a,{kind:Pe.Idle},"none",null)),t.create.push(c),t.update.push(u)}function AU(t){return Object.keys(t.hydrateTriggers).length>0?1:null}function Dv(t,e,n,r,i,s){if(e.idle!==void 0){let o=zi(s,{kind:Pe.Idle},t,e.idle.sourceSpan);n.push(o)}if(e.immediate!==void 0){let o=zi(s,{kind:Pe.Immediate},t,e.immediate.sourceSpan);n.push(o)}if(e.timer!==void 0){let o=zi(s,{kind:Pe.Timer,delay:e.timer.delay},t,e.timer.sourceSpan);n.push(o)}if(e.hover!==void 0){let o=zi(s,{kind:Pe.Hover,targetName:e.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},t,e.hover.sourceSpan);n.push(o)}if(e.interaction!==void 0){let o=zi(s,{kind:Pe.Interaction,targetName:e.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},t,e.interaction.sourceSpan);n.push(o)}if(e.viewport!==void 0){let o=zi(s,{kind:Pe.Viewport,targetName:e.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null,options:e.viewport.options?ge(e.viewport.options,i.job,e.viewport.sourceSpan):null},t,e.viewport.sourceSpan);n.push(o)}if(e.never!==void 0){let o=zi(s,{kind:Pe.Never},t,e.never.sourceSpan);n.push(o)}if(e.when!==void 0){if(e.when.value instanceof vu)throw new Error("Unexpected interpolation in defer block when trigger");let o=TP(s,ge(e.when.value,i.job,e.when.sourceSpan),t,e.when.sourceSpan);r.push(o)}}function DU(t,e){if(e.i18n instanceof nn&&gU(e.i18n)){let n=t.job.allocateXrefId();t.create.push(qP(n,e.i18n,Vx(e.i18n).name,null));for(let[r,i]of Object.entries(D(D({},e.vars),e.placeholders)))i instanceof Oa?UT(t,i,r):BT(t,i,r);t.create.push(jP(n))}else throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`)}function kU(t,e){let n=t.job.allocateView(t.xref),r=`\u0275$index_${n.xref}`,i=`\u0275$count_${n.xref}`,s=new Set;n.contextVariables.set(e.item.name,e.item.value);for(let w of e.contextVariables)w.value==="$index"&&s.add(w.name),w.name==="$index"?n.contextVariables.set("$index",w.value).set(r,w.value):w.name==="$count"?n.contextVariables.set("$count",w.value).set(i,w.value):n.aliases.add({kind:It.Alias,name:null,identifier:w.name,expression:MU(w,r,i)});let o=vt(e.trackBy.span,e.sourceSpan),a=ge(e.trackBy,t.job,o);Di(n,e.children);let l=null,c=null;e.empty!==null&&(l=t.job.allocateView(t.xref),Di(l,e.empty.children),c=Mh(t,l.xref,e.empty));let u={$index:s,$implicit:e.item.name};if(e.i18n!==void 0&&!(e.i18n instanceof is))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(e.empty?.i18n!==void 0&&!(e.empty.i18n instanceof is))throw Error("AssertionError: Unhandled i18n metadata type or @empty");let h=e.i18n,p=e.empty?.i18n,m=Mh(t,n.xref,e),g=NP(n.xref,l?.xref??null,m,a,u,c,h,p,e.startSourceSpan,e.sourceSpan);t.create.push(g);let y=ge(e.expression,t.job,vt(e.expression.span,e.sourceSpan)),_=xP(g.xref,g.handle,y,e.sourceSpan);t.update.push(_)}function MU(t,e,n){switch(t.value){case"$index":return new kt(e);case"$count":return new kt(n);case"$first":return new kt(e).identical(I(0));case"$last":return new kt(e).identical(new kt(n).minus(I(1)));case"$even":return new kt(e).modulo(I(2)).identical(I(0));case"$odd":return new kt(e).modulo(I(2)).notIdentical(I(0));default:throw new Error(`AssertionError: unknown @for loop variable ${t.value}`)}}function NU(t,e){let n=t.job.allocateXrefId();t.create.push(HP(n,e.name,e.sourceSpan)),t.update.push(AP(n,e.name,ge(e.value,t.job,e.valueSpan),e.sourceSpan))}function ge(t,e,n){if(t instanceof mn)return ge(t.ast,e,n);if(t instanceof Qr)return t.receiver instanceof ii?new kt(t.name):new Ln(ge(t.receiver,e,n),t.name,null,vt(t.span,n));if(t instanceof Pa){if(t.receiver instanceof ii)throw new Error("Unexpected ImplicitReceiver");return new yn(ge(t.receiver,e,n),t.args.map(r=>ge(r,e,n)),void 0,vt(t.span,n))}else{if(t instanceof pn)return I(t.value,void 0,vt(t.span,n));if(t instanceof Ta)switch(t.operator){case"+":return new so(wc.Plus,ge(t.expr,e,n),void 0,vt(t.span,n));case"-":return new so(wc.Minus,ge(t.expr,e,n),void 0,vt(t.span,n));default:throw new Error(`AssertionError: unknown unary operator ${t.operator}`)}else if(t instanceof Xt){let r=uL.get(t.operation);if(r===void 0)throw new Error(`AssertionError: unknown binary operator ${t.operation}`);return new Se(r,ge(t.left,e,n),ge(t.right,e,n),void 0,vt(t.span,n))}else{if(t instanceof Ic)return new as(e.root.xref);if(t instanceof co)return new Ii(ge(t.receiver,e,n),ge(t.key,e,n),void 0,vt(t.span,n));if(t instanceof Ra)throw new Error("AssertionError: Chain in unknown context");if(t instanceof uo){let r=t.keys.map((i,s)=>{let o=ge(t.values[s],e,n);return i.kind==="spread"?new es(o):new Ma(i.key,o,i.quoted)});return new _r(r,void 0,vt(t.span,n))}else{if(t instanceof kc)return new ni(t.expressions.map(r=>ge(r,e,n)));if(t instanceof $f)return new ti(ge(t.condition,e,n),ge(t.trueExp,e,n),ge(t.falseExp,e,n),void 0,vt(t.span,n));if(t instanceof Pc)return ge(t.expression,e,n);if(t instanceof Hf)return new go(e.allocateXrefId(),new Ft,t.name,[ge(t.exp,e,n),...t.args.map(r=>ge(r,e,n))]);if(t instanceof Dc)return new Ga(ge(t.receiver,e,n),ge(t.key,e,n),vt(t.span,n));if(t instanceof Ac)return new Ha(ge(t.receiver,e,n),t.name);if(t instanceof qf)return new vo(ge(t.receiver,e,n),t.args.map(r=>ge(r,e,n)));if(t instanceof Qt)return new su(vt(t.span,n));if(t instanceof Mc)return k2(ge(t.expression,e,n),vt(t.span,n));if(t instanceof Nc)return gu(ge(t.expression,e,n));if(t instanceof Rc)return new Nf(ge(t.expression,e,n),void 0,vt(t.span,n));if(t instanceof Oc)return ox(t,e,n);if(t instanceof Lc)return new _c(ge(t.tag,e,n),ox(t.template,e,n),void 0,vt(t.span,n));if(t instanceof Fc)return new wr(ge(t.expression,e,n),void 0,vt(t.span,n));if(t instanceof Wf)return new ka(t.body,t.flags,n);if(t instanceof Gf)return new oo(ge(t.expression,e,n));throw new Error(`Unhandled expression type "${t.constructor.name}" in file "${n?.start.file.url}"`)}}}}function ox(t,e,n){return new Cc(t.elements.map(r=>new Rf(r.text,vt(r.span,n))),t.expressions.map(r=>ge(r,e,n)),vt(t.span,n))}function zy(t,e,n,r){let i;return e instanceof vu?i=new Xe(e.strings,e.expressions.map(s=>ge(s,t,null)),Object.keys(bi(n)?.placeholders??{})):e instanceof $e?i=ge(e,t,null):i=I(e),i}var $T=new Map([[be.Property,U.Property],[be.TwoWay,U.TwoWayProperty],[be.Attribute,U.Attribute],[be.Class,U.ClassName],[be.Style,U.StyleProperty],[be.LegacyAnimation,U.LegacyAnimation],[be.Animation,U.Animation]]);function RU(t){return Er(t.tagName??"")[1]===no}function bi(t){if(t==null)return null;if(!(t instanceof nn))throw Error(`Expected i18n meta to be a Message, but got: ${t.constructor.name}`);return t}function PU(t,e,n){let r=new Array,i=new Set;for(let s of n.attributes){let o=to.securityContext(n.name,s.name,!0);r.push(po(e.xref,U.Attribute,s.name,zy(t.job,s.value,s.i18n),null,o,!0,!1,null,bi(s.i18n),s.sourceSpan)),s.i18n&&i.add(s.name)}for(let s of n.inputs)i.has(s.name)&&console.error(`On component ${t.job.componentName}, the binding ${s.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),r.push(po(e.xref,$T.get(s.type),s.name,zy(t.job,hu(s.value),s.i18n),s.unit,s.securityContext,!1,!1,null,bi(s.i18n)??null,s.sourceSpan));t.create.push(r.filter(s=>s?.kind===v.ExtractedAttribute)),t.update.push(r.filter(s=>s?.kind===v.Binding));for(let s of n.outputs){if(s.type===tn.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");s.type===tn.TwoWay?t.create.push(dT(e.xref,e.handle,s.name,e.tag,HT(t,s.handler,s.handlerSpan),s.sourceSpan)):s.type===tn.Animation?t.create.push(uT(e.xref,e.handle,s.name,e.tag,fu(t,s.handler,s.handlerSpan),s.name.endsWith("enter")?"enter":"leave",s.target,!1,s.sourceSpan)):t.create.push(k0(e.xref,e.handle,s.name,e.tag,fu(t,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))}r.some(s=>s?.i18nMessage)!==null&&t.create.push(hT(t.job.allocateXrefId(),new Ft,e.xref))}function LU(t,e,n,r){let i=new Array;for(let s of n.templateAttrs)if(s instanceof Fa){let o=to.securityContext(no,s.name,!0);i.push(wf(t,e.xref,be.Attribute,s.name,s.value,null,o,!0,r,bi(s.i18n),s.sourceSpan))}else i.push(wf(t,e.xref,s.type,s.name,hu(s.value),s.unit,s.securityContext,!0,r,bi(s.i18n),s.sourceSpan));for(let s of n.attributes){let o=to.securityContext(no,s.name,!0);i.push(wf(t,e.xref,be.Attribute,s.name,s.value,null,o,!1,r,bi(s.i18n),s.sourceSpan))}for(let s of n.inputs)i.push(wf(t,e.xref,s.type,s.name,hu(s.value),s.unit,s.securityContext,!1,r,bi(s.i18n),s.sourceSpan));t.create.push(i.filter(s=>s?.kind===v.ExtractedAttribute)),t.update.push(i.filter(s=>s?.kind===v.Binding));for(let s of n.outputs){if(s.type===tn.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");if(r===vn.NgTemplate&&(s.type===tn.TwoWay?t.create.push(dT(e.xref,e.handle,s.name,e.tag,HT(t,s.handler,s.handlerSpan),s.sourceSpan)):t.create.push(k0(e.xref,e.handle,s.name,e.tag,fu(t,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))),r===vn.Structural&&s.type!==tn.LegacyAnimation){let o=to.securityContext(no,s.name,!1);t.create.push(An(e.xref,U.Property,null,s.name,null,null,null,o))}}i.some(s=>s?.i18nMessage)!==null&&t.create.push(hT(t.job.allocateXrefId(),new Ft,e.xref))}function wf(t,e,n,r,i,s,o,a,l,c,u){let h=typeof i=="string";if(l===vn.Structural){if(!a)switch(n){case be.Property:case be.Class:case be.Style:return An(e,U.Property,null,r,null,null,c,o);case be.TwoWay:return An(e,U.TwoWayProperty,null,r,null,null,c,o)}if(!h&&(n===be.Attribute||n===be.LegacyAnimation||n===be.Animation))return null}let p=$T.get(n);return l===vn.NgTemplate&&(n===be.Class||n===be.Style||n===be.Attribute&&!h)&&(p=U.Property),po(e,p,r,zy(t.job,i,c),s,o,h,a,l,c,u)}function fu(t,e,n){e=hu(e);let r=new Array,i=e instanceof Ra?e.expressions:[e];if(i.length===0)throw new Error("Expected listener to have non-empty expression list.");let s=i.map(a=>ge(a,t.job,n)),o=s.pop();return r.push(...s.map(a=>er(new qt(a,a.sourceSpan)))),r.push(er(new Pt(o,o.sourceSpan))),r}function HT(t,e,n){e=hu(e);let r=new Array;if(e instanceof Ra)if(e.expressions.length===1)e=e.expressions[0];else throw new Error("Expected two-way listener to have a single expression.");let i=ge(e,t.job,n),s=new kt("$event"),o=new dh(i,s);return r.push(er(new qt(o))),r.push(er(new Pt(s))),r}function hu(t){return t instanceof mn?t.ast:t}function GT(t,e){OU(t.localRefs);for(let{name:n,value:r}of e.references)t.localRefs.push({name:n,target:r})}function OU(t){if(!Array.isArray(t))throw new Error("AssertionError: expected an array")}function vt(t,e){if(e===null)return null;let n=e.start.moveBy(t.start),r=e.start.moveBy(t.end),i=e.fullStart.moveBy(t.start);return new ee(n,r,i)}function Mh(t,e,n){let r=null;for(let i of n.children)if(!(i instanceof Uh||i instanceof w0)){if(r!==null)return null;if(i instanceof si||i instanceof Rn&&i.tagName!==null)r=i;else return null}if(r!==null){for(let s of r.attributes)if(!s.name.startsWith(mU)){let o=to.securityContext(no,s.name,!0);t.update.push(po(e,U.Attribute,s.name,I(s.value),null,o,!0,!1,null,bi(s.i18n),s.sourceSpan))}for(let s of r.inputs)if(s.type!==be.LegacyAnimation&&s.type!==be.Animation&&s.type!==be.Attribute){let o=to.securityContext(no,s.name,!0);t.create.push(An(e,U.Property,null,s.name,null,null,null,o))}let i=r instanceof si?r.name:r.tagName;return i===no?null:i}return null}var FU=!1;function VU(){return FU}function Nh(t,e){return Vh(Ee(C0).bitwiseAnd(I(t),null),e)}function BU(t){return(t.descendants?1:0)|(t.static?2:0)|(t.emitDistinctChangesOnly?4:0)}function UU(t,e){if(Array.isArray(t.predicate)){let n=[];return t.predicate.forEach(r=>{let i=r.split(",").map(s=>I(s.trim()));n.push(...i)}),e.getConstLiteral(Me(n),!0)}else switch(t.predicate.forwardRef){case 0:case 2:return t.predicate.expression;case 1:return W(C.resolveForwardRef).callFn([t.predicate.expression])}}function qT(t,e,n){let r=[];return n!==void 0&&r.push(...n),t.isSignal&&r.push(new Ln(Ee(Jc),t.propertyName)),r.push(UU(t,e),I(BU(t))),t.read&&r.push(t.read),r}var L0=Symbol("queryAdvancePlaceholder");function jT(t){let e=[],n=0,r=()=>{n>0&&(e.unshift(W(C.queryAdvance).callFn(n===1?[]:[I(n)]).toStmt()),n=0)};for(let i=t.length-1;i>=0;i--){let s=t[i];s===L0?n++:(r(),e.unshift(s))}return r(),e}function $U(t,e,n){let r=[],i=[],s=Bx(c=>i.push(c),E0),o=null,a=null;t.forEach(c=>{let u=qT(c,e);if(c.isSignal?(o??=W(C.viewQuerySignal),o=o.callFn(u)):(a??=W(C.viewQuery),a=a.callFn(u)),c.isSignal){i.push(L0);return}let h=s(),p=W(C.loadQuery).callFn([]),m=W(C.queryRefresh).callFn([h.set(p)]),g=Ee(Jc).prop(c.propertyName).set(c.first?h.prop("first"):h);i.push(m.and(g).toStmt())}),o!==null&&r.push(new qt(o)),a!==null&&r.push(new qt(a));let l=n?`${n}_Query`:null;return ts([new Nt(C0,g0),new Nt(Jc,null)],[Nh(1,r),Nh(2,jT(i))],vr,null,l)}function HU(t,e,n){let r=[],i=[],s=Bx(c=>i.push(c),E0),o=null,a=null;for(let c of t){let u=qT(c,e,[Ee("dirIndex")]);if(c.isSignal?(o??=W(C.contentQuerySignal),o=o.callFn(u)):(a??=W(C.contentQuery),a=a.callFn(u)),c.isSignal){i.push(L0);continue}let h=s(),p=W(C.loadQuery).callFn([]),m=W(C.queryRefresh).callFn([h.set(p)]),g=Ee(Jc).prop(c.propertyName).set(c.first?h.prop("first"):h);i.push(m.and(g).toStmt())}o!==null&&r.push(new qt(o)),a!==null&&r.push(new qt(a));let l=n?`${n}_ContentQueries`:null;return ts([new Nt(C0,g0),new Nt(Jc,null),new Nt("dirIndex",null)],[Nh(1,r),Nh(2,jT(i))],vr,null,l)}var Jy=class extends pO{constructor(){super(Uy)}parse(e,n,r){return super.parse(e,n,r)}},_f=".",GU="attr",kv="animate",qU="class",jU="style",WU="*",Mv="animate-",Yy=class{_exprParser;_schemaRegistry;errors;constructor(e,n,r){this._exprParser=e,this._schemaRegistry=n,this.errors=r}createBoundHostProperties(e,n){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parsePropertyBinding(i,s,!0,!1,n,n.start.offset,void 0,[],r,n):this._reportError(`Value of the host property binding "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,n)}return r}createDirectiveHostEventAsts(e,n){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parseEvent(i,s,!1,n,n,[],r,n):this._reportError(`Value of the host listener "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,n)}return r}parseInterpolation(e,n,r){let i=n.fullStart.offset;try{let s=this._exprParser.parseInterpolation(e,n,i,r);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,i)}}parseInterpolationExpression(e,n){let r=n.start.offset;try{let i=this._exprParser.parseInterpolationExpression(e,n,r);return i&&this.errors.push(...i.errors),i}catch(i){return this._reportError(`${i}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}parseInlineTemplateBinding(e,n,r,i,s,o,a,l){let c=r.start.offset+WU.length,u=this._parseTemplateBindings(e,n,r,c,i);for(let h of u){let p=ji(r,h.sourceSpan),m=h.key.source,g=ji(r,h.key.span);if(h instanceof Vc){let y=h.value?h.value.source:"$implicit",_=h.value?ji(r,h.value.span):void 0;a.push(new Qv(m,y,p,g,_))}else if(h.value){let y=l?p:r,_=ji(r,h.value.ast.sourceSpan);this._parsePropertyAst(m,h.value,!1,y,g,_,s,o)}else s.push([m,""]),this.parseLiteralAttr(m,null,g,i,void 0,s,o,g)}}_parseTemplateBindings(e,n,r,i,s){try{let o=this._exprParser.parseTemplateBindings(e,n,r,i,s);return o.errors.forEach(a=>this.errors.push(a)),o.warnings.forEach(a=>{this._reportError(a,r,Qi.WARNING)}),o.templateBindings}catch(o){return this._reportError(`${o}`,r),[]}}parseLiteralAttr(e,n,r,i,s,o,a,l){Nv(e)?(e=e.substring(1),l!==void 0&&(l=ji(l,new Mn(l.start.offset+1,l.end.offset))),n&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',r,Qi.ERROR),this._parseLegacyAnimation(e,n,r,i,l,s,o,a)):a.push(new _a(e,this._exprParser.wrapLiteralPrimitive(n,"",i),zr.LITERAL_ATTR,r,l,s))}parsePropertyBinding(e,n,r,i,s,o,a,l,c,u){e.length===0&&this._reportError("Property name is missing in binding",s);let h=!1;e.startsWith(Mv)?(h=!0,e=e.substring(Mv.length),u!==void 0&&(u=ji(u,new Mn(u.start.offset+Mv.length,u.end.offset)))):Nv(e)&&(h=!0,e=e.substring(1),u!==void 0&&(u=ji(u,new Mn(u.start.offset+1,u.end.offset)))),h?this._parseLegacyAnimation(e,n,s,o,u,a,l,c):e.startsWith(`${kv}${_f}`)?this._parseAnimation(e,this.parseBinding(n,r,a||s,o),s,u,a,l,c):this._parsePropertyAst(e,this.parseBinding(n,r,a||s,o),i,s,u,a,l,c)}parsePropertyInterpolation(e,n,r,i,s,o,a,l){let c=this.parseInterpolation(n,i||r,l);return c?(this._parsePropertyAst(e,c,!1,r,a,i,s,o),!0):!1}_parsePropertyAst(e,n,r,i,s,o,a,l){a.push([e,n.source]),l.push(new _a(e,n,r?zr.TWO_WAY:zr.DEFAULT,i,s,o))}_parseAnimation(e,n,r,i,s,o,a){o.push([e,n.source]),a.push(new _a(e,n,zr.ANIMATION,r,i,s))}_parseLegacyAnimation(e,n,r,i,s,o,a,l){e.length===0&&this._reportError("Animation trigger is missing",r);let c=this.parseBinding(n||"undefined",!1,o||r,i);a.push([e,c.source]),l.push(new _a(e,c,zr.LEGACY_ANIMATION,r,s,o))}parseBinding(e,n,r,i){try{let s=n?this._exprParser.parseSimpleBinding(e,r,i):this._exprParser.parseBinding(e,r,i);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,r),this._exprParser.wrapLiteralPrimitive("ERROR",r,i)}}createBoundElementProperty(e,n,r=!1,i=!0){if(n.isLegacyAnimation)return new Jf(n.name,be.LegacyAnimation,Le.NONE,n.expression,null,n.sourceSpan,n.keySpan,n.valueSpan);let s=null,o,a=null,l=n.name.split(_f),c;if(l.length>1)if(l[0]==GU){a=l.slice(1).join(_f),r||this._validatePropertyOrAttributeName(a,n.sourceSpan,!0),c=Rv(this._schemaRegistry,e,a,!0);let u=a.indexOf(":");if(u>-1){let h=a.substring(0,u),p=a.substring(u+1);a=Sf(h,p)}o=be.Attribute}else l[0]==qU?(a=l[1],o=be.Class,c=[Le.NONE]):l[0]==jU?(s=l.length>2?l[2]:null,a=l[1],o=be.Style,c=[Le.STYLE]):l[0]==kv&&(a=n.name,o=be.Animation,c=[Le.NONE]);if(a===null){let u=this._schemaRegistry.getMappedPropName(n.name);a=i?u:n.name,c=Rv(this._schemaRegistry,e,u,!1),o=n.type===zr.TWO_WAY?be.TwoWay:be.Property,r||this._validatePropertyOrAttributeName(u,n.sourceSpan,!1)}return new Jf(a,o,c[0],n.expression,s,n.sourceSpan,n.keySpan,n.valueSpan)}parseEvent(e,n,r,i,s,o,a,l){e.length===0&&this._reportError("Event name is missing in binding",i),Nv(e)?(e=e.slice(1),l!==void 0&&(l=ji(l,new Mn(l.start.offset+1,l.end.offset))),this._parseLegacyAnimationEvent(e,n,i,s,a,l)):this._parseRegularEvent(e,n,r,i,s,o,a,l)}calcPossibleSecurityContexts(e,n,r){let i=this._schemaRegistry.getMappedPropName(n);return Rv(this._schemaRegistry,e,i,r)}parseEventListenerName(e){let[n,r]=B2(e,[null,e]);return{eventName:r,target:n}}parseLegacyAnimationEventName(e){let n=U2(e,[e,null]);return{eventName:n[0],phase:n[1]===null?null:n[1].toLowerCase()}}_parseLegacyAnimationEvent(e,n,r,i,s,o){let{eventName:a,phase:l}=this.parseLegacyAnimationEventName(e),c=this._parseAction(n,i);s.push(new zf(a,l,tn.LegacyAnimation,c,r,i,o)),a.length===0&&this._reportError("Animation event name is missing in binding",r),l?l!=="start"&&l!=="done"&&this._reportError(`The provided animation output phase value "${l}" for "@${a}" is not supported (use start or done)`,r):this._reportError(`The animation trigger output event (@${a}) is missing its phase value name (start or done are currently supported)`,r)}_parseRegularEvent(e,n,r,i,s,o,a,l){let{eventName:c,target:u}=this.parseEventListenerName(e),h=this.errors.length,p=this._parseAction(n,s),m=this.errors.length===h;o.push([e,p.source]),r&&m&&!this._isAllowedAssignmentEvent(p)&&this._reportError("Unsupported expression in a two-way binding",i);let g=tn.Regular;r&&(g=tn.TwoWay),e.startsWith(`${kv}${_f}`)&&(g=tn.Animation),a.push(new zf(c,u,g,p,i,s,l))}_parseAction(e,n){let r=n&&n.start?n.start.offset:0;try{let i=this._exprParser.parseAction(e,n,r);return i&&this.errors.push(...i.errors),!i||i.ast instanceof Qt?(this._reportError("Empty expressions are not allowed",n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)):i}catch(i){return this._reportError(`${i}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}_reportError(e,n,r=Qi.ERROR){this.errors.push(new X(n,e,r))}_validatePropertyOrAttributeName(e,n,r){let i=r?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);i.error&&this._reportError(i.msg,n,Qi.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof mn?this._isAllowedAssignmentEvent(e.ast):e instanceof Pc?this._isAllowedAssignmentEvent(e.expression):e instanceof Pa&&e.args.length===1&&e.receiver instanceof Qr&&e.receiver.name==="$any"&&e.receiver.receiver instanceof ii?this._isAllowedAssignmentEvent(e.args[0]):(e instanceof Qr||e instanceof co)&&!Ky(e)}};function Ky(t){return t instanceof Ac||t instanceof Dc?!0:t instanceof Fc?Ky(t.expression):t instanceof Qr||t instanceof co||t instanceof Pa?Ky(t.receiver):!1}function Nv(t){return t[0]=="@"}function Rv(t,e,n,r){let i,s=o=>t.securityContext(o,n,r);return e===null?i=t.allKnownElementNames().map(s):(i=[],Aa.parse(e).forEach(o=>{let a=o.element?[o.element]:t.allKnownElementNames(),l=new Set(o.notSelectors.filter(u=>u.isElementSelector()).map(u=>u.element)),c=a.filter(u=>!l.has(u));i.push(...c.map(s))})),i.length===0?[Le.NONE]:Array.from(new Set(i)).sort()}function ji(t,e){let n=e.start-t.start.offset,r=e.end-t.end.offset;return new ee(t.start.moveBy(n),t.end.moveBy(r),t.fullStart.moveBy(n),t.details)}function zU(t){if(t==null||t.length===0||t[0]=="/")return!1;let e=t.match(JU);return e===null||e[1]=="package"||e[1]=="asset"}var JU=/^([^:/?#]+):/,YU="select",KU="link",QU="rel",XU="href",ZU="stylesheet",e$="style",t$="script",n$="ngNonBindable",r$="ngProjectAs";function WT(t){let e=null,n=null,r=null,i=!1,s="";t.attrs.forEach(l=>{let c=l.name.toLowerCase();c==YU?e=l.value:c==XU?n=l.value:c==QU?r=l.value:l.name==n$?i=!0:l.name==r$&&l.value.length>0&&(s=l.value)}),e=i$(e);let o=t.name.toLowerCase(),a=kn.OTHER;return Xv(o)?a=kn.NG_CONTENT:o==e$?a=kn.STYLE:o==t$?a=kn.SCRIPT:o==KU&&r==ZU&&(a=kn.STYLESHEET),new Qy(a,e,n,i,s)}var kn=(function(t){return t[t.NG_CONTENT=0]="NG_CONTENT",t[t.STYLE=1]="STYLE",t[t.STYLESHEET=2]="STYLESHEET",t[t.SCRIPT=3]="SCRIPT",t[t.OTHER=4]="OTHER",t})(kn||{}),Qy=class{type;selectAttr;hrefAttr;nonBindable;projectAs;constructor(e,n,r,i,s){this.type=e,this.selectAttr=n,this.hrefAttr=r,this.nonBindable=i,this.projectAs=s}};function i$(t){return t===null||t.length===0?"*":t}var s$=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,o$=/^track\s+([\S\s]*)/,a$=/^(as\s+)(.*)/,jh=/^else[^\S\r\n]+if/,l$=/^let\s+([\S\s]*)/,c$=/^[$A-Z_][0-9A-Z_$]*$/i,ax=/(\s*)(\S+)(\s*)/,yc=new Set(["$index","$first","$last","$even","$odd","$count"]);function lx(t){return t==="empty"}function cx(t){return t==="else"||jh.test(t)}function u$(t,e,n,r){let i=g$(e),s=[],o=ux(t,i,r);o!==null&&s.push(new Ks(o.expression,We(n,t.children,t.children),o.expressionAlias,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.nameSpan,t.i18n));for(let h of e)if(jh.test(h.name)){let p=ux(h,i,r);if(p!==null){let m=We(n,h.children,h.children);s.push(new Ks(p.expression,m,p.expressionAlias,h.sourceSpan,h.startSourceSpan,h.endSourceSpan,h.nameSpan,h.i18n))}}else if(h.name==="else"){let p=We(n,h.children,h.children);s.push(new Ks(null,p,null,h.sourceSpan,h.startSourceSpan,h.endSourceSpan,h.nameSpan,h.i18n))}let a=s.length>0?s[0].startSourceSpan:t.startSourceSpan,l=s.length>0?s[s.length-1].endSourceSpan:t.endSourceSpan,c=t.sourceSpan,u=s[s.length-1];return u!==void 0&&(c=new ee(a.start,u.sourceSpan.end)),{node:new Zf(s,c,t.startSourceSpan,l,t.nameSpan),errors:i}}function d$(t,e,n,r){let i=[],s=h$(t,i,r),o=null,a=null;for(let l of e)l.name==="empty"?a!==null?i.push(new X(l.sourceSpan,"@for loop can only have one @empty block")):l.parameters.length>0?i.push(new X(l.sourceSpan,"@empty block cannot have parameters")):a=new qc(We(n,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n):i.push(new X(l.sourceSpan,`Unrecognized @for loop block "${l.name}"`));if(s!==null)if(s.trackBy===null)i.push(new X(t.startSourceSpan,'@for loop must have a "track" expression'));else{let l=a?.endSourceSpan??t.endSourceSpan,c=new ee(t.sourceSpan.start,l?.end??t.sourceSpan.end);p$(s.trackBy.expression,s.trackBy.keywordSpan,i),o=new Va(s.itemName,s.expression,s.trackBy.expression,s.trackBy.keywordSpan,s.context,We(n,t.children,t.children),a,c,t.sourceSpan,t.startSourceSpan,l,t.nameSpan,t.i18n)}return{node:o,errors:i}}function f$(t,e,n){let r=v$(t),i=t.parameters.length>0?pu(t.parameters[0],n):n.parseBinding("",!1,t.sourceSpan,0),s=[],o=[],a=[],l=null;for(let u of t.children){if(!(u instanceof Yn))continue;if((u.name!=="case"||u.parameters.length===0)&&u.name!=="default"){o.push(new eh(u.name,u.sourceSpan,u.nameSpan));continue}let h=u.name==="case",p=null;h&&(p=pu(u.parameters[0],n));let m=new oy(p,u.sourceSpan,u.startSourceSpan,u.endSourceSpan,u.nameSpan);if(a.push(m),u.children.length===0&&u.endSourceSpan!==null&&u.endSourceSpan.start.offset===u.endSourceSpan.end.offset){l===null&&(l=u.sourceSpan);continue}let y=u.sourceSpan,_=u.startSourceSpan;l!==null&&(y=new ee(l.start,u.sourceSpan.end),_=new ee(l.start,u.startSourceSpan.end),l=null);let w=new Gc(a,We(e,u.children,u.children),y,_,u.endSourceSpan,u.nameSpan,u.i18n);s.push(w),a=[]}return{node:new Xf(i,s,o,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.nameSpan),errors:r}}function h$(t,e,n){if(t.parameters.length===0)return e.push(new X(t.startSourceSpan,"@for loop does not have an expression")),null;let[r,...i]=t.parameters,s=y$(r,e)?.match(s$);if(!s||s[2].trim().length===0)return e.push(new X(r.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;let[,o,a]=s;yc.has(o)&&e.push(new X(r.sourceSpan,`@for loop item name cannot be one of ${Array.from(yc).join(", ")}.`));let l=r.expression.split(" ")[0],c=new ee(r.sourceSpan.start,r.sourceSpan.start.moveBy(l.length)),u={itemName:new ns(o,"$implicit",c,c),trackBy:null,expression:pu(r,n,a),context:Array.from(yc,h=>{let p=new ee(t.startSourceSpan.end,t.startSourceSpan.end);return new ns(h,h,p,p)})};for(let h of i){let p=h.expression.match(l$);if(p!==null){let g=new ee(h.sourceSpan.start.moveBy(p[0].length-p[1].length),h.sourceSpan.end);m$(h.sourceSpan,p[1],g,o,u.context,e);continue}let m=h.expression.match(o$);if(m!==null){if(u.trackBy!==null)e.push(new X(h.sourceSpan,'@for loop can only have one "track" expression'));else{let g=pu(h,n,m[1]);g.ast instanceof Qt&&e.push(new X(t.startSourceSpan,'@for loop must have a "track" expression'));let y=new ee(h.sourceSpan.start,h.sourceSpan.start.moveBy(5));u.trackBy={expression:g,keywordSpan:y}}continue}e.push(new X(h.sourceSpan,`Unrecognized @for loop parameter "${h.expression}"`))}return u}function p$(t,e,n){let r=new Xy;t.ast.visit(r),r.hasPipe&&n.push(new X(e,"Cannot use pipes in track expressions"))}function m$(t,e,n,r,i,s){let o=e.split(","),a=n.start;for(let l of o){let c=l.split("="),u=c.length===2?c[0].trim():"",h=c.length===2?c[1].trim():"";if(u.length===0||h.length===0)s.push(new X(t,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(!yc.has(h))s.push(new X(t,`Unknown "let" parameter variable "${h}". The allowed variables are: ${Array.from(yc).join(", ")}`));else if(u===r)s.push(new X(t,`Invalid @for loop "let" parameter. Variable cannot be called "${r}"`));else if(i.some(p=>p.name===u))s.push(new X(t,`Duplicate "let" parameter variable "${h}"`));else{let[,p,m]=c[0].match(ax)??[],g=p!==void 0&&c.length===2?new ee(a.moveBy(p.length),a.moveBy(p.length+m.length)):n,y;if(c.length===2){let[,w,A]=c[1].match(ax)??[];y=w!==void 0?new ee(a.moveBy(c[0].length+1+w.length),a.moveBy(c[0].length+1+w.length+A.length)):void 0}let _=new ee(g.start,y?.end??g.end);i.push(new ns(u,h,_,g,y))}a=a.moveBy(l.length+1)}}function g$(t){let e=[],n=!1;for(let r=0;r<t.length;r++){let i=t[r];i.name==="else"?(n?e.push(new X(i.startSourceSpan,"Conditional can only have one @else block")):t.length>1&&r<t.length-1?e.push(new X(i.startSourceSpan,"@else block must be last inside the conditional")):i.parameters.length>0&&e.push(new X(i.startSourceSpan,"@else block cannot have parameters")),n=!0):jh.test(i.name)||e.push(new X(i.startSourceSpan,`Unrecognized conditional block @${i.name}`))}return e}function v$(t){let e=[],n=!1;if(t.parameters.length!==1)return e.push(new X(t.startSourceSpan,"@switch block must have exactly one parameter")),e;for(let r of t.children)if(!(r instanceof lu||r instanceof yo&&r.value.trim().length===0)){if(!(r instanceof Yn)||r.name!=="case"&&r.name!=="default"){e.push(new X(r.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}r.name==="default"?(n?e.push(new X(r.startSourceSpan,"@switch block can only have one @default block")):r.parameters.length>0&&e.push(new X(r.startSourceSpan,"@default block cannot have parameters")),n=!0):r.name==="case"&&r.parameters.length!==1&&e.push(new X(r.startSourceSpan,"@case block must have exactly one parameter"))}return e}function pu(t,e,n){let r,i;return typeof n=="string"?(r=Math.max(0,t.expression.lastIndexOf(n)),i=r+n.length):(r=0,i=t.expression.length),e.parseBinding(t.expression.slice(r,i),!1,t.sourceSpan,t.sourceSpan.start.offset+r)}function ux(t,e,n){if(t.parameters.length===0)return e.push(new X(t.startSourceSpan,"Conditional block does not have an expression")),null;let r=pu(t.parameters[0],n),i=null;for(let s=1;s<t.parameters.length;s++){let o=t.parameters[s],a=o.expression.match(a$);if(a===null)e.push(new X(o.sourceSpan,`Unrecognized conditional parameter "${o.expression}"`));else if(t.name!=="if"&&!jh.test(t.name))e.push(new X(o.sourceSpan,'"as" expression is only allowed on `@if` and `@else if` blocks'));else if(i!==null)e.push(new X(o.sourceSpan,'Conditional can only have one "as" expression'));else{let l=a[2].trim();if(c$.test(l)){let c=o.sourceSpan.start.moveBy(a[1].length),u=new ee(c,c.moveBy(l.length));i=new ns(l,l,u,u)}else e.push(new X(o.sourceSpan,'"as" expression must be a valid JavaScript identifier'))}}return{expression:r,expressionAlias:i}}function y$(t,e){let n=t.expression,r=/^\s$/,i=0,s=0,o=n.length-1;for(let a=0;a<n.length;a++){let l=n[a];if(l==="(")s=a+1,i++;else{if(r.test(l))continue;break}}if(i===0)return n;for(let a=n.length-1;a>-1;a--){let l=n[a];if(l===")"){if(o=a,i--,i===0)break}else{if(r.test(l))continue;break}}return i!==0?(e.push(new X(t.sourceSpan,"Unclosed parentheses in expression")),null):n.slice(s,o)}var Xy=class extends La{hasPipe=!1;visitPipe(){this.hasPipe=!0}},w$=/^\d+\.?\d*(ms|s)?$/,_$=/^\s$/,dx=new Map([[gr,Zt],[Xr,Si],[Nn,Mt]]),en=(function(t){return t.IDLE="idle",t.TIMER="timer",t.INTERACTION="interaction",t.IMMEDIATE="immediate",t.HOVER="hover",t.VIEWPORT="viewport",t.NEVER="never",t})(en||{});function E$({expression:t,sourceSpan:e},n,r){let i=t.indexOf("never"),s=new ee(e.start.moveBy(i),e.start.moveBy(i+5)),o=O0(t,e),a=F0(t,e);i===-1?r.push(new X(e,'Could not find "never" keyword in expression')):V0("never",n,r,new ny(s,e,o,null,a))}function Pv({expression:t,sourceSpan:e},n,r,i){let s=t.indexOf("when"),o=new ee(e.start.moveBy(s),e.start.moveBy(s+4)),a=O0(t,e),l=F0(t,e);if(s===-1)i.push(new X(e,'Could not find "when" keyword in expression'));else{let c=mu(t,s+1),u=n.parseBinding(t.slice(c),!1,e,e.start.offset+c);V0("when",r,i,new Yf(u,e,a,o,l))}}function Lv({expression:t,sourceSpan:e},n,r,i,s){let o=t.indexOf("on"),a=new ee(e.start.moveBy(o),e.start.moveBy(o+2)),l=O0(t,e),c=F0(t,e);if(o===-1)i.push(new X(e,'Could not find "on" keyword in expression'));else{let u=mu(t,o+1),h=t.startsWith("hydrate");new Zy(t,n,u,e,r,i,h?D$:A$,h,l,a,c).parse()}}function O0(t,e){return t.startsWith("prefetch")?new ee(e.start,e.start.moveBy(8)):null}function F0(t,e){return t.startsWith("hydrate")?new ee(e.start,e.start.moveBy(7)):null}var Zy=class{expression;bindingParser;start;span;triggers;errors;validator;isHydrationTrigger;prefetchSpan;onSourceSpan;hydrateSpan;index=0;tokens;constructor(e,n,r,i,s,o,a,l,c,u,h){this.expression=e,this.bindingParser=n,this.start=r,this.span=i,this.triggers=s,this.errors=o,this.validator=a,this.isHydrationTrigger=l,this.prefetchSpan=c,this.onSourceSpan=u,this.hydrateSpan=h,this.tokens=new du().tokenize(e.slice(r))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){let e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(gn))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(Nn)){this.advance();let n=this.errors.length,r=this.consumeParameters();if(this.errors.length!==n)break;this.consumeTrigger(e,r),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1?!0:this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,n){let r=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),i=new ee(r,r.moveBy(e.strValue.length)),s=r.moveBy(this.token().end-e.index),o=e.index===0,a=o?this.onSourceSpan:null,l=o?this.prefetchSpan:null,c=o?this.hydrateSpan:null,u=new ee(o?this.span.start:r,s);try{switch(e.toString()){case en.IDLE:this.trackTrigger("idle",C$(n,i,u,l,a,c));break;case en.TIMER:this.trackTrigger("timer",S$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case en.INTERACTION:this.trackTrigger("interaction",T$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case en.IMMEDIATE:this.trackTrigger("immediate",b$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case en.HOVER:this.trackTrigger("hover",x$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case en.VIEWPORT:this.trackTrigger("viewport",I$(this.start,this.isHydrationTrigger,this.bindingParser,n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(h){this.error(e,h.message)}}consumeParameters(){let e=[];if(!this.token().isCharacter(Nn))return this.unexpectedToken(this.token()),e;this.advance();let n=[],r=[];for(;this.index<this.tokens.length;){let i=this.token();if(i.isCharacter(Mt)&&n.length===0){r.length&&e.push({expression:this.tokenRangeText(r),start:r[0].index});break}if(i.type===Z.Character&&dx.has(i.numValue)&&n.push(dx.get(i.numValue)),n.length>0&&i.isCharacter(n[n.length-1])&&n.pop(),n.length===0&&i.isCharacter(gn)&&r.length>0){e.push({expression:this.tokenRangeText(r),start:r[0].index}),this.advance(),r=[];continue}r.push(i),this.advance()}return(!this.token().isCharacter(Mt)||n.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(gn)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenRangeText(e){return e.length===0?"":this.expression.slice(this.start+e[0].index,this.start+e[e.length-1].end)}trackTrigger(e,n){V0(e,this.triggers,this.errors,n)}error(e,n){let r=this.span.start.moveBy(this.start+e.index),i=r.moveBy(e.end-e.index);this.errors.push(new X(new ee(r,i),n))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}};function V0(t,e,n,r){e[t]?n.push(new X(r.sourceSpan,`Duplicate "${t}" trigger is not allowed`)):e[t]=r}function C$(t,e,n,r,i,s){if(t.length>0)throw new Error(`"${en.IDLE}" trigger cannot have parameters`);return new ry(e,n,r,i,s)}function S$(t,e,n,r,i,s){if(t.length!==1)throw new Error(`"${en.TIMER}" trigger must have exactly one parameter`);let o=Rh(t[0].expression);if(o===null)throw new Error(`Could not parse time value of trigger "${en.TIMER}"`);return new sy(o,e,n,r,i,s)}function b$(t,e,n,r,i,s){if(t.length>0)throw new Error(`"${en.IMMEDIATE}" trigger cannot have parameters`);return new iy(e,n,r,i,s)}function x$(t,e,n,r,i,s,o){return o(en.HOVER,t),new Kf(t[0]?.expression??null,e,n,r,i,s)}function T$(t,e,n,r,i,s,o){return o(en.INTERACTION,t),new Qf(t[0]?.expression??null,e,n,r,i,s)}function I$(t,e,n,r,i,s,o,a,l,c){c(en.VIEWPORT,r);let u,h;if(r.length===0)u=h=null;else if(!r[0].expression.startsWith("{"))u=r[0].expression,h=null;else{let p=n.parseBinding(r[0].expression,!1,s,s.start.offset+t+r[0].start);if(p.ast instanceof uo){if(p.ast.keys.some(g=>g.kind==="spread"))throw new Error("Spread operator are not allowed in this context");if(p.ast.keys.some(g=>g.kind==="property"&&g.key==="root"))throw new Error('The "root" option is not supported in the options parameter of the "viewport" trigger')}else throw new Error('Options parameter of the "viewport" trigger must be an object literal');let m=p.ast.keys.findIndex(g=>g.kind==="property"&&g.key==="trigger");if(m===-1)u=null,h=p.ast;else{let g=p.ast.values[m],y=(_,w)=>w!==m;if(!(g instanceof Qr)||!(g.receiver instanceof ii))throw new Error('"trigger" option of the "viewport" trigger must be an identifier');u=g.name,h=new uo(p.ast.span,p.ast.sourceSpan,p.ast.keys.filter(y),p.ast.values.filter(y))}}if(e&&u!==null)throw new Error('"viewport" hydration trigger cannot have a "trigger"');if(h){let p=e0.findDynamicNode(h);if(p!==null)throw new Error(`Options of the "viewport" trigger must be an object literal containing only literal values, but "${p.constructor.name}" was found`)}return new Bc(u,h,i,s,o,a,l)}function A$(t,e){if(e.length>1)throw new Error(`"${t}" trigger can only have zero or one parameters`)}function D$(t,e){if(t===en.VIEWPORT){if(e.length>1)throw new Error(`Hydration trigger "${t}" cannot have more than one parameter`);return}if(e.length>0)throw new Error(`Hydration trigger "${t}" cannot have parameters`)}function mu(t,e=0){let n=!1;for(let r=e;r<t.length;r++)if(_$.test(t[r]))n=!0;else if(n)return r;return-1}function Rh(t){let e=t.match(w$);if(!e)return null;let[n,r]=e;return parseFloat(n)*(r==="s"?1e3:1)}var e0=class t extends La{dynamicNode=null;static findDynamicNode(e){let n=new t;return n.visit(e),n.dynamicNode}visit(e){!(e instanceof mn)&&!(e instanceof pn)&&!(e instanceof kc)&&!(e instanceof uo)?this.dynamicNode=e:super.visit(e)}},k$=/^prefetch\s+when\s/,M$=/^prefetch\s+on\s/,N$=/^hydrate\s+when\s/,R$=/^hydrate\s+on\s/,P$=/^hydrate\s+never(\s*)$/,zT=/^minimum\s/,L$=/^after\s/,O$=/^when\s/,F$=/^on\s/;function t0(t){return t==="placeholder"||t==="loading"||t==="error"}function V$(t,e,n,r){let i=[],{placeholder:s,loading:o,error:a}=B$(e,i,n),{triggers:l,prefetchTriggers:c,hydrateTriggers:u}=G$(t,r,i),h=t.endSourceSpan,p=t.sourceSpan.end;if(e.length>0){let y=e[e.length-1];h=y.endSourceSpan,p=y.sourceSpan.end}let m=new ee(t.sourceSpan.start,p);return{node:new fo(We(n,t.children,t.children),l,c,u,s,o,a,t.nameSpan,m,t.sourceSpan,t.startSourceSpan,h,t.i18n),errors:i}}function B$(t,e,n){let r=null,i=null,s=null;for(let o of t)try{if(!t0(o.name)){e.push(new X(o.startSourceSpan,`Unrecognized block "@${o.name}"`));break}switch(o.name){case"placeholder":r!==null?e.push(new X(o.startSourceSpan,"@defer block can only have one @placeholder block")):r=U$(o,n);break;case"loading":i!==null?e.push(new X(o.startSourceSpan,"@defer block can only have one @loading block")):i=$$(o,n);break;case"error":s!==null?e.push(new X(o.startSourceSpan,"@defer block can only have one @error block")):s=H$(o,n);break}}catch(a){e.push(new X(o.startSourceSpan,a.message))}return{placeholder:r,loading:i,error:s}}function U$(t,e){let n=null;for(let r of t.parameters)if(zT.test(r.expression)){if(n!=null)throw new Error('@placeholder block can only have one "minimum" parameter');let i=Rh(r.expression.slice(mu(r.expression)));if(i===null)throw new Error('Could not parse time value of parameter "minimum"');n=i}else throw new Error(`Unrecognized parameter in @placeholder block: "${r.expression}"`);return new Uc(We(e,t.children,t.children),n,t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function $$(t,e){let n=null,r=null;for(let i of t.parameters)if(L$.test(i.expression)){if(n!=null)throw new Error('@loading block can only have one "after" parameter');let s=Rh(i.expression.slice(mu(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "after"');n=s}else if(zT.test(i.expression)){if(r!=null)throw new Error('@loading block can only have one "minimum" parameter');let s=Rh(i.expression.slice(mu(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "minimum"');r=s}else throw new Error(`Unrecognized parameter in @loading block: "${i.expression}"`);return new $c(We(e,t.children,t.children),n,r,t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function H$(t,e){if(t.parameters.length>0)throw new Error("@error block cannot have parameters");return new Hc(We(e,t.children,t.children),t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function G$(t,e,n,r){let i={},s={},o={};for(let a of t.parameters)O$.test(a.expression)?Pv(a,e,i,n):F$.test(a.expression)?Lv(a,e,i,n):k$.test(a.expression)?Pv(a,e,s,n):M$.test(a.expression)?Lv(a,e,s,n):N$.test(a.expression)?Pv(a,e,o,n):R$.test(a.expression)?Lv(a,e,o,n):P$.test(a.expression)?E$(a,o,n):n.push(new X(a.sourceSpan,"Unrecognized trigger"));return o.never&&Object.keys(o).length>1&&n.push(new X(t.startSourceSpan,"Cannot specify additional `hydrate` triggers if `hydrate never` is present")),{triggers:i,prefetchTriggers:s,hydrateTriggers:o}}var q$=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,fx=1,hx=2,px=3,mx=4,gx=5,j$=6,ac=7,Wi={BANANA_BOX:{start:"[(",end:")]"},PROPERTY:{start:"[",end:"]"},EVENT:{start:"(",end:")"}},Ov="*",W$=new Set(["link","style","script","ng-template","ng-container","ng-content"]),z$=new Set(["ngProjectAs","ngNonBindable"]);function J$(t,e,n){let r=new n0(e,n),i=We(r,t,t),s=e.errors.concat(r.errors),o={nodes:i,errors:s,styleUrls:r.styleUrls,styles:r.styles,ngContentSelectors:r.ngContentSelectors};return n.collectCommentNodes&&(o.commentNodes=r.commentNodes),o}var n0=class{bindingParser;options;errors=[];styles=[];styleUrls=[];ngContentSelectors=[];commentNodes=[];inI18nBlock=!1;processedNodes=new Set;constructor(e,n){this.bindingParser=e,this.options=n}visitElement(e){let n=Tf(e.i18n);n&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);let r=WT(e);if(r.type===kn.SCRIPT)return null;if(r.type===kn.STYLE){let w=Y$(e);return w!==null&&this.styles.push(w),null}else if(r.type===kn.STYLESHEET&&zU(r.hrefAttr))return this.styleUrls.push(r.hrefAttr),null;let i=aR(e.name),{attributes:s,boundEvents:o,references:a,variables:l,templateVariables:c,elementHasInlineTemplate:u,parsedProperties:h,templateParsedProperties:p,i18nAttrsMeta:m}=this.prepareAttributes(e.attrs,i),g=this.extractDirectives(e),y;r.nonBindable?y=We(vx,e.children).flat(1/0):y=We(this,e.children,e.children);let _;if(r.type===kn.NG_CONTENT){let w=r.selectAttr,A=e.attrs.map(k=>this.visitAttribute(k));_=new Ba(w,A,y,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n),this.ngContentSelectors.push(w)}else if(i){let w=this.categorizePropertyAttributes(e.name,h,m);_=new Rn(e.name,s,w.bound,o,g,[],y,a,l,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{let w=this.categorizePropertyAttributes(e.name,h,m);if(e.name==="ng-container")for(let A of w.bound)A.type===be.Attribute&&this.reportError("Attribute bindings are not supported on ng-container. Use property bindings instead.",A.sourceSpan);_=new si(e.name,s,w.bound,o,g,y,a,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n)}return u&&(_=this.wrapInTemplate(_,p,c,m,i,n)),n&&(this.inI18nBlock=!1),_}visitAttribute(e){return new Fa(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!Tf(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);let n=e.i18n,r={},i={};return Object.keys(n.placeholders).forEach(s=>{let o=n.placeholders[s];if(s.startsWith(dR)){let a=s.trim(),l=this.bindingParser.parseInterpolationExpression(o.text,o.sourceSpan);r[a]=new Oa(l,o.sourceSpan)}else i[s]=this._visitTextWithInterpolation(o.text,o.sourceSpan,null)}),new Lx(r,i,e.sourceSpan,n)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Uh(e.value||"",e.sourceSpan)),null}visitLetDeclaration(e,n){let r=this.bindingParser.parseBinding(e.value,!1,e.valueSpan,e.valueSpan.start.offset);return r.errors.length===0&&r.ast instanceof Qt&&this.reportError("@let declaration value cannot be empty",e.valueSpan),new w0(e.name,r,e.sourceSpan,e.nameSpan,e.valueSpan)}visitComponent(e){let n=Tf(e.i18n);if(n&&(this.inI18nBlock&&this.reportError("Cannot mark a component as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0),e.tagName!==null&&W$.has(e.tagName))return this.reportError(`Tag name "${e.tagName}" cannot be used as a component tag`,e.startSourceSpan),null;let{attributes:r,boundEvents:i,references:s,templateVariables:o,elementHasInlineTemplate:a,parsedProperties:l,templateParsedProperties:c,i18nAttrsMeta:u}=this.prepareAttributes(e.attrs,!1);this.validateSelectorlessReferences(s);let h=this.extractDirectives(e),p;e.attrs.find(y=>y.name==="ngNonBindable")?p=We(vx,e.children).flat(1/0):p=We(this,e.children,e.children);let m=this.categorizePropertyAttributes(e.tagName,l,u),g=new pc(e.componentName,e.tagName,e.fullName,r,m.bound,i,h,p,s,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return a&&(g=this.wrapInTemplate(g,c,o,u,!1,n)),n&&(this.inI18nBlock=!1),g}visitDirective(){return null}visitBlockParameter(){return null}visitBlock(e,n){let r=Array.isArray(n)?n.indexOf(e):-1;if(r===-1)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let i=null;switch(e.name){case"defer":i=V$(e,this.findConnectedBlocks(r,n,t0),this,this.bindingParser);break;case"switch":i=f$(e,this,this.bindingParser);break;case"for":i=d$(e,this.findConnectedBlocks(r,n,lx),this,this.bindingParser);break;case"if":i=u$(e,this.findConnectedBlocks(r,n,cx),this,this.bindingParser);break;default:let s;t0(e.name)?(s=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):lx(e.name)?(s=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):cx(e.name)?(s=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):s=`Unrecognized block @${e.name}.`,i={node:new eh(e.name,e.sourceSpan,e.nameSpan),errors:[new X(e.sourceSpan,s)]};break}return this.errors.push(...i.errors),i.node}findConnectedBlocks(e,n,r){let i=[];for(let s=e+1;s<n.length;s++){let o=n[s];if(!(o instanceof lu)){if(o instanceof yo&&o.value.trim().length===0){this.processedNodes.add(o);continue}if(!(o instanceof Yn)||!r(o.name))break;i.push(o),this.processedNodes.add(o)}}return i}categorizePropertyAttributes(e,n,r){let i=[],s=[];return n.forEach(o=>{let a=r[o.name];if(o.isLiteral)s.push(new Fa(o.name,o.expression.source||"",o.sourceSpan,o.keySpan,o.valueSpan,a));else{let l=this.bindingParser.createBoundElementProperty(e,o,!0,!1);i.push(ey.fromBoundElementProperty(l,a))}}),{bound:i,literal:s}}prepareAttributes(e,n){let r=[],i=[],s=[],o=[],a=[],l={},c=[],u=[],h=!1;for(let p of e){let m=!1,g=yx(p.name),y=!1;if(p.i18n&&(l[p.name]=p.i18n),g.startsWith(Ov)){h&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",p.sourceSpan),y=!0,h=!0;let _=p.value,w=g.substring(Ov.length),A=[],k=p.valueSpan?p.valueSpan.fullStart.offset:p.sourceSpan.fullStart.offset+p.name.length;this.bindingParser.parseInlineTemplateBinding(w,_,p.sourceSpan,k,[],c,A,!0),u.push(...A.map(T=>new ns(T.name,T.value,T.sourceSpan,T.keySpan,T.valueSpan)))}else m=this.parseAttribute(n,p,[],r,i,s,o);!m&&!y&&a.push(this.visitAttribute(p))}return{attributes:a,boundEvents:i,references:o,variables:s,templateVariables:u,elementHasInlineTemplate:h,parsedProperties:r,templateParsedProperties:c,i18nAttrsMeta:l}}parseAttribute(e,n,r,i,s,o,a){let l=yx(n.name),c=n.value,u=n.sourceSpan,h=n.valueSpan?n.valueSpan.fullStart.offset:u.fullStart.offset;function p(w,A,k){let T=n.name.length-l.length,L=w.start.moveBy(A.length+T),R=L.moveBy(k.length);return new ee(L,R,L,k)}let m=l.match(q$);if(m){if(m[fx]!=null){let w=m[ac],A=p(u,m[fx],w);this.bindingParser.parsePropertyBinding(w,c,!1,!1,u,h,n.valueSpan,r,i,A)}else if(m[hx])if(e){let w=m[ac],A=p(u,m[hx],w);this.parseVariable(w,c,u,A,n.valueSpan,o)}else this.reportError('"let-" is only supported on ng-template elements.',u);else if(m[px]){let w=m[ac],A=p(u,m[px],w);this.parseReference(w,c,u,A,n.valueSpan,a)}else if(m[mx]){let w=[],A=m[ac],k=p(u,m[mx],A);this.bindingParser.parseEvent(A,c,!1,u,n.valueSpan||u,r,w,k),Fv(w,s)}else if(m[gx]){let w=m[ac],A=p(u,m[gx],w);this.bindingParser.parsePropertyBinding(w,c,!1,!0,u,h,n.valueSpan,r,i,A),this.parseAssignmentEvent(w,c,u,n.valueSpan,r,s,A,h)}else if(m[j$]){let w=p(u,"",l);this.bindingParser.parseLiteralAttr(l,c,u,h,n.valueSpan,r,i,w)}return!0}let g=null;if(l.startsWith(Wi.BANANA_BOX.start)?g=Wi.BANANA_BOX:l.startsWith(Wi.PROPERTY.start)?g=Wi.PROPERTY:l.startsWith(Wi.EVENT.start)&&(g=Wi.EVENT),g!==null&&l.endsWith(g.end)&&l.length>g.start.length+g.end.length){let w=l.substring(g.start.length,l.length-g.end.length),A=p(u,g.start,w);if(g.start===Wi.BANANA_BOX.start)this.bindingParser.parsePropertyBinding(w,c,!1,!0,u,h,n.valueSpan,r,i,A),this.parseAssignmentEvent(w,c,u,n.valueSpan,r,s,A,h);else if(g.start===Wi.PROPERTY.start)this.bindingParser.parsePropertyBinding(w,c,!1,!1,u,h,n.valueSpan,r,i,A);else{let k=[];this.bindingParser.parseEvent(w,c,!1,u,n.valueSpan||u,r,k,A),Fv(k,s)}return!0}let y=p(u,"",l);return this.bindingParser.parsePropertyInterpolation(l,c,u,n.valueSpan,r,i,y,n.valueTokens??null)}extractDirectives(e){let n=e instanceof hn?e.tagName:e.name,r=[],i=new Set;for(let s of e.directives){let o=!1;for(let m of s.attrs)m.name.startsWith(Ov)?(o=!0,this.reportError(`Shorthand template syntax "${m.name}" is not supported inside a directive context`,m.sourceSpan)):z$.has(m.name)&&(o=!0,this.reportError(`Attribute "${m.name}" is not supported in a directive context`,m.sourceSpan));if(!o&&i.has(s.name)&&(o=!0,this.reportError(`Cannot apply directive "${s.name}" multiple times on the same element`,s.sourceSpan)),o)continue;let{attributes:a,parsedProperties:l,boundEvents:c,references:u,i18nAttrsMeta:h}=this.prepareAttributes(s.attrs,!1);this.validateSelectorlessReferences(u);let{bound:p}=this.categorizePropertyAttributes(n,l,h);for(let m of p)m.type!==be.Property&&m.type!==be.TwoWay&&(o=!0,this.reportError("Binding is not supported in a directive context",m.sourceSpan));o||(i.add(s.name),r.push(new Px(s.name,a,p,c,u,s.sourceSpan,s.startSourceSpan,s.endSourceSpan,void 0)))}return r}filterAnimationAttributes(e){return e.filter(n=>!n.name.startsWith("animate."))}filterAnimationInputs(e){return e.filter(n=>n.type!==be.Animation)}wrapInTemplate(e,n,r,i,s,o){let a=this.categorizePropertyAttributes("ng-template",n,i),l=[];a.literal.forEach(p=>l.push(p)),a.bound.forEach(p=>l.push(p));let c={attributes:[],inputs:[],outputs:[]};(e instanceof si||e instanceof pc)&&(c.attributes.push(...this.filterAnimationAttributes(e.attributes)),c.inputs.push(...this.filterAnimationInputs(e.inputs)),c.outputs.push(...e.outputs));let u=s&&o?void 0:e.i18n,h;return e instanceof pc?h=e.tagName:e instanceof Rn?h=null:h=e.name,new Rn(h,c.attributes,c.inputs,c.outputs,[],l,[e],[],r,!1,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,u)}_visitTextWithInterpolation(e,n,r,i){let s=ST(e),o=this.bindingParser.parseInterpolation(s,n,r);return o?new Oa(o,n,i):new zs(s,n)}parseVariable(e,n,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',r):e.length===0&&this.reportError("Variable does not have a name",r),o.push(new ns(e,n,r,i,s))}parseReference(e,n,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',r):e.length===0?this.reportError("Reference does not have a name",r):o.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,r),o.push(new jc(e,n,r,i,s))}parseAssignmentEvent(e,n,r,i,s,o,a,l){let c=[];this.bindingParser.parseEvent(`${e}Change`,n,!0,r,i||r,s,c,a),Fv(c,o)}validateSelectorlessReferences(e){if(e.length===0)return;let n=new Set;for(let r of e)r.value.length>0?this.reportError("Cannot specify a value for a local reference in this context",r.valueSpan||r.sourceSpan):n.has(r.name)?this.reportError("Duplicate reference names are not allowed",r.sourceSpan):n.add(r.name)}reportError(e,n,r=Qi.ERROR){this.errors.push(new X(n,e,r))}},r0=class{visitElement(e){let n=WT(e);if(n.type===kn.SCRIPT||n.type===kn.STYLE||n.type===kn.STYLESHEET)return null;let r=We(this,e.children,null);return new si(e.name,We(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid)}visitComment(e){return null}visitAttribute(e){return new Fa(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new zs(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,n){let r=[new zs(e.startSourceSpan.toString(),e.startSourceSpan),...We(this,e.children)];return e.endSourceSpan!==null&&r.push(new zs(e.endSourceSpan.toString(),e.endSourceSpan)),r}visitBlockParameter(e,n){return null}visitLetDeclaration(e,n){return new zs(`@let ${e.name} = ${e.value};`,e.sourceSpan)}visitComponent(e,n){let r=We(this,e.children,null);return new si(e.fullName,We(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,!1)}visitDirective(e,n){return null}},vx=new r0;function yx(t){return/^data-/i.test(t)?t.substring(5):t}function Fv(t,e){e.push(...t.map(n=>ty.fromParsedEvent(n)))}function Y$(t){return t.children.length!==1||!(t.children[0]instanceof yo)?null:t.children[0].value}var K$=[" ",`
`,"\r","	"];function Q$(t,e,n={}){let{preserveWhitespaces:r,enableI18nLegacyMessageIdFormat:i}=n,s=n.enableSelectorless??!1,o=Ph(s),l=new Jy().parse(t,e,ne(D({leadingTriviaChars:K$},n),{tokenizeExpansionForms:!0,tokenizeBlocks:n.enableBlockSyntax??!0,tokenizeLet:n.enableLetSyntax??!0,selectorlessEnabled:s}));if(!n.alwaysAttemptHtmlToR3AstConversion&&l.errors&&l.errors.length>0){let T={preserveWhitespaces:r,errors:l.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return n.collectCommentNodes&&(T.commentNodes=[]),T}let c=l.rootNodes,u=!(n.preserveSignificantWhitespace??!0),h=new xh(!r,i,n.preserveSignificantWhitespace,u),p=h.visitAllWithErrors(c);if(!n.alwaysAttemptHtmlToR3AstConversion&&p.errors&&p.errors.length>0){let T={preserveWhitespaces:r,errors:p.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return n.collectCommentNodes&&(T.commentNodes=[]),T}c=p.rootNodes,r||(c=We(new Sh(!0,void 0,!1),c),h.hasI18nMeta&&(c=We(new xh(!1,void 0,!0,u),c)));let{nodes:m,errors:g,styleUrls:y,styles:_,ngContentSelectors:w,commentNodes:A}=J$(c,o,{collectCommentNodes:!!n.collectCommentNodes});g.push(...l.errors,...p.errors);let k={preserveWhitespaces:r,errors:g.length>0?g:null,nodes:m,styleUrls:y,styles:_,ngContentSelectors:w};return n.collectCommentNodes&&(k.commentNodes=A),k}var X$=new Wa;function Ph(t=!1){return new Yy(new bh(new du,t),X$,[])}var JT="%COMP%",Z$=`_nghost-${JT}`,e3=`_ngcontent-${JT}`;function YT(t,e,n){let r=new ss,i=p0(t.selector);return r.set("type",t.type.value),i.length>0&&r.set("selectors",Ea(i)),t.queries.length>0&&r.set("contentQueries",HU(t.queries,e,t.name)),t.viewQueries.length&&r.set("viewQuery",$U(t.viewQueries,e,t.name)),r.set("hostBindings",l3(t.host,t.typeSourceSpan,n,e,t.selector||"",t.name,r)),r.set("inputs",QS(t.inputs,!0)),r.set("outputs",QS(t.outputs)),t.exportAs!==null&&r.set("exportAs",Me(t.exportAs.map(s=>I(s)))),t.isStandalone===!1&&r.set("standalone",I(!1)),t.isSignal&&r.set("signals",I(!0)),r}function KT(t,e){let n=[],r=e.providers,i=e.viewProviders;if(r||i){let s=[r||new ni([])];i&&s.push(i),n.push(W(C.ProvidersFeature).callFn(s))}if(e.hostDirectives?.length&&n.push(W(C.HostDirectivesFeature).callFn([h3(e.hostDirectives)])),e.usesInheritance&&n.push(W(C.InheritDefinitionFeature)),e.lifecycle.usesOnChanges&&n.push(W(C.NgOnChangesFeature)),"externalStyles"in e&&e.externalStyles?.length){let s=e.externalStyles.map(o=>I(o));n.push(W(C.ExternalStylesFeature).callFn([Me(s)]))}n.length&&t.set("features",Me(n))}function t3(t,e,n){let r=YT(t,e,n);KT(r,t);let i=W(C.defineDirective).callFn([r.toLiteralMap()],void 0,!0),s=a3(t);return{expression:i,type:s,statements:[]}}function n3(t,e,n){let r=YT(t,e,n);KT(r,t);let i=t.selector&&Aa.parse(t.selector),s=i&&i[0];if(s){let g=s.getAttrs();g.length&&r.set("attrs",e.getConstLiteral(Me(g.map(y=>y!=null?I(y):I(void 0))),!0))}let o=t.name,a=null;if(t.defer.mode===1&&t.defer.dependenciesFn!==null){let g=`${o}_DeferFn`;e.statements.push(new _t(g,t.defer.dependenciesFn,void 0,Rt.Final)),a=Ee(g)}let l=t.isStandalone&&!t.hasDirectiveDependencies?fn.DomOnly:fn.Full,c=vU(t.name,t.template.nodes,e,l,t.relativeContextFilePath,t.i18nUseExternalIds,t.defer,a,t.relativeTemplatePath,VU());LT(c,F.Tmpl);let u=hU(c,e);if(c.contentSelectors!==null&&r.set("ngContentSelectors",c.contentSelectors),r.set("decls",I(c.root.decls)),r.set("vars",I(c.root.vars)),c.consts.length>0&&(c.constsInitializers.length>0?r.set("consts",ri([],[...c.constsInitializers,new Pt(Me(c.consts))])):r.set("consts",Me(c.consts))),r.set("template",u),t.declarationListEmitMode!==3&&t.declarations.length>0)r.set("dependencies",i3(Me(t.declarations.map(g=>g.type)),t.declarationListEmitMode));else if(t.declarationListEmitMode===3){let g=[t.type.value];t.rawImports&&g.push(t.rawImports),r.set("dependencies",W(C.getComponentDepsFactory).callFn(g))}t.encapsulation===null&&(t.encapsulation=$s.Emulated);let h=!!t.externalStyles?.length;if(t.styles&&t.styles.length){let y=(t.encapsulation==$s.Emulated?f3(t.styles,e3,Z$):t.styles).reduce((_,w)=>(w.trim().length>0&&_.push(e.getConstLiteral(I(w))),_),[]);y.length>0&&(h=!0,r.set("styles",Me(y)))}!h&&t.encapsulation===$s.Emulated&&(t.encapsulation=$s.None),t.encapsulation!==$s.Emulated&&r.set("encapsulation",I(t.encapsulation)),t.animations!==null&&r.set("data",Zn([{key:"animation",value:t.animations,quoted:!1}])),t.changeDetection!==null&&(typeof t.changeDetection=="number"&&t.changeDetection!==h0.Default?r.set("changeDetection",I(t.changeDetection)):typeof t.changeDetection=="object"&&r.set("changeDetection",t.changeDetection));let p=W(C.defineComponent).callFn([r.toLiteralMap()],void 0,!0),m=r3(t);return{expression:p,type:m,statements:[]}}function r3(t){let e=QT(t);return e.push(s0(t.template.ngContentSelectors)),e.push(Lt(I(t.isStandalone))),e.push(XT(t)),t.isSignal&&e.push(Lt(I(t.isSignal))),Lt(W(C.ComponentDeclaration,e))}function i3(t,e){switch(e){case 0:return t;case 1:return ri([],t);case 2:let n=t.prop("map").callFn([W(C.resolveForwardRef)]);return ri([],n);case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}function s3(t){return Lt(I(t))}function i0(t){let e=Object.keys(t).map(n=>{let r=Array.isArray(t[n])?t[n][0]:t[n];return{key:n,value:I(r),quoted:!0}});return Zn(e)}function s0(t){return t.length>0?Lt(Me(t.map(e=>I(e)))):ei}function QT(t){let e=t.selector!==null?t.selector.replace(/\n/g,""):null;return[Bh(t.type.type,t.typeArgumentCount),e!==null?s3(e):ei,t.exportAs!==null?s0(t.exportAs):ei,Lt(o3(t)),Lt(i0(t.outputs)),s0(t.queries.map(n=>n.propertyName))]}function o3(t){return Zn(Object.keys(t.inputs).map(e=>{let n=t.inputs[e],r=[{key:"alias",value:I(n.bindingPropertyName),quoted:!0},{key:"required",value:I(n.required),quoted:!0}];return n.isSignal&&r.push({key:"isSignal",value:I(n.isSignal),quoted:!0}),{key:e,value:Zn(r),quoted:!0}}))}function a3(t){let e=QT(t);return e.push(ei),e.push(Lt(I(t.isStandalone))),e.push(XT(t)),t.isSignal&&e.push(Lt(I(t.isSignal))),Lt(W(C.DirectiveDeclaration,e))}function l3(t,e,n,r,i,s,o){let a=n.createBoundHostProperties(t.properties,e),l=n.createDirectiveHostEventAsts(t.listeners,e);t.specialAttributes.styleAttr&&(t.attributes.style=I(t.specialAttributes.styleAttr)),t.specialAttributes.classAttr&&(t.attributes.class=I(t.specialAttributes.classAttr));let c=yU({componentName:s,componentSelector:i,properties:a,events:l,attributes:t.attributes},n,r);LT(c,F.Host),o.set("hostAttrs",c.root.attributes);let u=c.root.vars;return u!==null&&u>0&&o.set("hostVars",I(u)),pU(c)}var c3=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function u3(t){let e={},n={},r={},i={};for(let s of Object.keys(t)){let o=t[s],a=s.match(c3);if(a===null)switch(s){case"class":if(typeof o!="string")throw new Error("Class binding must be string");i.classAttr=o;break;case"style":if(typeof o!="string")throw new Error("Style binding must be string");i.styleAttr=o;break;default:typeof o=="string"?e[s]=I(o):e[s]=o}else if(a[1]!=null){if(typeof o!="string")throw new Error("Property binding must be string");r[a[1]]=o}else if(a[2]!=null){if(typeof o!="string")throw new Error("Event binding must be string");n[a[2]]=o}}return{attributes:e,listeners:n,properties:r,specialAttributes:i}}function d3(t,e){let n=Ph();return n.createDirectiveHostEventAsts(t.listeners,e),n.createBoundHostProperties(t.properties,e),n.errors}function f3(t,e,n){let r=new my;return t.map(i=>r.shimCssText(i,e,n))}function XT(t){return t.hostDirectives?.length?Lt(Me(t.hostDirectives.map(e=>Zn([{key:"directive",value:gu(e.directive.type),quoted:!1},{key:"inputs",value:i0(e.inputs||{}),quoted:!1},{key:"outputs",value:i0(e.outputs||{}),quoted:!1}])))):ei}function h3(t){let e=[],n=!1;for(let r of t){if(!r.inputs&&!r.outputs)e.push(r.directive.type);else{let i=[{key:"directive",value:r.directive.type,quoted:!1}];if(r.inputs){let s=wx(r.inputs);s&&i.push({key:"inputs",value:s,quoted:!1})}if(r.outputs){let s=wx(r.outputs);s&&i.push({key:"outputs",value:s,quoted:!1})}e.push(Zn(i))}r.isForwardReference&&(n=!0)}return n?new Zi([],[new Pt(Me(e))]):Me(e)}function wx(t){let e=[];for(let n in t)t.hasOwnProperty(n)&&e.push(I(n),I(t[n]));return e.length>0?Me(e):null}var o0=class extends La{visit(e){e instanceof mn?this.visit(e.ast):e.visit(this)}visitElement(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitTemplate(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.templateAttrs),this.visitAllTemplateNodes(e.variables),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitContent(e){this.visitAllTemplateNodes(e.children)}visitBoundAttribute(e){this.visit(e.value)}visitBoundEvent(e){this.visit(e.handler)}visitBoundText(e){this.visit(e.value)}visitIcu(e){Object.keys(e.vars).forEach(n=>this.visit(e.vars[n])),Object.keys(e.placeholders).forEach(n=>this.visit(e.placeholders[n]))}visitDeferredBlock(e){e.visitAll(this)}visitDeferredTrigger(e){e instanceof Yf?this.visit(e.value):e instanceof Bc&&e.options!==null&&this.visit(e.options)}visitDeferredBlockPlaceholder(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockError(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockLoading(e){this.visitAllTemplateNodes(e.children)}visitSwitchBlock(e){this.visit(e.expression),this.visitAllTemplateNodes(e.groups)}visitSwitchBlockCase(e){e.expression&&this.visit(e.expression)}visitSwitchBlockCaseGroup(e){this.visitAllTemplateNodes(e.cases),this.visitAllTemplateNodes(e.children)}visitForLoopBlock(e){e.item.visit(this),this.visitAllTemplateNodes(e.contextVariables),this.visit(e.expression),this.visitAllTemplateNodes(e.children),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.visitAllTemplateNodes(e.children)}visitIfBlock(e){this.visitAllTemplateNodes(e.branches)}visitIfBlockBranch(e){e.expression&&this.visit(e.expression),e.expressionAlias?.visit(this),this.visitAllTemplateNodes(e.children)}visitLetDeclaration(e){this.visit(e.value)}visitComponent(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitDirective(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.references)}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitText(e){}visitUnknownBlock(e){}visitAllTemplateNodes(e){for(let n of e)this.visit(n)}};var a0=class{directiveMatcher;constructor(e){this.directiveMatcher=e}bind(e){if(!e.template&&!e.host)throw new Error("Empty bound targets are not supported");let n=new Map,r=[],i=new Set,s=new Map,o=new Map,a=new Map,l=new Map,c=new Map,u=new Map,h=new Set,p=new Set,m=[];if(e.template){let g=Lh.apply(e.template);p3(g,a),l0.apply(e.template,this.directiveMatcher,n,r,i,s,o),Oh.applyWithScope(e.template,g,l,c,u,h,p,m)}return e.host&&(n.set(e.host.node,e.host.directives),Oh.applyWithScope(e.host.node,Lh.apply(e.host.node),l,c,u,h,p,m)),new c0(e,n,r,i,s,o,l,c,u,a,h,p,m)}},Lh=class t{parentScope;rootNode;namedEntities=new Map;elementLikeInScope=new Set;childScopes=new Map;isDeferred;constructor(e,n){this.parentScope=e,this.rootNode=n,this.isDeferred=e!==null&&e.isDeferred?!0:n instanceof fo}static newRootScope(){return new t(null,null)}static apply(e){let n=t.newRootScope();return n.ingest(e),n}ingest(e){e instanceof Rn?(e.variables.forEach(n=>this.visitVariable(n)),e.children.forEach(n=>n.visit(this))):e instanceof Ks?(e.expressionAlias!==null&&this.visitVariable(e.expressionAlias),e.children.forEach(n=>n.visit(this))):e instanceof Va?(this.visitVariable(e.item),e.contextVariables.forEach(n=>this.visitVariable(n)),e.children.forEach(n=>n.visit(this))):e instanceof Gc||e instanceof qc||e instanceof fo||e instanceof Hc||e instanceof Uc||e instanceof $c||e instanceof Ba?e.children.forEach(n=>n.visit(this)):e instanceof Wc||e.forEach(n=>n.visit(this))}visitElement(e){this.visitElementLike(e)}visitTemplate(e){e.directives.forEach(n=>n.visit(this)),e.references.forEach(n=>this.visitReference(n)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.groups.forEach(n=>n.visit(this))}visitSwitchBlockCase(e){}visitSwitchBlockCaseGroup(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(n=>n.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){this.maybeDeclare(e)}visitComponent(e){this.visitElementLike(e)}visitDirective(e){e.references.forEach(n=>this.visitReference(n))}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitElementLike(e){e.directives.forEach(n=>n.visit(this)),e.references.forEach(n=>this.visitReference(n)),e.children.forEach(n=>n.visit(this)),this.elementLikeInScope.add(e)}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):this.parentScope!==null?this.parentScope.lookup(e):null}getChildScope(e){let n=this.childScopes.get(e);if(n===void 0)throw new Error(`Assertion error: child scope for ${e} not found`);return n}ingestScopedNode(e){let n=new t(this,e);n.ingest(e),this.childScopes.set(e,n)}},l0=class t{directiveMatcher;directives;eagerDirectives;missingDirectives;bindings;references;isInDeferBlock=!1;constructor(e,n,r,i,s,o){this.directiveMatcher=e,this.directives=n,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o}static apply(e,n,r,i,s,o,a){new t(n,r,i,s,o,a).ingest(e)}ingest(e){e.forEach(n=>n.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitDeferredBlock(e){let n=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(r=>r.visit(this)),this.isInDeferBlock=n,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(n=>n.visit(this))}visitDeferredBlockError(e){e.children.forEach(n=>n.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(n=>n.visit(this))}visitSwitchBlock(e){e.groups.forEach(n=>n.visit(this))}visitSwitchBlockCase(e){}visitSwitchBlockCaseGroup(e){e.children.forEach(n=>n.visit(this))}visitForLoopBlock(e){e.item.visit(this),e.contextVariables.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(n=>n.visit(this))}visitIfBlock(e){e.branches.forEach(n=>n.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(n=>n.visit(this))}visitContent(e){e.children.forEach(n=>n.visit(this))}visitComponent(e){if(this.directiveMatcher instanceof Af){let n=this.directiveMatcher.match(e.componentName);n.length>0?this.trackSelectorlessMatchesAndDirectives(e,n):this.missingDirectives.add(e.componentName)}e.directives.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this))}visitDirective(e){if(this.directiveMatcher instanceof Af){let n=this.directiveMatcher.match(e.name);n.length>0?this.trackSelectorlessMatchesAndDirectives(e,n):this.missingDirectives.add(e.name)}}visitElementOrTemplate(e){if(this.directiveMatcher instanceof If){let n=[],r=pR(e);this.directiveMatcher.match(r,(i,s)=>n.push(...s)),this.trackSelectorBasedBindingsAndDirectives(e,n)}else e.references.forEach(n=>{n.value.trim()===""&&this.references.set(n,e)});e.directives.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this))}trackMatchedDirectives(e,n){n.length>0&&(this.directives.set(e,n),this.isInDeferBlock||this.eagerDirectives.push(...n))}trackSelectorlessMatchesAndDirectives(e,n){if(n.length===0)return;this.trackMatchedDirectives(e,n);let r=(i,s,o)=>{i[o].hasBindingPropertyName(s.name)&&this.bindings.set(s,i)};for(let i of n)e.inputs.forEach(s=>r(i,s,"inputs")),e.attributes.forEach(s=>r(i,s,"inputs")),e.outputs.forEach(s=>r(i,s,"outputs"));e.references.forEach(i=>this.references.set(i,{directive:n[0],node:e}))}trackSelectorBasedBindingsAndDirectives(e,n){this.trackMatchedDirectives(e,n),e.references.forEach(i=>{let s=null;if(i.value.trim()==="")s=n.find(o=>o.isComponent)||null;else if(s=n.find(o=>o.exportAs!==null&&o.exportAs.some(a=>a===i.value))||null,s===null)return;s!==null?this.references.set(i,{directive:s,node:e}):this.references.set(i,e)});let r=(i,s)=>{let o=n.find(l=>l[s].hasBindingPropertyName(i.name)),a=o!==void 0?o:e;this.bindings.set(i,a)};e.inputs.forEach(i=>r(i,"inputs")),e.attributes.forEach(i=>r(i,"inputs")),e instanceof Rn&&e.templateAttrs.forEach(i=>r(i,"inputs")),e.outputs.forEach(i=>r(i,"outputs"))}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitLetDeclaration(e){}},Oh=class t extends o0{bindings;symbols;usedPipes;eagerPipes;deferBlocks;nestingLevel;scope;rootNode;level;visitNode=e=>e.visit(this);constructor(e,n,r,i,s,o,a,l,c){super(),this.bindings=e,this.symbols=n,this.usedPipes=r,this.eagerPipes=i,this.deferBlocks=s,this.nestingLevel=o,this.scope=a,this.rootNode=l,this.level=c}static applyWithScope(e,n,r,i,s,o,a,l){let c=e instanceof Rn?e:null;new t(r,i,o,a,l,s,n,c,0).ingest(e)}ingest(e){if(e instanceof Rn)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Ks)e.expressionAlias!==null&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Va)this.visitNode(e.item),e.contextVariables.forEach(n=>this.visitNode(n)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof fo){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.push([e,this.scope]),e.children.forEach(n=>n.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof Gc||e instanceof qc||e instanceof Hc||e instanceof Uc||e instanceof $c||e instanceof Ba?(e.children.forEach(n=>n.visit(this)),this.nestingLevel.set(e,this.level)):e instanceof Wc?this.nestingLevel.set(e,0):e.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.directives.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitReference(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.hydrateTriggers.when?.value.visit(this),e.hydrateTriggers.never?.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlockCase(e){e.expression?.visit(this)}visitSwitchBlockCaseGroup(e){e.cases.forEach(n=>n.visit(this)),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){super.visitLetDeclaration(e),this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitPipe(e,n){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,n)}visitPropertyRead(e,n){return this.maybeMap(e,e.name),super.visitPropertyRead(e,n)}visitSafePropertyRead(e,n){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,n)}ingestScopedNode(e){let n=this.scope.getChildScope(e);new t(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,n,e,this.level+1).ingest(e)}maybeMap(e,n){if(!(e.receiver instanceof ii))return;let r=this.scope.lookup(n);r!==null&&this.bindings.set(e,r)}},c0=class{target;directives;eagerDirectives;missingDirectives;bindings;references;exprTargets;symbols;nestingLevel;scopedNodeEntities;usedPipes;eagerPipes;deferredBlocks;deferredScopes;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){this.target=e,this.directives=n,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o,this.exprTargets=a,this.symbols=l,this.nestingLevel=c,this.scopedNodeEntities=u,this.usedPipes=h,this.eagerPipes=p,this.deferredBlocks=m.map(g=>g[0]),this.deferredScopes=new Map(m)}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){let e=new Set;return this.directives.forEach(n=>n.forEach(r=>e.add(r))),Array.from(e.values())}getEagerlyUsedDirectives(){let e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return this.deferredBlocks}getDeferredTriggerTarget(e,n){if(!(n instanceof Qf)&&!(n instanceof Bc)&&!(n instanceof Kf))return null;let r=n.reference;if(r===null){let s=null;if(e.placeholder!==null){for(let o of e.placeholder.children)if(!(o instanceof Uh)){if(s!==null)return null;o instanceof si&&(s=o)}}return s}let i=this.findEntityInScope(e,r);if(i instanceof jc&&this.getDefinitionNodeOfSymbol(i)!==e){let s=this.getReferenceTarget(i);if(s!==null)return this.referenceTargetToElement(s)}if(e.placeholder!==null){let s=this.findEntityInScope(e.placeholder,r),o=s instanceof jc?this.getReferenceTarget(s):null;if(o!==null)return this.referenceTargetToElement(o)}return null}isDeferred(e){for(let n of this.deferredBlocks){if(!this.deferredScopes.has(n))continue;let r=[this.deferredScopes.get(n)];for(;r.length>0;){let i=r.pop();if(i.elementLikeInScope.has(e))return!0;r.push(...i.childScopes.values())}}return!1}referencedDirectiveExists(e){return!this.missingDirectives.has(e)}findEntityInScope(e,n){let r=this.getEntitiesInScope(e);for(let i of r)if(i.name===n)return i;return null}referenceTargetToElement(e){return e instanceof si?e:e instanceof Rn||e.node instanceof pc||e.node instanceof Px||e.node instanceof Wc?null:this.referenceTargetToElement(e.node)}};function p3(t,e){let n=new Map;function r(s){if(n.has(s.rootNode))return n.get(s.rootNode);let o=s.namedEntities,a;return s.parentScope!==null?a=new Map([...r(s.parentScope),...o]):a=new Map(o),n.set(s.rootNode,a),a}let i=[t];for(;i.length>0;){let s=i.pop();for(let o of s.childScopes.values())i.push(o);r(s)}for(let[s,o]of n)e.set(s,new Set(o.values()))}var u0=class{},d0=class{jitEvaluator;FactoryTarget=Ci;ResourceLoader=u0;elementSchemaRegistry=new Wa;constructor(e=new fy){this.jitEvaluator=e}compilePipe(e,n,r){let i={name:r.name,type:yt(r.type),typeArgumentCount:0,deps:null,pipeName:r.pipeName,pure:r.pure,isStandalone:r.isStandalone},s=lb(i);return this.jitExpression(s.expression,e,n,[])}compilePipeDeclaration(e,n,r){let i=M3(r),s=lb(i);return this.jitExpression(s.expression,e,n,[])}compileInjectable(e,n,r){let{expression:i,statements:s}=XS({name:r.name,type:yt(r.type),typeArgumentCount:r.typeArgumentCount,providedIn:xx(r.providedIn),useClass:ya(r,"useClass"),useFactory:bx(r,"useFactory"),useValue:ya(r,"useValue"),useExisting:ya(r,"useExisting"),deps:r.deps?.map(nI)},!0);return this.jitExpression(i,e,n,s)}compileInjectableDeclaration(e,n,r){let{expression:i,statements:s}=XS({name:r.type.name,type:yt(r.type),typeArgumentCount:0,providedIn:xx(r.providedIn),useClass:ya(r,"useClass"),useFactory:bx(r,"useFactory"),useValue:ya(r,"useValue"),useExisting:ya(r,"useExisting"),deps:r.deps?.map(Tx)},!0);return this.jitExpression(i,e,n,s)}compileInjector(e,n,r){let i={name:r.name,type:yt(r.type),providers:r.providers&&r.providers.length>0?new _e(r.providers):null,imports:r.imports.map(o=>new _e(o))},s=ab(i);return this.jitExpression(s.expression,e,n,[])}compileInjectorDeclaration(e,n,r){let i=N3(r),s=ab(i);return this.jitExpression(s.expression,e,n,[])}compileNgModule(e,n,r){let i={kind:Xi.Global,type:yt(r.type),bootstrap:r.bootstrap.map(yt),declarations:r.declarations.map(yt),publicDeclarationTypes:null,imports:r.imports.map(yt),includeImportTypes:!0,exports:r.exports.map(yt),selectorScopeMode:oh.Inline,containsForwardDecls:!1,schemas:r.schemas?r.schemas.map(yt):null,id:r.id?new _e(r.id):null},s=PR(i);return this.jitExpression(s.expression,e,n,[])}compileNgModuleDeclaration(e,n,r){let i=LR(r);return this.jitExpression(i,e,n,[])}compileDirective(e,n,r){let i=Cx(r);return this.compileDirectiveFromMeta(e,n,i)}compileDirectiveDeclaration(e,n,r){let i=this.createParseSourceSpan("Directive",r.type.name,n),s=eI(r,i);return this.compileDirectiveFromMeta(e,n,s)}compileDirectiveFromMeta(e,n,r){let i=new Vf,s=Ph(),o=t3(r,i,s);return this.jitExpression(o.expression,e,n,i.statements)}compileComponent(e,n,r){let{template:i,defer:s}=tI(r.template,r.name,n,r.preserveWhitespaces,void 0),o=ne(D(D({},r),Cx(r)),{selector:r.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:i,declarations:r.declarations.map(y3),declarationListEmitMode:0,defer:s,styles:[...r.styles,...i.styles],encapsulation:r.encapsulation,changeDetection:r.changeDetection??null,animations:r.animations!=null?new _e(r.animations):null,viewProviders:r.viewProviders!=null?new _e(r.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null}),a=`ng:///${r.name}.js`;return this.compileComponentFromMeta(e,a,o)}compileComponentDeclaration(e,n,r){let i=this.createParseSourceSpan("Component",r.type.name,n),s=v3(r,i,n);return this.compileComponentFromMeta(e,n,s)}compileComponentFromMeta(e,n,r){let i=new Vf,s=Ph(),o=n3(r,i,s);return this.jitExpression(o.expression,e,n,i.statements)}compileFactory(e,n,r){let i=Hs({name:r.name,type:yt(r.type),typeArgumentCount:r.typeArgumentCount,deps:E3(r.deps),target:r.target});return this.jitExpression(i.expression,e,n,i.statements)}compileFactoryDeclaration(e,n,r){let i=Hs({name:r.type.name,type:yt(r.type),typeArgumentCount:0,deps:Array.isArray(r.deps)?r.deps.map(Tx):r.deps,target:r.target});return this.jitExpression(i.expression,e,n,i.statements)}createParseSourceSpan(e,n,r){return IR(e,n,r)}jitExpression(e,n,r,i){let s=[...i,new _t("$def",e,void 0,Rt.Exported)];return this.jitEvaluator.evaluateStatements(r,s,new py(n),!0).$def}};function _x(t){return ne(D({},t),{isSignal:t.isSignal,predicate:ZT(t.predicate),read:t.read?new _e(t.read):null,static:t.static,emitDistinctChangesOnly:t.emitDistinctChangesOnly})}function Ex(t){return{propertyName:t.propertyName,first:t.first??!1,predicate:ZT(t.predicate),descendants:t.descendants??!1,read:t.read?new _e(t.read):null,static:t.static??!1,emitDistinctChangesOnly:t.emitDistinctChangesOnly??!0,isSignal:!!t.isSignal}}function ZT(t){return Array.isArray(t)?t:y0(new _e(t),1)}function Cx(t){let e=k3(t.inputs||[]),n=Bv(t.outputs||[]),r=t.propMetadata,i={},s={};for(let a in r)r.hasOwnProperty(a)&&r[a].forEach(l=>{T3(l)?i[a]={bindingPropertyName:l.alias||a,classPropertyName:a,required:l.required||!1,isSignal:!!l.isSignal,transformFunction:l.transform!=null?new _e(l.transform):null}:I3(l)&&(s[a]=l.alias||a)});let o=t.hostDirectives?.length?t.hostDirectives.map(a=>typeof a=="function"?{directive:yt(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:yt(a.directive),isForwardReference:!1,inputs:a.inputs?Bv(a.inputs):null,outputs:a.outputs?Bv(a.outputs):null}):null;return ne(D({},t),{typeArgumentCount:0,typeSourceSpan:t.typeSourceSpan,type:yt(t.type),deps:null,host:D({},S3(t.propMetadata,t.typeSourceSpan,t.host)),inputs:D(D({},e),i),outputs:D(D({},n),s),queries:t.queries.map(_x),providers:t.providers!=null?new _e(t.providers):null,viewQueries:t.viewQueries.map(_x),hostDirectives:o})}function eI(t,e){let n=t.hostDirectives?.length?t.hostDirectives.map(r=>({directive:yt(r.directive),isForwardReference:!1,inputs:r.inputs?Sx(r.inputs):null,outputs:r.outputs?Sx(r.outputs):null})):null;return{name:t.type.name,type:yt(t.type),typeSourceSpan:e,selector:t.selector??null,inputs:t.inputs?A3(t.inputs):{},outputs:t.outputs??{},host:m3(t.host),queries:(t.queries??[]).map(Ex),viewQueries:(t.viewQueries??[]).map(Ex),providers:t.providers!==void 0?new _e(t.providers):null,exportAs:t.exportAs??null,usesInheritance:t.usesInheritance??!1,lifecycle:{usesOnChanges:t.usesOnChanges??!1},deps:null,typeArgumentCount:0,isStandalone:t.isStandalone??Rx(t.version),isSignal:t.isSignal??!1,hostDirectives:n}}function m3(t={}){return{attributes:g3(t.attributes??{}),listeners:t.listeners??{},properties:t.properties??{},specialAttributes:{classAttr:t.classAttribute,styleAttr:t.styleAttribute}}}function Sx(t){let e=null;for(let n=1;n<t.length;n+=2)e=e||{},e[t[n-1]]=t[n];return e}function g3(t){let e={};for(let n of Object.keys(t))e[n]=new _e(t[n]);return e}function v3(t,e,n){let{template:r,defer:i}=tI(t.template,t.type.name,n,t.preserveWhitespaces??!1,t.deferBlockDependencies),s=[];if(t.dependencies)for(let a of t.dependencies)switch(a.kind){case"directive":case"component":s.push(Vv(a));break;case"pipe":s.push(_3(a));break}else(t.components||t.directives||t.pipes)&&(t.components&&s.push(...t.components.map(a=>Vv(a,!0))),t.directives&&s.push(...t.directives.map(a=>Vv(a))),t.pipes&&s.push(...w3(t.pipes)));let o=s.some(({kind:a})=>a===$a.Directive||a===$a.NgModule);return ne(D({},eI(t,e)),{template:r,styles:t.styles??[],declarations:s,viewProviders:t.viewProviders!==void 0?new _e(t.viewProviders):null,animations:t.animations!==void 0?new _e(t.animations):null,defer:i,changeDetection:t.changeDetection??h0.Default,encapsulation:t.encapsulation??$s.Emulated,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null,hasDirectiveDependencies:o})}function y3(t){return ne(D({},t),{type:new _e(t.type)})}function Vv(t,e=null){return{kind:$a.Directive,isComponent:e||t.kind==="component",selector:t.selector,type:new _e(t.type),inputs:t.inputs??[],outputs:t.outputs??[],exportAs:t.exportAs??null}}function w3(t){return t?Object.keys(t).map(e=>({kind:$a.Pipe,name:e,type:new _e(t[e])})):[]}function _3(t){return{kind:$a.Pipe,name:t.name,type:new _e(t.type)}}function tI(t,e,n,r,i){let s=Q$(t,n,{preserveWhitespaces:r});if(s.errors!==null){let l=s.errors.map(c=>c.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${l}`)}let a=new a0(null).bind({template:s.nodes});return{template:s,defer:C3(a,i)}}function ya(t,e){if(t.hasOwnProperty(e))return y0(new _e(t[e]),0)}function bx(t,e){if(t.hasOwnProperty(e))return new _e(t[e])}function xx(t){let e=typeof t=="function"?new _e(t):new Ot(t??null);return y0(e,0)}function E3(t){return t==null?null:t.map(nI)}function nI(t){let e=t.attribute!=null,n=t.token===null?null:new _e(t.token),r=e?new _e(t.attribute):n;return rI(r,e,t.host,t.optional,t.self,t.skipSelf)}function Tx(t){let e=t.attribute??!1,n=t.token===null?null:new _e(t.token);return rI(n,e,t.host??!1,t.optional??!1,t.self??!1,t.skipSelf??!1)}function rI(t,e,n,r,i,s){let o=e?I("unknown"):null;return{token:t,attributeNameType:o,host:n,optional:r,self:i,skipSelf:s}}function C3(t,e){let n=t.getDeferBlocks(),r=new Map;for(let i=0;i<n.length;i++){let s=e?.[i];r.set(n[i],s?new _e(s):null)}return{mode:0,blocks:r}}function S3(t,e,n){let r=u3(n||{}),i=d3(r,e);if(i.length)throw new Error(i.map(s=>s.msg).join(`
`));for(let s in t)t.hasOwnProperty(s)&&t[s].forEach(o=>{b3(o)?r.properties[o.hostPropertyName||s]=K2("this",s):x3(o)&&(r.listeners[o.eventName||s]=`${s}(${(o.args||[]).join(",")})`)});return r}function b3(t){return t.ngMetadataName==="HostBinding"}function x3(t){return t.ngMetadataName==="HostListener"}function T3(t){return t.ngMetadataName==="Input"}function I3(t){return t.ngMetadataName==="Output"}function A3(t){return Object.keys(t).reduce((e,n)=>{let r=t[n];return typeof r=="string"||Array.isArray(r)?e[n]=D3(r):e[n]={bindingPropertyName:r.publicName,classPropertyName:n,transformFunction:r.transformFunction!==null?new _e(r.transformFunction):null,required:r.isRequired,isSignal:r.isSignal},e},{})}function D3(t){return typeof t=="string"?{bindingPropertyName:t,classPropertyName:t,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:t[0],classPropertyName:t[1],transformFunction:t[2]?new _e(t[2]):null,required:!1,isSignal:!1}}function k3(t){return t.reduce((e,n)=>{if(typeof n=="string"){let[r,i]=iI(n);e[i]={bindingPropertyName:r,classPropertyName:i,required:!1,isSignal:!1,transformFunction:null}}else e[n.name]={bindingPropertyName:n.alias||n.name,classPropertyName:n.name,required:n.required||!1,isSignal:!1,transformFunction:n.transform!=null?new _e(n.transform):null};return e},{})}function Bv(t){return t.reduce((e,n)=>{let[r,i]=iI(n);return e[i]=r,e},{})}function iI(t){let[e,n]=t.split(":",2).map(r=>r.trim());return[n??e,e]}function M3(t){return{name:t.type.name,type:yt(t.type),typeArgumentCount:0,pipeName:t.name,deps:null,pure:t.pure??!0,isStandalone:t.isStandalone??Rx(t.version)}}function N3(t){return{name:t.type.name,type:yt(t.type),providers:t.providers!==void 0&&t.providers.length>0?new _e(t.providers):null,imports:t.imports!==void 0?t.imports.map(e=>new _e(e)):[]}}function R3(t){let e=t.ng||(t.ng={});e.\u0275compilerFacade=new d0}var f0=class{closedByParent=!1;implicitNamespacePrefix=null;isVoid=!1;ignoreFirstLf=!1;canSelfClose=!0;preventNamespaceInheritance=!1;requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return Jr.PARSABLE_DATA}},yX=new f0;var wX=new jv("21.1.4");R3(hc);var jt=null,Wh=!1,H0=1,P3=null,Bn=Symbol("SIGNAL");function se(t){let e=jt;return jt=t,e}function Jh(){return jt}var Xa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function G0(t){if(Wh)throw new Error("");if(jt===null)return;jt.consumerOnSignalRead(t);let e=jt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=jt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:jt.producers,n!==void 0&&n.producer===t)){jt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===jt&&(!r||O3(i,jt)))return;let s=el(jt),o={producer:t,consumer:jt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};jt.producersTail=o,e!==void 0?e.nextProducer=o:jt.producers=o,s&&lI(t,o)}function sI(){H0++}function q0(t){if(!(el(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===H0)){if(!t.producerMustRecompute(t)&&!Kh(t)){$0(t);return}t.producerRecomputeValue(t),$0(t)}}function j0(t){if(t.consumers===void 0)return;let e=Wh;Wh=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||L3(r)}}finally{Wh=e}}function W0(){return jt?.consumerAllowSignalWrites!==!1}function L3(t){t.dirty=!0,j0(t),t.consumerMarkedDirty?.(t)}function $0(t){t.dirty=!1,t.lastCleanEpoch=H0}function _u(t){return t&&oI(t),se(t)}function oI(t){t.producersTail=void 0,t.recomputing=!0}function Yh(t,e){se(e),t&&aI(t)}function aI(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(el(t))do n=z0(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Kh(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(q0(n),r!==n.version))return!0}return!1}function Za(t){if(el(t)){let e=t.producers;for(;e!==void 0;)e=z0(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function lI(t,e){let n=t.consumersTail,r=el(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)lI(i.producer,i)}function z0(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!el(e)){let s=e.producers;for(;s!==void 0;)s=z0(s)}return n}function el(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function J0(t){P3?.(t)}function O3(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Y0(t,e){return Object.is(t,e)}function Qh(t,e){let n=Object.create(F3);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(q0(n),G0(n),n.value===zh)throw n.error;return n.value};return r[Bn]=n,J0(n),r}var B0=Symbol("UNSET"),U0=Symbol("COMPUTING"),zh=Symbol("ERRORED"),F3=ne(D({},Xa),{value:B0,dirty:!0,error:null,equal:Y0,kind:"computed",producerMustRecompute(t){return t.value===B0||t.value===U0},producerRecomputeValue(t){if(t.value===U0)throw new Error("");let e=t.value;t.value=U0;let n=_u(t),r,i=!1;try{r=t.computation(),se(null),i=e!==B0&&e!==zh&&r!==zh&&t.equal(e,r)}catch(s){r=zh,t.error=s}finally{Yh(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function V3(){throw new Error}var cI=V3;function uI(t){cI(t)}function K0(t){cI=t}var B3=null;function Q0(t,e){let n=Object.create(hI);n.value=t,e!==void 0&&(n.equal=e);let r=()=>dI(n);return r[Bn]=n,J0(n),[r,o=>X0(n,o),o=>fI(n,o)]}function dI(t){return G0(t),t.value}function X0(t,e){W0()||uI(t),t.equal(t.value,e)||(t.value=e,U3(t))}function fI(t,e){W0()||uI(t),X0(t,e(t.value))}var hI=ne(D({},Xa),{equal:Y0,value:void 0,kind:"signal"});function U3(t){t.version++,sI(),j0(t),B3?.(t)}function Z0(t){let e=se(null);try{return t()}finally{se(e)}}var ew=ne(D({},Xa),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function tw(t){if(t.dirty=!1,t.version>0&&!Kh(t))return;t.version++;let e=_u(t);try{t.cleanup(),t.fn()}finally{Yh(t,e)}}function Fe(t){return typeof t=="function"}function Xh(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zh=Xh(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Eu(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var sn=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Fe(r))try{r()}catch(s){e=s instanceof Zh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{pI(s)}catch(o){e=e??[],o instanceof Zh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)pI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Eu(n,e)}remove(e){let{_finalizers:n}=this;n&&Eu(n,e),e instanceof t&&e._removeParent(this)}};sn.EMPTY=(()=>{let t=new sn;return t.closed=!0,t})();var nw=sn.EMPTY;function ep(t){return t instanceof sn||t&&"closed"in t&&Fe(t.remove)&&Fe(t.add)&&Fe(t.unsubscribe)}function pI(t){Fe(t)?t():t.unsubscribe()}var Cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var tl={setTimeout(t,e,...n){let{delegate:r}=tl;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=tl;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function tp(t){tl.setTimeout(()=>{let{onUnhandledError:e}=Cr;if(e)e(t);else throw t})}function rw(){}var mI=iw("C",void 0,void 0);function gI(t){return iw("E",void 0,t)}function vI(t){return iw("N",t,void 0)}function iw(t,e,n){return{kind:t,value:e,error:n}}var _o=null;function nl(t){if(Cr.useDeprecatedSynchronousErrorHandling){let e=!_o;if(e&&(_o={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=_o;if(_o=null,n)throw r}}else t()}function yI(t){Cr.useDeprecatedSynchronousErrorHandling&&_o&&(_o.errorThrown=!0,_o.error=t)}var Eo=class extends sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ep(e)&&e.add(this)):this.destination=G3}static create(e,n,r){return new rl(e,n,r)}next(e){this.isStopped?ow(vI(e),this):this._next(e)}error(e){this.isStopped?ow(gI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ow(mI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$3=Function.prototype.bind;function sw(t,e){return $3.call(t,e)}var aw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){np(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){np(r)}else np(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){np(n)}}},rl=class extends Eo{constructor(e,n,r){super();let i;if(Fe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Cr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sw(e.next,s),error:e.error&&sw(e.error,s),complete:e.complete&&sw(e.complete,s)}):i=e}this.destination=new aw(i)}};function np(t){Cr.useDeprecatedSynchronousErrorHandling?yI(t):tp(t)}function H3(t){throw t}function ow(t,e){let{onStoppedNotification:n}=Cr;n&&tl.setTimeout(()=>n(t,e))}var G3={closed:!0,next:rw,error:H3,complete:rw};var il=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wI(t){return t}function _I(t){return t.length===0?wI:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ot=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=j3(n)?n:new rl(n,r,i);return nl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=EI(r),new r((i,s)=>{let o=new rl({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[il](){return this}pipe(...n){return _I(n)(this)}toPromise(n){return n=EI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function EI(t){var e;return(e=t??Cr.Promise)!==null&&e!==void 0?e:Promise}function q3(t){return t&&Fe(t.next)&&Fe(t.error)&&Fe(t.complete)}function j3(t){return t&&t instanceof Eo||q3(t)&&ep(t)}function W3(t){return Fe(t?.lift)}function sl(t){return e=>{if(W3(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ol(t,e,n,r,i){return new lw(t,e,n,r,i)}var lw=class extends Eo{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var CI=Xh(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Sr=(()=>{class t extends ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new rp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new CI}next(n){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?nw:(this.currentObservers=null,s.push(n),new sn(()=>{this.currentObservers=null,Eu(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ot;return n.source=this,n}}return t.create=(e,n)=>new rp(e,n),t})(),rp=class extends Sr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:nw}};var Cu=class extends Sr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function z3(t){return t[t.length-1]}function SI(t){return Fe(z3(t))?t.pop():void 0}function So(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ip(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function bI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(t){return this instanceof Co?(this.v=t,this):new Co(t)}function xI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(g){return Promise.resolve(g).then(m,h)}}function a(m,g){r[m]&&(i[m]=function(y){return new Promise(function(_,w){s.push([m,y,_,w])>1||l(m,y)})},g&&(i[m]=g(i[m])))}function l(m,g){try{c(r[m](g))}catch(y){p(s[0][3],y)}}function c(m){m.value instanceof Co?Promise.resolve(m.value.v).then(u,h):p(s[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function p(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function TI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bI=="function"?bI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var sp=t=>t&&typeof t.length=="number"&&typeof t!="function";function op(t){return Fe(t?.then)}function ap(t){return Fe(t[il])}function lp(t){return Symbol.asyncIterator&&Fe(t?.[Symbol.asyncIterator])}function cp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function J3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var up=J3();function dp(t){return Fe(t?.[up])}function fp(t){return xI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Co(n.read());if(i)return yield Co(void 0);yield yield Co(r)}}finally{n.releaseLock()}})}function hp(t){return Fe(t?.getReader)}function ps(t){if(t instanceof ot)return t;if(t!=null){if(ap(t))return Y3(t);if(sp(t))return K3(t);if(op(t))return Q3(t);if(lp(t))return II(t);if(dp(t))return X3(t);if(hp(t))return Z3(t)}throw cp(t)}function Y3(t){return new ot(e=>{let n=t[il]();if(Fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function K3(t){return new ot(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Q3(t){return new ot(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,tp)})}function X3(t){return new ot(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function II(t){return new ot(e=>{e8(t,e).catch(n=>e.error(n))})}function Z3(t){return II(fp(t))}function e8(t,e){var n,r,i,s;return ip(this,void 0,void 0,function*(){try{for(n=TI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ci(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function pp(t,e=0){return sl((n,r)=>{n.subscribe(ol(r,i=>ci(r,t,()=>r.next(i),e),()=>ci(r,t,()=>r.complete(),e),i=>ci(r,t,()=>r.error(i),e)))})}function mp(t,e=0){return sl((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function AI(t,e){return ps(t).pipe(mp(e),pp(e))}function DI(t,e){return ps(t).pipe(mp(e),pp(e))}function kI(t,e){return new ot(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function MI(t,e){return new ot(n=>{let r;return ci(n,e,()=>{r=t[up](),ci(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}function gp(t,e){if(!t)throw new Error("Iterable cannot be null");return new ot(n=>{ci(n,e,()=>{let r=t[Symbol.asyncIterator]();ci(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function NI(t,e){return gp(fp(t),e)}function RI(t,e){if(t!=null){if(ap(t))return AI(t,e);if(sp(t))return kI(t,e);if(op(t))return DI(t,e);if(lp(t))return gp(t,e);if(dp(t))return MI(t,e);if(hp(t))return NI(t,e)}throw cp(t)}function cw(t,e){return e?RI(t,e):ps(t)}function bo(t,e){return sl((n,r)=>{let i=0;n.subscribe(ol(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:t8}=Array;function n8(t,e){return t8(e)?t(...e):t(e)}function PI(t){return bo(e=>n8(t,e))}var{isArray:r8}=Array,{getPrototypeOf:i8,prototype:s8,keys:o8}=Object;function LI(t){if(t.length===1){let e=t[0];if(r8(e))return{args:e,keys:null};if(a8(e)){let n=o8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function a8(t){return t&&typeof t=="object"&&i8(t)===s8}function OI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function uw(...t){let e=SI(t),{args:n,keys:r}=LI(t),i=new ot(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;ps(n[u]).subscribe(ol(s,p=>{h||(h=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?OI(r,a):a),s.complete())}))}});return e?i.pipe(PI(e)):i}var dw;function vp(){return dw}function ui(t){let e=dw;return dw=t,e}var FI=Symbol("NotFound");function al(t){return t===FI||t?.name==="\u0275NotFound"}var bp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ue=class extends Error{code;constructor(e,n){super(xp(e,n)),this.code=e}};function l8(t){return`NG0${Math.abs(t)}`}function xp(t,e){return`${l8(t)}${e?": "+e:""}`}var Do=globalThis;function qe(t){for(let e in t)if(t[e]===qe)return e;throw Error("")}function HI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ms(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ms).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Tp(t,e){return t?e?`${t} ${e}`:t:e||""}var c8=qe({__forward_ref__:qe});function _n(t){return t.__forward_ref__=_n,t.toString=function(){return ms(this())},t}function Vt(t){return bw(t)?t():t}function bw(t){return typeof t=="function"&&t.hasOwnProperty(c8)&&t.__forward_ref__===_n}function Ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _s(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ip(t){return u8(t,Ap)}function u8(t,e){return t.hasOwnProperty(e)&&t[e]||null}function d8(t){let e=t?.[Ap]??null;return e||null}function hw(t){return t&&t.hasOwnProperty(wp)?t[wp]:null}var Ap=qe({\u0275prov:qe}),wp=qe({\u0275inj:qe}),Ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xw(t){return t&&!!t.\u0275providers}var Tw=qe({\u0275cmp:qe}),Iw=qe({\u0275dir:qe}),Aw=qe({\u0275pipe:qe});var bu=qe({\u0275fac:qe}),ko=qe({__NG_ELEMENT_ID__:qe}),VI=qe({__NG_ENV_ID__:qe});function Mo(t){return kw(t,"@Component"),t[Tw]||null}function Dw(t){return kw(t,"@Directive"),t[Iw]||null}function GI(t){return kw(t,"@Pipe"),t[Aw]||null}function kw(t,e){if(t==null)throw new ue(-919,!1)}function cl(t){return typeof t=="string"?t:t==null?"":String(t)}var qI=qe({ngErrorCode:qe}),f8=qe({ngErrorMessage:qe}),h8=qe({ngTokenPath:qe});function Mw(t,e){return jI("",-200,e)}function Dp(t,e){throw new ue(-201,!1)}function jI(t,e,n){let r=new ue(e,t);return r[qI]=e,r[f8]=t,n&&(r[h8]=n),r}function p8(t){return t[qI]}var pw;function WI(){return pw}function on(t){let e=pw;return pw=t,e}function Nw(t,e,n){let r=Ip(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Dp(t,"")}var m8={},xo=m8,g8="__NG_DI_FLAG__",mw=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=To(n)||0;try{return this.injector.get(e,r&8?null:xo,r)}catch(i){if(al(i))return i;throw i}}};function v8(t,e=0){let n=vp();if(n===void 0)throw new ue(-203,!1);if(n===null)return Nw(t,void 0,e);{let r=y8(e),i=n.retrieve(t,r);if(al(i)){if(r.optional)return null;throw i}return i}}function He(t,e=0){return(WI()||v8)(Vt(t),e)}function Q(t,e){return He(t,To(e))}function To(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function y8(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function gw(t){let e=[];for(let n=0;n<t.length;n++){let r=Vt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],l=w8(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(He(i,s))}else e.push(He(r))}return e}function w8(t){return t[g8]}function gs(t,e){let n=t.hasOwnProperty(bu);return n?t[bu]:null}function zI(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function JI(t){return t.flat(Number.POSITIVE_INFINITY)}function kp(t,e){t.forEach(n=>Array.isArray(n)?kp(n,e):e(n))}function Rw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Du(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function YI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function Mp(t,e,n){let r=ul(t,e);return r>=0?t[r|1]=n:(r=~r,YI(t,r,e,n)),r}function Np(t,e){let n=ul(t,e);if(n>=0)return t[n|1]}function ul(t,e){return _8(t,e,1)}function _8(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Es={},an=[],ku=new Ce(""),Pw=new Ce("",-1),Lw=new Ce(""),xu=class{get(e,n=xo){if(n===xo){let i=jI("",-201);throw i.name="\u0275NotFound",i}return n}};function Ow(t){return{\u0275providers:t}}function KI(...t){return{\u0275providers:Fw(!0,t),\u0275fromNgModule:!0}}function Fw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return kp(e,o=>{let a=o;_p(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QI(i,s),n}function QI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Vw(i,s=>{e(s,r)})}}function _p(t,e,n,r){if(t=Vt(t),!t)return!1;let i=null,s=hw(t),o=!s&&Mo(t);if(!s&&!o){let l=t.ngModule;if(s=hw(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)_p(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;kp(s.imports,u=>{_p(u,e,n,r)&&(c||=[],c.push(u))}),c!==void 0&&QI(c,e)}if(!a){let c=gs(i)||(()=>new i);e({provide:i,useFactory:c,deps:an},i),e({provide:Lw,useValue:i,multi:!0},i),e({provide:ku,useValue:()=>He(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;Vw(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Vw(t,e){for(let n of t)xw(n)&&(n=n.\u0275providers),Array.isArray(n)?Vw(n,e):e(n)}var E8=qe({provide:String,useValue:qe});function XI(t){return t!==null&&typeof t=="object"&&E8 in t}function C8(t){return!!(t&&t.useExisting)}function S8(t){return!!(t&&t.useFactory)}function Io(t){return typeof t=="function"}function ZI(t){return!!t.useClass}var Mu=new Ce(""),yp={},BI={},fw;function Nu(){return fw===void 0&&(fw=new xu),fw}var nr=class{},Ao=class extends nr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,yw(e,o=>this.processProvider(o)),this.records.set(Pw,ll(void 0,this)),i.has("environment")&&this.records.set(nr,ll(void 0,this));let s=this.records.get(Mu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lw,an,{self:!0}))}retrieve(e,n){let r=To(n)||0;try{return this.get(e,xo,r)}catch(i){if(al(i))return i;throw i}}destroy(){Su(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return Su(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Su(this);let n=ui(this),r=on(void 0),i;try{return e()}finally{ui(n),on(r)}}get(e,n=xo,r){if(Su(this),e.hasOwnProperty(VI))return e[VI](this);let i=To(r),s,o=ui(this),a=on(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let u=A8(e)&&Ip(e);u&&this.injectableDefInScope(u)?c=ll(vw(e),yp):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?Nu():this.parent;return n=i&8&&n===xo?null:n,l.get(e,n)}catch(l){let c=p8(l);throw c===-200||c===-201?new ue(c,null):l}finally{on(a),ui(o)}}resolveInjectorInitializers(){let e=se(null),n=ui(this),r=on(void 0),i;try{let s=this.get(ku,an,{self:!0});for(let o of s)o()}finally{ui(n),on(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ms(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Vt(e);let n=Io(e)?e:Vt(e&&e.provide),r=x8(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ll(void 0,yp,!0),i.factory=()=>gw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{if(n.value===BI)throw Mw(ms(e));return n.value===yp&&(n.value=BI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&I8(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Vt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function vw(t){let e=Ip(t),n=e!==null?e.factory:gs(t);if(n!==null)return n;if(t instanceof Ce)throw new ue(204,!1);if(t instanceof Function)return b8(t);throw new ue(204,!1)}function b8(t){if(t.length>0)throw new ue(204,!1);let n=d8(t);return n!==null?()=>n.factory(t):()=>new t}function x8(t){if(XI(t))return ll(void 0,t.useValue);{let e=Bw(t);return ll(e,yp)}}function Bw(t,e,n){let r;if(Io(t)){let i=Vt(t);return gs(i)||vw(i)}else if(XI(t))r=()=>Vt(t.useValue);else if(S8(t))r=()=>t.useFactory(...gw(t.deps||[]));else if(C8(t))r=(i,s)=>He(Vt(t.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Vt(t&&(t.useClass||t.provide));if(T8(t))r=()=>new i(...gw(t.deps));else return gs(i)||vw(i)}return r}function Su(t){if(t.destroyed)throw new ue(205,!1)}function ll(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function T8(t){return!!t.deps}function I8(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function A8(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function yw(t,e){for(let n of t)Array.isArray(n)?yw(n,e):n&&xw(n)?yw(n.\u0275providers,e):e(n)}function Rp(t,e){let n;t instanceof Ao?(Su(t),n=t):n=new mw(t);let r,i=ui(n),s=on(void 0);try{return e()}finally{ui(i),on(s)}}function eA(){return WI()!==void 0||vp()!=null}var br=0,oe=1,pe=2,Et=3,rr=4,ir=5,dl=6,fl=7,at=8,Ni=9,hi=10,ze=11,hl=12,Uw=13,No=14,$n=15,Cs=16,Ro=17,pi=18,Ri=19,$w=20,Mi=21,Pp=22,vs=23,Hn=24,Po=25,Lo=26,lt=27,tA=1,Hw=6,Ss=7,Ru=8,Oo=9,rt=10;function mi(t){return Array.isArray(t)&&typeof t[tA]=="object"}function xr(t){return Array.isArray(t)&&t[tA]===!0}function Gw(t){return(t.flags&4)!==0}function bs(t){return t.componentOffset>-1}function Lp(t){return(t.flags&1)===1}function gi(t){return!!t.template}function pl(t){return(t[pe]&512)!==0}function Fo(t){return(t[pe]&256)===256}var qw="svg",nA="math";function sr(t){for(;Array.isArray(t);)t=t[br];return t}function jw(t,e){return sr(e[t])}function Tr(t,e){return sr(e[t.index])}function Pu(t,e){return t.data[e]}function Ww(t,e){return t[e]}function Lu(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function or(t,e){let n=e[t];return mi(n)?n:n[br]}function rA(t){return(t[pe]&4)===4}function Op(t){return(t[pe]&128)===128}function iA(t){return xr(t[Et])}function vi(t,e){return e==null?null:t[e]}function zw(t){t[Ro]=0}function Jw(t){t[pe]&1024||(t[pe]|=1024,Op(t)&&Vo(t))}function sA(t,e){for(;t>0;)e=e[No],t--;return e}function Ou(t){return!!(t[pe]&9216||t[Hn]?.dirty)}function Fp(t){t[hi].changeDetectionScheduler?.notify(8),t[pe]&64&&(t[pe]|=1024),Ou(t)&&Vo(t)}function Vo(t){t[hi].changeDetectionScheduler?.notify(0);let e=ys(t);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!Op(e)));)e=ys(e)}function Yw(t,e){if(Fo(t))throw new ue(911,!1);t[Mi]===null&&(t[Mi]=[]),t[Mi].push(e)}function oA(t,e){if(t[Mi]===null)return;let n=t[Mi].indexOf(e);n!==-1&&t[Mi].splice(n,1)}function ys(t){let e=t[Et];return xr(e)?e[Et]:e}function Kw(t){return t[fl]??=[]}function Qw(t){return t.cleanup??=[]}function aA(t,e,n,r){let i=Kw(e);i.push(n),t.firstCreatePass&&Qw(t).push(r,i.length-1)}var we={lFrame:CA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ww=!1;function lA(){return we.lFrame.elementDepthCount}function cA(){we.lFrame.elementDepthCount++}function Xw(){we.lFrame.elementDepthCount--}function uA(){return we.bindingsEnabled}function dA(){return we.skipHydrationRootTNode!==null}function Zw(t){return we.skipHydrationRootTNode===t}function e_(){we.skipHydrationRootTNode=null}function me(){return we.lFrame.lView}function et(){return we.lFrame.tView}function G(t){return we.lFrame.contextLView=t,t[at]}function q(t){return we.lFrame.contextLView=null,t}function zt(){let t=t_();for(;t!==null&&t.type===64;)t=t.parent;return t}function t_(){return we.lFrame.currentTNode}function fA(){let t=we.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bo(t,e){let n=we.lFrame;n.currentTNode=t,n.isParent=e}function n_(){return we.lFrame.isParent}function hA(){we.lFrame.isParent=!1}function pA(){return we.lFrame.contextLView}function r_(){return ww}function Tu(t){let e=ww;return ww=t,e}function i_(){let t=we.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function mA(){return we.lFrame.bindingIndex}function gA(t){return we.lFrame.bindingIndex=t}function xs(){return we.lFrame.bindingIndex++}function Vp(t){let e=we.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function vA(){return we.lFrame.inI18n}function yA(t,e){let n=we.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bp(e)}function wA(){return we.lFrame.currentDirectiveIndex}function Bp(t){we.lFrame.currentDirectiveIndex=t}function _A(t){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function s_(){return we.lFrame.currentQueryIndex}function Up(t){we.lFrame.currentQueryIndex=t}function D8(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[ir]:null}function o_(t,e,n){if(n&4){let i=e,s=t;for(;i=i.parent,i===null&&!(n&1);)if(i=D8(s),i===null||(s=s[No],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=we.lFrame=EA();return r.currentTNode=e,r.lView=t,!0}function $p(t){let e=EA(),n=t[oe];we.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function EA(){let t=we.lFrame,e=t===null?null:t.child;return e===null?CA(t):e}function CA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function SA(){let t=we.lFrame;return we.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var a_=SA;function Hp(){let t=SA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bA(t){return(we.lFrame.contextLView=sA(t,we.lFrame.contextLView))[at]}function Ir(){return we.lFrame.selectedIndex}function Ts(t){we.lFrame.selectedIndex=t}function Fu(){let t=we.lFrame;return Pu(t.tView,t.selectedIndex)}function Je(){we.lFrame.currentNamespace=qw}function Ct(){k8()}function k8(){we.lFrame.currentNamespace=null}function xA(){return we.lFrame.currentNamespace}var TA=!0;function Gp(){return TA}function qp(t){TA=t}function _w(t,e=null,n=null,r){let i=IA(t,e,n,r);return i.resolveInjectorInitializers(),i}function IA(t,e=null,n=null,r,i=new Set){let s=[n||an,KI(t)];return r=r||(typeof t=="object"?void 0:ms(t)),new Ao(s,e||Nu(),r||null,i)}var di=class t{static THROW_IF_NOT_FOUND=xo;static NULL=new xu;static create(e,n){if(Array.isArray(e))return _w({name:""},n,e,"");{let r=e.name??"";return _w({name:r},e.parent,e.providers,r)}}static \u0275prov=Ne({token:t,providedIn:"any",factory:()=>He(Pw)});static __NG_ELEMENT_ID__=-1},Ar=new Ce(""),Is=(()=>{class t{static __NG_ELEMENT_ID__=M8;static __NG_ENV_ID__=n=>n}return t})(),Ep=class extends Is{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Fo(this._lView)}onDestroy(e){let n=this._lView;return Yw(n,e),()=>oA(n,e)}};function M8(){return new Ep(me())}var AA=!1,DA=new Ce(""),ml=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Cu(!1);debugTaskTracker=Q(DA,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ot(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ne({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ew=class extends Sr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,eA()&&(this.destroyRef=Q(Is,{optional:!0})??void 0,this.pendingTasks=Q(ml,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof sn&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Wt=Ew;function Cp(...t){}function l_(t){let e,n;function r(){t=Cp;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function kA(t){return queueMicrotask(()=>t()),()=>{t=Cp}}var c_="isAngularZone",Iu=c_+"_ID",N8=0,Un=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Wt(!1);onMicrotaskEmpty=new Wt(!1);onStable=new Wt(!1);onError=new Wt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=AA}=e;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,L8(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(c_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ue(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,R8,Cp,Cp);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},R8={};function u_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function P8(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){l_(()=>{t.callbackScheduled=!1,Cw(t),t.isCheckStableRunning=!0,u_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Cw(t)}function L8(t){let e=()=>{P8(t)},n=N8++;t._inner=t._inner.fork({name:"angular",properties:{[c_]:!0,[Iu]:n,[Iu+n]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(O8(l))return r.invokeTask(s,o,a,l);try{return UI(t),r.invokeTask(s,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$I(t)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return UI(t),r.invoke(s,o,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!F8(l)&&e(),$I(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Cw(t),u_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Cw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $I(t){t._nesting--,u_(t)}var Au=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Wt;onMicrotaskEmpty=new Wt;onStable=new Wt;onError=new Wt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function O8(t){return MA(t,"__ignore_ng_zone__")}function F8(t){return MA(t,"__scheduler_tick__")}function MA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var fi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Uo=new Ce("",{factory:()=>{let t=Q(Un),e=Q(nr),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(fi),n.handleError(r))})}}}),NA={provide:ku,useValue:()=>{let t=Q(fi,{optional:!0})},multi:!0};function Ge(t,e){let[n,r,i]=Q0(t,e?.equal),s=n,o=s[Bn];return s.set=r,s.update=i,s.asReadonly=RA.bind(s),s}function RA(){let t=this[Bn];if(t.readonlyFn===void 0){let e=()=>this();e[Bn]=t,t.readonlyFn=e}return t.readonlyFn}var Vu=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=V8}return t})();function V8(){return new Vu(me(),zt())}var ws=class{},Bu=new Ce("",{factory:()=>!0});var d_=new Ce("");var jp=(()=>{class t{static \u0275prov=Ne({token:t,providedIn:"root",factory:()=>new Sw})}return t})(),Sw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Sp=class{[Bn];constructor(e){this[Bn]=e}destroy(){this[Bn].destroy()}};function Uu(t,e){let n=e?.injector??Q(di),r=e?.manualCleanup!==!0?n.get(Is):null,i,s=n.get(Vu,null,{optional:!0}),o=n.get(ws);return s!==null?(i=$8(s.view,o,t),r instanceof Ep&&r._lView===s.view&&(r=null)):i=H8(t,n.get(jp),o),i.injector=n,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Sp(i)}var PA=ne(D({},ew),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let t=Tu(!1);try{tw(this)}finally{Tu(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=se(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],se(t)}}}),B8=ne(D({},PA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Za(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.scheduler.remove(this)}}),U8=ne(D({},PA),{consumerMarkedDirty(){this.view[pe]|=8192,Vo(this.view),this.notifier.notify(13)},destroy(){if(Za(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.view[vs]?.delete(this)}});function $8(t,e,n){let r=Object.create(U8);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=LA(r,n),t[vs]??=new Set,t[vs].add(r),r.consumerMarkedDirty(r),r}function H8(t,e,n){let r=Object.create(B8);return r.fn=LA(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function LA(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function Dr(t){return Z0(t)}function Xu(t){return{toString:t}.toString()}function Q8(t){return typeof t=="function"}function lD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Xp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Zu=(()=>{let t=()=>cD;return t.ngInherit=!0,t})();function cD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Z8),X8}function X8(){let t=dD(this),e=t?.current;if(e){let n=t.previous;if(n===Es)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Z8(t,e,n,r,i){let s=this.declaredInputs[r],o=dD(t)||eH(t,{previous:Es,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Xp(c&&c.currentValue,n,l===Es),lD(t,e,i,n)}var uD="__ngSimpleChanges__";function dD(t){return t[uD]||null}function eH(t,e){return t[uD]=e}var OA=[];var Ve=function(t,e=null,n){for(let r=0;r<OA.length;r++){let i=OA[r];i(t,e,n)}},Ae=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ae||{});function tH(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=cD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function nH(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function zp(t,e,n){fD(t,e,3,n)}function Jp(t,e,n,r){(t[pe]&3)===n&&fD(t,e,n,r)}function f_(t,e){let n=t[pe];(n&3)===e&&(n&=16383,n+=1,t[pe]=n)}function fD(t,e,n,r){let i=r!==void 0?t[Ro]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Ro]+=65536),(a<s||s==-1)&&(rH(t,n,e,l),t[Ro]=(t[Ro]&4294901760)+l+2),l++}function FA(t,e){Ve(Ae.LifecycleHookStart,t,e);let n=se(null);try{e.call(t)}finally{se(n),Ve(Ae.LifecycleHookEnd,t,e)}}function rH(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[pe]>>14<t[Ro]>>16&&(t[pe]&3)===e&&(t[pe]+=16384,FA(a,s)):FA(a,s)}var vl=-1,Ho=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function iH(t){return(t.flags&8)!==0}function sH(t){return(t.flags&16)!==0}function oH(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];lH(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function aH(t){return t===3||t===4||t===6}function lH(t){return t.charCodeAt(0)===64}function yl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?VA(t,n,i,null,e[++r]):VA(t,n,i,null,null))}}return t}function VA(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function hD(t){return t!==vl}function Zp(t){return t&32767}function cH(t){return t>>16}function em(t,e){let n=cH(t),r=e;for(;n>0;)r=r[No],n--;return r}var S_=!0;function tm(t){let e=S_;return S_=t,e}var uH=256,pD=uH-1,mD=5,dH=0,yi={};function fH(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ko)&&(r=n[ko]),r==null&&(r=n[ko]=dH++);let i=r&pD,s=1<<i;e.data[t+(i>>mD)]|=s}function nm(t,e){let n=gD(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,h_(r.data,t),h_(e,null),h_(r.blueprint,null));let i=X_(t,e),s=t.injectorIndex;if(hD(i)){let o=Zp(i),a=em(i,e),l=a[oe].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function h_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function X_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ED(i),r===null)return vl;if(n++,i=i[No],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vl}function b_(t,e,n){fH(t,e,n)}function vD(t,e,n){if(n&8||t!==void 0)return t;Dp(e,"NodeInjector")}function yD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ni],s=on(void 0);try{return i?i.get(e,r,n&8):Nw(e,r,n&8)}finally{on(s)}}return vD(r,e,n)}function wD(t,e,n,r=0,i){if(t!==null){if(e[pe]&2048&&!(r&2)){let o=gH(t,e,n,r,yi);if(o!==yi)return o}let s=_D(t,e,n,r,yi);if(s!==yi)return s}return yD(e,n,r,i)}function _D(t,e,n,r,i){let s=pH(n);if(typeof s=="function"){if(!o_(e,t,r))return r&1?vD(i,n,r):yD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Dp(n);else return o}finally{a_()}}else if(typeof s=="number"){let o=null,a=gD(t,e),l=vl,c=r&1?e[$n][ir]:null;for((a===-1||r&4)&&(l=a===-1?X_(t,e):e[a+8],l===vl||!UA(r,!1)?a=-1:(o=e[oe],a=Zp(l),e=em(l,e)));a!==-1;){let u=e[oe];if(BA(s,a,u.data)){let h=hH(a,e,n,o,r,c);if(h!==yi)return h}l=e[a+8],l!==vl&&UA(r,e[oe].data[a+8]===c)&&BA(s,a,e)?(o=u,a=Zp(l),e=em(l,e)):a=-1}}return i}function hH(t,e,n,r,i,s){let o=e[oe],a=o.data[t+8],l=r==null?bs(a)&&S_:r!=o&&(a.type&3)!==0,c=i&1&&s===a,u=Yp(a,o,n,l,c);return u!==null?qu(e,o,u,a,i):yi}function Yp(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,h=r?a:a+u,p=i?a+u:c;for(let m=h;m<p;m++){let g=o[m];if(m<l&&n===g||m>=l&&g.type===n)return m}if(i){let m=o[l];if(m&&gi(m)&&m.type===n)return l}return null}function qu(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof Ho){let a=s;if(a.resolving)throw Mw("");let l=tm(a.canSeeViewProviders);a.resolving=!0;let c=o[n].type||o[n],u,h=a.injectImpl?on(a.injectImpl):null,p=o_(t,r,0);try{s=t[n]=a.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&tH(n,o[n],e)}finally{h!==null&&on(h),tm(l),a.resolving=!1,a_()}}return s}function pH(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ko)?t[ko]:void 0;return typeof e=="number"?e>=0?e&pD:mH:e}function BA(t,e,n){let r=1<<t;return!!(n[e+(t>>mD)]&r)}function UA(t,e){return!(t&2)&&!(t&1&&e)}var $o=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return wD(this._tNode,this._lView,e,To(r),n)}};function mH(){return new $o(zt(),me())}function Pi(t){return Xu(()=>{let e=t.prototype.constructor,n=e[bu]||x_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[bu]||x_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function x_(t){return bw(t)?()=>{let e=x_(Vt(t));return e&&e()}:gs(t)}function gH(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[pe]&2048&&!pl(o);){let a=_D(s,o,n,r|2,yi);if(a!==yi)return a;let l=s.parent;if(!l){let c=o[$w];if(c){let u=c.get(n,yi,r);if(u!==yi)return u}l=ED(o),o=o[No]}s=l}return i}function ED(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[ir]:null}function vH(){return Cl(zt(),me())}function Cl(t,e){return new Pr(Tr(t,e))}var Pr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=vH}return t})();function yH(t){return t instanceof Pr?t.nativeElement:t}function wH(){return this._results[Symbol.iterator]()}var rm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Sr}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=JI(e);(this._changesDetected=!zI(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=wH};function CD(t){return(t.flags&128)===128}var Z_=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Z_||{}),SD=new Map,_H=0;function EH(){return _H++}function CH(t){SD.set(t[Ri],t)}function T_(t){SD.delete(t[Ri])}var $A="__ngContext__";function wl(t,e){mi(e)?(t[$A]=e[Ri],CH(e)):t[$A]=e}function bD(t){return TD(t[hl])}function xD(t){return TD(t[rr])}function TD(t){for(;t!==null&&!xr(t);)t=t[rr];return t}var SH;function eE(t){SH=t}var hm=new Ce("",{factory:()=>bH}),bH="ng";var pm=new Ce(""),ed=new Ce("",{providedIn:"platform",factory:()=>"unknown"});var mm=new Ce("",{factory:()=>Q(Ar).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ID="r";var AD="di";var DD=!1,kD=new Ce("",{factory:()=>DD});var xH=(t,e,n,r)=>{};function TH(t,e,n,r){xH(t,e,n,r)}function tE(t){return(t.flags&32)===32}var IH=()=>null;function MD(t,e,n=!1){return IH(t,e,n)}function ND(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Up(s),a.contentQueries(2,e[o],o)}}}finally{se(r)}}}function I_(t,e,n){Up(0);let r=se(null);try{e(t,n)}finally{se(r)}}function RD(t,e,n){if(Gw(e)){let r=se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{se(r)}}}var Nr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Nr||{});var im=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bp})`}};function gm(t){return t instanceof im?t.changingThisBreaksApplicationSecurity:t}function PD(t,e){let n=LD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${bp})`)}return n===e}function LD(t){return t instanceof im&&t.getTypeName()||null}var AH=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function OD(t){return t=String(t),t.match(AH)?t:"unsafe:"+t}function DH(t,e){return t.createText(e)}function kH(t,e,n){t.setValue(e,n)}function FD(t,e,n){return t.createElement(e,n)}function sm(t,e,n,r,i){t.insertBefore(e,n,r,i)}function VD(t,e,n){t.appendChild(e,n)}function HA(t,e,n,r,i){r!==null?sm(t,e,n,r,i):VD(t,e,n)}function BD(t,e,n,r){t.removeChild(null,e,n,r)}function MH(t,e,n){t.setAttribute(e,"style",n)}function NH(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function UD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&oH(t,e,r),i!==null&&NH(t,e,i),s!==null&&MH(t,e,s)}var nE=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(nE||{});function Sl(t){let e=RH();return e?e.sanitize(nE.URL,t)||"":PD(t,"URL")?gm(t):OD(cl(t))}function RH(){let t=me();return t&&t[hi].sanitizer}function PH(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var $D="ng-template";function LH(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PH(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rE(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function rE(t){return t.type===4&&t.value!==$D}function OH(t,e,n){let r=t.type===4&&!n?$D:t.value;return e===r}function FH(t,e,n){let r=4,i=t.attrs,s=i!==null?UH(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!kr(r)&&!kr(l))return!1;if(o&&kr(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!OH(t,l,n)||l===""&&e.length===1){if(kr(r))return!1;o=!0}}else if(r&8){if(i===null||!LH(t,i,l,n)){if(kr(r))return!1;o=!0}}else{let c=e[++a],u=VH(l,i,rE(t),n);if(u===-1){if(kr(r))return!1;o=!0;continue}if(c!==""){let h;if(u>s?h="":h=i[u+1].toLowerCase(),r&2&&c!==h){if(kr(r))return!1;o=!0}}}}return kr(r)||o}function kr(t){return(t&1)===0}function VH(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return $H(e,t)}function BH(t,e,n=!1){for(let r=0;r<e.length;r++)if(FH(t,e[r],n))return!0;return!1}function UH(t){for(let e=0;e<t.length;e++){let n=t[e];if(aH(n))return e}return t.length}function $H(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function GA(t,e){return t?":not("+e.trim()+")":e}function HH(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!kr(o)&&(e+=GA(s,i),i=""),r=o,s=s||!kr(r);n++}return i!==""&&(e+=GA(s,i)),e}function GH(t){return t.map(HH).join(",")}function qH(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!kr(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var ln={};function iE(t,e,n,r,i,s,o,a,l,c,u){let h=lt+r,p=h+i,m=jH(h,p),g=typeof c=="function"?c():c;return m[oe]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function jH(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ln);return n}function WH(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=iE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sE(t,e,n,r,i,s,o,a,l,c,u){let h=e.blueprint.slice();return h[br]=i,h[pe]=r|4|128|8|64|1024,(c!==null||t&&t[pe]&2048)&&(h[pe]|=2048),zw(h),h[Et]=h[No]=t,h[at]=n,h[hi]=o||t&&t[hi],h[ze]=a||t&&t[ze],h[Ni]=l||t&&t[Ni]||null,h[ir]=s,h[Ri]=EH(),h[dl]=u,h[$w]=c,h[$n]=e.type==2?t[$n]:h,h}function zH(t,e,n){let r=Tr(e,t),i=WH(n),s=t[hi].rendererFactory,o=oE(t,sE(t,i,null,HD(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function HD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function GD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oE(t,e){return t[hl]?t[Uw][rr]=e:t[hl]=e,t[Uw]=e,e}function M(t=1){qD(et(),me(),Ir()+t,!1)}function qD(t,e,n,r){if(!r)if((e[pe]&3)===3){let s=t.preOrderCheckHooks;s!==null&&zp(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Jp(e,s,0,n)}Ts(n)}var vm=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(vm||{});function A_(t,e,n,r){let i=se(null);try{let[s,o,a]=t.inputs[n],l=null;(o&vm.SignalBased)!==0&&(l=e[s][Bn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,s):lD(e,l,s,r)}finally{se(i)}}var wi=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(wi||{}),JH;function aE(t,e){return JH(t,e)}var Go=new Set,ym=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(ym||{}),Wo=new Ce(""),qA=new Set;function Li(t){qA.has(t)||(qA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var lE=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ne({token:t,providedIn:"root",factory:()=>new t})}return t})(),jD=[0,1,2,3],WD=(()=>{class t{ngZone=Q(Un);scheduler=Q(ws);errorHandler=Q(fi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Q(Wo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ve(Ae.AfterRenderHooksStart),this.executing=!0;for(let r of jD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ve(Ae.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[Po]??=[]).push(n),Vo(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(ym.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Ne({token:t,providedIn:"root",factory:()=>new t})}return t})(),om=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,s,o=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Po];e&&(this.view[Po]=e.filter(n=>n!==this))}};function cE(t,e){let n=e?.injector??Q(di);return Li("NgAfterNextRender"),KH(t,n,e,!0)}function YH(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function KH(t,e,n,r){let i=e.get(lE);i.impl??=e.get(WD);let s=e.get(Wo,null,{optional:!0}),o=n?.manualCleanup!==!0?e.get(Is):null,a=e.get(Vu,null,{optional:!0}),l=new om(i.impl,YH(t),a?.view,r,o,s?.snapshot(null));return i.impl.register(l),l}var uE=new Ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:Q(nr)})});function zD(t,e,n){let r=t.get(uE);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function QH(t,e){let n=t.get(uE);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function XH(t,e){for(let[n,r]of e)zD(t,r.animateFns)}function ZH(t,e){let n=t.get(uE);if(Array.isArray(e))for(let r of e)n.queue.delete(r);else n.queue.delete(e)}function jA(t,e,n,r){let i=t?.[Lo]?.enter;e!==null&&i&&i.has(n.index)&&XH(r,i)}function gl(t,e,n,r,i,s,o,a){if(i!=null){let l,c=!1;xr(i)?l=i:mi(i)&&(c=!0,i=i[br]);let u=sr(i);t===0&&r!==null?(jA(a,r,s,n),o==null?VD(e,r,u):sm(e,r,u,o||null,!0)):t===1&&r!==null?(jA(a,r,s,n),sm(e,r,u,o||null,!0)):t===2?WA(a,s,n,h=>{BD(e,u,c,h)}):t===3&&WA(a,s,n,()=>{e.destroyNode(u)}),l!=null&&f5(e,t,n,l,s,r,o)}}function e5(t,e){JD(t,e),e[br]=null,e[ir]=null}function t5(t,e,n,r,i,s){r[br]=i,r[ir]=e,_m(t,r,n,1,i,s)}function JD(t,e){e[hi].changeDetectionScheduler?.notify(9),_m(t,e,e[ze],2,null,null)}function n5(t){let e=t[hl];if(!e)return p_(t[oe],t);for(;e;){let n=null;if(mi(e))n=e[hl];else{let r=e[rt];r&&(n=r)}if(!n){for(;e&&!e[rr]&&e!==t;)mi(e)&&p_(e[oe],e),e=e[Et];e===null&&(e=t),mi(e)&&p_(e[oe],e),n=e&&e[rr]}e=n}}function dE(t,e){let n=t[Oo],r=n.indexOf(e);n.splice(r,1)}function wm(t,e){if(Fo(e))return;let n=e[ze];n.destroyNode&&_m(t,e,n,3,null,null),n5(e)}function p_(t,e){if(Fo(e))return;let n=se(null);try{e[pe]&=-129,e[pe]|=256,e[Hn]&&Za(e[Hn]),s5(t,e),i5(t,e),e[oe].type===1&&e[ze].destroy();let r=e[Cs];if(r!==null&&xr(e[Et])){r!==e[Et]&&dE(r,e);let i=e[pi];i!==null&&i.detachView(t)}T_(e)}finally{se(n)}}function WA(t,e,n,r){let i=t?.[Lo];if(i?.enter?.has(e.index)&&ZH(n,i.enter.get(e.index).animateFns),i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Go.add(t[Ri]),zD(n,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let l=0;l<o.animateFns.length;l++){let c=o.animateFns[l],{promise:u}=c();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),r5(t,r)}else t&&Go.delete(t[Ri]),r(!1)},i)}function r5(t,e){let n=t[Lo]?.running;if(n){n.then(()=>{t[Lo].running=void 0,Go.delete(t[Ri]),e(!0)});return}e(!1)}function i5(t,e){let n=t.cleanup,r=e[fl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[fl]=null);let i=e[Mi];if(i!==null){e[Mi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[vs];if(s!==null){e[vs]=null;for(let o of s)o.destroy()}}function s5(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ho)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ve(Ae.LifecycleHookStart,a,l);try{l.call(a)}finally{Ve(Ae.LifecycleHookEnd,a,l)}}else{Ve(Ae.LifecycleHookStart,i,s);try{s.call(i)}finally{Ve(Ae.LifecycleHookEnd,i,s)}}}}}function o5(t,e,n){return a5(t,e.parent,n)}function a5(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[br];if(bs(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Nr.None||i===Nr.Emulated)return null}return Tr(r,n)}function l5(t,e,n){return u5(t,e,n)}function c5(t,e,n){return t.type&40?Tr(t,n):null}var u5=c5,zA;function fE(t,e,n,r){let i=o5(t,r,e),s=e[ze],o=r.parent||e[ir],a=l5(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)HA(s,i,n[l],a,!1);else HA(s,i,n,a,!1);zA!==void 0&&zA(s,r,e,n,i)}function Hu(t,e){if(e!==null){let n=e.type;if(n&3)return Tr(e,t);if(n&4)return D_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Hu(t,r);{let i=t[e.index];return xr(i)?D_(-1,i):sr(i)}}else{if(n&128)return Hu(t,e.next);if(n&32)return aE(e,t)()||sr(t[e.index]);{let r=YD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(t[$n]);return Hu(i,r)}else return Hu(t,e.next)}}}return null}function YD(t,e){if(e!==null){let r=t[$n][ir],i=e.projection;return r.projection[i]}return null}function D_(t,e){let n=rt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return Hu(r,i)}return e[Ss]}function hE(t,e,n,r,i,s,o){for(;n!=null;){let a=r[Ni];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(o&&e===0&&(l&&wl(sr(l),r),n.flags|=2),!tE(n))if(c&8)hE(t,e,n.child,r,i,s,!1),gl(e,t,a,i,l,n,s,r);else if(c&32){let u=aE(n,r),h;for(;h=u();)gl(e,t,a,i,h,n,s,r);gl(e,t,a,i,l,n,s,r)}else c&16?d5(t,e,r,n,i,s):gl(e,t,a,i,l,n,s,r);n=o?n.projectionNext:n.next}}function _m(t,e,n,r,i,s){hE(n,r,t.firstChild,e,i,s,!1)}function d5(t,e,n,r,i,s){let o=n[$n],l=o[ir].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];gl(e,t,n[Ni],i,u,r,s,n)}else{let c=l,u=o[Et];CD(r)&&(c.flags|=128),hE(t,e,c,u,i,s,!0)}}function f5(t,e,n,r,i,s,o){let a=r[Ss],l=sr(r);a!==l&&gl(e,t,n,s,a,i,o);for(let c=rt;c<r.length;c++){let u=r[c];_m(u[oe],u,t,e,s,a)}}function h5(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:wi.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=wi.Important),t.setStyle(n,r,i,s))}}function KD(t,e,n,r,i){let s=Ir(),o=r&2;try{Ts(-1),o&&e.length>lt&&qD(t,e,lt,!1);let a=o?Ae.TemplateUpdateStart:Ae.TemplateCreateStart;Ve(a,i,n),n(r,i)}finally{Ts(s);let a=o?Ae.TemplateUpdateEnd:Ae.TemplateCreateEnd;Ve(a,i,n)}}function QD(t,e,n){w5(t,e,n),(n.flags&64)===64&&_5(t,e,n)}function pE(t,e,n=Tr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function p5(t,e,n,r){let s=r.get(kD,DD)||n===Nr.ShadowDom||n===Nr.ExperimentalIsolatedShadowDom,o=t.selectRootElement(e,s);return m5(o),o}function m5(t){g5(t)}var g5=()=>null;function v5(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function XD(t,e,n,r,i,s){let o=e[oe];if(mE(t,o,e,n,r)){bs(t)&&y5(e,t.index);return}t.type&3&&(n=v5(n)),ZD(t,e,n,r,i,s)}function ZD(t,e,n,r,i,s){if(t.type&3){let o=Tr(t,e);r=s!=null?s(r,t.value||"",n):r,i.setProperty(o,n,r)}else t.type&12}function y5(t,e){let n=or(e,t);n[pe]&16||(n[pe]|=64)}function w5(t,e,n){let r=n.directiveStart,i=n.directiveEnd;bs(n)&&zH(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||nm(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let a=t.data[o],l=qu(e,t,o,n);if(wl(l,e),s!==null&&x5(e,o-r,l,a,n,s),gi(a)){let c=or(n.index,e);c[at]=qu(e,t,o,n)}}}function _5(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=wA();try{Ts(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Bp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&E5(l,c)}}finally{Ts(-1),Bp(o)}}function E5(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function C5(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];BH(e,s.selectors,!1)&&(r??=[],gi(s)?r.unshift(s):r.push(s))}return r}function S5(t,e,n,r,i,s){let o=Tr(t,e);b5(e[ze],o,s,t.value,n,r,i)}function b5(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?cl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function x5(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];A_(r,n,l,c)}}function e1(t,e,n,r,i){let s=lt+n,o=e[oe],a=i(o,e,t,r,n);e[s]=a,Bo(t,!0);let l=t.type===2;return l?(UD(e[ze],a,t),(lA()===0||Lp(t))&&wl(a,e),cA()):wl(a,e),Gp()&&(!l||!tE(t))&&fE(o,e,a,t),t}function t1(t){let e=t;return n_()?hA():(e=e.parent,Bo(e,!1)),e}function T5(t,e){let n=t[Ni];if(!n)return;let r;try{r=n.get(Uo,null)}catch{r=null}r?.(e)}function mE(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],h=e.data[c];A_(h,n[c],u,i),a=!0}if(s)for(let l of s){let c=n[l],u=e.data[l];A_(u,c,r,i),a=!0}return a}function I5(t,e){let n=or(e,t),r=n[oe];A5(r,n);let i=n[br];i!==null&&n[dl]===null&&(n[dl]=MD(i,n[Ni])),Ve(Ae.ComponentStart);try{gE(r,n,n[at])}finally{Ve(Ae.ComponentEnd,n[at])}}function A5(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gE(t,e,n){$p(e);try{let r=t.viewQuery;r!==null&&I_(1,r,n);let i=t.template;i!==null&&KD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[pi]?.finishViewCreation(t),t.staticContentQueries&&ND(t,e),t.staticViewQueries&&I_(2,t.viewQuery,n);let s=t.components;s!==null&&D5(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[pe]&=-5,Hp()}}function D5(t,e){for(let n=0;n<e.length;n++)I5(t,e[n])}function Em(t,e,n,r){let i=se(null);try{let s=e.tView,a=t[pe]&4096?4096:16,l=sE(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[Cs]=c;let u=t[pi];return u!==null&&(l[pi]=u.createEmbeddedView(s)),gE(s,l,n),l}finally{se(i)}}function ju(t,e){return!e||e.firstChild===null||CD(t)}function Wu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(sr(s)),xr(s)&&n1(s,r);let o=n.type;if(o&8)Wu(t,e,n.child,r);else if(o&32){let a=aE(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=YD(e,n);if(Array.isArray(a))r.push(...a);else{let l=ys(e[$n]);Wu(l[oe],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function n1(t,e){for(let n=rt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&Wu(r[oe],r,i,e)}t[Ss]!==t[br]&&e.push(t[Ss])}function r1(t){if(t[Po]!==null){for(let e of t[Po])e.impl.addSequence(e);t[Po].length=0}}var i1=[];function k5(t){return t[Hn]??M5(t)}function M5(t){let e=i1.pop()??Object.create(R5);return e.lView=t,e}function N5(t){t.lView[Hn]!==t&&(t.lView=null,i1.push(t))}var R5=ne(D({},Xa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Vo(t.lView)},consumerOnSignalRead(){this.lView[Hn]=this}});function P5(t){let e=t[Hn]??Object.create(L5);return e.lView=t,e}var L5=ne(D({},Xa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ys(t.lView);for(;e&&!s1(e[oe]);)e=ys(e);e&&Jw(e)},consumerOnSignalRead(){this.lView[Hn]=this}});function s1(t){return t.type!==2}function o1(t){if(t[vs]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[vs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[pe]&8192)}}var O5=100;function a1(t,e=0){let r=t[hi].rendererFactory,i=!1;i||r.begin?.();try{F5(t,e)}finally{i||r.end?.()}}function F5(t,e){let n=r_();try{Tu(!0),k_(t,e);let r=0;for(;Ou(t);){if(r===O5)throw new ue(103,!1);r++,k_(t,1)}}finally{Tu(n)}}function V5(t,e,n,r){if(Fo(e))return;let i=e[pe],s=!1,o=!1;$p(e);let a=!0,l=null,c=null;s||(s1(t)?(c=k5(e),l=_u(c)):Jh()===null?(a=!1,c=P5(e),l=_u(c)):e[Hn]&&(Za(e[Hn]),e[Hn]=null));try{zw(e),gA(t.bindingStartIndex),n!==null&&KD(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let m=t.preOrderCheckHooks;m!==null&&zp(e,m,null)}else{let m=t.preOrderHooks;m!==null&&Jp(e,m,0,null),f_(e,0)}if(o||B5(e),o1(e),l1(e,0),t.contentQueries!==null&&ND(t,e),!s)if(u){let m=t.contentCheckHooks;m!==null&&zp(e,m)}else{let m=t.contentHooks;m!==null&&Jp(e,m,1),f_(e,1)}$5(t,e);let h=t.components;h!==null&&u1(e,h,0);let p=t.viewQuery;if(p!==null&&I_(2,p,r),!s)if(u){let m=t.viewCheckHooks;m!==null&&zp(e,m)}else{let m=t.viewHooks;m!==null&&Jp(e,m,2),f_(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pp]){for(let m of e[Pp])m();e[Pp]=null}s||(r1(e),e[pe]&=-73)}catch(u){throw s||Vo(e),u}finally{c!==null&&(Yh(c,l),a&&N5(c)),Hp()}}function l1(t,e){for(let n=bD(t);n!==null;n=xD(n))for(let r=rt;r<n.length;r++){let i=n[r];c1(i,e)}}function B5(t){for(let e=bD(t);e!==null;e=xD(e)){if(!(e[pe]&2))continue;let n=e[Oo];for(let r=0;r<n.length;r++){let i=n[r];Jw(i)}}}function U5(t,e,n){Ve(Ae.ComponentStart);let r=or(e,t);try{c1(r,n)}finally{Ve(Ae.ComponentEnd,r[at])}}function c1(t,e){Op(t)&&k_(t,e)}function k_(t,e){let r=t[oe],i=t[pe],s=t[Hn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Kh(s)),o||=!1,s&&(s.dirty=!1),t[pe]&=-9217,o)V5(r,t,r.template,t[at]);else if(i&8192){let a=se(null);try{o1(t),l1(t,1);let l=r.components;l!==null&&u1(t,l,1),r1(t)}finally{se(a)}}}function u1(t,e,n){for(let r=0;r<e.length;r++)U5(t,e[r],n)}function $5(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ts(~i);else{let s=i,o=n[++r],a=n[++r];yA(o,s);let l=e[s];Ve(Ae.HostBindingsUpdateStart,l);try{a(2,l)}finally{Ve(Ae.HostBindingsUpdateEnd,l)}}}}finally{Ts(-1)}}function vE(t,e){let n=r_()?64:1088;for(t[hi].changeDetectionScheduler?.notify(e);t;){t[pe]|=n;let r=ys(t);if(pl(t)&&!r)return t;t=r}return null}function d1(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function f1(t,e){let n=rt+e;if(n<t.length)return t[n]}function Cm(t,e,n,r=!0){let i=e[oe];if(H5(i,e,t,n),r){let o=D_(n,t),a=e[ze],l=a.parentNode(t[Ss]);l!==null&&t5(i,t[ir],a,e,l,o)}let s=e[dl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function h1(t,e){let n=zu(t,e);return n!==void 0&&wm(n[oe],n),n}function zu(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n];if(r){let i=r[Cs];i!==null&&i!==t&&dE(i,r),e>0&&(t[n-1][rr]=r[rr]);let s=Du(t,rt+e);e5(r[oe],r);let o=s[pi];o!==null&&o.detachView(s[oe]),r[Et]=null,r[rr]=null,r[pe]&=-129}return r}function H5(t,e,n,r){let i=rt+r,s=n.length;r>0&&(n[i-1][rr]=e),r<s-rt?(e[rr]=n[i],Rw(n,rt+r,e)):(n.push(e),e[rr]=null),e[Et]=n;let o=e[Cs];o!==null&&n!==o&&p1(o,e);let a=e[pi];a!==null&&a.insertView(t),Fp(e),e[pe]|=128}function p1(t,e){let n=t[Oo],r=e[Et];if(mi(r))t[pe]|=2;else{let i=r[Et][$n];e[$n]!==i&&(t[pe]|=2)}n===null?t[Oo]=[e]:n.push(e)}var As=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[oe];return Wu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[at]}set context(e){this._lView[at]=e}get destroyed(){return Fo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(xr(e)){let n=e[Ru],r=n?n.indexOf(this):-1;r>-1&&(zu(e,r),Du(n,r))}this._attachedToViewContainer=!1}wm(this._lView[oe],this._lView)}onDestroy(e){Yw(this._lView,e)}markForCheck(){vE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){Fp(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,a1(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pl(this._lView),n=this._lView[Cs];n!==null&&!e&&dE(n,this._lView),JD(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let n=pl(this._lView),r=this._lView[Cs];r!==null&&!n&&p1(r,this._lView),Fp(this._lView)}};var _l=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=G5;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let s=Em(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new As(s)}}return t})();function G5(){return yE(zt(),me())}function yE(t,e){return t.type&4?new _l(e,t,Cl(t,e)):null}function td(t,e,n,r,i){let s=t.data[e];if(s===null)s=q5(t,e,n,r,i),vA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=fA();s.injectorIndex=o===null?-1:o.injectorIndex}return Bo(s,!0),s}function q5(t,e,n,r,i){let s=t_(),o=n_(),a=o?s:s&&s.parent,l=t.data[e]=W5(t,a,n,e,r,i);return j5(t,l,s,o),l}function j5(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function W5(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return dA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function z5(t){let e=t[Hw]??[],r=t[Et][ze],i=[];for(let s of e)s.data[AD]!==void 0?i.push(s):J5(s,r);t[Hw]=i}function J5(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[ID];for(;n<i;){let s=r.nextSibling;BD(e,r,!1),r=s,n++}}}var Y5=()=>null,K5=()=>null;function M_(t,e){return Y5(t,e)}function m1(t,e,n){return K5(t,e,n)}var g1=class{},Sm=class{},N_=class{resolveComponentFactory(e){throw new ue(917,!1)}},bm=class{static NULL=new N_},qo=class{},zo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Q5()}return t})();function Q5(){let t=me(),e=zt(),n=or(e.index,t);return(mi(n)?n:t)[ze]}var v1=(()=>{class t{static \u0275prov=Ne({token:t,providedIn:"root",factory:()=>null})}return t})();var Kp={},R_=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Kp,r);return i!==Kp||n===Kp?i:this.parentInjector.get(e,n,r)}};function am(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Tp(i,a);else if(s==2){let l=a,c=e[++o];r=Tp(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function De(t,e=0){let n=me();if(n===null)return He(t,e);let r=zt();return wD(r,n,Vt(t),e)}function X5(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let a=o,l=null,c=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(o);break}t4(t,e,n,a,s,l,c)}s!==null&&r!==null&&Z5(n,r,s)}function Z5(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new ue(-301,!1);r.push(e[i],s)}}function e4(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function t4(t,e,n,r,i,s,o){let a=r.length,l=null;for(let p=0;p<a;p++){let m=r[p];l===null&&gi(m)&&(l=m,e4(t,n,p)),b_(nm(n,e),t,m.type)}a4(n,t.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,h=GD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(n.mergedAttrs=yl(n.mergedAttrs,m.hostAttrs),r4(t,n,e,h,m),o4(h,m,i),o!==null&&o.has(m)){let[y,_]=o.get(m);n.directiveToIndex.set(m.type,[h,y+n.directiveStart,_+n.directiveStart])}else(s===null||!s.has(m))&&n.directiveToIndex.set(m.type,h);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let g=m.type.prototype;!c&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),h++}n4(t,n,s)}function n4(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))JA(0,e,i,r),JA(1,e,i,r),KA(e,r,!1);else{let s=n.get(i);YA(0,e,s,r),YA(1,e,s,r),KA(e,r,!0)}}}function JA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),y1(e,s)}}function YA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),y1(e,o)}}function y1(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function KA(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||rE(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(n&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(o)}function r4(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=gs(i.type,!0)),o=new Ho(s,gi(i),De,null);t.blueprint[r]=o,n[r]=o,i4(t,e,r,GD(t,n,i.hostVars,ln),i)}function i4(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;s4(o)!=a&&o.push(a),o.push(n,r,s)}}function s4(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function o4(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gi(e)&&(n[""]=t)}}function a4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function w1(t,e,n,r,i,s,o,a){let l=e[oe],c=l.consts,u=vi(c,o),h=td(l,t,n,r,u);return s&&X5(l,e,h,vi(c,a),i),h.mergedAttrs=yl(h.mergedAttrs,h.attrs),h.attrs!==null&&am(h,h.attrs,!1),h.mergedAttrs!==null&&am(h,h.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,h),h}function _1(t,e){nH(t,e),Gw(e)&&t.queries.elementEnd(e)}function l4(t,e,n,r,i,s){let o=e.consts,a=vi(o,i),l=td(e,t,n,r,a);if(l.mergedAttrs=yl(l.mergedAttrs,l.attrs),s!=null){let c=vi(o,s);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&am(l,l.attrs,!1),l.mergedAttrs!==null&&am(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function E1(t,e,n){return t[e]=n}function c4(t,e){return t[e]}function Rr(t,e,n){if(n===ln)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function C1(t,e,n,r){let i=Rr(t,e,n);return Rr(t,e+1,r)||i}function Qp(t,e,n){return function r(i){let s=bs(t)?or(t.index,e):e;vE(s,5);let o=e[at],a=QA(e,o,n,i),l=r.__ngNextListenerFn__;for(;l;)a=QA(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function QA(t,e,n,r){let i=se(null);try{return Ve(Ae.OutputStart,e,n),n(r)!==!1}catch(s){return T5(t,s),!1}finally{Ve(Ae.OutputEnd,e,n),se(i)}}function S1(t,e,n,r,i,s,o,a){let l=Lp(t),c=!1,u=null;if(!r&&l&&(u=d4(e,n,s,t.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,c=!0}else{let h=Tr(t,n),p=r?r(h):h;TH(n,p,s,a);let m=i.listen(p,s,a);if(!u4(s)){let g=r?y=>r(sr(y[t.index])):t.index;b1(g,e,n,s,a,m,!1)}}return c}function u4(t){return t.startsWith("animation")||t.startsWith("transition")}function d4(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[fl],l=i[s+2];return a&&a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function b1(t,e,n,r,i,s,o){let a=e.firstCreatePass?Qw(e):null,l=Kw(n),c=l.length;l.push(i,s),a&&a.push(r,t,c,(c+1)*(o?-1:1))}function XA(t,e,n,r,i,s){let o=e[n],a=e[oe],c=a.data[n].outputs[r],h=o[c].subscribe(s);b1(t.index,a,e,i,s,h,!0)}var P_=Symbol("BINDING");var L_=class extends bm{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Mo(e);return new Ju(n,this.ngModule)}};function f4(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&vm.SignalBased)!==0};return i&&(s.transform=i),s})}function h4(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function p4(t,e,n){let r=e instanceof nr?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new R_(n,r):n}function m4(t){let e=t.get(qo,null);if(e===null)throw new ue(407,!1);let n=t.get(v1,null),r=t.get(ws,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function g4(t,e){let n=x1(t);return FD(e,n,n==="svg"?qw:n==="math"?nA:null)}function x1(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ju=class extends Sm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=f4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=h4(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=GH(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,s,o){Ve(Ae.DynamicComponentStart);let a=se(null);try{let l=this.componentDef,c=v4(r,l,o,s),u=p4(l,i||this.ngModule,e),h=m4(u),p=h.rendererFactory.createRenderer(null,l),m=r?p5(p,r,l.encapsulation,u):g4(l,p),g=o?.some(ZA)||s?.some(w=>typeof w!="function"&&w.bindings.some(ZA)),y=sE(null,c,null,512|HD(l),null,null,h,p,u,null,MD(m,u,!0));y[lt]=m,$p(y);let _=null;try{let w=w1(lt,y,2,"#host",()=>c.directiveRegistry,!0,0);UD(p,m,w),wl(m,y),QD(c,y,w),RD(c,w,y),_1(c,w),n!==void 0&&w4(w,this.ngContentSelectors,n),_=or(w.index,y),y[at]=_[at],gE(c,y,null)}catch(w){throw _!==null&&T_(_),T_(y),w}finally{Ve(Ae.DynamicComponentEnd),Hp()}return new lm(this.componentType,y,!!g)}finally{se(a)}}};function v4(t,e,n,r){let i=t?["ng-version","21.1.4"]:qH(e.selectors[0]),s=null,o=null,a=0;if(n)for(let u of n)a+=u[P_].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let p of h.bindings){a+=p[P_].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(s??=[]).push(p)),p.update&&(p.targetIdx=m,(o??=[]).push(p))}}let l=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,p=Dw(h);l.push(p)}return iE(0,null,y4(s,o),1,a,l,null,null,null,[i],null)}function y4(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function ZA(t){let e=t[P_].kind;return e==="input"||e==="twoWay"}var lm=class extends g1{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Pu(n[oe],lt),this.location=Cl(this._tNode,n),this.instance=or(this._tNode.index,n)[at],this.hostView=this.changeDetectorRef=new As(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=mE(r,i[oe],i,e,n);this.previousInputValues.set(e,n);let o=or(r.index,i);vE(o,1)}get injector(){return new $o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function w4(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var nd=(()=>{class t{static __NG_ELEMENT_ID__=_4}return t})();function _4(){let t=zt();return I1(t,me())}var E4=nd,T1=class extends E4{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Cl(this._hostTNode,this._hostLView)}get injector(){return new $o(this._hostTNode,this._hostLView)}get parentInjector(){let e=X_(this._hostTNode,this._hostLView);if(hD(e)){let n=em(e,this._hostLView),r=Zp(e),i=n[oe].data[r+8];return new $o(i,n)}else return new $o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=eD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=M_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,ju(this._hostTNode,o)),a}createComponent(e,n,r,i,s,o,a){let l=e&&!Q8(e),c;if(l)c=n;else{let _=n||{};c=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef,o=_.directives,a=_.bindings}let u=l?e:new Ju(Mo(e)),h=r||this.parentInjector;if(!s&&u.ngModule==null){let w=(l?h:this.parentInjector).get(nr,null);w&&(s=w)}let p=Mo(u.componentType??{}),m=M_(this._lContainer,p?.id??null),g=m?.firstChild??null,y=u.create(h,i,g,s,o,a);return this.insertImpl(y.hostView,c,ju(this._hostTNode,m)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(iA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Et],c=new T1(l,l[ir],l[Et]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Cm(o,i,s,r),e.attachToViewContainerRef(),Rw(m_(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=eD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=zu(this._lContainer,n);r&&(Du(m_(this._lContainer),n),wm(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=zu(this._lContainer,n);return r&&Du(m_(this._lContainer),n)!=null?new As(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function eD(t){return t[Ru]}function m_(t){return t[Ru]||(t[Ru]=[])}function I1(t,e){let n,r=e[t.index];return xr(r)?n=r:(n=d1(r,e,null,t),e[t.index]=n,oE(e,n)),S4(n,e,t,r),new T1(n,t,e)}function C4(t,e){let n=t[ze],r=n.createComment(""),i=Tr(e,t),s=n.parentNode(i);return sm(n,s,r,n.nextSibling(i),!1),r}var S4=T4,b4=()=>!1;function x4(t,e,n){return b4(t,e,n)}function T4(t,e,n,r){if(t[Ss])return;let i;n.type&8?i=sr(r):i=C4(e,n),t[Ss]=i}var O_=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},F_=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wE(e,n).matches!==null&&this.queries[n].setDirty()}},V_=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=P4(e):this.predicate=e}},B_=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},U_=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,I4(n,s)),this.matchTNodeWithReadOption(e,n,Yp(n,e,s,!1,!1))}else r===_l?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Yp(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pr||i===nd||i===_l&&n.type&4)this.addMatch(n.index,-2);else{let s=Yp(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function I4(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function A4(t,e){return t.type&11?Cl(t,e):t.type&4?yE(t,e):null}function D4(t,e,n,r){return n===-1?A4(e,t):n===-2?k4(t,e,r):qu(t,t[oe],n,e)}function k4(t,e,n){if(n===Pr)return Cl(e,t);if(n===_l)return yE(e,t);if(n===nd)return I1(e,t)}function A1(t,e,n,r){let i=e[pi].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(D4(e,u,o[l+1],n.metadata.read))}}i.matches=a}return i.matches}function $_(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=A1(t,e,i,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let h=rt;h<u.length;h++){let p=u[h];p[Cs]===p[Et]&&$_(p[oe],p,c,r)}if(u[Oo]!==null){let h=u[Oo];for(let p=0;p<h.length;p++){let m=h[p];$_(m[oe],m,c,r)}}}}}return r}function M4(t,e){return t[pi].queries[e].queryList}function N4(t,e,n){let r=new rm((n&4)===4);return aA(t,e,r,r.destroy),(e[pi]??=new F_).queries.push(new O_(r))-1}function R4(t,e,n){let r=et();return r.firstCreatePass&&(L4(r,new V_(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),N4(r,me(),e)}function P4(t){return t.split(",").map(e=>e.trim())}function L4(t,e,n){t.queries===null&&(t.queries=new B_),t.queries.track(new U_(e,n))}function wE(t,e){return t.queries.getByIndex(e)}function O4(t,e){let n=t[oe],r=wE(n,e);return r.crossesNgTemplate?$_(n,t,e,[]):A1(n,t,r,e)}var Yu=class{};var Ku=class extends Yu{injector;componentFactoryResolver=new L_(this);instance=null;constructor(e){super();let n=new Ao([...e.providers,{provide:Yu,useValue:this},{provide:bm,useValue:this.componentFactoryResolver}],e.parent||Nu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function D1(t,e,n=null){return new Ku({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var F4=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Fw(!1,n.type),i=r.length>0?D1([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ne({token:t,providedIn:"environment",factory:()=>new t(He(nr))})}return t})();function Gn(t){return Xu(()=>{let e=k1(t),n=ne(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Z_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(F4).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Nr.Emulated,styles:t.styles||an,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Li("NgStandalone"),M1(n);let r=t.dependencies;return n.directiveDefs=tD(r,V4),n.pipeDefs=tD(r,GI),n.id=$4(n),n})}function V4(t){return Mo(t)||Dw(t)}function Jo(t){return Xu(()=>({type:t.type,bootstrap:t.bootstrap||an,declarations:t.declarations||an,imports:t.imports||an,exports:t.exports||an,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function B4(t,e){if(t==null)return Es;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=vm.None,l=null),n[s]=[r,a,l],e[s]=o}return n}function U4(t){if(t==null)return Es;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function dt(t){return Xu(()=>{let e=k1(t);return M1(e),e})}function _E(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function k1(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Es,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||an,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:B4(t.inputs,e),outputs:U4(t.outputs),debugInfo:null}}function M1(t){t.features?.forEach(e=>e(t))}function tD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let s=e(i);s!==null&&r.push(s)}return r}:null}function $4(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function H4(t){return Object.getPrototypeOf(t.prototype).constructor}function cn(t){let e=H4(t.type),n=!0,r=[t];for(;e;){let i;if(gi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=g_(t.inputs),o.declaredInputs=g_(t.declaredInputs),o.outputs=g_(t.outputs);let a=i.hostBindings;a&&z4(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&j4(t,l),c&&W4(t,c),G4(t,i),HI(t.outputs,i.outputs),gi(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===cn&&(n=!1)}}e=Object.getPrototypeOf(e)}q4(r)}function G4(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function q4(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yl(i.hostAttrs,n=yl(n,i.hostAttrs))}}function g_(t){return t===Es?{}:t===an?[]:t}function j4(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function W4(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function z4(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function J4(t,e,n,r,i,s,o,a){if(n.firstCreatePass){t.mergedAttrs=yl(t.mergedAttrs,t.attrs);let u=t.tView=iE(2,t,i,s,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Bo(t,!1);let l=Y4(n,e,t,r);Gp()&&fE(n,e,l,t),wl(l,e);let c=d1(l,e,l,t);e[r+lt]=c,oE(e,c),x4(c,t,e)}function cm(t,e,n,r,i,s,o,a,l,c,u){let h=n+lt,p;if(e.firstCreatePass){if(p=td(e,h,4,o||null,a||null),c!=null){let m=vi(e.consts,c);p.localNames=[];for(let g=0;g<m.length;g+=2)p.localNames.push(m[g],-1)}}else p=e.data[h];return J4(p,t,e,n,r,i,s,l),c!=null&&pE(t,p,u),p}var Y4=K4;function K4(t,e,n,r){return qp(!0),e[ze].createComment("")}function N1(t){return typeof t=="function"&&t[Bn]!==void 0}function EE(t){return N1(t)&&typeof t.set=="function"}var CE=new Ce("");function bl(t){return!!t&&typeof t.then=="function"}function SE(t){return!!t&&typeof t.subscribe=="function"}var R1=new Ce("");var bE=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=Q(R1,{optional:!0})??[];injector=Q(di);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Rp(this.injector,i);if(bl(s))n.push(s);else if(SE(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),P1=new Ce("");function L1(){K0(()=>{let t="";throw new ue(600,t)})}function O1(t){return t.isBoundToModule}var Q4=10;var xl=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Q(Uo);afterRenderManager=Q(lE);zonelessEnabled=Q(Bu);rootEffectScheduler=Q(jp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Sr;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Q(ml);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(bo(n=>!n))}constructor(){Q(Wo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=Q(nr);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=di.NULL){return this._injector.get(Un).run(()=>{Ve(Ae.BootstrapComponentStart);let o=n instanceof Sm;if(!this._injector.get(bE).done){let g="";throw new ue(405,g)}let l;o?l=n:l=this._injector.get(bm).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=O1(l)?void 0:this._injector.get(Yu),u=r||l.selector,h=l.create(i,[],u,c),p=h.location.nativeElement,m=h.injector.get(CE,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Gu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),Ve(Ae.BootstrapComponentEnd,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ve(Ae.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(ym.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ve(Ae.ChangeDetectionEnd),new ue(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Ve(Ae.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Q4;){Ve(Ae.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ve(Ae.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ou(i))continue;let s=r&&!this.zonelessEnabled?0:1;a1(i,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ou(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Gu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(P1,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Gu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ue(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rd(t,e,n,r){let i=me(),s=xs();if(Rr(i,s,e)){let o=et(),a=Fu();S5(a,i,t,e,n,r)}return rd}var rre=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var H_=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function v_(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function X4(t,e,n,r){let i,s,o=0,a=t.length-1,l=void 0;if(Array.isArray(e)){se(r);let c=e.length-1;for(se(null);o<=a&&o<=c;){let u=t.at(o),h=e[o],p=v_(o,u,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(a),g=e[c],y=v_(a,m,c,g,n);if(y!==0){y<0&&t.updateValue(a,g),a--,c--;continue}let _=n(o,u),w=n(a,m),A=n(o,h);if(Object.is(A,w)){let k=n(c,g);Object.is(k,_)?(t.swap(o,a),t.updateValue(a,g),c--,a--):t.move(a,o),t.updateValue(o,h),o++;continue}if(i??=new um,s??=rD(t,o,a,n),G_(t,i,o,A))t.updateValue(o,h),o++,a++;else if(s.has(A))i.set(_,t.detach(o)),a--;else{let k=t.create(o,e[o]);t.attach(o,k),o++,a++}}for(;o<=c;)nD(t,i,n,o,e[o]),o++}else if(e!=null){se(r);let c=e[Symbol.iterator]();se(null);let u=c.next();for(;!u.done&&o<=a;){let h=t.at(o),p=u.value,m=v_(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,u=c.next();else{i??=new um,s??=rD(t,o,a,n);let g=n(o,p);if(G_(t,i,o,g))t.updateValue(o,p),o++,a++,u=c.next();else if(!s.has(g))t.attach(o,t.create(o,p)),o++,a++,u=c.next();else{let y=n(o,h);i.set(y,t.detach(o)),a--}}}for(;!u.done;)nD(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function G_(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function nD(t,e,n,r,i){if(G_(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function rD(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var um=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function de(t,e,n,r,i,s,o,a){Li("NgControlFlow");let l=me(),c=et(),u=vi(c.consts,s);return cm(l,c,t,e,n,r,i,u,256,o,a),xE}function xE(t,e,n,r,i,s,o,a){Li("NgControlFlow");let l=me(),c=et(),u=vi(c.consts,s);return cm(l,c,t,e,n,r,i,u,512,o,a),xE}function fe(t,e){Li("NgControlFlow");let n=me(),r=xs(),i=n[r]!==ln?n[r]:-1,s=i!==-1?dm(n,lt+i):void 0,o=0;if(Rr(n,r,t)){let a=se(null);try{if(s!==void 0&&h1(s,o),t!==-1){let l=lt+t,c=dm(n,l),u=z_(n[oe],l),h=m1(c,u,n),p=Em(n,u,e,{dehydratedView:h});Cm(c,p,o,ju(u,h))}}finally{se(a)}}else if(s!==void 0){let a=f1(s,o);a!==void 0&&(a[at]=e)}}var q_=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-rt}};function id(t){return t}function Yo(t,e){return e}var j_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function ft(t,e,n,r,i,s,o,a,l,c,u,h,p){Li("NgControlFlow");let m=me(),g=et(),y=l!==void 0,_=me(),w=a?o.bind(_[$n][at]):o,A=new j_(y,w);_[lt+t]=A,cm(m,g,t+1,e,n,r,i,vi(g.consts,s),256),y&&cm(m,g,t+2,l,c,u,h,vi(g.consts,p),512)}var W_=class extends H_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[at].$implicit}attach(e,n){let r=n[dl];this.needsIndexUpdate||=e!==this.length,Cm(this.lContainer,n,e,ju(this.templateTNode,r)),Z4(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,eG(this.lContainer,e),tG(this.lContainer,e)}create(e,n){let r=M_(this.lContainer,this.templateTNode.tView.ssrId);return Em(this.hostLView,this.templateTNode,new q_(this.lContainer,n,e),{dehydratedView:r})}destroy(e){wm(e[oe],e)}updateValue(e,n){this.getLView(e)[at].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[at].$index=e}getLView(e){return nG(this.lContainer,e)}};function ht(t){let e=se(null),n=Ir();try{let r=me(),i=r[oe],s=r[n],o=n+1,a=dm(r,o);if(s.liveCollection===void 0){let c=z_(i,o);s.liveCollection=new W_(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(X4(l,t,s.trackByFn,e),l.updateIndexes(),s.hasEmptyBlock){let c=xs(),u=l.length===0;if(Rr(r,c,u)){let h=n+2,p=dm(r,h);if(u){let m=z_(i,h),g=m1(p,m,r),y=Em(r,m,void 0,{dehydratedView:g});Cm(p,y,0,ju(m,g))}else i.firstUpdatePass&&z5(p),h1(p,0)}}}finally{se(e)}}function dm(t,e){return t[e]}function Z4(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n],i=r?r[Lo]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Ni];QH(s,i),Go.delete(r[Ri]),i.detachedLeaveAnimationFns=void 0}}function eG(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n],i=r?r[Lo]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function tG(t,e){return zu(t,e)}function nG(t,e){return f1(t,e)}function z_(t,e){return Pu(t,e)}function Lr(t,e,n){let r=me(),i=xs();if(Rr(r,i,e)){let s=et(),o=Fu();XD(o,r,t,e,r[ze],n)}return Lr}function J_(t,e,n,r,i){mE(e,t,n,i?"class":"style",r)}function E(t,e,n,r){let i=me(),s=i[oe],o=t+lt,a=s.firstCreatePass?w1(o,i,2,e,C5,uA(),n,r):s.data[o];if(e1(a,i,t,e,F1),Lp(a)){let l=i[oe];QD(l,i,a),RD(l,a,i)}return r!=null&&pE(i,a),E}function S(){let t=et(),e=zt(),n=t1(e);return t.firstCreatePass&&_1(t,n),Zw(n)&&e_(),Xw(),n.classesWithoutHost!=null&&iH(n)&&J_(t,n,me(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&sH(n)&&J_(t,n,me(),n.stylesWithoutHost,!1),S}function he(t,e,n,r){return E(t,e,n,r),S(),he}function j(t,e,n,r){let i=me(),s=i[oe],o=t+lt,a=s.firstCreatePass?l4(o,s,2,e,n,r):s.data[o];return e1(a,i,t,e,F1),r!=null&&pE(i,a),j}function Y(){let t=zt(),e=t1(t);return Zw(e)&&e_(),Xw(),Y}function Bt(t,e,n,r){return j(t,e,n,r),Y(),Bt}var F1=(t,e,n,r,i)=>(qp(!0),FD(e[ze],r,xA()));function Re(){return me()}function Tl(t,e,n){let r=me(),i=xs();if(Rr(r,i,e)){let s=et(),o=Fu();ZD(o,r,t,e,r[ze],n)}return Tl}var $u=void 0;function rG(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var iG=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",$u,$u,$u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",rG],y_={};function qn(t){let e=sG(t),n=iD(e);if(n)return n;let r=e.split("-")[0];if(n=iD(r),n)return n;if(r==="en")return iG;throw new ue(701,!1)}function iD(t){return t in y_||(y_[t]=Do.ng&&Do.ng.common&&Do.ng.common.locales&&Do.ng.common.locales[t]),y_[t]}var ct=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ct||{});function sG(t){return t.toLowerCase().replace(/_/g,"-")}var sd="en-US";var oG=sd;function V1(t){typeof t=="string"&&(oG=t.toLowerCase().replace(/_/g,"-"))}function H(t,e,n){let r=me(),i=et(),s=zt();return B1(i,r,r[ze],s,t,e,n),H}function Jt(t,e,n){let r=me(),i=et(),s=zt();return(s.type&3||n)&&S1(s,i,r,n,r[ze],t,e,Qp(s,r,e)),Jt}function B1(t,e,n,r,i,s,o){let a=!0,l=null;if((r.type&3||o)&&(l??=Qp(r,e,s),S1(r,t,e,o,n,i,s,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let p=u[h],m=u[h+1];l??=Qp(r,e,s),XA(r,e,p,m,i,l)}if(c&&c.length)for(let h of c)l??=Qp(r,e,s),XA(r,e,h,i,i,l)}}function O(t=1){return bA(t)}function Il(t,e,n){return R4(t,e,n),Il}function od(t){let e=me(),n=et(),r=s_();Up(r+1);let i=wE(n,r);if(t.dirty&&rA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=O4(e,r);t.reset(s,yH),t.notifyOnChanges()}return!0}return!1}function ad(){return M4(me(),s_())}function Wp(t,e){return t<<17|e<<2}function jo(t){return t>>17&32767}function aG(t){return(t&2)==2}function lG(t,e){return t&131071|e<<17}function Y_(t){return t|2}function El(t){return(t&131068)>>2}function w_(t,e){return t&-131069|e<<2}function cG(t){return(t&1)===1}function K_(t){return t|1}function uG(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=jo(o),l=El(o);t[r]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||ul(h,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let p=jo(t[a+1]);t[r+1]=Wp(p,a),p!==0&&(t[p+1]=w_(t[p+1],r)),t[a+1]=lG(t[a+1],r)}else t[r+1]=Wp(a,0),a!==0&&(t[a+1]=w_(t[a+1],r)),a=r;else t[r+1]=Wp(l,0),a===0?a=r:t[l+1]=w_(t[l+1],r),l=r;c&&(t[r+1]=Y_(t[r+1])),sD(t,u,r,!0),sD(t,u,r,!1),dG(e,u,t,r,s),o=Wp(a,l),s?e.classBindings=o:e.styleBindings=o}function dG(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ul(s,e)>=0&&(n[r+1]=K_(n[r+1]))}function sD(t,e,n,r){let i=t[n+1],s=e===null,o=r?jo(i):El(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];fG(l,e)&&(a=!0,t[o+1]=r?K_(c):Y_(c)),o=r?jo(c):El(c)}a&&(t[n+1]=r?Y_(i):K_(i))}function fG(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ul(t,e)>=0:!1}var Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hG(t){return t.substring(Mr.key,Mr.keyEnd)}function pG(t){return mG(t),U1(t,$1(t,0,Mr.textEnd))}function U1(t,e){let n=Mr.textEnd;return n===e?-1:(e=Mr.keyEnd=gG(t,Mr.key=e,n),$1(t,e,n))}function mG(t){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=t.length}function $1(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function gG(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Al(t,e,n){return H1(t,e,n,!1),Al}function Ze(t,e){return H1(t,e,null,!0),Ze}function xm(t){yG(bG,vG,t,!0)}function vG(t,e){for(let n=pG(e);n>=0;n=U1(e,n))Mp(t,hG(e),!0)}function H1(t,e,n,r){let i=me(),s=et(),o=Vp(2);if(s.firstUpdatePass&&q1(s,t,o,r),e!==ln&&Rr(i,o,e)){let a=s.data[Ir()];j1(s,a,i,i[ze],t,i[o+1]=TG(e,n),r,o)}}function yG(t,e,n,r){let i=et(),s=Vp(2);i.firstUpdatePass&&q1(i,null,s,r);let o=me();if(n!==ln&&Rr(o,s,n)){let a=i.data[Ir()];if(W1(a,r)&&!G1(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Tp(l,n||"")),J_(i,a,o,n,r)}else xG(i,a,o,o[ze],o[s+1],o[s+1]=SG(t,e,n),r,s)}}function G1(t,e){return e>=t.expandoStartIndex}function q1(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ir()],o=G1(t,n);W1(s,r)&&e===null&&!o&&(e=!1),e=wG(i,s,e,r),uG(i,s,e,n,o,r)}}function wG(t,e,n,r){let i=_A(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=__(null,t,e,n,r),n=Qu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=__(i,t,e,n,r),s===null){let l=_G(t,e,r);l!==void 0&&Array.isArray(l)&&(l=__(null,t,e,l[1],r),l=Qu(l,e.attrs,r),EG(t,e,r,l))}else s=CG(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function _G(t,e,n){let r=n?e.classBindings:e.styleBindings;if(El(r)!==0)return t[jo(r)]}function EG(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[jo(i)]=r}function CG(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Qu(r,o,n)}return Qu(r,e.attrs,n)}function __(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Qu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Qu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Mp(t,o,n?!0:e[++s]))}return t===void 0?null:t}function SG(t,e,n){if(n==null||n==="")return an;let r=[],i=gm(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(i instanceof Set)for(let s of i)t(r,s,!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function bG(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Mp(t,r,n)}function xG(t,e,n,r,i,s,o,a){i===ln&&(i=an);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;u!==null||h!==null;){let p=l<i.length?i[l+1]:void 0,m=c<s.length?s[c+1]:void 0,g=null,y;u===h?(l+=2,c+=2,p!==m&&(g=h,y=m)):h===null||u!==null&&u<h?(l+=2,g=u):(c+=2,g=h,y=m),g!==null&&j1(t,e,n,r,g,y,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}function j1(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=cG(c)?oD(l,e,n,i,El(c),o):void 0;if(!fm(u)){fm(s)||aG(c)&&(s=oD(l,null,n,i,a,o));let h=jw(Ir(),n);h5(r,o,h,i,s)}}function oD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,h=u===null,p=n[i+1];p===ln&&(p=h?an:void 0);let m=h?Np(p,r):u===r?p:void 0;if(c&&!fm(m)&&(m=Np(l,r)),fm(m)&&(a=m,o))return a;let g=t[i+1];i=o?jo(g):El(g)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Np(l,r))}return a}function fm(t){return t!==void 0}function TG(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ms(gm(t)))),t}function W1(t,e){return(t.flags&(e?8:16))!==0}function b(t,e=""){let n=me(),r=et(),i=t+lt,s=r.firstCreatePass?td(r,i,1,e,null):r.data[i],o=IG(r,n,s,e);n[i]=o,Gp()&&fE(r,n,o,s),Bo(s,!1)}var IG=(t,e,n,r)=>(qp(!0),DH(e[ze],r));function z1(t,e,n,r=""){return Rr(t,xs(),n)?e+cl(n)+r:ln}function AG(t,e,n,r,i,s=""){let o=mA(),a=C1(t,o,n,i);return Vp(2),a?e+cl(n)+r+cl(i)+s:ln}function Be(t){return Te("",t),Be}function Te(t,e,n){let r=me(),i=z1(r,t,e,n);return i!==ln&&J1(r,Ir(),i),Te}function Tm(t,e,n,r,i){let s=me(),o=AG(s,t,e,n,r,i);return o!==ln&&J1(s,Ir(),o),Tm}function J1(t,e,n){let r=jw(e,t);kH(t[ze],r,n)}function ar(t,e,n){EE(e)&&(e=e());let r=me(),i=xs();if(Rr(r,i,e)){let s=et(),o=Fu();XD(o,r,t,e,r[ze],n)}return ar}function Or(t,e){let n=EE(t);return n&&t.set(e),n}function lr(t,e){let n=me(),r=et(),i=zt();return B1(r,n,n[ze],i,t,e),lr}var Y1={};function Im(t){Li("NgLet");let e=et(),n=me(),r=t+lt,i=td(e,r,128,null,null);return Bo(i,!1),Lu(e,n,r,Y1),Im}function Am(t){let e=et(),n=me(),r=Ir();return Lu(e,n,r,t),t}function Dm(t){let e=pA(),n=Ww(e,lt+t);if(n===Y1)throw new ue(314,!1);return n}function km(t,e,n=""){return z1(me(),t,e,n)}function aD(t,e,n){let r=et();r.firstCreatePass&&K1(e,r.data,r.blueprint,gi(t),n)}function K1(t,e,n,r,i){if(t=Vt(t),Array.isArray(t))for(let s=0;s<t.length;s++)K1(t[s],e,n,r,i);else{let s=et(),o=me(),a=zt(),l=Io(t)?t:Vt(t.provide),c=Bw(t),u=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Io(t)||!t.multi){let m=new Ho(c,i,De,null),g=C_(l,e,i?u:u+p,h);g===-1?(b_(nm(a,o),s,l),E_(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[g]=m,o[g]=m)}else{let m=C_(l,e,u+p,h),g=C_(l,e,u,u+p),y=m>=0&&n[m],_=g>=0&&n[g];if(i&&!_||!i&&!y){b_(nm(a,o),s,l);let w=MG(i?kG:DG,n.length,i,r,c,t);!i&&_&&(n[g].providerFactory=w),E_(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=Q1(n[i?g:m],c,!i&&r);E_(s,t,m>-1?m:g,w)}!i&&r&&_&&n[g].componentProviders++}}}function E_(t,e,n,r){let i=Io(e),s=ZI(e);if(i||s){let l=(s?Vt(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Q1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function C_(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function DG(t,e,n,r,i){return Q_(this.multi,[])}function kG(t,e,n,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=qu(r,r[oe],this.providerFactory.index,i);o=l.slice(0,a),Q_(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],Q_(s,o);return o}function Q_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function MG(t,e,n,r,i,s){let o=new Ho(t,n,De,null);return o.multi=[],o.index=e,o.componentProviders=0,Q1(o,i,r&&!n),o}function Fr(t,e){return n=>{n.providersResolver=(r,i)=>aD(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>aD(r,i?i(e):e,!0))}}function ld(t,e){let n=i_()+t,r=me();return r[n]===ln?E1(r,n,e()):c4(r,n)}function NG(t,e){let n=t[e];return n===ln?void 0:n}function RG(t,e,n,r,i,s,o){let a=e+n;return C1(t,a,i,s)?E1(t,a+2,o?r.call(o,i,s):r(i,s)):NG(t,a+2)}function TE(t,e){let n=et(),r,i=t+lt;n.firstCreatePass?(r=PG(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=gs(r.type,!0)),o,a=on(De);try{let l=tm(!1),c=s();return tm(l),Lu(n,me(),i,c),c}finally{on(a)}}function PG(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function IE(t,e,n,r){let i=t+lt,s=me(),o=Ww(s,i);return LG(s,i)?RG(s,i_(),e,o.transform,n,r,o):o.transform(n,r)}function LG(t,e){return t[oe].data[e].pure}var X1=(()=>{class t{applicationErrorHandler=Q(Uo);appRef=Q(xl);taskService=Q(ml);ngZone=Q(Un);zonelessEnabled=Q(Bu);tracing=Q(Wo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new sn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Iu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(d_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?kA:l_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Iu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AE(){return Li("NgZoneless"),Ow([...DE(),[]])}function DE(){return[{provide:ws,useExisting:X1},{provide:Un,useClass:Au},{provide:Bu,useValue:!0}]}function OG(){return typeof $localize<"u"&&$localize.locale||sd}var cd=new Ce("",{factory:()=>Q(cd,{optional:!0,skipSelf:!0})||OG()});function Oi(t,e){return Qh(t,e?.equal)}var kE=new Ce(""),JG=new Ce("");function ud(t){return!t.moduleRef}function YG(t){let e=ud(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Un);return n.run(()=>{ud(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Uo),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ud(t)){let s=()=>e.destroy(),o=t.platformInjector.get(kE);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(kE);o.add(s),t.moduleRef.onDestroy(()=>{Gu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return QG(r,n,()=>{let s=e.get(ml),o=s.add(),a=e.get(bE);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(cd,sd);if(V1(l||sd),!e.get(JG,!0))return ud(t)?e.get(xl):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ud(t)){let u=e.get(xl);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return KG?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{s.remove(o)})})})}var KG;function QG(t,e,n){try{let r=n();return bl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Mm=null;function XG(t=[],e){return di.create({name:e,providers:[{provide:Mu,useValue:"platform"},{provide:kE,useValue:new Set([()=>Mm=null])},...t]})}function ZG(t=[]){if(Mm)return Mm;let e=XG(t);return Mm=e,L1(),eq(e),e}function eq(t){let e=t.get(pm,null);Rp(t,()=>{e?.forEach(n=>n())})}var tq=1e4;var Cce=tq-1e3;var Nm=(()=>{class t{static __NG_ELEMENT_ID__=nq}return t})();function nq(t){return rq(zt(),me(),(t&16)===16)}function rq(t,e,n){if(bs(t)&&!n){let r=or(t.index,e);return new As(r,r)}else if(t.type&175){let r=e[$n];return new As(r,e)}return null}function Z1(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ve(Ae.BootstrapApplicationStart);try{let s=i?.injector??ZG(r),o=[DE(),NA,...n||[]],a=new Ku({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return YG({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Ve(Ae.BootstrapApplicationEnd)}}function ME(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var ek=null;function Ds(){return ek}function NE(t){ek??=t}var dd=class{};var Yt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Yt||{}),je=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(je||{}),Cn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Cn||{}),Vi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function nk(t){return qn(t)[ct.LocaleId]}function rk(t,e,n){let r=qn(t),i=[r[ct.DayPeriodsFormat],r[ct.DayPeriodsStandalone]],s=cr(i,e);return cr(s,n)}function ik(t,e,n){let r=qn(t),i=[r[ct.DaysFormat],r[ct.DaysStandalone]],s=cr(i,e);return cr(s,n)}function sk(t,e,n){let r=qn(t),i=[r[ct.MonthsFormat],r[ct.MonthsStandalone]],s=cr(i,e);return cr(s,n)}function ok(t,e){let r=qn(t)[ct.Eras];return cr(r,e)}function fd(t,e){let n=qn(t);return cr(n[ct.DateFormat],e)}function hd(t,e){let n=qn(t);return cr(n[ct.TimeFormat],e)}function pd(t,e){let r=qn(t)[ct.DateTimeFormat];return cr(r,e)}function md(t,e){let n=qn(t),r=n[ct.NumberSymbols][e];if(typeof r>"u"){if(e===Vi.CurrencyDecimal)return n[ct.NumberSymbols][Vi.Decimal];if(e===Vi.CurrencyGroup)return n[ct.NumberSymbols][Vi.Group]}return r}function ak(t){if(!t[ct.ExtraData])throw new ue(2303,!1)}function lk(t){let e=qn(t);return ak(e),(e[ct.ExtraData][2]||[]).map(r=>typeof r=="string"?RE(r):[RE(r[0]),RE(r[1])])}function ck(t,e,n){let r=qn(t);ak(r);let i=[r[ct.ExtraData][0],r[ct.ExtraData][1]],s=cr(i,e)||[];return cr(s,n)||[]}function cr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new ue(2304,!1)}function RE(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var iq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Rm={},sq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function uk(t,e,n,r){let i=pq(t);e=Fi(n,e)||e;let o=[],a;for(;e;)if(a=sq.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let l=i.getTimezoneOffset();r&&(l=fk(r,l),i=hq(i,r));let c="";return o.forEach(u=>{let h=dq(u);c+=h?h(i,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Vm(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Fi(t,e){let n=nk(t);if(Rm[n]??={},Rm[n][e])return Rm[n][e];let r="";switch(e){case"shortDate":r=fd(t,Cn.Short);break;case"mediumDate":r=fd(t,Cn.Medium);break;case"longDate":r=fd(t,Cn.Long);break;case"fullDate":r=fd(t,Cn.Full);break;case"shortTime":r=hd(t,Cn.Short);break;case"mediumTime":r=hd(t,Cn.Medium);break;case"longTime":r=hd(t,Cn.Long);break;case"fullTime":r=hd(t,Cn.Full);break;case"short":let i=Fi(t,"shortTime"),s=Fi(t,"shortDate");r=Pm(pd(t,Cn.Short),[i,s]);break;case"medium":let o=Fi(t,"mediumTime"),a=Fi(t,"mediumDate");r=Pm(pd(t,Cn.Medium),[o,a]);break;case"long":let l=Fi(t,"longTime"),c=Fi(t,"longDate");r=Pm(pd(t,Cn.Long),[l,c]);break;case"full":let u=Fi(t,"fullTime"),h=Fi(t,"fullDate");r=Pm(pd(t,Cn.Full),[u,h]);break}return r&&(Rm[n][e]=r),r}function Pm(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Vr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function oq(t,e){return Vr(t,3).substring(0,e)}function pt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=aq(t,s);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return oq(a,e);let l=md(o,Vi.MinusSign);return Vr(a,e,l,r,i)}}function aq(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ue(2301,!1)}}function Ye(t,e,n=Yt.Format,r=!1){return function(i,s){return lq(i,s,t,e,n,r)}}function lq(t,e,n,r,i,s){switch(n){case 2:return sk(e,i,r)[t.getMonth()];case 1:return ik(e,i,r)[t.getDay()];case 0:let o=t.getHours(),a=t.getMinutes();if(s){let c=lk(e),u=ck(e,i,r),h=c.findIndex(p=>{if(Array.isArray(p)){let[m,g]=p,y=o>=m.hours&&a>=m.minutes,_=o<g.hours||o===g.hours&&a<g.minutes;if(m.hours<g.hours){if(y&&_)return!0}else if(y||_)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return rk(e,i,r)[o<12?0:1];case 3:return ok(e,r)[t.getFullYear()<=0?0:1];default:let l=n;throw new ue(2302,!1)}}function Lm(t){return function(e,n,r){let i=-1*r,s=md(n,Vi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Vr(o,2,s)+Vr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Vr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Vr(o,2,s)+":"+Vr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Vr(o,2,s)+":"+Vr(Math.abs(i%60),2,s);default:throw new ue(2310,!1)}}}var cq=0,Fm=4;function uq(t){let e=Vm(t,cq,1).getDay();return Vm(t,0,1+(e<=Fm?Fm:Fm+7)-e)}function dk(t){let e=t.getDay(),n=e===0?-3:Fm-e;return Vm(t.getFullYear(),t.getMonth(),t.getDate()+n)}function PE(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=dk(n),o=uq(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Vr(i,t,md(r,Vi.MinusSign))}}function Om(t,e=!1){return function(n,r){let s=dk(n).getFullYear();return Vr(s,t,md(r,Vi.MinusSign),e)}}var LE={};function dq(t){if(LE[t])return LE[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ye(3,je.Abbreviated);break;case"GGGG":e=Ye(3,je.Wide);break;case"GGGGG":e=Ye(3,je.Narrow);break;case"y":e=pt(0,1,0,!1,!0);break;case"yy":e=pt(0,2,0,!0,!0);break;case"yyy":e=pt(0,3,0,!1,!0);break;case"yyyy":e=pt(0,4,0,!1,!0);break;case"Y":e=Om(1);break;case"YY":e=Om(2,!0);break;case"YYY":e=Om(3);break;case"YYYY":e=Om(4);break;case"M":case"L":e=pt(1,1,1);break;case"MM":case"LL":e=pt(1,2,1);break;case"MMM":e=Ye(2,je.Abbreviated);break;case"MMMM":e=Ye(2,je.Wide);break;case"MMMMM":e=Ye(2,je.Narrow);break;case"LLL":e=Ye(2,je.Abbreviated,Yt.Standalone);break;case"LLLL":e=Ye(2,je.Wide,Yt.Standalone);break;case"LLLLL":e=Ye(2,je.Narrow,Yt.Standalone);break;case"w":e=PE(1);break;case"ww":e=PE(2);break;case"W":e=PE(1,!0);break;case"d":e=pt(2,1);break;case"dd":e=pt(2,2);break;case"c":case"cc":e=pt(7,1);break;case"ccc":e=Ye(1,je.Abbreviated,Yt.Standalone);break;case"cccc":e=Ye(1,je.Wide,Yt.Standalone);break;case"ccccc":e=Ye(1,je.Narrow,Yt.Standalone);break;case"cccccc":e=Ye(1,je.Short,Yt.Standalone);break;case"E":case"EE":case"EEE":e=Ye(1,je.Abbreviated);break;case"EEEE":e=Ye(1,je.Wide);break;case"EEEEE":e=Ye(1,je.Narrow);break;case"EEEEEE":e=Ye(1,je.Short);break;case"a":case"aa":case"aaa":e=Ye(0,je.Abbreviated);break;case"aaaa":e=Ye(0,je.Wide);break;case"aaaaa":e=Ye(0,je.Narrow);break;case"b":case"bb":case"bbb":e=Ye(0,je.Abbreviated,Yt.Standalone,!0);break;case"bbbb":e=Ye(0,je.Wide,Yt.Standalone,!0);break;case"bbbbb":e=Ye(0,je.Narrow,Yt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ye(0,je.Abbreviated,Yt.Format,!0);break;case"BBBB":e=Ye(0,je.Wide,Yt.Format,!0);break;case"BBBBB":e=Ye(0,je.Narrow,Yt.Format,!0);break;case"h":e=pt(3,1,-12);break;case"hh":e=pt(3,2,-12);break;case"H":e=pt(3,1);break;case"HH":e=pt(3,2);break;case"m":e=pt(4,1);break;case"mm":e=pt(4,2);break;case"s":e=pt(5,1);break;case"ss":e=pt(5,2);break;case"S":e=pt(6,1);break;case"SS":e=pt(6,2);break;case"SSS":e=pt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Lm(0);break;case"ZZZZZ":e=Lm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Lm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Lm(2);break;default:return null}return LE[t]=e,e}function fk(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function fq(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function hq(t,e,n){let i=t.getTimezoneOffset(),s=fk(e,i);return fq(t,-1*(s-i))}function pq(t){if(tk(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Vm(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(iq))return mq(r)}let e=new Date(t);if(!tk(e))throw new ue(2311,!1);return e}function mq(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,l,c),e}function tk(t){return t instanceof Date&&!isNaN(t.valueOf())}function gq(t,e){return new ue(2100,!1)}var vq="mediumDate",hk=new Ce(""),pk=new Ce(""),OE=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??vq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return uk(n,o,s||this.locale,a)}catch(o){throw gq(t,o.message)}}static \u0275fac=function(r){return new(r||t)(De(cd,16),De(hk,24),De(pk,24))};static \u0275pipe=_E({name:"date",type:t,pure:!0})}return t})();var _i=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=_s({})}return t})();function FE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var gd=class{};var mk="browser";var vd=class{_doc;constructor(e){this._doc=e}manager},Bm=(()=>{class t extends vd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,s){return n.addEventListener(r,i,s),()=>this.removeEventListener(n,r,i,s)}removeEventListener(n,r,i,s){return n.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||t)(He(Ar))};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})(),Hm=new Ce(""),$E=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});let i=n.filter(o=>!(o instanceof Bm));this._plugins=i.slice().reverse();let s=n.find(o=>o instanceof Bm);s&&this._plugins.push(s)}addEventListener(n,r,i,s){return this._findPluginFor(r).addEventListener(n,r,i,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(He(Hm),He(Un))};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})(),VE="ng-app-id";function gk(t){for(let e of t)e.remove()}function vk(t,e){let n=e.createElement("style");return n.textContent=t,n}function _q(t,e,n,r){let i=t.head?.querySelectorAll(`style[${VE}="${e}"],link[${VE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(VE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function UE(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var HE=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,_q(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,vk);r?.forEach(i=>this.addUsage(i,this.external,UE))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(gk(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gk(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,vk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,UE(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(He(Ar),He(hm),He(mm,8),He(ed))};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})(),BE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},GE=/%COMP%/g;var wk="%COMP%",Eq=`_nghost-${wk}`,Cq=`_ngcontent-${wk}`,Sq=!0,bq=new Ce("",{factory:()=>Sq});function xq(t){return Cq.replace(GE,t)}function Tq(t){return Eq.replace(GE,t)}function _k(t,e){return e.map(n=>n.replace(GE,t))}var qE=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,s,o,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=l,this.tracingService=c,this.defaultRenderer=new yd(n,o,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof $m?i.applyToHost(n):i instanceof wd&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.tracingService;switch(r.encapsulation){case Nr.Emulated:s=new $m(l,c,r,this.appId,u,o,a,h);break;case Nr.ShadowDom:return new Um(l,n,r,o,a,this.nonce,h,c);case Nr.ExperimentalIsolatedShadowDom:return new Um(l,n,r,o,a,this.nonce,h);default:s=new wd(l,c,r,u,o,a,h);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(He($E),He(HE),He(hm),He(bq),He(Ar),He(Un),He(mm),He(Wo,8))};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})(),yd=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(BE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yk(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yk(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=BE[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=BE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(wi.DashCase|wi.Important)?e.style.setProperty(n,r,i&wi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&wi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Ds().getGlobalEventTarget(this.doc,e),!e))throw new ue(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,n,s)),this.eventManager.addEventListener(e,n,s,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function yk(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Um=class extends yd{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,s,o,a,l){super(e,i,s,a),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=r.styles;c=_k(r.id,c);for(let h of c){let p=document.createElement("style");o&&p.setAttribute("nonce",o),p.textContent=h,this.shadowRoot.appendChild(p)}let u=r.getExternalStyles?.();if(u)for(let h of u){let p=UE(h,i);o&&p.setAttribute("nonce",o),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},wd=class extends yd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let c=r.styles;this.styles=l?_k(l,c):c,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Go.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},$m=class extends wd{contentAttr;hostAttr;constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=xq(c),this.hostAttr=Tq(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Gm=class t extends dd{supportsDOMEvents=!0;static makeCurrent(){NE(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Iq();return n==null?null:Aq(n)}resetBaseElement(){_d=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return FE(document.cookie,e)}},_d=null;function Iq(){return _d=_d||document.head.querySelector("base"),_d?_d.getAttribute("href"):null}function Aq(t){return new URL(t,document.baseURI).pathname}var Dq=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})(),Ek=["alt","control","meta","shift"],kq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ck=(()=>{class t extends vd{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ds().onAndCancel(n,o.domEventName,a,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Ek.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=kq[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ek.forEach(o=>{if(o!==i){let a=Mq[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(He(Ar))};static \u0275prov=Ne({token:t,factory:t.\u0275fac})}return t})();async function jE(t,e,n){let r=D({rootComponent:t},Nq(e,n));return Z1(r)}function Nq(t,e){return{platformRef:e?.platformRef,appProviders:[...Fq,...t?.providers??[]],platformProviders:Oq}}function Rq(){Gm.makeCurrent()}function Pq(){return new fi}function Lq(){return eE(document),document}var Oq=[{provide:ed,useValue:mk},{provide:pm,useValue:Rq,multi:!0},{provide:Ar,useFactory:Lq}];var Fq=[{provide:Mu,useValue:"root"},{provide:fi,useFactory:Pq},{provide:Hm,useClass:Bm,multi:!0},{provide:Hm,useClass:Ck,multi:!0},qE,HE,$E,{provide:qo,useExisting:qE},{provide:gd,useClass:Dq},[]];var un=class{static createInitialBoard(e="chess"){let n=Array(8).fill(null).map(()=>Array(8).fill(null));if(e==="chess"){for(let i=0;i<8;i++)n[1][i]={type:"p",color:"b"},n[6][i]={type:"p",color:"w"};let r=["r","n","b","q","k","b","n","r"];for(let i=0;i<8;i++)n[0][i]={type:r[i],color:"b"},n[7][i]={type:r[i],color:"w"}}else{for(let r=0;r<3;r++)for(let i=0;i<8;i++)(r+i)%2!==0&&(n[r][i]={type:"cm",color:"b"});for(let r=5;r<8;r++)for(let i=0;i<8;i++)(r+i)%2!==0&&(n[r][i]={type:"cm",color:"w"})}return n}static isValidPos(e){return e.row>=0&&e.row<8&&e.col>=0&&e.col<8}static getValidMoves(e,n,r="chess",i=null,s=!0){let o=e[n.row][n.col];if(!o)return[];let a=[];if(r==="checkers"){let h=e[n.row][n.col];if(!h)return[];let p=h.type==="ck"?[[1,1],[1,-1],[-1,1],[-1,-1]]:h.color==="w"?[[-1,-1],[-1,1]]:[[1,-1],[1,1]],m=[];for(let[g,y]of p){let _=n.row+g,w=n.col+y,A=n.row+g*2,k=n.col+y*2;if(this.isValidPos({row:A,col:k})&&e[A][k]===null){let T=e[_][w];if(T&&T.color!==h.color){if(h.type==="cm"&&T.type==="ck")continue;m.push({row:A,col:k})}}}if(m.length>0)return m;for(let[g,y]of p){let _=n.row+g,w=n.col+y;this.isValidPos({row:_,col:w})&&e[_][w]===null&&a.push({row:_,col:w})}return a}let l=o.color==="w"?-1:1,c=o.color==="w"?6:1,u=(h,p,m=!1,g=!1)=>{if(!this.isValidPos({row:h,col:p}))return!1;let y=e[h][p];return g&&y!==null||m&&(y===null||y.color===o.color)||!m&&!g&&y?.color===o.color?!1:(a.push({row:h,col:p}),y!==null)};if(o.type==="p"){let h=n.row+l;if(this.isValidPos({row:h,col:n.col})&&e[h][n.col]===null){a.push({row:h,col:n.col});let p=n.row+l*2;n.row===c&&this.isValidPos({row:p,col:n.col})&&e[p][n.col]===null&&a.push({row:p,col:n.col})}[[h,n.col-1],[h,n.col+1]].forEach(([p,m])=>{if(this.isValidPos({row:p,col:m})){let g=e[p][m];g&&g.color!==o.color&&a.push({row:p,col:m}),!g&&i&&i.piece.type==="p"&&i.to.row===n.row&&i.to.col===m&&Math.abs(i.from.row-i.to.row)===2&&a.push({row:p,col:m})}})}else{let p={r:[[1,0],[-1,0],[0,1],[0,-1]],b:[[1,1],[1,-1],[-1,1],[-1,-1]],q:[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]],n:[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],k:[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]]}[o.type]||[],m=o.type==="n"||o.type==="k";for(let[g,y]of p){let _=n.row+g,w=n.col+y;for(;this.isValidPos({row:_,col:w});){let A=e[_][w];if(A===null){if(a.push({row:_,col:w}),m)break}else{A.color!==o.color&&a.push({row:_,col:w});break}_+=g,w+=y}}if(s&&o.type==="k"&&!o.hasMoved&&!this.isKingInCheck(e,o.color)){let g=e[n.row][7];g&&g.type==="r"&&!g.hasMoved&&!e[n.row][5]&&!e[n.row][6]&&(this.isSquareAttacked(e,{row:n.row,col:5},o.color)||a.push({row:n.row,col:6}));let y=e[n.row][0];y&&y.type==="r"&&!y.hasMoved&&!e[n.row][1]&&!e[n.row][2]&&!e[n.row][3]&&(this.isSquareAttacked(e,{row:n.row,col:3},o.color)||a.push({row:n.row,col:2}))}}return a}static getLegalMoves(e,n,r="chess",i=null){let s=this.getValidMoves(e,n,r,i);if(r==="checkers"){let a=e[n.row][n.col];if(!a)return[];let l=!1;for(let c=0;c<8;c++){for(let u=0;u<8;u++){let h=e[c][u];if(h&&h.color===a.color&&this.getValidMoves(e,{row:c,col:u},"checkers",i).some(g=>Math.abs(g.row-c)===2)){l=!0;break}}if(l)break}return l?s.filter(c=>Math.abs(c.row-n.row)===2):s}let o=e[n.row][n.col];return o?s.filter(a=>{let l=this.simulateMove(e,n,a);return!this.isKingInCheck(l,o.color)}):[]}static isKingInCheck(e,n){let r=null;for(let i=0;i<8;i++){for(let s=0;s<8;s++){let o=e[i][s];if(o&&o.type==="k"&&o.color===n){r={row:i,col:s};break}}if(r)break}return r?this.isSquareAttacked(e,r,n):!1}static isSquareAttacked(e,n,r){let i=r==="w"?"b":"w";for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=e[s][o];if(a&&a.color===i&&this.getValidMoves(e,{row:s,col:o},"chess",null,!1).some(c=>c.row===n.row&&c.col===n.col))return!0}return!1}static simulateMove(e,n,r){let i=e.map(s=>[...s]);return i[r.row][r.col]=i[n.row][n.col],i[n.row][n.col]=null,i}static isCheckmate(e,n){if(!this.isKingInCheck(e,n))return!1;for(let r=0;r<8;r++)for(let i=0;i<8;i++){let s=e[r][i];if(s&&s.color===n&&this.getLegalMoves(e,{row:r,col:i},"chess").length>0)return!1}return!0}static isStalemate(e,n){if(this.isKingInCheck(e,n))return!1;for(let r=0;r<8;r++)for(let i=0;i<8;i++){let s=e[r][i];if(s&&s.color===n&&this.getLegalMoves(e,{row:r,col:i},"chess").length>0)return!1}return!0}static{this.PIECE_VALUES={p:100,n:320,b:330,r:500,q:900,k:2e4,cm:100,ck:300}}static{this.PAWN_PST=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]]}static{this.CHECKERS_PST=[[0,50,0,50,0,50,0,50],[40,0,40,0,40,0,40,0],[0,30,0,10,0,10,0,30],[20,0,25,0,25,0,20,0],[0,20,0,25,0,25,0,20],[30,0,10,0,10,0,30,0],[0,40,0,40,0,40,0,40],[50,0,50,0,50,0,50,0]]}static{this.KNIGHT_PST=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]]}static evaluateBoard(e,n="chess"){let r=0;for(let i=0;i<8;i++)for(let s=0;s<8;s++){let o=e[i][s];if(o){let a=this.PIECE_VALUES[o.type]||0,l=0;if(n==="chess"){let c=o.color==="w"?i:7-i;o.type==="p"&&(l=this.PAWN_PST[c][s]),o.type==="n"&&(l=this.KNIGHT_PST[c][s])}else if(n==="checkers"){let c=o.color==="w"?i:7-i;l=this.CHECKERS_PST[c][s]}o.color==="w"?r+=a+l:r-=a+l}}return r}static getBestMoveLocal(e,n,r,i){let s=null,o=i==="w"?-1/0:1/0,a=this.getAllUciMoves(e,i,n);for(let l of a){let c=this.uciToCoords(l.substring(0,2)),u=this.uciToCoords(l.substring(2,4));if(!c||!u)continue;let h=this.simulateMove(e,c,u),p=this.minimax(h,r-1,-1/0,1/0,i==="b",n);i==="w"?p>o&&(o=p,s=l):p<o&&(o=p,s=l)}return s}static minimax(e,n,r,i,s,o){if(n===0)return this.evaluateBoard(e,o);let a=s?"w":"b",l=this.getAllUciMoves(e,a,o);if(l.length===0)return this.isKingInCheck(e,a)?s?-1e5:1e5:0;if(s){let c=-1/0;for(let u of l){let h=this.uciToCoords(u.substring(0,2)),p=this.uciToCoords(u.substring(2,4)),m=this.minimax(this.simulateMove(e,h,p),n-1,r,i,!1,o);if(c=Math.max(c,m),r=Math.max(r,m),i<=r)break}return c}else{let c=1/0;for(let u of l){let h=this.uciToCoords(u.substring(0,2)),p=this.uciToCoords(u.substring(2,4)),m=this.minimax(this.simulateMove(e,h,p),n-1,r,i,!0,o);if(c=Math.min(c,m),i=Math.min(i,m),i<=r)break}return c}}static getAllUciMoves(e,n,r){let i=[],s=["a","b","c","d","e","f","g","h"];for(let o=0;o<8;o++)for(let a=0;a<8;a++){let l=e[o][a];if(l&&l.color===n){let c={row:o,col:a};this.getLegalMoves(e,c,r).forEach(h=>{i.push(`${s[c.col]}${8-c.row}${s[h.col]}${8-h.row}`)})}}return i}static uciToCoords(e){let r={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7}[e[0]],i=8-parseInt(e[1]);return isNaN(i)||r===void 0?null:{row:i,col:r}}static boardToFEN(e,n){let r="";for(let i=0;i<8;i++){let s=0;for(let o=0;o<8;o++){let a=e[i][o];if(a){s>0&&(r+=s,s=0);let l=a.type;l==="ck"&&(l="k"),l==="cm"&&(l="p"),r+=a.color==="w"?l.toUpperCase():l.toLowerCase()}else s++}s>0&&(r+=s),i<7&&(r+="/")}return r+=` ${n} - - 0 1`,r}};var Vq=Object.prototype.toString,Bq=t=>Vq.call(t)==="[object Error]",Uq=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function WE(t){if(!(t&&Bq(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:Uq.has(n)}function $q(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function qm(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be \u2265 ${n}.`)}}var Ed=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function Hq(t,e){let n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1,i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function Sk(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function Gq({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){let s=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(s instanceof Ed)throw s.originalError;let o=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,a=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:s,attemptNumber:e,retriesLeft:o,retriesConsumed:n});if(await i.onFailedAttempt(l),Sk(r,a)<=0)throw s;let c=await i.shouldConsumeRetry(l),u=Sk(r,a);if(u<=0||o<=0)throw s;if(s instanceof TypeError&&!WE(s)){if(c)throw s;return i.signal?.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw s;if(!c)return i.signal?.throwIfAborted(),!1;let h=Hq(n,i),p=Math.min(h,u);return i.signal?.throwIfAborted(),p>0&&await new Promise((m,g)=>{let y=()=>{clearTimeout(_),i.signal?.removeEventListener("abort",y),g(i.signal.reason)},_=setTimeout(()=>{i.signal?.removeEventListener("abort",y),m()},p);i.unref&&_.unref?.(),i.signal?.addEventListener("abort",y,{once:!0})}),i.signal?.throwIfAborted(),!0}async function zE(t,e={}){if(e=D({},e),$q(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??=10,e.factor??=2,e.minTimeout??=1e3,e.maxTimeout??=Number.POSITIVE_INFINITY,e.maxRetryTime??=Number.POSITIVE_INFINITY,e.randomize??=!1,e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.shouldConsumeRetry??=()=>!0,qm("factor",e.factor,{min:0,allowInfinity:!1}),qm("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),qm("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),qm("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),e.signal?.throwIfAborted();let n=0,r=0,i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{e.signal?.throwIfAborted();let s=await t(n);return e.signal?.throwIfAborted(),s}catch(s){await Gq({error:s,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var qq,jq;function Wq(){return{geminiUrl:qq,vertexUrl:jq}}function zq(t,e,n,r){var i,s;if(!t?.baseUrl){let o=Wq();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}var $r=class{};function B(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){let o=e[s];if(o.endsWith("[]")){let a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){let l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let u=l[c];f(u,e.slice(s+1),n[c])}else for(let c of l)f(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){let a=o.slice(0,-3);a in t||(t[a]=[{}]);let l=t[a];f(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}let r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;let i=e[r];if(i.endsWith("[]")){let s=i.slice(0,-2);if(s in t){let o=t[s];return Array.isArray(o)?o.map(a=>d(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Jq(t,e){for(let[n,r]of Object.entries(e)){let i=n.split("."),s=r.split("."),o=new Set,a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){let c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}QE(t,i,s,0,o)}}function QE(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;let s=e[r];if(s.endsWith("[]")){let o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(let l of a[o])QE(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(let c of a)l[c]=o[c];for(let[c,u]of Object.entries(l)){let h=[];for(let p of n.slice(r))p==="*"?h.push(c):h.push(p);f(o,h,u)}for(let c of a)delete o[c]}}else{let o=t;s in o&&QE(o[s],e,n,r+1,i)}}function KC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Yq(t){let e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);let r=d(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function Kq(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],Xq(o)),e}function Qq(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],Zq(o)),e}function Xq(t){let e={},n=d(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>e6(o))),f(e,["generatedVideos"],s)}let r=d(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);let i=d(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function Zq(t){let e={},n=d(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>t6(o))),f(e,["generatedVideos"],s)}let r=d(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);let i=d(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function e6(t){let e={},n=d(t,["video"]);return n!=null&&f(e,["video"],a6(n)),e}function t6(t){let e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],l6(n)),e}function n6(t){let e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function r6(t){let e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function i6(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],s6(o)),e}function s6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function Jk(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],o6(o)),e}function o6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function a6(t){let e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);let r=d(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],KC(r));let i=d(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function l6(t){let e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);let r=d(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],KC(r));let i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}var Xo=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(Xo||{});var XE=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(XE||{});var Yk=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(Yk||{});var Kk=(function(t){return t.COLLECTION="COLLECTION",t})(Kk||{});var Sd=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(Sd||{});var xd=class{constructor(e){let n={};for(let r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Qo=class{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1,h=[];for(let p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",u=[];for(let h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&u.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if(c?.length!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(u?.length!==0)return(c=u?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(u?.length!==0)return(c=u?.[0])===null||c===void 0?void 0:c.output}},Xm=class{},Zm=class{},ZE=class{},eC=class{},tC=class{},nC=class{},eg=class{},tg=class{},ng=class{},rC=class{};var rg=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,i,s=e;return n?i=Qq(s):i=Kq(s),Object.assign(r,i),r}},ig=class{},sg=class{},og=class{},ag=class{},iC=class{},sC=class{},oC=class{};var aC=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,s=i6(e);return Object.assign(r,s),r}},lC=class{},cC=class{},uC=class{},dC=class{};var lg=class{};var fC=class{get text(){var e,n,r;let i="",s=!1,o=[];for(let a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="",s=[];for(let o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var hC=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var pC=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,s=Jk(e);return Object.assign(r,s),r}};function ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qk(t,e){let n=ke(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Xk(t){return Array.isArray(t)?t.map(e=>cg(e)):[cg(t)]}function cg(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Zk(t){let e=cg(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eM(t){let e=cg(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bk(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>bk(e)):[bk(t)]}function mC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function xk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Tk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Kt(t){if(t==null)throw new Error("ContentUnion is required");return mC(t)?t:{role:"user",parts:tM(t)}}function QC(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let r=Kt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){let n=Kt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Kt(n)):[Kt(e)]}function ur(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(xk(t)||Tk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(t)]}let e=[],n=[],r=mC(t[0]);for(let i of t){let s=mC(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(xk(i)||Tk(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:tM(n)}),e}function c6(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Xo).includes(n[0].toUpperCase())?n[0].toUpperCase():Xo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of n)e.anyOf.push({type:Object.values(Xo).includes(r.toUpperCase())?r.toUpperCase():Xo.TYPE_UNSPECIFIED})}}function Ml(t){let e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&c6(t.type,e);for(let[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Xo).includes(a.toUpperCase())?a.toUpperCase():Xo.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Ml(a);else if(r.includes(o)){let l=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Ml(c))}e[o]=l}else if(i.includes(o)){let l={};for(let[c,u]of Object.entries(a))l[c]=Ml(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function XC(t){return Ml(t)}function ZC(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function eS(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ll(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ml(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ml(e.response));return t}function Ol(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function u6(t,e,n,r=1){let i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ui(t,e){if(typeof e!="string")throw new Error("name must be a string");return u6(t,e,"cachedContents")}function nM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ks(t){return KC(t)}function d6(t){return t!=null&&typeof t=="object"&&"name"in t}function f6(t){return t!=null&&typeof t=="object"&&"video"in t}function h6(t){return t!=null&&typeof t=="object"&&"uri"in t}function rM(t){var e;let n;if(d6(t)&&(n=t.name),!(h6(t)&&(n=t.uri,n===void 0))&&!(f6(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function iM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function sM(t){for(let e of["models","tunedModels","publisherModels"])if(p6(t,e))return t[e];return[]}function p6(t,e){return t!==null&&typeof t=="object"&&e in t}function m6(t,e={}){let n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function g6(t,e={}){let n=[],r=new Set;for(let i of t){let s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);let o=m6(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function oM(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function v6(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function aM(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(let o of i){if(typeof o!="object"||o===null)continue;let l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fl(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function lM(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function y6(t){let e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);let r=d(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>X6(o))),f(e,["inlinedResponses"],s)}let i=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["inlinedEmbedContentResponses"],s)}return e}function w6(t){let e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);let r=d(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);let i=d(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function _6(t){let e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);let r=d(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);let i=d(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Km(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);let i=d(t,["metadata","state"]);i!=null&&f(e,["state"],lM(i));let s=d(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);let o=d(t,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);let a=d(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);let l=d(t,["metadata","model"]);l!=null&&f(e,["model"],l);let c=d(t,["metadata","output"]);return c!=null&&f(e,["dest"],y6(aM(c))),e}function gC(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["displayName"]);r!=null&&f(e,["displayName"],r);let i=d(t,["state"]);i!=null&&f(e,["state"],lM(i));let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);let a=d(t,["startTime"]);a!=null&&f(e,["startTime"],a);let l=d(t,["endTime"]);l!=null&&f(e,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);let u=d(t,["model"]);u!=null&&f(e,["model"],u);let h=d(t,["inputConfig"]);h!=null&&f(e,["src"],E6(h));let p=d(t,["outputConfig"]);p!=null&&f(e,["dest"],w6(aM(p)));let m=d(t,["completionStats"]);return m!=null&&f(e,["completionStats"],m),e}function E6(t){let e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);let r=d(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);let i=d(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function C6(t,e){let n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=d(e,["fileName"]);r!=null&&f(n,["fileName"],r);let i=d(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Q6(t,o))),f(n,["requests","requests"],s)}return n}function S6(t){let e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);let r=d(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);let i=d(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function b6(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function x6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function T6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function I6(t){let e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);let r=d(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],A6(r));let i=d(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);let s=d(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);let o=d(t,["avgLogprobs"]);o!=null&&f(e,["avgLogprobs"],o);let a=d(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);let l=d(t,["index"]);l!=null&&f(e,["index"],l);let c=d(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);let u=d(t,["safetyRatings"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["safetyRatings"],p)}let h=d(t,["urlContextMetadata"]);return h!=null&&f(e,["urlContextMetadata"],h),e}function A6(t){let e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function cM(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>sj(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function D6(t,e){let n={},r=d(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function k6(t,e){let n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);let i=d(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],_6(v6(i))),n}function Ik(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["_url","model"],ke(t,r));let i=d(e,["src"]);i!=null&&f(n,["batch","inputConfig"],C6(t,oM(t,i)));let s=d(e,["config"]);return s!=null&&D6(s,n),n}function M6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],ke(t,r));let i=d(e,["src"]);i!=null&&f(n,["inputConfig"],S6(oM(t,i)));let s=d(e,["config"]);return s!=null&&k6(s,n),n}function N6(t,e){let n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function R6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["_url","model"],ke(t,r));let i=d(e,["src"]);i!=null&&f(n,["batch","inputConfig"],U6(t,i));let s=d(e,["config"]);return s!=null&&N6(s,n),n}function P6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function L6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function O6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function F6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function V6(t,e){let n={},r=d(e,["contents"]);if(r!=null){let s=QC(t,r);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["requests[]","request","content"],s)}let i=d(e,["config"]);return i!=null&&(f(n,["_self"],B6(i,n)),Jq(n,{"requests[].*":"requests[].request.*"})),n}function B6(t,e){let n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);let i=d(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);let s=d(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function U6(t,e){let n={},r=d(e,["fileName"]);r!=null&&f(n,["file_name"],r);let i=d(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],V6(t,i)),n}function $6(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function H6(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function G6(t){let e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);let r=d(t,["mode"]);if(r!=null&&f(e,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function q6(t,e,n){let r={},i=d(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],cM(Kt(i)));let s=d(e,["temperature"]);s!=null&&f(r,["temperature"],s);let o=d(e,["topP"]);o!=null&&f(r,["topP"],o);let a=d(e,["topK"]);a!=null&&f(r,["topK"],a);let l=d(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);let c=d(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);let u=d(e,["stopSequences"]);u!=null&&f(r,["stopSequences"],u);let h=d(e,["responseLogprobs"]);h!=null&&f(r,["responseLogprobs"],h);let p=d(e,["logprobs"]);p!=null&&f(r,["logprobs"],p);let m=d(e,["presencePenalty"]);m!=null&&f(r,["presencePenalty"],m);let g=d(e,["frequencyPenalty"]);g!=null&&f(r,["frequencyPenalty"],g);let y=d(e,["seed"]);y!=null&&f(r,["seed"],y);let _=d(e,["responseMimeType"]);_!=null&&f(r,["responseMimeType"],_);let w=d(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],XC(w));let A=d(e,["responseJsonSchema"]);if(A!=null&&f(r,["responseJsonSchema"],A),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let k=d(e,["safetySettings"]);if(n!==void 0&&k!=null){let gt=k;Array.isArray(gt)&&(gt=gt.map(xt=>oj(xt))),f(n,["safetySettings"],gt)}let T=d(e,["tools"]);if(n!==void 0&&T!=null){let gt=Ol(T);Array.isArray(gt)&&(gt=gt.map(xt=>lj(Ll(xt)))),f(n,["tools"],gt)}let L=d(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],aj(L)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=d(e,["cachedContent"]);n!==void 0&&R!=null&&f(n,["cachedContent"],Ui(t,R));let $=d(e,["responseModalities"]);$!=null&&f(r,["responseModalities"],$);let K=d(e,["mediaResolution"]);K!=null&&f(r,["mediaResolution"],K);let ie=d(e,["speechConfig"]);if(ie!=null&&f(r,["speechConfig"],ZC(ie)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let le=d(e,["thinkingConfig"]);le!=null&&f(r,["thinkingConfig"],le);let nt=d(e,["imageConfig"]);nt!=null&&f(r,["imageConfig"],K6(nt));let $t=d(e,["enableEnhancedCivicAnswers"]);if($t!=null&&f(r,["enableEnhancedCivicAnswers"],$t),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function j6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>I6(c))),f(e,["candidates"],l)}let i=d(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);let s=d(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);let o=d(t,["responseId"]);o!=null&&f(e,["responseId"],o);let a=d(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function W6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function z6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Fl(t,r)),n}function J6(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Y6(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function K6(t){let e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);let r=d(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Q6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["request","model"],ke(t,r));let i=d(e,["contents"]);if(i!=null){let a=ur(i);Array.isArray(a)&&(a=a.map(l=>cM(l))),f(n,["request","contents"],a)}let s=d(e,["metadata"]);s!=null&&f(n,["metadata"],s);let o=d(e,["config"]);return o!=null&&f(n,["request","generationConfig"],q6(t,o,d(n,["request"],{}))),n}function X6(t){let e={},n=d(t,["response"]);n!=null&&f(e,["response"],j6(n));let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["error"]);return i!=null&&f(e,["error"],i),e}function Z6(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ej(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);let s=d(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function tj(t){let e={},n=d(t,["config"]);return n!=null&&Z6(n,e),e}function nj(t){let e={},n=d(t,["config"]);return n!=null&&ej(n,e),e}function rj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Km(o))),f(e,["batchJobs"],s)}return e}function ij(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>gC(o))),f(e,["batchJobs"],s)}return e}function sj(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],$6(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],H6(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],b6(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function oj(t){let e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=d(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function aj(t){let e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);let r=d(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],G6(r)),e}function lj(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],J6(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Y6(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}var Ms=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(Ms||{}),Bi=class{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var vC=class extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(Ms.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=Ik(this.apiClient,e),r=n._url,i=B("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let u of l){let h=Object.assign({},u);if(h.systemInstruction){let p=h.systemInstruction;delete h.systemInstruction;let m=h.request;m.systemInstruction=p,h.request=m}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){let s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=M6(this.apiClient,e);return a=B("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>gC(u))}else{let c=Ik(this.apiClient,e);return a=B("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Km(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=R6(this.apiClient,e);return s=B("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Km(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=z6(this.apiClient,e);return a=B("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>gC(u))}else{let c=W6(this.apiClient,e);return a=B("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Km(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let l=T6(this.apiClient,e);o=B("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=x6(this.apiClient,e);o=B("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=nj(e);return a=B("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=ij(u),p=new lg;return Object.assign(p,h),p})}else{let c=tj(e);return a=B("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=rj(u),p=new lg;return Object.assign(p,h),p})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=L6(this.apiClient,e);return a=B("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>F6(u))}else{let c=P6(this.apiClient,e);return a=B("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>O6(u))}}};function cj(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Ak(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Nj(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function uj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);let s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);let o=d(t,["contents"]);if(e!==void 0&&o!=null){let u=ur(o);Array.isArray(u)&&(u=u.map(h=>Ak(h))),f(e,["contents"],u)}let a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Ak(Kt(a)));let l=d(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>Pj(h))),f(e,["tools"],u)}let c=d(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],Rj(c)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function dj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);let s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);let o=d(t,["contents"]);if(e!==void 0&&o!=null){let h=ur(o);Array.isArray(h)&&(h=h.map(p=>p)),f(e,["contents"],h)}let a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Kt(a));let l=d(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>Lj(p))),f(e,["tools"],h)}let c=d(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);let u=d(t,["kmsKeyName"]);return e!==void 0&&u!=null&&f(e,["encryption_spec","kmsKeyName"],u),n}function fj(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],Qk(t,r));let i=d(e,["config"]);return i!=null&&uj(i,n),n}function hj(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],Qk(t,r));let i=d(e,["config"]);return i!=null&&dj(i,n),n}function pj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Ui(t,r)),n}function mj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Ui(t,r)),n}function gj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function vj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function yj(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function wj(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _j(t){let e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);let r=d(t,["mode"]);if(r!=null&&f(e,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ej(t){let e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["parameters"]);i!=null&&f(e,["parameters"],i);let s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);let o=d(t,["response"]);o!=null&&f(e,["response"],o);let a=d(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Cj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Ui(t,r)),n}function Sj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Ui(t,r)),n}function bj(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function xj(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Tj(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Ij(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Aj(t){let e={},n=d(t,["config"]);return n!=null&&Tj(n,e),e}function Dj(t){let e={},n=d(t,["config"]);return n!=null&&Ij(n,e),e}function kj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function Mj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function Nj(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],yj(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],wj(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],cj(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function Rj(t){let e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);let r=d(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],_j(r)),e}function Pj(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],bj(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],xj(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Lj(t){let e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);let r=d(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=d(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);let s=d(t,["enterpriseWebSearch"]);s!=null&&f(e,["enterpriseWebSearch"],s);let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>Ej(p))),f(e,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);let l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);let c=d(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function Oj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function Fj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function Vj(t,e){let n={},r=d(e,["name"]);r!=null&&f(n,["_url","name"],Ui(t,r));let i=d(e,["config"]);return i!=null&&Oj(i,n),n}function Bj(t,e){let n={},r=d(e,["name"]);r!=null&&f(n,["_url","name"],Ui(t,r));let i=d(e,["config"]);return i!=null&&Fj(i,n),n}var yC=class extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(Ms.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=hj(this.apiClient,e);return a=B("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=fj(this.apiClient,e);return a=B("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Sj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=Cj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=mj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=vj(u),p=new og;return Object.assign(p,h),p})}else{let c=pj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=gj(u),p=new og;return Object.assign(p,h),p})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Bj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=Vj(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Dj(e);return a=B("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=Mj(u),p=new ag;return Object.assign(p,h),p})}else{let c=Aj(e);return a=B("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=kj(u),p=new ag;return Object.assign(p,h),p})}}};function ug(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Dk(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function Br(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(g){return Promise.resolve(g).then(m,h)}}function a(m,g){r[m]&&(i[m]=function(y){return new Promise(function(_,w){s.push([m,y,_,w])>1||l(m,y)})},g&&(i[m]=g(i[m])))}function l(m,g){try{c(r[m](g))}catch(y){p(s[0][3],y)}}function c(m){m.value instanceof ve?Promise.resolve(m.value.v).then(u,h):p(s[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function p(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ur(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dk=="function"?Dk(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function Uj(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:uM(n)}function uM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $j(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function kk(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{let i=[],s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!uM(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}var wC=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _C(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},_C=class{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),$j(s)}async sendMessage(e){var n;await this.sendPromise;let r=Kt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;let l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length,p=[];u!=null&&(p=(a=u.slice(h))!==null&&a!==void 0?a:[]);let m=c?[c]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;let r=Kt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){let n=e?kk(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Br(this,arguments,function*(){var i,s,o,a,l,c;let u=[];try{for(var h=!0,p=Ur(e),m;m=yield ve(p.next()),i=m.done,!i;h=!0){a=m.value,h=!1;let g=a;if(Uj(g)){let y=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;y!==void 0&&u.push(y)}yield yield ve(g)}}catch(g){s={error:g}}finally{try{!h&&!i&&(o=p.return)&&(yield ve(o.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...kk(r)):this.history.push(e),this.history.push(...i)}};var Td=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function Hj(t){let e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function Gj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function qj(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],rM(n)),e}function jj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Wj(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],rM(n)),e}function zj(t){let e={},n=d(t,["uris"]);return n!=null&&f(e,["uris"],n),e}function Jj(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Yj(t){let e={},n=d(t,["config"]);return n!=null&&Jj(n,e),e}function Kj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["files"],s)}return e}function Qj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["files"],i)}return e}var EC=class extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(Ms.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Yj(e);return s=B("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=Kj(l),u=new lC;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Hj(e);return s=B("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Gj(l),u=new cC;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Wj(e);return s=B("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=qj(e);return s=B("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=jj(l),u=new uC;return Object.assign(u,c),u})}}async registerFilesInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=zj(e);return s=B("files:register",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Qj(l),u=new dC;return Object.assign(u,c),u})}}};function Qm(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Xj(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>p9(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function Zj(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function e9(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t9(t){let e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["parameters"]);i!=null&&f(e,["parameters"],i);let s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);let o=d(t,["response"]);o!=null&&f(e,["response"],o);let a=d(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function n9(t){let e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);let r=d(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);let i=d(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);let s=d(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);let o=d(t,["enableAffectiveDialog"]);o!=null&&f(e,["enableAffectiveDialog"],o);let a=d(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);let l=d(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);let c=d(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);let u=d(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);let h=d(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);let p=d(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);let m=d(t,["responseMimeType"]);m!=null&&f(e,["responseMimeType"],m);let g=d(t,["responseModalities"]);g!=null&&f(e,["responseModalities"],g);let y=d(t,["responseSchema"]);y!=null&&f(e,["responseSchema"],y);let _=d(t,["routingConfig"]);_!=null&&f(e,["routingConfig"],_);let w=d(t,["seed"]);w!=null&&f(e,["seed"],w);let A=d(t,["speechConfig"]);A!=null&&f(e,["speechConfig"],A);let k=d(t,["stopSequences"]);k!=null&&f(e,["stopSequences"],k);let T=d(t,["temperature"]);T!=null&&f(e,["temperature"],T);let L=d(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);let R=d(t,["topK"]);R!=null&&f(e,["topK"],R);let $=d(t,["topP"]);if($!=null&&f(e,["topP"],$),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function r9(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function i9(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function s9(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],eS(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Xj(Kt(g)));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let R=Ol(y);Array.isArray(R)&&(R=R.map($=>g9(Ll($)))),f(e,["setup","tools"],R)}let _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],m9(_));let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let A=d(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);let k=d(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);let T=d(t,["contextWindowCompression"]);e!==void 0&&T!=null&&f(e,["setup","contextWindowCompression"],T);let L=d(t,["proactivity"]);if(e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function o9(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],n9(r));let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],eS(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Kt(g));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let $=Ol(y);Array.isArray($)&&($=$.map(K=>v9(Ll(K)))),f(e,["setup","tools"],$)}let _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],_);let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let A=d(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);let k=d(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);let T=d(t,["contextWindowCompression"]);e!==void 0&&T!=null&&f(e,["setup","contextWindowCompression"],T);let L=d(t,["proactivity"]);e!==void 0&&L!=null&&f(e,["setup","proactivity"],L);let R=d(t,["explicitVadSignal"]);return e!==void 0&&R!=null&&f(e,["setup","explicitVadSignal"],R),n}function a9(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],ke(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],s9(i,n)),n}function l9(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],ke(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],o9(i,n)),n}function c9(t){let e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function u9(t){let e={},n=d(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function d9(t){let e={},n=d(t,["media"]);if(n!=null){let c=Xk(n);Array.isArray(c)&&(c=c.map(u=>Qm(u))),f(e,["mediaChunks"],c)}let r=d(t,["audio"]);r!=null&&f(e,["audio"],Qm(eM(r)));let i=d(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);let s=d(t,["video"]);s!=null&&f(e,["video"],Qm(Zk(s)));let o=d(t,["text"]);o!=null&&f(e,["text"],o);let a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function f9(t){let e={},n=d(t,["media"]);if(n!=null){let c=Xk(n);Array.isArray(c)&&(c=c.map(u=>u)),f(e,["mediaChunks"],c)}let r=d(t,["audio"]);r!=null&&f(e,["audio"],eM(r));let i=d(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);let s=d(t,["video"]);s!=null&&f(e,["video"],Zk(s));let o=d(t,["text"]);o!=null&&f(e,["text"],o);let a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function h9(t){let e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);let r=d(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);let i=d(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);let s=d(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);let o=d(t,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],y9(o));let a=d(t,["goAway"]);a!=null&&f(e,["goAway"],a);let l=d(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);let c=d(t,["voiceActivityDetectionSignal"]);c!=null&&f(e,["voiceActivityDetectionSignal"],c);let u=d(t,["voiceActivity"]);return u!=null&&f(e,["voiceActivity"],w9(u)),e}function p9(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],Zj(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],e9(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],Qm(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function m9(t){let e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function g9(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],r9(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],i9(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function v9(t){let e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);let r=d(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=d(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);let s=d(t,["enterpriseWebSearch"]);s!=null&&f(e,["enterpriseWebSearch"],s);let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>t9(p))),f(e,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);let l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);let c=d(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function y9(t){let e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);let r=d(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);let i=d(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);let s=d(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);let o=d(t,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);let a=d(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);let l=d(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["promptTokensDetails"],m)}let c=d(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["cacheTokensDetails"],m)}let u=d(t,["candidatesTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["responseTokensDetails"],m)}let h=d(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["toolUsePromptTokensDetails"],m)}let p=d(t,["trafficType"]);return p!=null&&f(e,["trafficType"],p),e}function w9(t){let e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}function _9(t,e){let n={},r=d(t,["data"]);if(r!=null&&f(n,["data"],r),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function E9(t,e){let n={},r=d(t,["content"]);r!=null&&f(n,["content"],r);let i=d(t,["citationMetadata"]);i!=null&&f(n,["citationMetadata"],C9(i));let s=d(t,["tokenCount"]);s!=null&&f(n,["tokenCount"],s);let o=d(t,["finishReason"]);o!=null&&f(n,["finishReason"],o);let a=d(t,["avgLogprobs"]);a!=null&&f(n,["avgLogprobs"],a);let l=d(t,["groundingMetadata"]);l!=null&&f(n,["groundingMetadata"],l);let c=d(t,["index"]);c!=null&&f(n,["index"],c);let u=d(t,["logprobsResult"]);u!=null&&f(n,["logprobsResult"],u);let h=d(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),f(n,["safetyRatings"],m)}let p=d(t,["urlContextMetadata"]);return p!=null&&f(n,["urlContextMetadata"],p),n}function C9(t,e){let n={},r=d(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(n,["citations"],i)}return n}function S9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let o=ur(s);Array.isArray(o)&&(o=o.map(a=>a)),f(r,["contents"],o)}return r}function b9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(n,["tokensInfo"],s)}return n}function x9(t,e){let n={},r=d(t,["values"]);r!=null&&f(n,["values"],r);let i=d(t,["statistics"]);return i!=null&&f(n,["statistics"],T9(i)),n}function T9(t,e){let n={},r=d(t,["truncated"]);r!=null&&f(n,["truncated"],r);let i=d(t,["token_count"]);return i!=null&&f(n,["tokenCount"],i),n}function xg(t,e){let n={},r=d(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>LW(o))),f(n,["parts"],s)}let i=d(t,["role"]);return i!=null&&f(n,["role"],i),n}function I9(t,e){let n={},r=d(t,["controlType"]);r!=null&&f(n,["controlType"],r);let i=d(t,["enableControlImageComputation"]);return i!=null&&f(n,["computeControl"],i),n}function A9(t,e){let n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function D9(t,e,n){let r={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Kt(i));let s=d(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>pM(l))),f(e,["tools"],a)}let o=d(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],_W(o)),r}function k9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let a=ur(s);Array.isArray(a)&&(a=a.map(l=>xg(l))),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&A9(o),r}function M9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let a=ur(s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&D9(o,r),r}function N9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["totalTokens"]);i!=null&&f(n,["totalTokens"],i);let s=d(t,["cachedContentTokenCount"]);return s!=null&&f(n,["cachedContentTokenCount"],s),n}function R9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["totalTokens"]);return i!=null&&f(n,["totalTokens"],i),n}function P9(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],ke(t,i)),r}function L9(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],ke(t,i)),r}function O9(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function F9(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function V9(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);let o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);let l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);let c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);let g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);let y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);let _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);let w=d(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);let A=d(t,["labels"]);e!==void 0&&A!=null&&f(e,["labels"],A);let k=d(t,["editMode"]);e!==void 0&&k!=null&&f(e,["parameters","editMode"],k);let T=d(t,["baseSteps"]);return e!==void 0&&T!=null&&f(e,["parameters","editConfig","baseSteps"],T),r}function B9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>$W(c))),f(r,["instances[0]","referenceImages"],l)}let a=d(e,["config"]);return a!=null&&V9(a,r),r}function U9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Tg(o))),f(n,["generatedImages"],s)}return n}function $9(t,e,n){let r={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);let s=d(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);let o=d(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function H9(t,e,n){let r={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);let s=d(t,["title"]);e!==void 0&&s!=null&&f(e,["instances[]","title"],s);let o=d(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);let a=d(t,["mimeType"]);e!==void 0&&a!=null&&f(e,["instances[]","mimeType"],a);let l=d(t,["autoTruncate"]);return e!==void 0&&l!=null&&f(e,["parameters","autoTruncate"],l),r}function G9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let l=QC(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(r,["requests[]","content"],l)}let o=d(e,["config"]);o!=null&&$9(o,r);let a=d(e,["model"]);return a!==void 0&&f(r,["requests[]","model"],ke(t,a)),r}function q9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let a=QC(t,s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["instances[]","content"],a)}let o=d(e,["config"]);return o!=null&&H9(o,r),r}function j9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(n,["embeddings"],o)}let s=d(t,["metadata"]);return s!=null&&f(n,["metadata"],s),n}function W9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>x9(a))),f(n,["embeddings"],o)}let s=d(t,["metadata"]);return s!=null&&f(n,["metadata"],s),n}function z9(t,e){let n={},r=d(t,["endpoint"]);r!=null&&f(n,["name"],r);let i=d(t,["deployedModelId"]);return i!=null&&f(n,["deployedModelId"],i),n}function J9(t,e){let n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["fileUri"]);r!=null&&f(n,["fileUri"],r);let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function Y9(t,e){let n={},r=d(t,["id"]);r!=null&&f(n,["id"],r);let i=d(t,["args"]);i!=null&&f(n,["args"],i);let s=d(t,["name"]);if(s!=null&&f(n,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function K9(t,e){let n={},r=d(t,["allowedFunctionNames"]);r!=null&&f(n,["allowedFunctionNames"],r);let i=d(t,["mode"]);if(i!=null&&f(n,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Q9(t,e){let n={},r=d(t,["description"]);r!=null&&f(n,["description"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["parameters"]);s!=null&&f(n,["parameters"],s);let o=d(t,["parametersJsonSchema"]);o!=null&&f(n,["parametersJsonSchema"],o);let a=d(t,["response"]);a!=null&&f(n,["response"],a);let l=d(t,["responseJsonSchema"]);if(l!=null&&f(n,["responseJsonSchema"],l),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function X9(t,e,n,r){let i={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],xg(Kt(s)));let o=d(e,["temperature"]);o!=null&&f(i,["temperature"],o);let a=d(e,["topP"]);a!=null&&f(i,["topP"],a);let l=d(e,["topK"]);l!=null&&f(i,["topK"],l);let c=d(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);let u=d(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);let h=d(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);let p=d(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=d(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);let g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);let y=d(e,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);let _=d(e,["seed"]);_!=null&&f(i,["seed"],_);let w=d(e,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);let A=d(e,["responseSchema"]);A!=null&&f(i,["responseSchema"],XC(A));let k=d(e,["responseJsonSchema"]);if(k!=null&&f(i,["responseJsonSchema"],k),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=d(e,["safetySettings"]);if(n!==void 0&&T!=null){let xt=T;Array.isArray(xt)&&(xt=xt.map(qi=>HW(qi))),f(n,["safetySettings"],xt)}let L=d(e,["tools"]);if(n!==void 0&&L!=null){let xt=Ol(L);Array.isArray(xt)&&(xt=xt.map(qi=>YW(Ll(qi)))),f(n,["tools"],xt)}let R=d(e,["toolConfig"]);if(n!==void 0&&R!=null&&f(n,["toolConfig"],JW(R)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let $=d(e,["cachedContent"]);n!==void 0&&$!=null&&f(n,["cachedContent"],Ui(t,$));let K=d(e,["responseModalities"]);K!=null&&f(i,["responseModalities"],K);let ie=d(e,["mediaResolution"]);ie!=null&&f(i,["mediaResolution"],ie);let le=d(e,["speechConfig"]);if(le!=null&&f(i,["speechConfig"],ZC(le)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let nt=d(e,["thinkingConfig"]);nt!=null&&f(i,["thinkingConfig"],nt);let $t=d(e,["imageConfig"]);$t!=null&&f(i,["imageConfig"],xW($t));let gt=d(e,["enableEnhancedCivicAnswers"]);if(gt!=null&&f(i,["enableEnhancedCivicAnswers"],gt),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Z9(t,e,n,r){let i={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],Kt(s));let o=d(e,["temperature"]);o!=null&&f(i,["temperature"],o);let a=d(e,["topP"]);a!=null&&f(i,["topP"],a);let l=d(e,["topK"]);l!=null&&f(i,["topK"],l);let c=d(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);let u=d(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);let h=d(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);let p=d(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=d(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);let g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);let y=d(e,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);let _=d(e,["seed"]);_!=null&&f(i,["seed"],_);let w=d(e,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);let A=d(e,["responseSchema"]);A!=null&&f(i,["responseSchema"],XC(A));let k=d(e,["responseJsonSchema"]);k!=null&&f(i,["responseJsonSchema"],k);let T=d(e,["routingConfig"]);T!=null&&f(i,["routingConfig"],T);let L=d(e,["modelSelectionConfig"]);L!=null&&f(i,["modelConfig"],L);let R=d(e,["safetySettings"]);if(n!==void 0&&R!=null){let pr=R;Array.isArray(pr)&&(pr=pr.map(ec=>ec)),f(n,["safetySettings"],pr)}let $=d(e,["tools"]);if(n!==void 0&&$!=null){let pr=Ol($);Array.isArray(pr)&&(pr=pr.map(ec=>pM(Ll(ec)))),f(n,["tools"],pr)}let K=d(e,["toolConfig"]);n!==void 0&&K!=null&&f(n,["toolConfig"],K);let ie=d(e,["labels"]);n!==void 0&&ie!=null&&f(n,["labels"],ie);let le=d(e,["cachedContent"]);n!==void 0&&le!=null&&f(n,["cachedContent"],Ui(t,le));let nt=d(e,["responseModalities"]);nt!=null&&f(i,["responseModalities"],nt);let $t=d(e,["mediaResolution"]);$t!=null&&f(i,["mediaResolution"],$t);let gt=d(e,["speechConfig"]);gt!=null&&f(i,["speechConfig"],ZC(gt));let xt=d(e,["audioTimestamp"]);xt!=null&&f(i,["audioTimestamp"],xt);let qi=d(e,["thinkingConfig"]);qi!=null&&f(i,["thinkingConfig"],qi);let of=d(e,["imageConfig"]);if(of!=null&&f(i,["imageConfig"],TW(of)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let yv=d(e,["modelArmorConfig"]);return n!==void 0&&yv!=null&&f(n,["modelArmorConfig"],yv),i}function Mk(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let a=ur(s);Array.isArray(a)&&(a=a.map(l=>xg(l))),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&f(r,["generationConfig"],X9(t,o,r)),r}function Nk(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["contents"]);if(s!=null){let a=ur(s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&f(r,["generationConfig"],Z9(t,o,r)),r}function Rk(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>E9(u))),f(n,["candidates"],c)}let s=d(t,["modelVersion"]);s!=null&&f(n,["modelVersion"],s);let o=d(t,["promptFeedback"]);o!=null&&f(n,["promptFeedback"],o);let a=d(t,["responseId"]);a!=null&&f(n,["responseId"],a);let l=d(t,["usageMetadata"]);return l!=null&&f(n,["usageMetadata"],l),n}function Pk(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>h)),f(n,["candidates"],u)}let s=d(t,["createTime"]);s!=null&&f(n,["createTime"],s);let o=d(t,["modelVersion"]);o!=null&&f(n,["modelVersion"],o);let a=d(t,["promptFeedback"]);a!=null&&f(n,["promptFeedback"],a);let l=d(t,["responseId"]);l!=null&&f(n,["responseId"],l);let c=d(t,["usageMetadata"]);return c!=null&&f(n,["usageMetadata"],c),n}function eW(t,e,n){let r={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);let o=d(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);let l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);let c=d(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&f(e,["parameters","includeSafetyAttributes"],c);let u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);let h=d(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);let p=d(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);let m=d(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let g=d(t,["imageSize"]);if(e!==void 0&&g!=null&&f(e,["parameters","sampleImageSize"],g),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function tW(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);let o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);let l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);let c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);let g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);let y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);let _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);let w=d(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);let A=d(t,["labels"]);e!==void 0&&A!=null&&f(e,["labels"],A);let k=d(t,["imageSize"]);e!==void 0&&k!=null&&f(e,["parameters","sampleImageSize"],k);let T=d(t,["enhancePrompt"]);return e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T),r}function nW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["config"]);return o!=null&&eW(o,r),r}function rW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["config"]);return o!=null&&tW(o,r),r}function iW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gW(a))),f(n,["generatedImages"],o)}let s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&f(n,["positivePromptSafetyAttributes"],fM(s)),n}function sW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Tg(a))),f(n,["generatedImages"],o)}let s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&f(n,["positivePromptSafetyAttributes"],hM(s)),n}function oW(t,e,n){let r={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let s=d(t,["durationSeconds"]);if(e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);let a=d(t,["resolution"]);e!==void 0&&a!=null&&f(e,["parameters","resolution"],a);let l=d(t,["personGeneration"]);if(e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=d(t,["negativePrompt"]);e!==void 0&&c!=null&&f(e,["parameters","negativePrompt"],c);let u=d(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let h=d(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Ig(h));let p=d(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>lz(g))),f(e,["instances[0]","referenceImages"],m)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function aW(t,e,n){let r={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);let o=d(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);let a=d(t,["durationSeconds"]);e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a);let l=d(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);let c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);let u=d(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);let m=d(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);let g=d(t,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);let y=d(t,["generateAudio"]);e!==void 0&&y!=null&&f(e,["parameters","generateAudio"],y);let _=d(t,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],Hr(_));let w=d(t,["referenceImages"]);if(e!==void 0&&w!=null){let T=w;Array.isArray(T)&&(T=T.map(L=>cz(L))),f(e,["instances[0]","referenceImages"],T)}let A=d(t,["mask"]);e!==void 0&&A!=null&&f(e,["instances[0]","mask"],az(A));let k=d(t,["compressionQuality"]);return e!==void 0&&k!=null&&f(e,["parameters","compressionQuality"],k),r}function lW(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["metadata"]);i!=null&&f(n,["metadata"],i);let s=d(t,["done"]);s!=null&&f(n,["done"],s);let o=d(t,["error"]);o!=null&&f(n,["error"],o);let a=d(t,["response","generateVideoResponse"]);return a!=null&&f(n,["response"],fW(a)),n}function cW(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["metadata"]);i!=null&&f(n,["metadata"],i);let s=d(t,["done"]);s!=null&&f(n,["done"],s);let o=d(t,["error"]);o!=null&&f(n,["error"],o);let a=d(t,["response"]);return a!=null&&f(n,["response"],hW(a)),n}function uW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["image"]);o!=null&&f(r,["instances[0]","image"],Ig(o));let a=d(e,["video"]);a!=null&&f(r,["instances[0]","video"],mM(a));let l=d(e,["source"]);l!=null&&pW(l,r);let c=d(e,["config"]);return c!=null&&oW(c,r),r}function dW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["image"]);o!=null&&f(r,["instances[0]","image"],Hr(o));let a=d(e,["video"]);a!=null&&f(r,["instances[0]","video"],gM(a));let l=d(e,["source"]);l!=null&&mW(l,r);let c=d(e,["config"]);return c!=null&&aW(c,r),r}function fW(t,e){let n={},r=d(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>yW(a))),f(n,["generatedVideos"],o)}let i=d(t,["raiMediaFilteredCount"]);i!=null&&f(n,["raiMediaFilteredCount"],i);let s=d(t,["raiMediaFilteredReasons"]);return s!=null&&f(n,["raiMediaFilteredReasons"],s),n}function hW(t,e){let n={},r=d(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>wW(a))),f(n,["generatedVideos"],o)}let i=d(t,["raiMediaFilteredCount"]);i!=null&&f(n,["raiMediaFilteredCount"],i);let s=d(t,["raiMediaFilteredReasons"]);return s!=null&&f(n,["raiMediaFilteredReasons"],s),n}function pW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Ig(s));let o=d(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],mM(o)),r}function mW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Hr(s));let o=d(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],gM(o)),r}function gW(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["image"],IW(r));let i=d(t,["raiFilteredReason"]);i!=null&&f(n,["raiFilteredReason"],i);let s=d(t,["_self"]);return s!=null&&f(n,["safetyAttributes"],fM(s)),n}function Tg(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["image"],dM(r));let i=d(t,["raiFilteredReason"]);i!=null&&f(n,["raiFilteredReason"],i);let s=d(t,["_self"]);s!=null&&f(n,["safetyAttributes"],hM(s));let o=d(t,["prompt"]);return o!=null&&f(n,["enhancedPrompt"],o),n}function vW(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["mask"],dM(r));let i=d(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(n,["labels"],s)}return n}function yW(t,e){let n={},r=d(t,["video"]);return r!=null&&f(n,["video"],sz(r)),n}function wW(t,e){let n={},r=d(t,["_self"]);return r!=null&&f(n,["video"],oz(r)),n}function _W(t,e){let n={},r=d(t,["modelSelectionConfig"]);r!=null&&f(n,["modelConfig"],r);let i=d(t,["responseJsonSchema"]);i!=null&&f(n,["responseJsonSchema"],i);let s=d(t,["audioTimestamp"]);s!=null&&f(n,["audioTimestamp"],s);let o=d(t,["candidateCount"]);o!=null&&f(n,["candidateCount"],o);let a=d(t,["enableAffectiveDialog"]);a!=null&&f(n,["enableAffectiveDialog"],a);let l=d(t,["frequencyPenalty"]);l!=null&&f(n,["frequencyPenalty"],l);let c=d(t,["logprobs"]);c!=null&&f(n,["logprobs"],c);let u=d(t,["maxOutputTokens"]);u!=null&&f(n,["maxOutputTokens"],u);let h=d(t,["mediaResolution"]);h!=null&&f(n,["mediaResolution"],h);let p=d(t,["presencePenalty"]);p!=null&&f(n,["presencePenalty"],p);let m=d(t,["responseLogprobs"]);m!=null&&f(n,["responseLogprobs"],m);let g=d(t,["responseMimeType"]);g!=null&&f(n,["responseMimeType"],g);let y=d(t,["responseModalities"]);y!=null&&f(n,["responseModalities"],y);let _=d(t,["responseSchema"]);_!=null&&f(n,["responseSchema"],_);let w=d(t,["routingConfig"]);w!=null&&f(n,["routingConfig"],w);let A=d(t,["seed"]);A!=null&&f(n,["seed"],A);let k=d(t,["speechConfig"]);k!=null&&f(n,["speechConfig"],k);let T=d(t,["stopSequences"]);T!=null&&f(n,["stopSequences"],T);let L=d(t,["temperature"]);L!=null&&f(n,["temperature"],L);let R=d(t,["thinkingConfig"]);R!=null&&f(n,["thinkingConfig"],R);let $=d(t,["topK"]);$!=null&&f(n,["topK"],$);let K=d(t,["topP"]);if(K!=null&&f(n,["topP"],K),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function EW(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],ke(t,i)),r}function CW(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],ke(t,i)),r}function SW(t,e){let n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=d(t,["enableWidget"]);return r!=null&&f(n,["enableWidget"],r),n}function bW(t,e){let n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=d(t,["timeRangeFilter"]);return r!=null&&f(n,["timeRangeFilter"],r),n}function xW(t,e){let n={},r=d(t,["aspectRatio"]);r!=null&&f(n,["aspectRatio"],r);let i=d(t,["imageSize"]);if(i!=null&&f(n,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function TW(t,e){let n={},r=d(t,["aspectRatio"]);r!=null&&f(n,["aspectRatio"],r);let i=d(t,["imageSize"]);i!=null&&f(n,["imageSize"],i);let s=d(t,["personGeneration"]);s!=null&&f(n,["personGeneration"],s);let o=d(t,["outputMimeType"]);o!=null&&f(n,["imageOutputOptions","mimeType"],o);let a=d(t,["outputCompressionQuality"]);return a!=null&&f(n,["imageOutputOptions","compressionQuality"],a),n}function IW(t,e){let n={},r=d(t,["bytesBase64Encoded"]);r!=null&&f(n,["imageBytes"],ks(r));let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function dM(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["bytesBase64Encoded"]);i!=null&&f(n,["imageBytes"],ks(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function Ig(t,e){let n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=d(t,["imageBytes"]);r!=null&&f(n,["bytesBase64Encoded"],ks(r));let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function Hr(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["imageBytes"]);i!=null&&f(n,["bytesBase64Encoded"],ks(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function AW(t,e,n,r){let i={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);let o=d(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);let a=d(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);let l=d(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],iM(t,l)),i}function DW(t,e,n,r){let i={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);let o=d(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);let a=d(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);let l=d(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],iM(t,l)),i}function kW(t,e,n){let r={},i=d(e,["config"]);return i!=null&&AW(t,i,r),r}function MW(t,e,n){let r={},i=d(e,["config"]);return i!=null&&DW(t,i,r),r}function NW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["_self"]);if(s!=null){let o=sM(s);Array.isArray(o)&&(o=o.map(a=>CC(a))),f(n,["models"],o)}return n}function RW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["_self"]);if(s!=null){let o=sM(s);Array.isArray(o)&&(o=o.map(a=>SC(a))),f(n,["models"],o)}return n}function PW(t,e){let n={},r=d(t,["maskMode"]);r!=null&&f(n,["maskMode"],r);let i=d(t,["segmentationClasses"]);i!=null&&f(n,["maskClasses"],i);let s=d(t,["maskDilation"]);return s!=null&&f(n,["dilation"],s),n}function CC(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["displayName"]);i!=null&&f(n,["displayName"],i);let s=d(t,["description"]);s!=null&&f(n,["description"],s);let o=d(t,["version"]);o!=null&&f(n,["version"],o);let a=d(t,["_self"]);a!=null&&f(n,["tunedModelInfo"],KW(a));let l=d(t,["inputTokenLimit"]);l!=null&&f(n,["inputTokenLimit"],l);let c=d(t,["outputTokenLimit"]);c!=null&&f(n,["outputTokenLimit"],c);let u=d(t,["supportedGenerationMethods"]);u!=null&&f(n,["supportedActions"],u);let h=d(t,["temperature"]);h!=null&&f(n,["temperature"],h);let p=d(t,["maxTemperature"]);p!=null&&f(n,["maxTemperature"],p);let m=d(t,["topP"]);m!=null&&f(n,["topP"],m);let g=d(t,["topK"]);g!=null&&f(n,["topK"],g);let y=d(t,["thinking"]);return y!=null&&f(n,["thinking"],y),n}function SC(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["displayName"]);i!=null&&f(n,["displayName"],i);let s=d(t,["description"]);s!=null&&f(n,["description"],s);let o=d(t,["versionId"]);o!=null&&f(n,["version"],o);let a=d(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>z9(m))),f(n,["endpoints"],p)}let l=d(t,["labels"]);l!=null&&f(n,["labels"],l);let c=d(t,["_self"]);c!=null&&f(n,["tunedModelInfo"],QW(c));let u=d(t,["defaultCheckpointId"]);u!=null&&f(n,["defaultCheckpointId"],u);let h=d(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(n,["checkpoints"],p)}return n}function LW(t,e){let n={},r=d(t,["mediaResolution"]);r!=null&&f(n,["mediaResolution"],r);let i=d(t,["codeExecutionResult"]);i!=null&&f(n,["codeExecutionResult"],i);let s=d(t,["executableCode"]);s!=null&&f(n,["executableCode"],s);let o=d(t,["fileData"]);o!=null&&f(n,["fileData"],J9(o));let a=d(t,["functionCall"]);a!=null&&f(n,["functionCall"],Y9(a));let l=d(t,["functionResponse"]);l!=null&&f(n,["functionResponse"],l);let c=d(t,["inlineData"]);c!=null&&f(n,["inlineData"],_9(c));let u=d(t,["text"]);u!=null&&f(n,["text"],u);let h=d(t,["thought"]);h!=null&&f(n,["thought"],h);let p=d(t,["thoughtSignature"]);p!=null&&f(n,["thoughtSignature"],p);let m=d(t,["videoMetadata"]);return m!=null&&f(n,["videoMetadata"],m),n}function OW(t,e){let n={},r=d(t,["productImage"]);return r!=null&&f(n,["image"],Hr(r)),n}function FW(t,e,n){let r={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["baseSteps"]);e!==void 0&&s!=null&&f(e,["parameters","baseSteps"],s);let o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let a=d(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);let l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);let c=d(t,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);let u=d(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);let h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);let p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);let m=d(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);let g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),r}function VW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["source"]);s!=null&&UW(s,r);let o=d(e,["config"]);return o!=null&&FW(o,r),r}function BW(t,e){let n={},r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Tg(s))),f(n,["generatedImages"],i)}return n}function UW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["personImage"]);e!==void 0&&s!=null&&f(e,["instances[0]","personImage","image"],Hr(s));let o=d(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>OW(l))),f(e,["instances[0]","productImages"],a)}return r}function $W(t,e){let n={},r=d(t,["referenceImage"]);r!=null&&f(n,["referenceImage"],Hr(r));let i=d(t,["referenceId"]);i!=null&&f(n,["referenceId"],i);let s=d(t,["referenceType"]);s!=null&&f(n,["referenceType"],s);let o=d(t,["maskImageConfig"]);o!=null&&f(n,["maskImageConfig"],PW(o));let a=d(t,["controlImageConfig"]);a!=null&&f(n,["controlImageConfig"],I9(a));let l=d(t,["styleImageConfig"]);l!=null&&f(n,["styleImageConfig"],l);let c=d(t,["subjectImageConfig"]);return c!=null&&f(n,["subjectImageConfig"],c),n}function fM(t,e){let n={},r=d(t,["safetyAttributes","categories"]);r!=null&&f(n,["categories"],r);let i=d(t,["safetyAttributes","scores"]);i!=null&&f(n,["scores"],i);let s=d(t,["contentType"]);return s!=null&&f(n,["contentType"],s),n}function hM(t,e){let n={},r=d(t,["safetyAttributes","categories"]);r!=null&&f(n,["categories"],r);let i=d(t,["safetyAttributes","scores"]);i!=null&&f(n,["scores"],i);let s=d(t,["contentType"]);return s!=null&&f(n,["contentType"],s),n}function HW(t,e){let n={},r=d(t,["category"]);if(r!=null&&f(n,["category"],r),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=d(t,["threshold"]);return i!=null&&f(n,["threshold"],i),n}function GW(t,e){let n={},r=d(t,["image"]);return r!=null&&f(n,["image"],Hr(r)),n}function qW(t,e,n){let r={},i=d(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);let s=d(t,["maxPredictions"]);e!==void 0&&s!=null&&f(e,["parameters","maxPredictions"],s);let o=d(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);let a=d(t,["maskDilation"]);e!==void 0&&a!=null&&f(e,["parameters","maskDilation"],a);let l=d(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","binaryColorThreshold"],l);let c=d(t,["labels"]);return e!==void 0&&c!=null&&f(e,["labels"],c),r}function jW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["source"]);s!=null&&zW(s,r);let o=d(e,["config"]);return o!=null&&qW(o,r),r}function WW(t,e){let n={},r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vW(s))),f(n,["generatedMasks"],i)}return n}function zW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Hr(s));let o=d(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],GW(o)),r}function JW(t,e){let n={},r=d(t,["retrievalConfig"]);r!=null&&f(n,["retrievalConfig"],r);let i=d(t,["functionCallingConfig"]);return i!=null&&f(n,["functionCallingConfig"],K9(i)),n}function YW(t,e){let n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=d(t,["computerUse"]);r!=null&&f(n,["computerUse"],r);let i=d(t,["fileSearch"]);i!=null&&f(n,["fileSearch"],i);let s=d(t,["codeExecution"]);if(s!=null&&f(n,["codeExecution"],s),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),f(n,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(n,["googleMaps"],SW(a));let l=d(t,["googleSearch"]);l!=null&&f(n,["googleSearch"],bW(l));let c=d(t,["googleSearchRetrieval"]);c!=null&&f(n,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(n,["urlContext"],u),n}function pM(t,e){let n={},r=d(t,["retrieval"]);r!=null&&f(n,["retrieval"],r);let i=d(t,["computerUse"]);if(i!=null&&f(n,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=d(t,["codeExecution"]);s!=null&&f(n,["codeExecution"],s);let o=d(t,["enterpriseWebSearch"]);o!=null&&f(n,["enterpriseWebSearch"],o);let a=d(t,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Q9(m))),f(n,["functionDeclarations"],p)}let l=d(t,["googleMaps"]);l!=null&&f(n,["googleMaps"],l);let c=d(t,["googleSearch"]);c!=null&&f(n,["googleSearch"],c);let u=d(t,["googleSearchRetrieval"]);u!=null&&f(n,["googleSearchRetrieval"],u);let h=d(t,["urlContext"]);return h!=null&&f(n,["urlContext"],h),n}function KW(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["createTime"]);i!=null&&f(n,["createTime"],i);let s=d(t,["updateTime"]);return s!=null&&f(n,["updateTime"],s),n}function QW(t,e){let n={},r=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["createTime"]);i!=null&&f(n,["createTime"],i);let s=d(t,["updateTime"]);return s!=null&&f(n,["updateTime"],s),n}function XW(t,e,n){let r={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),r}function ZW(t,e,n){let r={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),r}function ez(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","name"],ke(t,i));let s=d(e,["config"]);return s!=null&&XW(s,r),r}function tz(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["config"]);return s!=null&&ZW(s,r),r}function nz(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);let o=d(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);let a=d(t,["includeRaiReason"]);e!==void 0&&a!=null&&f(e,["parameters","includeRaiReason"],a);let l=d(t,["outputMimeType"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","mimeType"],l);let c=d(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&f(e,["parameters","outputOptions","compressionQuality"],c);let u=d(t,["enhanceInputImage"]);e!==void 0&&u!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],u);let h=d(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);let p=d(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);let m=d(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);let g=d(t,["mode"]);return e!==void 0&&g!=null&&f(e,["parameters","mode"],g),r}function rz(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],ke(t,i));let s=d(e,["image"]);s!=null&&f(r,["instances[0]","image"],Hr(s));let o=d(e,["upscaleFactor"]);o!=null&&f(r,["parameters","upscaleConfig","upscaleFactor"],o);let a=d(e,["config"]);return a!=null&&nz(a,r),r}function iz(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Tg(o))),f(n,["generatedImages"],s)}return n}function sz(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["uri"],r);let i=d(t,["encodedVideo"]);i!=null&&f(n,["videoBytes"],ks(i));let s=d(t,["encoding"]);return s!=null&&f(n,["mimeType"],s),n}function oz(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["uri"],r);let i=d(t,["bytesBase64Encoded"]);i!=null&&f(n,["videoBytes"],ks(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function az(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["_self"],Hr(r));let i=d(t,["maskMode"]);return i!=null&&f(n,["maskMode"],i),n}function lz(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["image"],Ig(r));let i=d(t,["referenceType"]);return i!=null&&f(n,["referenceType"],i),n}function cz(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["image"],Hr(r));let i=d(t,["referenceType"]);return i!=null&&f(n,["referenceType"],i),n}function mM(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["uri"],r);let i=d(t,["videoBytes"]);i!=null&&f(n,["encodedVideo"],ks(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["encoding"],s),n}function gM(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["videoBytes"]);i!=null&&f(n,["bytesBase64Encoded"],ks(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function uz(t,e){let n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function dz(t){let e={},n=d(t,["config"]);return n!=null&&uz(n,e),e}function fz(t,e){let n={},r=d(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function hz(t){let e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);let r=d(t,["config"]);return r!=null&&fz(r,e),e}function pz(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function mz(t,e){let n={},r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["customMetadata"],s)}let i=d(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function gz(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],yz(o)),e}function vz(t){let e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);let r=d(t,["fileName"]);r!=null&&f(e,["fileName"],r);let i=d(t,["config"]);return i!=null&&mz(i,e),e}function yz(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function wz(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function _z(t){let e={},n=d(t,["config"]);return n!=null&&wz(n,e),e}function Ez(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["fileSearchStores"],s)}return e}function vM(t,e){let n={},r=d(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);let i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}let o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),n}function Cz(t){let e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);let r=d(t,["config"]);return r!=null&&vM(r,e),e}function Sz(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}var bz="Content-Type",xz="X-Server-Timeout",Tz="User-Agent",bC="x-goog-api-client",Iz="1.41.0",Az=`google-genai-sdk/${Iz}`,Dz="v1beta1",kz="v1beta",Mz=5,Nz=[408,429,500,502,503,504],xC=class{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Dz}else{if(!this.clientOptions.apiKey)throw new Td({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:kz,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){let i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Kk.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(let[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){let r=JSON.parse(JSON.stringify(e));for(let[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){let s=new AbortController,o=s.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&Rz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Lk(i),new xd(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Lk(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Br(this,arguments,function*(){var r;let i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:u}=yield ve(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let h=s.decode(u,{stream:!0});try{let g=JSON.parse(h);if("error"in g){let y=JSON.parse(JSON.stringify(g.error)),_=y.status,w=y.code,A=`got status: ${_}. ${JSON.stringify(g)}`;if(w>=400&&w<600)throw new Td({message:A,status:w})}}catch(g){if(g.name==="ApiError")throw g}o+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(let _ of l){let w=o.indexOf(_);w!==-1&&(p===-1||w<p)&&(p=w,m=_.length)}if(p===-1)break;let g=o.substring(0,p);o=o.substring(p+m);let y=g.trim();if(y.startsWith(a)){let _=y.substring(a.length).trim();try{let w=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ve(new xd(w))}catch(w){throw new Error(`exception parsing stream chunk ${_}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);let i=this.clientOptions.httpOptions.retryOptions;return zE(async()=>{let o=await fetch(e,n);if(o.ok)return o;throw Nz.includes(o.status)?new Error(`Retryable HTTP Error: ${o.statusText}`):new Ed(`Non-retryable exception ${o.statusText} sending request`)},{retries:((r=i.attempts)!==null&&r!==void 0?r:Mz)-1})}getDefaultHeaders(){let e={},n=Az+" "+this.clientOptions.userAgentExtra;return e[Tz]=n,e[bC]=n,e[bz]="application/json",e}async getHeadersInternal(e,n){let r=new Headers;if(e&&e.headers){for(let[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(xz,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;let i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);let a=(r=n?.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let l={file:i},c=this.getFileName(e),u=B("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n?.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;let s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r?.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),h={};r!=null&&vM(r,h);let p=await this.fetchUploadUrl(c,a,l,u,h,r?.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};let c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}};async function Lk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(r);throw n>=400&&n<600?new Td({message:i,status:n}):new Error(i)}}function Rz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){let a=Object.assign({},s);for(let l in o)if(Object.prototype.hasOwnProperty.call(o,l)){let c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let i=r(n,e);t.body=JSON.stringify(i)}var Pz="mcp_used/unknown",Lz=!1;function yM(t){for(let e of t)if(Oz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Lz}function wM(t){var e;let n=(e=t[bC])!==null&&e!==void 0?e:"";t[bC]=(n+` ${Pz}`).trimStart()}function Oz(t){return t!==null&&typeof t=="object"&&t instanceof TC}function Fz(t){return Br(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){let o=yield ve(n.listTools({cursor:i}));for(let a of o.tools)yield yield ve(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}var TC=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;let s={},o=[];for(let u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Ur(Fz(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let h=i;o.push(h);let p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=u}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),g6(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[r.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}};async function Vz(t,e,n){let r=new hC,i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}var IC=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Uz(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},u=new Promise(k=>{c=k}),h=e.callbacks,p=function(){c({})},m=this.apiClient,g={onopen:p,onmessage:k=>{Vz(m,h.onmessage,k)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(k){}},y=this.webSocketFactory.create(l,Bz(o),g);y.connect(),await u;let A={setup:{model:ke(this.apiClient,e.model)}};return y.send(JSON.stringify(A)),new AC(y,this.apiClient)}},AC=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=u9(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=c9(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Sd.PLAY)}pause(){this.sendPlaybackControl(Sd.PAUSE)}stop(){this.sendPlaybackControl(Sd.STOP)}resetContext(){this.sendPlaybackControl(Sd.RESET_CONTEXT)}close(){this.conn.close()}};function Bz(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function Uz(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var $z="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Hz(t,e,n){let r=new fC,i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;let s=JSON.parse(i);if(t.isVertexAI()){let o=h9(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}var DC=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new IC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),u,h=this.apiClient.getHeaders();e.config&&e.config.tools&&yM(e.config.tools)&&wM(h);let p=jz(h);if(this.apiClient.isVertexAI()){let ie=this.apiClient.getProject(),le=this.apiClient.getLocation(),nt=this.apiClient.getApiKey(),$t=!!ie&&!!le||!!nt;this.apiClient.getCustomBaseUrl()&&!$t?u=l:(u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,u))}else{let ie=this.apiClient.getApiKey(),le="BidiGenerateContent",nt="key";ie?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",nt="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${le}?${nt}=${ie}`}let m=()=>{},g=new Promise(ie=>{m=ie}),y=e.callbacks,_=function(){var ie;(ie=y?.onopen)===null||ie===void 0||ie.call(y),m({})},w=this.apiClient,A={onopen:_,onmessage:ie=>{Hz(w,y.onmessage,ie)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(ie){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(ie){}},k=this.webSocketFactory.create(u,qz(p),A);k.connect(),await g;let T=ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){let ie=this.apiClient.getProject(),le=this.apiClient.getLocation();ie&&le&&(T=`projects/${ie}/locations/${le}/`+T)}let L={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[XE.AUDIO]}:e.config.responseModalities=[XE.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let R=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],$=[];for(let ie of R)if(this.isCallableTool(ie)){let le=ie;$.push(await le.tool())}else $.push(ie);$.length>0&&(e.config.tools=$);let K={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=l9(this.apiClient,K):L=a9(this.apiClient,K),delete L.config,k.send(JSON.stringify(L)),new kC(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Gz={turnComplete:!0},kC=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=ur(n.turns),e.isVertexAI()||(r=r.map(i=>xg(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error($z)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Gz),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:f9(e)}:n={realtimeInput:d9(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function qz(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function jz(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var Ok=10;function Fk(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let o of(n=t?.tools)!==null&&n!==void 0?n:[])if(Nl(o)){i=!0;break}if(!i)return!0;let s=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Nl(t){return"callTool"in t&&typeof t.callTool=="function"}function Wz(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Nl(i)))!==null&&r!==void 0?r:!1}function Vk(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Nl(r))return;let s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function Bk(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var MC=class extends $r{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Wz(n)||Fk(n.config))return await this.generateContentInternal(l);let c=Vk(n);if(c.length>0){let y=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let u,h,p=ur(l.contents),m=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Ok,g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){let y=u.candidates[0].content,_=[];for(let w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Nl(w)){let k=await w.callTool(u.functionCalls);_.push(...k)}g++,h={role:"user",parts:_},l.contents=ur(l.contents),l.contents.push(y),l.contents.push(h),Bk(l.config)&&(p.push(y),p.push(h))}return Bk(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),Fk(n.config)){let h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}let l=Vk(n);if(l.length>0){let h=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(s=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n?.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s,o=[];if(r?.generatedImages)for(let l of r.generatedImages)l&&l?.safetyAttributes&&((i=l?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l?.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;let o={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Bi(Ms.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;let s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;let o=await Promise.all(s.map(async l=>Nl(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&yM(e.config.tools)){let l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),wM(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;let s=new Map;for(let o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Nl(o)){let a=o,l=await a.tool();for(let c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;let s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Ok,o=!1,a=0,l=await this.initAfcToolsMap(e);return(function(c,u,h){return Br(this,arguments,function*(){for(var p,m,g,y,_,w;a<s;){o&&(a++,o=!1);let L=yield ve(c.processParamsMaybeAddMcpUsage(h)),R=yield ve(c.generateContentStreamInternal(L)),$=[],K=[];try{for(var A=!0,k=(m=void 0,Ur(R)),T;T=yield ve(k.next()),p=T.done,!p;A=!0){y=T.value,A=!1;let ie=y;if(yield yield ve(ie),ie.candidates&&(!((_=ie.candidates[0])===null||_===void 0)&&_.content)){K.push(ie.candidates[0].content);for(let le of(w=ie.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(le.functionCall.name)){let nt=yield ve(u.get(le.functionCall.name).callTool([le.functionCall]));$.push(...nt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(ie){m={error:ie}}finally{try{!A&&!p&&(g=k.return)&&(yield ve(g.call(k)))}finally{if(m)throw m.error}}if($.length>0){o=!0;let ie=new Qo;ie.candidates=[{content:{role:"user",parts:$}}],yield yield ve(ie);let le=[];le.push(...K),le.push({role:"user",parts:$});let nt=ur(h.contents).concat(le);h.contents=nt}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Nk(this.apiClient,e);return a=B("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=Pk(u),p=new Qo;return Object.assign(p,h),p})}else{let c=Mk(this.apiClient,e);return a=B("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=Rk(u),p=new Qo;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Nk(this.apiClient,e);return a=B("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return Br(this,arguments,function*(){var p,m,g,y;try{for(var _=!0,w=Ur(h),A;A=yield ve(w.next()),p=A.done,!p;_=!0){y=A.value,_=!1;let k=y,T=Pk(yield ve(k.json()),e);T.sdkHttpResponse={headers:k.headers};let L=new Qo;Object.assign(L,T),yield yield ve(L)}}catch(k){m={error:k}}finally{try{!_&&!p&&(g=w.return)&&(yield ve(g.call(w)))}finally{if(m)throw m.error}}})})}else{let c=Mk(this.apiClient,e);return a=B("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return Br(this,arguments,function*(){var p,m,g,y;try{for(var _=!0,w=Ur(h),A;A=yield ve(w.next()),p=A.done,!p;_=!0){y=A.value,_=!1;let k=y,T=Rk(yield ve(k.json()),e);T.sdkHttpResponse={headers:k.headers};let L=new Qo;Object.assign(L,T),yield yield ve(L)}}catch(k){m={error:k}}finally{try{!_&&!p&&(g=w.return)&&(yield ve(g.call(w)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=q9(this.apiClient,e);return a=B("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=W9(u),p=new Xm;return Object.assign(p,h),p})}else{let c=G9(this.apiClient,e);return a=B("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=j9(u),p=new Xm;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=rW(this.apiClient,e);return a=B("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=sW(u),p=new Zm;return Object.assign(p,h),p})}else{let c=nW(this.apiClient,e);return a=B("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=iW(u),p=new Zm;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=B9(this.apiClient,e);return s=B("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=U9(l),u=new ZE;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=rz(this.apiClient,e);return s=B("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=iz(l),u=new eC;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=VW(this.apiClient,e);return s=B("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=BW(l),u=new tC;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=jW(this.apiClient,e);return s=B("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=WW(l),u=new nC;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=CW(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>SC(u))}else{let c=EW(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>CC(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=MW(this.apiClient,e);return a=B("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=RW(u),p=new eg;return Object.assign(p,h),p})}else{let c=kW(this.apiClient,e);return a=B("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=NW(u),p=new eg;return Object.assign(p,h),p})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=tz(this.apiClient,e);return a=B("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>SC(u))}else{let c=ez(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>CC(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=L9(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=F9(u),p=new tg;return Object.assign(p,h),p})}else{let c=P9(this.apiClient,e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=O9(u),p=new tg;return Object.assign(p,h),p})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=M9(this.apiClient,e);return a=B("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=R9(u),p=new ng;return Object.assign(p,h),p})}else{let c=k9(this.apiClient,e);return a=B("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=N9(u),p=new ng;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=S9(this.apiClient,e);return s=B("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=b9(l),u=new rC;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=dW(this.apiClient,e);return a=B("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{let h=cW(u),p=new rg;return Object.assign(p,h),p})}else{let c=uW(this.apiClient,e);return a=B("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{let h=lW(u),p=new rg;return Object.assign(p,h),p})}}};var NC=class extends $r{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],s;r&&"httpOptions"in r&&(s=r.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],s;r&&"httpOptions"in r&&(s=r.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=r6(e);return a=B("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{let c=n6(e);return a=B("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Yq(e);return s=B("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};function zz(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Jz(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>r7(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function Yz(t,e,n){let r={},i=d(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);let s=d(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);let o=d(e,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);let a=d(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],n7(t,a));let l=d(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function Kz(t,e){let n={},r=d(e,["config"]);return r!=null&&f(n,["config"],Yz(t,r,n)),n}function Qz(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Xz(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zz(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function e7(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function t7(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],eS(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Jz(Kt(g)));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let R=Ol(y);Array.isArray(R)&&(R=R.map($=>s7(Ll($)))),f(e,["setup","tools"],R)}let _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],i7(_));let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let A=d(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&f(e,["setup","outputAudioTranscription"],A);let k=d(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);let T=d(t,["contextWindowCompression"]);e!==void 0&&T!=null&&f(e,["setup","contextWindowCompression"],T);let L=d(t,["proactivity"]);if(e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function n7(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],ke(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],t7(i,n)),n}function r7(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],Qz(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],Xz(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],zz(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function i7(t){let e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function s7(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],Zz(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],e7(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function o7(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function a7(t,e){let n=null,r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(n){let s=o7(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));let l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}var RC=class extends $r{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=Kz(this.apiClient,e);s=B("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;let l=a7(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};function l7(t,e){let n={},r=d(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function c7(t){let e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);let r=d(t,["config"]);return r!=null&&l7(r,e),e}function u7(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function d7(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function f7(t){let e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);let r=d(t,["config"]);return r!=null&&d7(r,e),e}function h7(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["documents"],s)}return e}var PC=class extends $r{constructor(e){super(),this.apiClient=e,this.list=async n=>new Bi(Ms.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=u7(e);return s=B("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=c7(e);i=B("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=f7(e);return s=B("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=h7(l),u=new iC;return Object.assign(u,c),u})}}};var LC=class extends $r{constructor(e,n=new PC(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Bi(Ms.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=dz(e);return s=B("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=pz(e);return s=B("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=hz(e);i=B("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=_z(e);return s=B("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Ez(l),u=new sC;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Cz(e);return s=B("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Sz(l),u=new oC;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=vz(e);return s=B("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=gz(l),u=new aC;return Object.assign(u,c),u})}}};var _M=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return _M=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))},p7=()=>_M();function OC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var FC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var Sn=class extends Error{},bn=class t extends Sn{constructor(e,n,r,i){super(`${t.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){let i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Rl({message:r,cause:FC(n)});let s=n;return e===400?new fg(e,s,r,i):e===401?new hg(e,s,r,i):e===403?new pg(e,s,r,i):e===404?new mg(e,s,r,i):e===409?new gg(e,s,r,i):e===422?new vg(e,s,r,i):e===429?new yg(e,s,r,i):e>=500?new wg(e,s,r,i):new t(e,s,r,i)}},Id=class extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Rl=class extends bn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},dg=class extends Rl{constructor({message:e}={}){super({message:e??"Request timed out."})}},fg=class extends bn{},hg=class extends bn{},pg=class extends bn{},mg=class extends bn{},gg=class extends bn{},vg=class extends bn{},yg=class extends bn{},wg=class extends bn{};var m7=/^[a-z][a-z0-9+.-]*:/i,g7=t=>m7.test(t),VC=t=>(VC=Array.isArray,VC(t)),v7=VC,y7=v7,Uk=y7;function w7(t){if(!t)return!0;for(let e in t)return!1;return!0}function _7(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var E7=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Sn(`${t} must be an integer`);if(e<0)throw new Sn(`${t} must be a positive integer`);return e},C7=t=>{try{return JSON.parse(t)}catch{return}};var S7=t=>new Promise(e=>setTimeout(e,t));var kl="0.0.1";function b7(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var x7=()=>{var t,e,n,r,i;let s=b7();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kl,"X-Stainless-OS":Hk(Deno.build.os),"X-Stainless-Arch":$k(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kl,"X-Stainless-OS":Hk((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":$k((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};let o=T7();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":kl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function T7(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let r=n.exec(navigator.userAgent);if(r){let i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}var $k=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Hk=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),jm,I7=()=>jm??(jm=x7());function A7(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function EM(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function D7(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return EM({start(){},async pull(n){let{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function CM(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function k7(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let r=t.getReader(),i=r.cancel();r.releaseLock(),await i}var M7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var SM=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function JE(t,e,n){return SM(),new File(t,e??"unknown_file",n)}function N7(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var R7=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var bM=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",P7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&bM(t),L7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function O7(t,e,n){if(SM(),t=await t,P7(t))return t instanceof File?t:JE([await t.arrayBuffer()],t.name);if(L7(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),JE(await BC(i),e,n)}let r=await BC(t);if(e||(e=N7(t)),!n?.type){let i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return JE(r,e,n)}async function BC(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(bM(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(R7(t))try{for(var a=!0,l=Ur(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let u=i;o.push(...await BC(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{let u=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${F7(t)}`)}return o}function F7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var V7=(()=>{class t{constructor(n){this._client=n}}t._key=[];return t})();function xM(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Gk=Object.freeze(Object.create(null)),B7=(t=xM)=>function(n,...r){if(n.length===1)return n[0];let i=!1,s=[],o=n.reduce((u,h,p)=>{var m,g,y;/[?#]/.test(h)&&(i=!0);let _=r[p],w=(i?encodeURIComponent:t)(""+_);return p!==r.length&&(_==null||typeof _=="object"&&_.toString===((y=Object.getPrototypeOf((g=Object.getPrototypeOf((m=_.hasOwnProperty)!==null&&m!==void 0?m:Gk))!==null&&g!==void 0?g:Gk))===null||y===void 0?void 0:y.toString))&&(w=_+"",s.push({start:u.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),u+h+(p===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,h)=>u.start-h.start),s.length>0){let u=0,h=s.reduce((p,m)=>{let g=" ".repeat(m.start-u),y="^".repeat(m.length);return u=m.start+m.length,p+g+y},"");throw new Sn(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${o}
${h}`)}return o},Wm=B7(xM);var _g=class extends V7{create(e,n){var r;let{api_version:i=this._client.apiVersion}=e,s=ug(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Sn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Sn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wm`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){let{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Wm`/${i}/interactions/${e}`,r)}cancel(e,n={},r){let{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Wm`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;let s=n??{},{api_version:o=this._client.apiVersion}=s,a=ug(s,["api_version"]);return this._client.get(Wm`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}};_g._key=Object.freeze(["interactions"]);var Eg=class extends _g{};function U7(t){let e=0;for(let i of t)e+=i.length;let n=new Uint8Array(e),r=0;for(let i of t)n.set(i,r),r+=i.length;return n}var zm;function tS(t){let e;return(zm??(e=new globalThis.TextEncoder,zm=e.encode.bind(e)))(t)}var Jm;function qk(t){let e;return(Jm??(e=new globalThis.TextDecoder,Jm=e.decode.bind(e)))(t)}var Pl=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?tS(e):e;this.buffer=U7([this.buffer,n]);let r=[],i;for(;(i=$7(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(qk(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=qk(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}};Pl.NEWLINE_CHARS=new Set([`
`,"\r"]);Pl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $7(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function H7(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}var Cg={off:0,error:200,warn:300,info:400,debug:500},jk=(t,e,n)=>{if(t){if(_7(Cg,t))return t;dn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Cg))}`)}};function bd(){}function Ym(t,e,n){return!e||Cg[t]>Cg[n]?bd:e[t].bind(e)}var G7={error:bd,warn:bd,info:bd,debug:bd},Wk=new WeakMap;function dn(t){var e;let n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return G7;let i=Wk.get(n);if(i&&i[0]===r)return i[1];let s={error:Ym("error",n,r),warn:Ym("warn",n,r),info:Ym("info",n,r),debug:Ym("debug",n,r)};return Wk.set(n,[r,s]),s}var Ko=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var UC=class t{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1,s=r?dn(r):console;function o(){return Br(this,arguments,function*(){var l,c,u,h;if(i)throw new Sn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,g=Ur(q7(e,n)),y;y=yield ve(g.next()),l=y.done,!l;m=!0){h=y.value,m=!1;let _=h;if(!p)if(_.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield ve(JSON.parse(_.data))}catch(w){throw s.error("Could not parse message into JSON:",_.data),s.error("From chunk:",_.raw),w}}}catch(_){c={error:_}}finally{try{!m&&!l&&(u=g.return)&&(yield ve(u.call(g)))}finally{if(c)throw c.error}}p=!0}catch(_){if(OC(_))return yield ve(void 0);throw _}finally{p||n.abort()}})}return new t(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Br(this,arguments,function*(){var l,c,u,h;let p=new Pl,m=CM(e);try{for(var g=!0,y=Ur(m),_;_=yield ve(y.next()),l=_.done,!l;g=!0){h=_.value,g=!1;let w=h;for(let A of p.decode(w))yield yield ve(A)}}catch(w){c={error:w}}finally{try{!g&&!l&&(u=y.return)&&(yield ve(u.call(y)))}finally{if(c)throw c.error}}for(let w of p.flush())yield yield ve(w)})}function o(){return Br(this,arguments,function*(){var l,c,u,h;if(i)throw new Sn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,g=Ur(s()),y;y=yield ve(g.next()),l=y.done,!l;m=!0){h=y.value,m=!1;let _=h;p||_&&(yield yield ve(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!m&&!l&&(u=g.return)&&(yield ve(u.call(g)))}finally{if(c)throw c.error}}p=!0}catch(_){if(OC(_))return yield ve(void 0);throw _}finally{p||n.abort()}})}return new t(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){let o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new t(()=>i(e),this.controller,this.client),new t(()=>i(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return EM({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{let{value:i,done:s}=await n.next();if(s)return r.close();let o=tS(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function q7(t,e){return Br(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Sn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Sn("Attempted to iterate over a response with no body");let a=new $C,l=new Pl,c=CM(t.body);try{for(var u=!0,h=Ur(j7(c)),p;p=yield ve(h.next()),r=p.done,!r;u=!0){o=p.value,u=!1;let m=o;for(let g of l.decode(m)){let y=a.decode(g);y&&(yield yield ve(y))}}}catch(m){i={error:m}}finally{try{!u&&!r&&(s=h.return)&&(yield ve(s.call(h)))}finally{if(i)throw i.error}}for(let m of l.flush()){let g=a.decode(m);g&&(yield yield ve(g))}})}function j7(t){return Br(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Ur(t),c;c=yield ve(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;let u=s;if(u==null)continue;let h=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?tS(u):u,p=new Uint8Array(o.length+h.length);p.set(o),p.set(h,o.length),o=p;let m;for(;(m=H7(o))!==-1;)yield yield ve(o.slice(0,m)),o=o.slice(m)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield ve(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield ve(o))})}var $C=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=W7(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function W7(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function z7(t,e){let{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return dn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):UC.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return dn(t).debug(`[${r}] response parsed`,Ko({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}var HC=class t extends Promise{constructor(e,n,r=z7){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var TM=Symbol("brand.privateNullableHeaders");function*J7(t){if(!t)return;if(TM in t){let{values:r,nulls:i}=t;yield*r.entries();for(let s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Uk(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){let i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let s=Uk(r[1])?r[1]:[r[1]],o=!1;for(let a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}var Cd=t=>{let e=new Headers,n=new Set;for(let r of t){let i=new Set;for(let[s,o]of J7(r)){let a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[TM]:!0,values:e,nulls:n}};var YE=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};var IM,Y7=(()=>{class t{constructor(n){var r,i,s,o,a,l,c,{baseURL:u=YE("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(r=YE("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:p="v1beta"}=n,m=ug(n,["baseURL","apiKey","apiVersion"]);let g=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:t.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;let y="warn";this.logLevel=y,this.logLevel=(a=(o=jk(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:jk(YE("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(l=g.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:A7(),this.encoder=M7,this._options=g,this.apiKey=h,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:r}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let r=Cd([n.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return Cd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Cd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new Sn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${kl}`}defaultIdempotencyKey(){return`stainless-node-retry-${p7()}`}makeStatusError(n,r,i,s){return bn.generate(n,r,i,s)}buildURL(n,r,i){let s=!this.baseURLOverridden()&&i||this.baseURL,o=g7(n)?new URL(n):new URL(s+(s.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),a=this.defaultQuery();return w7(a)||(r=Object.assign(Object.assign({},a),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let r=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(n,{url:r,options:i}){}get(n,r){return this.methodRequest("get",n,r)}post(n,r){return this.methodRequest("post",n,r)}patch(n,r){return this.methodRequest("patch",n,r)}put(n,r){return this.methodRequest("put",n,r)}delete(n,r){return this.methodRequest("delete",n,r)}methodRequest(n,r,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:n,path:r},s)))}request(n,r=null){return new HC(this,this.makeRequest(n,r,void 0))}async makeRequest(n,r,i){var s,o,a;let l=await n,c=(s=l.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r==null&&(r=c),await this.prepareOptions(l);let{req:u,url:h,timeout:p}=await this.buildRequest(l,{retryCount:c-r});await this.prepareRequest(u,{url:h,options:l});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(dn(this).debug(`[${m}] sending request`,Ko({retryOfRequestLogID:i,method:l.method,url:h,options:l,headers:u.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new Id;let _=new AbortController,w=await this.fetchWithTimeout(h,u,p,_).catch(FC),A=Date.now();if(w instanceof globalThis.Error){let T=`retrying, ${r} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new Id;let L=OC(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(r)return dn(this).info(`[${m}] connection ${L?"timed out":"failed"} - ${T}`),dn(this).debug(`[${m}] connection ${L?"timed out":"failed"} (${T})`,Ko({retryOfRequestLogID:i,url:h,durationMs:A-y,message:w.message})),this.retryRequest(l,r,i??m);throw dn(this).info(`[${m}] connection ${L?"timed out":"failed"} - error; no more retries left`),dn(this).debug(`[${m}] connection ${L?"timed out":"failed"} (error; no more retries left)`,Ko({retryOfRequestLogID:i,url:h,durationMs:A-y,message:w.message})),L?new dg:new Rl({cause:w})}let k=`[${m}${g}] ${u.method} ${h} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${A-y}ms`;if(!w.ok){let T=await this.shouldRetry(w);if(r&&T){let le=`retrying, ${r} attempts remaining`;return await k7(w.body),dn(this).info(`${k} - ${le}`),dn(this).debug(`[${m}] response error (${le})`,Ko({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:A-y})),this.retryRequest(l,r,i??m,w.headers)}let L=T?"error; no more retries left":"error; not retryable";dn(this).info(`${k} - ${L}`);let R=await w.text().catch(le=>FC(le).message),$=C7(R),K=$?void 0:R;throw dn(this).debug(`[${m}] response error (${L})`,Ko({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:K,durationMs:Date.now()-y})),this.makeStatusError(w.status,$,K,w.headers)}return dn(this).info(k),dn(this).debug(`[${m}] response start`,Ko({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:A-y})),{response:w,options:l,controller:_,requestLogID:m,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(n,r,i,s){let o=r||{},{signal:a,method:l}=o,c=ug(o,["signal","method"]),u=this._makeAbort(s);a&&a.addEventListener("abort",u,{once:!0});let h=setTimeout(u,i),p=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),c);l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,n,m)}finally{clearTimeout(h)}}async shouldRetry(n){let r=n.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,r,i,s){var o;let a,l=s?.get("retry-after-ms");if(l){let u=parseFloat(l);Number.isNaN(u)||(a=u)}let c=s?.get("retry-after");if(c&&!a){let u=parseFloat(c);Number.isNaN(u)?a=Date.parse(c)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){let u=(o=n.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,u)}return await S7(a),this.makeRequest(n,r-1,i)}calculateDefaultRetryTimeoutMillis(n,r){let o=r-n,a=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(n,{retryCount:r=0}={}){var i,s,o;let a=Object.assign({},n),{method:l,path:c,query:u,defaultBaseURL:h}=a,p=this.buildURL(c,u,h);"timeout"in a&&E7("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:g}=this.buildBody({options:a}),y=await this.buildHeaders({options:n,method:l,bodyHeaders:m,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:a.timeout}}async buildHeaders({options:n,method:r,bodyHeaders:i,retryCount:s}){let o={};this.idempotencyHeader&&r!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=n.idempotencyKey);let a=await this.authHeaders(n),l=Cd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),I7()),this._options.defaultHeaders,i,n.headers,a]);return this.validateHeaders(l),l.values}_makeAbort(n){return()=>n.abort()}buildBody({options:{body:n,headers:r}}){if(!n)return{bodyHeaders:void 0,body:void 0};let i=Cd([r]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&i.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:D7(n)}:this.encoder({body:n,headers:i})}}return t.DEFAULT_TIMEOUT=6e4,t})(),mt=class extends Y7{constructor(){super(...arguments),this.interactions=new Eg(this)}};IM=mt;mt.GeminiNextGenAPIClient=IM;mt.GeminiNextGenAPIClientError=Sn;mt.APIError=bn;mt.APIConnectionError=Rl;mt.APIConnectionTimeoutError=dg;mt.APIUserAbortError=Id;mt.NotFoundError=mg;mt.ConflictError=gg;mt.RateLimitError=yg;mt.BadRequestError=fg;mt.AuthenticationError=hg;mt.InternalServerError=wg;mt.PermissionDeniedError=pg;mt.UnprocessableEntityError=vg;mt.toFile=O7;mt.Interactions=Eg;function K7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function Q7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function X7(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function Z7(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function eJ(t,e,n){let r={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=d(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=d(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);let o=d(t,["learningRateMultiplier"]);if(o!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=d(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);let l=d(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(d(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function tJ(t,e,n){let r={},i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let R=d(t,["validationDataset"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec"],KE(R))}else if(i==="PREFERENCE_TUNING"){let R=d(t,["validationDataset"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec"],KE(R))}else if(i==="DISTILLATION"){let R=d(t,["validationDataset"]);e!==void 0&&R!=null&&f(e,["distillationSpec"],KE(R))}let s=d(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);let o=d(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let R=d(t,["epochCount"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(a==="PREFERENCE_TUNING"){let R=d(t,["epochCount"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}else if(a==="DISTILLATION"){let R=d(t,["epochCount"]);e!==void 0&&R!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],R)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let R=d(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(l==="PREFERENCE_TUNING"){let R=d(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}else if(l==="DISTILLATION"){let R=d(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],R)}let c=d(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let R=d(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(c==="PREFERENCE_TUNING"){let R=d(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}else if(c==="DISTILLATION"){let R=d(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],R)}let u=d(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let R=d(t,["adapterSize"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(u==="PREFERENCE_TUNING"){let R=d(t,["adapterSize"]);e!==void 0&&R!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}else if(u==="DISTILLATION"){let R=d(t,["adapterSize"]);e!==void 0&&R!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],R)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){let R=d(t,["tuningMode"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","tuningMode"],R)}let p=d(t,["customBaseModel"]);e!==void 0&&p!=null&&f(e,["customBaseModel"],p);let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let R=d(t,["batchSize"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],R)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let R=d(t,["learningRate"]);e!==void 0&&R!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],R)}let y=d(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);let _=d(t,["beta"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],_);let w=d(t,["baseTeacherModel"]);e!==void 0&&w!=null&&f(e,["distillationSpec","baseTeacherModel"],w);let A=d(t,["tunedTeacherModelSource"]);e!==void 0&&A!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],A);let k=d(t,["sftLossWeightMultiplier"]);e!==void 0&&k!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],k);let T=d(t,["outputUri"]);e!==void 0&&T!=null&&f(e,["outputUri"],T);let L=d(t,["encryptionSpec"]);return e!==void 0&&L!=null&&f(e,["encryptionSpec"],L),r}function nJ(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);let s=d(t,["trainingDataset"]);s!=null&&hJ(s);let o=d(t,["config"]);return o!=null&&eJ(o,n),n}function rJ(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);let s=d(t,["trainingDataset"]);s!=null&&pJ(s,n,e);let o=d(t,["config"]);return o!=null&&tJ(o,n,e),n}function iJ(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function sJ(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function oJ(t,e,n){let r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);let o=d(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),r}function aJ(t,e,n){let r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);let o=d(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),r}function lJ(t,e){let n={},r=d(t,["config"]);return r!=null&&oJ(r,n),n}function cJ(t,e){let n={},r=d(t,["config"]);return r!=null&&aJ(r,n),n}function uJ(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>AM(a))),f(n,["tuningJobs"],o)}return n}function dJ(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>GC(a))),f(n,["tuningJobs"],o)}return n}function fJ(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["model"],r);let i=d(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function hJ(t,e){let n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=d(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(n,["examples","examples"],i)}return n}function pJ(t,e,n){let r={},i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(i==="DISTILLATION"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["distillationSpec","promptDatasetUri"],o)}let s=d(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["distillationSpec","promptDatasetUri"],o)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function AM(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["state"]);s!=null&&f(n,["state"],nM(s));let o=d(t,["createTime"]);o!=null&&f(n,["createTime"],o);let a=d(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);let l=d(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);let u=d(t,["description"]);u!=null&&f(n,["description"],u);let h=d(t,["baseModel"]);h!=null&&f(n,["baseModel"],h);let p=d(t,["_self"]);return p!=null&&f(n,["tunedModel"],fJ(p)),n}function GC(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["state"]);s!=null&&f(n,["state"],nM(s));let o=d(t,["createTime"]);o!=null&&f(n,["createTime"],o);let a=d(t,["startTime"]);a!=null&&f(n,["startTime"],a);let l=d(t,["endTime"]);l!=null&&f(n,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);let u=d(t,["error"]);u!=null&&f(n,["error"],u);let h=d(t,["description"]);h!=null&&f(n,["description"],h);let p=d(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);let m=d(t,["tunedModel"]);m!=null&&f(n,["tunedModel"],m);let g=d(t,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);let y=d(t,["supervisedTuningSpec"]);y!=null&&f(n,["supervisedTuningSpec"],y);let _=d(t,["preferenceOptimizationSpec"]);_!=null&&f(n,["preferenceOptimizationSpec"],_);let w=d(t,["distillationSpec"]);w!=null&&f(n,["distillationSpec"],w);let A=d(t,["tuningDataStats"]);A!=null&&f(n,["tuningDataStats"],A);let k=d(t,["encryptionSpec"]);k!=null&&f(n,["encryptionSpec"],k);let T=d(t,["partnerModelTuningSpec"]);T!=null&&f(n,["partnerModelTuningSpec"],T);let L=d(t,["customBaseModel"]);L!=null&&f(n,["customBaseModel"],L);let R=d(t,["experiment"]);R!=null&&f(n,["experiment"],R);let $=d(t,["labels"]);$!=null&&f(n,["labels"],$);let K=d(t,["outputUri"]);K!=null&&f(n,["outputUri"],K);let ie=d(t,["pipelineJob"]);ie!=null&&f(n,["pipelineJob"],ie);let le=d(t,["serviceAccount"]);le!=null&&f(n,["serviceAccount"],le);let nt=d(t,["tunedModelDisplayName"]);nt!=null&&f(n,["tunedModelDisplayName"],nt);let $t=d(t,["veoTuningSpec"]);return $t!=null&&f(n,["veoTuningSpec"],$t),n}function mJ(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["metadata"]);s!=null&&f(n,["metadata"],s);let o=d(t,["done"]);o!=null&&f(n,["done"],o);let a=d(t,["error"]);return a!=null&&f(n,["error"],a),n}function KE(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);let i=d(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}var qC=class extends $r{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(Ms.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),s=await this.tuneMldevInternal(i),o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Yk.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=sJ(e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>GC(u))}else{let c=iJ(e);return a=B("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>AM(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=cJ(e);return a=B("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=dJ(u),p=new ig;return Object.assign(p,h),p})}else{let c=lJ(e);return a=B("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=uJ(u),p=new ig;return Object.assign(p,h),p})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=Q7(e);return a=B("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=Z7(u),p=new sg;return Object.assign(p,h),p})}else{let c=K7(e);return a=B("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=X7(u),p=new sg;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=rJ(e,e);return s=B("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>GC(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=nJ(e);return s=B("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>mJ(l))}}};var jC=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},gJ=1024*1024*8,vJ=3,yJ=1e3,wJ=2,Sg="x-goog-upload-status";async function _J(t,e,n){var r;let i=await DM(t,e,n),s=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Sg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function EJ(t,e,n){var r;let i=await DM(t,e,n),s=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[Sg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let o=Jk(s),a=new pC;return Object.assign(a,o),a}async function DM(t,e,n){var r,i;let s=0,o=0,a=new xd(new Response),l="upload";for(s=t.size;o<s;){let c=Math.min(gJ,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,p=yJ;for(;h<vJ&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a?.headers)===null||r===void 0)&&r[Sg]));)h++,await SJ(p),p=p*wJ;if(o+=c,((i=a?.headers)===null||i===void 0?void 0:i[Sg])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function CJ(t){return{size:t.size,type:t.type}}function SJ(t){return new Promise(e=>setTimeout(e,t))}var WC=class{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _J(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EJ(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CJ(e)}};var zC=class{create(e,n,r){return new JC(e,n,r)}},JC=class{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var zk="x-goog-api-key",YC=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(zk)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zk,this.apiKey)}}};var bJ="gl-node/",bg=class{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let n=this.httpOptions;n?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let r=new mt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n?.timeout,maxRetries:(e=n?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let r=zq(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let i=new YC(this.apiKey);this.apiClient=new xC({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:bJ+"web",uploader:new WC,downloader:new jC}),this.models=new MC(this.apiClient),this.live=new DC(this.apiClient,i,new zC),this.batches=new vC(this.apiClient),this.chats=new wC(this.models,this.apiClient),this.caches=new yC(this.apiClient),this.files=new EC(this.apiClient),this.operations=new NC(this.apiClient),this.authTokens=new RC(this.apiClient),this.tunings=new qC(this.apiClient),this.fileSearchStores=new LC(this.apiClient)}};var Ns={production:!1,aiProvider:"gemini",geminiApiKey:"AIzaSyBxWYvz9KqVNxH7mQ3jP8kL2nR5tC4vD6wE",deepseekApiKey:""};var Ag=class t{constructor(){this.geminiAI=null;this.aiProvider="local";this.modelName="gemini-2.0-flash-exp";this.quotaExceeded=!1;this.initializeAI()}initializeAI(){try{let e=Ns.aiProvider||"local";e==="gemini"&&Ns.geminiApiKey&&Ns.geminiApiKey.trim()!==""?(this.geminiAI=new bg({apiKey:Ns.geminiApiKey}),this.aiProvider="gemini",console.log("\u2705 AiService: Gemini Flash inizializzato (GRATUITO - 1500 req/giorno)")):e==="deepseek"&&Ns.deepseekApiKey&&Ns.deepseekApiKey.trim()!==""?(this.aiProvider="deepseek",console.log("\u2705 AiService: DeepSeek inizializzato (GRATUITO)")):(this.aiProvider="local",console.warn("\u26A0\uFE0F AiService: Nessuna API configurata. Uso motore locale (CPU)."),console.info("\u{1F4A1} Per velocizzare l'AI:"),console.info("   - GEMINI (consigliato): https://aistudio.google.com/app/apikey"),console.info("   - DEEPSEEK: https://platform.deepseek.com/api_keys"))}catch(e){console.error("\u274C AiService: Errore inizializzazione:",e),this.aiProvider="local"}}async getBestMove(e,n,r="chess",i=1){return this.quotaExceeded?(console.warn("\u26A0\uFE0F Quota API esaurita. Uso motore locale."),null):this.aiProvider==="gemini"&&this.geminiAI?await this.getGeminiMove(e,n,r,i):this.aiProvider==="deepseek"?await this.getDeepSeekMove(e,n,r,i):null}async getGeminiMove(e,n,r,i){if(!this.geminiAI)return null;try{let s=this.buildPrompt(e,n,r,i),a=(await this.geminiAI.models.generateContent({model:this.modelName,contents:s,config:{temperature:i<40?.7:.1,maxOutputTokens:50}})).text;return console.log("\u{1F916} AI Raw Response:",a),a?(console.log("\u{1F916} AI Parsed Text:",a),this.parseMove(a,n)):(console.warn("\u26A0\uFE0F AI: Nessun testo restituito da Gemini"),null)}catch(s){return s.status===429||s.message&&s.message.includes("429")?(this.quotaExceeded=!0,console.warn("\u26A0\uFE0F Quota Gemini esaurita (1500/giorno). Passo al motore locale.")):console.error("\u274C Errore Gemini:",s.message||s),null}}async getDeepSeekMove(e,n,r,i){try{let s=this.buildPrompt(e,n,r,i),o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ns.deepseekApiKey}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"Sei un esperto di scacchi. Rispondi SOLO con la mossa in formato UCI (es: e2e4)."},{role:"user",content:s}],temperature:i<40?.7:.1,max_tokens:20})});if(!o.ok)throw new Error(`DeepSeek API error: ${o.status}`);let l=(await o.json()).choices?.[0]?.message?.content;return l?this.parseMove(l,n):null}catch(s){return console.error("\u274C Errore DeepSeek:",s.message),null}}buildPrompt(e,n,r,i){let s=800+i*15,o="";return i<=30?o="Principiante (800-1200 ELO). A volte ignori minacce immediate.":i<=70?o="Intermedio (1400-1700 ELO). Giochi in modo solido.":o="Grandmaster (2000+ ELO). Precisione assoluta, tattiche brutali.",r==="chess"?`RUOLO: Gran Maestro FIDE. Giochi con il NERO.
      
STATO:
FEN: ${e}
MOSSE LEGALI: [${n.join(", ")}]
LIVELLO: ${i}/100 (${s} ELO)
COMPORTAMENTO: ${o}

ISTRUZIONI:
1. Analizza le mosse legali
2. Scegli la migliore per il NERO
3. Rispondi SOLO con la mossa (es: "e7e5")
4. NO spiegazioni, NO testo extra

MOSSA:`:`RUOLO: Esperto Dama Italiana. Giochi con il NERO.

STATO:
FEN: ${e}
MOSSE LEGALI: [${n.join(", ")}]
LIVELLO: ${i}/100

REGOLE CRITICHE:
- Presa obbligatoria se disponibile
- Pedine muovono solo avanti
- Dame muovono in tutte le direzioni

ISTRUZIONI:
1. Analizza le mosse legali
2. RISPETTA la presa obbligatoria
3. Rispondi SOLO con la mossa (es: "c3d4")

MOSSA:`}parseMove(e,n){let r=e.trim().toLowerCase();if(n.includes(r))return r;let i=r.replace(/[^a-z0-9]/g,"");if(n.includes(i))return i;let s=/[a-h][1-8][a-h][1-8]/g,o=e.match(s);if(o){for(let a of o)if(n.includes(a))return a}return console.warn("\u26A0\uFE0F AI ha restituito una mossa non valida:",e),null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}};var kM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);var Vl=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Ad=class extends Vl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Bl=class extends Vl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Ul=class extends Vl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Dg=(function(t){return t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",t})(Dg||{});var Dd=class{constructor(e,{headers:n={},customFetch:r,region:i=Dg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=kM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ip(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{let{headers:a,method:l,body:c,signal:u,timeout:h}=r,p={},{region:m}=r;m||(m=this.region);let g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(p["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(p["Content-Type"]="application/json",y=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?y=JSON.stringify(c):y=c;let _=u;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),u?(_=o.signal,u.addEventListener("abort",()=>o.abort())):_=o.signal);let w=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:y,signal:_}).catch(L=>{throw new Ad(L)}),A=w.headers.get("x-relay-error");if(A&&A==="true")throw new Bl(w);if(!w.ok)throw new Ul(w);let k=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return k==="application/json"?T=yield w.json():k==="application/octet-stream"||k==="application/pdf"?T=yield w.blob():k==="text/event-stream"?T=w:k==="multipart/form-data"?T=yield w.formData():T=yield w.text(),{data:T,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof Ul||a instanceof Bl?a.context:void 0}}finally{s&&clearTimeout(s)}})}};var RM=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},xJ=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var h,p;if(n.method!=="HEAD"){var m;let w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}let y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),_=(p=s.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&_&&_.length>1&&(l=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;let y=await s.text();try{o=JSON.parse(y),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&y===""?(c=204,u="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new RM(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",l="",c="",u=s?.cause;if(u){var h,p,m,g;let w=(h=u?.message)!==null&&h!==void 0?h:"",A=(p=u?.code)!==null&&p!==void 0?p:"";a=`${(m=s?.name)!==null&&m!==void 0?m:"FetchError"}: ${s?.message}`,a+=`

Caused by: ${(g=u?.name)!==null&&g!==void 0?g:"Error"}: ${w}`,A&&(a+=` (${A})`),u?.stack&&(a+=`
${u.stack}`)}else{var y;a=(y=s?.stack)!==null&&y!==void 0?y:""}let _=this.url.toString().length;return s?.name==="AbortError"||s?.code==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",_>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${_} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(u?.name==="HeadersOverflowError"||u?.code==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",_>this.urlLengthLimit&&(l+=`. Your request URL is ${_} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:a,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},TJ=class extends xJ{select(t){let e=!1,n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;let a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}},MM=new RegExp("[,()]"),$l=class extends TJ{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&MM.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&MM.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},IJ=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){let{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET",s=!1,o=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new $l({method:i,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;let i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){let a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){let l=[...new Set(a)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new $l({method:i,url:s,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;let o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){let u=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",u.join(","))}}return new $l({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;let r="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new $l({method:r,url:i,headers:s,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new $l({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function AJ(t,e){if(kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DJ(t){var e=AJ(t,"string");return kd(e)=="symbol"?e:e+""}function kJ(t,e,n){return(e=DJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(r){kJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var PM=class LM{constructor(e,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;let a=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,c)=>{let u=new AbortController,h=setTimeout(()=>u.abort(),s),p=c?.signal;if(p){if(p.aborted)return clearTimeout(h),a(l,c);let m=()=>{clearTimeout(h),u.abort()};return p.addEventListener("abort",m,{once:!0}),a(l,kg(kg({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(h),p.removeEventListener("abort",m)})}return a(l,kg(kg({},c),{},{signal:u.signal})).finally(()=>clearTimeout(h))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new IJ(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new LM(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a,l=new URL(`${this.url}/rpc/${e}`),c,u=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(u)),h=r&&Object.values(n).some(u);h?(a="POST",c=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{l.searchParams.append(m,g)})):(a="POST",c=n);let p=new Headers(this.headers);return h?p.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&p.set("Prefer",`count=${s}`),new $l({method:a,url:l,headers:p,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};var nS=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){let r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},rS=nS;var OM="2.95.3";var FM=`realtime-js/${OM}`,VM="1.0.0",iS="2.0.0",sS=iS;var Md=1e4,BM=1e3,UM=100,Rs=(function(t){return t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",t})(Rs||{}),St=(function(t){return t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",t})(St||{}),dr=(function(t){return t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",t})(dr||{}),oS=(function(t){return t.websocket="websocket",t})(oS||{}),Zo=(function(t){return t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",t})(Zo||{});var Mg=class{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;let o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);let p=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+p),g=new DataView(m),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,l.length),g.setUint8(y++,a.length),g.setUint8(y++,o.length),g.setUint8(y++,c.length),g.setUint8(y++,h.length),g.setUint8(y++,n),Array.from(l,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(a,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(o,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(c,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(h,w=>g.setUint8(y++,w.charCodeAt(0)));var _=new Uint8Array(m.byteLength+r.byteLength);return _.set(new Uint8Array(m),0),_.set(new Uint8Array(r),m.byteLength),_.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){let n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){let i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4),l=this.HEADER_LENGTH+4,c=r.decode(e.slice(l,l+i));l=l+i;let u=r.decode(e.slice(l,l+s));l=l+s;let h=r.decode(e.slice(l,l+o));l=l+o;let p=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,g={type:this.BROADCAST_EVENT,event:u,payload:m};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}};var Hl=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Qe=(function(t){return t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",t})(Qe||{}),lS=(t,e,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=MJ(o,t,e,i),s),{}):{}},MJ=(t,e,n,r)=>{let i=e.find(a=>a.name===t),s=i?.type,o=n[t];return s&&!r.includes(s)?$M(s,o):aS(o)},$M=(t,e)=>{if(t.charAt(0)==="_"){let n=t.slice(1,t.length);return LJ(e,n)}switch(t){case Qe.bool:return NJ(e);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return RJ(e);case Qe.json:case Qe.jsonb:return PJ(e);case Qe.timestamp:return OJ(e);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return aS(e);default:return aS(e)}},aS=t=>t,NJ=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},RJ=t=>{if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},PJ=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},LJ=(t,e)=>{if(typeof t!="string")return t;let n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s,o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>$M(e,a))}return t},OJ=t=>typeof t=="string"?t.replace(" ","T"):t,Ng=t=>{let e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var Gl=class{constructor(e,n,r={},i=Md){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Nd=class t{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=t.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=t.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){let s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let h=s[c];if(h){let p=u.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),g=u.filter(_=>m.indexOf(_.presence_ref)<0),y=h.filter(_=>p.indexOf(_.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){let{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;let u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){let h=e[a].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;let u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{let i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Rd=(function(t){return t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",t})(Rd||{}),$i=(function(t){return t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",t})($i||{});var Pd=class t{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,dr.join,this.params,this.timeout),this.rejoinTimer=new Hl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Nd(this),this.broadcastEndpointURL=Ng(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==St.closed){let{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Rd.PRESENCE]&&this.bindings[Rd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e?.($i.CHANNEL_ERROR,m)),this._onClose(()=>e?.($i.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e?.($i.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,_=(g=y?.length)!==null&&g!==void 0?g:0,w=[];for(let A=0;A<_;A++){let k=y[A],{filter:{event:T,schema:L,table:R,filter:$}}=k,K=m&&m[A];if(K&&K.event===T&&t.isFilterValueEqual(K.schema,L)&&t.isFilterValueEqual(K.table,R)&&t.isFilterValueEqual(K.filter,$))w.push(Object.assign(Object.assign({},k),{id:K.id}));else{this.unsubscribe(),this.state=St.errored,e?.($i.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e($i.SUBSCRIBED);return}}).receive("error",m=>{this.state=St.errored,e?.($i.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.($i.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===St.joined&&e===Rd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{let c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{let c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;let c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Gl(this,dr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=St.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gl(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>UM){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=dr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,y,_;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(y=m.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,y,_,w,A,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){let T=m.id,L=(g=m.filter)===null||g===void 0?void 0:g.event;return T&&((y=n.ids)===null||y===void 0?void 0:y.includes(T))&&(L==="*"||L?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{let T=(A=(w=m?.filter)===null||w===void 0?void 0:w.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return T==="*"||T===((k=n?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:y,table:_,commit_timestamp:w,type:A,errors:k}=g;p=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:w,eventType:A,new:{},old:{},errors:k}),this._getPayloadRecords(g))}m.callback(p,r)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){let i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&t.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(let r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(dr.close,{},e)}_onError(e){this._on(dr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=lS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=lS(e.columns,e.old_record)),n}};var cS=()=>{},Rg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VJ=[1e3,2e3,5e3,1e4],BJ=1e4,UJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ld=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Md,this.transport=null,this.heartbeatIntervalMs=Rg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cS,this.ref=0,this.reconnectTimer=null,this.vsn=sS,this.logger=cS,this.conn=null,this.sendBuffer=[],this.serializer=new Mg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${oS.websocket}`,this.httpEndpoint=Ng(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Rs.connecting:return Zo.Connecting;case Rs.open:return Zo.Open;case Rs.closing:return Zo.Closing;default:return Zo.Closed}}isConnected(){return this.connectionState()===Zo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{let s=new Pd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){let{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(BM,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rg.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Rs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rs.open||this.conn.readyState===Rs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(dr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{let r=new Blob([UJ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let s={access_token:n,version:FM};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(dr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Hl(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,h,p,m;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Md,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Rg.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:cS,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:sS,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:g=>VJ[g-1]||BJ,this.vsn){case VM:this.encode=(u=e?.encode)!==null&&u!==void 0?u:(g,y)=>y(JSON.stringify(g)),this.decode=(h=e?.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case iS:this.encode=(p=e?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};var Od=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $J(t,e,n){let r=new URL(e,t);if(n)for(let[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function HJ(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function GJ(t){let e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){let a=$J(t.baseUrl,r,i),l=await HJ(t.auth),c=await e(a,{method:n,headers:D(D(D({},s?{"Content-Type":"application/json"}:{}),l),o),body:s?JSON.stringify(s):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),p=h&&u?JSON.parse(u):u;if(!c.ok){let m=h?p:void 0,g=m?.error;throw new Od(g?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:g?.type,icebergCode:g?.code,details:m})}return{status:c.status,headers:c.headers,data:p}}}}function Pg(t){return t.join("")}var qJ=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){let e=t?{parent:Pg(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){let n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pg(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pg(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pg(t.namespace)}`}),!0}catch(e){if(e instanceof Od&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Od&&n.status===409)return;throw n}}};function ql(t){return t.join("")}var jJ=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){let e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ql(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Od&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Od&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},HM=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);let n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=GJ({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new qJ(this.client,e),this.tableOps=new jJ(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};var Og=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Fg(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Lg=class extends Og{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},WM=class extends Og{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};var WJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zJ=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},uS=t=>{if(Array.isArray(t))return t.map(n=>uS(n));if(typeof t=="function"||t!==Object(t))return t;let e={};return Object.entries(t).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=uS(r)}),e},JJ=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function YJ(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KJ(t){var e=YJ(t,"string");return Vd(e)=="symbol"?e:e+""}function QJ(t,e,n){return(e=KJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GM(Object(n),!0).forEach(function(r){QJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qM=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},XJ=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){let i=t,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{let a=o?.statusCode||o?.code||s+"";e(new Lg(qM(o),s,a,r))}).catch(()=>{if(r==="vectors"){let o=s+"";e(new Lg(i.statusText||`HTTP ${s} error`,s,o,r))}else{let o=s+"";e(new Lg(i.statusText||`HTTP ${s} error`,s,o,r))}});else{let o=s+"";e(new Lg(i.statusText||`HTTP ${s} error`,s,o,r))}}else e(new WM(qM(t),t,r))},ZJ=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?ce(ce({},i),n):(zJ(r)?(i.headers=ce({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),ce(ce({},i),n))};async function Fd(t,e,n,r,i,s,o){return new Promise((a,l)=>{t(n,ZJ(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;if(o==="vectors"){let u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>XJ(c,l,r,o))})}function zM(t="storage"){return{get:async(e,n,r,i)=>Fd(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,s)=>Fd(e,"POST",n,i,s,r,t),put:async(e,n,r,i,s)=>Fd(e,"PUT",n,i,s,r,t),head:async(e,n,r,i)=>Fd(e,"HEAD",n,ce(ce({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,s)=>Fd(e,"DELETE",n,i,s,r,t)}}var eY=zM("storage"),{get:Bd,post:Gr,put:dS,head:tY,remove:fS}=eY,jn=zM("vectors"),jl=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=WJ(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Fg(n))return{data:null,error:n};throw n}}},nY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Fg(e))return{data:null,error:e};throw e}}},JM;JM=Symbol.toStringTag;var rY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[JM]="BlobDownloadBuilder",this.promise=null}asStream(){return new nY(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Fg(e))return{data:null,error:e};throw e}}},iY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},sY=class extends jl{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let s,o=ce(ce({},jM),r),a=ce(ce({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=ce(ce({},a),r.headers));let c=i._removeEmptyFolders(e),u=i._getFinalPath(c),h=await(t=="PUT"?dS:Gr)(i.fetch,`${i.url}/object/${u}`,s,ce({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;let s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),i.handleOperation(async()=>{let l,c=ce({upsert:jM.upsert},r),u=ce(ce({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:s,fullPath:(await dS(i.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t),i=ce({},n.headers);e?.upsert&&(i["x-upsert"]="true");let s=await Gr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new Og("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Gr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Gr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),s=await Gr(r.fetch,`${r.url}/object/sign/${i}`,ce({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{let i=await Gr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(o=>ce(ce({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null}))})}download(t,e,n){let r=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),a=()=>Bd(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0},n);return new rY(a,this.shouldThrowOnError)}async info(t){var e=this;let n=e._getFinalPath(t);return e.handleOperation(async()=>uS(await Bd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;let n=e._getFinalPath(t);try{return await tY(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Fg(r)&&r instanceof WM){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){let n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);let s=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await fS(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{let i=ce(ce(ce({},iY),e),{},{prefix:t||""});return await Gr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{let r=ce({},t);return await Gr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}},oY="2.95.3",Ud={"X-Client-Info":`storage-js/${oY}`},aY=class extends jl{constructor(t,e={},n,r){let i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let s=i.href.replace(/\/$/,""),o=ce(ce({},Ud),e);super(s,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{let n=e.listBucketOptionsToQueryString(t);return await Bd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Bd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Gr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await dS(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Gr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await fS(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},lY=class extends jl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Ud),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Gr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{let n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);let r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Bd(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await fS(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!JJ(t))throw new Og("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new HM({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){let o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},cY=class extends jl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Ud),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await jn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await jn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},uY=class extends jl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Ud),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},dY=class extends jl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Ud),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await jn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},fY=class extends dY{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new hY(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},hY=class extends cY{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new pY(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},pY=class extends uY{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},YM=class extends aY{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new sY(this.url,this.headers,t,this.fetch)}get vectors(){return new fY(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lY(this.url+"/iceberg",this.headers,this.fetch)}};var Vg="2.95.3";var ea=30*1e3,Bg=3,Ug=Bg*ea,KM="http://localhost:9999",QM="supabase.auth.token";var XM={"X-Client-Info":`gotrue-js/${Vg}`};var $d="X-Supabase-Api-Version",hS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eN=600*1e3;var Ps=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function J(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}var $g=class extends Ps{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function tN(t){return J(t)&&t.name==="AuthApiError"}var fr=class extends Ps{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},qr=class extends Ps{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},Ut=class extends qr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Gg(t){return J(t)&&t.name==="AuthSessionMissingError"}var Hi=class extends qr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ta=class extends qr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},na=class extends qr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function nN(t){return J(t)&&t.name==="AuthImplicitGrantRedirectError"}var Hd=class extends qr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Hg=class extends qr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var Wl=class extends qr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function qg(t){return J(t)&&t.name==="AuthRetryableFetchError"}var Gd=class extends qr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var ra=class extends qr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var jg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rN=` 	
\r=`.split(""),mY=(()=>{let t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rN.length;e+=1)t[rN[e].charCodeAt(0)]=-2;for(let e=0;e<jg.length;e+=1)t[jg[e].charCodeAt(0)]=e;return t})();function iN(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(jg[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(jg[r]),e.queuedBits-=6}}function sN(t,e,n){let r=mY[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function pS(t){let e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{yY(o,r,n)};for(let o=0;o<t.length;o+=1)sN(t.charCodeAt(o),i,s);return e.join("")}function gY(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function vY(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}gY(r,e)}}function yY(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ls(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)sN(t.charCodeAt(i),n,r);return new Uint8Array(e)}function oN(t){let e=[];return vY(t,n=>e.push(n)),new Uint8Array(e)}function Gi(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>iN(i,n,r)),iN(null,n,r),e.join("")}function aN(t){return Math.round(Date.now()/1e3)+t}function lN(){return Symbol("auth-callback")}var bt=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},Wg=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function cN(t){let e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}var zg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sa=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Os=async(t,e)=>{let n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dt=async(t,e)=>{await t.removeItem(e)},qd=class t{constructor(){this.promise=new t.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};qd.promiseConstructor=Promise;function jd(t){let e=t.split(".");if(e.length!==3)throw new ra("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ZM.test(e[r]))throw new ra("JWT not in base64url format");return{header:JSON.parse(pS(e[0])),payload:JSON.parse(pS(e[1])),signature:Ls(e[2]),raw:{header:e[0],payload:e[1]}}}async function dN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fN(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{let o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function wY(t){return("0"+t.toString(16)).substr(-2)}function _Y(){let e=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wY).join("")}async function EY(t){let n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function CY(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;let n=await EY(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oa(t,e,n=!1){let r=_Y(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await sa(t,`${e}-code-verifier`,i);let s=await CY(r);return[s,r===s?"plain":"s256"]}var SY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hN(t){let e=t.headers.get($d);if(!e||!e.match(SY))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pN(t){if(!t)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var bY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function aa(t){if(!bY.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jg(){let t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gN(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function mS(t){return JSON.parse(JSON.stringify(t))}var la=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xY=[502,503,504];async function vN(t){var e;if(!uN(t))throw new Wl(la(t),0);if(xY.includes(t.status))throw new Wl(la(t),t.status);let n;try{n=await t.json()}catch(s){throw new fr(la(s),s)}let r,i=hN(t);if(i&&i.getTime()>=hS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Gd(la(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ut}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Gd(la(n),t.status,n.weak_password.reasons);throw new $g(la(n),t.status||500,r)}var TY=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function re(t,e,n,r){var i;let s=Object.assign({},r?.headers);s[$d]||(s[$d]=hS["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await IY(t,e,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function IY(t,e,n,r,i,s){let o=TY(e,r,i,s),a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Wl(la(l),0)}if(a.ok||await vN(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await vN(l)}}function hr(t){var e;let n=null;AY(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=aN(t.expires_in)));let r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function gS(t){let e=hr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ei(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yN(t){return{data:t,error:null}}function wN(t){let{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=So(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function vS(t){return t}function AY(t){return t.access_token&&t.refresh_token&&t.expires_in}var Yg=["global","local","others"];var zl=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=zg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Yg[0]){if(Yg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yg.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ei})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:n}=e,r=So(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:wN,redirectTo:n?.redirectTo})}catch(n){if(J(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ei})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:vS});if(u.error)throw u.error;let h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{let y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){aa(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ei})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){aa(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ei})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){aa(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ei})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){aa(e.userId);try{let{data:n,error:r}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _deleteFactor(e){aa(e.userId),aa(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:vS});if(u.error)throw u.error;let h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{let y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}};function yS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}var ca={debug:!!(globalThis&&Wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Wd=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Kg=class extends Wd{};async function wS(t,e,n){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Kg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ca.debug)try{let s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _N(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _S(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function EN(t){return parseInt(t,16)}function CN(t){let e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function SN(t){var e;let{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}let m=_S(t.address),g=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",_=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`,w=`URI: ${h}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let A=`
Resources:`;for(let k of c){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);A+=`
- ${k}`}w+=A}return`${_}
${w}`}var tt=class extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}},ua=class extends tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}};function bN({error:t,options:e}){var n,r,i;let{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){let o=window.location.hostname;if(ES(o)){if(s.rp.id!==o)return new tt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function xN({error:t,options:e}){let{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){let r=window.location.hostname;if(ES(r)){if(n.rpId!==r)return new tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var CS=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},DY=new CS;function IN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);let{challenge:e,user:n,excludeCredentials:r}=t,i=So(t,["challenge","user","excludeCredentials"]),s=Ls(e).buffer,o=Object.assign(Object.assign({},n),{id:Ls(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ls(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function AN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);let{challenge:e,allowCredentials:n}=t,r=So(t,["challenge","allowCredentials"]),i=Ls(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){let a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ls(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function DN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Gi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Gi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Gi(new Uint8Array(i.authenticatorData)),clientDataJSON:Gi(new Uint8Array(i.clientDataJSON)),signature:Gi(new Uint8Array(i.signature)),userHandle:i.userHandle?Gi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ES(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function TN(){var t,e;return!!(bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function kY(t){try{let e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ua("Browser returned unexpected credential type",e)}:{data:null,error:new ua("Empty credential response",e)}}catch(e){return{data:null,error:bN({error:e,options:t})}}}async function MY(t){try{let e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ua("Browser returned unexpected credential type",e)}:{data:null,error:new ua("Empty credential response",e)}}catch(e){return{data:null,error:xN({error:e,options:t})}}}var NY={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},RY={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qg(...t){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of t)if(i)for(let s in i){let o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){let a=r[s];e(a)?r[s]=Qg(a,o):r[s]=Qg(o)}else r[s]=o}return r}function PY(t,e){return Qg(NY,t,e||{})}function LY(t,e){return Qg(RY,t,e||{})}var Xg=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){var o;try{let{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};let c=i??DY.createNewAbortSignal();if(a.webauthn.type==="create"){let{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){let h=r;if(h)u.name=`${u.id}:${h}`;else{let m=(await this.client.getUser()).data.user,g=((o=m?.user_metadata)===null||o===void 0?void 0:o.name)||m?.email||m?.id||"User";u.name=`${u.id}:${g}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{let u=PY(a.webauthn.credential_options.publicKey,s?.create),{data:h,error:p}=await kY({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{let u=LY(a.webauthn.credential_options.publicKey,s?.request),{data:h,error:p}=await MY(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return J(a)?{data:null,error:a}:{data:null,error:new fr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ps("rpId is required for WebAuthn authentication")};try{if(!TN())return{data:null,error:new fr("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};let{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return J(o)?{data:null,error:o}:{data:null,error:new fr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ps("rpId is required for WebAuthn registration")};try{if(!TN())return{data:null,error:new fr("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return J(o)?{data:null,error:o}:{data:null,error:new fr("Unexpected error in register",o)}}}};_N();var OY={url:KM,storageKey:QM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function MN(t,e,n){return await n()}var Jl={},FY=(()=>{class t{get jwks(){var n,r;return(r=(n=Jl[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Jl[this.storageKey]=Object.assign(Object.assign({},Jl[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Jl[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Jl[this.storageKey]=Object.assign(Object.assign({},Jl[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let o=Object.assign(Object.assign({},OY),n);if(this.storageKey=o.storageKey,this.instanceID=(r=t.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,t.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&bt()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new zl({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=zg(o.fetch),this.lock=o.lock||MN,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&bt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=wS:this.lock=MN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Wg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=yS(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vg}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(bt()&&(r=cN(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),bt()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=await this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),nN(o)){let c=(n=o.details)===null||n===void 0?void 0:n.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return{error:o}}let{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?this._returnResult({error:r}):this._returnResult({error:new fr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,s;try{let o=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=n?.options)===null||s===void 0?void 0:s.captchaToken}},xform:hr}),{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(n){var r,i,s;try{let o;if("email"in n){let{email:h,password:p,options:m}=n,g=null,y=null;this.flowType==="pkce"&&([g,y]=await oa(this.storage,this.storageKey)),o=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},xform:hr})}else if("phone"in n){let{phone:h,password:p,options:m}=n;o=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=m?.data)!==null&&i!==void 0?i:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:hr})}else throw new ta("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return await Dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(n){try{let r;if("email"in n){let{email:o,password:a,options:l}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:gS})}else if("phone"in n){let{phone:o,password:a,options:l}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:gS})}else throw new ta("You must provide either an email or phone number and a password");let{data:i,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){let o=new Hi;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,s,o;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=n.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=n.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,s,o,a,l,c,u,h,p,m;let g,y;if("message"in n)g=n.message,y=n.signature;else{let{chain:_,wallet:w,statement:A,options:k}=n,T;if(bt())if(typeof w=="object")T=w;else{let le=window;if("ethereum"in le&&typeof le.ethereum=="object"&&"request"in le.ethereum&&typeof le.ethereum.request=="function")T=le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=w}let L=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),R=await T.request({method:"eth_requestAccounts"}).then(le=>le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let $=_S(R[0]),K=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!K){let le=await T.request({method:"eth_chainId"});K=EN(le)}let ie={domain:L.host,address:$,statement:A,uri:L.href,version:"1",chainId:K,nonce:(s=k?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=k?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=k?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=SN(ie),y=await T.request({method:"personal_sign",params:[CN(g),$]})}try{let{data:_,error:w}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((p=n.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=n.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:hr});if(w)throw w;if(!_||!_.session||!_.user){let A=new Hi;return this._returnResult({data:{user:null,session:null},error:A})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:w})}catch(_){if(J(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(n){var r,i,s,o,a,l,c,u,h,p,m,g;let y,_;if("message"in n)y=n.message,_=n.signature;else{let{chain:w,wallet:A,statement:k,options:T}=n,L;if(bt())if(typeof A=="object")L=A;else{let $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))L=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=A}let R=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){let $=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),k?{statement:k}:null)),K;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")K=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)K=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)y=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),_=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${R.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(s=(i=T?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=T?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((a=T?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(h=T?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);let $=await L.signMessage(new TextEncoder().encode(y),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=$}}try{let{data:w,error:A}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Gi(_)},!((m=n.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:hr});if(A)throw A;if(!w||!w.session||!w.user){let k=new Hi;return this._returnResult({data:{user:null,session:null},error:k})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:A})}catch(w){if(J(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(n){let r=await Os(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Hg;let{data:o,error:a}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:hr});if(await Dt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){let l=new Hi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(n){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=n,l=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:hr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){let h=new Hi;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,s,o,a;try{if("email"in n){let{email:l,options:c}=n,u=null,h=null;this.flowType==="pkce"&&([u,h]=await oa(this.storage,this.storageKey));let{error:p}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in n){let{phone:l,options:c}=n,{data:u,error:h}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new ta("You must provide either an email or phone number.")}catch(l){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(n){var r,i;try{let s,o;"options"in n&&(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo,o=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:hr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(J(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(n){var r,i,s,o,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await oa(this.storage,this.storageKey));let u=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=n?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:yN});return!((o=u.data)===null||o===void 0)&&o.url&&bt()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ut;let{error:s}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:s,options:o}=n,{error:a}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:s,options:o}=n,{data:a,error:l}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:l})}throw new ta("You must provide either an email or phone number and a type")}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await Os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<Ug:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await Os(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Jg()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=gN(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:s,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ei}):await this._useSession(async r=>{var i,s,o;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Ei})})}catch(r){if(J(r))return Gg(r)&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:s,error:o}=i;if(o)throw o;if(!s.session)throw new Ut;let a=s.session,l=null,c=null;this.flowType==="pkce"&&n.email!=null&&([l,c]=await oa(this.storage,this.storageKey));let{data:u,error:h}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ei});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ut;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=jd(n.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{data:l,error:c}=await this._callRefreshToken(n.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=await this._getUser(n.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});o={access_token:n.access_token,refresh_token:n.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(J(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:l}=r;if(l)throw l;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ut;let{data:s,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!bt())throw new na("No browser detected.");if(n.error||n.error_description||n.error_code)throw new na(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Hd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new na("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Hd("No code detected.");let{data:k,error:T}=await this._exchangeCodeForSession(n.code);if(T)throw T;let L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:k.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=n;if(!o||!l||!a||!u)throw new na("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(l),m=h+p;c&&(m=parseInt(c));let g=m-h;g*1e3<=ea&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let y=m-p;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,h);let{data:_,error:w}=await this._getUser(o);if(w)throw w;let A={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:m,refresh_token:a,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:n.type},error:null})}catch(i){if(J(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await Os(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o&&!Gg(o))return this._returnResult({error:o});let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,n);if(l&&!(tN(l)&&(l.status===404||l.status===401||l.status===403)||Gg(l)))return this._returnResult({error:l})}return n!=="others"&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=lN(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",n,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",o),console.error(o)}})}async resetPasswordForEmail(n,r={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await oa(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:s}=await this._useSession(async o=>{var a,l,c,u,h;let{data:p,error:m}=o;if(m)throw m;let g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return bt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(J(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:s,data:{session:o}}=r;if(s)throw s;let{options:a,provider:l,token:c,access_token:u,nonce:h}=n,p=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:hr}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Hi}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(s){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),J(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)throw a;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await fN(async s=>(s>0&&await dN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hr})),(s,o)=>{let a=200*Math.pow(2,s);return o&&qg(o)&&Date.now()+a-i<ea})}catch(i){if(this._debug(r,"error",i),J(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),bt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let s=await Os(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await sa(this.userStorage,this.storageKey+"-user",a)),s.user=(n=a?.user)!==null&&n!==void 0?n:Jg()}else if(s&&!s.user&&!s.user){let a=await Os(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await Dt(this.storage,this.storageKey+"-user"),await sa(this.storage,this.storageKey,s)):s.user=Jg()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}let o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ug;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Ug}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),qg(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:l}=await this._getUser(s.access_token);!l&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new qd;let{data:o,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!o.session)throw new Ut;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),J(o)){let a={data:null,error:o};return qg(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(n,r,i=!0){let s=`#_notifyAllSubscribers(${n})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(n,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Dt(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await sa(this.userStorage,this.storageKey+"-user",{user:r.user});let s=Object.assign({},r);delete s.user;let o=mS(s);await sa(this.storage,this.storageKey,o)}else{let s=mS(r);await sa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Dt(this.storage,this.storageKey),await Dt(this.storage,this.storageKey+"-code-verifier"),await Dt(this.storage,this.storageKey+"-user"),this.userStorage&&await Dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&bt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),ea);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-n)/ea);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ea}ms, refresh threshold is ${Bg} ticks`),s<=Bg&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Wd)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=await oa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${s.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await re(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});let l=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?DN(n.webauthn.credential_response):kN(n.webauthn.credential_response)})}:{code:n.code}),{data:l,error:c}=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:IN(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:AN(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let s={all:[],phone:[],totp:[],webauthn:[]};for(let o of(n=r?.factors)!==null&&n!==void 0?n:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,s,o;if(n)try{let{payload:g}=jd(n),y=null;g.aal&&(y=g.aal);let _=y,{data:{user:w},error:A}=await this.getUser(n);if(A)return this._returnResult({data:null,error:A});((i=(r=w?.factors)===null||r===void 0?void 0:r.filter(L=>L.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(_="aal2");let T=g.amr||[];return{data:{currentLevel:y,nextLevel:_,currentAuthenticationMethods:T},error:null}}catch(g){if(J(g))return this._returnResult({data:null,error:g});throw g}let{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:c}=jd(a.access_token),u=null;c.aal&&(u=c.aal);let h=u;((o=(s=a.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(h="aal2");let m=c.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Ut});let a=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&bt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(J(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Ut});let a=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&bt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(J(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?(await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ut})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(l=>l.kid===n);if(i)return i;let s=Date.now();if(i=this.jwks.keys.find(l=>l.kid===n),i&&this.jwks_cached_at+eN>s)return i;let{data:o,error:a}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,i=o.keys.find(l=>l.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});i=g.session.access_token}let{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=jd(i);r?.allowExpired||pN(o.exp);let u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:o,header:s,signature:a},error:null}}let h=mN(s.alg),p=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,oN(`${l}.${c}`)))throw new ra("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(i){if(J(i))return this._returnResult({data:null,error:i});throw i}}}return t.nextInstanceID={},t})(),SS=FY;var VY=SS,bS=VY;var BY="2.95.3",zd="";typeof Deno<"u"?zd="deno":typeof document<"u"?zd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zd="react-native":zd="node";var UY={"X-Client-Info":`supabase-js-${zd}/${BY}`},$Y={headers:UY},HY={schema:"public"},GY={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qY={};function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function jY(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WY(t){var e=jY(t,"string");return Jd(e)=="symbol"?e:e+""}function zY(t,e,n){return(e=WY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(n),!0).forEach(function(r){zY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var JY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),YY=()=>Headers,KY=(t,e,n)=>{let r=JY(n),i=YY();return async(s,o)=>{var a;let l=(a=await e())!==null&&a!==void 0?a:t,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,it(it({},o),{},{headers:c}))}};function QY(t){return t.endsWith("/")?t:t+"/"}function XY(t,e){var n,r;let{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,p={db:it(it({},l),i),auth:it(it({},c),s),realtime:it(it({},u),o),storage:{},global:it(it(it({},h),a),{},{headers:it(it({},(n=h?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function ZY(t){let e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(QY(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var eK=class extends bS{constructor(t){super(t)}},tK=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;let s=ZY(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);let o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:HY,realtime:qY,auth:it(it({},GY),{},{storageKey:o}),global:$Y},l=XY(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=KY(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(it({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new PM(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new YM(this.storageUrl.href,this.headers,this.fetch,n?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Dd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();let{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,h){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eK({url:this.authUrl.href,headers:it(it({},p),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Ld(this.realtimeUrl.href,it(it({},t),{},{params:it(it({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},RN=(t,e,n)=>new tK(t,e,n);function nK(){if(typeof window<"u")return!1;let t=globalThis.process;if(!t)return!1;let e=t.version;if(e==null)return!1;let n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}nK()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var xn=class t{constructor(){this.user=Ge(null);this.username=Ge(null);this.avatarUrl=Ge(null);this.loading=Ge(!0);this.supabaseUrl="https://xxvlfbozkveeydritfeo.supabase.co";this.supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4dmxmYm96a3ZlZXlkcml0ZmVvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MDAyOTYsImV4cCI6MjA4NjQ3NjI5Nn0.P43jKtqWYzvBoBcW69BUWssCb68nU5m6zw03PdRf1vs";this.authService={signUp:async(e,n,r)=>{console.log("AuthService: Tentativo registrazione per",r);let{data:i}=await this.supabase.from("profiles").select("username, nickname").or(`username.ilike.${r},nickname.ilike.${r}`).maybeSingle();if(i)return{data:{user:null,session:null},error:{message:`Il nome "${r}" \xE8 gi\xE0 in uso.`}};let s=await this.supabase.auth.signUp({email:e,password:n,options:{data:{username:r}}});return s.error||s.data.user&&await this.supabase.from("profiles").upsert({id:s.data.user.id,username:r,nickname:r,email:e}),s},signIn:async(e,n)=>{console.log("AuthService: Login per",e);let{data:r,error:i}=await this.supabase.from("profiles").select("email").or(`username.ilike.${e},nickname.ilike.${e}`).maybeSingle();return i?{data:null,error:i}:r?await this.supabase.auth.signInWithPassword({email:r.email,password:n}):{data:null,error:{message:"Operatore non trovato."}}},signOut:async()=>{await this.supabase.auth.signOut(),this.user.set(null),this.username.set(null),this.avatarUrl.set(null)}};this.profileService={getProfile:async e=>{let{data:n,error:r}=await this.supabase.from("profiles").select("*").eq("id",e).maybeSingle();return{data:n,error:r}},getCareerProgress:async e=>{let{data:n,error:r}=await this.supabase.from("career_progress").select("*").eq("user_id",e).maybeSingle();if(!n&&!r){let i={user_id:e,chess_level:1,checkers_level:1,total_points:0},{data:s}=await this.supabase.from("career_progress").insert(i).select().maybeSingle();return{data:s||i,error:null}}return{data:n,error:r}}};this.supabase=RN(this.supabaseUrl,this.supabaseKey),this.initAuth()}async initAuth(){let{data:{session:e}}=await this.supabase.auth.getSession(),n=e?.user??null;this.user.set(n),n&&this.fetchProfile(n.id),this.loading.set(!1),this.supabase.auth.onAuthStateChange(async(r,i)=>{console.log("SupabaseService: Auth Event:",r);let s=i?.user??null;(s?.id!==this.user()?.id||r==="SIGNED_IN")&&(this.user.set(s),s?await this.fetchProfile(s.id):(this.username.set(null),this.avatarUrl.set(null)))})}async fetchProfile(e){if(e)try{let{data:n,error:r}=await this.supabase.from("profiles").select("username, nickname, avatar_url").eq("id",e).maybeSingle();if(r)throw r;console.log("SupabaseService: Profilo recuperato:",n),this.username.set(n?.nickname||n?.username||null),this.avatarUrl.set(n?.avatar_url??null)}catch(n){if(console.warn("SupabaseService: Error fetching profile:",n),!this.username()){let r=this.user();r&&this.username.set(r.email?.split("@")[0]||"Utente")}}}async loadUserProfile(){let e=this.user()?.id;if(e)return await this.fetchProfile(e)}get client(){return this.supabase}async signUp(e,n,r){return this.authService.signUp(e,n,r)}async signInWithNickname(e,n){return this.authService.signIn(e,n)}async signOut(){return this.authService.signOut()}async getCareerProgress(){let{data:e}=await this.profileService.getCareerProgress(this.user()?.id||"");return e}async saveCareerGame(e,n,r){let i=this.user()?.id;i&&await this.supabase.from("career_progress").upsert({user_id:i,current_game_state:{type:e,level:n,state:r},updated_at:new Date().toISOString()})}async updateCareerProgress(e,n,r){let i=this.user()?.id;if(!i)return;let s=await this.getCareerProgress(),o=e==="chess"?"chess_level":"checkers_level",a=Math.max(s[o],n+1);await this.supabase.from("career_progress").upsert({user_id:i,[o]:a,total_points:(s.total_points||0)+r,games_played:(s.games_played||0)+1,games_won:(s.games_won||0)+1,current_game_state:null,updated_at:new Date().toISOString()})}async trackGamePlayed(){let e=this.user()?.id;if(!e)return;let n=await this.getCareerProgress();await this.supabase.from("career_progress").upsert({user_id:e,games_played:(n.games_played||0)+1,updated_at:new Date().toISOString()})}async clearSavedGame(){let e=this.user()?.id;e&&await this.supabase.from("career_progress").update({current_game_state:null}).eq("user_id",e)}async saveUserAssetPreference(e,n){let r=this.user()?.id;if(!r)return;let{data:i}=await this.supabase.from("profiles").select("active_assets").eq("id",r).maybeSingle(),s=i?.active_assets||{};s[e]=n,await this.supabase.from("profiles").update({active_assets:s}).eq("id",r)}async getUserAssetPreferences(){let e=this.user()?.id;if(!e)return{};let{data:n}=await this.supabase.from("profiles").select("active_assets").eq("id",e).maybeSingle();return n?.active_assets||{}}async uploadCustomAssetFile(e,n){let r=this.user()?.id;if(!r)throw new Error("User not logged in");let i=e.name.split(".").pop()||"glb",s=`${r}/${n}.${i}`,{error:o}=await this.supabase.storage.from("custom_assets").upload(s,e,{upsert:!0});if(o)throw o;let{data:a}=this.supabase.storage.from("custom_assets").getPublicUrl(s);return a.publicUrl}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}};var Tn=class t{constructor(){this.aiService=Q(Ag);this.supabase=Q(xn);this.viewState=Ge("home");this.gameMode=Ge("chess");this.playerMode=Ge("local");this.board=Ge(un.createInitialBoard("chess"));this.turn=Ge("w");this.selectedPos=Ge(null);this.pieceStyle=Ge("classic");this.useOriginalTexture=Ge(!1);this.bgBlur=Ge(!0);this.customMeshUrls=Ge({});this.careerLevel=Ge(1);this.careerPoints=Ge(0);this.isCareerGame=Oi(()=>this.playerMode()==="career");this.lastMove=Ge(null);this.validMoves=Oi(()=>{let e=this.selectedPos();return e?un.getLegalMoves(this.board(),e,this.gameMode(),this.lastMove()):[]});this.isAiThinking=Ge(!1);this.isGameOver=Ge(!1);this.gameStatus=Ge("Tocca al Bianco")}setPieceStyle(e){this.pieceStyle.set(e)}async loadUserAssets(){let e=this.supabase.user();if(e)try{let{data:n}=await this.supabase.client.from("profiles").select("current_kit_id, active_assets").eq("id",e.id).maybeSingle();if(n?.current_kit_id&&n.current_kit_id!=="default"){let{data:i}=await this.supabase.client.from("asset_collections").select("*").eq("id",n.current_kit_id).maybeSingle();if(i&&i.assets){console.log("\u{1F4E6} Loading Kit:",i.name),this.customMeshUrls.set(i.assets),this.setPieceStyle("custom");return}}let r=n?.active_assets||{};if(r&&Object.keys(r).length>0){let i=!1;this.customMeshUrls.update(s=>{let o=D({},s);return Object.keys(r).forEach(a=>{o[a]=r[a],a!=="board"&&(i=!0)}),o}),i&&this.setPieceStyle("custom"),console.log("\u2705 GameService: Custom Assets Synchronized",r)}}catch(n){console.error("\u274C GameService: Error syncing assets",n)}}toggleOriginalTexture(e){this.useOriginalTexture.set(e),this.pieceStyle()==="custom"&&this.pieceStyle.set("custom")}setView(e){this.viewState.set(e)}startGame(e,n="local",r){this.gameMode.set(e),this.playerMode.set(n),n==="career"&&r&&this.careerLevel.set(r),this.resetGame(),this.viewState.set("game"),this.supabase.user()&&this.supabase.trackGamePlayed()}setGameMode(e){this.gameMode.set(e),this.resetGame()}selectSquare(e){if(this.isAiThinking()||this.isGameOver())return;let r=this.board()[e.row][e.col],i=this.selectedPos();if(r&&r.color===this.turn()){this.selectedPos.set(e);return}i&&(this.validMoves().some(a=>a.row===e.row&&a.col===e.col)?this.executeMove(i,e):this.selectedPos.set(null))}async executeMove(e,n){let r=this.board(),i=r[e.row][e.col];if(!i||i.color!==this.turn()){console.warn("Attempted to move invalid piece");return}let s=this.gameMode(),o=null,a=null,l=!1;if(s==="checkers"){if(Math.abs(n.row-e.row)===2){let g=(e.row+n.row)/2,y=(e.col+n.col)/2;o=r[g][y],a={row:g,col:y},l=!0}}else{let g=r[n.row][n.col];g&&(o=g,a=D({},n),l=!0),i.type==="n"&&(l=!0)}let c={from:e,to:n,piece:D({},i),capturedPiece:o,capturedPos:a,isJump:l};this.board.update(g=>{let y=g.map(w=>[...w]),_=D({},y[e.row][e.col]);if(_.hasMoved=!0,_.type==="p"&&!o&&n.col!==e.col){let w=e.row,A=n.col;y[w][A]=null}if(_.type==="k"&&Math.abs(n.col-e.col)===2){let w=n.col===6,A=w?7:0,k=w?5:3,T=D({},y[e.row][A]);T.hasMoved=!0,y[e.row][k]=T,y[e.row][A]=null}return s==="chess"&&_.type==="p"&&(_.color==="w"&&n.row===0||_.color==="b"&&n.row===7)&&(_.type="q",c.piece=D({},_)),s==="checkers"&&_?.type==="cm"&&(_.color==="w"&&n.row===0||_.color==="b"&&n.row===7)&&(_.type="ck",c.piece=D({},_)),a&&s==="checkers"&&(y[a.row][a.col]=null),y[n.row][n.col]=_,y[e.row][e.col]=null,y}),this.lastMove.set(c),this.selectedPos.set(null);let u=this.turn()==="w"?"b":"w";this.turn.set(u);let h=this.board(),p=!1,m=null;if(s==="chess"?un.isCheckmate(h,u)?(this.gameStatus.set(`SCACCO MATTO! Vince il ${this.turn()==="b"?"Bianco":"Nero"}`),p=!0,m=this.turn()):un.isStalemate(h,u)?(this.gameStatus.set("STALLO! Pareggio."),p=!0,m="draw"):un.isKingInCheck(h,u)?this.gameStatus.set(`SCACCO al ${u==="w"?"Bianco":"Nero"}!`):this.gameStatus.set(`Tocca al ${u==="w"?"Bianco":"Nero"}`):this.getAllLegalMoves(u).length>0?this.gameStatus.set(`Tocca al ${u==="w"?"Bianco":"Nero"}`):(this.gameStatus.set(`${this.turn()==="b"?"Bianco":"Nero"} vince!`),p=!0,m=this.turn()),p){this.isGameOver.set(!0),this.playerMode()==="career"&&this.handleCareerEnd(m);return}this.playerMode()==="career"&&this.saveCareerState(),u==="b"&&(this.playerMode()==="ai"||this.playerMode()==="career")&&setTimeout(()=>this.triggerAiMove(),700)}saveCareerState(){this.supabase.saveCareerGame(this.gameMode(),this.careerLevel(),{board:this.board(),turn:this.turn(),lastMove:this.lastMove()})}async handleCareerEnd(e){if(e==="w"){let n=100+this.careerLevel()*10;await this.supabase.updateCareerProgress(this.gameMode(),this.careerLevel(),n),this.gameStatus.set(`${this.gameStatus()} +${n} PUNTI! LIVELLO SUPERATO.`)}else await this.supabase.clearSavedGame()}async triggerAiMove(){if(this.turn()==="b"){this.isAiThinking.set(!0),this.gameStatus.set("Gemini sta pensando...");try{let e=un.boardToFEN(this.board(),"b"),n=un.getAllUciMoves(this.board(),"b",this.gameMode());if(n.length===0){this.gameStatus.set("Partita finita. Nessuna mossa legale."),this.isAiThinking.set(!1);return}let r=this.playerMode()==="career"?this.careerLevel():50,i=await this.aiService.getBestMove(e,n,this.gameMode(),r);if(!i){console.warn("\u{1F916} AI: Gemini Offline/Quota Esaurita. Utilizzo Motore Locale (Minimax)..."),this.gameStatus.set("Calcolo mossa locale...");let s=r<30?2:r<70?3:4;console.log(`\u{1F916} AI local: Calcolo profondit\xE0 ${s}...`),i=un.getBestMoveLocal(this.board(),this.gameMode(),s,"b"),console.log("\u{1F916} AI local move:",i)}if((!i||!n.includes(i))&&(console.warn("Motore Locale Fallito. Fallback Random."),i=n[Math.floor(Math.random()*n.length)]),i){let s=un.uciToCoords(i.substring(0,2)),o=un.uciToCoords(i.substring(2,4));s&&o&&this.executeMove(s,o)}}catch(e){console.error("AI Critical Error",e),this.gameStatus.set("Errore IA. Tocca a te."),this.turn.set("w")}finally{this.isAiThinking.set(!1)}}}getAllLegalMoves(e){let n=[],r=this.board(),i=["a","b","c","d","e","f","g","h"];for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=r[s][o];if(a&&a.color===e){let l={row:s,col:o};un.getLegalMoves(r,l,this.gameMode()).forEach(u=>{let h=`${i[l.col]}${8-l.row}${i[u.col]}${8-u.row}`;n.push(h)})}}return n}handleAiError(e){this.gameStatus.set(`${e} Tocca a te.`),this.turn.set("w")}resetGame(){this.board.set(un.createInitialBoard(this.gameMode())),this.turn.set("w"),this.selectedPos.set(null),this.lastMove.set(null),this.gameStatus.set("Tocca al Bianco"),this.isAiThinking.set(!1),this.isGameOver.set(!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}};var rK=["canvas"];function iK(t,e){if(t&1&&Bt(0,"div",7),t&2){let n=e.$implicit;Al("left",n.x,"%")("top",n.y,"%")("width",n.size,"px")("height",n.size,"px")("animation-duration",n.duration,"s")("animation-delay",n.delay,"s")}}function sK(t,e){t&1&&(j(0,"div",6)(1,"div",8),Bt(2,"div",9),j(3,"span",10),b(4,"Caricamento Studio 3D..."),Y()()())}var Yd=class t{constructor(){this.gameService=Q(Tn);this.loading=!0;this.lightPoints=Array.from({length:20},()=>({x:Math.random()*100,y:Math.random()*100,size:3+Math.random()*8,duration:10+Math.random()*20,delay:Math.random()*10}));this.isLoadingModel=!1;this.animationId=0;this.currentlyAnimatingMove=null;this.lastAnimatedMove=null;this.customCache=new Map;this.customBoardGeometry=null;this.onResize=()=>{if(!this.three||!this.camera||!this.renderer)return;let e=this.canvasRef.nativeElement.getBoundingClientRect(),n=e.width||window.innerWidth,r=e.height||window.innerHeight;this.camera.aspect=n/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,r,!0)};Uu(()=>{let e=this.gameService.board(),n=this.gameService.validMoves(),r=this.gameService.selectedPos(),i=this.gameService.pieceStyle(),s=this.gameService.lastMove(),o=this.gameService.useOriginalTexture();if(this.three&&this.scene){let a=this.gameService.customMeshUrls();if(Object.keys(a).forEach(l=>{!this.customCache.has(l)&&l!=="board_last_loaded"&&this.loadCustomModelFromUrl(a[l],l)}),!this.isLoadingModel){let l=s&&s!==this.lastAnimatedMove;l&&(this.currentlyAnimatingMove=s,this.lastAnimatedMove=s),this.updatePieces(e,r,i,s),this.updateHighlights(n,r),l&&this.animateMove(s,i)}}})}async ngAfterViewInit(){try{await this.initThree()}catch(e){console.error("Three.js Init Error:",e)}finally{this.loading=!1}this.three&&(this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null),this.updateHighlights(this.gameService.validMoves(),this.gameService.selectedPos()))}async loadCustomModelFromUrl(e,n){if(!(!this.three||!e)&&!(this.customCache.has(n)||this.isLoadingModel)){this.isLoadingModel=!0;try{let r=e.toLowerCase().includes(".glb")||e.toLowerCase().includes(".gltf"),i=e.toLowerCase().includes(".stl"),s=null;i?s={geometry:await this.loadSTL(e),material:null}:r&&(s=await this.loadGLTF(e)),s&&s.geometry&&this.processAndCacheGeometry(s.geometry,s.material,n)}catch(r){console.error("Failed to load Model from URL:",e,r)}finally{this.isLoadingModel=!1,this.forceRedraw()}}}async loadCustomModel(e,n){if(!this.three)return;this.isLoadingModel=!0;let r=URL.createObjectURL(e),i=e.name.toLowerCase();try{let s=null;if(i.endsWith(".stl")?s={geometry:await this.loadSTL(r),material:null}:(i.endsWith(".glb")||i.endsWith(".gltf"))&&(s=await this.loadGLTF(r)),!s||!s.geometry)throw new Error("No geometry found");this.processAndCacheGeometry(s.geometry,s.material,n)}catch(s){console.error("Failed to load Model",s)}finally{r.startsWith("blob:")&&URL.revokeObjectURL(r),this.isLoadingModel=!1,this.forceRedraw()}}processAndCacheGeometry(e,n,r){e.center(),e.computeBoundingBox();let i=new this.three.Vector3;if(e.boundingBox.getSize(i),r!=="board"){i.z>i.y*1.2&&i.z>i.x?e.rotateX(-Math.PI/2):i.x>i.y*1.2&&i.x>i.z&&e.rotateZ(-Math.PI/2),e.computeBoundingBox(),e.center();let a=e.attributes.position.array,l=e.boundingBox,c=l.max.y-l.min.y,u=l.min.y+c*.2,h=l.max.y-c*.2,p=0,m=0;for(let g=0;g<a.length;g+=3){let y=a[g],_=a[g+1],w=a[g+2],A=y*y+w*w;_<u?p=Math.max(p,A):_>h&&(m=Math.max(m,A))}m>p*1.2&&(e.rotateX(Math.PI),e.center()),r.includes("n")&&(e.rotateY(-Math.PI/2),e.computeBoundingBox(),e.center())}e.computeBoundingBox();let s=e.boundingBox,o=new this.three.Vector3;if(s.getSize(o),r==="board"){let c=12/Math.max(o.x,o.z);e.scale(c,c,c),e.computeBoundingBox();let h=-.05-e.boundingBox.max.y;e.translate(0,h,0),e.computeVertexNormals(),this.customBoardGeometry=e,this.createBoard()}else{let c=.7/Math.max(o.x,o.z);e.scale(c,c,c),e.computeBoundingBox();let h=-e.boundingBox.min.y;e.translate(0,h,0),e.computeVertexNormals(),this.customCache.set(r,{geometry:e,material:n}),this.gameService.pieceStyle()==="custom"&&this.gameService.setPieceStyle("custom")}}forceRedraw(){this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null)}loadSTL(e){return new Promise((n,r)=>{this.stlLoader.load(e,i=>n(i),void 0,r)})}loadGLTF(e){return new Promise((n,r)=>{this.gltfLoader.load(e,i=>{let s=null,o=null;i.scene.traverse(a=>{!s&&a.isMesh&&(s=a.geometry.clone(),a.material&&(o=a.material.clone()))}),s?n({geometry:s,material:o}):r("No mesh found in GLTF")},void 0,r)})}ngOnDestroy(){cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onResize),this.renderer&&this.renderer.dispose()}async initThree(){let e=await import("./chunk-H73ONTST.js");this.three=e;let{OrbitControls:n}=await import("./chunk-STDGT6VI.js"),{STLLoader:r}=await import("./chunk-5MPC2VOI.js"),{GLTFLoader:i}=await import("./chunk-D5GDW5BX.js");this.stlLoader=new r,this.gltfLoader=new i;let s=this.canvasRef.nativeElement.getBoundingClientRect(),o=s.width,a=s.height;(o===0||a===0)&&(o=window.innerWidth,a=window.innerHeight,console.warn("Canvas dimensions are 0, falling back to window size:",o,a)),this.scene=new this.three.Scene,this.scene.background=null,this.camera=new this.three.PerspectiveCamera(45,o/a,.1,100),this.camera.position.set(0,12,12),this.camera.lookAt(0,0,0),this.renderer=new this.three.WebGLRenderer({canvas:this.canvasRef.nativeElement,antialias:!0,alpha:!0,powerPreference:"high-performance"}),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(o,a,!0),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.three.PCFSoftShadowMap,this.renderer.toneMapping=this.three.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1.35,this.controls=new n(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.maxPolarAngle=Math.PI/2.1,this.controls.minDistance=4,this.controls.maxDistance=20;let l=new this.three.HemisphereLight(16777215,4473924,.6);this.scene.add(l);let c=new this.three.DirectionalLight(16773341,2.8);c.position.set(5,12,5),c.castShadow=!0,c.shadow.mapSize.width=4096,c.shadow.mapSize.height=4096,c.shadow.camera.near=.1,c.shadow.camera.far=50,c.shadow.bias=-5e-4;let u=8;c.shadow.camera.left=-u,c.shadow.camera.right=u,c.shadow.camera.top=u,c.shadow.camera.bottom=-u,this.scene.add(c);let h=new this.three.DirectionalLight(14412542,1.5);h.position.set(-5,6,-5),this.scene.add(h);let p=new this.three.SpotLight(6333946,3);p.position.set(0,5,-8),p.lookAt(0,0,0),this.scene.add(p),this.boardGroup=new this.three.Group,this.scene.add(this.boardGroup),this.createBoard(),this.piecesGroup=new this.three.Group,this.scene.add(this.piecesGroup),this.highlightsGroup=new this.three.Group,this.scene.add(this.highlightsGroup),this.animGroup=new this.three.Group,this.scene.add(this.animGroup),this.raycaster=new this.three.Raycaster,this.mouse=new this.three.Vector2,this.canvasRef.nativeElement.addEventListener("click",g=>this.onCanvasClick(g));let m=()=>{this.animationId=requestAnimationFrame(m),this.controls&&this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)};m(),window.addEventListener("resize",this.onResize)}animateMove(e,n){if(!this.three)return;if(this.isLoadingModel){this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null);return}this.animGroup.clear(),this.currentlyAnimatingMove=e;let r=e.from.col-3.5,i=e.from.row-3.5,s=e.to.col-3.5,o=e.to.row-3.5,a=this.createPieceMesh(e.piece,!1,n);a.position.set(r,.1,i),a.userData&&(a.userData={}),a.children&&a.children.forEach(L=>L.userData={}),this.animGroup.add(a);let l=null;e.capturedPiece&&e.capturedPos&&(l=this.createPieceMesh(e.capturedPiece,!1,n),l.position.set(e.capturedPos.col-3.5,.1,e.capturedPos.row-3.5),l.userData&&(l.userData={}),l.children&&l.children.forEach(L=>L.userData={}),this.animGroup.add(l));let c=performance.now(),u=650,h=e.piece.type==="n",p=!!e.capturedPiece,m=h||p||e.isJump,g=m?2.5:.6,y=s-r,_=o-i,w=Math.sqrt(y*y+_*_),A=Math.atan2(y,_),k=e.piece.type==="n"?e.piece.color==="w"?0:Math.PI:0,T=L=>{let R=L-c,$=Math.min(R/u,1),K=this.easeInOutCubic($),ie=r+(s-r)*K,le=i+(o-i)*K,nt=.1+4*g*K*(1-K);if(a.position.set(ie,nt,le),w>.2){a.rotation.set(0,0,0),a.rotateY(k);let gt=(1-2*K)*.35,xt=Math.cos(A),qi=-Math.sin(A),of=new this.three.Vector3(xt,0,qi);m&&a.rotateOnWorldAxis(of,gt);let pr=Math.sin(K*Math.PI*2)*.15,ec=new this.three.Vector3(Math.sin(A),0,Math.cos(A));a.rotateOnWorldAxis(ec,pr)}if(l&&K>.7){let $t=(K-.7)/.3,gt=Math.max(0,1-$t);l.scale.setScalar(gt),l.rotation.y+=.25}$<1?requestAnimationFrame(T):(this.animGroup.clear(),this.currentlyAnimatingMove=null,this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null))};requestAnimationFrame(T)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}createPieceMesh(e,n,r){let i;return e.type==="cm"||e.type==="ck"?i=this.createCheckersPiece(e,n,r):r==="classic"?i=this.createClassicPiece(e,n):r==="neon"?i=this.createNeonPiece(e,n):r==="custom"?i=this.createCustomPiece(e,n):i=this.createMinimalPiece(e,n),i}createPieceMaterial(e,n){return new this.three.MeshPhysicalMaterial({color:e,roughness:.2,metalness:.1,clearcoat:1,clearcoatRoughness:.1,emissive:n?16766720:0,emissiveIntensity:n?.4:0})}createBoard(){if(!(!this.three||!this.boardGroup))if(this.boardGroup.clear(),this.customBoardGeometry){let e=new this.three.MeshStandardMaterial({color:8947848,roughness:.4,metalness:.3}),n=new this.three.Mesh(this.customBoardGeometry,e);n.receiveShadow=!0,n.castShadow=!0,this.boardGroup.add(n);let r=new this.three.BoxGeometry(1,.2,1),i=new this.three.MeshBasicMaterial({visible:!1});for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=new this.three.Mesh(r,i);a.position.set(s-3.5,0,o-3.5),a.userData={isSquare:!0,row:o,col:s},this.boardGroup.add(a)}}else{let e=new this.three.BoxGeometry(1,.2,1),n=new this.three.MeshPhysicalMaterial({color:3359061,roughness:.4,metalness:.1,clearcoat:.2}),r=new this.three.MeshPhysicalMaterial({color:15857145,roughness:.4,metalness:.1,clearcoat:.2});for(let a=0;a<8;a++)for(let l=0;l<8;l++){let c=(a+l)%2===0,u=new this.three.Mesh(e,c?r:n);u.position.set(a-3.5,0,l-3.5),u.receiveShadow=!0,u.userData={isSquare:!0,row:l,col:a},this.boardGroup.add(u)}let i=new this.three.BoxGeometry(8.6,.3,8.6),s=new this.three.MeshStandardMaterial({color:988970,roughness:.6}),o=new this.three.Mesh(i,s);o.position.y=-.15,o.receiveShadow=!0,this.boardGroup.add(o)}}updatePieces(e,n,r,i){this.three&&(this.piecesGroup.clear(),e.forEach((s,o)=>{s.forEach((a,l)=>{if(a){let c=!0;if(this.currentlyAnimatingMove&&this.currentlyAnimatingMove.to.row===o&&this.currentlyAnimatingMove.to.col===l&&(c=!1),c){let u=n&&n.row===o&&n.col===l,h=this.createPieceMesh(a,u,r);h.position.set(l-3.5,.1,o-3.5),h.type==="Group"?h.children.forEach(p=>{p.userData={isPiece:!0,row:o,col:l}}):h.userData={isPiece:!0,row:o,col:l},this.piecesGroup.add(h)}}})}))}createCustomPiece(e,n){let r=`${e.type}_${e.color}`,i=this.customCache.get(r);if(i||(i=this.customCache.get(e.type)),i){let s;if(this.gameService.useOriginalTexture()&&i.material)s=i.material,n&&s.emissive&&(s=s.clone(),s.emissive.setHex(16766720),s.emissiveIntensity=.4);else{let a=e.color==="w"?16777215:2894892;s=this.createPieceMaterial(a,n)}let o=new this.three.Mesh(i.geometry,s);return o.castShadow=!0,o.receiveShadow=!0,e.type==="n"&&(o.rotation.y=e.color==="w"?0:Math.PI),o}else return e.type==="cm"||e.type==="ck"?this.createCheckersPiece(e,n,"minimal"):this.createMinimalPiece(e,n)}createCheckersPiece(e,n,r){let i=e.color==="w"?16643811:2894892,s=this.createPieceMaterial(i,n),o=new this.three.Group,a=new this.three.CylinderGeometry(.35,.35,.15,32);a.translate(0,.075,0);let l=new this.three.Mesh(a,s);if(l.castShadow=!0,l.receiveShadow=!0,o.add(l),e.type==="ck"){let c=new this.three.CylinderGeometry(.35,.35,.15,32);c.translate(0,.225,0);let u=new this.three.Mesh(c,s);u.castShadow=!0,u.receiveShadow=!0,o.add(u);let h=new this.three.Mesh(new this.three.TorusGeometry(.2,.02,16,32),new this.three.MeshBasicMaterial({color:16766720}));h.rotation.x=Math.PI/2,h.position.y=.31,o.add(h)}else{let c=new this.three.CylinderGeometry(.25,.25,.16,32);c.translate(0,.075,0);let u=new this.three.Mesh(c,s);o.add(u)}return o}createMinimalPiece(e,n){let r=e.color==="w"?16777215:3359061,i=this.createPieceMaterial(r,n),s;switch(e.type){case"p":s=new this.three.CylinderGeometry(.25,.25,.6,32);break;case"r":s=new this.three.BoxGeometry(.55,.8,.55);break;case"n":s=new this.three.CylinderGeometry(.3,.4,.9,4);break;case"b":s=new this.three.ConeGeometry(.3,1,32);break;case"q":s=new this.three.CylinderGeometry(.35,.2,1.4,32);break;case"k":s=new this.three.CylinderGeometry(.4,.3,1.6,8);break;default:s=new this.three.SphereGeometry(.3)}s.translate(0,.3,0);let o=new this.three.Mesh(s,i);return o.castShadow=!0,o.receiveShadow=!0,o}createNeonPiece(e,n){let r=e.color==="w"?65535:16711935,i=new this.three.MeshBasicMaterial({color:n?16776960:r,wireframe:!0}),s;switch(e.type){case"p":s=new this.three.OctahedronGeometry(.3);break;case"r":s=new this.three.BoxGeometry(.5,.8,.5);break;case"n":s=new this.three.IcosahedronGeometry(.4);break;case"b":s=new this.three.ConeGeometry(.3,1.1,4);break;case"q":s=new this.three.TorusKnotGeometry(.25,.1,64,8);break;case"k":s=new this.three.CylinderGeometry(.4,0,1.5,4);break;default:s=new this.three.SphereGeometry(.3)}return s.translate(0,.4,0),new this.three.Mesh(s,i)}createClassicPiece(e,n){let r=e.color==="w"?16643811:2894892,i=this.createPieceMaterial(r,n),s=new this.three.Group,o=new this.three.CylinderGeometry(.38,.42,.15,32);o.translate(0,.075,0);let a=new this.three.Mesh(o,i);if(s.add(a),e.type==="p"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.15,.35,.4,32),i);l.position.y=.35;let c=new this.three.Mesh(new this.three.CylinderGeometry(.12,.15,.3,32),i);c.position.y=.65;let u=new this.three.Mesh(new this.three.CylinderGeometry(.2,.2,.05,32),i);u.position.y=.8;let h=new this.three.Mesh(new this.three.SphereGeometry(.2,32,16),i);h.position.y=.95,s.add(l,c,u,h)}else if(e.type==="r"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.25,.3,.6,32),i);l.position.y=.4;let c=new this.three.Mesh(new this.three.CylinderGeometry(.32,.32,.25,32),i);c.position.y=.8,s.add(l,c)}else if(e.type==="n"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.2,.3,.5,32),i);l.position.y=.35;let c=new this.three.BoxGeometry(.25,.45,.55);c.translate(0,.2,.1);let u=new this.three.Mesh(c,i);u.position.y=.55,u.rotation.x=-.2,s.add(l,u),s.rotation.y=e.color==="w"?Math.PI:0}else if(e.type==="b"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.1,.25,.8,32),i);l.position.y=.5;let c=new this.three.Mesh(new this.three.CylinderGeometry(.2,.2,.05,32),i);c.position.y=.85;let u=new this.three.Mesh(new this.three.SphereGeometry(.15),i);u.position.y=1,s.add(l,c,u)}else if(e.type==="q"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.15,.3,1,32),i);l.position.y=.6;let c=new this.three.Mesh(new this.three.SphereGeometry(.25),i);c.position.y=1.15;let u=new this.three.Mesh(new this.three.SphereGeometry(.1),i);u.position.y=1.4,s.add(l,c,u)}else if(e.type==="k"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.2,.3,1.1,32),i);l.position.y=.65;let c=new this.three.BoxGeometry(.1,.3,.1),u=new this.three.BoxGeometry(.25,.1,.1),h=new this.three.Mesh(c,i),p=new this.three.Mesh(u,i);h.position.y=1.35,p.position.y=1.35,s.add(l,h,p)}return s.traverse(l=>{l.isMesh&&(l.castShadow=!0,l.receiveShadow=!0)}),s}updateHighlights(e,n){if(!this.three)return;if(this.highlightsGroup.clear(),n){let c=new this.three.RingGeometry(.67,.72,4,1);c.rotateX(-Math.PI/2),c.rotateY(Math.PI/4);let u=new this.three.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1,side:this.three.DoubleSide}),h=new this.three.Mesh(c,u);h.position.set(n.col-3.5,.112,n.row-3.5),this.highlightsGroup.add(h);let p=new this.three.RingGeometry(.65,.75,4,1);p.rotateX(-Math.PI/2),p.rotateY(Math.PI/4);let m=new this.three.MeshBasicMaterial({color:62207,transparent:!0,opacity:.3}),g=new this.three.Mesh(p,m);g.position.set(n.col-3.5,.11,n.row-3.5),this.highlightsGroup.add(g);let y=new this.three.PlaneGeometry(.96,.96);y.rotateX(-Math.PI/2);let _=new this.three.MeshBasicMaterial({color:62207,transparent:!0,opacity:.2}),w=new this.three.Mesh(y,_);w.position.set(n.col-3.5,.105,n.row-3.5),this.highlightsGroup.add(w)}let r=new this.three.RingGeometry(.66,.71,4,1);r.rotateX(-Math.PI/2),r.rotateY(Math.PI/4);let i=new this.three.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1,side:this.three.DoubleSide}),s=new this.three.RingGeometry(.64,.73,4,1);s.rotateX(-Math.PI/2),s.rotateY(Math.PI/4);let o=new this.three.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.25}),a=new this.three.PlaneGeometry(1.15,1.15);a.rotateX(-Math.PI/2);let l=new this.three.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.1});e.forEach(c=>{let u=new this.three.Mesh(r,i);u.position.set(c.col-3.5,.112,c.row-3.5),this.highlightsGroup.add(u);let h=new this.three.Mesh(s,o);h.position.set(c.col-3.5,.11,c.row-3.5),this.highlightsGroup.add(h);let p=new this.three.Mesh(a,l);p.position.set(c.col-3.5,.108,c.row-3.5),this.highlightsGroup.add(p)})}onCanvasClick(e){if(!this.camera||!this.scene||!this.three||this.currentlyAnimatingMove)return;let n=this.canvasRef.nativeElement.getBoundingClientRect();this.mouse.x=(e.clientX-n.left)/n.width*2-1,this.mouse.y=-((e.clientY-n.top)/n.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let r=this.raycaster.intersectObjects(this.scene.children,!0);for(let i of r){let s=i.object.userData;if(s&&(s.isSquare||s.isPiece)){this.gameService.selectSquare({row:s.row,col:s.col});break}}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-chess-scene"]],viewQuery:function(n,r){if(n&1&&Il(rK,5),n&2){let i;od(i=ad())&&(r.canvasRef=i.first)}},hostAttrs:[1,"block","w-full","h-full",2,"display","block","width","100%","height","100%"],decls:8,vars:1,consts:[["canvas",""],[1,"relative","w-full","h-full",2,"width","100%","height","100%","min-height","200px"],[1,"absolute","inset-0","bg-gradient-to-br","from-slate-950","via-indigo-950","to-slate-900","overflow-hidden"],[1,"absolute","inset-0","bg-radial-gradient","opacity-20"],[1,"light-point",3,"left","top","width","height","animation-duration","animation-delay"],[1,"block","w-full","h-full","outline-none","relative","z-10",2,"display","block","width","100%","height","100%"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-[#0f172a]","text-blue-200","font-mono","z-30",2,"position","absolute","inset","0","background","#0f172a","z-index","30","display","flex","align-items","center"],[1,"light-point"],[1,"flex","flex-col","items-center","gap-4"],[1,"w-12","h-12","border-4","border-blue-500","border-t-transparent","rounded-full","animate-spin",2,"width","48px","height","48px","border","4px solid rgba(59,130,246,0.3)","border-top-color","#3b82f6","border-radius","50%"],[2,"margin-top","10px"]],template:function(n,r){n&1&&(j(0,"div",1)(1,"div",2),Bt(2,"div",3),ft(3,iK,1,12,"div",4,id),Y(),Bt(5,"canvas",5,0),de(7,sK,5,0,"div",6),Y()),n&2&&(M(3),ht(r.lightPoints),M(4),fe(r.loading?7:-1))},styles:[".light-point[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(139,92,246,.8) 0%,rgba(99,102,241,.4) 40%,transparent 70%);filter:blur(3px);animation:_ngcontent-%COMP%_float-light linear infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_float-light{0%,to{transform:translate(0) scale(1);opacity:.3}25%{transform:translate(15px,-25px) scale(1.2);opacity:.7}50%{transform:translate(-10px,-50px) scale(.8);opacity:.2}75%{transform:translate(-20px,-25px) scale(1.1);opacity:.6}}.bg-radial-gradient[_ngcontent-%COMP%]{background:radial-gradient(ellipse at 50% 50%,rgba(99,102,241,.1) 0%,transparent 60%);animation:_ngcontent-%COMP%_pulse-radial 8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-radial{0%,to{opacity:.2}50%{opacity:.4}}"]})}};var GN=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(De(zo),De(Pr))};static \u0275dir=dt({type:t})}return t})(),nf=(()=>{class t extends GN{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,features:[cn]})}return t})(),Xl=new Ce(""),oK={provide:Xl,useExisting:_n(()=>IS),multi:!0},IS=(()=>{class t extends nf{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&H("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Fr([oK]),cn]})}return t})(),aK={provide:Xl,useExisting:_n(()=>Zl),multi:!0};function lK(){let t=Ds()?Ds().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var cK=new Ce(""),Zl=(()=>{class t extends GN{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!lK())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(De(zo),De(Pr),De(cK,8))};static \u0275dir=dt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&H("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Fr([aK]),cn]})}return t})();function uK(t){return t==null||dK(t)===0}function dK(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var av=new Ce(""),qN=new Ce("");function fK(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function hK(t){return uK(t.value)?{required:!0}:null}function PN(t){return null}function jN(t){return t!=null}function WN(t){return bl(t)?cw(t):t}function zN(t){let e={};return t.forEach(n=>{e=n!=null?D(D({},e),n):e}),Object.keys(e).length===0?null:e}function JN(t,e){return e.map(n=>n(t))}function pK(t){return!t.validate}function YN(t){return t.map(e=>pK(e)?e:n=>e.validate(n))}function mK(t){if(!t)return null;let e=t.filter(jN);return e.length==0?null:function(n){return zN(JN(n,e))}}function AS(t){return t!=null?mK(YN(t)):null}function gK(t){if(!t)return null;let e=t.filter(jN);return e.length==0?null:function(n){let r=JN(n,e).map(WN);return uw(r).pipe(bo(zN))}}function DS(t){return t!=null?gK(YN(t)):null}function LN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function vK(t){return t._rawValidators}function yK(t){return t._rawAsyncValidators}function xS(t){return t?Array.isArray(t)?t:[t]:[]}function ev(t,e){return Array.isArray(t)?t.includes(e):t===e}function ON(t,e){let n=xS(e);return xS(t).forEach(i=>{ev(n,i)||n.push(i)}),n}function FN(t,e){return xS(e).filter(n=>!ev(t,n))}var tv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control?.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ql=class extends tv{name;get formDirective(){return null}get path(){return null}},tf=class extends tv{_parent=null;name=null;valueAccessor=null},nv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var lv=(()=>{class t extends nv{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(De(tf,2))};static \u0275dir=dt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[cn]})}return t})(),KN=(()=>{class t extends nv{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(De(Ql,10))};static \u0275dir=dt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ze("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[cn]})}return t})();var Kd="VALID",Zg="INVALID",Yl="PENDING",Qd="DISABLED",Fs=class{},rv=class extends Fs{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Zd=class extends Fs{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},ef=class extends Fs{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Kl=class extends Fs{status;source;constructor(e,n){super(),this.status=e,this.source=n}},TS=class extends Fs{source;constructor(e){super(),this.source=e}},iv=class extends Fs{source;constructor(e){super(),this.source=e}};function QN(t){return(cv(t)?t.validators:t)||null}function wK(t){return Array.isArray(t)?AS(t):t||null}function XN(t,e){return(cv(e)?e.asyncValidators:t)||null}function _K(t){return Array.isArray(t)?DS(t):t||null}function cv(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function EK(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[n])throw new ue(1001,"")}function CK(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ue(1002,"")})}var sv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dr(this.statusReactive)}set status(e){Dr(()=>this.statusReactive.set(e))}_status=Oi(()=>this.statusReactive());statusReactive=Ge(void 0);get valid(){return this.status===Kd}get invalid(){return this.status===Zg}get pending(){return this.status==Yl}get disabled(){return this.status===Qd}get enabled(){return this.status!==Qd}errors;get pristine(){return Dr(this.pristineReactive)}set pristine(e){Dr(()=>this.pristineReactive.set(e))}_pristine=Oi(()=>this.pristineReactive());pristineReactive=Ge(!0);get dirty(){return!this.pristine}get touched(){return Dr(this.touchedReactive)}set touched(e){Dr(()=>this.touchedReactive.set(e))}_touched=Oi(()=>this.touchedReactive());touchedReactive=Ge(!1);get untouched(){return!this.touched}_events=new Sr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ON(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ON(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FN(e,this._rawAsyncValidators))}hasValidator(e){return ev(this._rawValidators,e)}hasAsyncValidator(e){return ev(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsTouched(ne(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ef(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),e.onlySelf||this._parent?._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ef(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsDirty(ne(D({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Zd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),e.onlySelf||this._parent?._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Zd(!0,r))}markAsPending(e={}){this.status=Yl;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kl(this.status,n)),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.markAsPending(ne(D({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qd,this.errors=null,this._forEachChild(i=>{i.disable(ne(D({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rv(this.value,r)),this._events.next(new Kl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this._forEachChild(r=>{r.enable(ne(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(D({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){e.onlySelf||(this._parent?.updateValueAndValidity(e),e.skipPristineCheck||this._parent?._updatePristine({},n),this._parent?._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kd||this.status===Yl)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rv(this.value,n)),this._events.next(new Kl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.updateValueAndValidity(ne(D({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qd:Kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Yl,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=WN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r?.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Kl(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?Qd:this.errors?Zg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yl)?Yl:this._anyControlsHaveStatus(Zg)?Zg:Kd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,e.onlySelf||this._parent?._updatePristine(e,n),i&&this._events.next(new Zd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ef(this.touched,n)),e.onlySelf||this._parent?._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!!this._parent?.dirty&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=wK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_K(this._rawAsyncValidators)}},ov=class extends sv{constructor(e,n,r){super(QN(n),XN(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){CK(this,!0,e),Object.keys(e).forEach(r=>{EK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ne(D({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new iv(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var kS=new Ce("",{factory:()=>MS}),MS="always";function SK(t,e){return[...e.path,t]}function ZN(t,e,n=MS){e2(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),xK(t,e),IK(t,e),TK(t,e),bK(t,e)}function VN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bK(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function e2(t,e){let n=vK(t);e.validator!==null?t.setValidators(LN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=yK(t);e.asyncValidator!==null?t.setAsyncValidators(LN(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();VN(e._rawValidators,i),VN(e._rawAsyncValidators,i)}function xK(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&t2(t,e)})}function TK(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&t2(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function t2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function IK(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function AK(t,e){t==null,e2(t,e)}function DK(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function kK(t){return Object.getPrototypeOf(t.constructor)===nf}function MK(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function NK(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Zl?n=s:kK(s)?r=s:i=s}),i||r||n||null}var RK={provide:Ql,useExisting:_n(()=>NS)},Xd=Promise.resolve(),NS=(()=>{class t extends Ql{callSetDisabledState;get submitted(){return Dr(this.submittedReactive)}_submitted=Oi(()=>this.submittedReactive());submittedReactive=Ge(!1);_directives=new Set;form;ngSubmit=new Wt;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new ov({},AS(n),DS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Xd.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),ZN(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Xd.then(()=>{this._findContainer(n.path)?.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Xd.then(()=>{let r=this._findContainer(n.path),i=new ov({});AK(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Xd.then(()=>{this._findContainer(n.path)?.removeControl?.(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Xd.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),MK(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new TS(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(De(av,10),De(qN,10),De(kS,8))};static \u0275dir=dt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&H("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Fr([RK]),cn]})}return t})();function BN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var PK=class extends sv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(QN(n),XN(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(UN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new iv(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){UN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LK={provide:tf,useExisting:_n(()=>rf)},$N=Promise.resolve(),rf=(()=>{class t extends tf{_changeDetectorRef;callSetDisabledState;control=new PK;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Wt;constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=NK(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),DK(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective?.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ZN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){$N.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ME(r);$N.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?SK(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(De(Ql,9),De(av,10),De(qN,10),De(Xl,10),De(Nm,8),De(kS,8))};static \u0275dir=dt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Fr([LK]),cn,Zu]})}return t})();var n2=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=dt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),OK={provide:Xl,useExisting:_n(()=>RS),multi:!0},RS=(()=>{class t extends nf{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&H("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Fr([OK]),cn]})}return t})();var FK={provide:Xl,useExisting:_n(()=>uv),multi:!0};function r2(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function VK(t){return t.split(":")[0]}var uv=(()=>{class t extends nf{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=Q(xl).injector;destroyRef=Q(Is);cdr=Q(Nm);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,cE({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=r2(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=VK(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&H("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Fr([FK]),cn]})}return t})(),i2=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(r2(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select?._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select?._optionMap.delete(this.id),this._select?._writeValueAfterRender()}static \u0275fac=function(r){return new(r||t)(De(Pr),De(zo),De(uv,9))};static \u0275dir=dt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),BK={provide:Xl,useExisting:_n(()=>s2),multi:!0};function HN(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function UK(t){return t.split(":")[0]}var s2=(()=>{class t extends nf{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);i.push(c)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=UK(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&H("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Fr([BK]),cn]})}return t})(),o2=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(HN(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(HN(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(De(Pr),De(zo),De(s2,9))};static \u0275dir=dt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function $K(t){return typeof t=="number"?t:parseFloat(t)}var a2=(()=>{class t{_validator=PN;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):PN,this._onChange?.()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=dt({type:t,features:[Zu]})}return t})();var HK={provide:av,useExisting:_n(()=>PS),multi:!0},PS=(()=>{class t extends a2{min;inputName="min";normalizeInput=n=>$K(n);createValidator=n=>fK(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&rd("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Fr([HK]),cn]})}return t})(),GK={provide:av,useExisting:_n(()=>LS),multi:!0};var LS=(()=>{class t extends a2{required;inputName="required";normalizeInput=ME;createValidator=n=>hK;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pi(t)))(i||t)}})();static \u0275dir=dt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&rd("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Fr([GK]),cn]})}return t})();var qK=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=_s({})}return t})();var dv=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:kS,useValue:n.callSetDisabledState??MS}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Jo({type:t});static \u0275inj=_s({imports:[qK]})}return t})();var fv=class t{static processAvatarImage(e){return new Promise((n,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target?.result,o.onload=()=>{let a=document.createElement("canvas"),l=a.getContext("2d");if(!l){r(new Error("Canvas context failed"));return}let c=256,u=Math.min(o.width,o.height),h=(o.width-u)/2,p=(o.height-u)/2;a.width=c,a.height=c,l.drawImage(o,h,p,u,u,0,0,c,c);let m=a.toDataURL("image/jpeg",.7);n(m)},o.onerror=a=>r(a)},i.onerror=s=>r(s)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}};var sf=(t,e)=>e.id;function jK(t,e){if(t&1&&he(0,"div",71),t&2){let n=e.$implicit;Al("width",n.size,"px")("height",n.size,"px")("left",n.x,"%")("top",n.y,"%")("animation-duration",n.duration+"s")("animation-delay",n.delay+"s")("background",n.color)}}function WK(t,e){if(t&1&&(E(0,"div",11),he(1,"img",72),S()),t&2){let n=O();M(),Lr("src",n.supabase.avatarUrl(),Sl)}}function zK(t,e){t&1&&(E(0,"div",12),Je(),E(1,"svg",73)(2,"defs")(3,"linearGradient",74),he(4,"stop",75)(5,"stop",76)(6,"stop",77),S()(),he(7,"path",78),S()())}function JK(t,e){if(t&1){let n=Re();E(0,"div",98)(1,"label",94),b(2,"Email (Recupero Account)"),S(),E(3,"div",39)(4,"div",95)(5,"span",96),b(6,"\u{1F4E7}"),S()(),E(7,"input",114),lr("ngModelChange",function(i){G(n);let s=O(2);return Or(s.authEmail,i)||(s.authEmail=i),q(i)}),S()()()}if(t&2){let n=O(2);M(7),ar("ngModel",n.authEmail)}}function YK(t,e){if(t&1){let n=Re();E(0,"button",115),H("click",function(){G(n);let i=O(2);return q(i.authError="Contatta amministrazione per reset password")}),b(1,"Dimenticata?"),S()}}function KK(t,e){if(t&1&&(E(0,"div",104)(1,"span",116),b(2,"\u26A0\uFE0F"),S(),E(3,"p",117),b(4),S()()),t&2){let n=O(2);M(4),Be(n.authError)}}function QK(t,e){if(t&1&&(E(0,"div",105)(1,"span",118),b(2,"\u2705"),S(),E(3,"p",119),b(4),S()()),t&2){let n=O(2);M(4),Be(n.authSuccess)}}function XK(t,e){t&1&&(E(0,"span",108),b(1,"\u2192"),S())}function ZK(t,e){if(t&1){let n=Re();E(0,"button",120),H("click",function(){G(n);let i=O(2);return q(i.openAdminLogin())}),b(1," Porta Amministratore "),S()}}function eQ(t,e){if(t&1){let n=Re();E(0,"div",79),H("click",function(){G(n);let i=O();return q(i.showAuth=!1)}),he(1,"div",80),E(2,"div",81),H("click",function(i){return G(n),q(i.stopPropagation())}),he(3,"div",82)(4,"div",83)(5,"div",84),E(6,"div",85)(7,"div",86)(8,"div",87),he(9,"div",88),E(10,"span",89),b(11),S()(),E(12,"h2",90),b(13),S(),E(14,"p",91),b(15),S()(),E(16,"form",92),H("submit",function(i){G(n);let s=O();return q(s.handleAuth(i))}),E(17,"div",93)(18,"label",94),b(19,"Nickname / Nome Utente"),S(),E(20,"div",39)(21,"div",95)(22,"span",96),b(23,"\u{1F464}"),S()(),E(24,"input",97),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.authNickname,i)||(s.authNickname=i),q(i)}),S()()(),de(25,JK,8,1,"div",98),E(26,"div",99)(27,"div",100)(28,"label",101),b(29,"Chiave d'Accesso"),S(),de(30,YK,2,0,"button",102),S(),E(31,"div",39)(32,"div",95)(33,"span",96),b(34,"\u{1F511}"),S()(),E(35,"input",103),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.authPassword,i)||(s.authPassword=i),q(i)}),S()()(),de(36,KK,5,1,"div",104),de(37,QK,5,1,"div",105),E(38,"button",106)(39,"span",107),b(40),S(),de(41,XK,2,0,"span",108),S()(),E(42,"div",109)(43,"button",110),H("click",function(){G(n);let i=O();return q(i.toggleAuthMode())}),b(44),E(45,"span",111),b(46),S()(),de(47,ZK,2,0,"button",112),S(),E(48,"button",113),H("click",function(){G(n);let i=O();return q(i.showAuth=!1)}),b(49," \u2715 "),S()()()()}if(t&2){let n=O();M(11),Te(" ",n.authMode==="admin"?"\u{1F6E1}\uFE0F":n.authMode==="login"?"\u{1F451}":"\u2728"," "),M(2),Te(" ",n.authMode==="admin"?"Admin Access":n.authMode==="login"?"Bentornato":"Inizia Ora"," "),M(2),Te(" ",n.authMode==="admin"?"Portate di comando riservate":n.authMode==="login"?"Il tuo regno ti attende, Maest\xE0":"Unisciti alla battaglia per il trono"," "),M(9),ar("ngModel",n.authNickname),M(),fe(n.authMode==="register"?25:-1),M(5),fe(n.authMode==="login"?30:-1),M(5),ar("ngModel",n.authPassword),M(),fe(n.authError?36:-1),M(),fe(n.authSuccess?37:-1),M(),Lr("disabled",n.loadingAuth),M(2),Te(" ",n.loadingAuth?"Configurazione...":n.authMode==="admin"?"Entra in Plancia":n.authMode==="login"?"Verifica Identit\xE0":"Crea Profilo"," "),M(),fe(n.loadingAuth?-1:41),M(3),Te(" ",n.authMode==="login"?"Sei un nuovo aspirante? ":"Hai gi\xE0 un trono? "," "),M(2),Te(" ",n.authMode==="login"?"Arruolati":"Riedifica"," "),M(),fe(n.authMode!=="admin"?47:-1)}}function tQ(t,e){if(t&1&&(E(0,"div",129),he(1,"img",173),S()),t&2){let n=O(2);M(),Lr("src",n.supabase.avatarUrl(),Sl)}}function nQ(t,e){t&1&&(E(0,"div",130),Je(),E(1,"svg",174)(2,"defs")(3,"linearGradient",175),he(4,"stop",176)(5,"stop",177)(6,"stop",77),S()(),he(7,"path",178),S()())}function rQ(t,e){if(t&1){let n=Re();E(0,"input",179),lr("ngModelChange",function(i){G(n);let s=O(2);return Or(s.tempNickname,i)||(s.tempNickname=i),q(i)}),H("blur",function(){G(n);let i=O(2);return q(i.saveNickname())})("keydown.enter",function(){G(n);let i=O(2);return q(i.saveNickname())}),S(),E(1,"p",180),b(2,"Premi Invio per salvare"),S()}if(t&2){let n=O(2);ar("ngModel",n.tempNickname)}}function iQ(t,e){if(t&1){let n=Re();E(0,"h2",181),H("dblclick",function(){G(n);let i=O(2);return q(i.startEditingName())}),b(1),S()}if(t&2){let n=O(2);M(),Te(" ",n.supabase.username()||"GIOCATORE 1"," ")}}function sQ(t,e){if(t&1&&(E(0,"span",138),b(1),S()),t&2){let n,r=O(2);M(),Be((n=r.supabase.user())==null?null:n.email)}}function oQ(t,e){if(t&1&&(E(0,"div",182)(1,"span",165),b(2),S(),E(3,"div",183)(4,"p",184),b(5),S(),E(6,"p",185),b(7),S()()()),t&2){let n=e.$implicit;M(2),Be(n.icon),M(3),Be(n.name),M(2),Be(n.date)}}function aQ(t,e){if(t&1&&ft(0,oQ,8,3,"div",182,sf),t&2){let n=O(2);ht(n.userStats.achievements)}}function lQ(t,e){t&1&&(E(0,"div",162)(1,"span",186),b(2,"\u{1F3C6}"),S(),E(3,"p",187),b(4,"Nessun premio ancora conquistato"),S()())}function cQ(t,e){if(t&1&&(E(0,"div",188)(1,"div")(2,"p",184),b(3),S(),E(4,"p",185),b(5),S()(),E(6,"p",189),b(7),S()()),t&2){let n=e.$implicit;M(3),Be(n.name),M(2),Be(n.date),M(2),Te("\u20AC",n.price)}}function uQ(t,e){if(t&1&&ft(0,cQ,8,3,"div",188,sf),t&2){let n=O(2);ht(n.userStats.purchases)}}function dQ(t,e){t&1&&(E(0,"div",162)(1,"span",186),b(2,"\u{1F4B3}"),S(),E(3,"p",187),b(4,"Nessun acquisto effettuato"),S()())}function fQ(t,e){if(t&1&&(E(0,"div",190)(1,"div")(2,"p",191),b(3),S(),E(4,"p",192),b(5),S()(),E(6,"span",193),b(7,"GRATIS"),S()()),t&2){let n=e.$implicit;M(3),Be(n.name),M(2),Be(n.date)}}function hQ(t,e){if(t&1&&ft(0,fQ,8,2,"div",190,sf),t&2){let n=O(2);ht(n.userStats.downloads)}}function pQ(t,e){t&1&&(E(0,"div",167)(1,"span",194),b(2,"\u{1F4E6}"),S(),E(3,"p",195),b(4,"Nessun download ancora effettuato"),S()())}function mQ(t,e){if(t&1){let n=Re();E(0,"div",121),H("click",function(){G(n);let i=O();return q(i.showAccountManager=!1)}),E(1,"div",122),H("click",function(i){return G(n),q(i.stopPropagation())}),E(2,"button",123),H("click",function(){G(n);let i=O();return q(i.showAccountManager=!1)}),b(3," \u2715 "),S(),E(4,"div",124)(5,"div",125)(6,"div",126)(7,"div",127),he(8,"div",128),de(9,tQ,2,1,"div",129)(10,nQ,8,0,"div",130),S(),E(11,"label",131)(12,"span",132),b(13,"\u{1F4F7}"),S(),E(14,"input",133),H("change",function(i){G(n);let s=O();return q(s.onProfilePhotoSelected(i))}),S()()(),E(15,"div",134)(16,"div",135),de(17,rQ,3,1)(18,iQ,2,1,"h2",136),S(),E(19,"div",137),de(20,sQ,2,1,"span",138),S()()(),E(21,"div",139)(22,"div",140),he(23,"div",141),E(24,"p",142),b(25,"Partite"),S(),E(26,"p",143),b(27),S(),E(28,"span",144),b(29,"\u265F"),S()(),E(30,"div",145),he(31,"div",146),E(32,"p",147),b(33,"Vittorie"),S(),E(34,"p",143),b(35),S(),E(36,"span",148),b(37,"\u265B"),S()(),E(38,"div",149),he(39,"div",150),E(40,"p",151),b(41,"Win Rate"),S(),E(42,"p",143),b(43),S(),E(44,"span",152),b(45,"\u{1F4C8}"),S()(),E(46,"div",153),he(47,"div",154),E(48,"p",155),b(49,"Punti"),S(),E(50,"p",143),b(51),S(),E(52,"span",156),b(53,"\u2605"),S()()(),E(54,"div",157)(55,"div")(56,"h3",158)(57,"span",159),b(58,"\u{1F3C6}"),S(),E(59,"span",160),b(60,"Premi & Medaglie"),S()(),E(61,"div",161),de(62,aQ,2,0)(63,lQ,5,0,"div",162),S()(),E(64,"div")(65,"h3",158)(66,"span",159),b(67,"\u{1F4B3}"),S(),E(68,"span",160),b(69,"Storico Acquisti"),S()(),E(70,"div",161),de(71,uQ,2,0)(72,dQ,5,0,"div",162),S()()(),E(73,"div",163)(74,"h3",164)(75,"span",165),b(76,"\u{1F4E6}"),S(),b(77," Download Gratuiti "),S(),E(78,"div",166),de(79,hQ,2,0)(80,pQ,5,0,"div",167),S()(),E(81,"div",168)(82,"button",169),H("click",function(){G(n);let i=O();return q(i.logout())}),he(83,"div",170),E(84,"span",171),b(85," Disconnetti Account "),S()(),E(86,"p",172),b(87),S()()()()()}if(t&2){let n,r,i=O();M(9),fe(i.supabase.avatarUrl()?9:10),M(8),fe(i.isEditingName?17:18),M(3),fe((n=i.supabase.user())!=null&&n.email?20:-1),M(7),Be(i.userStats.gamesPlayed),M(8),Be(i.userStats.gamesWon),M(8),Te("",i.userStats.winRate,"%"),M(8),Be(i.userStats.totalPoints),M(11),fe(i.userStats.achievements.length>0?62:63),M(9),fe(i.userStats.purchases.length>0?71:72),M(8),fe(i.userStats.downloads.length>0?79:80),M(8),Te("ID: ",(r=i.supabase.user())==null?null:r.id)}}function gQ(t,e){if(t&1){let n=Re();E(0,"div",196),H("click",function(){G(n);let i=O();return q(i.showLocalGameModeSelector=!1)}),E(1,"div",197),H("click",function(i){return G(n),q(i.stopPropagation())}),E(2,"h3",198),b(3,"Scegli Gioco (Locale)"),S(),E(4,"div",199)(5,"button",200),H("click",function(){G(n);let i=O();return q(i.selectLocalGameMode("chess"))}),E(6,"span",201),b(7,"\u2654"),S(),E(8,"span",202),b(9,"Scacchi"),S()(),E(10,"button",200),H("click",function(){G(n);let i=O();return q(i.selectLocalGameMode("checkers"))}),E(11,"span",201),b(12,"\u25CE"),S(),E(13,"span",202),b(14,"Dama"),S()()()()()}}function vQ(t,e){if(t&1){let n=Re();E(0,"div",196),H("click",function(){G(n);let i=O();return q(i.showAIGameModeSelector=!1)}),E(1,"div",197),H("click",function(i){return G(n),q(i.stopPropagation())}),E(2,"h3",198),b(3,"Scegli Gioco (AI)"),S(),E(4,"div",199)(5,"button",203),H("click",function(){G(n);let i=O();return q(i.selectAIGameMode("chess"))}),E(6,"span",201),b(7,"\u2654"),S(),E(8,"span",202),b(9,"Scacchi"),S()(),E(10,"button",203),H("click",function(){G(n);let i=O();return q(i.selectAIGameMode("checkers"))}),E(11,"span",201),b(12,"\u25CE"),S(),E(13,"span",202),b(14,"Dama"),S()()()()()}}function yQ(t,e){if(t&1){let n=Re();E(0,"div",236)(1,"div",4)(2,"div",239),b(3),S(),E(4,"h4",240),b(5),S()(),E(6,"div",241)(7,"label",242),b(8),E(9,"input",233),H("change",function(i){let s=G(n).$implicit,o=O(3);return q(o.onFileSelected(i,s.id,"w"))}),S()(),E(10,"label",242),b(11),E(12,"input",233),H("change",function(i){let s=G(n).$implicit,o=O(3);return q(o.onFileSelected(i,s.id,"b"))}),S()()()()}if(t&2){let n=e.$implicit,r=O(3);M(3),Te(" ",r.getIconForType(n.id)," "),M(2),Be(n.label),M(3),Te(" ",r.loadedStatus[n.id+"_w"]?"BIANCO OK":"CARICA BIANCO"," "),M(3),Te(" ",r.loadedStatus[n.id+"_b"]?"NERO OK":"CARICA NERO"," ")}}function wQ(t,e){if(t&1){let n=Re();E(0,"div",238)(1,"div",4)(2,"div",243),b(3,"\u25CE"),S(),E(4,"h4",240),b(5),S()(),E(6,"div",241)(7,"label",242),b(8),E(9,"input",233),H("change",function(i){let s=G(n).$implicit,o=O(3);return q(o.onFileSelected(i,s.id,"w"))}),S()(),E(10,"label",242),b(11),E(12,"input",233),H("change",function(i){let s=G(n).$implicit,o=O(3);return q(o.onFileSelected(i,s.id,"b"))}),S()()()()}if(t&2){let n=e.$implicit,r=O(3);M(5),Be(n.label),M(3),Te(" ",r.loadedStatus[n.id+"_w"]?"BIANCO OK":"CARICA BIANCO"," "),M(3),Te(" ",r.loadedStatus[n.id+"_b"]?"NERO OK":"CARICA NERO"," ")}}function _Q(t,e){if(t&1){let n=Re();E(0,"div",214)(1,"div",216)(2,"div",217)(3,"div",218),Je(),E(4,"svg",219),he(5,"rect",220)(6,"rect",221)(7,"rect",222)(8,"rect",223)(9,"rect",224)(10,"rect",225)(11,"rect",226)(12,"rect",227)(13,"rect",228),S()(),Ct(),E(14,"div",183)(15,"h4",229),b(16,"Scacchiera 3D"),S(),E(17,"p",230),b(18),S()()(),E(19,"label",231)(20,"span",232),b(21," Carica file STL / GLB / GLTF "),S(),E(22,"input",233),H("change",function(i){G(n);let s=O(2);return q(s.onFileSelected(i,"board"))}),S()()(),E(23,"div")(24,"h4",234),b(25,"Set Scacchi Custom"),S(),E(26,"div",235),ft(27,yQ,13,4,"div",236,sf),S()(),E(29,"div")(30,"h4",237),b(31,"Set Dama Custom"),S(),E(32,"div",235),ft(33,wQ,13,3,"div",238,sf),S()()()}if(t&2){let n=O(2);M(18),Te(" ",n.loadedStatus.board?"Stato: Caricato OK":"Stato: Modello Standard"," "),M(9),ht(n.pieceTypes),M(6),ht(n.checkerTypes)}}function EQ(t,e){if(t&1){let n=Re();E(0,"div",215)(1,"div")(2,"h4",244),b(3,"Set Completi (Scacchi)"),S(),E(4,"div",235)(5,"div",245)(6,"div",246)(7,"span",247),b(8,"\u{1F3F0}"),S(),E(9,"div",248)(10,"button",249),H("click",function(){G(n);let i=O(2);return q(i.selectLibrarySet("classic_ivory"))}),b(11,"Usa Questo"),S()()(),E(12,"div",250)(13,"h5",251),b(14,"Classic Ivory"),S(),E(15,"p",252),b(16,"Stile classico pregiato"),S()()(),E(17,"div",253)(18,"div",246)(19,"span",247),b(20,"\u{1F52E}"),S(),E(21,"div",254),b(22,"Premium"),S(),E(23,"div",248)(24,"button",255),H("click",function(){G(n);let i=O(2);return q(i.selectLibrarySet("neon_cyber"))}),b(25,"Sblocca"),S()()(),E(26,"div",250)(27,"h5",251),b(28,"Neon Cyber"),S(),E(29,"p",252),b(30,"Stile futuristico luminoso"),S()()()()(),E(31,"div")(32,"h4",256),b(33,"Scacchiere"),S(),E(34,"div",257)(35,"div",258),H("click",function(){G(n);let i=O(2);return q(i.selectLibrarySet("board_wood"))}),he(36,"div",259),E(37,"span",260),b(38,"Legno"),S()(),E(39,"div",258),H("click",function(){G(n);let i=O(2);return q(i.selectLibrarySet("board_marble"))}),he(40,"div",261),E(41,"span",260),b(42,"Marmo"),S()(),E(43,"div",258),H("click",function(){G(n);let i=O(2);return q(i.selectLibrarySet("board_glass"))}),he(44,"div",262),E(45,"span",260),b(46,"Vetro"),S()()()()()}}function CQ(t,e){if(t&1){let n=Re();E(0,"div",204),H("click",function(){G(n);let i=O();return q(i.showSetup=!1)}),E(1,"div",205),H("click",function(i){return G(n),q(i.stopPropagation())}),E(2,"div",206)(3,"div",207)(4,"h3",208),b(5,"Custom 3D"),S(),E(6,"p",209),b(7,"Personalizza i tuoi pezzi e la scacchiera"),S()(),E(8,"button",210),H("click",function(){G(n);let i=O();return q(i.showSetup=!1)}),b(9,"\u2715"),S()(),E(10,"div",211)(11,"button",212),H("click",function(){G(n);let i=O();return q(i.setupTab="upload")}),b(12," Configurazione Pezzi "),S(),E(13,"button",212),H("click",function(){G(n);let i=O();return q(i.setupTab="library")}),b(14," Libreria Asset "),S()(),E(15,"div",213),de(16,_Q,35,1,"div",214),de(17,EQ,47,0,"div",215),S()()()}if(t&2){let n=O();M(11),Ze("border-blue-500",n.setupTab==="upload")("text-white",n.setupTab==="upload")("border-transparent",n.setupTab!=="upload")("text-slate-500",n.setupTab!=="upload"),M(2),Ze("border-blue-500",n.setupTab==="library")("text-white",n.setupTab==="library")("border-transparent",n.setupTab!=="library")("text-slate-500",n.setupTab!=="library"),M(3),fe(n.setupTab==="upload"?16:-1),M(),fe(n.setupTab==="library"?17:-1)}}var hv=class t{constructor(){this.gameService=Q(Tn);this.supabase=Q(xn);this.showSetup=!1;this.fileSelected=new Wt;this.showAIGameModeSelector=!1;this.showLocalGameModeSelector=!1;this.showAccountManager=!1;this.showAuth=!1;this.authMode="login";this.authNickname="";this.authEmail="";this.authPassword="";this.authError="";this.authSuccess="";this.loadingAuth=!1;this.uploadingPhoto=!1;this.pieceTypes=[{id:"p",label:"Pedone"},{id:"r",label:"Torre"},{id:"n",label:"Cavallo"},{id:"b",label:"Alfiere"},{id:"q",label:"Regina"},{id:"k",label:"Re"}];this.checkerTypes=[{id:"cm",label:"Pedina (Man)"},{id:"ck",label:"Dama (King)"}];this.loadedStatus={};this.isEditingName=!1;this.tempNickname="";this.userStats={gamesPlayed:0,gamesWon:0,winRate:0,totalPoints:0,achievements:[],purchases:[],downloads:[]};this.orbs=Array.from({length:12},(e,n)=>{let r=["radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, rgba(99, 102, 241, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, rgba(168, 85, 247, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(236, 72, 153, 0.15) 0%, rgba(236, 72, 153, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 50%, transparent 100%)"];return{x:Math.random()*100,y:Math.random()*100,size:250+Math.random()*400,duration:15+Math.random()*25,delay:Math.random()*10,color:r[n%r.length]}});this.setupTab="upload"}getIconForType(e){return{p:"\u265F",r:"\u265C",n:"\u265E",b:"\u265D",q:"\u265B",k:"\u265A"}[e]||"?"}toggleAuth(){this.showAuth=!this.showAuth,this.authError="",this.authSuccess=""}toggleAuthMode(){this.authMode==="admin"?this.authMode="login":this.authMode=this.authMode==="login"?"register":"login",this.authError="",this.authSuccess=""}openAdminLogin(){this.authMode="admin",this.authNickname="",this.authPassword="",this.authError="",this.authSuccess="",this.showAuth=!0}async handleAuth(e){e.preventDefault(),this.loadingAuth=!0,this.authError="",this.authSuccess="",console.log("HomeView: Inizio procedura auth",this.authMode);try{if(this.authMode==="admin")if(this.authNickname==="admin"&&this.authPassword==="accessometti"){this.authSuccess="Benvenuto Admin! Redirect in corso...",setTimeout(()=>{this.showAuth=!1,this.gameService.setView("admin")},1500);return}else{this.authError="Credenziali Admin Errante!",this.loadingAuth=!1;return}let n=null;this.authMode==="login"?n=await this.supabase.authService.signIn(this.authNickname,this.authPassword):n=await this.supabase.authService.signUp(this.authEmail,this.authPassword,this.authNickname);let{data:r,error:i}=n;if(i){console.error("HomeView: Errore durante auth:",i);let s=i.message||"Si \xE8 verificato un errore.";s.includes("Invalid login credentials")?s="Credenziali non valide. Verifica nickname e password.":s.includes("User already registered")?s="Email gi\xE0 registrata. Prova ad accedere!":s.includes("Password should be at least")?s="La password deve avere almeno 6 caratteri.":s.includes("Email not confirmed")?s="Email non confermata. Controlla la tua posta elettronica.":s.includes("Nickname gi\xE0 in uso")&&(s="Questo nickname \xE8 gi\xE0 stato preso. Scegline un altro!"),this.authError=s}else this.authMode==="register"&&!r?.session?(this.authSuccess="Account creato! Controlla la tua email per confermare.",this.authError="",this.loadingAuth=!1):(this.authSuccess="Accesso effettuato! Benvenuto a Corte.",this.authError="",this.loadingAuth=!1,setTimeout(()=>{this.showAuth=!1,this.authSuccess="",this.authPassword="",console.log("HomeView: Auth modal closed successfully")},3e3),this.supabase.loadUserProfile().then(()=>this.loadUserStats()))}catch(n){this.authError="Errore di connessione al database.",console.error("HomeView: Critical Auth Error:",n)}finally{this.loadingAuth=!1}}async logout(){await this.supabase.signOut(),this.showAccountManager=!1,this.userStats={gamesPlayed:0,gamesWon:0,winRate:0,totalPoints:0,achievements:[],purchases:[],downloads:[]},console.log("HomeView: Logout effettuato")}openCareer(){this.supabase.user()?this.gameService.setView("career"):(this.toggleAuth(),this.authError="Registrazione obbligatoria per la Carriera")}openAdventure(){this.supabase.user()?alert("Modalit\xE0 Avventura in arrivo! \u{1F3F0}"):(this.toggleAuth(),this.authError="Registrazione obbligatoria per l'Avventura")}async openAccountManager(){if(!this.supabase.user()){this.toggleAuth();return}this.showAccountManager=!0,await this.loadUserStats()}async loadUserStats(){try{if(!this.supabase.user()?.id)return;let n=await this.supabase.getCareerProgress();n?(this.userStats.totalPoints=n.total_points||0,this.userStats.gamesPlayed=n.games_played||0,this.userStats.gamesWon=n.games_won||0,this.userStats.gamesPlayed>0?this.userStats.winRate=Number((this.userStats.gamesWon/this.userStats.gamesPlayed*100).toFixed(1)):this.userStats.winRate=0):(this.userStats.gamesPlayed=0,this.userStats.gamesWon=0,this.userStats.winRate=0,this.userStats.totalPoints=0)}catch(e){console.error("Error loading stats:",e)}}async onProfilePhotoSelected(e){let n=e.target;if(!n.files||!n.files[0])return;let r=n.files[0],i=this.supabase.user()?.id;if(i){this.uploadingPhoto=!0;try{let s=await fv.processAvatarImage(r),a=await(await fetch(s)).blob(),l=r.name.split(".").pop()||"jpg",u=`${`${i}-${Date.now()}.${l}`}`,{data:h,error:p}=await this.supabase.client.storage.from("avatars").upload(u,a,{contentType:"image/jpeg",upsert:!0});if(p)throw p.message.includes("Bucket not found")?new Error("Manca il bucket 'avatars' su Supabase. Crealo come Pubblico."):p;let{data:m}=this.supabase.client.storage.from("avatars").getPublicUrl(u);await this.supabase.client.from("profiles").update({avatar_url:m.publicUrl}).eq("id",i),await this.supabase.loadUserProfile()}catch(s){console.error("Upload Error:",s),alert(`Impossibile caricare la foto: ${s.message}`)}finally{this.uploadingPhoto=!1}}}startEditingName(){this.tempNickname=this.supabase.username()||"",this.isEditingName=!0}async debugFetchProfile(){let e=this.supabase.user()?.id;if(!e){alert("ID Utente non trovato (L'utente sembra non essere loggato).");return}console.log("DEBUG: Tentativo fetch profilo per UID:",e);let{data:n,error:r}=await this.supabase.client.from("profiles").select("*").eq("id",e).maybeSingle();r?(console.error("DEBUG: Errore query profiles:",r),alert("ERRORE QUERY: "+r.message)):n?(console.log("DEBUG: Profilo trovato:",n),alert(`PROFILO TROVATO!
Username: ${n.username}
Nickname: ${n.nickname}
ID: ${n.id}`),n.username&&this.supabase.username.set(n.username)):(console.warn("DEBUG: Profilo non trovato nella tabella."),alert("NESSUN PROFILO TROVATO NEL DATABASE per questo ID."))}async saveNickname(){if(!this.tempNickname.trim()){this.isEditingName=!1;return}try{let e=this.supabase.user()?.id;e&&(await this.supabase.client.from("profiles").update({username:this.tempNickname}).eq("id",e),this.supabase.username.set(this.tempNickname))}catch(e){console.error("Error saving name",e)}this.isEditingName=!1}async deleteProfilePhoto(){let e=this.supabase.user()?.id;if(e)try{await this.supabase.client.from("profiles").update({avatar_url:null}).eq("id",e),await this.supabase.loadUserProfile()}catch{alert("Errore cancellazione foto")}}selectAIGameMode(e){this.showAIGameModeSelector=!1,this.gameService.startGame(e,"ai")}selectLocalGameMode(e){this.showLocalGameModeSelector=!1,this.gameService.startGame(e,"local")}async ngOnInit(){this.supabase.user()&&await this.supabase.loadUserProfile(),await this.loadUserStats()}async selectLibrarySet(e){if(!this.supabase.user()){alert("Devi accedere per salvare le preferenze!");return}let n={board_wood:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_wood.glb",board_marble:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_marble.glb",board_glass:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_glass.glb",classic_ivory:{p_w:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/ivory_pawn_w.glb",n_w:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/ivory_knight_w.glb"},neon_cyber:"LOCKED"};if(e==="neon_cyber"){alert("Questo set \xE8 bloccato (Premium). Acquistalo nello Shop!");return}try{let r=n[e];if(typeof r=="string")await this.supabase.saveUserAssetPreference("board",r),this.gameService.customMeshUrls.update(i=>ne(D({},i),{board:r})),this.loadedStatus.board=!0;else if(typeof r=="object"){let i={};for(let[s,o]of Object.entries(r))await this.supabase.saveUserAssetPreference(s,o),i[s]=o,this.loadedStatus[s]=!0;this.gameService.customMeshUrls.update(s=>D(D({},s),i))}}catch(r){console.error("Library Error",r),alert("Errore applicazione asset: "+r.message)}}async onFileSelected(e,n,r){let i=e.target;if(!i.files||!i.files[0])return;let s=i.files[0],o=n;n!=="board"&&r&&(o=`${n}_${r}`);try{if(this.supabase.user()?.id){let l=await this.supabase.uploadCustomAssetFile(s,o);await this.supabase.saveUserAssetPreference(o,l),this.gameService.customMeshUrls.update(c=>ne(D({},c),{[o]:l})),this.loadedStatus[o]=!0,n!=="board"&&this.gameService.setPieceStyle("custom"),this.fileSelected.emit({event:e,type:n,colorSuffix:r})}else{let l=URL.createObjectURL(s);this.gameService.customMeshUrls.update(c=>ne(D({},c),{[o]:l})),this.loadedStatus[o]=!0,n!=="board"&&this.gameService.setPieceStyle("custom"),this.fileSelected.emit({event:e,type:n,colorSuffix:r})}}catch(a){console.error("Asset Upload Error:",a),alert(`Errore caricamento: ${a.message}`)}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-home-view"]],inputs:{showSetup:"showSetup"},outputs:{fileSelected:"fileSelected"},decls:123,vars:7,consts:[[1,"fixed","inset-0","z-50","flex","flex-col","p-4","md:p-6","overflow-y-auto","custom-scrollbar"],[1,"absolute","inset-0","z-0","pointer-events-none","overflow-hidden"],[1,"absolute","rounded-full","blur-[120px]","animate-float-slow",3,"width","height","left","top","animation-duration","animation-delay","background"],[1,"relative","z-50","flex","items-center","justify-between","mb-6","md:mb-8"],[1,"flex","items-center","gap-4"],[1,"relative","flex","flex-col","items-center"],[1,"text-4xl","sm:text-6xl","md:text-7xl","font-black","uppercase","tracking-tighter","bg-gradient-to-r","from-yellow-300","via-amber-500","to-yellow-600","text-transparent","bg-clip-text","drop-shadow-[0_0_40px_rgba(251,191,36,0.5)]","animate-pulse-subtle"],[1,"mt-2","animate-fade-in","text-center"],[1,"text-[10px]","md:text-[11px]","font-black","text-indigo-400","uppercase","tracking-[0.4em]"],[1,"relative","mr-4","flex","items-center","justify-center","w-14","h-14","rounded-2xl","backdrop-blur-md","border","border-white/10","shadow-[0_0_25px_rgba(251,191,36,0.1)]","hover:shadow-[0_0_40px_rgba(251,191,36,0.3)]","hover:scale-105","active:scale-95","transition-all","group","overflow-hidden","bg-slate-900/40",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-yellow-500/10","to-amber-600/5","opacity-50","group-hover:opacity-100","transition-opacity"],[1,"w-full","h-full","p-[2px]","rounded-2xl","bg-gradient-to-r","from-yellow-400","via-yellow-500","to-amber-600"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"flex-1","flex","items-center","justify-center"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","md:gap-6","w-full","max-w-4xl","z-10","px-4","mb-20"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-orange-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-orange-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"relative","flex","flex-col","items-center","text-center","gap-4"],[1,"w-16","h-16","rounded-2xl","bg-orange-500/20","flex","items-center","justify-center","border","border-orange-500/20","group-hover:bg-orange-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-orange-400"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-slate-400","text-[10px]","font-bold","uppercase","tracking-[0.2em]","mt-1"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-indigo-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-indigo-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-indigo-500/20","flex","items-center","justify-center","border","border-indigo-500/20","group-hover:bg-indigo-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-indigo-400"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["cx","12","cy","12","r","3"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-yellow-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-yellow-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-yellow-500/20","flex","items-center","justify-center","border","border-yellow-500/20","group-hover:bg-yellow-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-yellow-400"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5"],["d","M2 12l10 5 10-5"],[1,"relative","group"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","bg-slate-950/80","backdrop-blur-sm","rounded-[2rem]","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none"],[1,"px-6","py-2","bg-emerald-500","rounded-full","shadow-[0_0_30px_rgba(16,185,129,0.4)]"],[1,"text-white","font-black","uppercase","text-sm","tracking-[0.2em]"],[1,"w-full","relative","overflow-hidden","bg-slate-900/20","backdrop-blur-2xl","border","border-white/5","rounded-[2rem]","p-6","md:p-8","transition-all","opacity-40","cursor-not-allowed"],[1,"w-16","h-16","rounded-2xl","bg-emerald-500/20","flex","items-center","justify-center","border","border-emerald-500/20","group-hover:bg-emerald-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-emerald-400"],["d","M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"],["points","9 22 9 12 15 12 15 22"],[1,"text-2xl","font-black","text-slate-400","uppercase","tracking-tighter"],[1,"text-slate-600","text-[10px]","font-bold","uppercase","tracking-[0.2em]","mt-1"],[1,"px-6","py-2","bg-rose-500","rounded-full","shadow-[0_0_30px_rgba(244,63,94,0.4)]"],[1,"w-16","h-16","rounded-2xl","bg-slate-800","flex","items-center","justify-center","border","border-white/5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-slate-500"],["cx","12","cy","12","r","10"],["d","M8 14s1.5 2 4 2 4-2 4-2"],["x1","9","y1","9","x2","9.01","y2","9"],["x1","15","y1","9","x2","15.01","y2","9"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-cyan-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-cyan-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-cyan-500/20","flex","items-center","justify-center","border","border-cyan-500/20","group-hover:bg-cyan-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-cyan-400"],["d","M12 20h9"],["d","M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"],["d","M21 8l-2-2H5L3 8v10a2 2 0 002 2h14a2 2 0 002-2V8z"],["d","M3 8h18M10 12h4"],[1,"relative","z-10","mt-auto","pt-8","pb-4","flex","justify-center","opacity-30","hover:opacity-100","transition-opacity"],[1,"text-[10px]","font-black","text-slate-500","uppercase","tracking-[0.3em]","hover:text-indigo-400","transition-colors",3,"click"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","animate-fade-in"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-md","p-4","animate-fade-in"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-xl","p-4","animate-fade-in"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in"],[1,"absolute","rounded-full","blur-[120px]","animate-float-slow"],[1,"w-full","h-full","object-cover","rounded-[calc(1rem-2px)]","border","border-black/50",3,"src"],["viewBox","0 0 24 24",1,"w-7","h-7","drop-shadow-md","scale-110"],["id","goldGradientHero","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#facc15","stop-opacity","1"],["offset","50%",2,"stop-color","#eab308","stop-opacity","1"],["offset","100%",2,"stop-color","#d97706","stop-opacity","1"],["fill","url(#goldGradientHero)","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","animate-fade-in",3,"click"],[1,"absolute","inset-0","bg-slate-950/80","backdrop-blur-xl"],[1,"relative","bg-[#0b1120]","border","border-white/5","shadow-[0_0_80px_rgba(79,70,229,0.15)]","rounded-[2.5rem]","w-full","max-w-md","overflow-hidden",3,"click"],[1,"absolute","top-0","left-0","w-full","h-[2px]","bg-gradient-to-r","from-transparent","via-indigo-500/50","to-transparent"],[1,"absolute","-top-32","-right-32","w-64","h-64","bg-indigo-500/10","rounded-full","blur-[100px]","animate-pulse"],[1,"absolute","-bottom-32","-left-32","w-64","h-64","bg-purple-500/10","rounded-full","blur-[100px]","animate-pulse"],[1,"relative","z-10","p-8","md:p-10"],[1,"flex","flex-col","items-center","text-center","mb-8"],[1,"w-20","h-20","rounded-3xl","bg-gradient-to-br","from-indigo-500/20","to-purple-600/20","border","border-white/10","flex","items-center","justify-center","mb-5","shadow-2xl","relative","group"],[1,"absolute","inset-0","bg-indigo-500/20","rounded-3xl","blur-xl","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-4xl","relative","z-10"],[1,"text-3xl","md:text-4xl","font-black","text-white","uppercase","tracking-tight","mb-2"],[1,"text-slate-400","text-[10px]","font-bold","uppercase","tracking-[0.25em]","leading-relaxed","max-w-[80%]"],[1,"space-y-4",3,"submit"],[1,"space-y-1.5"],[1,"text-[10px]","font-black","text-indigo-400","uppercase","tracking-widest","ml-3"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],[1,"text-slate-500","group-focus-within:text-indigo-400","transition-colors"],["type","text","name","nickname","required","","placeholder","Chi sei?",1,"w-full","bg-slate-900/50","border-2","border-slate-800","rounded-2xl","py-4","pl-12","pr-4","text-white","placeholder-slate-600","focus:border-indigo-500/50","focus:bg-slate-900/80","focus:outline-none","transition-all","font-bold","text-sm",3,"ngModelChange","ngModel"],[1,"space-y-1.5","animate-fade-in-up"],[1,"space-y-1.5","focus-within:translate-x-1","transition-transform","duration-300"],[1,"flex","justify-between","px-3"],[1,"text-[10px]","font-black","text-indigo-400","uppercase","tracking-widest"],["type","button",1,"text-[9px]","font-bold","text-slate-500","hover:text-indigo-300","transition-colors","uppercase","tracking-widest"],["type","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","bg-slate-900/50","border-2","border-slate-800","rounded-2xl","py-4","pl-12","pr-4","text-white","placeholder-slate-600","focus:border-indigo-500/50","focus:bg-slate-900/80","focus:outline-none","transition-all","font-bold","text-sm",3,"ngModelChange","ngModel"],[1,"p-3.5","bg-rose-500/10","border","border-rose-500/20","rounded-xl","animate-shake","flex","items-center","gap-3"],[1,"p-3.5","bg-emerald-500/10","border","border-emerald-500/20","rounded-xl","flex","items-center","gap-3"],["type","submit",1,"w-full","bg-gradient-to-r","from-indigo-600","to-indigo-500","hover:from-indigo-500","hover:to-indigo-400","text-white","font-black","py-5","rounded-2xl","shadow-xl","shadow-indigo-600/20","transition-all","active:scale-[0.98]","flex","items-center","justify-center","gap-3","disabled:opacity-50","disabled:pointer-events-none","mt-8","group",3,"disabled"],[1,"uppercase","tracking-[0.3em]","text-sm"],[1,"group-hover:translate-x-1.5","transition-transform","text-lg"],[1,"mt-8","pt-8","border-t","border-white/5","flex","flex-col","items-center","gap-5"],[1,"text-[10px]","font-black","text-slate-500","hover:text-white","transition-colors","uppercase","tracking-[0.25em]","flex","items-center","gap-2","group",3,"click"],[1,"text-indigo-400","group-hover:text-indigo-300","underline","decoration-indigo-500/30","underline-offset-4","decoration-2"],[1,"text-[9px]","font-bold","text-slate-700","hover:text-indigo-400","transition-colors","uppercase","tracking-[0.3em]","border","border-white/5","px-4","py-2","rounded-lg","hover:border-indigo-500/20"],[1,"absolute","top-6","right-6","w-10","h-10","rounded-full","bg-white/5","hover:bg-white/10","flex","items-center","justify-center","text-slate-500","hover:text-white","transition-all","active:scale-95","border","border-white/10",3,"click"],["type","email","name","email","required","","placeholder","nome@esempio.com",1,"w-full","bg-slate-900/50","border-2","border-slate-800","rounded-2xl","py-4","pl-12","pr-4","text-white","placeholder-slate-600","focus:border-indigo-500/50","focus:bg-slate-900/80","focus:outline-none","transition-all","font-bold","text-sm",3,"ngModelChange","ngModel"],["type","button",1,"text-[9px]","font-bold","text-slate-500","hover:text-indigo-300","transition-colors","uppercase","tracking-widest",3,"click"],[1,"text-rose-500"],[1,"text-[10px]","font-bold","text-rose-400","uppercase","tracking-wider","leading-tight"],[1,"text-emerald-500"],[1,"text-[10px]","font-bold","text-emerald-400","uppercase","tracking-wider","leading-tight"],[1,"text-[9px]","font-bold","text-slate-700","hover:text-indigo-400","transition-colors","uppercase","tracking-[0.3em]","border","border-white/5","px-4","py-2","rounded-lg","hover:border-indigo-500/20",3,"click"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-md","p-4","animate-fade-in",3,"click"],[1,"relative","bg-slate-900/90","backdrop-blur-3xl","border","border-white/10","rounded-[2.5rem]","max-w-2xl","w-full","max-h-[90vh]","shadow-[0_0_80px_rgba(0,0,0,0.6)]","overflow-hidden","flex","flex-col",3,"click"],[1,"absolute","top-6","right-6","z-50","w-10","h-10","rounded-full","bg-white/5","hover:bg-white/10","flex","items-center","justify-center","text-white","border","border-white/10","transition-all","active:scale-95",3,"click"],[1,"p-8","md:p-10","overflow-y-auto","custom-scrollbar","relative","z-10"],[1,"flex","flex-row","items-center","gap-6","mb-10","pb-8","border-b","border-white/5"],[1,"relative","group","shrink-0"],[1,"w-20","h-20","rounded-full","overflow-hidden","border-2","border-amber-500/30","shadow-[0_0_30px_rgba(245,158,11,0.2)]","bg-black/40","flex","items-center","justify-center","relative"],[1,"absolute","inset-0","bg-gradient-to-br","from-amber-500/10","to-orange-600/10","opacity-60"],[1,"w-full","h-full","p-[2px]","rounded-full","bg-gradient-to-r","from-amber-300","via-amber-500","to-orange-500","animate-pulse-subtle"],[1,"w-full","h-full","flex","items-center","justify-center","rounded-full"],[1,"absolute","-bottom-1","-right-1","w-8","h-8","bg-slate-800","rounded-full","border","border-white/10","flex","items-center","justify-center","cursor-pointer","shadow-lg","hover:bg-slate-700","transition-colors"],[1,"text-xs"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"flex-1","flex","flex-col","justify-center"],[1,"relative","group/name","w-full"],["title","Doppio click per modificare",1,"text-3xl","md:text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-br","from-yellow-300","via-amber-500","to-yellow-600","uppercase","tracking-tighter","drop-shadow-md","cursor-pointer","hover:scale-105","transition-all","truncate"],[1,"flex","items-center","gap-2","mt-1"],[1,"text-[10px]","font-bold","text-slate-500","tracking-wider","truncate","max-w-[200px]"],[1,"grid","grid-cols-2","lg:grid-cols-4","gap-4","mb-10"],[1,"bg-indigo-900/10","border","border-indigo-500/20","p-4","rounded-2xl","relative","overflow-hidden","group","hover:bg-indigo-900/20","transition-all"],[1,"absolute","inset-0","bg-gradient-to-br","from-indigo-500/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-[9px]","text-indigo-300","font-black","uppercase","tracking-widest","mb-1","relative","z-10"],[1,"text-3xl","font-black","text-white","relative","z-10"],[1,"absolute","-bottom-4","-right-2","text-6xl","text-indigo-500/10","group-hover:text-indigo-500/20","transition-all","select-none"],[1,"bg-emerald-900/10","border","border-emerald-500/20","p-4","rounded-2xl","relative","overflow-hidden","group","hover:bg-emerald-900/20","transition-all"],[1,"absolute","inset-0","bg-gradient-to-br","from-emerald-500/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-[9px]","text-emerald-300","font-black","uppercase","tracking-widest","mb-1","relative","z-10"],[1,"absolute","-bottom-4","-right-2","text-6xl","text-emerald-500/10","group-hover:text-emerald-500/20","transition-all","select-none"],[1,"bg-violet-900/10","border","border-violet-500/20","p-4","rounded-2xl","relative","overflow-hidden","group","hover:bg-violet-900/20","transition-all"],[1,"absolute","inset-0","bg-gradient-to-br","from-violet-500/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-[9px]","text-violet-300","font-black","uppercase","tracking-widest","mb-1","relative","z-10"],[1,"absolute","-bottom-4","-right-2","text-6xl","text-violet-500/10","group-hover:text-violet-500/20","transition-all","select-none"],[1,"bg-amber-900/10","border","border-amber-500/20","p-4","rounded-2xl","relative","overflow-hidden","group","hover:bg-amber-900/20","transition-all"],[1,"absolute","inset-0","bg-gradient-to-br","from-amber-500/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-[9px]","text-amber-300","font-black","uppercase","tracking-widest","mb-1","relative","z-10"],[1,"absolute","-bottom-4","-right-2","text-6xl","text-amber-500/10","group-hover:text-amber-500/20","transition-all","select-none"],[1,"space-y-8"],[1,"flex","items-center","gap-2","mb-3","px-1"],[1,"text-lg"],[1,"text-xs","font-black","text-slate-300","uppercase","tracking-widest"],[1,"bg-black/20","border","border-white/5","rounded-2xl","p-2","max-h-40","overflow-y-auto","custom-scrollbar"],[1,"flex","flex-col","items-center","justify-center","py-6","gap-2","opacity-50"],[1,"mb-8","mt-8"],[1,"text-xl","font-black","text-white","uppercase","tracking-tighter","mb-4","flex","items-center","gap-2"],[1,"text-2xl"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","max-h-48","overflow-y-auto","custom-scrollbar"],[1,"flex","items-center","gap-3","p-3","bg-slate-800/50","rounded-xl","border","border-white/5","opacity-60"],[1,"mt-10","pt-6","border-t","border-white/5","flex","flex-col","items-center"],[1,"w-full","py-4","relative","group","overflow-hidden","rounded-xl","bg-slate-800/50","border","border-rose-500/30","hover:border-rose-500/60","transition-all",3,"click"],[1,"absolute","inset-0","bg-gradient-to-r","from-rose-500/10","via-rose-500/5","to-rose-500/10","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"relative","z-10","text-xs","font-black","text-rose-400","uppercase","tracking-[0.25em]","group-hover:text-rose-300","transition-colors"],[1,"text-[9px]","text-slate-600","mt-4","font-mono"],[1,"w-full","h-full","object-cover","rounded-full","border","border-black/80",3,"src"],["viewBox","0 0 24 24",1,"w-10","h-10","drop-shadow-md"],["id","goldGradientUser","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#fcd34d","stop-opacity","1"],["offset","50%",2,"stop-color","#f59e0b","stop-opacity","1"],["fill","url(#goldGradientUser)","d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"],["type","text","autoFocus","",1,"text-3xl","md:text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-white","to-slate-400","uppercase","tracking-tighter","bg-transparent","border-b","border-amber-500/50","focus:outline-none","w-full","mb-1",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"text-[9px]","text-amber-500/80","mt-1","uppercase","font-bold","tracking-widest"],["title","Doppio click per modificare",1,"text-3xl","md:text-4xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-br","from-yellow-300","via-amber-500","to-yellow-600","uppercase","tracking-tighter","drop-shadow-md","cursor-pointer","hover:scale-105","transition-all","truncate",3,"dblclick"],[1,"flex","items-center","gap-4","p-3","bg-slate-800/50","rounded-xl","mb-1","last:mb-0","hover:bg-slate-800","transition-colors"],[1,"flex-1"],[1,"text-xs","font-bold","text-white","uppercase"],[1,"text-[9px]","text-slate-500"],[1,"text-3xl","grayscale","opacity-50"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest"],[1,"flex","items-center","justify-between","p-3","bg-slate-800/50","rounded-xl","mb-1","last:mb-0","hover:bg-slate-800","transition-colors"],[1,"text-xs","font-black","text-emerald-400"],[1,"flex","items-center","justify-between","p-3","bg-slate-800/50","rounded-xl","mb-2","last:mb-0"],[1,"text-sm","font-bold","text-white"],[1,"text-[10px]","text-slate-400"],[1,"text-xs","font-black","text-indigo-400","bg-indigo-500/10","px-2","py-1","rounded-full"],[1,"text-2xl","grayscale"],[1,"text-xs","font-bold","text-slate-400","uppercase","tracking-wide"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-xl","p-4","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-white/10","rounded-[2.5rem]","p-8","max-w-md","w-full",3,"click"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter","text-center","mb-6"],[1,"grid","grid-cols-2","gap-4"],[1,"p-6","bg-slate-800","hover:bg-orange-500/20","border","border-white/10","rounded-2xl","group","transition-all",3,"click"],[1,"text-4xl","block","mb-2"],[1,"text-xs","font-black","text-white","uppercase","tracking-widest"],[1,"p-6","bg-slate-800","hover:bg-indigo-500/20","border","border-white/10","rounded-2xl","group","transition-all",3,"click"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in",3,"click"],[1,"bg-slate-900/90","backdrop-blur-2xl","border","border-white/10","shadow-2xl","rounded-[2.5rem]","w-full","max-w-4xl","overflow-hidden","flex","flex-col","max-h-[90vh]",3,"click"],[1,"p-6","border-b","border-white/10","bg-black/20","flex","justify-between","items-center"],[1,"flex","flex-col"],[1,"text-2xl","font-black","text-white","uppercase","tracking-wider"],[1,"text-xs","text-slate-400","mt-1","uppercase","font-bold","tracking-widest"],[1,"text-slate-400","hover:text-white","p-2","text-xl","transition-colors",3,"click"],[1,"flex","border-b","border-white/10","px-8"],[1,"px-6","py-4","text-sm","font-black","uppercase","tracking-widest","border-b-2","transition-all",3,"click"],[1,"p-8","overflow-y-auto","custom-scrollbar","bg-transparent","flex-1"],[1,"space-y-10","animate-fade-in"],[1,"space-y-8","animate-fade-in"],[1,"bg-indigo-900/10","border","border-white/5","rounded-[2rem]","p-8","space-y-6"],[1,"flex","items-center","gap-6"],[1,"w-14","h-14","rounded-2xl","bg-slate-800/50","flex","items-center","justify-center","border","border-white/10"],["viewBox","0 0 24 24","fill","currentColor",1,"w-8","h-8","text-slate-400"],["x","2","y","2","width","20","height","20","rx","2","fill","none","stroke","currentColor","stroke-width","2"],["x","2","y","2","width","5","height","5"],["x","12","y","2","width","5","height","5"],["x","7","y","7","width","5","height","5"],["x","17","y","7","width","5","height","5"],["x","2","y","12","width","5","height","5"],["x","12","y","12","width","5","height","5"],["x","7","y","17","width","5","height","5"],["x","17","y","17","width","5","height","5"],[1,"text-xl","font-black","text-white","uppercase","tracking-tight"],[1,"text-[10px]","text-indigo-400","font-bold","uppercase","tracking-widest","mt-1"],[1,"cursor-pointer","block"],[1,"w-full","bg-slate-800","hover:bg-slate-700","text-slate-300","text-xs","font-black","uppercase","text-center","py-4","rounded-xl","border","border-white/10","transition-all","block","shadow-lg"],["type","file","accept",".stl,.glb,.gltf",1,"hidden",3,"change"],[1,"text-sm","font-black","text-blue-400","uppercase","tracking-widest","mb-6","border-b","border-blue-500/30","pb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","flex","flex-col","gap-4","group","hover:border-blue-500/30","transition-all"],[1,"text-sm","font-black","text-emerald-400","uppercase","tracking-widest","mb-6","border-b","border-emerald-500/30","pb-3"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","flex","flex-col","gap-4","group","hover:border-emerald-500/30","transition-all"],[1,"w-10","h-10","rounded-lg","bg-black/40","flex","items-center","justify-center","text-xl","text-slate-400","border","border-white/5"],[1,"text-base","font-black","text-white","uppercase"],[1,"grid","grid-cols-2","gap-3"],[1,"cursor-pointer","bg-slate-800","hover:bg-slate-700","text-slate-300","text-[10px]","font-black","uppercase","text-center","py-3","rounded-xl","border","border-white/10","transition-all"],[1,"w-10","h-10","rounded-lg","bg-black/40","flex","items-center","justify-center","text-xl","text-emerald-500","border","border-white/5"],[1,"text-sm","font-black","text-purple-400","uppercase","tracking-widest","mb-4"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","border","border-white/10","rounded-2xl","p-1","overflow-hidden","group"],[1,"relative","h-32","bg-slate-950/50","rounded-xl","overflow-hidden","mb-3","flex","items-center","justify-center"],[1,"text-4xl"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],[1,"px-4","py-2","bg-white","text-black","font-black","uppercase","text-xs","rounded-full","tracking-wider","transform","translate-y-2","group-hover:translate-y-0","transition-all",3,"click"],[1,"px-3","pb-3"],[1,"text-white","font-bold","uppercase","text-sm"],[1,"text-xs","text-slate-500","mt-1"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","border","border-purple-500/30","rounded-2xl","p-1","overflow-hidden","group","shadow-[0_0_20px_rgba(168,85,247,0.15)]"],[1,"absolute","top-2","right-2","bg-purple-500","text-white","text-[10px]","font-black","px-2","py-1","rounded-full","uppercase","tracking-wider"],[1,"px-4","py-2","bg-purple-500","text-white","font-black","uppercase","text-xs","rounded-full","tracking-wider","transform","translate-y-2","group-hover:translate-y-0","transition-all",3,"click"],[1,"text-sm","font-black","text-cyan-400","uppercase","tracking-widest","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3"],[1,"bg-slate-800/50","border","border-white/5","rounded-xl","p-3","flex","flex-col","items-center","gap-2","cursor-pointer","hover:bg-slate-700/50","transition-all",3,"click"],[1,"w-12","h-12","rounded","bg-[#5c4033]"],[1,"text-[10px]","font-bold","text-white","uppercase"],[1,"w-12","h-12","rounded","bg-slate-300"],[1,"w-12","h-12","rounded","bg-cyan-900/40","border","border-cyan-500/30"]],template:function(n,r){n&1&&(E(0,"div",0)(1,"div",1),ft(2,jK,1,14,"div",2,id),S(),E(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1",6),b(8," THE KING "),S(),E(9,"div",7)(10,"p",8),b(11),S()()()(),E(12,"button",9),H("click",function(){return r.supabase.user()?r.openAccountManager():r.toggleAuth()}),he(13,"div",10),de(14,WK,2,1,"div",11)(15,zK,8,0,"div",12),S()(),E(16,"div",13)(17,"div",14)(18,"button",15),H("click",function(){return r.showLocalGameModeSelector=!0}),he(19,"div",16),E(20,"div",17)(21,"div",18),Je(),E(22,"svg",19),he(23,"path",20)(24,"circle",21)(25,"path",22)(26,"path",23),S()(),Ct(),E(27,"div")(28,"h2",24),b(29,"Sfida Locale"),S(),E(30,"p",25),b(31,"Multiplayer Offline"),S()()()(),E(32,"button",26),H("click",function(){return r.showAIGameModeSelector=!0}),he(33,"div",27),E(34,"div",17)(35,"div",28),Je(),E(36,"svg",29),he(37,"path",30)(38,"circle",31),S()(),Ct(),E(39,"div")(40,"h2",24),b(41,"Sfida AI"),S(),E(42,"p",25),b(43,"vs Gemini AI"),S()()()(),E(44,"button",32),H("click",function(){return r.openCareer()}),he(45,"div",33),E(46,"div",17)(47,"div",34),Je(),E(48,"svg",35),he(49,"path",36)(50,"path",37)(51,"path",38),S()(),Ct(),E(52,"div")(53,"h2",24),b(54,"Carriera"),S(),E(55,"p",25),b(56,"100 Livelli"),S()()()(),E(57,"div",39)(58,"div",40)(59,"div",41)(60,"span",42),b(61,"Soon"),S()()(),E(62,"button",43)(63,"div",17)(64,"div",44),Je(),E(65,"svg",45),he(66,"path",46)(67,"polyline",47),S()(),Ct(),E(68,"div")(69,"h2",48),b(70,"Avventura"),S(),E(71,"p",49),b(72,"Missioni Epiche"),S()()()()(),E(73,"div",39)(74,"div",40)(75,"div",50)(76,"span",42),b(77,"Soon"),S()()(),E(78,"button",43)(79,"div",17)(80,"div",51),Je(),E(81,"svg",52),he(82,"circle",53)(83,"path",54)(84,"line",55)(85,"line",56),S()(),Ct(),E(86,"div")(87,"h2",48),b(88,"Sfida Online"),S(),E(89,"p",49),b(90,"Multiplayer PvP"),S()()()()(),E(91,"button",57),H("click",function(){return r.showSetup=!0}),he(92,"div",58),E(93,"div",17)(94,"div",59),Je(),E(95,"svg",60),he(96,"path",61)(97,"path",62),S()(),Ct(),E(98,"div")(99,"h2",24),b(100,"Setup"),S(),E(101,"p",25),b(102,"Modelli 3D"),S()()()(),E(103,"button",32),H("click",function(){return r.gameService.setView("marketplace")}),he(104,"div",33),E(105,"div",17)(106,"div",34),Je(),E(107,"svg",35),he(108,"path",63)(109,"path",64),S()(),Ct(),E(110,"div")(111,"h2",24),b(112,"Shop"),S(),E(113,"p",25),b(114,"Skin & Assets"),S()()()()()(),E(115,"div",65)(116,"button",66),H("click",function(){return r.openAdminLogin()}),b(117," Area Amministrazione "),S()(),de(118,eQ,50,15,"div",67),de(119,mQ,88,11,"div",68),de(120,gQ,15,0,"div",69),de(121,vQ,15,0,"div",69),de(122,CQ,18,18,"div",70),S()),n&2&&(M(2),ht(r.orbs),M(9),Te(" ",r.supabase.user()&&r.supabase.username()?r.supabase.username():"Prototipo Alpha 1.0"," "),M(3),fe(r.supabase.user()&&r.supabase.avatarUrl()?14:15),M(104),fe(r.showAuth?118:-1),M(),fe(r.showAccountManager?119:-1),M(),fe(r.showLocalGameModeSelector?120:-1),M(),fe(r.showAIGameModeSelector?121:-1),M(),fe(r.showSetup?122:-1))},dependencies:[_i,dv,n2,Zl,lv,KN,LS,rf,NS],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6366f14d;border-radius:10px}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translate(0)}33%{transform:translate(30px,-50px)}66%{transform:translate(-20px,20px)}}.animate-float-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float infinite ease-in-out}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out}@keyframes _ngcontent-%COMP%_gradient-shift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.animate-gradient-shift[_ngcontent-%COMP%]{background-size:200% 200%;animation:_ngcontent-%COMP%_gradient-shift 15s ease infinite}@keyframes _ngcontent-%COMP%_pulse-subtle{0%,to{filter:drop-shadow(0 0 30px rgba(251,191,36,.5))}50%{filter:drop-shadow(0 0 50px rgba(251,191,36,.8))}}.animate-pulse-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-subtle 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.animate-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-up .4s ease-out forwards}"]})}};var SQ=()=>[1,2],bQ=(t,e)=>e.id;function xQ(t,e){if(t&1&&Bt(0,"img",38),t&2){let n=O().$implicit;Tl("src",n.preview_image_url,Sl)}}function TQ(t,e){t&1&&(j(0,"span",39),b(1,"\u{1F4E6}"),Y())}function IQ(t,e){if(t&1&&(j(0,"div",40),b(1),Y()),t&2){let n=O().$implicit;M(),Te(" \u20AC ",n.price_eur," ")}}function AQ(t,e){t&1&&(j(0,"div",41),b(1," Gratis "),Y())}function DQ(t,e){if(t&1){let n=Re();j(0,"div",24)(1,"div",37),de(2,xQ,1,1,"img",38)(3,TQ,2,0,"span",39),de(4,IQ,2,1,"div",40)(5,AQ,2,0,"div",41),Y(),j(6,"div",28)(7,"div",29)(8,"h3",42),b(9),Y(),j(10,"p",43),b(11),Y()(),j(12,"div",32)(13,"button",44),Jt("click",function(){let i=G(n).$implicit,s=O(2);return q(s.useKit(i))}),b(14),Y()()()()}if(t&2){let n=e.$implicit;M(2),fe(n.preview_image_url?2:3),M(2),fe(n.price_eur>0?4:5),M(5),Be(n.name),M(2),Te(" ",n.author_name||"The King Official"," "),M(3),Te(" ",n.price_eur>0?"Acquista":"Installa"," ")}}function kQ(t,e){t&1&&(j(0,"div",36)(1,"span",45),b(2,"\u2728"),Y(),j(3,"p",46),b(4,"Nuovi Kit in Arrivo"),Y()())}function MQ(t,e){if(t&1){let n=Re();j(0,"div",18)(1,"div",20)(2,"div")(3,"h2",21),b(4,"Collezione Standard"),Y(),j(5,"p",22),b(6,"Set pronti all'uso per personalizzare la tua scacchiera"),Y()()(),j(7,"div",23)(8,"div",24)(9,"div",25)(10,"span",26),b(11,"\u265F\uFE0F"),Y(),j(12,"div",27),b(13,"Default"),Y()(),j(14,"div",28)(15,"div",29)(16,"h3",30),b(17,"Classic Kit v1"),Y(),j(18,"p",31),b(19,"Il set originale di The King"),Y()(),j(20,"div",32)(21,"button",33),Jt("click",function(){G(n);let i=O();return q(i.useKit("default"))}),j(22,"span"),b(23,"Installa"),Y(),Je(),j(24,"svg",34),Bt(25,"path",35),Y()()()()(),ft(26,DQ,15,5,"div",24,bQ),ft(28,kQ,5,0,"div",36,Yo),Y()()}if(t&2){let n=O();M(26),ht(n.assets),M(2),ht(ld(0,SQ))}}function NQ(t,e){t&1&&(j(0,"div",19)(1,"div",47)(2,"span",48),b(3,"\u{1F48E}"),Y()(),j(4,"h2",49),b(5,"Premium Shop"),Y(),j(6,"p",50),b(7,"Funzionalit\xE0 in fase di sviluppo."),Y()())}function RQ(t,e){t&1&&(j(0,"div",19)(1,"div",51)(2,"span",48),b(3,"\u{1F30D}"),Y()(),j(4,"h2",49),b(5,"Community"),Y(),j(6,"p",50),b(7,"Funzionalit\xE0 in fase di sviluppo."),Y()())}var pv=class t{constructor(){this.supabase=Q(xn);this.gameService=Q(Tn);this.assets=[];this.loading=!0;this.activeTab="free"}ngOnInit(){this.fetchAssets()}async fetchAssets(){this.loading=!0;try{let{data:e,error:n}=await this.supabase.client.from("asset_collections").select("*").eq("is_public",!0);!n&&e&&(this.assets=e)}catch(e){console.error("Error fetching assets:",e)}finally{this.loading=!1}}useKit(e){if(e==="default")this.gameService.pieceStyle.set("classic"),this.gameService.customMeshUrls.set({}),this.saveUserPreference("default"),alert("Kit Classic v1 Attivato! \u{1F451}");else if(typeof e!="string"){if(e.price_eur>0){alert("Il sistema di pagamenti sar\xE0 disponibile a breve!");return}console.log("Activating Kit:",e.name),this.gameService.customMeshUrls.set(e.assets),this.gameService.pieceStyle.set("custom"),this.saveUserPreference(e.id),alert(`Kit ${e.name} installato con successo!`)}}async saveUserPreference(e){let n=this.supabase.user();if(n)try{let{error:r}=await this.supabase.client.from("profiles").update({current_kit_id:e}).eq("id",n.id);r&&console.error("Error saving kit preference:",r)}catch(r){console.warn("Could not persist kit preference",r)}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-marketplace-view"]],decls:34,vars:11,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950/98","backdrop-blur-3xl","animate-fade-in","font-sans"],[1,"relative","z-10","px-6","py-6","md:px-12","flex","items-center","justify-between","border-b","border-white/5","bg-slate-900/40","shadow-2xl"],[1,"flex","items-center","gap-6"],[1,"w-12","h-12","rounded-2xl","bg-slate-800","hover:bg-slate-700","border","border-white/10","hover:border-indigo-400/50","transition-all","flex","items-center","justify-center","group","shadow-xl",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-6","h-6","text-slate-400","group-hover:text-indigo-400","transition-colors"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"text-3xl","md:text-4xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-indigo-400/80","text-[10px]","md:text-xs","font-black","uppercase","tracking-[0.4em]"],[1,"hidden","md:flex","items-center","gap-6"],[1,"flex","flex-col","items-end"],[1,"text-[10px]","text-slate-500","font-black","uppercase","tracking-widest"],[1,"text-xl","font-black","text-white","uppercase","tracking-tighter"],[1,"px-6","py-3","bg-indigo-600","rounded-xl","font-black","uppercase","text-[10px]","tracking-widest","shadow-[0_0_20px_rgba(79,70,229,0.4)]","hover:scale-105","transition-all","text-white"],[1,"px-6","md:px-12","pt-8","flex","gap-4","overflow-x-auto","scrollbar-hide","shrink-0"],[1,"px-8","py-3","rounded-2xl","font-black","uppercase","text-xs","tracking-widest","transition-all","border","border-white/5","min-w-[160px]","whitespace-nowrap",3,"click"],[1,"px-8","py-3","bg-slate-900/30","text-slate-600","rounded-2xl","font-black","uppercase","text-xs","tracking-widest","border","border-white/5","opacity-60","min-w-[160px]","flex","items-center","justify-between","gap-3","cursor-not-allowed",3,"click"],[1,"px-2","py-0.5","bg-black/40","rounded","text-[8px]"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-6","md:p-12"],[1,"max-w-[1600px]","mx-auto","space-y-12","animate-fade-in"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-fade-in","opacity-50"],[1,"flex","items-end","justify-between","border-b","border-white/5","pb-4"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tight"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","mt-1"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-8"],[1,"group","relative","bg-slate-900/40","border","border-white/5","rounded-[2rem]","overflow-hidden","hover:border-indigo-500/30","transition-all","hover:translate-y-[-4px]","shadow-2xl","flex","flex-col"],[1,"aspect-[4/3]","bg-slate-950","relative","overflow-hidden","flex","items-center","justify-center","group-hover:bg-slate-900","transition-colors"],[1,"text-6xl","group-hover:scale-110","transition-transform","duration-500","filter","drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]"],[1,"absolute","top-4","left-4","px-3","py-1","bg-slate-800/80","backdrop-blur-md","text-white/80","text-[9px]","font-black","uppercase","rounded-lg","tracking-widest","border","border-white/10"],[1,"p-6","flex","flex-col","flex-1"],[1,"mb-4"],[1,"text-lg","font-black","text-white","uppercase","tracking-tighter","mb-1"],[1,"text-[10px]","text-slate-500","font-bold","uppercase","tracking-widest"],[1,"mt-auto"],[1,"w-full","py-3","bg-white/5","hover:bg-indigo-600","text-slate-400","hover:text-white","border","border-white/5","hover:border-indigo-400/50","rounded-xl","font-black","uppercase","tracking-[0.2em]","text-[10px]","transition-all","flex","items-center","justify-center","gap-2","group/btn",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-4","h-4","opacity-0","group-hover/btn:opacity-100","transition-opacity","translate-x-[-10px]","group-hover/btn:translate-x-0"],["d","M5 12h14M12 5l7 7-7 7"],[1,"border","border-dashed","border-white/5","rounded-[2rem]","flex","flex-col","items-center","justify-center","p-8","opacity-30","select-none","min-h-[300px]"],[1,"aspect-[4/3]","bg-slate-950","relative","overflow-hidden","flex","items-center","justify-center"],[1,"w-full","h-full","object-cover","opacity-80","group-hover:opacity-100","transition-all","duration-700","group-hover:scale-105",3,"src"],[1,"text-6xl","filter","drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]"],[1,"absolute","top-4","right-4","bg-amber-500","text-black","px-3","py-1","rounded-lg","text-[10px]","font-black","uppercase","tracking-wider","shadow-lg"],[1,"absolute","top-4","right-4","bg-emerald-500","text-black","px-3","py-1","rounded-lg","text-[10px]","font-black","uppercase","tracking-wider","shadow-lg"],[1,"text-lg","font-black","text-white","uppercase","tracking-tighter","mb-1","truncate"],[1,"text-[10px]","text-indigo-400","font-bold","uppercase","tracking-widest","truncate"],[1,"w-full","py-3","bg-indigo-600","hover:bg-indigo-500","text-white","rounded-xl","font-black","uppercase","tracking-[0.2em]","text-[10px]","transition-all","shadow-[0_0_20px_rgba(79,70,229,0.3)]","hover:shadow-[0_0_30px_rgba(79,70,229,0.5)]","transform","active:scale-95",3,"click"],[1,"text-4xl","mb-4","grayscale"],[1,"text-[9px]","font-black","uppercase","tracking-[0.3em]","text-center"],[1,"w-24","h-24","rounded-[2rem]","bg-amber-600/10","border","border-amber-500/20","flex","items-center","justify-center","mb-6"],[1,"text-5xl"],[1,"text-3xl","font-black","text-white","uppercase","tracking-tighter","mb-2"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","max-w-md"],[1,"w-24","h-24","rounded-[2rem]","bg-emerald-600/10","border","border-emerald-500/20","flex","items-center","justify-center","mb-6"]],template:function(n,r){n&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Jt("click",function(){return r.gameService.setView("home")}),Je(),j(4,"svg",4),Bt(5,"path",5),Y()(),Ct(),j(6,"div")(7,"h1",6),b(8,"THE KING SHOP"),Y(),j(9,"p",7),b(10,"Design & Custom Assets"),Y()()(),j(11,"div",8)(12,"div",9)(13,"p",10),b(14,"Saldo Disponibile"),Y(),j(15,"p",11),b(16,"0.00 \u20AC"),Y()(),j(17,"button",12),b(18,"Ricarica"),Y()()(),j(19,"div",13)(20,"button",14),Jt("click",function(){return r.activeTab="free"}),b(21," Libreria Gratis "),Y(),j(22,"button",15),Jt("click",function(){return r.activeTab="paid"}),b(23," Premium Pack "),j(24,"span",16),b(25,"Soon"),Y()(),j(26,"button",15),Jt("click",function(){return r.activeTab="community"}),b(27," Community "),j(28,"span",16),b(29,"Soon"),Y()()(),j(30,"div",17),de(31,MQ,30,1,"div",18),de(32,NQ,8,0,"div",19),de(33,RQ,8,0,"div",19),Y()()),n&2&&(M(20),Ze("bg-indigo-600",r.activeTab==="free")("text-white",r.activeTab==="free")("bg-slate-900_50",r.activeTab!=="free")("text-slate-500",r.activeTab!=="free"),M(11),fe(r.activeTab==="free"?31:-1),M(),fe(r.activeTab==="paid"?32:-1),M(),fe(r.activeTab==="community"?33:-1))},dependencies:[_i],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6366f133;border-radius:10px}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s cubic-bezier(.16,1,.3,1)}"]})}};function PQ(t,e){if(t&1){let n=Re();j(0,"div",20)(1,"div",2)(2,"div",23),Je(),j(3,"svg",24),Bt(4,"path",25),Y()(),Ct(),j(5,"div")(6,"h3",26),b(7,"Partita in Corso"),Y(),j(8,"p",27),b(9),Y()()(),j(10,"div",28)(11,"button",29),Jt("click",function(){G(n);let i=O();return q(i.resumeGame())}),b(12," Riprendi "),Y(),j(13,"button",30),Jt("click",function(){G(n);let i=O();return q(i.abandonSavedGame())}),b(14," Abbandona "),Y()()()}if(t&2){let n=O();M(9),Te("Livello ",n.savedGame.level," \u2022 Hai ancora una mossa!")}}function LQ(t,e){t&1&&Bt(0,"div",32)}function OQ(t,e){if(t&1&&(j(0,"span"),b(1),Y(),j(2,"span",34),b(3),Y()),t&2){let n=O().$implicit,r=Dm(1),i=O();xm(km("text-2xl font-black ",r?"text-orange-400":"text-white"," group-hover:scale-110 transition-transform")),M(),Be(n),M(2),Be(n<(i.activeMode==="chess"?i.currentChessLevel:i.currentCheckersLevel)?"Completato":"Inizia")}}function FQ(t,e){t&1&&(Je(),j(0,"svg",33),Bt(1,"rect",35)(2,"path",36),Y())}function VQ(t,e){if(t&1){let n=Re();Im(0)(1),j(2,"button",31),Jt("click",function(){let i=G(n).$implicit,s=Dm(0),o=O();return q(s?o.startLevel(i):null)}),de(3,LQ,1,0,"div",32),de(4,OQ,4,5)(5,FQ,3,0,":svg:svg",33),Y()}if(t&2){let n=e.$implicit,r=O(),i=Am(n<=(r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel));M();let s=Am(n===(r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel));M(),xm(km(`group relative aspect-square rounded-2xl flex flex-col items-center justify-center transition-all duration-300
                         `,i?"bg-slate-900 hover:bg-slate-800 border-white/10":"bg-slate-950 border-white/5 cursor-not-allowed",`
                         border hover:border-orange-500/40 shadow-xl overflow-hidden`)),Ze("opacity-40",!i)("grayscale",!i)("scale-105",s)("ring-4",s)("ring-orange-500/50",s),Tl("disabled",!i),M(),fe(s&&i?3:-1),M(),fe(i?4:5)}}var mv=class t{constructor(){this.supabase=Q(xn);this.gameService=Q(Tn);this.activeMode="chess";this.currentChessLevel=1;this.currentCheckersLevel=1;this.totalPoints=0;this.savedGame=null;this.loading=!0;this.levels=Array.from({length:100},(e,n)=>n+1)}ngOnInit(){this.loadProgress()}async loadProgress(){this.loading=!0;let e=await this.supabase.getCareerProgress();e&&(this.currentChessLevel=e.chess_level||1,this.currentCheckersLevel=e.checkers_level||1,this.totalPoints=e.total_points||0,this.savedGame=e.current_game_state),this.loading=!1}startLevel(e){this.gameService.startGame(this.activeMode,"career",e)}resumeGame(){this.savedGame&&(this.gameService.gameMode.set(this.savedGame.type),this.gameService.playerMode.set("career"),this.gameService.careerLevel.set(this.savedGame.level),this.gameService.board.set(this.savedGame.state.board),this.gameService.turn.set(this.savedGame.state.turn),this.gameService.lastMove.set(this.savedGame.state.lastMove),this.gameService.viewState.set("game"))}async abandonSavedGame(){await this.supabase.clearSavedGame(),this.savedGame=null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-career-view"]],decls:32,vars:15,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950/98","backdrop-blur-3xl","animate-fade-in","overflow-hidden"],[1,"relative","z-10","px-6","py-6","md:px-12","flex","items-center","justify-between","border-b","border-white/5","bg-slate-900/40"],[1,"flex","items-center","gap-6"],[1,"w-12","h-12","rounded-2xl","bg-slate-800","hover:bg-slate-700","border","border-white/10","hover:border-orange-400/50","transition-all","flex","items-center","justify-center","group","shadow-xl",3,"click"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","8",1,"w-6","h-6","text-slate-400","group-hover:text-orange-400","transition-colors"],["d","M70 20 L30 50 L70 80","stroke-linecap","round","stroke-linejoin","round"],[1,"text-3xl","md:text-4xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-orange-400/80","text-[10px]","md:text-xs","font-bold","uppercase","tracking-widest"],[1,"flex","items-center","gap-4","bg-slate-950/60","px-6","py-3","rounded-2xl","border","border-orange-500/20","shadow-[0_0_20px_rgba(249,115,22,0.1)]"],[1,"text-right"],[1,"text-[10px]","text-slate-500","font-bold","uppercase","tracking-widest","leading-none"],[1,"text-xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-orange-400","to-yellow-400"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-br","from-orange-500","to-amber-600","flex","items-center","justify-center","shadow-lg","animate-pulse-subtle"],["viewBox","0 0 24 24","fill","white",1,"w-6","h-6"],["d","M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"],[1,"flex","justify-center","p-6","bg-slate-900/20"],[1,"flex","p-1.5","bg-slate-900","rounded-2xl","border","border-white/5","shadow-2xl"],[1,"px-8","py-3","rounded-xl","font-black","uppercase","text-xs","tracking-widest","transition-all",3,"click"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-6","md:p-12"],[1,"max-w-6xl","mx-auto"],[1,"mb-12","p-8","rounded-[2.5rem]","bg-gradient-to-r","from-orange-600/20","to-amber-600/10","border","border-orange-500/30","backdrop-blur-md","shadow-2xl","flex","flex-col","md:flex-row","items-center","justify-between","gap-6"],[1,"grid","grid-cols-2","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-10","gap-4","md:gap-6"],[3,"disabled","opacity-40","grayscale","scale-105","ring-4","ring-orange-500/50","class"],[1,"w-20","h-20","rounded-3xl","bg-orange-500","flex","items-center","justify-center","shadow-[0_10px_30px_rgba(249,115,22,0.4)]"],["viewBox","0 0 24 24","fill","white",1,"w-10","h-10","animate-bounce-subtle"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-orange-400","font-bold","uppercase","text-xs","tracking-widest"],[1,"flex","gap-4","w-full","md:w-auto"],[1,"flex-1","md:flex-none","px-10","py-4","bg-orange-500","hover:bg-orange-400","text-white","font-black","rounded-2xl","shadow-xl","transition-all","uppercase","tracking-widest","text-xs",3,"click"],[1,"px-6","py-4","bg-slate-800","hover:bg-rose-900/40","text-slate-400","hover:text-rose-400","font-black","rounded-2xl","transition-all","uppercase","tracking-widest","text-[10px]","border","border-white/5",3,"click"],[3,"click","disabled"],[1,"absolute","inset-0","bg-gradient-to-br","from-orange-500/20","to-amber-500/20","animate-pulse"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-6","h-6","text-slate-700"],[1,"text-[8px]","font-bold","text-slate-500","uppercase","tracking-widest","mt-1"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"]],template:function(n,r){n&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Jt("click",function(){return r.gameService.setView("home")}),Je(),j(4,"svg",4),Bt(5,"path",5),Y()(),Ct(),j(6,"div")(7,"h1",6),b(8,"Carriera Reale"),Y(),j(9,"p",7),b(10),Y()()(),j(11,"div",8)(12,"div",9)(13,"p",10),b(14,"Punti Gloria"),Y(),j(15,"p",11),b(16),Y()(),j(17,"div",12),Je(),j(18,"svg",13),Bt(19,"path",14),Y()()()(),Ct(),j(20,"div",15)(21,"div",16)(22,"button",17),Jt("click",function(){return r.activeMode="chess"}),b(23," Scacchi "),Y(),j(24,"button",17),Jt("click",function(){return r.activeMode="checkers"}),b(25," Dama "),Y()()(),j(26,"div",18)(27,"div",19),de(28,PQ,15,1,"div",20),j(29,"div",21),ft(30,VQ,6,18,"button",22,Yo),Y()()()()),n&2&&(M(10),Te("Ascesa al Trono \u2022 Livello ",r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel),M(6),Be(r.totalPoints),M(6),Ze("bg-orange-500",r.activeMode==="chess")("text-white",r.activeMode==="chess")("text-slate-500",r.activeMode!=="chess"),M(2),Ze("bg-orange-500",r.activeMode==="checkers")("text-white",r.activeMode==="checkers")("text-slate-500",r.activeMode!=="checkers"),M(4),fe(r.savedGame&&r.savedGame.type===r.activeMode?28:-1),M(2),ht(r.levels))},dependencies:[_i],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#f973164d;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s ease-out}@keyframes _ngcontent-%COMP%_pulse-subtle{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.animate-pulse-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-subtle 2s infinite ease-in-out}@keyframes _ngcontent-%COMP%_bounce-subtle{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.animate-bounce-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-subtle 2s infinite ease-in-out}"]})}};var c2=(t,e)=>e.id;function BQ(t,e){if(t&1){let n=Re();E(0,"tr",30)(1,"td",31)(2,"span",32),b(3),S()(),E(4,"td",31)(5,"span",33),b(6),S()(),E(7,"td",31)(8,"span",34),b(9),TE(10,"date"),S()(),E(11,"td",31)(12,"span",35),b(13),S()(),E(14,"td",36)(15,"button",37),H("click",function(){let i=G(n).$implicit,s=O(2);return q(s.deleteUser(i.id))}),b(16,"Elimina"),S()()()}if(t&2){let n=e.$implicit;M(3),Be(n.username),M(3),Be(n.email),M(3),Be(IE(10,12,n.created_at,"dd/MM/yyyy")),M(3),Ze("bg-emerald-500/10",n.is_active)("text-emerald-400",n.is_active)("bg-rose-500/10",!n.is_active)("text-rose-400",!n.is_active),M(),Te(" ",n.is_active?"Attivo":"Non Attivo"," ")}}function UQ(t,e){if(t&1){let n=Re();E(0,"div",17)(1,"div",20)(2,"div")(3,"h2",21),b(4,"Utenti Iscritti"),S(),E(5,"p",22),b(6),S()(),E(7,"button",23),H("click",function(){G(n);let i=O();return q(i.fetchUsers())}),E(8,"span"),b(9,"\u{1F504}"),S(),b(10," Aggiorna Lista "),S()(),E(11,"div",24)(12,"div",25)(13,"table",26)(14,"thead")(15,"tr",27)(16,"th",28),b(17,"Username"),S(),E(18,"th",28),b(19,"Email"),S(),E(20,"th",28),b(21,"Registrato"),S(),E(22,"th",28),b(23,"Status"),S(),E(24,"th",29),b(25,"Azioni"),S()()(),E(26,"tbody"),ft(27,BQ,17,15,"tr",30,c2),S()()()()()}if(t&2){let n=O();M(6),Te("Totale Account: ",n.users.length),M(21),ht(n.users)}}function $Q(t,e){t&1&&(he(0,"div",69),E(1,"span"),b(2,"Pubblicazione..."),S())}function HQ(t,e){t&1&&(E(0,"span"),b(1,"\u{1F680} Pubblica Kit"),S())}function GQ(t,e){t&1&&(E(0,"div",72),Je(),E(1,"svg",76),he(2,"path",77),S()())}function qQ(t,e){if(t&1&&(E(0,"span",75),b(1),S()),t&2){let n=O().$implicit;M(),Be(n.file.name)}}function jQ(t,e){if(t&1){let n=Re();E(0,"label",65)(1,"input",70),H("change",function(i){let s=G(n).$implicit,o=O(2);return q(o.onFileSelected(i,s))}),S(),E(2,"div",71),de(3,GQ,3,0,"div",72),E(4,"span",73),b(5),S(),E(6,"span",74),b(7),S(),de(8,qQ,2,1,"span",75),S()()}if(t&2){let n=e.$implicit;M(2),Ze("border-emerald-500-50",n.status==="ready")("bg-emerald-900-10",n.status==="ready")("opacity-100",n.status==="ready"),M(),fe(n.status==="ready"?3:-1),M(2),Be(n.icon),M(),Ze("text-emerald-400",n.status==="ready")("text-slate-500",n.status!=="ready")("group-hover-text-indigo-300",n.status!=="ready"),M(),Te(" ",n.label," "),M(),fe(n.file?8:-1)}}function WQ(t,e){if(t&1){let n=Re();E(0,"div",18)(1,"div",38)(2,"div")(3,"h2",21),b(4,"Gestione Kit 3D"),S(),E(5,"p",39),b(6,"Carica e Configura set completi per lo Shop"),S()()(),E(7,"div",40)(8,"div",41)(9,"div",42)(10,"h3",43)(11,"span",44),b(12,"\u2699\uFE0F"),S(),b(13," Configurazione "),S(),E(14,"div",45)(15,"div")(16,"label",46),b(17,"Nome del Kit"),S(),E(18,"input",47),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.newKit.name,i)||(s.newKit.name=i),q(i)}),S()(),E(19,"div",48)(20,"div")(21,"label",46),b(22,"Tipo Gioco"),S(),E(23,"select",49),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.newKit.type,i)||(s.newKit.type=i),q(i)}),H("change",function(){G(n);let i=O();return q(i.updateSlots())}),E(24,"option",50),b(25,"Scacchi"),S(),E(26,"option",51),b(27,"Dama"),S()()(),E(28,"div")(29,"label",46),b(30,"Prezzo (\u20AC)"),S(),E(31,"input",52),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.newKit.price,i)||(s.newKit.price=i),q(i)}),S()()(),E(32,"div",53)(33,"label",54)(34,"input",55),lr("ngModelChange",function(i){G(n);let s=O();return Or(s.newKit.isPublic,i)||(s.newKit.isPublic=i),q(i)}),S(),E(35,"span",56),b(36,"Visibile nello Shop"),S()()(),E(37,"button",57),H("click",function(){G(n);let i=O();return q(i.publishKit())}),de(38,$Q,3,0)(39,HQ,2,0,"span"),S()()()(),E(40,"div",58)(41,"div",59)(42,"h3",60)(43,"span",61)(44,"span",62),b(45,"\u{1F4E6}"),S(),b(46," Asset Richiesti"),S(),E(47,"span",63),b(48),S()(),E(49,"div",64),ft(50,jQ,9,16,"label",65,c2),S(),E(52,"div",66)(53,"span",67),b(54,"\u{1F4A1}"),S(),E(55,"p",68),b(56," Assicurati che i modelli 3D siano centrati e scalati correttamente prima dell'upload. I file verranno rinominati automaticamente e salvati nella cloud di THE KING. "),S()()()()()()}if(t&2){let n=O();M(18),ar("ngModel",n.newKit.name),M(5),ar("ngModel",n.newKit.type),M(8),ar("ngModel",n.newKit.price),M(3),ar("ngModel",n.newKit.isPublic),M(3),Lr("disabled",n.uploading),M(),fe(n.uploading?38:39),M(10),Tm("",n.countReadySlots()," / ",n.assetSlots.length," Pronti"),M(2),ht(n.assetSlots)}}function zQ(t,e){t&1&&(E(0,"div",19)(1,"div",78)(2,"span",79),b(3,"\u2696\uFE0F"),S()(),E(4,"h2",80),b(5,"Area Approvazioni"),S(),E(6,"p",81),b(7,"Nessun kit in attesa di revisione."),S()())}var gv=class t{constructor(){this.supabase=Q(xn);this.gameService=Q(Tn);this.activeTab="users";this.users=[];this.loading=!1;this.uploading=!1;this.newKit={name:"",price:0,type:"chess",isPublic:!1};this.assetSlots=[]}ngOnInit(){this.fetchUsers(),this.updateSlots()}async fetchUsers(){this.loading=!0;try{let{data:e,error:n}=await this.supabase.client.from("profiles").select("*").order("created_at",{ascending:!1});!n&&e&&(this.users=e.map(r=>ne(D({},r),{is_active:!0})))}catch(e){console.error("Error fetching users",e)}finally{this.loading=!1}}async deleteUser(e){if(confirm("Sei sicuro di voler eliminare questo utente? L'azione \xE8 irreversibile."))try{await this.supabase.client.from("career_progress").delete().eq("user_id",e);let{error:n}=await this.supabase.client.from("profiles").delete().eq("id",e);n?alert("Errore eliminazione utente."):(this.users=this.users.filter(r=>r.id!==e),alert("Utente eliminato."))}catch(n){console.error(n)}}updateSlots(){this.assetSlots=[],this.assetSlots.push({id:"board",label:"Scacchiera",icon:"\u{1F532}",file:null,uploadedUrl:null,status:"pending"}),this.newKit.type==="chess"?[{id:"p",label:"Pedone",icon:"\u265F\uFE0F"},{id:"r",label:"Torre",icon:"\u265C"},{id:"n",label:"Cavallo",icon:"\u265E"},{id:"b",label:"Alfiere",icon:"\u265D"},{id:"q",label:"Regina",icon:"\u265B"},{id:"k",label:"Re",icon:"\u265A"}].forEach(n=>{this.assetSlots.push({id:`${n.id}_w`,label:`${n.label} Bianco`,icon:n.icon,file:null,uploadedUrl:null,status:"pending"}),this.assetSlots.push({id:`${n.id}_b`,label:`${n.label} Nero`,icon:n.icon,file:null,uploadedUrl:null,status:"pending"})}):[{id:"cm",label:"Pedina",icon:"\u26AA"},{id:"ck",label:"Dama",icon:"\u{1F451}"}].forEach(n=>{this.assetSlots.push({id:`${n.id}_w`,label:`${n.label} Bianca`,icon:n.icon,file:null,uploadedUrl:null,status:"pending"}),this.assetSlots.push({id:`${n.id}_b`,label:`${n.label} Nera`,icon:n.icon,file:null,uploadedUrl:null,status:"pending"})})}onFileSelected(e,n){let r=e.target;r.files&&r.files[0]&&(n.file=r.files[0],n.status="ready")}countReadySlots(){return this.assetSlots.filter(e=>e.status==="ready").length}async publishKit(){if(!this.newKit.name.trim()){alert("Inserisci un nome per il Kit.");return}let e=this.assetSlots.filter(n=>n.status==="ready");if(e.length===0){alert("Carica almeno un asset per procedere.");return}if(!(e.length<this.assetSlots.length&&!confirm(`Hai caricato solo ${e.length} su ${this.assetSlots.length} asset. Vuoi procedere comunque? (Gli asset mancanti useranno il default)`))){this.uploading=!0;try{let n=this.newKit.name.toLowerCase().replace(/\\s+/g,"_")+"_"+Date.now(),r={};for(let o of e){if(!o.file)continue;o.status="uploading";let a=o.file.name.split(".").pop()||"glb",l=`kits/${n}/${o.id}.${a}`,{error:c}=await this.supabase.client.storage.from("custom_assets").upload(l,o.file,{upsert:!0});if(c)throw c;let{data:u}=this.supabase.client.storage.from("custom_assets").getPublicUrl(l);r[o.id]=u.publicUrl,o.status="done"}let i={id:n,name:this.newKit.name,type:this.newKit.type,price_eur:this.newKit.price,assets:r,is_public:this.newKit.isPublic,created_at:new Date().toISOString()},{error:s}=await this.supabase.client.from("asset_collections").insert(i);if(s)throw s;alert("\u2705 Kit Pubblicato con Successo!"),this.resetForm()}catch(n){console.error("Publish Error",n),alert("Errore durante la pubblicazione: "+n.message)}finally{this.uploading=!1}}}resetForm(){this.newKit={name:"",price:0,type:"chess",isPublic:!1},this.updateSlots()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-admin-view"]],decls:36,vars:21,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950","text-white","overflow-hidden","font-sans"],[1,"px-6","py-4","md:px-8","md:py-6","bg-slate-900","border-b","border-white/10","flex","items-center","justify-between","shadow-2xl","z-20"],[1,"flex","items-center","gap-4","md:gap-6"],[1,"w-10","h-10","md:w-12","md:h-12","rounded-xl","bg-slate-800","hover:bg-slate-700","border","border-white/10","flex","items-center","justify-center","transition-all","group","shadow-lg",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-5","h-5","md:w-6","md:h-6","text-slate-400","group-hover:text-indigo-400","transition-colors"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"text-xl","md:text-2xl","font-black","uppercase","tracking-tighter"],[1,"text-indigo-500","text-[10px]","font-black","uppercase","tracking-[0.3em]"],[1,"flex","items-center","gap-4"],[1,"hidden","md:block","px-4","py-2","bg-emerald-500/10","border","border-emerald-500/20","rounded-lg"],[1,"text-emerald-500","text-[10px]","font-black","uppercase","tracking-widest"],[1,"flex-1","flex","flex-col","md:flex-row","overflow-hidden","relative","z-10"],[1,"w-full","md:w-64","bg-slate-900/50","border-b","md:border-r","border-white/5","p-4","md:p-6","flex","flex-row","md:flex-col","gap-2","overflow-x-auto","scrollbar-hide","shrink-0"],[1,"whitespace-nowrap","md:w-full","text-left","px-4","py-3","rounded-xl","font-black","uppercase","text-xs","tracking-widest","transition-all","flex","items-center","gap-3",3,"click"],[1,"text-lg"],[1,"hidden","md:inline"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-6","md:p-10","bg-slate-950"],[1,"space-y-8","animate-fade-in","max-w-6xl","mx-auto"],[1,"space-y-10","animate-fade-in","max-w-5xl","mx-auto","pb-20"],[1,"flex","flex-col","items-center","justify-center","py-24","text-center","min-h-[50vh]"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-end","gap-4"],[1,"text-3xl","md:text-4xl","font-black","uppercase","tracking-tighter"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","mt-1"],[1,"px-6","py-3","bg-slate-800","hover:bg-slate-700","rounded-xl","text-[10px]","font-black","uppercase","tracking-widest","border","border-white/10","transition-all","flex","items-center","gap-2",3,"click"],[1,"bg-slate-900/40","border","border-white/5","rounded-[2rem]","overflow-hidden","shadow-2xl"],[1,"overflow-x-auto"],[1,"w-full","border-collapse","min-w-[600px]"],[1,"bg-black/20","border-b","border-white/5","text-left"],[1,"px-6","py-4","text-[10px]","font-black","text-slate-500","uppercase","tracking-widest"],[1,"px-6","py-4","text-[10px]","font-black","text-slate-500","uppercase","tracking-widest","text-right"],[1,"border-b","border-white/5","hover:bg-white/5","transition-colors","group"],[1,"px-6","py-4"],[1,"font-bold","text-white","group-hover:text-indigo-400","transition-colors"],[1,"text-slate-400","text-sm"],[1,"text-slate-500","text-[10px]","uppercase","font-bold"],[1,"px-2","py-1","rounded","text-[9px]","font-black","uppercase","tracking-wider"],[1,"px-6","py-4","text-right"],[1,"px-4","py-2","bg-rose-500/10","text-rose-500","hover:bg-rose-500","hover:text-white","rounded-lg","text-[9px]","font-black","uppercase","tracking-widest","transition-all",3,"click"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-end","gap-6","border-b","border-white/5","pb-8"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","mt-2"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1","space-y-6"],[1,"bg-indigo-900/10","border","border-indigo-500/20","rounded-[2rem]","p-6","md:p-8","space-y-6","sticky","top-6"],[1,"text-lg","font-black","uppercase","tracking-tight","text-white","flex","items-center","gap-3"],[1,"p-2","bg-indigo-500/20","rounded-lg","text-lg"],[1,"space-y-4"],[1,"text-[10px]","font-black","text-slate-500","uppercase","tracking-widest","mb-2","block"],["type","text","placeholder","es. Classic Ivory",1,"w-full","bg-slate-900","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-indigo-500","outline-none","transition-colors","text-white","placeholder-slate-600","font-bold",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],[1,"w-full","bg-slate-900","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-indigo-500","outline-none","transition-colors","text-white","font-bold","appearance-none",3,"ngModelChange","change","ngModel"],["value","chess"],["value","checkers"],["type","number","min","0","step","0.5",1,"w-full","bg-slate-900","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-indigo-500","outline-none","transition-colors","text-white","font-bold",3,"ngModelChange","ngModel"],[1,"pt-4","border-t","border-white/5"],[1,"flex","items-center","gap-3","cursor-pointer","group"],["type","checkbox",1,"w-5","h-5","rounded","border-white/20","bg-slate-800","text-indigo-500","focus:ring-offset-0","focus:ring-0",3,"ngModelChange","ngModel"],[1,"text-xs","font-bold","text-slate-400","group-hover:text-white","transition-colors","uppercase","tracking-wider"],[1,"w-full","py-4","mt-4","bg-indigo-600","hover:bg-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","rounded-xl","font-black","uppercase","text-xs","tracking-widest","shadow-[0_0_20px_rgba(79,70,229,0.3)]","transition-all","transform","active:scale-95","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"lg:col-span-2"],[1,"bg-slate-900/30","border","border-white/5","rounded-[2rem]","p-6","md:p-8"],[1,"text-lg","font-black","uppercase","tracking-tight","text-white","mb-6","flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-slate-800","rounded-lg","text-lg"],[1,"text-[10px]","bg-slate-800","px-3","py-1","rounded-full","text-slate-400","uppercase","tracking-widest"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],[1,"relative","group","cursor-pointer"],[1,"mt-6","flex","items-start","gap-3","p-4","bg-orange-500/10","border","border-orange-500/20","rounded-xl"],[1,"text-xl"],[1,"text-[10px]","text-orange-200/80","font-bold","leading-relaxed"],[1,"w-4","h-4","border-2","border-white/30","border-t-white","rounded-full","animate-spin"],["type","file","accept",".glb,.gltf,.stl",1,"hidden",3,"change"],[1,"h-32","bg-slate-950","border-2","border-dashed","border-white/10","rounded-2xl","flex","flex-col","items-center","justify-center","p-4","transition-all","group-hover:border-indigo-500/50","group-hover:bg-slate-900/80"],[1,"absolute","top-2","right-2","w-5","h-5","bg-emerald-500","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"text-3xl","mb-2","filter","drop-shadow-lg","group-hover:scale-110","transition-transform","duration-300"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-center"],[1,"text-[8px]","text-slate-600","mt-1","truncate","max-w-full","px-2"],["viewBox","0 0 24 24","fill","none","stroke","white","stroke-width","3",1,"w-3","h-3"],["d","M20 6L9 17l-5-5"],[1,"w-24","h-24","rounded-[2rem]","bg-slate-900","border","border-white/10","flex","items-center","justify-center","mb-6","shadow-2xl"],[1,"text-4xl","grayscale","opacity-50"],[1,"text-2xl","font-black","uppercase","tracking-tighter","text-slate-700"],[1,"text-slate-600","text-xs","font-bold","uppercase","tracking-[0.2em]","mt-2","max-w-sm"]],template:function(n,r){n&1&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),H("click",function(){return r.gameService.setView("home")}),Je(),E(4,"svg",4),he(5,"path",5),S()(),Ct(),E(6,"div")(7,"h1",6),b(8,"Pannello Admin"),S(),E(9,"p",7),b(10,"Accesso Autoritizzato"),S()()(),E(11,"div",8)(12,"div",9)(13,"span",10),b(14,"Sistema: Online"),S()()()(),E(15,"div",11)(16,"div",12)(17,"button",13),H("click",function(){return r.activeTab="users"}),E(18,"span",14),b(19,"\u{1F465}"),S(),E(20,"span",15),b(21,"Utenti"),S()(),E(22,"button",13),H("click",function(){return r.activeTab="kits"}),E(23,"span",14),b(24,"\u{1F4E6}"),S(),E(25,"span",15),b(26,"Gestione Kit"),S()(),E(27,"button",13),H("click",function(){return r.activeTab="approval"}),E(28,"span",14),b(29,"\u2696\uFE0F"),S(),E(30,"span",15),b(31,"Approvazioni"),S()()(),E(32,"div",16),de(33,UQ,29,1,"div",17),de(34,WQ,57,8,"div",18),de(35,zQ,8,0,"div",19),S()()()),n&2&&(M(17),Ze("bg-indigo-600",r.activeTab==="users")("text-white",r.activeTab==="users")("text-slate-500",r.activeTab!=="users"),M(5),Ze("bg-indigo-600",r.activeTab==="kits")("text-white",r.activeTab==="kits")("text-slate-500",r.activeTab!=="kits"),M(5),Ze("bg-indigo-600",r.activeTab==="approval")("text-white",r.activeTab==="approval")("text-slate-500",r.activeTab!=="approval"),M(6),fe(r.activeTab==="users"?33:-1),M(),fe(r.activeTab==="kits"?34:-1),M(),fe(r.activeTab==="approval"?35:-1))},dependencies:[_i,dv,i2,o2,Zl,RS,IS,uv,lv,PS,rf,OE],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6366f133;border-radius:10px}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s ease-out}.scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}"]})}};var JQ=()=>["classic","neon","minimal"];function YQ(t,e){if(t&1&&he(0,"app-home-view",2),t&2){let n=O();Lr("showSetup",n.gameService.viewState()==="settings")}}function KQ(t,e){t&1&&he(0,"app-marketplace-view")}function QQ(t,e){t&1&&he(0,"app-career-view")}function XQ(t,e){t&1&&he(0,"app-admin-view")}function ZQ(t,e){if(t&1){let n=Re();E(0,"div",3)(1,"button",5),H("click",function(){G(n);let i=O();return q(i.gameService.setView("home"))}),Je(),E(2,"svg",6),he(3,"path",7),S()()()}}function eX(t,e){if(t&1){let n=Re();E(0,"button",20),H("click",function(){let i=G(n).$implicit,s=O(2);return q(s.gameService.pieceStyle.set(i))}),b(1),S()}if(t&2){let n=e.$implicit,r=O(2);Ze("border-blue-500",r.gameService.pieceStyle()===n),M(),Te(" ",n," ")}}function tX(t,e){if(t&1){let n=Re();E(0,"div",4)(1,"div",8)(2,"div",9)(3,"h2",10),b(4,"Impostazioni Partita"),S(),E(5,"button",11),H("click",function(){G(n);let i=O();return q(i.showMenu=!1)}),b(6,"\u2715"),S()(),E(7,"div",12)(8,"div")(9,"label",13),b(10,"Stile Pezzi"),S(),E(11,"div",14),ft(12,eX,2,3,"button",15,Yo),S()(),E(14,"div")(15,"label",13),b(16,"Effetti Visivi"),S(),E(17,"div",16)(18,"span",17),b(19,"Sfocatura Sfondo Home"),S(),E(20,"input",18),H("change",function(){G(n);let i=O();return q(i.gameService.bgBlur.set(!i.gameService.bgBlur()))}),S()()(),E(21,"button",19),H("click",function(){G(n);let i=O();return q(i.showMenu=!1)}),b(22," Conferma e Chiudi "),S()()()()}if(t&2){let n=O();M(12),ht(ld(1,JQ)),M(8),Lr("checked",n.gameService.bgBlur())}}var vv=class t{constructor(){this.gameService=Q(Tn);this.supabase=Q(xn);this.showAssets=!1;this.showMenu=!1;this.pieceTypes=[{id:"p",label:"Pedone"},{id:"r",label:"Torre"},{id:"n",label:"Cavallo"},{id:"b",label:"Alfiere"},{id:"q",label:"Regina"},{id:"k",label:"Re"}];this.checkerTypes=[{id:"cm",label:"Pedina (Man)"},{id:"ck",label:"Dama (King)"}];this.loadedStatus={board:!1};Uu(async()=>{this.supabase.user()&&(console.log("AppComponent: User detected, loading persistent assets..."),await this.gameService.loadUserAssets())})}toggleMenu(){this.showMenu=!this.showMenu}openImportPanel(){this.showMenu=!1,this.showAssets=!0}getIconForType(e){return{p:"\u265F",r:"\u265C",n:"\u265E",b:"\u265D",q:"\u265B",k:"\u265A"}[e]||"?"}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Gn({type:t,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&Il(Yd,5),n&2){let i;od(i=ad())&&(r.scene=i.first)}},decls:9,vars:10,consts:[[1,"h-screen","w-full","relative","overflow-hidden","bg-slate-950","main-container"],[1,"absolute","inset-0","transition-all","duration-1000"],[3,"showSetup"],[1,"absolute","top-6","left-6","z-40"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-6"],[1,"group","w-12","h-12","md:w-14","md:h-14","rounded-xl","bg-slate-900/80","backdrop-blur-md","border","border-white/10","hover:border-indigo-400/50","text-white","hover:bg-slate-800","transition-all","flex","items-center","justify-center","shadow-lg",3,"click"],["viewBox","0 0 100 100","fill","currentColor",1,"w-6","h-6","md:w-7","md:h-7","text-slate-400","group-hover:text-indigo-400","transition-colors"],["d","M50 20 L20 45 L30 45 L30 80 L45 80 L45 60 L55 60 L55 80 L70 80 L70 45 L80 45 Z"],[1,"bg-slate-900","border","border-white/10","rounded-3xl","p-8","max-w-lg","w-full"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"text-slate-400",3,"click"],[1,"space-y-6"],[1,"text-sm","text-slate-400","mb-2","block","uppercase","tracking-widest","font-bold"],[1,"grid","grid-cols-2","gap-2"],[1,"p-3","rounded-xl","bg-slate-800","border-2","border-transparent","transition-all","capitalize","text-white",3,"border-blue-500"],[1,"flex","items-center","justify-between","p-4","bg-slate-800","rounded-xl"],[1,"text-white"],["type","checkbox",1,"w-6","h-6","rounded","border-white/10","bg-slate-700",3,"change","checked"],[1,"w-full","py-4","bg-blue-600","rounded-2xl","font-bold","text-white","shadow-lg","hover:bg-blue-500","transition-all",3,"click"],[1,"p-3","rounded-xl","bg-slate-800","border-2","border-transparent","transition-all","capitalize","text-white",3,"click"]],template:function(n,r){n&1&&(E(0,"div",0)(1,"div",1),he(2,"app-chess-scene"),S(),de(3,YQ,1,1,"app-home-view",2),de(4,KQ,1,0,"app-marketplace-view"),de(5,QQ,1,0,"app-career-view"),de(6,XQ,1,0,"app-admin-view"),de(7,ZQ,4,0,"div",3),de(8,tX,23,2,"div",4),S()),n&2&&(M(),Ze("blur-xl",r.gameService.viewState()!=="game"&&r.gameService.bgBlur())("scale-110",r.gameService.viewState()!=="game"&&r.gameService.bgBlur()),M(2),fe(r.gameService.viewState()==="home"||r.gameService.viewState()==="settings"?3:-1),M(),fe(r.gameService.viewState()==="marketplace"?4:-1),M(),fe(r.gameService.viewState()==="career"?5:-1),M(),fe(r.gameService.viewState()==="admin"?6:-1),M(),fe(r.gameService.viewState()==="game"?7:-1),M(),fe(r.showMenu?8:-1))},dependencies:[Yd,hv,pv,mv,gv],styles:["@keyframes _ngcontent-%COMP%_float-particle{0%{transform:translateY(0) translate(0)}50%{transform:translateY(-20px) translate(10px)}to{transform:translateY(0) translate(0)}}[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background:transparent}.main-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;background:radial-gradient(ellipse at top,#1e293b,#0f172a,#020617)}.animate-blob[_ngcontent-%COMP%]{animation:blob 15s infinite alternate ease-in-out}.animate-twinkle[_ngcontent-%COMP%]{animation:twinkle 4s infinite ease-in-out}.animate-float-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float-particle 10s infinite ease-in-out}.animate-float-medium[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float-particle 7s infinite ease-in-out}.animation-delay-2000[_ngcontent-%COMP%]{animation-delay:2s}.animation-delay-4000[_ngcontent-%COMP%]{animation-delay:4s}.animation-delay-1000[_ngcontent-%COMP%]{animation-delay:1s}"]})}};console.log("index.tsx: Inizio Bootstrap Application");try{jE(vv,{providers:[AE()]}).then(()=>{console.log("index.tsx: Bootstrap completato con successo")}).catch(t=>{console.error("index.tsx: Errore durante il bootstrap (Promise):",t)})}catch(t){console.error("index.tsx: ERRORE FATALE durante il bootstrap:",t)}
