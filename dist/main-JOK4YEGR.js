import{a as A,b as te}from"./chunk-2NFLSA4Y.js";var xS=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),wa=class t{element=null;classNames=[];attrs=[];notSelectors=[];static parse(e){let n=[],r=(l,c)=>{c.notSelectors.length>0&&!c.element&&c.classNames.length==0&&c.attrs.length==0&&(c.element="*"),l.push(c)},i=new t,s,o=i,a=!1;for(xS.lastIndex=0;s=xS.exec(e);){if(s[1]){if(a)throw new Error("Nesting :not in a selector is not allowed");a=!0,o=new t,i.notSelectors.push(o)}let l=s[2];if(l){let u=s[3];u==="#"?o.addAttribute("id",l.slice(1)):u==="."?o.addClassName(l.slice(1)):o.setElement(l)}let c=s[4];if(c&&o.addAttribute(o.unescapeAttribute(c),s[6]),s[7]&&(a=!1,o=i),s[8]){if(a)throw new Error("Multiple selectors in :not are not supported");r(n,i),i=o=new t}}return r(n,i),n}unescapeAttribute(e){let n="",r=!1;for(let i=0;i<e.length;i++){let s=e.charAt(i);if(s==="\\"){r=!0;continue}if(s==="$"&&!r)throw new Error(`Error in attribute selector "${e}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,n+=s}return n}escapeAttribute(e){return e.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}isElementSelector(){return this.hasElementSelector()&&this.classNames.length==0&&this.attrs.length==0&&this.notSelectors.length===0}hasElementSelector(){return!!this.element}setElement(e=null){this.element=e}getAttrs(){let e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}addAttribute(e,n=""){this.attrs.push(e,n&&n.toLowerCase()||"")}addClassName(e){this.classNames.push(e.toLowerCase())}toString(){let e=this.element||"";if(this.classNames&&this.classNames.forEach(n=>e+=`.${n}`),this.attrs)for(let n=0;n<this.attrs.length;n+=2){let r=this.escapeAttribute(this.attrs[n]),i=this.attrs[n+1];e+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(n=>e+=`:not(${n})`),e}},gf=class t{static createNotMatcher(e){let n=new t;return n.addSelectables(e,null),n}_elementMap=new Map;_elementPartialMap=new Map;_classMap=new Map;_classPartialMap=new Map;_attrValueMap=new Map;_attrValuePartialMap=new Map;_listContexts=[];addSelectables(e,n){let r=null;e.length>1&&(r=new Av(e),this._listContexts.push(r));for(let i=0;i<e.length;i++)this._addSelectable(e[i],n,r)}_addSelectable(e,n,r){let i=this,s=e.element,o=e.classNames,a=e.attrs,l=new Dv(e,n,r);if(s&&(a.length===0&&o.length===0?this._addTerminal(i._elementMap,s,l):i=this._addPartial(i._elementPartialMap,s)),o)for(let c=0;c<o.length;c++){let u=a.length===0&&c===o.length-1,h=o[c];u?this._addTerminal(i._classMap,h,l):i=this._addPartial(i._classPartialMap,h)}if(a)for(let c=0;c<a.length;c+=2){let u=c===a.length-2,h=a[c],p=a[c+1];if(u){let m=i._attrValueMap,g=m.get(h);g||(g=new Map,m.set(h,g)),this._addTerminal(g,p,l)}else{let m=i._attrValuePartialMap,g=m.get(h);g||(g=new Map,m.set(h,g)),i=this._addPartial(g,p)}}}_addTerminal(e,n,r){let i=e.get(n);i||(i=[],e.set(n,i)),i.push(r)}_addPartial(e,n){let r=e.get(n);return r||(r=new t,e.set(n,r)),r}match(e,n){let r=!1,i=e.element,s=e.classNames,o=e.attrs;for(let a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(r=this._matchTerminal(this._elementMap,i,e,n)||r,r=this._matchPartial(this._elementPartialMap,i,e,n)||r,s)for(let a=0;a<s.length;a++){let l=s[a];r=this._matchTerminal(this._classMap,l,e,n)||r,r=this._matchPartial(this._classPartialMap,l,e,n)||r}if(o)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1],u=this._attrValueMap.get(l);c&&(r=this._matchTerminal(u,"",e,n)||r),r=this._matchTerminal(u,c,e,n)||r;let h=this._attrValuePartialMap.get(l);c&&(r=this._matchPartial(h,"",e,n)||r),r=this._matchPartial(h,c,e,n)||r}return r}_matchTerminal(e,n,r,i){if(!e||typeof n!="string")return!1;let s=e.get(n)||[],o=e.get("*");if(o&&(s=s.concat(o)),s.length===0)return!1;let a,l=!1;for(let c=0;c<s.length;c++)a=s[c],l=a.finalize(r,i)||l;return l}_matchPartial(e,n,r,i){if(!e||typeof n!="string")return!1;let s=e.get(n);return s?s.match(r,i):!1}},Av=class{selectors;alreadyMatched=!1;constructor(e){this.selectors=e}},Dv=class{selector;cbContext;listContext;notSelectors;constructor(e,n,r){this.selector=e,this.cbContext=n,this.listContext=r,this.notSelectors=e.notSelectors}finalize(e,n){let r=!0;return this.notSelectors.length>0&&(!this.listContext||!this.listContext.alreadyMatched)&&(r=!gf.createNotMatcher(this.notSelectors).match(e,null)),r&&n&&(!this.listContext||!this.listContext.alreadyMatched)&&(this.listContext&&(this.listContext.alreadyMatched=!0),n(this.selector,this.cbContext)),r}},vf=class{registry;constructor(e){this.registry=e}match(e){return this.registry.has(e)?this.registry.get(e):[]}};var Ps=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Ps||{}),t0=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(t0||{}),Xl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Xl||{}),TS={name:"custom-elements"},IS={name:"no-errors-schema"};var Ne=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t[t.ATTRIBUTE_NO_BINDING=6]="ATTRIBUTE_NO_BINDING",t})(Ne||{});function qM(t){let e=t.classNames&&t.classNames.length?[8,...t.classNames]:[];return[t.element&&t.element!=="*"?t.element:"",...t.attrs,...e]}function GM(t){let e=t.classNames&&t.classNames.length?[8,...t.classNames]:[];return t.element?[5,t.element,...t.attrs,...e]:t.attrs.length?[3,...t.attrs,...e]:t.classNames&&t.classNames.length?[9,...t.classNames]:[]}function jM(t){let e=qM(t),n=t.notSelectors&&t.notSelectors.length?t.notSelectors.map(r=>GM(r)):[];return e.concat(...n)}function n0(t){return t?wa.parse(t).map(jM):[]}var hi=(function(t){return t[t.Directive=0]="Directive",t[t.Component=1]="Component",t[t.Injectable=2]="Injectable",t[t.Pipe=3]="Pipe",t[t.NgModule=4]="NgModule",t})(hi||{});var yf;function WM(t){return KM(YM(t.nodes).join("")+`[${t.meaning}]`)}function zM(t){return t.id||gx(t)}function gx(t){let e=new kv,n=t.nodes.map(r=>r.visit(e,null));return vx(n.join(""),t.meaning)}var wf=class{visitText(e,n){return e.value}visitContainer(e,n){return`[${e.children.map(r=>r.visit(this)).join(", ")}]`}visitIcu(e,n){let r=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expression}, ${e.type}, ${r.join(", ")}}`}visitTagPlaceholder(e,n){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,n){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,n){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,n){return`<ph block name="${e.startName}">${e.children.map(r=>r.visit(this)).join(", ")}</ph name="${e.closeName}">`}},JM=new wf;function YM(t){return t.map(e=>e.visit(JM,null))}var kv=class extends wf{visitIcu(e){let n=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.type}, ${n.join(", ")}}`}};function KM(t){yf??=new TextEncoder;let e=[...yf.encode(t)],n=ZM(e,r0.Big),r=e.length*8,i=new Uint32Array(80),s=1732584193,o=4023233417,a=2562383102,l=271733878,c=3285377520;n[r>>5]|=128<<24-r%32,n[(r+64>>9<<4)+15]=r;for(let u=0;u<n.length;u+=16){let h=s,p=o,m=a,g=l,y=c;for(let E=0;E<80;E++){E<16?i[E]=n[u+E]:i[E]=av(i[E-3]^i[E-8]^i[E-14]^i[E-16],1);let w=QM(E,o,a,l),I=w[0],D=w[1],b=[av(s,5),I,c,D,i[E]].reduce(na);c=l,l=a,a=av(o,30),o=s,s=b}s=na(s,h),o=na(o,p),a=na(a,m),l=na(l,g),c=na(c,y)}return jl(s)+jl(o)+jl(a)+jl(l)+jl(c)}function jl(t){return(t>>>0).toString(16).padStart(8,"0")}function QM(t,e,n,r){return t<20?[e&n|~e&r,1518500249]:t<40?[e^n^r,1859775393]:t<60?[e&n|e&r|n&r,2400959708]:[e^n^r,3395469782]}function AS(t){yf??=new TextEncoder;let e=yf.encode(t),n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=DS(n,e.length,0),i=DS(n,e.length,102072);return r==0&&(i==0||i==1)&&(r=r^319790063,i=i^-1801410264),BigInt.asUintN(32,BigInt(r))<<BigInt(32)|BigInt.asUintN(32,BigInt(i))}function vx(t,e=""){let n=AS(t);return e&&(n=BigInt.asUintN(64,n<<BigInt(1))|n>>BigInt(63)&BigInt(1),n+=AS(e)),BigInt.asUintN(63,n).toString()}function DS(t,e,n){let r=2654435769,i=2654435769,s=0,o=e-12;for(;s<=o;s+=12){r+=t.getUint32(s,!0),i+=t.getUint32(s+4,!0),n+=t.getUint32(s+8,!0);let l=kS(r,i,n);r=l[0],i=l[1],n=l[2]}let a=e-s;return n+=e,a>=4?(r+=t.getUint32(s,!0),s+=4,a>=8?(i+=t.getUint32(s,!0),s+=4,a>=9&&(n+=t.getUint8(s++)<<8),a>=10&&(n+=t.getUint8(s++)<<16),a===11&&(n+=t.getUint8(s++)<<24)):(a>=5&&(i+=t.getUint8(s++)),a>=6&&(i+=t.getUint8(s++)<<8),a===7&&(i+=t.getUint8(s++)<<16))):(a>=1&&(r+=t.getUint8(s++)),a>=2&&(r+=t.getUint8(s++)<<8),a===3&&(r+=t.getUint8(s++)<<16)),kS(r,i,n)[2]}function kS(t,e,n){return t-=e,t-=n,t^=n>>>13,e-=n,e-=t,e^=t<<8,n-=t,n-=e,n^=e>>>13,t-=e,t-=n,t^=n>>>12,e-=n,e-=t,e^=t<<16,n-=t,n-=e,n^=e>>>5,t-=e,t-=n,t^=n>>>3,e-=n,e-=t,e^=t<<10,n-=t,n-=e,n^=e>>>15,[t,e,n]}var r0=(function(t){return t[t.Little=0]="Little",t[t.Big=1]="Big",t})(r0||{});function na(t,e){return XM(t,e)[1]}function XM(t,e){let n=(t&65535)+(e&65535),r=(t>>>16)+(e>>>16)+(n>>>16);return[r>>>16,r<<16|n&65535]}function av(t,e){return t<<e|t>>>32-e}function ZM(t,e){let n=t.length+3>>>2,r=[];for(let i=0;i<n;i++)r[i]=eR(t,i*4,e);return r}function NS(t,e){return e>=t.length?0:t[e]}function eR(t,e,n){let r=0;if(n===r0.Big)for(let i=0;i<4;i++)r+=NS(t,e+i)<<24-8*i;else for(let i=0;i<4;i++)r+=NS(t,e+i)<<8*i;return r}var yx=(function(t){return t[t.None=0]="None",t[t.Const=1]="Const",t})(yx||{}),Ef=class{modifiers;constructor(e=yx.None){this.modifiers=e}hasModifier(e){return(this.modifiers&e)!==0}},_i=(function(t){return t[t.Dynamic=0]="Dynamic",t[t.Bool=1]="Bool",t[t.String=2]="String",t[t.Int=3]="Int",t[t.Number=4]="Number",t[t.Function=5]="Function",t[t.Inferred=6]="Inferred",t[t.None=7]="None",t})(_i||{}),Gr=class extends Ef{name;constructor(e,n){super(n),this.name=e}visitType(e,n){return e.visitBuiltinType(this,n)}},Yn=class extends Ef{value;typeParams;constructor(e,n,r=null){super(n),this.value=e,this.typeParams=r}visitType(e,n){return e.visitExpressionType(this,n)}};var Th=new Gr(_i.Dynamic),hr=new Gr(_i.Inferred),tR=new Gr(_i.Bool),gQ=new Gr(_i.Int),i0=new Gr(_i.Number),s0=new Gr(_i.String),vQ=new Gr(_i.Function),jr=new Gr(_i.None),cc=(function(t){return t[t.Minus=0]="Minus",t[t.Plus=1]="Plus",t})(cc||{}),R=(function(t){return t[t.Equals=0]="Equals",t[t.NotEquals=1]="NotEquals",t[t.Assign=2]="Assign",t[t.Identical=3]="Identical",t[t.NotIdentical=4]="NotIdentical",t[t.Minus=5]="Minus",t[t.Plus=6]="Plus",t[t.Divide=7]="Divide",t[t.Multiply=8]="Multiply",t[t.Modulo=9]="Modulo",t[t.And=10]="And",t[t.Or=11]="Or",t[t.BitwiseOr=12]="BitwiseOr",t[t.BitwiseAnd=13]="BitwiseAnd",t[t.Lower=14]="Lower",t[t.LowerEquals=15]="LowerEquals",t[t.Bigger=16]="Bigger",t[t.BiggerEquals=17]="BiggerEquals",t[t.NullishCoalesce=18]="NullishCoalesce",t[t.Exponentiation=19]="Exponentiation",t[t.In=20]="In",t[t.AdditionAssignment=21]="AdditionAssignment",t[t.SubtractionAssignment=22]="SubtractionAssignment",t[t.MultiplicationAssignment=23]="MultiplicationAssignment",t[t.DivisionAssignment=24]="DivisionAssignment",t[t.RemainderAssignment=25]="RemainderAssignment",t[t.ExponentiationAssignment=26]="ExponentiationAssignment",t[t.AndAssignment=27]="AndAssignment",t[t.OrAssignment=28]="OrAssignment",t[t.NullishCoalesceAssignment=29]="NullishCoalesceAssignment",t})(R||{});function nR(t,e){return t==null||e==null?t==e:t.isEquivalent(e)}function wx(t,e,n){let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function kn(t,e){return wx(t,e,(n,r)=>n.isEquivalent(r))}var xe=class{type;sourceSpan;constructor(e,n){this.type=e||null,this.sourceSpan=n||null}prop(e,n){return new Nn(this,e,null,n)}key(e,n,r){return new yi(this,e,n,r)}callFn(e,n,r){return new mn(this,e,null,n,r)}instantiate(e,n,r){return new dc(this,e,n,r)}conditional(e,n=null,r){return new Wr(this,e,n,null,r)}equals(e,n){return new Ce(R.Equals,this,e,null,n)}notEquals(e,n){return new Ce(R.NotEquals,this,e,null,n)}identical(e,n){return new Ce(R.Identical,this,e,null,n)}notIdentical(e,n){return new Ce(R.NotIdentical,this,e,null,n)}minus(e,n){return new Ce(R.Minus,this,e,null,n)}plus(e,n){return new Ce(R.Plus,this,e,null,n)}divide(e,n){return new Ce(R.Divide,this,e,null,n)}multiply(e,n){return new Ce(R.Multiply,this,e,null,n)}modulo(e,n){return new Ce(R.Modulo,this,e,null,n)}power(e,n){return new Ce(R.Exponentiation,this,e,null,n)}and(e,n){return new Ce(R.And,this,e,null,n)}bitwiseOr(e,n){return new Ce(R.BitwiseOr,this,e,null,n)}bitwiseAnd(e,n){return new Ce(R.BitwiseAnd,this,e,null,n)}or(e,n){return new Ce(R.Or,this,e,null,n)}lower(e,n){return new Ce(R.Lower,this,e,null,n)}lowerEquals(e,n){return new Ce(R.LowerEquals,this,e,null,n)}bigger(e,n){return new Ce(R.Bigger,this,e,null,n)}biggerEquals(e,n){return new Ce(R.BiggerEquals,this,e,null,n)}isBlank(e){return this.equals(aR,e)}nullishCoalesce(e,n){return new Ce(R.NullishCoalesce,this,e,null,n)}toStmt(){return new Ht(this,null)}},pr=class t extends xe{name;constructor(e,n,r){super(n,r),this.name=e}isEquivalent(e){return e instanceof t&&this.name===e.name}isConstant(){return!1}visitExpression(e,n){return e.visitReadVarExpr(this,n)}clone(){return new t(this.name,this.type,this.sourceSpan)}set(e){return new Ce(R.Assign,this,e,null,this.sourceSpan)}},Ea=class t extends xe{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitTypeofExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},_f=class t extends xe{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitVoidExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},ye=class t extends xe{node;constructor(e,n,r){super(n,r),this.node=e}isEquivalent(e){return e instanceof t&&this.node===e.node}isConstant(){return!1}visitExpression(e,n){return e.visitWrappedNodeExpr(this,n)}clone(){return new t(this.node,this.type,this.sourceSpan)}},mn=class t extends xe{fn;args;pure;constructor(e,n,r,i,s=!1){super(r,i),this.fn=e,this.args=n,this.pure=s}get receiver(){return this.fn}isEquivalent(e){return e instanceof t&&this.fn.isEquivalent(e.fn)&&kn(this.args,e.args)&&this.pure===e.pure}isConstant(){return!1}visitExpression(e,n){return e.visitInvokeFunctionExpr(this,n)}clone(){return new t(this.fn.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan,this.pure)}},uc=class t extends xe{tag;template;constructor(e,n,r,i){super(r,i),this.tag=e,this.template=n}isEquivalent(e){return e instanceof t&&this.tag.isEquivalent(e.tag)&&this.template.isEquivalent(e.template)}isConstant(){return!1}visitExpression(e,n){return e.visitTaggedTemplateLiteralExpr(this,n)}clone(){return new t(this.tag.clone(),this.template.clone(),this.type,this.sourceSpan)}},dc=class t extends xe{classExpr;args;constructor(e,n,r,i){super(r,i),this.classExpr=e,this.args=n}isEquivalent(e){return e instanceof t&&this.classExpr.isEquivalent(e.classExpr)&&kn(this.args,e.args)}isConstant(){return!1}visitExpression(e,n){return e.visitInstantiateExpr(this,n)}clone(){return new t(this.classExpr.clone(),this.args.map(e=>e.clone()),this.type,this.sourceSpan)}},_a=class t extends xe{body;flags;constructor(e,n,r){super(null,r),this.body=e,this.flags=n}isEquivalent(e){return e instanceof t&&this.body===e.body&&this.flags===e.flags}isConstant(){return!0}visitExpression(e,n){return e.visitRegularExpressionLiteral(this,n)}clone(){return new t(this.body,this.flags,this.sourceSpan)}},Lt=class t extends xe{value;constructor(e,n,r){super(n,r),this.value=e}isEquivalent(e){return e instanceof t&&this.value===e.value}isConstant(){return!0}visitExpression(e,n){return e.visitLiteralExpr(this,n)}clone(){return new t(this.value,this.type,this.sourceSpan)}},fc=class t extends xe{elements;expressions;constructor(e,n,r){super(null,r),this.elements=e,this.expressions=n}isEquivalent(e){return e instanceof t&&wx(this.elements,e.elements,(n,r)=>n.text===r.text)&&kn(this.expressions,e.expressions)}isConstant(){return!1}visitExpression(e,n){return e.visitTemplateLiteralExpr(this,n)}clone(){return new t(this.elements.map(e=>e.clone()),this.expressions.map(e=>e.clone()))}},Cf=class t extends xe{text;rawText;constructor(e,n,r){super(s0,n),this.text=e,this.rawText=r??Nv(uf(e))}visitExpression(e,n){return e.visitTemplateLiteralElementExpr(this,n)}isEquivalent(e){return e instanceof t&&e.text===this.text&&e.rawText===this.rawText}isConstant(){return!0}clone(){return new t(this.text,this.sourceSpan,this.rawText)}},Hs=class{text;sourceSpan;constructor(e,n){this.text=e,this.sourceSpan=n}},ga=class{text;sourceSpan;associatedMessage;constructor(e,n,r){this.text=e,this.sourceSpan=n,this.associatedMessage=r}},rR="|",MS="@@",iR="\u241F",Sf=class t extends xe{metaBlock;messageParts;placeHolderNames;expressions;constructor(e,n,r,i,s){super(s0,s),this.metaBlock=e,this.messageParts=n,this.placeHolderNames=r,this.expressions=i}isEquivalent(e){return!1}isConstant(){return!1}visitExpression(e,n){return e.visitLocalizedString(this,n)}clone(){return new t(this.metaBlock,this.messageParts,this.placeHolderNames,this.expressions.map(e=>e.clone()),this.sourceSpan)}serializeI18nHead(){let e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e=`${this.metaBlock.meaning}${rR}${e}`),this.metaBlock.customId&&(e=`${e}${MS}${this.metaBlock.customId}`),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach(n=>{e=`${e}${iR}${n}`}),RS(e,this.messageParts[0].text,this.getMessagePartSourceSpan(0))}getMessagePartSourceSpan(e){return this.messageParts[e]?.sourceSpan??this.sourceSpan}getPlaceholderSourceSpan(e){return this.placeHolderNames[e]?.sourceSpan??this.expressions[e]?.sourceSpan??this.sourceSpan}serializeI18nTemplatePart(e){let n=this.placeHolderNames[e-1],r=this.messageParts[e],i=n.text;return n.associatedMessage?.legacyIds.length===0&&(i+=`${MS}${vx(n.associatedMessage.messageString,n.associatedMessage.meaning)}`),RS(i,r.text,this.getMessagePartSourceSpan(e))}},uf=t=>t.replace(/\\/g,"\\\\"),sR=t=>t.replace(/^:/,"\\:"),oR=t=>t.replace(/:/g,"\\:"),Nv=t=>t.replace(/`/g,"\\`").replace(/\${/g,"$\\{");function RS(t,e,n){return t===""?{cooked:e,raw:Nv(sR(uf(e))),range:n}:{cooked:`:${t}:${e}`,raw:Nv(`:${oR(uf(t))}:${uf(e)}`),range:n}}var Ks=class t extends xe{value;typeParams;constructor(e,n,r=null,i){super(n,i),this.value=e,this.typeParams=r}isEquivalent(e){return e instanceof t&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName}isConstant(){return!1}visitExpression(e,n){return e.visitExternalExpr(this,n)}clone(){return new t(this.value,this.type,this.typeParams,this.sourceSpan)}};var Wr=class t extends xe{condition;falseCase;trueCase;constructor(e,n,r=null,i,s){super(i||n.type,s),this.condition=e,this.falseCase=r,this.trueCase=n}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&nR(this.falseCase,e.falseCase)}isConstant(){return!1}visitExpression(e,n){return e.visitConditionalExpr(this,n)}clone(){return new t(this.condition.clone(),this.trueCase.clone(),this.falseCase?.clone(),this.type,this.sourceSpan)}};var hc=class t extends xe{condition;constructor(e,n){super(tR,n),this.condition=e}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)}isConstant(){return!1}visitExpression(e,n){return e.visitNotExpr(this,n)}clone(){return new t(this.condition.clone(),this.sourceSpan)}},Nt=class t{name;type;constructor(e,n=null){this.name=e,this.type=n}isEquivalent(e){return this.name===e.name}clone(){return new t(this.name,this.type)}},zi=class t extends xe{params;statements;name;constructor(e,n,r,i,s){super(r,i),this.params=e,this.statements=n,this.name=s}isEquivalent(e){return(e instanceof t||e instanceof pc)&&kn(this.params,e.params)&&kn(this.statements,e.statements)}isConstant(){return!1}visitExpression(e,n){return e.visitFunctionExpr(this,n)}toDeclStmt(e,n){return new pc(e,this.params,this.statements,this.type,n,this.sourceSpan)}clone(){return new t(this.params.map(e=>e.clone()),this.statements,this.type,this.sourceSpan,this.name)}},Qs=class t extends xe{params;body;constructor(e,n,r,i){super(r,i),this.params=e,this.body=n}isEquivalent(e){return!(e instanceof t)||!kn(this.params,e.params)?!1:this.body instanceof xe&&e.body instanceof xe?this.body.isEquivalent(e.body):Array.isArray(this.body)&&Array.isArray(e.body)?kn(this.body,e.body):!1}isConstant(){return!1}visitExpression(e,n){return e.visitArrowFunctionExpr(this,n)}clone(){return new t(this.params.map(e=>e.clone()),Array.isArray(this.body)?this.body:this.body.clone(),this.type,this.sourceSpan)}toDeclStmt(e,n){return new wt(e,this,hr,n,this.sourceSpan)}},Xs=class t extends xe{operator;expr;parens;constructor(e,n,r,i,s=!0){super(r||i0,i),this.operator=e,this.expr=n,this.parens=s}isEquivalent(e){return e instanceof t&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}visitExpression(e,n){return e.visitUnaryOperatorExpr(this,n)}clone(){return new t(this.operator,this.expr.clone(),this.type,this.sourceSpan,this.parens)}},mr=class t extends xe{expr;constructor(e,n,r){super(n,r),this.expr=e}visitExpression(e,n){return e.visitParenthesizedExpr(this,n)}isEquivalent(e){return e instanceof t&&e.expr.isEquivalent(this.expr)}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr.clone())}},Ce=class t extends xe{operator;rhs;lhs;constructor(e,n,r,i,s){super(i||n.type,s),this.operator=e,this.rhs=r,this.lhs=n}isEquivalent(e){return e instanceof t&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}isConstant(){return!1}visitExpression(e,n){return e.visitBinaryOperatorExpr(this,n)}clone(){return new t(this.operator,this.lhs.clone(),this.rhs.clone(),this.type,this.sourceSpan)}isAssignment(){let e=this.operator;return e===R.Assign||e===R.AdditionAssignment||e===R.SubtractionAssignment||e===R.MultiplicationAssignment||e===R.DivisionAssignment||e===R.RemainderAssignment||e===R.ExponentiationAssignment||e===R.AndAssignment||e===R.OrAssignment||e===R.NullishCoalesceAssignment}},Nn=class t extends xe{receiver;name;constructor(e,n,r,i){super(r,i),this.receiver=e,this.name=n}get index(){return this.name}isEquivalent(e){return e instanceof t&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}isConstant(){return!1}visitExpression(e,n){return e.visitReadPropExpr(this,n)}set(e){return new Ce(R.Assign,this.receiver.prop(this.name),e,null,this.sourceSpan)}clone(){return new t(this.receiver.clone(),this.name,this.type,this.sourceSpan)}},yi=class t extends xe{receiver;index;constructor(e,n,r,i){super(r,i),this.receiver=e,this.index=n}isEquivalent(e){return e instanceof t&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}isConstant(){return!1}visitExpression(e,n){return e.visitReadKeyExpr(this,n)}set(e){return new Ce(R.Assign,this.receiver.key(this.index),e,null,this.sourceSpan)}clone(){return new t(this.receiver.clone(),this.index.clone(),this.type,this.sourceSpan)}},zr=class t extends xe{entries;constructor(e,n,r){super(n,r),this.entries=e}isConstant(){return this.entries.every(e=>e.isConstant())}isEquivalent(e){return e instanceof t&&kn(this.entries,e.entries)}visitExpression(e,n){return e.visitLiteralArrayExpr(this,n)}clone(){return new t(this.entries.map(e=>e.clone()),this.type,this.sourceSpan)}},Ca=class t{key;value;quoted;constructor(e,n,r){this.key=e,this.value=n,this.quoted=r}isEquivalent(e){return this.key===e.key&&this.value.isEquivalent(e.value)}clone(){return new t(this.key,this.value.clone(),this.quoted)}isConstant(){return this.value.isConstant()}},Ji=class t{expression;constructor(e){this.expression=e}isEquivalent(e){return e instanceof t&&this.expression.isEquivalent(e.expression)}clone(){return new t(this.expression.clone())}isConstant(){return this.expression.isConstant()}},gr=class t extends xe{entries;valueType=null;constructor(e,n,r){super(n,r),this.entries=e,n&&(this.valueType=n.valueType)}isEquivalent(e){return e instanceof t&&kn(this.entries,e.entries)}isConstant(){return this.entries.every(e=>e.isConstant())}visitExpression(e,n){return e.visitLiteralMapExpr(this,n)}clone(){let e=this.entries.map(n=>n.clone());return new t(e,this.type,this.sourceSpan)}};var Zs=class t extends xe{expression;constructor(e,n){super(null,n),this.expression=e}isEquivalent(e){return e instanceof t&&this.expression.isEquivalent(e.expression)}isConstant(){return this.expression.isConstant()}visitExpression(e,n){return e.visitSpreadElementExpr(this,n)}clone(){return new t(this.expression.clone(),this.sourceSpan)}},Sa=new Lt(null,null,null),aR=new Lt(null,hr,null),Mt=(function(t){return t[t.None=0]="None",t[t.Final=1]="Final",t[t.Private=2]="Private",t[t.Exported=4]="Exported",t[t.Static=8]="Static",t})(Mt||{}),Mv=class{text;multiline;trailingNewline;constructor(e,n,r){this.text=e,this.multiline=n,this.trailingNewline=r}toString(){return this.multiline?` ${this.text} `:this.text}},bf=class extends Mv{tags;constructor(e){super("",!0,!0),this.tags=e}toString(){return fR(this.tags)}},eo=class{modifiers;sourceSpan;leadingComments;constructor(e=Mt.None,n=null,r){this.modifiers=e,this.sourceSpan=n,this.leadingComments=r}hasModifier(e){return(this.modifiers&e)!==0}addLeadingComment(e){this.leadingComments=this.leadingComments??[],this.leadingComments.push(e)}},wt=class t extends eo{name;value;type;constructor(e,n,r,i,s,o){super(i,s,o),this.name=e,this.value=n,this.type=r||n&&n.type||null}isEquivalent(e){return e instanceof t&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}visitStatement(e,n){return e.visitDeclareVarStmt(this,n)}},pc=class t extends eo{name;params;statements;type;constructor(e,n,r,i,s,o,a){super(s,o,a),this.name=e,this.params=n,this.statements=r,this.type=i||null}isEquivalent(e){return e instanceof t&&kn(this.params,e.params)&&kn(this.statements,e.statements)}visitStatement(e,n){return e.visitDeclareFunctionStmt(this,n)}},Ht=class t extends eo{expr;constructor(e,n,r){super(Mt.None,n,r),this.expr=e}isEquivalent(e){return e instanceof t&&this.expr.isEquivalent(e.expr)}visitStatement(e,n){return e.visitExpressionStmt(this,n)}},Rt=class t extends eo{value;constructor(e,n=null,r){super(Mt.None,n,r),this.value=e}isEquivalent(e){return e instanceof t&&this.value.isEquivalent(e.value)}visitStatement(e,n){return e.visitReturnStmt(this,n)}},xf=class t extends eo{condition;trueCase;falseCase;constructor(e,n,r=[],i,s){super(Mt.None,i,s),this.condition=e,this.trueCase=n,this.falseCase=r}isEquivalent(e){return e instanceof t&&this.condition.isEquivalent(e.condition)&&kn(this.trueCase,e.trueCase)&&kn(this.falseCase,e.falseCase)}visitStatement(e,n){return e.visitIfStmt(this,n)}};function lR(t=[]){return new bf(t)}function Ee(t,e,n){return new pr(t,e,n)}function G(t,e=null,n){return new Ks(t,null,e,n)}function Pt(t,e,n){return new Yn(t,e,n)}function ou(t){return new Ea(t)}function Ae(t,e,n){return new zr(t,e,n)}function Kn(t,e=null){return new gr(t.map(n=>new Ca(n.key,n.value,n.quoted)),e,null)}function cR(t,e){return new hc(t,e)}function Yi(t,e,n,r,i){return new zi(t,e,n,r,i)}function Jr(t,e,n,r){return new Qs(t,e,n,r)}function Ih(t,e,n,r,i){return new xf(t,e,n,r,i)}function uR(t,e,n,r){return new uc(t,e,n,r)}function T(t,e,n){return new Lt(t,e,n)}function dR(t,e,n,r,i){return new Sf(t,e,n,r,i)}function PS(t){let e="";if(t.tagName&&(e+=` @${t.tagName}`),t.text){if(t.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');e+=" "+t.text.replace(/@/g,"\\@")}return e}function fR(t){if(t.length===0)return"";if(t.length===1&&t[0].tagName&&!t[0].text)return`*${PS(t[0])} `;let e=`*
`;for(let n of t)e+=" *",e+=PS(n).replace(/\n/g,`
 * `),e+=`
`;return e+=" ",e}var hR="_c",pR={},mR=50,Tf=class t extends xe{resolved;original;shared=!1;constructor(e){super(e.type),this.resolved=e,this.original=e}visitExpression(e,n){return n===pR?this.original.visitExpression(e,n):this.resolved.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&this.resolved.isEquivalent(e.resolved)}isConstant(){return!0}clone(){throw new Error("Not supported.")}fixup(e){this.resolved=e,this.shared=!0}},If=class{isClosureCompilerEnabled;statements=[];literals=new Map;literalFactories=new Map;sharedConstants=new Map;_claimedNames=new Map;nextNameIndex=0;constructor(e=!1){this.isClosureCompilerEnabled=e}getConstLiteral(e,n){if(e instanceof Lt&&!LS(e)||e instanceof Tf)return e;let r=mc.INSTANCE.keyOf(e),i=this.literals.get(r),s=!1;if(i||(i=new Tf(e),this.literals.set(r,i),s=!0),!s&&!i.shared||s&&n){let o=this.freshName(),a,l;this.isClosureCompilerEnabled&&LS(e)?(a=new zi([],[new Rt(e)]),l=Ee(o).callFn([])):(a=e,l=Ee(o)),this.statements.push(new wt(o,a,hr,Mt.Final)),i.fixup(l)}return i}getSharedConstant(e,n){let r=e.keyOf(n);if(!this.sharedConstants.has(r)){let i=this.freshName();this.sharedConstants.set(r,Ee(i)),this.statements.push(e.toSharedConstantDeclaration(i,n))}return this.sharedConstants.get(r)}getSharedFunctionReference(e,n,r=!0){let i=e instanceof Qs;for(let o of this.statements)if(i&&o instanceof wt&&o.value?.isEquivalent(e)||!i&&o instanceof pc&&e instanceof zi&&e.isEquivalent(o))return Ee(o.name);let s=r?this.uniqueName(n):n;return this.statements.push(e instanceof zi?e.toDeclStmt(s,Mt.Final):new wt(s,e,hr,Mt.Final,e.sourceSpan)),Ee(s)}uniqueName(e,n=!0){let r=this._claimedNames.get(e)??0,i=r===0&&!n?`${e}`:`${e}${r}`;return this._claimedNames.set(e,r+1),i}freshName(){return this.uniqueName(hR)}},mc=class t{static INSTANCE=new t;keyOf(e){if(e instanceof Lt&&typeof e.value=="string")return`"${e.value}"`;if(e instanceof Lt)return String(e.value);if(e instanceof _a)return`/${e.body}/${e.flags??""}`;if(e instanceof zr){let n=[];for(let r of e.entries)n.push(this.keyOf(r));return`[${n.join(",")}]`}else if(e instanceof gr){let n=[];for(let r of e.entries)if(r instanceof Ji)n.push("..."+this.keyOf(r.expression));else{let i=r.key;r.quoted&&(i=`"${i}"`),n.push(i+":"+this.keyOf(r.value))}return`{${n.join(",")}}`}else{if(e instanceof Ks)return`import("${e.value.moduleName}", ${e.value.name})`;if(e instanceof pr)return`read(${e.name})`;if(e instanceof Ea)return`typeof(${this.keyOf(e.expr)})`;if(e instanceof Zs)return`...${this.keyOf(e.expression)}`;throw new Error(`${this.constructor.name} does not handle expressions of type ${e.constructor.name}`)}}};function LS(t){return t instanceof Lt&&typeof t.value=="string"&&t.value.length>=mR}var C="@angular/core",_=(()=>{class t{static core={name:null,moduleName:C};static namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:C};static namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:C};static namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:C};static element={name:"\u0275\u0275element",moduleName:C};static elementStart={name:"\u0275\u0275elementStart",moduleName:C};static elementEnd={name:"\u0275\u0275elementEnd",moduleName:C};static domElement={name:"\u0275\u0275domElement",moduleName:C};static domElementStart={name:"\u0275\u0275domElementStart",moduleName:C};static domElementEnd={name:"\u0275\u0275domElementEnd",moduleName:C};static domElementContainer={name:"\u0275\u0275domElementContainer",moduleName:C};static domElementContainerStart={name:"\u0275\u0275domElementContainerStart",moduleName:C};static domElementContainerEnd={name:"\u0275\u0275domElementContainerEnd",moduleName:C};static domTemplate={name:"\u0275\u0275domTemplate",moduleName:C};static domListener={name:"\u0275\u0275domListener",moduleName:C};static advance={name:"\u0275\u0275advance",moduleName:C};static syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:C};static syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:C};static attribute={name:"\u0275\u0275attribute",moduleName:C};static classProp={name:"\u0275\u0275classProp",moduleName:C};static elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:C};static elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:C};static elementContainer={name:"\u0275\u0275elementContainer",moduleName:C};static styleMap={name:"\u0275\u0275styleMap",moduleName:C};static classMap={name:"\u0275\u0275classMap",moduleName:C};static styleProp={name:"\u0275\u0275styleProp",moduleName:C};static interpolate={name:"\u0275\u0275interpolate",moduleName:C};static interpolate1={name:"\u0275\u0275interpolate1",moduleName:C};static interpolate2={name:"\u0275\u0275interpolate2",moduleName:C};static interpolate3={name:"\u0275\u0275interpolate3",moduleName:C};static interpolate4={name:"\u0275\u0275interpolate4",moduleName:C};static interpolate5={name:"\u0275\u0275interpolate5",moduleName:C};static interpolate6={name:"\u0275\u0275interpolate6",moduleName:C};static interpolate7={name:"\u0275\u0275interpolate7",moduleName:C};static interpolate8={name:"\u0275\u0275interpolate8",moduleName:C};static interpolateV={name:"\u0275\u0275interpolateV",moduleName:C};static nextContext={name:"\u0275\u0275nextContext",moduleName:C};static resetView={name:"\u0275\u0275resetView",moduleName:C};static templateCreate={name:"\u0275\u0275template",moduleName:C};static defer={name:"\u0275\u0275defer",moduleName:C};static deferWhen={name:"\u0275\u0275deferWhen",moduleName:C};static deferOnIdle={name:"\u0275\u0275deferOnIdle",moduleName:C};static deferOnImmediate={name:"\u0275\u0275deferOnImmediate",moduleName:C};static deferOnTimer={name:"\u0275\u0275deferOnTimer",moduleName:C};static deferOnHover={name:"\u0275\u0275deferOnHover",moduleName:C};static deferOnInteraction={name:"\u0275\u0275deferOnInteraction",moduleName:C};static deferOnViewport={name:"\u0275\u0275deferOnViewport",moduleName:C};static deferPrefetchWhen={name:"\u0275\u0275deferPrefetchWhen",moduleName:C};static deferPrefetchOnIdle={name:"\u0275\u0275deferPrefetchOnIdle",moduleName:C};static deferPrefetchOnImmediate={name:"\u0275\u0275deferPrefetchOnImmediate",moduleName:C};static deferPrefetchOnTimer={name:"\u0275\u0275deferPrefetchOnTimer",moduleName:C};static deferPrefetchOnHover={name:"\u0275\u0275deferPrefetchOnHover",moduleName:C};static deferPrefetchOnInteraction={name:"\u0275\u0275deferPrefetchOnInteraction",moduleName:C};static deferPrefetchOnViewport={name:"\u0275\u0275deferPrefetchOnViewport",moduleName:C};static deferHydrateWhen={name:"\u0275\u0275deferHydrateWhen",moduleName:C};static deferHydrateNever={name:"\u0275\u0275deferHydrateNever",moduleName:C};static deferHydrateOnIdle={name:"\u0275\u0275deferHydrateOnIdle",moduleName:C};static deferHydrateOnImmediate={name:"\u0275\u0275deferHydrateOnImmediate",moduleName:C};static deferHydrateOnTimer={name:"\u0275\u0275deferHydrateOnTimer",moduleName:C};static deferHydrateOnHover={name:"\u0275\u0275deferHydrateOnHover",moduleName:C};static deferHydrateOnInteraction={name:"\u0275\u0275deferHydrateOnInteraction",moduleName:C};static deferHydrateOnViewport={name:"\u0275\u0275deferHydrateOnViewport",moduleName:C};static deferEnableTimerScheduling={name:"\u0275\u0275deferEnableTimerScheduling",moduleName:C};static conditionalCreate={name:"\u0275\u0275conditionalCreate",moduleName:C};static conditionalBranchCreate={name:"\u0275\u0275conditionalBranchCreate",moduleName:C};static conditional={name:"\u0275\u0275conditional",moduleName:C};static repeater={name:"\u0275\u0275repeater",moduleName:C};static repeaterCreate={name:"\u0275\u0275repeaterCreate",moduleName:C};static repeaterTrackByIndex={name:"\u0275\u0275repeaterTrackByIndex",moduleName:C};static repeaterTrackByIdentity={name:"\u0275\u0275repeaterTrackByIdentity",moduleName:C};static componentInstance={name:"\u0275\u0275componentInstance",moduleName:C};static text={name:"\u0275\u0275text",moduleName:C};static enableBindings={name:"\u0275\u0275enableBindings",moduleName:C};static disableBindings={name:"\u0275\u0275disableBindings",moduleName:C};static getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:C};static textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:C};static textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:C};static textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:C};static textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:C};static textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:C};static textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:C};static textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:C};static textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:C};static textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:C};static textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:C};static restoreView={name:"\u0275\u0275restoreView",moduleName:C};static pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:C};static pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:C};static pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:C};static pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:C};static pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:C};static pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:C};static pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:C};static pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:C};static pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:C};static pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:C};static pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:C};static pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:C};static pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:C};static pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:C};static pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:C};static domProperty={name:"\u0275\u0275domProperty",moduleName:C};static ariaProperty={name:"\u0275\u0275ariaProperty",moduleName:C};static property={name:"\u0275\u0275property",moduleName:C};static control={name:"\u0275\u0275control",moduleName:C};static controlCreate={name:"\u0275\u0275controlCreate",moduleName:C};static animationEnterListener={name:"\u0275\u0275animateEnterListener",moduleName:C};static animationLeaveListener={name:"\u0275\u0275animateLeaveListener",moduleName:C};static animationEnter={name:"\u0275\u0275animateEnter",moduleName:C};static animationLeave={name:"\u0275\u0275animateLeave",moduleName:C};static i18n={name:"\u0275\u0275i18n",moduleName:C};static i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:C};static i18nExp={name:"\u0275\u0275i18nExp",moduleName:C};static i18nStart={name:"\u0275\u0275i18nStart",moduleName:C};static i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:C};static i18nApply={name:"\u0275\u0275i18nApply",moduleName:C};static i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:C};static pipe={name:"\u0275\u0275pipe",moduleName:C};static projection={name:"\u0275\u0275projection",moduleName:C};static projectionDef={name:"\u0275\u0275projectionDef",moduleName:C};static reference={name:"\u0275\u0275reference",moduleName:C};static inject={name:"\u0275\u0275inject",moduleName:C};static injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:C};static directiveInject={name:"\u0275\u0275directiveInject",moduleName:C};static invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:C};static invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:C};static templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:C};static forwardRef={name:"forwardRef",moduleName:C};static resolveForwardRef={name:"resolveForwardRef",moduleName:C};static replaceMetadata={name:"\u0275\u0275replaceMetadata",moduleName:C};static getReplaceMetadataURL={name:"\u0275\u0275getReplaceMetadataURL",moduleName:C};static \u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:C};static declareInjectable={name:"\u0275\u0275ngDeclareInjectable",moduleName:C};static InjectableDeclaration={name:"\u0275\u0275InjectableDeclaration",moduleName:C};static resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:C};static resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:C};static resolveBody={name:"\u0275\u0275resolveBody",moduleName:C};static getComponentDepsFactory={name:"\u0275\u0275getComponentDepsFactory",moduleName:C};static defineComponent={name:"\u0275\u0275defineComponent",moduleName:C};static declareComponent={name:"\u0275\u0275ngDeclareComponent",moduleName:C};static setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:C};static ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:C};static ViewEncapsulation={name:"ViewEncapsulation",moduleName:C};static ComponentDeclaration={name:"\u0275\u0275ComponentDeclaration",moduleName:C};static FactoryDeclaration={name:"\u0275\u0275FactoryDeclaration",moduleName:C};static declareFactory={name:"\u0275\u0275ngDeclareFactory",moduleName:C};static FactoryTarget={name:"\u0275\u0275FactoryTarget",moduleName:C};static defineDirective={name:"\u0275\u0275defineDirective",moduleName:C};static declareDirective={name:"\u0275\u0275ngDeclareDirective",moduleName:C};static DirectiveDeclaration={name:"\u0275\u0275DirectiveDeclaration",moduleName:C};static InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:C};static InjectorDeclaration={name:"\u0275\u0275InjectorDeclaration",moduleName:C};static defineInjector={name:"\u0275\u0275defineInjector",moduleName:C};static declareInjector={name:"\u0275\u0275ngDeclareInjector",moduleName:C};static NgModuleDeclaration={name:"\u0275\u0275NgModuleDeclaration",moduleName:C};static ModuleWithProviders={name:"ModuleWithProviders",moduleName:C};static defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:C};static declareNgModule={name:"\u0275\u0275ngDeclareNgModule",moduleName:C};static setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:C};static registerNgModuleType={name:"\u0275\u0275registerNgModuleType",moduleName:C};static PipeDeclaration={name:"\u0275\u0275PipeDeclaration",moduleName:C};static definePipe={name:"\u0275\u0275definePipe",moduleName:C};static declarePipe={name:"\u0275\u0275ngDeclarePipe",moduleName:C};static declareClassMetadata={name:"\u0275\u0275ngDeclareClassMetadata",moduleName:C};static declareClassMetadataAsync={name:"\u0275\u0275ngDeclareClassMetadataAsync",moduleName:C};static setClassMetadata={name:"\u0275setClassMetadata",moduleName:C};static setClassMetadataAsync={name:"\u0275setClassMetadataAsync",moduleName:C};static setClassDebugInfo={name:"\u0275setClassDebugInfo",moduleName:C};static queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:C};static viewQuery={name:"\u0275\u0275viewQuery",moduleName:C};static loadQuery={name:"\u0275\u0275loadQuery",moduleName:C};static contentQuery={name:"\u0275\u0275contentQuery",moduleName:C};static viewQuerySignal={name:"\u0275\u0275viewQuerySignal",moduleName:C};static contentQuerySignal={name:"\u0275\u0275contentQuerySignal",moduleName:C};static queryAdvance={name:"\u0275\u0275queryAdvance",moduleName:C};static twoWayProperty={name:"\u0275\u0275twoWayProperty",moduleName:C};static twoWayBindingSet={name:"\u0275\u0275twoWayBindingSet",moduleName:C};static twoWayListener={name:"\u0275\u0275twoWayListener",moduleName:C};static declareLet={name:"\u0275\u0275declareLet",moduleName:C};static storeLet={name:"\u0275\u0275storeLet",moduleName:C};static readContextLet={name:"\u0275\u0275readContextLet",moduleName:C};static attachSourceLocations={name:"\u0275\u0275attachSourceLocations",moduleName:C};static NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:C};static InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:C};static ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:C};static HostDirectivesFeature={name:"\u0275\u0275HostDirectivesFeature",moduleName:C};static ExternalStylesFeature={name:"\u0275\u0275ExternalStylesFeature",moduleName:C};static listener={name:"\u0275\u0275listener",moduleName:C};static getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:C};static sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:C};static sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:C};static validateAttribute={name:"\u0275\u0275validateAttribute",moduleName:C};static sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:C};static sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:C};static sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:C};static sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:C};static trustConstantHtml={name:"\u0275\u0275trustConstantHtml",moduleName:C};static trustConstantResourceUrl={name:"\u0275\u0275trustConstantResourceUrl",moduleName:C};static inputDecorator={name:"Input",moduleName:C};static outputDecorator={name:"Output",moduleName:C};static viewChildDecorator={name:"ViewChild",moduleName:C};static viewChildrenDecorator={name:"ViewChildren",moduleName:C};static contentChildDecorator={name:"ContentChild",moduleName:C};static contentChildrenDecorator={name:"ContentChildren",moduleName:C};static InputSignalBrandWriteType={name:"\u0275INPUT_SIGNAL_BRAND_WRITE_TYPE",moduleName:C};static UnwrapDirectiveSignalInputs={name:"\u0275UnwrapDirectiveSignalInputs",moduleName:C};static unwrapWritableSignal={name:"\u0275unwrapWritableSignal",moduleName:C};static assertType={name:"\u0275assertType",moduleName:C}}return t})(),gR=/-+([a-z0-9])/g;function vR(t){return t.replace(gR,(...e)=>e[1].toUpperCase())}function yR(t,e){return Ex(t,":",e)}function wR(t,e){return Ex(t,".",e)}function Ex(t,e,n){let r=t.indexOf(e);return r==-1?n:[t.slice(0,r).trim(),t.slice(r+1).trim()]}function ER(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319&&t.length>n+1){let i=t.charCodeAt(n+1);i>=56320&&i<=57343&&(n++,r=(r-55296<<10)+i-56320+65536)}r<=127?e.push(r):r<=2047?e.push(r>>6&31|192,r&63|128):r<=65535?e.push(r>>12|224,r>>6&63|128,r&63|128):r<=2097151&&e.push(r>>18&7|240,r>>12&63|128,r>>6&63|128,r&63|128)}return e}function _x(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(_x).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;if(!t.toString)return"object";let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}var Rv=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},rc=globalThis,_R=/^([1-9]|1[0-8])\./;function Cx(t){return t.startsWith("0.")?!0:!_R.test(t)}var CR=3,SR="# sourceMappingURL=data:application/json;base64,",Pv=class{file;sourcesContent=new Map;lines=[];lastCol0=0;hasMappings=!1;constructor(e=null){this.file=e}addSource(e,n=null){return this.sourcesContent.has(e)||this.sourcesContent.set(e,n),this}addLine(){return this.lines.push([]),this.lastCol0=0,this}addMapping(e,n,r,i){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(n!=null&&!this.sourcesContent.has(n))throw new Error(`Unknown source file "${n}"`);if(e==null)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(n&&(r==null||i==null))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:n,sourceLine0:r,sourceCol0:i}),this}get currentLine(){return this.lines.slice(-1)[0]}toJSON(){if(!this.hasMappings)return null;let e=new Map,n=[],r=[];Array.from(this.sourcesContent.keys()).forEach((c,u)=>{e.set(c,u),n.push(c),r.push(this.sourcesContent.get(c)||null)});let i="",s=0,o=0,a=0,l=0;return this.lines.forEach(c=>{s=0,i+=c.map(u=>{let h=Yd(u.col0-s);return s=u.col0,u.sourceUrl!=null&&(h+=Yd(e.get(u.sourceUrl)-o),o=e.get(u.sourceUrl),h+=Yd(u.sourceLine0-a),a=u.sourceLine0,h+=Yd(u.sourceCol0-l),l=u.sourceCol0),h}).join(","),i+=";"}),i=i.slice(0,-1),{file:this.file||"",version:CR,sourceRoot:"",sources:n,sourcesContent:r,mappings:i}}toJsComment(){return this.hasMappings?"//"+SR+bR(JSON.stringify(this,null,0)):""}};function bR(t){let e="",n=ER(t);for(let r=0;r<n.length;){let i=n[r++],s=r<n.length?n[r++]:null,o=r<n.length?n[r++]:null;e+=Zl(i>>2),e+=Zl((i&3)<<4|(s===null?0:s>>4)),e+=s===null?"=":Zl((s&15)<<2|(o===null?0:o>>6)),e+=s===null||o===null?"=":Zl(o&63)}return e}function Yd(t){t=t<0?(-t<<1)+1:t<<1;let e="";do{let n=t&31;t=t>>5,t>0&&(n=n|32),e+=Zl(n)}while(t>0);return e}var xR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Zl(t){if(t<0||t>=64)throw new Error("Can only encode value in the range [0, 63]");return xR[t]}var TR=/'|\\|\n|\r|\$/g,IR=/^[$A-Z_][0-9A-Z_$]*$/i,Lv="  ",Af=class{indent;partsLength=0;parts=[];srcSpans=[];constructor(e){this.indent=e}},AR=new Map([[R.And,"&&"],[R.Bigger,">"],[R.BiggerEquals,">="],[R.BitwiseOr,"|"],[R.BitwiseAnd,"&"],[R.Divide,"/"],[R.Assign,"="],[R.Equals,"=="],[R.Identical,"==="],[R.Lower,"<"],[R.LowerEquals,"<="],[R.Minus,"-"],[R.Modulo,"%"],[R.Exponentiation,"**"],[R.Multiply,"*"],[R.NotEquals,"!="],[R.NotIdentical,"!=="],[R.NullishCoalesce,"??"],[R.Or,"||"],[R.Plus,"+"],[R.In,"in"],[R.AdditionAssignment,"+="],[R.SubtractionAssignment,"-="],[R.MultiplicationAssignment,"*="],[R.DivisionAssignment,"/="],[R.RemainderAssignment,"%="],[R.ExponentiationAssignment,"**="],[R.AndAssignment,"&&="],[R.OrAssignment,"||="],[R.NullishCoalesceAssignment,"??="]]),Ov=class t{_indent;static createRoot(){return new t(0)}_lines;constructor(e){this._indent=e,this._lines=[new Af(e)]}get _currentLine(){return this._lines[this._lines.length-1]}println(e,n=""){this.print(e||null,n,!0)}lineIsEmpty(){return this._currentLine.parts.length===0}lineLength(){return this._currentLine.indent*Lv.length+this._currentLine.partsLength}print(e,n,r=!1){n.length>0&&(this._currentLine.parts.push(n),this._currentLine.partsLength+=n.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),r&&this._lines.push(new Af(this._indent))}removeEmptyLastLine(){this.lineIsEmpty()&&this._lines.pop()}incIndent(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}decIndent(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}toSource(){return this.sourceLines.map(e=>e.parts.length>0?OS(e.indent)+e.parts.join(""):"").join(`
`)}toSourceMapGenerator(e,n=0){let r=new Pv(e),i=!1,s=()=>{i||(r.addSource(e," ").addMapping(0,e,0,0),i=!0)};for(let o=0;o<n;o++)r.addLine(),s();return this.sourceLines.forEach((o,a)=>{r.addLine();let l=o.srcSpans,c=o.parts,u=o.indent*Lv.length,h=0;for(;h<l.length&&!l[h];)u+=c[h].length,h++;for(h<l.length&&a===0&&u===0?i=!0:s();h<l.length;){let p=l[h],m=p.start.file,g=p.start.line,y=p.start.col;for(r.addSource(m.url,m.content).addMapping(u,m.url,g,y),u+=c[h].length,h++;h<l.length&&(p===l[h]||!l[h]);)u+=c[h].length,h++}}),r}spanOf(e,n){let r=this._lines[e];if(r){let i=n-OS(r.indent).length;for(let s=0;s<r.parts.length;s++){let o=r.parts[s];if(o.length>i)return r.srcSpans[s];i-=o.length}}return null}get sourceLines(){return this._lines.length&&this._lines[this._lines.length-1].parts.length===0?this._lines.slice(0,-1):this._lines}},Fv=class{_escapeDollarInStrings;lastIfCondition=null;constructor(e){this._escapeDollarInStrings=e}printLeadingComments(e,n){if(e.leadingComments!==void 0)for(let r of e.leadingComments)r instanceof bf?n.print(e,`/*${r.toString()}*/`,r.trailingNewline):r.multiline?n.print(e,`/* ${r.text} */`,r.trailingNewline):r.text.split(`
`).forEach(i=>{n.println(e,`// ${i}`)})}visitExpressionStmt(e,n){return this.printLeadingComments(e,n),e.expr.visitExpression(this,n),n.println(e,";"),null}visitReturnStmt(e,n){return this.printLeadingComments(e,n),n.print(e,"return "),e.value.visitExpression(this,n),n.println(e,";"),null}visitIfStmt(e,n){this.printLeadingComments(e,n),n.print(e,"if ("),this.lastIfCondition=e.condition,e.condition.visitExpression(this,n),this.lastIfCondition=null,n.print(e,") {");let r=e.falseCase!=null&&e.falseCase.length>0;return e.trueCase.length<=1&&!r?(n.print(e," "),this.visitAllStatements(e.trueCase,n),n.removeEmptyLastLine(),n.print(e," ")):(n.println(),n.incIndent(),this.visitAllStatements(e.trueCase,n),n.decIndent(),r&&(n.println(e,"} else {"),n.incIndent(),this.visitAllStatements(e.falseCase,n),n.decIndent())),n.println(e,"}"),null}visitInvokeFunctionExpr(e,n){let r=e.fn instanceof Qs;return r&&n.print(e.fn,"("),e.fn.visitExpression(this,n),r&&n.print(e.fn,")"),n.print(e,"("),this.visitAllExpressions(e.args,n,","),n.print(e,")"),null}visitTaggedTemplateLiteralExpr(e,n){return e.tag.visitExpression(this,n),e.template.visitExpression(this,n),null}visitTemplateLiteralExpr(e,n){n.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(n.print(i,"${"),i.visitExpression(this,n),n.print(i,"}"))}n.print(e,"`")}visitTemplateLiteralElementExpr(e,n){n.print(e,e.rawText)}visitWrappedNodeExpr(e,n){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}visitTypeofExpr(e,n){n.print(e,"typeof "),e.expr.visitExpression(this,n)}visitVoidExpr(e,n){n.print(e,"void "),e.expr.visitExpression(this,n)}visitReadVarExpr(e,n){return n.print(e,e.name),null}visitInstantiateExpr(e,n){return n.print(e,"new "),e.classExpr.visitExpression(this,n),n.print(e,"("),this.visitAllExpressions(e.args,n,","),n.print(e,")"),null}visitLiteralExpr(e,n){let r=e.value;return typeof r=="string"?n.print(e,Bs(r,this._escapeDollarInStrings)):n.print(e,`${r}`),null}visitRegularExpressionLiteral(e,n){return n.print(e,`/${e.body}/${e.flags||""}`),null}visitLocalizedString(e,n){let r=e.serializeI18nHead();n.print(e,"$localize `"+r.raw);for(let i=1;i<e.messageParts.length;i++)n.print(e,"${"),e.expressions[i-1].visitExpression(this,n),n.print(e,`}${e.serializeI18nTemplatePart(i).raw}`);return n.print(e,"`"),null}visitConditionalExpr(e,n){return n.print(e,"("),e.condition.visitExpression(this,n),n.print(e,"? "),e.trueCase.visitExpression(this,n),n.print(e,": "),e.falseCase.visitExpression(this,n),n.print(e,")"),null}visitDynamicImportExpr(e,n){n.print(e,`import(${e.url})`)}visitNotExpr(e,n){return n.print(e,"!"),e.condition.visitExpression(this,n),null}visitUnaryOperatorExpr(e,n){let r;switch(e.operator){case cc.Plus:r="+";break;case cc.Minus:r="-";break;default:throw new Error(`Unknown operator ${e.operator}`)}let i=e!==this.lastIfCondition;return i&&n.print(e,"("),n.print(e,r),e.expr.visitExpression(this,n),i&&n.print(e,")"),null}visitBinaryOperatorExpr(e,n){let r=AR.get(e.operator);if(!r)throw new Error(`Unknown operator ${e.operator}`);let i=e!==this.lastIfCondition;return i&&n.print(e,"("),e.lhs.visitExpression(this,n),n.print(e,` ${r} `),e.rhs.visitExpression(this,n),i&&n.print(e,")"),null}visitReadPropExpr(e,n){return e.receiver.visitExpression(this,n),n.print(e,"."),n.print(e,e.name),null}visitReadKeyExpr(e,n){return e.receiver.visitExpression(this,n),n.print(e,"["),e.index.visitExpression(this,n),n.print(e,"]"),null}visitLiteralArrayExpr(e,n){return n.print(e,"["),this.visitAllExpressions(e.entries,n,","),n.print(e,"]"),null}visitLiteralMapExpr(e,n){return n.print(e,"{"),this.visitAllObjects(r=>{r instanceof Ji?(n.print(e,"..."),r.expression.visitExpression(this,n)):(n.print(e,`${Bs(r.key,this._escapeDollarInStrings,r.quoted)}:`),r.value.visitExpression(this,n))},e.entries,n,","),n.print(e,"}"),null}visitCommaExpr(e,n){return n.print(e,"("),this.visitAllExpressions(e.parts,n,","),n.print(e,")"),null}visitParenthesizedExpr(e,n){e.expr.visitExpression(this,n)}visitSpreadElementExpr(e,n){n.print(e,"..."),e.expression.visitExpression(this,n)}visitAllExpressions(e,n,r){this.visitAllObjects(i=>i.visitExpression(this,n),e,n,r)}visitAllObjects(e,n,r,i){let s=!1;for(let o=0;o<n.length;o++)o>0&&(r.lineLength()>80?(r.print(null,i,!0),s||(r.incIndent(),r.incIndent(),s=!0)):r.print(null,i,!1)),e(n[o]);s&&(r.decIndent(),r.decIndent())}visitAllStatements(e,n){e.forEach(r=>r.visitStatement(this,n))}};function Bs(t,e,n=!0){if(t==null)return null;let r=t.replace(TR,(...s)=>s[0]=="$"?e?"\\$":"$":s[0]==`
`?"\\n":s[0]=="\r"?"\\r":`\\${s[0]}`);return n||!IR.test(r)?`'${r}'`:r}function OS(t){let e="";for(let n=0;n<t;n++)e+=Lv;return e}function Ah(t,e){if(e===0)return Pt(t);let n=[];for(let r=0;r<e;r++)n.push(Th);return Pt(t,void 0,n)}function DR(t,e){let n=Bs(e,!1,!1);return n!==e?`${t}[${n}]`:`${t}.${e}`}function kR(t){return NR("ngJitMode",t)}function NR(t,e){let n=new Ks({name:t,moduleName:null}),r=new Ce(R.Identical,new Ea(n),T("undefined")),i=new Ce(R.Or,r,n,void 0,void 0);return new Ce(R.And,i,e)}function vt(t){let e=new ye(t);return{value:e,type:e}}function Vs(t,e){let n=Ae(t.map(r=>r.value));return e?Jr([],n):n}function o0(t,e){return{expression:t,forwardRef:e}}function MR({expression:t,forwardRef:e}){switch(e){case 0:case 1:return t;case 2:return RR(t)}}function RR(t){return G(_.forwardRef).callFn([Jr([],t)])}var Df=(function(t){return t[t.Class=0]="Class",t[t.Function=1]="Function",t})(Df||{});function Ls(t){let e=Ee("__ngFactoryType__"),n=null,r=BS(t)?e:new Ce(R.Or,e,t.type.value),i=null;t.deps!==null?t.deps!=="invalid"&&(i=new dc(r,FS(t.deps,t.target))):(n=Ee(`\u0275${t.name}_BaseFactory`),i=n.callFn([r]));let s=[],o=null;function a(c){let u=Ee("__ngConditionalFactory__");s.push(new wt(u.name,Sa,hr));let h=i!==null?u.set(i).toStmt():G(_.invalidFactory).callFn([]).toStmt();return s.push(Ih(e,[h],[u.set(c).toStmt()])),u}if(BS(t)){let c=FS(t.delegateDeps,t.target),u=new(t.delegateType===Df.Class?dc:mn)(t.delegate,c);o=a(u)}else BR(t)?o=a(t.expression):o=i;if(o===null)s.push(G(_.invalidFactory).callFn([]).toStmt());else if(n!==null){let c=G(_.getInheritedFactory).callFn([t.type.value]),u=new Ce(R.Or,n,n.set(c));s.push(new Rt(u.callFn([r])))}else s.push(new Rt(o));let l=Yi([new Nt(e.name,Th)],s,hr,void 0,`${t.name}_Factory`);return n!==null&&(l=Jr([],[new wt(n.name),new Rt(l)]).callFn([],void 0,!0)),{expression:l,statements:[],type:PR(t)}}function PR(t){let e=t.deps!==null&&t.deps!=="invalid"?OR(t.deps):jr;return Pt(G(_.FactoryDeclaration,[Ah(t.type.type,t.typeArgumentCount),e]))}function FS(t,e){return t.map((n,r)=>LR(n,e,r))}function LR(t,e,n){if(t.token===null)return G(_.invalidFactoryDep).callFn([T(n)]);if(t.attributeNameType===null){let r=0|(t.self?2:0)|(t.skipSelf?4:0)|(t.host?1:0)|(t.optional?8:0)|(e===hi.Pipe?16:0),i=r!==0||t.optional?T(r):null,s=[t.token];i&&s.push(i);let o=VR(e);return G(o).callFn(s)}else return G(_.injectAttribute).callFn([t.token])}function OR(t){let e=!1,n=t.map(r=>{let i=FR(r);return i!==null?(e=!0,i):T(null)});return e?Pt(Ae(n)):jr}function FR(t){let e=[];return t.attributeNameType!==null&&e.push({key:"attribute",value:t.attributeNameType,quoted:!1}),t.optional&&e.push({key:"optional",value:T(!0),quoted:!1}),t.host&&e.push({key:"host",value:T(!0),quoted:!1}),t.self&&e.push({key:"self",value:T(!0),quoted:!1}),t.skipSelf&&e.push({key:"skipSelf",value:T(!0),quoted:!1}),e.length>0?Kn(e):null}function BS(t){return t.delegateType!==void 0}function BR(t){return t.expression!==void 0}function VR(t){switch(t){case hi.Component:case hi.Directive:case hi.Pipe:return _.directiveInject;case hi.NgModule:case hi.Injectable:default:return _.inject}}var to=class{start;end;constructor(e,n){this.start=e,this.end=n}toAbsolute(e){return new In(e+this.start,e+this.end)}},Oe=class{span;sourceSpan;constructor(e,n){this.span=e,this.sourceSpan=n}toString(){return"AST"}},gc=class extends Oe{nameSpan;constructor(e,n,r){super(e,n),this.nameSpan=r}},Kt=class extends Oe{visit(e,n=null){}},Yr=class extends Oe{visit(e,n=null){return e.visitImplicitReceiver(this,n)}},vc=class extends Oe{visit(e,n=null){return e.visitThisReceiver?.(this,n)}},ba=class extends Oe{expressions;constructor(e,n,r){super(e,n),this.expressions=r}visit(e,n=null){return e.visitChain(this,n)}},kf=class extends Oe{condition;trueExp;falseExp;constructor(e,n,r,i,s){super(e,n),this.condition=r,this.trueExp=i,this.falseExp=s}visit(e,n=null){return e.visitConditional(this,n)}},Hr=class extends gc{receiver;name;constructor(e,n,r,i,s){super(e,n,r),this.receiver=i,this.name=s}visit(e,n=null){return e.visitPropertyRead(this,n)}},yc=class extends gc{receiver;name;constructor(e,n,r,i,s){super(e,n,r),this.receiver=i,this.name=s}visit(e,n=null){return e.visitSafePropertyRead(this,n)}},no=class extends Oe{receiver;key;constructor(e,n,r,i){super(e,n),this.receiver=r,this.key=i}visit(e,n=null){return e.visitKeyedRead(this,n)}},wc=class extends Oe{receiver;key;constructor(e,n,r,i){super(e,n),this.receiver=r,this.key=i}visit(e,n=null){return e.visitSafeKeyedRead(this,n)}},df=(function(t){return t[t.ReferencedByName=0]="ReferencedByName",t[t.ReferencedDirectly=1]="ReferencedDirectly",t})(df||{}),Nf=class extends gc{exp;name;args;type;constructor(e,n,r,i,s,o,a){super(e,n,a),this.exp=r,this.name=i,this.args=s,this.type=o}visit(e,n=null){return e.visitPipe(this,n)}},dn=class extends Oe{value;constructor(e,n,r){super(e,n),this.value=r}visit(e,n=null){return e.visitLiteralPrimitive(this,n)}},Ec=class extends Oe{expressions;constructor(e,n,r){super(e,n),this.expressions=r}visit(e,n=null){return e.visitLiteralArray(this,n)}},Mf=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitSpreadElement(this,n)}},ro=class extends Oe{keys;values;constructor(e,n,r,i){super(e,n),this.keys=r,this.values=i}visit(e,n=null){return e.visitLiteralMap(this,n)}},au=class extends Oe{strings;expressions;constructor(e,n,r,i){super(e,n),this.strings=r,this.expressions=i}visit(e,n=null){return e.visitInterpolation(this,n)}},Qt=class extends Oe{operation;left;right;constructor(e,n,r,i,s){super(e,n),this.operation=r,this.left=i,this.right=s}visit(e,n=null){return e.visitBinary(this,n)}static isAssignmentOperation(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="||e==="**="||e==="&&="||e==="||="||e==="??="}},va=class t extends Qt{operator;expr;left=null;right=null;operation=null;static createMinus(e,n,r){return new t(e,n,"-",r,"-",new dn(e,n,0),r)}static createPlus(e,n,r){return new t(e,n,"+",r,"-",r,new dn(e,n,0))}constructor(e,n,r,i,s,o,a){super(e,n,s,o,a),this.operator=r,this.expr=i}visit(e,n=null){return e.visitUnary!==void 0?e.visitUnary(this,n):e.visitBinary(this,n)}},_c=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitPrefixNot(this,n)}},Cc=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitTypeofExpression(this,n)}},Sc=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitVoidExpression(this,n)}},bc=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n=null){return e.visitNonNullAssert(this,n)}},xa=class extends Oe{receiver;args;argumentSpan;constructor(e,n,r,i,s){super(e,n),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,n=null){return e.visitCall(this,n)}},Rf=class extends Oe{receiver;args;argumentSpan;constructor(e,n,r,i,s){super(e,n),this.receiver=r,this.args=i,this.argumentSpan=s}visit(e,n=null){return e.visitSafeCall(this,n)}},xc=class extends Oe{tag;template;constructor(e,n,r,i){super(e,n),this.tag=r,this.template=i}visit(e,n){return e.visitTaggedTemplateLiteral(this,n)}},Tc=class extends Oe{elements;expressions;constructor(e,n,r,i){super(e,n),this.elements=r,this.expressions=i}visit(e,n){return e.visitTemplateLiteral(this,n)}},Pf=class extends Oe{text;constructor(e,n,r){super(e,n),this.text=r}visit(e,n){return e.visitTemplateLiteralElement(this,n)}},Ic=class extends Oe{expression;constructor(e,n,r){super(e,n),this.expression=r}visit(e,n){return e.visitParenthesizedExpression(this,n)}},Lf=class extends Oe{body;flags;constructor(e,n,r,i){super(e,n),this.body=r,this.flags=i}visit(e,n){return e.visitRegularExpressionLiteral(this,n)}},In=class{start;end;constructor(e,n){this.start=e,this.end=n}},fn=class extends Oe{ast;source;location;errors;constructor(e,n,r,i,s){super(new to(0,n===null?0:n.length),new In(i,n===null?i:i+n.length)),this.ast=e,this.source=n,this.location=r,this.errors=s}visit(e,n=null){return e.visitASTWithSource?e.visitASTWithSource(this,n):this.ast.visit(e,n)}toString(){return`${this.source} in ${this.location}`}},Ac=class{sourceSpan;key;value;constructor(e,n,r){this.sourceSpan=e,this.key=n,this.value=r}},Bv=class{sourceSpan;key;value;constructor(e,n,r){this.sourceSpan=e,this.key=n,this.value=r}},Ta=class{visit(e,n){e.visit(this,n)}visitUnary(e,n){this.visit(e.expr,n)}visitBinary(e,n){this.visit(e.left,n),this.visit(e.right,n)}visitChain(e,n){this.visitAll(e.expressions,n)}visitConditional(e,n){this.visit(e.condition,n),this.visit(e.trueExp,n),this.visit(e.falseExp,n)}visitPipe(e,n){this.visit(e.exp,n),this.visitAll(e.args,n)}visitImplicitReceiver(e,n){}visitThisReceiver(e,n){}visitInterpolation(e,n){this.visitAll(e.expressions,n)}visitKeyedRead(e,n){this.visit(e.receiver,n),this.visit(e.key,n)}visitLiteralArray(e,n){this.visitAll(e.expressions,n)}visitLiteralMap(e,n){this.visitAll(e.values,n)}visitLiteralPrimitive(e,n){}visitPrefixNot(e,n){this.visit(e.expression,n)}visitTypeofExpression(e,n){this.visit(e.expression,n)}visitVoidExpression(e,n){this.visit(e.expression,n)}visitNonNullAssert(e,n){this.visit(e.expression,n)}visitPropertyRead(e,n){this.visit(e.receiver,n)}visitSafePropertyRead(e,n){this.visit(e.receiver,n)}visitSafeKeyedRead(e,n){this.visit(e.receiver,n),this.visit(e.key,n)}visitCall(e,n){this.visit(e.receiver,n),this.visitAll(e.args,n)}visitSafeCall(e,n){this.visit(e.receiver,n),this.visitAll(e.args,n)}visitTemplateLiteral(e,n){for(let r=0;r<e.elements.length;r++){this.visit(e.elements[r],n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&this.visit(i,n)}}visitTemplateLiteralElement(e,n){}visitTaggedTemplateLiteral(e,n){this.visit(e.tag,n),this.visit(e.template,n)}visitParenthesizedExpression(e,n){this.visit(e.expression,n)}visitRegularExpressionLiteral(e,n){}visitSpreadElement(e,n){this.visit(e.expression,n)}visitAll(e,n){for(let r of e)this.visit(r,n)}},da=class{name;expression;type;sourceSpan;keySpan;valueSpan;isLiteral;isLegacyAnimation;isAnimation;constructor(e,n,r,i,s,o){this.name=e,this.expression=n,this.type=r,this.sourceSpan=i,this.keySpan=s,this.valueSpan=o,this.isLiteral=this.type===Br.LITERAL_ATTR,this.isLegacyAnimation=this.type===Br.LEGACY_ANIMATION,this.isAnimation=this.type===Br.ANIMATION}},Br=(function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.LITERAL_ATTR=1]="LITERAL_ATTR",t[t.LEGACY_ANIMATION=2]="LEGACY_ANIMATION",t[t.TWO_WAY=3]="TWO_WAY",t[t.ANIMATION=4]="ANIMATION",t})(Br||{}),en=(function(t){return t[t.Regular=0]="Regular",t[t.LegacyAnimation=1]="LegacyAnimation",t[t.TwoWay=2]="TwoWay",t[t.Animation=3]="Animation",t})(en||{}),Of=class{name;targetOrPhase;type;handler;sourceSpan;handlerSpan;keySpan;constructor(e,n,r,i,s,o,a){this.name=e,this.targetOrPhase=n,this.type=r,this.handler=i,this.sourceSpan=s,this.handlerSpan=o,this.keySpan=a}},Vv=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}},Se=(function(t){return t[t.Property=0]="Property",t[t.Attribute=1]="Attribute",t[t.Class=2]="Class",t[t.Style=3]="Style",t[t.LegacyAnimation=4]="LegacyAnimation",t[t.TwoWay=5]="TwoWay",t[t.Animation=6]="Animation",t})(Se||{}),Ff=class{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.type=n,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l}},Vr=(function(t){return t[t.RAW_TEXT=0]="RAW_TEXT",t[t.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",t[t.PARSABLE_DATA=2]="PARSABLE_DATA",t})(Vr||{});function vr(t,e=!0){if(t[0]!=":")return[null,t];let n=t.indexOf(":",1);if(n===-1){if(e)throw new Error(`Unsupported format "${t}" expecting ":namespace:name"`);return[null,t]}return[t.slice(1,n),t.slice(n+1)]}function VS(t){return vr(t)[1]==="ng-container"}function Uv(t){return vr(t)[1]==="ng-content"}function UR(t){return vr(t)[1]==="ng-template"}function $v(t){return t===null?null:vr(t)[0]}function ff(t,e){return t?`:${t}:${e}`:e}var Dh=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e){throw new Error("visit() not implemented for Comment")}},Us=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e){return e.visitText(this)}},Ia=class{value;sourceSpan;i18n;constructor(e,n,r){this.value=e,this.sourceSpan=n,this.i18n=r}visit(e){return e.visitBoundText(this)}},Aa=class{name;value;sourceSpan;keySpan;valueSpan;i18n;constructor(e,n,r,i,s,o){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s,this.i18n=o}visit(e){return e.visitTextAttribute(this)}},Hv=class t{name;type;securityContext;value;unit;sourceSpan;keySpan;valueSpan;i18n;constructor(e,n,r,i,s,o,a,l,c){this.name=e,this.type=n,this.securityContext=r,this.value=i,this.unit=s,this.sourceSpan=o,this.keySpan=a,this.valueSpan=l,this.i18n=c}static fromBoundElementProperty(e,n){if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound attributes but was not for ${e.name}: ${e.sourceSpan}`);return new t(e.name,e.type,e.securityContext,e.value,e.unit,e.sourceSpan,e.keySpan,e.valueSpan,n)}visit(e){return e.visitBoundAttribute(this)}},qv=class t{name;type;handler;target;phase;sourceSpan;handlerSpan;keySpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.type=n,this.handler=r,this.target=i,this.phase=s,this.sourceSpan=o,this.handlerSpan=a,this.keySpan=l}static fromParsedEvent(e){let n=e.type===en.Regular?e.targetOrPhase:null,r=e.type===en.LegacyAnimation?e.targetOrPhase:null;if(e.keySpan===void 0)throw new Error(`Unexpected state: keySpan must be defined for bound event but was not for ${e.name}: ${e.sourceSpan}`);return new t(e.name,e.type,e.handler,n,r,e.sourceSpan,e.handlerSpan,e.keySpan)}visit(e){return e.visitBoundEvent(this)}},Kr=class{name;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;isVoid;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){this.name=e,this.attributes=n,this.inputs=r,this.outputs=i,this.directives=s,this.children=o,this.references=a,this.isSelfClosing=l,this.sourceSpan=c,this.startSourceSpan=u,this.endSourceSpan=h,this.isVoid=p,this.i18n=m}visit(e){return e.visitElement(this)}},Qr=class{nameSpan;sourceSpan;prefetchSpan;whenOrOnSourceSpan;hydrateSpan;constructor(e,n,r,i,s){this.nameSpan=e,this.sourceSpan=n,this.prefetchSpan=r,this.whenOrOnSourceSpan=i,this.hydrateSpan=s}visit(e){return e.visitDeferredTrigger(this)}},Bf=class extends Qr{value;constructor(e,n,r,i,s){super(null,n,r,i,s),this.value=e}},Gv=class extends Qr{},jv=class extends Qr{},Wv=class extends Qr{},Vf=class extends Qr{reference;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.reference=e}},zv=class extends Qr{delay;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.delay=e}},Uf=class extends Qr{reference;constructor(e,n,r,i,s,o){super(n,r,i,s,o),this.reference=e}},Dc=class extends Qr{reference;options;constructor(e,n,r,i,s,o,a){super(r,i,s,o,a),this.reference=e,this.options=n}},Mn=class{nameSpan;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i){this.nameSpan=e,this.sourceSpan=n,this.startSourceSpan=r,this.endSourceSpan=i}},kc=class extends Mn{children;minimumTime;i18n;constructor(e,n,r,i,s,o,a){super(r,i,s,o),this.children=e,this.minimumTime=n,this.i18n=a}visit(e){return e.visitDeferredBlockPlaceholder(this)}},Nc=class extends Mn{children;afterTime;minimumTime;i18n;constructor(e,n,r,i,s,o,a,l){super(i,s,o,a),this.children=e,this.afterTime=n,this.minimumTime=r,this.i18n=l}visit(e){return e.visitDeferredBlockLoading(this)}},Mc=class extends Mn{children;i18n;constructor(e,n,r,i,s,o){super(n,r,i,s),this.children=e,this.i18n=o}visit(e){return e.visitDeferredBlockError(this)}},io=class extends Mn{children;placeholder;loading;error;mainBlockSpan;i18n;triggers;prefetchTriggers;hydrateTriggers;definedTriggers;definedPrefetchTriggers;definedHydrateTriggers;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){super(l,c,h,p),this.children=e,this.placeholder=s,this.loading=o,this.error=a,this.mainBlockSpan=u,this.i18n=m,this.triggers=n,this.prefetchTriggers=r,this.hydrateTriggers=i,this.definedTriggers=Object.keys(n),this.definedPrefetchTriggers=Object.keys(r),this.definedHydrateTriggers=Object.keys(i)}visit(e){return e.visitDeferredBlock(this)}visitAll(e){this.visitTriggers(this.definedHydrateTriggers,this.hydrateTriggers,e),this.visitTriggers(this.definedTriggers,this.triggers,e),this.visitTriggers(this.definedPrefetchTriggers,this.prefetchTriggers,e),lv(e,this.children);let n=[this.placeholder,this.loading,this.error].filter(r=>r!==null);lv(e,n)}visitTriggers(e,n,r){lv(r,e.map(i=>n[i]))}},$f=class extends Mn{expression;groups;unknownBlocks;constructor(e,n,r,i,s,o,a){super(a,i,s,o),this.expression=e,this.groups=n,this.unknownBlocks=r}visit(e){return e.visitSwitchBlock(this)}},Jv=class extends Mn{expression;constructor(e,n,r,i,s){super(s,n,r,i),this.expression=e}visit(e){return e.visitSwitchBlockCase(this)}},Rc=class extends Mn{cases;children;i18n;constructor(e,n,r,i,s,o,a){super(o,r,i,s),this.cases=e,this.children=n,this.i18n=a}visit(e){return e.visitSwitchBlockCaseGroup(this)}},Da=class extends Mn{item;expression;trackBy;trackKeywordSpan;contextVariables;children;empty;mainBlockSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){super(p,l,u,h),this.item=e,this.expression=n,this.trackBy=r,this.trackKeywordSpan=i,this.contextVariables=s,this.children=o,this.empty=a,this.mainBlockSpan=c,this.i18n=m}visit(e){return e.visitForLoopBlock(this)}},Pc=class extends Mn{children;i18n;constructor(e,n,r,i,s,o){super(s,n,r,i),this.children=e,this.i18n=o}visit(e){return e.visitForLoopBlockEmpty(this)}},Hf=class extends Mn{branches;constructor(e,n,r,i,s){super(s,n,r,i),this.branches=e}visit(e){return e.visitIfBlock(this)}},qs=class extends Mn{expression;children;expressionAlias;i18n;constructor(e,n,r,i,s,o,a,l){super(a,i,s,o),this.expression=e,this.children=n,this.expressionAlias=r,this.i18n=l}visit(e){return e.visitIfBlockBranch(this)}},qf=class{name;sourceSpan;nameSpan;constructor(e,n,r){this.name=e,this.sourceSpan=n,this.nameSpan=r}visit(e){return e.visitUnknownBlock(this)}},a0=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e){return e.visitLetDeclaration(this)}},ic=class{componentName;tagName;fullName;attributes;inputs;outputs;directives;children;references;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m,g){this.componentName=e,this.tagName=n,this.fullName=r,this.attributes=i,this.inputs=s,this.outputs=o,this.directives=a,this.children=l,this.references=c,this.isSelfClosing=u,this.sourceSpan=h,this.startSourceSpan=p,this.endSourceSpan=m,this.i18n=g}visit(e){return e.visitComponent(this)}},Sx=class{name;attributes;inputs;outputs;references;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c){this.name=e,this.attributes=n,this.inputs=r,this.outputs=i,this.references=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l,this.i18n=c}visit(e){return e.visitDirective(this)}},Dn=class{tagName;attributes;inputs;outputs;directives;templateAttrs;children;references;variables;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m,g){this.tagName=e,this.attributes=n,this.inputs=r,this.outputs=i,this.directives=s,this.templateAttrs=o,this.children=a,this.references=l,this.variables=c,this.isSelfClosing=u,this.sourceSpan=h,this.startSourceSpan=p,this.endSourceSpan=m,this.i18n=g}visit(e){return e.visitTemplate(this)}},ka=class{selector;attributes;children;isSelfClosing;sourceSpan;startSourceSpan;endSourceSpan;i18n;name="ng-content";constructor(e,n,r,i,s,o,a,l){this.selector=e,this.attributes=n,this.children=r,this.isSelfClosing=i,this.sourceSpan=s,this.startSourceSpan=o,this.endSourceSpan=a,this.i18n=l}visit(e){return e.visitContent(this)}},Ki=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitVariable(this)}},Lc=class{name;value;sourceSpan;keySpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=s}visit(e){return e.visitReference(this)}},bx=class{vars;placeholders;sourceSpan;i18n;constructor(e,n,r,i){this.vars=e,this.placeholders=n,this.sourceSpan=r,this.i18n=i}visit(e){return e.visitIcu(this)}},Oc=class{tagNames;bindings;listeners;sourceSpan;constructor(e,n,r,i){if(this.tagNames=e,this.bindings=n,this.listeners=r,this.sourceSpan=i,e.length===0)throw new Error("HostElement must have at least one tag name.")}visit(){throw new Error("HostElement cannot be visited")}};function lv(t,e){let n=[];if(t.visit)for(let r of e)t.visit(r);else for(let r of e){let i=r.visit(t);i&&n.push(i)}return n}var tn=class{nodes;placeholders;placeholderToMessage;meaning;description;customId;sources;id;legacyIds=[];messageString;constructor(e,n,r,i,s,o){this.nodes=e,this.placeholders=n,this.placeholderToMessage=r,this.meaning=i,this.description=s,this.customId=o,this.id=this.customId,this.messageString=$R(this.nodes),e.length?this.sources=[{filePath:e[0].sourceSpan.start.file.url,startLine:e[0].sourceSpan.start.line+1,startCol:e[0].sourceSpan.start.col+1,endLine:e[e.length-1].sourceSpan.end.line+1,endCol:e[0].sourceSpan.start.col+1}]:this.sources=[]}},Wl=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e,n){return e.visitText(this,n)}},gi=class{children;sourceSpan;constructor(e,n){this.children=e,this.sourceSpan=n}visit(e,n){return e.visitContainer(this,n)}},Gf=class{expression;type;cases;sourceSpan;expressionPlaceholder;constructor(e,n,r,i,s){this.expression=e,this.type=n,this.cases=r,this.sourceSpan=i,this.expressionPlaceholder=s}visit(e,n){return e.visitIcu(this,n)}},Qi=class{tag;attrs;startName;closeName;children;isVoid;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l,c){this.tag=e,this.attrs=n,this.startName=r,this.closeName=i,this.children=s,this.isVoid=o,this.sourceSpan=a,this.startSourceSpan=l,this.endSourceSpan=c}visit(e,n){return e.visitTagPlaceholder(this,n)}},Fc=class{value;name;sourceSpan;constructor(e,n,r){this.value=e,this.name=n,this.sourceSpan=r}visit(e,n){return e.visitPlaceholder(this,n)}},Na=class{value;name;sourceSpan;previousMessage;constructor(e,n,r){this.value=e,this.name=n,this.sourceSpan=r}visit(e,n){return e.visitIcuPlaceholder(this,n)}},Xi=class{name;parameters;startName;closeName;children;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l){this.name=e,this.parameters=n,this.startName=r,this.closeName=i,this.children=s,this.sourceSpan=o,this.startSourceSpan=a,this.endSourceSpan=l}visit(e,n){return e.visitBlockPlaceholder(this,n)}};function $R(t){let e=new Yv;return t.map(r=>r.visit(e)).join("")}var Yv=class{visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){let n=Object.keys(e.cases).map(r=>`${r} {${e.cases[r].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${n.join(" ")}}`}visitTagPlaceholder(e){let n=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${n}{$${e.closeName}}`}visitPlaceholder(e){return`{$${e.name}}`}visitIcuPlaceholder(e){return`{$${e.name}}`}visitBlockPlaceholder(e){let n=e.children.map(r=>r.visit(this)).join("");return`{$${e.startName}}${n}{$${e.closeName}}`}};var HR=class{visitTag(e){let n=this._serializeAttributes(e.attrs);if(e.children.length==0)return`<${e.name}${n}/>`;let r=e.children.map(i=>i.visit(this));return`<${e.name}${n}>${r.join("")}</${e.name}>`}visitText(e){return e.value}visitDeclaration(e){return`<?xml${this._serializeAttributes(e.attrs)} ?>`}_serializeAttributes(e){let n=Object.keys(e).map(r=>`${r}="${e[r]}"`).join(" ");return n.length>0?" "+n:""}visitDoctype(e){return`<!DOCTYPE ${e.rootTag} [
${e.dtd}
]>`}},DQ=new HR;function qR(t){return t.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var xx="i18n",Kv="i18n-",GR="VAR_";function Tx(t){return t===xx||t.startsWith(Kv)}function jR(t){return t.attrs.some(e=>Tx(e.name))}function Ix(t){return t.nodes[0]}function l0(t={},e){let n={};return t&&Object.keys(t).length&&Object.keys(t).forEach(r=>n[lu(r,e)]=t[r]),n}function lu(t,e=!0){let n=qR(t);if(!e)return n;let r=n.split("_");if(r.length===1)return t.toLowerCase();let i;/^\d+$/.test(r[r.length-1])&&(i=r.pop());let s=r.shift().toLowerCase();return r.length&&(s+=r.map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("")),i?`${s}_${i}`:s}var WR=/[-.]/,c0="_t",Bc="ctx",u0="rf";function Ax(t,e){let n=null;return()=>(n||(t(new wt(c0,void 0,Th)),n=Ee(e)),n)}function fa(t){return Array.isArray(t)?Ae(t.map(fa)):T(t,hr)}function US(t,e){let n=Object.getOwnPropertyNames(t);return n.length===0?null:Kn(n.map(r=>{let i=t[r],s,o,a,l;if(typeof i=="string")s=r,a=r,o=i,l=fa(o);else{a=r,s=i.classPropertyName,o=i.bindingPropertyName;let c=o!==s,u=i.transformFunction!==null,h=Xl.None;if(i.isSignal&&(h|=Xl.SignalBased),u&&(h|=Xl.HasDecoratorInputTransform),e&&(c||u||h!==Xl.None)){let p=[T(h),fa(o)];(c||u)&&(p.push(fa(s)),u&&p.push(i.transformFunction)),l=Ae(p)}else l=fa(o)}return{key:a,quoted:WR.test(a),value:l}}))}var Zi=class{values=[];set(e,n){if(n){let r=this.values.find(i=>i.key===e);r?r.value=n:this.values.push({key:e,value:n,quoted:!1})}}toLiteralMap(){return Kn(this.values)}};function zR(t){let e=t instanceof Kr?t.name:"ng-template",n=JR(t),r=new wa,i=vr(e)[1];return r.setElement(i),Object.getOwnPropertyNames(n).forEach(s=>{let o=vr(s)[1],a=n[s];r.addAttribute(o,a),s.toLowerCase()==="class"&&a.trim().split(/\s+/).forEach(c=>r.addClassName(c))}),r}function JR(t){let e={};return t instanceof Dn&&t.tagName!=="ng-template"?t.templateAttrs.forEach(n=>e[n.name]=""):(t.attributes.forEach(n=>{Tx(n.name)||(e[n.name]=n.value)}),t.inputs.forEach(n=>{(n.type===Se.Property||n.type===Se.TwoWay)&&(e[n.name]="")}),t.outputs.forEach(n=>{e[n.name]=""})),e}function $S(t,e){let n=null,r={name:t.name,type:t.type,typeArgumentCount:t.typeArgumentCount,deps:[],target:hi.Injectable};if(t.useClass!==void 0){let a=t.useClass.expression.isEquivalent(t.type.value),l;t.deps!==void 0&&(l=t.deps),l!==void 0?n=Ls(te(A({},r),{delegate:t.useClass.expression,delegateDeps:l,delegateType:Df.Class})):a?n=Ls(r):n={statements:[],expression:HS(t.type.value,t.useClass.expression,e)}}else t.useFactory!==void 0?t.deps!==void 0?n=Ls(te(A({},r),{delegate:t.useFactory,delegateDeps:t.deps||[],delegateType:Df.Function})):n={statements:[],expression:Jr([],t.useFactory.callFn([]))}:t.useValue!==void 0?n=Ls(te(A({},r),{expression:t.useValue.expression})):t.useExisting!==void 0?n=Ls(te(A({},r),{expression:G(_.inject).callFn([t.useExisting.expression])})):n={statements:[],expression:HS(t.type.value,t.type.value,e)};let i=t.type.value,s=new Zi;return s.set("token",i),s.set("factory",n.expression),t.providedIn.expression.value!==null&&s.set("providedIn",MR(t.providedIn)),{expression:G(_.\u0275\u0275defineInjectable).callFn([s.toLiteralMap()],void 0,!0),type:YR(t),statements:n.statements}}function YR(t){return new Yn(G(_.InjectableDeclaration,[Ah(t.type.type,t.typeArgumentCount)]))}function HS(t,e,n){if(t.node===e.node)return e.prop("\u0275fac");if(!n)return qS(e);let r=G(_.resolveForwardRef).callFn([e]);return qS(r)}function qS(t){let e=new Nt("__ngFactoryType__",Th);return Jr([e],t.prop("\u0275fac").callFn([Ee(e.name)]))}var xt=0,KR=8,d0=9,Gs=10,Dx=11,kx=12,f0=13,Nx=32,Qv=33,Vc=34,Mx=35,kh=36,QR=37,jf=38,Uc=39,An=40,kt=41,GS=42,Rx=43,hn=44,Wf=45,Ms=46,jn=47,Ur=58,xn=59,ya=60,Ut=61,qn=62,jS=63,h0=48,XR=55,Px=57,ss=65,ZR=69,eP=70,tP=88,Va=90,qr=91,js=92,pi=93,nP=94,os=95,so=97,rP=98,iP=101,p0=102,Lx=110,Ox=114,Fx=116,Bx=117,Vx=118,Ux=120,cu=122,fr=123,WS=124,Xt=125,$x=160,ra=64,Xv=96;function $c(t){return t>=d0&&t<=Nx||t==$x}function dr(t){return h0<=t&&t<=Px}function es(t){return t>=so&&t<=cu||t>=ss&&t<=Va}function sP(t){return t>=so&&t<=p0||t>=ss&&t<=eP||dr(t)}function zf(t){return t===Gs||t===f0}function zS(t){return h0<=t&&t<=XR}function sc(t){return t===Uc||t===Vc||t===Xv}var Hc=class t{file;offset;line;col;constructor(e,n,r,i){this.file=e,this.offset=n,this.line=r,this.col=i}toString(){return this.offset!=null?`${this.file.url}@${this.line}:${this.col}`:this.file.url}moveBy(e){let n=this.file.content,r=n.length,i=this.offset,s=this.line,o=this.col;for(;i>0&&e<0;)if(i--,e++,n.charCodeAt(i)==Gs){s--;let l=n.substring(0,i-1).lastIndexOf(String.fromCharCode(Gs));o=l>0?i-l:i}else o--;for(;i<r&&e>0;){let a=n.charCodeAt(i);i++,e--,a==Gs?(s++,o=0):o++}return new t(this.file,i,s,o)}getContext(e,n){let r=this.file.content,i=this.offset;if(i!=null){i>r.length-1&&(i=r.length-1);let s=i,o=0,a=0;for(;o<e&&i>0&&(i--,o++,!(r[i]==`
`&&++a==n)););for(o=0,a=0;o<e&&s<r.length-1&&(s++,o++,!(r[s]==`
`&&++a==n)););return{before:r.substring(i,this.offset),after:r.substring(this.offset,s+1)}}return null}},Jf=class{content;url;constructor(e,n){this.content=e,this.url=n}},Z=class{start;end;fullStart;details;constructor(e,n,r=e,i=null){this.start=e,this.end=n,this.fullStart=r,this.details=i}toString(){return this.start.file.content.substring(this.start.offset,this.end.offset)}},ji=(function(t){return t[t.WARNING=0]="WARNING",t[t.ERROR=1]="ERROR",t})(ji||{}),K=class extends Error{span;msg;level;relatedError;constructor(e,n,r=ji.ERROR,i){super(n),this.span=e,this.msg=n,this.level=r,this.relatedError=i,Object.setPrototypeOf(this,new.target.prototype)}contextualMessage(){let e=this.span.start.getContext(100,3);return e?`${this.msg} ("${e.before}[${ji[this.level]} ->]${e.after}")`:this.msg}toString(){let e=this.span.details?`, ${this.span.details}`:"";return`${this.contextualMessage()}: ${this.span.start}${e}`}};function oP(t,e,n){let r=`in ${t} ${e} in ${n}`,i=new Jf("",r);return new Z(new Hc(i,-1,-1,-1),new Hc(i,-1,-1,-1))}var aP=0;function lP(t){if(!t||!t.reference)return null;let e=t.reference;if(e.__anonymousType)return e.__anonymousType;if(e.__forward_ref__)return"__forward_ref__";let n=_x(e);return n.indexOf("(")>=0?(n=`anonymous_${aP++}`,e.__anonymousType=n):n=Os(n),n}function Os(t){return t.replace(/\W/g,"_")}var JS='(this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})',Zv=class extends Fv{constructor(){super(!1)}visitWrappedNodeExpr(e,n){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}visitDeclareVarStmt(e,n){return n.print(e,`var ${e.name}`),e.value&&(n.print(e," = "),e.value.visitExpression(this,n)),n.println(e,";"),null}visitTaggedTemplateLiteralExpr(e,n){let r=e.template.elements;return e.tag.visitExpression(this,n),n.print(e,`(${JS}(`),n.print(e,`[${r.map(i=>Bs(i.text,!1)).join(", ")}], `),n.print(e,`[${r.map(i=>Bs(i.rawText,!1)).join(", ")}])`),e.template.expressions.forEach(i=>{n.print(e,", "),i.visitExpression(this,n)}),n.print(e,")"),null}visitTemplateLiteralExpr(e,n){n.print(e,"`");for(let r=0;r<e.elements.length;r++){e.elements[r].visitExpression(this,n);let i=r<e.expressions.length?e.expressions[r]:null;i!==null&&(n.print(i,"${"),i.visitExpression(this,n),n.print(i,"}"))}n.print(e,"`")}visitTemplateLiteralElementExpr(e,n){return n.print(e,e.rawText),null}visitFunctionExpr(e,n){return n.print(e,`function${e.name?" "+e.name:""}(`),this._visitParams(e.params,n),n.println(e,") {"),n.incIndent(),this.visitAllStatements(e.statements,n),n.decIndent(),n.print(e,"}"),null}visitArrowFunctionExpr(e,n){if(n.print(e,"("),this._visitParams(e.params,n),n.print(e,") =>"),Array.isArray(e.body))n.println(e,"{"),n.incIndent(),this.visitAllStatements(e.body,n),n.decIndent(),n.print(e,"}");else{let r=e.body instanceof gr;r&&n.print(e,"("),e.body.visitExpression(this,n),r&&n.print(e,")")}return null}visitDeclareFunctionStmt(e,n){return n.print(e,`function ${e.name}(`),this._visitParams(e.params,n),n.println(e,") {"),n.incIndent(),this.visitAllStatements(e.statements,n),n.decIndent(),n.println(e,"}"),null}visitLocalizedString(e,n){n.print(e,`$localize(${JS}(`);let r=[e.serializeI18nHead()];for(let i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return n.print(e,`[${r.map(i=>Bs(i.cooked,!1)).join(", ")}], `),n.print(e,`[${r.map(i=>Bs(i.raw,!1)).join(", ")}])`),e.expressions.forEach(i=>{n.print(e,", "),i.visitExpression(this,n)}),n.print(e,")"),null}_visitParams(e,n){this.visitAllObjects(r=>n.print(null,r.name),e,n,",")}},Kd;function cP(){if(Kd===void 0){let t=rc.trustedTypes;if(Kd=null,t)try{Kd=t.createPolicy("angular#unsafe-jit",{createScript:e=>e})}catch{}}return Kd}function uP(t){return cP()?.createScript(t)||t}function YS(...t){if(!rc.trustedTypes)return new Function(...t);let e=t.slice(0,-1).join(","),n=t[t.length-1],r=`(function anonymous(${e}
) { ${n}
})`,i=rc.eval(uP(r));return i.bind===void 0?new Function(...t):(i.toString=()=>r,i.bind(rc))}var ey=class{evaluateStatements(e,n,r,i){let s=new ty(r),o=Ov.createRoot();return n.length>0&&!dP(n[0])&&(n=[T("use strict").toStmt(),...n]),s.visitAllStatements(n,o),s.createReturnStmt(o),this.evaluateCode(e,o,s.getArgs(),i)}evaluateCode(e,n,r,i){let s=`"use strict";${n.toSource()}
//# sourceURL=${e}`,o=[],a=[];for(let c in r)a.push(r[c]),o.push(c);if(i){let c=YS(...o.concat("return null;")).toString(),u=c.slice(0,c.indexOf("return null;")).split(`
`).length-1;s+=`
${n.toSourceMapGenerator(e,u).toJsComment()}`}let l=YS(...o.concat(s));return this.executeFunction(l,a)}executeFunction(e,n){return e(...n)}},ty=class extends Zv{refResolver;_evalArgNames=[];_evalArgValues=[];_evalExportedVars=[];constructor(e){super(),this.refResolver=e}createReturnStmt(e){new Rt(new gr(this._evalExportedVars.map(r=>new Ca(r,Ee(r),!1)))).visitStatement(this,e)}getArgs(){let e={};for(let n=0;n<this._evalArgNames.length;n++)e[this._evalArgNames[n]]=this._evalArgValues[n];return e}visitExternalExpr(e,n){return this._emitReferenceToExternal(e,this.refResolver.resolveExternalReference(e.value),n),null}visitWrappedNodeExpr(e,n){return this._emitReferenceToExternal(e,e.node,n),null}visitDeclareVarStmt(e,n){return e.hasModifier(Mt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareVarStmt(e,n)}visitDeclareFunctionStmt(e,n){return e.hasModifier(Mt.Exported)&&this._evalExportedVars.push(e.name),super.visitDeclareFunctionStmt(e,n)}_emitReferenceToExternal(e,n,r){let i=this._evalArgValues.indexOf(n);if(i===-1){i=this._evalArgValues.length,this._evalArgValues.push(n);let s=lP({reference:n})||"val";this._evalArgNames.push(`jit_${s}_${i}`)}r.print(e,this._evalArgNames[i])}};function dP(t){return t.isEquivalent(T("use strict").toStmt())}function KS(t){let e=new Zi;t.providers!==null&&e.set("providers",t.providers),t.imports.length>0&&e.set("imports",Ae(t.imports));let n=G(_.defineInjector).callFn([e.toLiteralMap()],void 0,!0),r=fP(t);return{expression:n,type:r,statements:[]}}function fP(t){return new Yn(G(_.InjectorDeclaration,[new Yn(t.type.type)]))}var ny=class{context;constructor(e){this.context=e}resolveExternalReference(e){if(e.moduleName!=="@angular/core")throw new Error(`Cannot resolve external reference to ${e.moduleName}, only references to @angular/core are supported.`);if(!this.context.hasOwnProperty(e.name))throw new Error(`No value provided for @angular/core symbol '${e.name}'.`);return this.context[e.name]}},Yf=(function(t){return t[t.Inline=0]="Inline",t[t.SideEffect=1]="SideEffect",t[t.Omit=2]="Omit",t})(Yf||{}),Wi=(function(t){return t[t.Global=0]="Global",t[t.Local=1]="Local",t})(Wi||{});function hP(t){let e=[],n=new Zi;if(n.set("type",t.type.value),t.kind===Wi.Global&&t.bootstrap.length>0&&n.set("bootstrap",Vs(t.bootstrap,t.containsForwardDecls)),t.selectorScopeMode===Yf.Inline)t.declarations.length>0&&n.set("declarations",Vs(t.declarations,t.containsForwardDecls)),t.imports.length>0&&n.set("imports",Vs(t.imports,t.containsForwardDecls)),t.exports.length>0&&n.set("exports",Vs(t.exports,t.containsForwardDecls));else if(t.selectorScopeMode===Yf.SideEffect){let s=gP(t);s!==null&&e.push(s)}t.schemas!==null&&t.schemas.length>0&&n.set("schemas",Ae(t.schemas.map(s=>s.value))),t.id!==null&&(n.set("id",t.id),e.push(G(_.registerNgModuleType).callFn([t.type.value,t.id]).toStmt()));let r=G(_.defineNgModule).callFn([n.toLiteralMap()],void 0,!0),i=mP(t);return{expression:r,type:i,statements:e}}function pP(t){let e=new Zi;return e.set("type",new ye(t.type)),t.bootstrap!==void 0&&e.set("bootstrap",new ye(t.bootstrap)),t.declarations!==void 0&&e.set("declarations",new ye(t.declarations)),t.imports!==void 0&&e.set("imports",new ye(t.imports)),t.exports!==void 0&&e.set("exports",new ye(t.exports)),t.schemas!==void 0&&e.set("schemas",new ye(t.schemas)),t.id!==void 0&&e.set("id",new ye(t.id)),G(_.defineNgModule).callFn([e.toLiteralMap()])}function mP(t){if(t.kind===Wi.Local)return new Yn(t.type.value);let{type:e,declarations:n,exports:r,imports:i,includeImportTypes:s,publicDeclarationTypes:o}=t;return new Yn(G(_.NgModuleDeclaration,[new Yn(e.type),o===null?cv(n):vP(o),s?cv(i):jr,cv(r)]))}function gP(t){let e=new Zi;if(t.kind===Wi.Global?t.declarations.length>0&&e.set("declarations",Vs(t.declarations,t.containsForwardDecls)):t.declarationsExpression&&e.set("declarations",t.declarationsExpression),t.kind===Wi.Global?t.imports.length>0&&e.set("imports",Vs(t.imports,t.containsForwardDecls)):t.importsExpression&&e.set("imports",t.importsExpression),t.kind===Wi.Global?t.exports.length>0&&e.set("exports",Vs(t.exports,t.containsForwardDecls)):t.exportsExpression&&e.set("exports",t.exportsExpression),t.kind===Wi.Local&&t.bootstrapExpression&&e.set("bootstrap",t.bootstrapExpression),Object.keys(e.values).length===0)return null;let n=new mn(G(_.setNgModuleScope),[t.type.value,e.toLiteralMap()]),r=kR(n),i=new zi([],[r.toStmt()]);return new mn(i,[]).toStmt()}function cv(t){let e=t.map(n=>ou(n.type));return t.length>0?Pt(Ae(e)):jr}function vP(t){let e=t.map(n=>ou(n));return t.length>0?Pt(Ae(e)):jr}function QS(t){let e=[];e.push({key:"name",value:T(t.pipeName??t.name),quoted:!1}),e.push({key:"type",value:t.type.value,quoted:!1}),e.push({key:"pure",value:T(t.pure),quoted:!1}),t.isStandalone===!1&&e.push({key:"standalone",value:T(!1),quoted:!1});let n=G(_.definePipe).callFn([Kn(e)],void 0,!0),r=yP(t);return{expression:n,type:r,statements:[]}}function yP(t){return new Yn(G(_.PipeDeclaration,[Ah(t.type.type,t.typeArgumentCount),new Yn(new Lt(t.pipeName)),new Yn(new Lt(t.isStandalone))]))}var Ma=(function(t){return t[t.Directive=0]="Directive",t[t.Pipe=1]="Pipe",t[t.NgModule=2]="NgModule",t})(Ma||{}),wP=new Set(["inherit","initial","revert","unset","alternate","alternate-reverse","normal","reverse","backwards","both","forwards","none","paused","running","ease","ease-in","ease-in-out","ease-out","linear","step-start","step-end","end","jump-both","jump-end","jump-none","jump-start","start"]),EP=["@media","@supports","@document","@layer","@container","@scope","@starting-style"],ry=class{shimCssText(e,n,r=""){let i=[];e=e.replace(OP,a=>{if(a.match(FP))i.push(a);else{let l=a.match(LP);i.push((l?.join("")??"")+`
`)}return g0}),e=this._insertDirectives(e);let s=this._scopeCssText(e,n,r),o=0;return s.replace(BP,()=>i[o++])}_insertDirectives(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}_scopeKeyframesRelatedCss(e,n){let r=new Set,i=Qd(e,s=>this._scopeLocalKeyframeDeclarations(s,n,r));return Qd(i,s=>this._scopeAnimationRule(s,n,r))}_scopeLocalKeyframeDeclarations(e,n,r){return te(A({},e),{selector:e.selector.replace(/(^@(?:-webkit-)?keyframes(?:\s+))(['"]?)(.+)\2(\s*)$/,(i,s,o,a,l)=>(r.add(eb(a,o)),`${s}${o}${n}_${a}${o}${l}`))})}_scopeAnimationKeyframe(e,n,r){return e.replace(/^(\s*)(['"]?)(.+?)\2(\s*)$/,(i,s,o,a,l)=>(a=`${r.has(eb(a,o))?n+"_":""}${a}`,`${s}${o}${a}${o}${l}`))}_animationDeclarationKeyframesRe=/(^|\s+|,)(?:(?:(['"])((?:\\\\|\\\2|(?!\2).)+)\2)|(-?[A-Za-z][\w\-]*))(?=[,\s]|$)/g;_scopeAnimationRule(e,n,r){let i=e.content.replace(/((?:^|\s+|;)(?:-webkit-)?animation\s*:\s*),*([^;]+)/g,(s,o,a)=>o+a.replace(this._animationDeclarationKeyframesRe,(l,c,u="",h,p)=>h?`${c}${this._scopeAnimationKeyframe(`${u}${h}${u}`,n,r)}`:wP.has(p)?l:`${c}${this._scopeAnimationKeyframe(p,n,r)}`));return i=i.replace(/((?:^|\s+|;)(?:-webkit-)?animation-name(?:\s*):(?:\s*))([^;]+)/g,(s,o,a)=>`${o}${a.split(",").map(l=>this._scopeAnimationKeyframe(l,n,r)).join(",")}`),te(A({},e),{content:i})}_insertPolyfillDirectivesInCssText(e){return e.replace(CP,function(...n){return n[2]+"{"})}_insertPolyfillRulesInCssText(e){return e.replace(SP,(...n)=>{let r=n[0].replace(n[1],"").replace(n[2],"");return n[4]+r})}_scopeCssText(e,n,r){let i=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),n&&(e=this._scopeKeyframesRelatedCss(e,n),e=this._scopeSelectors(e,n,r)),e=e+`
`+i,e.trim()}_extractUnscopedRulesFromCssText(e){let n="",r;for(XS.lastIndex=0;(r=XS.exec(e))!==null;){let i=r[0].replace(r[2],"").replace(r[1],r[4]);n+=i+`

`}return n}_convertColonHost(e){return e.replace(IP,(n,r,i)=>{if(r){let s=[];for(let o of this._splitOnTopLevelCommas(r,!0)){let a=o.trim();if(!a)break;let l=Hi+a.replace(Kf,"")+i;s.push(l)}return s.join(",")}else return Hi+i})}*_splitOnTopLevelCommas(e,n){let r=e.length,i=0,s=0;for(let o=0;o<r;o++){let a=e.charCodeAt(o);if(a===An)i++;else if(a===kt){if(i--,i<0&&n){yield e.slice(s,o);return}}else a===hn&&i===0&&(yield e.slice(s,o),s=o+1)}yield e.slice(s)}_convertColonHostContext(e){let n=[];for(let r of this._splitOnTopLevelCommas(e,!1))n.push(this._convertColonHostContextInSelectorPart(r));return n.join(",")}_convertColonHostContextInSelectorPart(e){return e.replace(DP,(n,r)=>{let i=[[]],s=n.indexOf(ua);for(;s!==-1;){let o=n.substring(s+ua.length);if(!o||o[0]!=="("){n=o,s=n.indexOf(ua);continue}let a=[],l=0;for(let u of this._splitOnTopLevelCommas(o.substring(1),!0)){l=l+u.length+1;let h=u.trim();h&&a.push(h)}let c=i.length;YP(i,a.length);for(let u=0;u<a.length;u++)for(let h=0;h<c;h++)i[h+u*c].push(a[u]);n=o.substring(l+1),s=n.indexOf(ua)}return i.map(o=>JP(o,n,r)).join(", ")})}_convertShadowDOMSelectors(e){return NP.reduce((n,r)=>n.replace(r," "),e)}_scopeSelectors(e,n,r){return Qd(e,i=>{let s=i.selector,o=i.content;return i.selector[0]!=="@"?s=this._scopeSelector({selector:s,scopeSelector:n,hostSelector:r,isParentSelector:!0}):EP.some(a=>i.selector.startsWith(a))?o=this._scopeSelectors(i.content,n,r):(i.selector.startsWith("@font-face")||i.selector.startsWith("@page"))&&(o=this._stripScopingSelectors(i.content)),new qc(s,o)})}_stripScopingSelectors(e){return Qd(e,n=>{let r=n.selector.replace(ZS," ").replace(uv," ");return new qc(r,n.content)})}_safeSelector;_shouldScopeIndicator;_scopeSelector({selector:e,scopeSelector:n,hostSelector:r,isParentSelector:i=!1}){let s=/ ?,(?!(?:[^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\))) ?/;return e.split(s).map(o=>o.split(ZS)).map(o=>{let[a,...l]=o;return[(u=>this._selectorNeedsScoping(u,n)?this._applySelectorScope({selector:u,scopeSelector:n,hostSelector:r,isParentSelector:i}):u)(a),...l].join(" ")}).join(", ")}_selectorNeedsScoping(e,n){return!this._makeScopeMatcher(n).test(e)}_makeScopeMatcher(e){let n=/\[/g,r=/\]/g;return e=e.replace(n,"\\[").replace(r,"\\]"),new RegExp("^("+e+")"+MP,"m")}_applySimpleSelectorScope(e,n,r){if(ha.lastIndex=0,ha.test(e)){let i=`[${r}]`,s=e;for(;s.match(uv);)s=s.replace(uv,(o,a)=>a.replace(/([^:\)]*)(:*)(.*)/,(l,c,u,h)=>c+i+u+h));return s.replace(ha,i)}return n+" "+e}_applySelectorScope({selector:e,scopeSelector:n,hostSelector:r,isParentSelector:i}){let s=/\[is=([^\]]*)\]/g;n=n.replace(s,(y,...E)=>E[0]);let o=`[${n}]`,a=y=>{let E=y.trim();if(!E)return y;if(y.includes(Hi)){if(E=this._applySimpleSelectorScope(y,n,r),!y.match(kP)){let[w,I,D,b]=E.match(/([^:]*)(:*)([\s\S]*)/);E=I+o+D+b}}else{let w=y.replace(ha,"");if(w.length>0){let I=w.match(/([^:]*)(:*)([\s\S]*)/);I&&(E=I[1]+o+I[2]+I[3])}}return E},l=y=>{let E="",w=[],I;for(;(I=zl.exec(y))!==null;){let D=1,b=zl.lastIndex;for(;b<y.length;){let L=y[b];if(b++,L==="("){D++;continue}if(L===")"){if(D--,D===0)break;continue}}w.push(`${I[0]}${y.slice(zl.lastIndex,b)}`),zl.lastIndex=b}return w.join("")===y?E=w.map(D=>{let[b]=D.match(zl)??[],L=D.slice(b?.length,-1);L.includes(Hi)&&(this._shouldScopeIndicator=!0);let M=this._scopeSelector({selector:L,scopeSelector:n,hostSelector:r});return`${b}${M})`}).join(""):(this._shouldScopeIndicator=this._shouldScopeIndicator||y.includes(Hi),E=this._shouldScopeIndicator?a(y):y),E};i&&(this._safeSelector=new iy(e),e=this._safeSelector.content());let c="",u=0,h,p=/( |>|\+|~(?!=))(?!([^)(]*(?:\([^)(]*(?:\([^)(]*(?:\([^)(]*\)[^)(]*)*\)[^)(]*)*\)[^)(]*)*\)))\s*/g,m=e.includes(Hi);for((i||this._shouldScopeIndicator)&&(this._shouldScopeIndicator=!m);(h=p.exec(e))!==null;){let y=h[1],E=e.slice(u,h.index);if(E.match(/__esc-ph-(\d+)__/)&&e[h.index+1]?.match(/[a-fA-F\d]/))continue;let w=l(E);c+=`${w} ${y} `,u=p.lastIndex}let g=e.substring(u);return c+=l(g),this._safeSelector.restore(c)}_insertPolyfillHostInCssText(e){return e.replace(PP,ua).replace(RP,Kf)}},iy=class{placeholders=[];index=0;_content;constructor(e){e=this._escapeRegexMatches(e,/(\[[^\]]*\])/g),e=e.replace(/(\\.)/g,(n,r)=>{let i=`__esc-ph-${this.index}__`;return this.placeholders.push(r),this.index++,i}),this._content=e.replace(TP,(n,r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(`(${i})`),this.index++,r+s})}restore(e){return e.replace(/__(?:ph|esc-ph)-(\d+)__/g,(n,r)=>this.placeholders[+r])}content(){return this._content}_escapeRegexMatches(e,n){return e.replace(n,(r,i)=>{let s=`__ph-${this.index}__`;return this.placeholders.push(i),this.index++,s})}},_P="(:(where|is)\\()?",zl=/:(where|is)\(/gi,CP=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,SP=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,XS=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,Kf="-shadowcsshost",ua="-shadowcsscontext",sy="[^)(]*",bP=String.raw`(?:\(${sy}\)|${sy})+?`,xP=String.raw`(?:\(${bP}\)|${sy})+?`,m0=String.raw`(?:\((${xP})\))`,TP=new RegExp(String.raw`(:nth-[-\w]+)`+m0,"g"),IP=new RegExp(Kf+m0+"?([^,{]*)","gim"),AP=ua+m0+"?([^{]*)",DP=new RegExp(`${_P}(${AP})`,"gim"),Hi=Kf+"-no-combinator",kP=new RegExp(`${Hi}(?![^(]*\\))`,"g"),uv=/-shadowcsshost-no-combinator([^\s,]*)/,NP=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],ZS=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,MP="([>\\s~+[.,{:][\\s\\S]*)?$",ha=/-shadowcsshost/gim,RP=/:host/gim,PP=/:host-context/gim,LP=/\r?\n/g,OP=/\/\*[\s\S]*?\*\//g,FP=/\/\*\s*#\s*source(Mapping)?URL=/g,g0="%COMMENT%",BP=new RegExp(g0,"g"),dv="%BLOCK%",VP=new RegExp(`(\\s*(?:${g0}\\s*)*)([^;\\{\\}]+?)(\\s*)((?:{%BLOCK%}?\\s*;?)|(?:\\s*;))`,"g"),UP=new Map([["{","}"]]),Hx="%COMMA_IN_PLACEHOLDER%",qx="%SEMI_IN_PLACEHOLDER%",Gx="%COLON_IN_PLACEHOLDER%",$P=new RegExp(Hx,"g"),HP=new RegExp(qx,"g"),qP=new RegExp(Gx,"g"),qc=class{selector;content;constructor(e,n){this.selector=e,this.content=n}};function Qd(t,e){let n=WP(t),r=GP(n,UP,dv),i=0,s=r.escapedString.replace(VP,(...o)=>{let a=o[2],l="",c=o[4],u="";c&&c.startsWith("{"+dv)&&(l=r.blocks[i++],c=c.substring(dv.length+1),u="{");let h=e(new qc(a,l));return`${o[1]}${h.selector}${o[3]}${u}${h.content}${c}`});return zP(s)}var oy=class{escapedString;blocks;constructor(e,n){this.escapedString=e,this.blocks=n}};function GP(t,e,n){let r=[],i=[],s=0,o=0,a=-1,l,c;for(let u=0;u<t.length;u++){let h=t[u];h==="\\"?u++:h===c?(s--,s===0&&(i.push(t.substring(a,u)),r.push(n),o=u,a=-1,l=c=void 0)):h===l?s++:s===0&&e.has(h)&&(l=h,c=e.get(h),s=1,a=u+1,r.push(t.substring(o,a)))}return a!==-1?(i.push(t.substring(a)),r.push(n)):r.push(t.substring(o)),new oy(r.join(""),i)}var jP={";":qx,",":Hx,":":Gx};function WP(t){let e=t,n=null;for(let r=0;r<e.length;r++){let i=e[r];if(i==="\\")r++;else if(n!==null)if(i===n)n=null;else{let s=jP[i];s&&(e=`${e.substr(0,r)}${s}${e.substr(r+1)}`,r+=s.length-1)}else(i==="'"||i==='"')&&(n=i)}return e}function zP(t){let e=t.replace($P,",");return e=e.replace(HP,";"),e=e.replace(qP,":"),e}function eb(t,e){return e?t.replace(/((?:^|[^\\])(?:\\\\)*)\\(?=['"])/g,"$1"):t}function JP(t,e,n=""){let r=Hi;ha.lastIndex=0;let i=ha.test(e);if(t.length===0)return r+e;let s=[t.pop()||""];for(;t.length>0;){let o=s.length,a=t.pop();for(let l=0;l<o;l++){let c=s[l];s[o*2+l]=c+" "+a,s[o+l]=a+" "+c,s[l]=a+c}}return s.map(o=>i?`${n}${o}${e}`:`${n}${o}${r}${e}, ${n}${o} ${r}${e}`).join(",")}function YP(t,e){let n=t.length;for(let r=1;r<e;r++)for(let i=0;i<n;i++)t[i+r*n]=t[i].slice(0)}var v=(function(t){return t[t.ListEnd=0]="ListEnd",t[t.Statement=1]="Statement",t[t.Variable=2]="Variable",t[t.ElementStart=3]="ElementStart",t[t.Element=4]="Element",t[t.Template=5]="Template",t[t.ElementEnd=6]="ElementEnd",t[t.ContainerStart=7]="ContainerStart",t[t.Container=8]="Container",t[t.ContainerEnd=9]="ContainerEnd",t[t.DisableBindings=10]="DisableBindings",t[t.ConditionalCreate=11]="ConditionalCreate",t[t.ConditionalBranchCreate=12]="ConditionalBranchCreate",t[t.Conditional=13]="Conditional",t[t.EnableBindings=14]="EnableBindings",t[t.Text=15]="Text",t[t.Listener=16]="Listener",t[t.InterpolateText=17]="InterpolateText",t[t.Binding=18]="Binding",t[t.Property=19]="Property",t[t.StyleProp=20]="StyleProp",t[t.ClassProp=21]="ClassProp",t[t.StyleMap=22]="StyleMap",t[t.ClassMap=23]="ClassMap",t[t.Advance=24]="Advance",t[t.Pipe=25]="Pipe",t[t.Attribute=26]="Attribute",t[t.ExtractedAttribute=27]="ExtractedAttribute",t[t.Defer=28]="Defer",t[t.DeferOn=29]="DeferOn",t[t.DeferWhen=30]="DeferWhen",t[t.I18nMessage=31]="I18nMessage",t[t.DomProperty=32]="DomProperty",t[t.Namespace=33]="Namespace",t[t.ProjectionDef=34]="ProjectionDef",t[t.Projection=35]="Projection",t[t.RepeaterCreate=36]="RepeaterCreate",t[t.Repeater=37]="Repeater",t[t.TwoWayProperty=38]="TwoWayProperty",t[t.TwoWayListener=39]="TwoWayListener",t[t.DeclareLet=40]="DeclareLet",t[t.StoreLet=41]="StoreLet",t[t.I18nStart=42]="I18nStart",t[t.I18n=43]="I18n",t[t.I18nEnd=44]="I18nEnd",t[t.I18nExpression=45]="I18nExpression",t[t.I18nApply=46]="I18nApply",t[t.IcuStart=47]="IcuStart",t[t.IcuEnd=48]="IcuEnd",t[t.IcuPlaceholder=49]="IcuPlaceholder",t[t.I18nContext=50]="I18nContext",t[t.I18nAttributes=51]="I18nAttributes",t[t.SourceLocation=52]="SourceLocation",t[t.Animation=53]="Animation",t[t.AnimationString=54]="AnimationString",t[t.AnimationBinding=55]="AnimationBinding",t[t.AnimationListener=56]="AnimationListener",t[t.Control=57]="Control",t[t.ControlCreate=58]="ControlCreate",t})(v||{}),j=(function(t){return t[t.LexicalRead=0]="LexicalRead",t[t.Context=1]="Context",t[t.TrackContext=2]="TrackContext",t[t.ReadVariable=3]="ReadVariable",t[t.NextContext=4]="NextContext",t[t.Reference=5]="Reference",t[t.StoreLet=6]="StoreLet",t[t.ContextLetReference=7]="ContextLetReference",t[t.GetCurrentView=8]="GetCurrentView",t[t.RestoreView=9]="RestoreView",t[t.ResetView=10]="ResetView",t[t.PureFunctionExpr=11]="PureFunctionExpr",t[t.PureFunctionParameterExpr=12]="PureFunctionParameterExpr",t[t.PipeBinding=13]="PipeBinding",t[t.PipeBindingVariadic=14]="PipeBindingVariadic",t[t.SafePropertyRead=15]="SafePropertyRead",t[t.SafeKeyedRead=16]="SafeKeyedRead",t[t.SafeInvokeFunction=17]="SafeInvokeFunction",t[t.SafeTernaryExpr=18]="SafeTernaryExpr",t[t.EmptyExpr=19]="EmptyExpr",t[t.AssignTemporaryExpr=20]="AssignTemporaryExpr",t[t.ReadTemporaryExpr=21]="ReadTemporaryExpr",t[t.SlotLiteralExpr=22]="SlotLiteralExpr",t[t.ConditionalCase=23]="ConditionalCase",t[t.ConstCollected=24]="ConstCollected",t[t.TwoWayBindingSet=25]="TwoWayBindingSet",t})(j||{}),zn=(function(t){return t[t.None=0]="None",t[t.AlwaysInline=1]="AlwaysInline",t})(zn||{}),Tt=(function(t){return t[t.Context=0]="Context",t[t.Identifier=1]="Identifier",t[t.SavedView=2]="SavedView",t[t.Alias=3]="Alias",t})(Tt||{}),Rn=(function(t){return t[t.Normal=0]="Normal",t[t.TemplateDefinitionBuilder=1]="TemplateDefinitionBuilder",t})(Rn||{}),H=(function(t){return t[t.Attribute=0]="Attribute",t[t.ClassName=1]="ClassName",t[t.StyleProperty=2]="StyleProperty",t[t.Property=3]="Property",t[t.Template=4]="Template",t[t.I18n=5]="I18n",t[t.LegacyAnimation=6]="LegacyAnimation",t[t.TwoWayProperty=7]="TwoWayProperty",t[t.Animation=8]="Animation",t})(H||{}),Gc=(function(t){return t[t.Creation=0]="Creation",t[t.Postproccessing=1]="Postproccessing",t})(Gc||{}),Ua=(function(t){return t[t.I18nText=0]="I18nText",t[t.I18nAttribute=1]="I18nAttribute",t})(Ua||{}),Le=(function(t){return t[t.None=0]="None",t[t.ElementTag=1]="ElementTag",t[t.TemplateTag=2]="TemplateTag",t[t.OpenTag=4]="OpenTag",t[t.CloseTag=8]="CloseTag",t[t.ExpressionIndex=16]="ExpressionIndex",t})(Le||{}),$t=(function(t){return t[t.HTML=0]="HTML",t[t.SVG=1]="SVG",t[t.Math=2]="Math",t})($t||{}),ke=(function(t){return t[t.Idle=0]="Idle",t[t.Immediate=1]="Immediate",t[t.Timer=2]="Timer",t[t.Hover=3]="Hover",t[t.Interaction=4]="Interaction",t[t.Viewport=5]="Viewport",t[t.Never=6]="Never",t})(ke||{}),$s=(function(t){return t[t.RootI18n=0]="RootI18n",t[t.Icu=1]="Icu",t[t.Attr=2]="Attr",t})($s||{}),pn=(function(t){return t[t.NgTemplate=0]="NgTemplate",t[t.Structural=1]="Structural",t[t.Block=2]="Block",t})(pn||{}),jx=Symbol("ConsumesSlot"),v0=Symbol("DependsOnSlotContext"),$a=Symbol("ConsumesVars"),Nh=Symbol("UsesVarOffset"),Xn={[jx]:!0,numSlotsUsed:1},gn={[v0]:!0},nn={[$a]:!0};function Ha(t){return t[jx]===!0}function jc(t){return t[v0]===!0}function fv(t){return t[$a]===!0}function tb(t){return t[Nh]===!0}function Qn(t){return A({kind:v.Statement,statement:t},ee)}function Gi(t,e,n,r){return A({kind:v.Variable,xref:t,variable:e,initializer:n,flags:r},ee)}var ee={debugListId:null,prev:null,next:null};function KP(t,e,n){return A(A(A({kind:v.InterpolateText,target:t,interpolation:e,sourceSpan:n},gn),nn),ee)}var Xe=class{strings;expressions;i18nPlaceholders;constructor(e,n,r){if(this.strings=e,this.expressions=n,this.i18nPlaceholders=r,r.length!==0&&r.length!==n.length)throw new Error(`Expected ${n.length} placeholders to match interpolation expression count, but got ${r.length}`)}};function oo(t,e,n,r,i,s,o,a,l,c,u){return A({kind:v.Binding,bindingKind:e,target:t,name:n,expression:r,unit:i,securityContext:s,isTextAttribute:o,isStructuralTemplateAttribute:a,templateKind:l,i18nContext:null,i18nMessage:c,sourceSpan:u},ee)}function QP(t,e,n,r,i,s,o,a,l,c){return A(A(A({kind:v.Property,target:t,name:e,expression:n,bindingKind:r,securityContext:i,sanitizer:null,isStructuralTemplateAttribute:s,templateKind:o,i18nContext:a,i18nMessage:l,sourceSpan:c},gn),nn),ee)}function XP(t,e,n,r,i,s,o,a,l){return A(A(A({kind:v.TwoWayProperty,target:t,name:e,expression:n,securityContext:r,sanitizer:null,isStructuralTemplateAttribute:i,templateKind:s,i18nContext:o,i18nMessage:a,sourceSpan:l},gn),nn),ee)}function ZP(t,e,n,r,i){return A(A(A({kind:v.StyleProp,target:t,name:e,expression:n,unit:r,sourceSpan:i},gn),nn),ee)}function e2(t,e,n,r){return A(A(A({kind:v.ClassProp,target:t,name:e,expression:n,sourceSpan:r},gn),nn),ee)}function t2(t,e,n){return A(A(A({kind:v.StyleMap,target:t,expression:e,sourceSpan:n},gn),nn),ee)}function n2(t,e,n){return A(A(A({kind:v.ClassMap,target:t,expression:e,sourceSpan:n},gn),nn),ee)}function nb(t,e,n,r,i,s,o,a,l,c){return A(A(A({kind:v.Attribute,target:t,namespace:e,name:n,expression:r,securityContext:i,sanitizer:null,isTextAttribute:s,isStructuralTemplateAttribute:o,templateKind:a,i18nContext:null,i18nMessage:l,sourceSpan:c},gn),nn),ee)}function r2(t,e){return A({kind:v.Advance,delta:t,sourceSpan:e},ee)}function Wx(t,e,n,r){return A(A(A({kind:v.Conditional,target:t,test:e,conditions:n,processed:null,sourceSpan:r,contextValue:null},ee),gn),nn)}function i2(t,e,n,r){return A(A({kind:v.Repeater,target:t,targetSlot:e,collection:n,sourceSpan:r},ee),gn)}function rb(t,e,n,r,i,s,o){return A({kind:v.AnimationBinding,name:t,target:e,animationKind:n,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s,animationBindingKind:o},ee)}function s2(t,e,n,r){return A(A(A({kind:v.DeferWhen,target:t,expr:e,modifier:n,sourceSpan:r},ee),gn),nn)}function zx(t,e,n,r,i,s,o,a,l,c,u){return A(A(A({kind:v.I18nExpression,context:t,target:e,i18nOwner:n,handle:r,expression:i,icuPlaceholder:s,i18nPlaceholder:o,resolutionTime:a,usage:l,name:c,sourceSpan:u},ee),nn),gn)}function o2(t,e,n){return A({kind:v.I18nApply,owner:t,handle:e,sourceSpan:n},ee)}function a2(t,e,n,r){return A(A(A({kind:v.StoreLet,target:t,declaredName:e,value:n,sourceSpan:r},gn),nn),ee)}function l2(t){return A(A(A({kind:v.Control,target:t.target,name:t.name,expression:t.expression,bindingKind:t.bindingKind,securityContext:t.securityContext,sanitizer:null,isStructuralTemplateAttribute:t.isStructuralTemplateAttribute,templateKind:t.templateKind,i18nContext:t.i18nContext,i18nMessage:t.i18nMessage,sourceSpan:t.sourceSpan},gn),nn),ee)}function Xr(t){return t instanceof Me}var Me=class extends xe{constructor(e=null){super(null,e)}},Dt=class t extends Me{name;kind=j.LexicalRead;constructor(e){super(),this.name=e}visitExpression(e,n){}isEquivalent(e){return this.name===e.name}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.name)}},Qf=class t extends Me{target;targetSlot;offset;kind=j.Reference;constructor(e,n,r){super(),this.target=e,this.targetSlot=n,this.offset=r}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.target,this.targetSlot,this.offset)}},Wc=class t extends Me{target;value;sourceSpan;kind=j.StoreLet;[$a]=!0;[v0]=!0;constructor(e,n,r){super(),this.target=e,this.value=n,this.sourceSpan=r}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target&&e.value.isEquivalent(this.value)}isConstant(){return!1}transformInternalExpressions(e,n){this.value=U(this.value,e,n)}clone(){return new t(this.target,this.value,this.sourceSpan)}},zc=class t extends Me{target;targetSlot;kind=j.ContextLetReference;constructor(e,n){super(),this.target=e,this.targetSlot=n}visitExpression(){}isEquivalent(e){return e instanceof t&&e.target===this.target}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.target,this.targetSlot)}},ts=class t extends Me{view;kind=j.Context;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.view)}},ay=class t extends Me{view;kind=j.TrackContext;constructor(e){super(),this.view=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.view===this.view}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t(this.view)}},Xf=class t extends Me{kind=j.NextContext;steps=1;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof t&&e.steps===this.steps}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new t;return e.steps=this.steps,e}},ly=class t extends Me{kind=j.GetCurrentView;constructor(){super()}visitExpression(){}isEquivalent(e){return e instanceof t}isConstant(){return!1}transformInternalExpressions(){}clone(){return new t}},Zf=class t extends Me{view;kind=j.RestoreView;constructor(e){super(),this.view=e}visitExpression(e,n){typeof this.view!="number"&&this.view.visitExpression(e,n)}isEquivalent(e){return!(e instanceof t)||typeof e.view!=typeof this.view?!1:typeof this.view=="number"?this.view===e.view:this.view.isEquivalent(e.view)}isConstant(){return!1}transformInternalExpressions(e,n){typeof this.view!="number"&&(this.view=U(this.view,e,n))}clone(){return new t(this.view instanceof xe?this.view.clone():this.view)}},cy=class t extends Me{expr;kind=j.ResetView;constructor(e){super(),this.expr=e}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&this.expr.isEquivalent(e.expr)}isConstant(){return!1}transformInternalExpressions(e,n){this.expr=U(this.expr,e,n)}clone(){return new t(this.expr.clone())}},eh=class t extends Me{target;value;kind=j.TwoWayBindingSet;constructor(e,n){super(),this.target=e,this.value=n}visitExpression(e,n){this.target.visitExpression(e,n),this.value.visitExpression(e,n)}isEquivalent(e){return this.target.isEquivalent(e.target)&&this.value.isEquivalent(e.value)}isConstant(){return!1}transformInternalExpressions(e,n){this.target=U(this.target,e,n),this.value=U(this.value,e,n)}clone(){return new t(this.target,this.value)}},vi=class t extends Me{xref;kind=j.ReadVariable;name=null;constructor(e){super(),this.xref=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.xref===this.xref}isConstant(){return!1}transformInternalExpressions(){}clone(){let e=new t(this.xref);return e.name=this.name,e}},ao=class t extends Me{kind=j.PureFunctionExpr;[$a]=!0;[Nh]=!0;varOffset=null;body;args;fn=null;constructor(e,n){super(),this.body=e,this.args=n}visitExpression(e,n){this.body?.visitExpression(e,n);for(let r of this.args)r.visitExpression(e,n)}isEquivalent(e){return!(e instanceof t)||e.args.length!==this.args.length?!1:e.body!==null&&this.body!==null&&e.body.isEquivalent(this.body)&&e.args.every((n,r)=>n.isEquivalent(this.args[r]))}isConstant(){return!1}transformInternalExpressions(e,n){this.body!==null?this.body=U(this.body,e,n|be.InChildOperation):this.fn!==null&&(this.fn=U(this.fn,e,n));for(let r=0;r<this.args.length;r++)this.args[r]=U(this.args[r],e,n)}clone(){let e=new t(this.body?.clone()??null,this.args.map(n=>n.clone()));return e.fn=this.fn?.clone()??null,e.varOffset=this.varOffset,e}},ns=class t extends Me{index;kind=j.PureFunctionParameterExpr;constructor(e){super(),this.index=e}visitExpression(){}isEquivalent(e){return e instanceof t&&e.index===this.index}isConstant(){return!0}transformInternalExpressions(){}clone(){return new t(this.index)}},lo=class t extends Me{target;targetSlot;name;args;kind=j.PipeBinding;[$a]=!0;[Nh]=!0;varOffset=null;constructor(e,n,r,i){super(),this.target=e,this.targetSlot=n,this.name=r,this.args=i}visitExpression(e,n){for(let r of this.args)r.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){for(let r=0;r<this.args.length;r++)this.args[r]=U(this.args[r],e,n)}clone(){let e=new t(this.target,this.targetSlot,this.name,this.args.map(n=>n.clone()));return e.varOffset=this.varOffset,e}},Jc=class t extends Me{target;targetSlot;name;args;numArgs;kind=j.PipeBindingVariadic;[$a]=!0;[Nh]=!0;varOffset=null;constructor(e,n,r,i,s){super(),this.target=e,this.targetSlot=n,this.name=r,this.args=i,this.numArgs=s}visitExpression(e,n){this.args.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.args=U(this.args,e,n)}clone(){let e=new t(this.target,this.targetSlot,this.name,this.args.clone(),this.numArgs);return e.varOffset=this.varOffset,e}},Ra=class t extends Me{receiver;name;kind=j.SafePropertyRead;constructor(e,n){super(),this.receiver=e,this.name=n}get index(){return this.name}visitExpression(e,n){this.receiver.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=U(this.receiver,e,n)}clone(){return new t(this.receiver.clone(),this.name)}},Pa=class t extends Me{receiver;index;kind=j.SafeKeyedRead;constructor(e,n,r){super(r),this.receiver=e,this.index=n}visitExpression(e,n){this.receiver.visitExpression(e,n),this.index.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=U(this.receiver,e,n),this.index=U(this.index,e,n)}clone(){return new t(this.receiver.clone(),this.index.clone(),this.sourceSpan)}},co=class t extends Me{receiver;args;kind=j.SafeInvokeFunction;constructor(e,n){super(),this.receiver=e,this.args=n}visitExpression(e,n){this.receiver.visitExpression(e,n);for(let r of this.args)r.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.receiver=U(this.receiver,e,n);for(let r=0;r<this.args.length;r++)this.args[r]=U(this.args[r],e,n)}clone(){return new t(this.receiver.clone(),this.args.map(e=>e.clone()))}},La=class t extends Me{guard;expr;kind=j.SafeTernaryExpr;constructor(e,n){super(),this.guard=e,this.expr=n}visitExpression(e,n){this.guard.visitExpression(e,n),this.expr.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.guard=U(this.guard,e,n),this.expr=U(this.expr,e,n)}clone(){return new t(this.guard.clone(),this.expr.clone())}},Yc=class t extends Me{kind=j.EmptyExpr;visitExpression(e,n){}isEquivalent(e){return e instanceof t}isConstant(){return!0}clone(){return new t}transformInternalExpressions(){}},Zr=class t extends Me{expr;xref;kind=j.AssignTemporaryExpr;name=null;constructor(e,n){super(),this.expr=e,this.xref=n}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(){return!1}isConstant(){return!1}transformInternalExpressions(e,n){this.expr=U(this.expr,e,n)}clone(){let e=new t(this.expr.clone(),this.xref);return e.name=this.name,e}},rs=class t extends Me{xref;kind=j.ReadTemporaryExpr;name=null;constructor(e){super(),this.xref=e}visitExpression(e,n){}isEquivalent(){return this.xref===this.xref}isConstant(){return!1}transformInternalExpressions(e,n){}clone(){let e=new t(this.xref);return e.name=this.name,e}},th=class t extends Me{slot;kind=j.SlotLiteralExpr;constructor(e){super(),this.slot=e}visitExpression(e,n){}isEquivalent(e){return e instanceof t&&e.slot===this.slot}isConstant(){return!0}clone(){return new t(this.slot)}transformInternalExpressions(){}},nh=class t extends Me{expr;target;targetSlot;alias;kind=j.ConditionalCase;constructor(e,n,r,i=null){super(),this.expr=e,this.target=n,this.targetSlot=r,this.alias=i}visitExpression(e,n){this.expr!==null&&this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t&&e.expr===this.expr}isConstant(){return!0}clone(){return new t(this.expr,this.target,this.targetSlot)}transformInternalExpressions(e,n){this.expr!==null&&(this.expr=U(this.expr,e,n))}},Kc=class t extends Me{expr;kind=j.ConstCollected;constructor(e){super(),this.expr=e}transformInternalExpressions(e,n){this.expr=e(this.expr,n)}visitExpression(e,n){this.expr.visitExpression(e,n)}isEquivalent(e){return e instanceof t?this.expr.isEquivalent(e.expr):!1}isConstant(){return this.expr.isConstant()}clone(){return new t(this.expr)}};function It(t,e){ot(t,(n,r)=>(e(n,r),n),be.None)}var be=(function(t){return t[t.None=0]="None",t[t.InChildOperation=1]="InChildOperation",t})(be||{});function hv(t,e,n){for(let r=0;r<t.expressions.length;r++)t.expressions[r]=U(t.expressions[r],e,n)}function ot(t,e,n){switch(t.kind){case v.StyleProp:case v.StyleMap:case v.ClassProp:case v.ClassMap:case v.AnimationString:case v.AnimationBinding:case v.Binding:t.expression instanceof Xe?hv(t.expression,e,n):t.expression=U(t.expression,e,n);break;case v.Property:case v.DomProperty:case v.Attribute:case v.Control:t.expression instanceof Xe?hv(t.expression,e,n):t.expression=U(t.expression,e,n),t.sanitizer=t.sanitizer&&U(t.sanitizer,e,n);break;case v.TwoWayProperty:t.expression=U(t.expression,e,n),t.sanitizer=t.sanitizer&&U(t.sanitizer,e,n);break;case v.I18nExpression:t.expression=U(t.expression,e,n);break;case v.InterpolateText:hv(t.interpolation,e,n);break;case v.Statement:rh(t.statement,e,n);break;case v.Variable:t.initializer=U(t.initializer,e,n);break;case v.Conditional:for(let r of t.conditions)r.expr!==null&&(r.expr=U(r.expr,e,n));t.processed!==null&&(t.processed=U(t.processed,e,n)),t.contextValue!==null&&(t.contextValue=U(t.contextValue,e,n));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:for(let r of t.handlerOps)ot(r,e,n|be.InChildOperation);break;case v.ExtractedAttribute:t.expression=t.expression&&U(t.expression,e,n),t.trustedValueFn=t.trustedValueFn&&U(t.trustedValueFn,e,n);break;case v.RepeaterCreate:if(t.trackByOps===null)t.track=U(t.track,e,n);else for(let r of t.trackByOps)ot(r,e,n|be.InChildOperation);t.trackByFn!==null&&(t.trackByFn=U(t.trackByFn,e,n));break;case v.Repeater:t.collection=U(t.collection,e,n);break;case v.Defer:t.loadingConfig!==null&&(t.loadingConfig=U(t.loadingConfig,e,n)),t.placeholderConfig!==null&&(t.placeholderConfig=U(t.placeholderConfig,e,n)),t.resolverFn!==null&&(t.resolverFn=U(t.resolverFn,e,n));break;case v.I18nMessage:for(let[r,i]of t.params)t.params.set(r,U(i,e,n));for(let[r,i]of t.postprocessingParams)t.postprocessingParams.set(r,U(i,e,n));break;case v.DeferWhen:t.expr=U(t.expr,e,n);break;case v.StoreLet:t.value=U(t.value,e,n);break;case v.Advance:case v.Container:case v.ContainerEnd:case v.ContainerStart:case v.DeferOn:case v.DisableBindings:case v.Element:case v.ElementEnd:case v.ElementStart:case v.EnableBindings:case v.I18n:case v.I18nApply:case v.I18nContext:case v.I18nEnd:case v.I18nStart:case v.IcuEnd:case v.IcuStart:case v.Namespace:case v.Pipe:case v.Projection:case v.ProjectionDef:case v.Template:case v.Text:case v.I18nAttributes:case v.IcuPlaceholder:case v.DeclareLet:case v.SourceLocation:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.ControlCreate:break;default:throw new Error(`AssertionError: transformExpressionsInOp doesn't handle ${v[t.kind]}`)}}function U(t,e,n){if(t instanceof Me)t.transformInternalExpressions(e,n);else if(t instanceof Ce)t.lhs=U(t.lhs,e,n),t.rhs=U(t.rhs,e,n);else if(t instanceof Xs)t.expr=U(t.expr,e,n);else if(t instanceof Nn)t.receiver=U(t.receiver,e,n);else if(t instanceof yi)t.receiver=U(t.receiver,e,n),t.index=U(t.index,e,n);else if(t instanceof mn){t.fn=U(t.fn,e,n);for(let r=0;r<t.args.length;r++)t.args[r]=U(t.args[r],e,n)}else if(t instanceof zr)for(let r=0;r<t.entries.length;r++)t.entries[r]=U(t.entries[r],e,n);else if(t instanceof gr)for(let r of t.entries)r instanceof Ji?r.expression=U(r.expression,e,n):r.value=U(r.value,e,n);else if(t instanceof Wr)t.condition=U(t.condition,e,n),t.trueCase=U(t.trueCase,e,n),t.falseCase!==null&&(t.falseCase=U(t.falseCase,e,n));else if(t instanceof Ea)t.expr=U(t.expr,e,n);else if(t instanceof _f)t.expr=U(t.expr,e,n);else if(t instanceof Sf)for(let r=0;r<t.expressions.length;r++)t.expressions[r]=U(t.expressions[r],e,n);else if(t instanceof hc)t.condition=U(t.condition,e,n);else if(t instanceof uc)t.tag=U(t.tag,e,n),t.template.expressions=t.template.expressions.map(r=>U(r,e,n));else if(t instanceof Qs)if(Array.isArray(t.body))for(let r=0;r<t.body.length;r++)rh(t.body[r],e,n);else t.body=U(t.body,e,n);else if(!(t instanceof ye)){if(t instanceof fc)for(let r=0;r<t.expressions.length;r++)t.expressions[r]=U(t.expressions[r],e,n);else if(t instanceof mr)t.expr=U(t.expr,e,n);else if(t instanceof Zs)t.expression=U(t.expression,e,n);else if(!(t instanceof pr||t instanceof Ks||t instanceof Lt||t instanceof _a))throw new Error(`Unhandled expression kind: ${t.constructor.name}`)}return e(t,n)}function rh(t,e,n){if(t instanceof Ht)t.expr=U(t.expr,e,n);else if(t instanceof Rt)t.value=U(t.value,e,n);else if(t instanceof wt)t.value!==void 0&&(t.value=U(t.value,e,n));else if(t instanceof xf){t.condition=U(t.condition,e,n);for(let r of t.trueCase)rh(r,e,n);for(let r of t.falseCase)rh(r,e,n)}else throw new Error(`Unhandled statement kind: ${t.constructor.name}`)}function Jx(t){return t instanceof Lt&&typeof t.value=="string"}var N=(()=>{class t{static nextListId=0;debugListId=t.nextListId++;head={kind:v.ListEnd,next:null,prev:null,debugListId:this.debugListId};tail={kind:v.ListEnd,next:null,prev:null,debugListId:this.debugListId};constructor(){this.head.next=this.tail,this.tail.prev=this.head}push(n){if(Array.isArray(n)){for(let i of n)this.push(i);return}t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=this.debugListId;let r=this.tail.prev;n.prev=r,r.next=n,n.next=this.tail,this.tail.prev=n}prepend(n){if(n.length===0)return;for(let s of n)t.assertIsNotEnd(s),t.assertIsUnowned(s),s.debugListId=this.debugListId;let r=this.head.next,i=this.head;for(let s of n)i.next=s,s.prev=i,i=s;i.next=r,r.prev=i}*[Symbol.iterator](){let n=this.head.next;for(;n!==this.tail;){t.assertIsOwned(n,this.debugListId);let r=n.next;yield n,n=r}}*reversed(){let n=this.tail.prev;for(;n!==this.head;){t.assertIsOwned(n,this.debugListId);let r=n.prev;yield n,n=r}}static replace(n,r){t.assertIsNotEnd(n),t.assertIsNotEnd(r),t.assertIsOwned(n),t.assertIsUnowned(r),r.debugListId=n.debugListId,n.prev!==null&&(n.prev.next=r,r.prev=n.prev),n.next!==null&&(n.next.prev=r,r.next=n.next),n.debugListId=null,n.prev=null,n.next=null}static replaceWithMany(n,r){if(r.length===0){t.remove(n);return}t.assertIsNotEnd(n),t.assertIsOwned(n);let i=n.debugListId;n.debugListId=null;for(let u of r)t.assertIsNotEnd(u),t.assertIsUnowned(u);let{prev:s,next:o}=n;n.prev=null,n.next=null;let a=s;for(let u of r)t.assertIsUnowned(u),u.debugListId=i,a.next=u,u.prev=a,u.next=null,a=u;let l=r[0],c=a;s!==null&&(s.next=l,l.prev=s),o!==null&&(o.prev=c,c.next=o)}static remove(n){t.assertIsNotEnd(n),t.assertIsOwned(n),n.prev.next=n.next,n.next.prev=n.prev,n.debugListId=null,n.prev=null,n.next=null}static insertBefore(n,r){if(Array.isArray(n)){for(let i of n)t.insertBefore(i,r);return}if(t.assertIsOwned(r),r.prev===null)throw new Error("AssertionError: illegal operation on list start");t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=r.debugListId,n.prev=null,r.prev.next=n,n.prev=r.prev,n.next=r,r.prev=n}static insertAfter(n,r){if(t.assertIsOwned(r),r.next===null)throw new Error("AssertionError: illegal operation on list end");t.assertIsNotEnd(n),t.assertIsUnowned(n),n.debugListId=r.debugListId,r.next.prev=n,n.next=r.next,n.prev=r,r.next=n}static assertIsUnowned(n){if(n.debugListId!==null)throw new Error(`AssertionError: illegal operation on owned node: ${v[n.kind]}`)}static assertIsOwned(n,r){if(n.debugListId===null)throw new Error(`AssertionError: illegal operation on unowned node: ${v[n.kind]}`);if(r!==void 0&&n.debugListId!==r)throw new Error(`AssertionError: node belongs to the wrong list (expected ${r}, actual ${n.debugListId})`)}static assertIsNotEnd(n){if(n.kind===v.ListEnd)throw new Error("AssertionError: illegal operation on list head or tail")}}return t})(),Ot=class{slot=null},c2=new Set([v.Element,v.ElementStart,v.Container,v.ContainerStart,v.Template,v.RepeaterCreate,v.ConditionalCreate,v.ConditionalBranchCreate]);function is(t){return c2.has(t.kind)}function u2(t,e,n,r,i,s){return A(A({kind:v.ElementStart,xref:e,tag:t,handle:new Ot,attributes:null,localRefs:[],nonBindable:!1,namespace:n,i18nPlaceholder:r,startSourceSpan:i,wholeSourceSpan:s},Xn),ee)}function Yx(t,e,n,r,i,s,o,a){return A(A({kind:v.Template,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ot,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},Xn),ee)}function Kx(t,e,n,r,i,s,o,a){return A(A({kind:v.ConditionalCreate,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ot,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},Xn),ee)}function Qx(t,e,n,r,i,s,o,a){return A(A({kind:v.ConditionalBranchCreate,xref:t,templateKind:e,attributes:null,tag:n,handle:new Ot,functionNameSuffix:r,decls:null,vars:null,localRefs:[],nonBindable:!1,namespace:i,i18nPlaceholder:s,startSourceSpan:o,wholeSourceSpan:a},Xn),ee)}function d2(t,e,n,r,i,s,o,a,l,c){return te(A(A(A({kind:v.RepeaterCreate,attributes:null,xref:t,handle:new Ot,emptyView:e,track:r,trackByFn:null,trackByOps:null,tag:n,emptyTag:s,emptyAttributes:null,functionNameSuffix:"For",namespace:$t.HTML,nonBindable:!1,localRefs:[],decls:null,vars:null,varNames:i,usesComponentInstance:!1,i18nPlaceholder:o,emptyI18nPlaceholder:a,startSourceSpan:l,wholeSourceSpan:c},Xn),ee),nn),{numSlotsUsed:e===null?2:3})}function f2(t,e){return A({kind:v.ElementEnd,xref:t,sourceSpan:e},ee)}function h2(t){return A({kind:v.DisableBindings,xref:t},ee)}function p2(t){return A({kind:v.EnableBindings,xref:t},ee)}function Xx(t,e,n,r){return A(A({kind:v.Text,xref:t,handle:new Ot,initialValue:e,icuPlaceholder:n,sourceSpan:r},Xn),ee)}function m2(t,e,n,r,i,s){return A({kind:v.AnimationString,name:t,target:e,animationKind:n,expression:r,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},ee)}function g2(t,e,n,r,i,s){let o=new N;return o.push(r),A({kind:v.Animation,name:t,target:e,animationKind:n,handlerOps:o,handlerFnName:null,i18nMessage:null,securityContext:i,sanitizer:null,sourceSpan:s},ee)}function y0(t,e,n,r,i,s,o,a,l){let c=new N;return c.push(i),A({kind:v.Listener,target:t,targetSlot:e,tag:r,hostListener:a,name:n,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,isLegacyAnimationListener:s!==null,legacyAnimationPhase:s,eventTarget:o,sourceSpan:l},ee)}function Zx(t,e,n,r,i,s,o,a,l){let c=new N;return c.push(i),A({kind:v.AnimationListener,target:t,targetSlot:e,tag:r,hostListener:a,name:n,animationKind:s,handlerOps:c,handlerFnName:null,consumesDollarEvent:!1,eventTarget:o,sourceSpan:l},ee)}function eT(t,e,n,r,i,s){let o=new N;return o.push(i),A({kind:v.TwoWayListener,target:t,targetSlot:e,tag:r,name:n,handlerOps:o,handlerFnName:null,sourceSpan:s},ee)}function tT(t,e,n){return A(A({kind:v.Pipe,xref:t,handle:e,name:n},ee),Xn)}function v2(t){return A({kind:v.Namespace,active:t},ee)}function y2(t){return A({kind:v.ProjectionDef,def:t},ee)}function w2(t,e,n,r,i){return te(A(A({kind:v.Projection,xref:t,handle:new Ot,selector:e,i18nPlaceholder:n,fallbackView:r,projectionSlotIndex:0,attributes:null,localRefs:[],sourceSpan:i},ee),Xn),{numSlotsUsed:r===null?1:2})}function bn(t,e,n,r,i,s,o,a){return A({kind:v.ExtractedAttribute,target:t,bindingKind:e,namespace:n,name:r,expression:i,i18nContext:s,i18nMessage:o,securityContext:a,trustedValueFn:null},ee)}function E2(t,e,n,r,i,s){return te(A(A({kind:v.Defer,xref:t,handle:new Ot,mainView:e,mainSlot:n,loadingView:null,loadingSlot:null,loadingConfig:null,loadingMinimumTime:null,loadingAfterTime:null,placeholderView:null,placeholderSlot:null,placeholderConfig:null,placeholderMinimumTime:null,errorView:null,errorSlot:null,ownResolverFn:r,resolverFn:i,flags:null,sourceSpan:s},ee),Xn),{numSlotsUsed:2})}function $i(t,e,n,r){return A({kind:v.DeferOn,defer:t,trigger:e,modifier:n,sourceSpan:r},ee)}function _2(t,e,n){return A(A({kind:v.DeclareLet,xref:t,declaredName:e,sourceSpan:n,handle:new Ot},Xn),ee)}function C2(t,e,n,r,i,s,o,a){return A({kind:v.I18nMessage,xref:t,i18nContext:e,i18nBlock:n,message:r,messagePlaceholder:i,params:s,postprocessingParams:o,needsPostprocessing:a,subMessages:[]},ee)}function Mh(t,e,n,r){return A(A({kind:v.I18nStart,xref:t,handle:new Ot,root:n??t,message:e,messageIndex:null,subTemplateIndex:null,context:null,sourceSpan:r},ee),Xn)}function Rh(t,e){return A({kind:v.I18nEnd,xref:t,sourceSpan:e},ee)}function S2(t,e,n,r){return A({kind:v.IcuStart,xref:t,message:e,messagePlaceholder:n,context:null,sourceSpan:r},ee)}function b2(t){return A({kind:v.IcuEnd,xref:t},ee)}function x2(t,e,n){return A({kind:v.IcuPlaceholder,xref:t,name:e,strings:n,expressionPlaceholders:[]},ee)}function pv(t,e,n,r,i){if(n===null&&t!==$s.Attr)throw new Error("AssertionError: i18nBlock must be provided for non-attribute contexts.");return A({kind:v.I18nContext,contextKind:t,xref:e,i18nBlock:n,message:r,sourceSpan:i,params:new Map,postprocessingParams:new Map},ee)}function nT(t,e,n){return A(A({kind:v.I18nAttributes,xref:t,handle:e,target:n,i18nAttributesConfig:null},ee),Xn)}function T2(t,e){return A({kind:v.SourceLocation,templatePath:t,locations:e},ee)}function I2(t){return A({kind:v.ControlCreate,sourceSpan:t},ee)}function A2(t,e,n,r,i,s){return A(A({kind:v.DomProperty,name:t,expression:e,bindingKind:n,i18nContext:r,securityContext:i,sanitizer:null,sourceSpan:s},nn),ee)}var rT="CTX_REF_MARKER",B=(function(t){return t[t.Tmpl=0]="Tmpl",t[t.Host=1]="Host",t[t.Both=2]="Both",t})(B||{}),cn=(function(t){return t[t.Full=0]="Full",t[t.DomOnly=1]="DomOnly",t})(cn||{}),ih=class{componentName;pool;compatibility;mode;constructor(e,n,r,i){this.componentName=e,this.pool=n,this.compatibility=r,this.mode=i}kind=B.Both;allocateXrefId(){return this.nextXrefId++}nextXrefId=0},Qc=class extends ih{relativeContextFilePath;i18nUseExternalIds;deferMeta;allDeferrableDepsFn;relativeTemplatePath;enableDebugLocations;constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i),this.relativeContextFilePath=s,this.i18nUseExternalIds=o,this.deferMeta=a,this.allDeferrableDepsFn=l,this.relativeTemplatePath=c,this.enableDebugLocations=u,this.root=new Jn(this,this.allocateXrefId(),null),this.views.set(this.root.xref,this.root)}kind=B.Tmpl;fnSuffix="Template";root;views=new Map;contentSelectors=null;allocateView(e){let n=new Jn(this,this.allocateXrefId(),e);return this.views.set(n.xref,n),n}get units(){return this.views.values()}addConst(e,n){for(let i=0;i<this.consts.length;i++)if(this.consts[i].isEquivalent(e))return i;let r=this.consts.length;return this.consts.push(e),n&&this.constsInitializers.push(...n),r}consts=[];constsInitializers=[]},sh=class{xref;constructor(e){this.xref=e}create=new N;update=new N;fnName=null;vars=null;*ops(){for(let e of this.create)if(yield e,e.kind===v.Listener||e.kind===v.Animation||e.kind===v.AnimationListener||e.kind===v.TwoWayListener)for(let n of e.handlerOps)yield n;else if(e.kind===v.RepeaterCreate&&e.trackByOps!==null)for(let n of e.trackByOps)yield n;for(let e of this.update)yield e}},Jn=class extends sh{job;parent;constructor(e,n,r){super(n),this.job=e,this.parent=r}contextVariables=new Map;aliases=new Set;decls=null},oh=class extends ih{constructor(e,n,r,i){super(e,n,r,i),this.root=new uy(this)}kind=B.Host;fnSuffix="HostBindings";root;get units(){return[this.root]}},uy=class extends sh{job;constructor(e){super(0),this.job=e}attributes=null};function D2(t){for(let e of t.units)for(let n of e.ops())ot(n,k2,be.None)}function k2(t){if(t instanceof mn&&t.fn instanceof Dt&&t.fn.name==="$any"){if(t.args.length!==1)throw new Error("The $any builtin function expects exactly one argument.");return t.args[0]}return t}function N2(t){let e=new Map;for(let n of t.units)for(let r of n.create)r.kind===v.I18nContext&&e.set(r.xref,r);for(let n of t.units)for(let r of n.update)r.kind===v.I18nExpression&&M2(e,r)&&N.insertAfter(o2(r.i18nOwner,r.handle,null),r)}function M2(t,e){if(e.next?.kind!==v.I18nExpression)return!0;let n=t.get(e.context),r=t.get(e.next.context);if(n===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the I18nExpressionOp's context");if(r===void 0)throw new Error("AssertionError: expected an I18nContextOp to exist for the next I18nExpressionOp's context");return n.i18nBlock!==null?n.i18nBlock!==r.i18nBlock:e.i18nOwner!==e.next.i18nOwner}function R2(t){for(let e of t.units){let n=e.update.head,r=[],i=null;for(let s of e.create){if(s.kind===v.I18nStart)i={blockXref:s.xref,lastSlotConsumer:s.xref};else if(s.kind===v.I18nEnd){for(let o of r)o.target=i.lastSlotConsumer,N.insertBefore(o,n);r.length=0,i=null}if(Ha(s))for(i!==null&&(i.lastSlotConsumer=s.xref);n.next!==null;){if(i!==null&&n.kind===v.I18nExpression&&n.usage===Ua.I18nText&&n.i18nOwner===i.blockXref){let a=n;n=n.next,N.remove(a),r.push(a);continue}let o=!1;if(jc(n)&&n.target!==s.xref?o=!0:(n.kind===v.Statement||n.kind===v.Variable)&&It(n,a=>{!o&&jc(a)&&a.target!==s.xref&&(o=!0)}),o)break;n=n.next}}}}function P2(t){if(!(!t.enableDebugLocations||t.relativeTemplatePath===null))for(let e of t.units){let n=[];for(let r of e.create)if(r.kind===v.ElementStart||r.kind===v.Element){let i=r.startSourceSpan.start;n.push({targetSlot:r.handle,offset:i.offset,line:i.line,column:i.col})}n.length>0&&e.create.push(T2(t.relativeTemplatePath,n))}}function iT(t){let e=new Map;for(let n of t.create)Ha(n)&&(e.set(n.xref,n),n.kind===v.RepeaterCreate&&n.emptyView!==null&&e.set(n.emptyView,n));return e}function L2(t){for(let e of t.units){let n=iT(e);for(let r of e.ops())switch(r.kind){case v.Attribute:O2(e,r,n);break;case v.Property:if(r.bindingKind!==H.LegacyAnimation&&r.bindingKind!==H.Animation){let i;r.i18nMessage!==null&&r.templateKind===null?i=H.I18n:r.isStructuralTemplateAttribute?i=H.Template:i=H.Property,N.insertBefore(bn(r.target,i,null,r.name,null,null,null,r.securityContext),Rs(n,r.target))}break;case v.Control:N.insertBefore(bn(r.target,H.Property,null,r.name,null,null,null,r.securityContext),Rs(n,r.target));break;case v.TwoWayProperty:N.insertBefore(bn(r.target,H.TwoWayProperty,null,r.name,null,null,null,r.securityContext),Rs(n,r.target));break;case v.StyleProp:case v.ClassProp:e.job.compatibility===Rn.TemplateDefinitionBuilder&&r.expression instanceof Yc&&N.insertBefore(bn(r.target,H.Property,null,r.name,null,null,null,Ne.STYLE),Rs(n,r.target));break;case v.Listener:if(!r.isLegacyAnimationListener){let i=bn(r.target,H.Property,null,r.name,null,null,null,Ne.NONE);if(t.kind===B.Host){if(t.compatibility)break;e.create.push(i)}else N.insertBefore(i,Rs(n,r.target))}break;case v.TwoWayListener:if(t.kind!==B.Host){let i=bn(r.target,H.Property,null,r.name,null,null,null,Ne.NONE);N.insertBefore(i,Rs(n,r.target))}break}}}function Rs(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function O2(t,e,n){if(e.expression instanceof Xe)return;let r=e.isTextAttribute||e.expression.isConstant();if(t.job.compatibility===Rn.TemplateDefinitionBuilder&&(r&&=e.isTextAttribute),r){let i=bn(e.target,e.isStructuralTemplateAttribute?H.Template:H.Attribute,e.namespace,e.name,e.expression,e.i18nContext,e.i18nMessage,e.securityContext);if(t.job.kind===B.Host)t.create.push(i);else{let s=Rs(n,e.target);N.insertBefore(i,s)}N.remove(e)}}var ib="aria-";function sT(t){return t.startsWith(ib)&&t.length>ib.length}function F2(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function B2(t){let e=new Map;for(let n of t.units)for(let r of n.create)is(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.ops())if(r.kind===v.Binding)switch(r.bindingKind){case H.Attribute:if(r.name==="ngNonBindable"){N.remove(r);let i=F2(e,r.target);i.nonBindable=!0}else if(r.name.startsWith("animate."))N.replace(r,rb(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,0));else{let[i,s]=vr(r.name);N.replace(r,nb(r.target,i,s,r.expression,r.securityContext,r.isTextAttribute,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan))}break;case H.Animation:N.replace(r,rb(r.name,r.target,r.name==="animate.enter"?"enter":"leave",r.expression,r.securityContext,r.sourceSpan,1));break;case H.Property:case H.LegacyAnimation:t.mode===cn.DomOnly&&sT(r.name)?N.replace(r,nb(r.target,null,r.name,r.expression,r.securityContext,!1,r.isStructuralTemplateAttribute,r.templateKind,r.i18nMessage,r.sourceSpan)):t.kind===B.Host?N.replace(r,A2(r.name,r.expression,r.bindingKind,r.i18nContext,r.securityContext,r.sourceSpan)):r.name==="formField"?N.replace(r,l2(r)):N.replace(r,QP(r.target,r.name,r.expression,r.bindingKind,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case H.TwoWayProperty:if(!(r.expression instanceof xe))throw new Error(`Expected value of two-way property binding "${r.name}" to be an expression`);N.replace(r,XP(r.target,r.name,r.expression,r.securityContext,r.isStructuralTemplateAttribute,r.templateKind,r.i18nContext,r.i18nMessage,r.sourceSpan));break;case H.I18n:case H.ClassName:case H.StyleProperty:throw new Error(`Unhandled binding of kind ${H[r.bindingKind]}`)}}var sb=new Map([[_.ariaProperty,_.ariaProperty],[_.attribute,_.attribute],[_.classProp,_.classProp],[_.element,_.element],[_.elementContainer,_.elementContainer],[_.elementContainerEnd,_.elementContainerEnd],[_.elementContainerStart,_.elementContainerStart],[_.elementEnd,_.elementEnd],[_.elementStart,_.elementStart],[_.domProperty,_.domProperty],[_.i18nExp,_.i18nExp],[_.listener,_.listener],[_.listener,_.listener],[_.property,_.property],[_.styleProp,_.styleProp],[_.syntheticHostListener,_.syntheticHostListener],[_.syntheticHostProperty,_.syntheticHostProperty],[_.templateCreate,_.templateCreate],[_.twoWayProperty,_.twoWayProperty],[_.twoWayListener,_.twoWayListener],[_.declareLet,_.declareLet],[_.conditionalCreate,_.conditionalBranchCreate],[_.conditionalBranchCreate,_.conditionalBranchCreate],[_.domElement,_.domElement],[_.domElementStart,_.domElementStart],[_.domElementEnd,_.domElementEnd],[_.domElementContainer,_.domElementContainer],[_.domElementContainerStart,_.domElementContainerStart],[_.domElementContainerEnd,_.domElementContainerEnd],[_.domListener,_.domListener],[_.domTemplate,_.domTemplate],[_.animationEnter,_.animationEnter],[_.animationLeave,_.animationLeave],[_.animationEnterListener,_.animationEnterListener],[_.animationLeaveListener,_.animationLeaveListener]]),V2=256;function U2(t){for(let e of t.units)ob(e.create),ob(e.update)}function ob(t){let e=null;for(let n of t){if(n.kind!==v.Statement||!(n.statement instanceof Ht)){e=null;continue}if(!(n.statement.expr instanceof mn)||!(n.statement.expr.fn instanceof Ks)){e=null;continue}let r=n.statement.expr.fn.value;if(!sb.has(r)){e=null;continue}if(e!==null&&sb.get(e.instruction)===r&&e.length<V2){let i=e.expression.callFn(n.statement.expr.args,n.statement.expr.sourceSpan,n.statement.expr.pure);e.expression=i,e.op.statement=i.toStmt(),e.length++,N.remove(n)}else e={op:n,instruction:r,expression:n.statement.expr,length:1}}}function $2(t){for(let e of t.units)for(let n of e.update)(n.kind===v.Attribute||n.kind===v.StyleProp||n.kind==v.StyleMap||n.kind===v.ClassMap)&&n.expression instanceof Xe&&n.expression.strings.length===2&&n.expression.strings.every(i=>i==="")&&(n.expression=n.expression.expressions[0])}function H2(t){for(let e of t.units)for(let n of e.ops()){if(n.kind!==v.Conditional)continue;let r,i=n.conditions.findIndex(a=>a.expr===null);if(i>=0){let a=n.conditions.splice(i,1)[0].targetSlot;r=new th(a)}else r=T(-1);let s=n.test==null?null:new Zr(n.test,t.allocateXrefId()),o=null;for(let a=n.conditions.length-1;a>=0;a--){let l=n.conditions[a];if(l.expr!==null){if(s!==null){let c=a===0?s:new rs(s.xref);l.expr=new Ce(R.Identical,c,l.expr)}else l.alias!==null&&(o??=t.allocateXrefId(),l.expr=new Zr(l.expr,o),n.contextValue=new rs(o));r=new Wr(l.expr,new th(l.targetSlot),r)}}n.processed=r,n.conditions=[]}}var q2=new Map([["&&",R.And],[">",R.Bigger],[">=",R.BiggerEquals],["|",R.BitwiseOr],["&",R.BitwiseAnd],["/",R.Divide],["=",R.Assign],["==",R.Equals],["===",R.Identical],["<",R.Lower],["<=",R.LowerEquals],["-",R.Minus],["%",R.Modulo],["**",R.Exponentiation],["*",R.Multiply],["!=",R.NotEquals],["!==",R.NotIdentical],["??",R.NullishCoalesce],["||",R.Or],["+",R.Plus],["in",R.In],["+=",R.AdditionAssignment],["-=",R.SubtractionAssignment],["*=",R.MultiplicationAssignment],["/=",R.DivisionAssignment],["%=",R.RemainderAssignment],["**=",R.ExponentiationAssignment],["&&=",R.AndAssignment],["||=",R.OrAssignment],["??=",R.NullishCoalesceAssignment]]);function oT(t){let e=new Map([["svg",$t.SVG],["math",$t.Math]]);return t===null?$t.HTML:e.get(t)??$t.HTML}function G2(t){let e=new Map([["svg",$t.SVG],["math",$t.Math]]);for(let[n,r]of e.entries())if(r===t)return n;return null}function j2(t,e){return e===$t.HTML?t:`:${G2(e)}:${t}`}function Oa(t){return Array.isArray(t)?Ae(t.map(Oa)):T(t)}function W2(t){let e=new Map;for(let n of t.units)for(let r of n.create)if(r.kind===v.ExtractedAttribute){let i=e.get(r.target)||new dy(t.compatibility);e.set(r.target,i),i.add(r.bindingKind,r.name,r.expression,r.namespace,r.trustedValueFn),N.remove(r)}if(t instanceof Qc)for(let n of t.units)for(let r of n.create)if(r.kind==v.Projection){let i=e.get(r.xref);if(i!==void 0){let s=fy(i);s.entries.length>0&&(r.attributes=s)}}else is(r)&&(r.attributes=ab(t,e,r.xref),r.kind===v.RepeaterCreate&&r.emptyView!==null&&(r.emptyAttributes=ab(t,e,r.emptyView)));else if(t instanceof oh)for(let[n,r]of e.entries()){if(n!==t.root.xref)throw new Error("An attribute would be const collected into the host binding's template function, but is not associated with the root xref.");let i=fy(r);i.entries.length>0&&(t.root.attributes=i)}}function ab(t,e,n){let r=e.get(n);if(r!==void 0){let i=fy(r);if(i.entries.length>0)return t.addConst(i)}return null}var ia=Object.freeze([]),dy=class{compatibility;known=new Map;byKind=new Map;propertyBindings=null;projectAs=null;get attributes(){return this.byKind.get(H.Attribute)??ia}get classes(){return this.byKind.get(H.ClassName)??ia}get styles(){return this.byKind.get(H.StyleProperty)??ia}get bindings(){return this.propertyBindings??ia}get template(){return this.byKind.get(H.Template)??ia}get i18n(){return this.byKind.get(H.I18n)??ia}constructor(e){this.compatibility=e}isKnown(e,n){let r=this.known.get(e)??new Set;return this.known.set(e,r),r.has(n)?!0:(r.add(n),!1)}add(e,n,r,i,s){if(!(this.compatibility===Rn.TemplateDefinitionBuilder&&(e===H.Attribute||e===H.ClassName||e===H.StyleProperty))&&this.isKnown(e,n))return;if(n==="ngProjectAs"){if(r===null||!(r instanceof Lt)||r.value==null||typeof r.value?.toString()!="string")throw Error("ngProjectAs must have a string literal value");this.projectAs=r.value.toString()}let a=this.arrayFor(e);if(a.push(...z2(i,n)),e===H.Attribute||e===H.StyleProperty){if(r===null)throw Error("Attribute, i18n attribute, & style element attributes must have a value");if(s!==null){if(!Jx(r))throw Error("AssertionError: extracted attribute value should be string literal");a.push(uR(s,new fc([new Cf(r.value)],[]),void 0,r.sourceSpan))}else a.push(r)}}arrayFor(e){return e===H.Property||e===H.TwoWayProperty?(this.propertyBindings??=[],this.propertyBindings):(this.byKind.has(e)||this.byKind.set(e,[]),this.byKind.get(e))}};function z2(t,e){let n=T(e);return t?[T(0),T(t),n]:[n]}function fy({attributes:t,bindings:e,classes:n,i18n:r,projectAs:i,styles:s,template:o}){let a=[...t];if(i!==null){let l=n0(i)[0];a.push(T(5),Oa(l))}return n.length>0&&a.push(T(1),...n),s.length>0&&a.push(T(2),...s),e.length>0&&a.push(T(3),...e),o.length>0&&a.push(T(4),...o),r.length>0&&a.push(T(6),...r),Ae(a)}function J2(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function Y2(t){let e=new Map;for(let n of t.units)for(let r of n.create)is(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.ops())if(r.kind===v.AnimationBinding){let i=K2(r);t.kind===B.Host?n.create.push(i):N.insertAfter(i,J2(e,r.target)),N.remove(r)}}function K2(t){if(t.animationBindingKind===0)return m2(t.name,t.target,t.name==="animate.enter"?"enter":"leave",t.expression,t.securityContext,t.sourceSpan);{let e=t.expression;return g2(t.name,t.target,t.name==="animate.enter"?"enter":"leave",[Qn(new Rt(e,e.sourceSpan))],t.securityContext,t.sourceSpan)}}function Q2(t){let e=new Map;for(let n of t.units){for(let r of n.create)r.kind===v.I18nAttributes&&e.set(r.target,r);for(let r of n.update)switch(r.kind){case v.Property:case v.Attribute:if(r.i18nContext===null||!(r.expression instanceof Xe))continue;let i=e.get(r.target);if(i===void 0)throw new Error("AssertionError: An i18n attribute binding instruction requires the owning element to have an I18nAttributes create instruction");if(i.target!==r.target)throw new Error("AssertionError: Expected i18nAttributes target element to match binding target element");let s=[];for(let o=0;o<r.expression.expressions.length;o++){let a=r.expression.expressions[o];if(r.expression.i18nPlaceholders.length!==r.expression.expressions.length)throw new Error(`AssertionError: An i18n attribute binding instruction requires the same number of expressions and placeholders, but found ${r.expression.i18nPlaceholders.length} placeholders and ${r.expression.expressions.length} expressions`);s.push(zx(r.i18nContext,i.target,i.xref,i.handle,a,null,r.expression.i18nPlaceholders[o],Gc.Creation,Ua.I18nAttribute,r.name,r.sourceSpan))}N.replaceWithMany(r,s);break}}}function X2(t){let e=new Map;for(let i of t.units)for(let s of i.ops())switch(s.kind){case v.Binding:case v.Property:case v.Attribute:case v.ExtractedAttribute:if(s.i18nMessage===null)continue;if(!e.has(s.i18nMessage)){let o=pv($s.Attr,t.allocateXrefId(),null,s.i18nMessage,null);i.create.push(o),e.set(s.i18nMessage,o.xref)}s.i18nContext=e.get(s.i18nMessage);break}let n=new Map;for(let i of t.units)for(let s of i.create)switch(s.kind){case v.I18nStart:if(s.xref===s.root){let o=pv($s.RootI18n,t.allocateXrefId(),s.xref,s.message,null);i.create.push(o),s.context=o.xref,n.set(s.xref,o)}break}for(let i of t.units)for(let s of i.create)if(s.kind===v.I18nStart&&s.xref!==s.root){let o=n.get(s.root);if(o===void 0)throw Error("AssertionError: Root i18n block i18n context should have been created.");s.context=o.xref,n.set(s.xref,o)}let r=null;for(let i of t.units)for(let s of i.create)switch(s.kind){case v.I18nStart:r=s;break;case v.I18nEnd:r=null;break;case v.IcuStart:if(r===null)throw Error("AssertionError: Unexpected ICU outside of an i18n block.");if(s.message.id!==r.message.id){let o=pv($s.Icu,t.allocateXrefId(),r.root,s.message,null);i.create.push(o),s.context=o.xref}else s.context=r.context,n.get(r.xref).contextKind=$s.Icu;break}}function Z2(t){let e=new Map;for(let n of t.units)for(let r of n.update.reversed())if(r.kind===v.Binding&&r.isTextAttribute){let i=e.get(r.target)||new Set;i.has(r.name)&&t.compatibility===Rn.TemplateDefinitionBuilder&&(r.name==="style"||r.name==="class")&&N.remove(r),i.add(r.name),e.set(r.target,i)}}function eL(t){for(let e of t.units)for(let n of e.create)n.kind===v.Defer&&(n.placeholderMinimumTime!==null&&(n.placeholderConfig=new Kc(Oa([n.placeholderMinimumTime]))),(n.loadingMinimumTime!==null||n.loadingAfterTime!==null)&&(n.loadingConfig=new Kc(Oa([n.loadingMinimumTime,n.loadingAfterTime]))))}function tL(t){let e=new Map;function n(i){if(e.has(i.xref))return e.get(i.xref);let s=new nL;for(let o of i.create)if(!(!is(o)||o.localRefs===null)){if(!Array.isArray(o.localRefs))throw new Error("LocalRefs were already processed, but were needed to resolve defer targets.");for(let a of o.localRefs)a.target===""&&s.targets.set(a.name,{xref:o.xref,slot:o.handle})}return e.set(i.xref,s),s}function r(i,s,o){switch(s.trigger.kind){case ke.Idle:case ke.Never:case ke.Immediate:case ke.Timer:return;case ke.Hover:case ke.Interaction:case ke.Viewport:if(s.trigger.targetName===null){if(o===null)throw new Error("defer on trigger with no target name must have a placeholder block");let c=t.views.get(o);if(c==null)throw new Error("AssertionError: could not find placeholder view for defer on trigger");for(let u of c.create)if(Ha(u)&&(is(u)||u.kind===v.Projection)){s.trigger.targetXref=u.xref,s.trigger.targetView=o,s.trigger.targetSlotViewSteps=-1,s.trigger.targetSlot=u.handle;return}return}let a=o!==null?t.views.get(o):i,l=o!==null?-1:0;for(;a!==null;){let c=n(a);if(c.targets.has(s.trigger.targetName)){let{xref:u,slot:h}=c.targets.get(s.trigger.targetName);s.trigger.targetXref=u,s.trigger.targetView=a.xref,s.trigger.targetSlotViewSteps=l,s.trigger.targetSlot=h;return}a=a.parent!==null?t.views.get(a.parent):null,l++}break;default:throw new Error(`Trigger kind ${s.trigger.kind} not handled`)}}for(let i of t.units){let s=new Map;for(let o of i.create)switch(o.kind){case v.Defer:s.set(o.xref,o);break;case v.DeferOn:let a=s.get(o.defer);r(i,o,o.modifier==="hydrate"?a.mainView:a.placeholderView);break}}}var nL=class{targets=new Map},rL=new Map([[v.ElementEnd,[v.ElementStart,v.Element]],[v.ContainerEnd,[v.ContainerStart,v.Container]],[v.I18nEnd,[v.I18nStart,v.I18n]]]),iL=new Set([v.Pipe]);function sL(t){for(let e of t.units)for(let n of e.create){let r=rL.get(n.kind);if(r===void 0)continue;let[i,s]=r,o=n.prev;for(;o!==null&&iL.has(o.kind);)o=o.prev;o!==null&&o.kind===i&&(o.kind=s,N.remove(n))}}function oL(t){for(let e of t.units)for(let n of e.ops())ot(n,r=>fL(r,{job:t}),be.None),ot(n,hL,be.None)}function Sn(t){return t instanceof Xs?Sn(t.expr):t instanceof Ce?Sn(t.lhs)||Sn(t.rhs):t instanceof Wr?t.falseCase&&Sn(t.falseCase)?!0:Sn(t.condition)||Sn(t.trueCase):t instanceof hc?Sn(t.condition):t instanceof Zr?Sn(t.expr):t instanceof Nn?Sn(t.receiver):t instanceof yi?Sn(t.receiver)||Sn(t.index):t instanceof mr?Sn(t.expr):t instanceof mn||t instanceof zr||t instanceof gr||t instanceof co||t instanceof lo}function aL(t){let e=new Set;return U(t,n=>(n instanceof Zr&&e.add(n.xref),n),be.None),e}function lL(t,e,n){return U(t,r=>{if(r instanceof Zr&&e.has(r.xref)){let i=new rs(r.xref);return n.job.compatibility===Rn.TemplateDefinitionBuilder?new Zr(i,i.xref):i}return r},be.None),t}function sa(t,e,n){let r;if(Sn(t)){let i=n.job.allocateXrefId();r=[new Zr(t,i),new rs(i)]}else r=[t,t.clone()],lL(r[1],aL(r[0]),n);return new La(r[0],e(r[1]))}function cL(t){return t instanceof Ra||t instanceof Pa||t instanceof co}function uL(t){return t instanceof Nn||t instanceof yi||t instanceof mn}function aT(t){return cL(t)||uL(t)}function dL(t){if(aT(t)&&t.receiver instanceof La){let e=t.receiver;for(;e.expr instanceof La;)e=e.expr;return e}return null}function fL(t,e){if(!aT(t))return t;let n=dL(t);if(n){if(t instanceof mn)return n.expr=n.expr.callFn(t.args),t.receiver;if(t instanceof Nn)return n.expr=n.expr.prop(t.name),t.receiver;if(t instanceof yi)return n.expr=n.expr.key(t.index),t.receiver;if(t instanceof co)return n.expr=sa(n.expr,r=>r.callFn(t.args),e),t.receiver;if(t instanceof Ra)return n.expr=sa(n.expr,r=>r.prop(t.name),e),t.receiver;if(t instanceof Pa)return n.expr=sa(n.expr,r=>r.key(t.index),e),t.receiver}else{if(t instanceof co)return sa(t.receiver,r=>r.callFn(t.args),e);if(t instanceof Ra)return sa(t.receiver,r=>r.prop(t.name),e);if(t instanceof Pa)return sa(t.receiver,r=>r.key(t.index),e)}return t}function hL(t){return t instanceof La?new mr(new Wr(new Ce(R.Equals,t.guard,Sa),Sa,t.expr)):t}var lb="\uFFFD",pL="#",mL="*",gL="/",vL=":",yL="[",wL="]",EL="|";function _L(t){let e=new Map,n=new Map,r=new Map;for(let s of t.units)for(let o of s.create)switch(o.kind){case v.I18nContext:let a=CL(t,o);s.create.push(a),e.set(o.xref,a),r.set(o.xref,o);break;case v.I18nStart:n.set(o.xref,o);break}let i=null;for(let s of t.units)for(let o of s.create)switch(o.kind){case v.IcuStart:i=o,N.remove(o);let a=r.get(o.context);if(a.contextKind!==$s.Icu)continue;let l=n.get(a.i18nBlock);if(l.context===a.xref)continue;let c=n.get(l.root),u=e.get(c.context);if(u===void 0)throw Error("AssertionError: ICU sub-message should belong to a root message.");let h=e.get(a.xref);h.messagePlaceholder=o.messagePlaceholder,u.subMessages.push(h.xref);break;case v.IcuEnd:i=null,N.remove(o);break;case v.IcuPlaceholder:if(i===null||i.context==null)throw Error("AssertionError: Unexpected ICU placeholder outside of i18n context");e.get(i.context).postprocessingParams.set(o.name,T(SL(o))),N.remove(o);break}}function CL(t,e,n){let r=cb(e.params),i=cb(e.postprocessingParams),s=[...e.params.values()].some(o=>o.length>1);return C2(t.allocateXrefId(),e.xref,e.i18nBlock,e.message,null,r,i,s)}function SL(t){if(t.strings.length!==t.expressionPlaceholders.length+1)throw Error(`AssertionError: Invalid ICU placeholder with ${t.strings.length} strings and ${t.expressionPlaceholders.length} expressions`);let e=t.expressionPlaceholders.map(pa);return t.strings.flatMap((n,r)=>[n,e[r]||""]).join("")}function cb(t){let e=new Map;for(let[n,r]of t){let i=bL(r);i!==null&&e.set(n,T(i))}return e}function bL(t){if(t.length===0)return null;let e=t.map(n=>pa(n));return e.length===1?e[0]:`${yL}${e.join(EL)}${wL}`}function pa(t){if(t.flags&Le.ElementTag&&t.flags&Le.TemplateTag){if(typeof t.value!="object")throw Error("AssertionError: Expected i18n param value to have an element and template slot");let i=pa(te(A({},t),{value:t.value.element,flags:t.flags&~Le.TemplateTag})),s=pa(te(A({},t),{value:t.value.template,flags:t.flags&~Le.ElementTag}));return t.flags&Le.OpenTag&&t.flags&Le.CloseTag?`${s}${i}${s}`:t.flags&Le.CloseTag?`${i}${s}`:`${s}${i}`}if(t.flags&Le.OpenTag&&t.flags&Le.CloseTag)return`${pa(te(A({},t),{flags:t.flags&~Le.CloseTag}))}${pa(te(A({},t),{flags:t.flags&~Le.OpenTag}))}`;if(t.flags===Le.None)return`${t.value}`;let e="",n="";t.flags&Le.ElementTag?e=pL:t.flags&Le.TemplateTag&&(e=mL),e!==""&&(n=t.flags&Le.CloseTag?gL:"");let r=t.subTemplateIndex===null?"":`${vL}${t.subTemplateIndex}`;return`${lb}${n}${e}${t.value}${r}${lb}`}function xL(t){for(let e of t.units){let n=new Map;for(let i of e.create){if(Ha(i)){if(i.handle.slot===null)throw new Error("AssertionError: expected slots to have been allocated before generating advance() calls")}else continue;n.set(i.xref,i.handle.slot)}let r=0;for(let i of e.update){let s=null;if(jc(i)?s=i:It(i,a=>{s===null&&jc(a)&&(s=a)}),s===null)continue;if(!n.has(s.target))throw new Error(`AssertionError: reference to unknown slot for target ${s.target}`);let o=n.get(s.target);if(r!==o){let a=o-r;if(a<0)throw new Error("AssertionError: slot counter should never need to move backwards");N.insertBefore(r2(a,s.sourceSpan),i),r=o}}}}function TL(t){for(let e of t.units)for(let n of e.update){if(n.kind!==v.StoreLet)continue;let r={kind:Tt.Identifier,name:null,identifier:n.declaredName,local:!0};N.replace(n,Gi(t.allocateXrefId(),r,new Wc(n.target,n.value,n.sourceSpan),zn.None))}}function IL(t){let e=t.compatibility===Rn.TemplateDefinitionBuilder,n=[],r=0;for(let i of t.units)for(let s of i.create)s.kind===v.Projection&&(n.push(s.selector),s.projectionSlotIndex=r++);if(n.length>0){let i=null;if(n.length>1||n[0]!=="*"){let s=n.map(o=>o==="*"?o:n0(o));i=t.pool.getConstLiteral(Oa(s),e)}t.contentSelectors=t.pool.getConstLiteral(Oa(n),e),t.root.create.prepend([y2(i)])}}function AL(t){ec(t.root,null)}function ec(t,e){let n=DL(t,e);for(let r of t.create)switch(r.kind){case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:ec(t.job.views.get(r.xref),n);break;case v.Projection:r.fallbackView!==null&&ec(t.job.views.get(r.fallbackView),n);break;case v.RepeaterCreate:ec(t.job.views.get(r.xref),n),r.emptyView&&ec(t.job.views.get(r.emptyView),n),r.trackByOps!==null&&r.trackByOps.prepend(hf(t,n,!1));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:r.handlerOps.prepend(hf(t,n,!0));break}t.update.prepend(hf(t,n,!1))}function DL(t,e){let n={view:t.xref,viewContextVariable:{kind:Tt.Context,name:null,view:t.xref},contextVariables:new Map,aliases:t.aliases,references:[],letDeclarations:[],parent:e};for(let r of t.contextVariables.keys())n.contextVariables.set(r,{kind:Tt.Identifier,name:null,identifier:r,local:!1});for(let r of t.create)switch(r.kind){case v.ElementStart:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!Array.isArray(r.localRefs))throw new Error("AssertionError: expected localRefs to be an array");for(let i=0;i<r.localRefs.length;i++)n.references.push({name:r.localRefs[i].name,targetId:r.xref,targetSlot:r.handle,offset:i,variable:{kind:Tt.Identifier,name:null,identifier:r.localRefs[i].name,local:!1}});break;case v.DeclareLet:n.letDeclarations.push({targetId:r.xref,targetSlot:r.handle,variable:{kind:Tt.Identifier,name:null,identifier:r.declaredName,local:!1}});break}return n}function hf(t,e,n){let r=[];e.view!==t.xref&&r.push(Gi(t.job.allocateXrefId(),e.viewContextVariable,new Xf,zn.None));let i=t.job.views.get(e.view);for(let[s,o]of i.contextVariables){let a=new ts(e.view),l=o===rT?a:new Nn(a,o);r.push(Gi(t.job.allocateXrefId(),e.contextVariables.get(s),l,zn.None))}for(let s of i.aliases)r.push(Gi(t.job.allocateXrefId(),s,s.expression.clone(),zn.AlwaysInline));for(let s of e.references)r.push(Gi(t.job.allocateXrefId(),s.variable,new Qf(s.targetId,s.targetSlot,s.offset),zn.None));if(e.view!==t.xref||n)for(let s of e.letDeclarations)r.push(Gi(t.job.allocateXrefId(),s.variable,new zc(s.targetId,s.targetSlot),zn.None));return e.parent!==null&&r.push(...hf(t,e.parent,!1)),r}function kL(t){for(let e of t.units)for(let n of e.ops())ot(n,r=>r instanceof Kc?T(t.addConst(r.expr)):r,be.None)}var ub="style.",db="class.",NL="style!",fb="class!",hb="!important";function ML(t){for(let e of t.root.update)if(e.kind===v.Binding&&e.bindingKind===H.Property)if(e.name.endsWith(hb)&&(e.name=e.name.substring(0,e.name.length-hb.length)),e.name.startsWith(ub)){e.bindingKind=H.StyleProperty,e.name=e.name.substring(ub.length),RL(e.name)||(e.name=PL(e.name));let{property:n,suffix:r}=mv(e.name);e.name=n,e.unit=r}else e.name.startsWith(NL)?(e.bindingKind=H.StyleProperty,e.name="style"):e.name.startsWith(db)?(e.bindingKind=H.ClassName,e.name=mv(e.name.substring(db.length)).property):e.name.startsWith(fb)&&(e.bindingKind=H.ClassName,e.name=mv(e.name.substring(fb.length)).property)}function RL(t){return t.startsWith("--")}function PL(t){return t.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function mv(t){let e=t.indexOf("!important");e!==-1&&(t=e>0?t.substring(0,e):"");let n=null,r=t,i=t.lastIndexOf(".");return i>0&&(n=t.slice(i+1),r=t.substring(0,i)),{property:r,suffix:n}}function hy(t,e=!1){return Kn(Object.keys(t).map(n=>({key:n,quoted:e,value:t[n]})))}var py=class{visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){let n=Object.keys(e.cases).map(i=>`${i} {${e.cases[i].visit(this)}}`);return`{${e.expressionPlaceholder}, ${e.type}, ${n.join(" ")}}`}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,n){return this.formatPh(e.name)}formatPh(e){return`{${lu(e,!1)}}`}},LL=new py;function lT(t){return t.visit(LL)}var wi=class{sourceSpan;i18n;constructor(e,n){this.sourceSpan=e,this.i18n=n}},uo=class extends wi{value;tokens;constructor(e,n,r,i){super(n,i),this.value=e,this.tokens=r}visit(e,n){return e.visitText(this,n)}},Ws=class extends wi{switchValue;type;cases;switchValueSourceSpan;constructor(e,n,r,i,s,o){super(i,o),this.switchValue=e,this.type=n,this.cases=r,this.switchValueSourceSpan=s}visit(e,n){return e.visitExpansion(this,n)}},ah=class{value;expression;sourceSpan;valueSourceSpan;expSourceSpan;constructor(e,n,r,i,s){this.value=e,this.expression=n,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=s}visit(e,n){return e.visitExpansionCase(this,n)}},my=class extends wi{name;value;keySpan;valueSpan;valueTokens;constructor(e,n,r,i,s,o,a){super(r,a),this.name=e,this.value=n,this.keySpan=i,this.valueSpan=s,this.valueTokens=o}visit(e,n){return e.visitAttribute(this,n)}},Gn=class extends wi{name;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;isVoid;constructor(e,n,r,i,s,o,a,l=null,c,u){super(o,u),this.name=e,this.attrs=n,this.directives=r,this.children=i,this.isSelfClosing=s,this.startSourceSpan=a,this.endSourceSpan=l,this.isVoid=c}visit(e,n){return e.visitElement(this,n)}},Xc=class{value;sourceSpan;constructor(e,n){this.value=e,this.sourceSpan=n}visit(e,n){return e.visitComment(this,n)}},Wn=class extends wi{name;parameters;children;nameSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a=null,l){super(i,l),this.name=e,this.parameters=n,this.children=r,this.nameSpan=s,this.startSourceSpan=o,this.endSourceSpan=a}visit(e,n){return e.visitBlock(this,n)}},un=class extends wi{componentName;tagName;fullName;attrs;directives;children;isSelfClosing;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s,o,a,l,c,u=null,h){super(l,h),this.componentName=e,this.tagName=n,this.fullName=r,this.attrs=i,this.directives=s,this.children=o,this.isSelfClosing=a,this.startSourceSpan=c,this.endSourceSpan=u}visit(e,n){return e.visitComponent(this,n)}},gy=class{name;attrs;sourceSpan;startSourceSpan;endSourceSpan;constructor(e,n,r,i,s=null){this.name=e,this.attrs=n,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=s}visit(e,n){return e.visitDirective(this,n)}},lh=class{expression;sourceSpan;constructor(e,n){this.expression=e,this.sourceSpan=n}visit(e,n){return e.visitBlockParameter(this,n)}},ch=class{name;value;sourceSpan;nameSpan;valueSpan;constructor(e,n,r,i,s){this.name=e,this.value=n,this.sourceSpan=r,this.nameSpan=i,this.valueSpan=s}visit(e,n){return e.visitLetDeclaration(this,n)}};function He(t,e,n=null){let r=[],i=t.visit?s=>t.visit(s,n)||s.visit(t,n):s=>s.visit(t,n);return e.forEach(s=>{let o=i(s);o&&r.push(o)}),r}var Zc={AElig:"\xC6",AMP:"&",amp:"&",Aacute:"\xC1",Abreve:"\u0102",Acirc:"\xC2",Acy:"\u0410",Afr:"\u{1D504}",Agrave:"\xC0",Alpha:"\u0391",Amacr:"\u0100",And:"\u2A53",Aogon:"\u0104",Aopf:"\u{1D538}",ApplyFunction:"\u2061",af:"\u2061",Aring:"\xC5",angst:"\xC5",Ascr:"\u{1D49C}",Assign:"\u2254",colone:"\u2254",coloneq:"\u2254",Atilde:"\xC3",Auml:"\xC4",Backslash:"\u2216",setminus:"\u2216",setmn:"\u2216",smallsetminus:"\u2216",ssetmn:"\u2216",Barv:"\u2AE7",Barwed:"\u2306",doublebarwedge:"\u2306",Bcy:"\u0411",Because:"\u2235",becaus:"\u2235",because:"\u2235",Bernoullis:"\u212C",Bscr:"\u212C",bernou:"\u212C",Beta:"\u0392",Bfr:"\u{1D505}",Bopf:"\u{1D539}",Breve:"\u02D8",breve:"\u02D8",Bumpeq:"\u224E",HumpDownHump:"\u224E",bump:"\u224E",CHcy:"\u0427",COPY:"\xA9",copy:"\xA9",Cacute:"\u0106",Cap:"\u22D2",CapitalDifferentialD:"\u2145",DD:"\u2145",Cayleys:"\u212D",Cfr:"\u212D",Ccaron:"\u010C",Ccedil:"\xC7",Ccirc:"\u0108",Cconint:"\u2230",Cdot:"\u010A",Cedilla:"\xB8",cedil:"\xB8",CenterDot:"\xB7",centerdot:"\xB7",middot:"\xB7",Chi:"\u03A7",CircleDot:"\u2299",odot:"\u2299",CircleMinus:"\u2296",ominus:"\u2296",CirclePlus:"\u2295",oplus:"\u2295",CircleTimes:"\u2297",otimes:"\u2297",ClockwiseContourIntegral:"\u2232",cwconint:"\u2232",CloseCurlyDoubleQuote:"\u201D",rdquo:"\u201D",rdquor:"\u201D",CloseCurlyQuote:"\u2019",rsquo:"\u2019",rsquor:"\u2019",Colon:"\u2237",Proportion:"\u2237",Colone:"\u2A74",Congruent:"\u2261",equiv:"\u2261",Conint:"\u222F",DoubleContourIntegral:"\u222F",ContourIntegral:"\u222E",conint:"\u222E",oint:"\u222E",Copf:"\u2102",complexes:"\u2102",Coproduct:"\u2210",coprod:"\u2210",CounterClockwiseContourIntegral:"\u2233",awconint:"\u2233",Cross:"\u2A2F",Cscr:"\u{1D49E}",Cup:"\u22D3",CupCap:"\u224D",asympeq:"\u224D",DDotrahd:"\u2911",DJcy:"\u0402",DScy:"\u0405",DZcy:"\u040F",Dagger:"\u2021",ddagger:"\u2021",Darr:"\u21A1",Dashv:"\u2AE4",DoubleLeftTee:"\u2AE4",Dcaron:"\u010E",Dcy:"\u0414",Del:"\u2207",nabla:"\u2207",Delta:"\u0394",Dfr:"\u{1D507}",DiacriticalAcute:"\xB4",acute:"\xB4",DiacriticalDot:"\u02D9",dot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",dblac:"\u02DD",DiacriticalGrave:"`",grave:"`",DiacriticalTilde:"\u02DC",tilde:"\u02DC",Diamond:"\u22C4",diam:"\u22C4",diamond:"\u22C4",DifferentialD:"\u2146",dd:"\u2146",Dopf:"\u{1D53B}",Dot:"\xA8",DoubleDot:"\xA8",die:"\xA8",uml:"\xA8",DotDot:"\u20DC",DotEqual:"\u2250",doteq:"\u2250",esdot:"\u2250",DoubleDownArrow:"\u21D3",Downarrow:"\u21D3",dArr:"\u21D3",DoubleLeftArrow:"\u21D0",Leftarrow:"\u21D0",lArr:"\u21D0",DoubleLeftRightArrow:"\u21D4",Leftrightarrow:"\u21D4",hArr:"\u21D4",iff:"\u21D4",DoubleLongLeftArrow:"\u27F8",Longleftarrow:"\u27F8",xlArr:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",Longleftrightarrow:"\u27FA",xhArr:"\u27FA",DoubleLongRightArrow:"\u27F9",Longrightarrow:"\u27F9",xrArr:"\u27F9",DoubleRightArrow:"\u21D2",Implies:"\u21D2",Rightarrow:"\u21D2",rArr:"\u21D2",DoubleRightTee:"\u22A8",vDash:"\u22A8",DoubleUpArrow:"\u21D1",Uparrow:"\u21D1",uArr:"\u21D1",DoubleUpDownArrow:"\u21D5",Updownarrow:"\u21D5",vArr:"\u21D5",DoubleVerticalBar:"\u2225",par:"\u2225",parallel:"\u2225",shortparallel:"\u2225",spar:"\u2225",DownArrow:"\u2193",ShortDownArrow:"\u2193",darr:"\u2193",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",duarr:"\u21F5",DownBreve:"\u0311",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",leftharpoondown:"\u21BD",lhard:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",rhard:"\u21C1",rightharpoondown:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",top:"\u22A4",DownTeeArrow:"\u21A7",mapstodown:"\u21A7",Dscr:"\u{1D49F}",Dstrok:"\u0110",ENG:"\u014A",ETH:"\xD0",Eacute:"\xC9",Ecaron:"\u011A",Ecirc:"\xCA",Ecy:"\u042D",Edot:"\u0116",Efr:"\u{1D508}",Egrave:"\xC8",Element:"\u2208",in:"\u2208",isin:"\u2208",isinv:"\u2208",Emacr:"\u0112",EmptySmallSquare:"\u25FB",EmptyVerySmallSquare:"\u25AB",Eogon:"\u0118",Eopf:"\u{1D53C}",Epsilon:"\u0395",Equal:"\u2A75",EqualTilde:"\u2242",eqsim:"\u2242",esim:"\u2242",Equilibrium:"\u21CC",rightleftharpoons:"\u21CC",rlhar:"\u21CC",Escr:"\u2130",expectation:"\u2130",Esim:"\u2A73",Eta:"\u0397",Euml:"\xCB",Exists:"\u2203",exist:"\u2203",ExponentialE:"\u2147",ee:"\u2147",exponentiale:"\u2147",Fcy:"\u0424",Ffr:"\u{1D509}",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",blacksquare:"\u25AA",squarf:"\u25AA",squf:"\u25AA",Fopf:"\u{1D53D}",ForAll:"\u2200",forall:"\u2200",Fouriertrf:"\u2131",Fscr:"\u2131",GJcy:"\u0403",GT:">",gt:">",Gamma:"\u0393",Gammad:"\u03DC",Gbreve:"\u011E",Gcedil:"\u0122",Gcirc:"\u011C",Gcy:"\u0413",Gdot:"\u0120",Gfr:"\u{1D50A}",Gg:"\u22D9",ggg:"\u22D9",Gopf:"\u{1D53E}",GreaterEqual:"\u2265",ge:"\u2265",geq:"\u2265",GreaterEqualLess:"\u22DB",gel:"\u22DB",gtreqless:"\u22DB",GreaterFullEqual:"\u2267",gE:"\u2267",geqq:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",gl:"\u2277",gtrless:"\u2277",GreaterSlantEqual:"\u2A7E",geqslant:"\u2A7E",ges:"\u2A7E",GreaterTilde:"\u2273",gsim:"\u2273",gtrsim:"\u2273",Gscr:"\u{1D4A2}",Gt:"\u226B",NestedGreaterGreater:"\u226B",gg:"\u226B",HARDcy:"\u042A",Hacek:"\u02C7",caron:"\u02C7",Hat:"^",Hcirc:"\u0124",Hfr:"\u210C",Poincareplane:"\u210C",HilbertSpace:"\u210B",Hscr:"\u210B",hamilt:"\u210B",Hopf:"\u210D",quaternions:"\u210D",HorizontalLine:"\u2500",boxh:"\u2500",Hstrok:"\u0126",HumpEqual:"\u224F",bumpe:"\u224F",bumpeq:"\u224F",IEcy:"\u0415",IJlig:"\u0132",IOcy:"\u0401",Iacute:"\xCD",Icirc:"\xCE",Icy:"\u0418",Idot:"\u0130",Ifr:"\u2111",Im:"\u2111",image:"\u2111",imagpart:"\u2111",Igrave:"\xCC",Imacr:"\u012A",ImaginaryI:"\u2148",ii:"\u2148",Int:"\u222C",Integral:"\u222B",int:"\u222B",Intersection:"\u22C2",bigcap:"\u22C2",xcap:"\u22C2",InvisibleComma:"\u2063",ic:"\u2063",InvisibleTimes:"\u2062",it:"\u2062",Iogon:"\u012E",Iopf:"\u{1D540}",Iota:"\u0399",Iscr:"\u2110",imagline:"\u2110",Itilde:"\u0128",Iukcy:"\u0406",Iuml:"\xCF",Jcirc:"\u0134",Jcy:"\u0419",Jfr:"\u{1D50D}",Jopf:"\u{1D541}",Jscr:"\u{1D4A5}",Jsercy:"\u0408",Jukcy:"\u0404",KHcy:"\u0425",KJcy:"\u040C",Kappa:"\u039A",Kcedil:"\u0136",Kcy:"\u041A",Kfr:"\u{1D50E}",Kopf:"\u{1D542}",Kscr:"\u{1D4A6}",LJcy:"\u0409",LT:"<",lt:"<",Lacute:"\u0139",Lambda:"\u039B",Lang:"\u27EA",Laplacetrf:"\u2112",Lscr:"\u2112",lagran:"\u2112",Larr:"\u219E",twoheadleftarrow:"\u219E",Lcaron:"\u013D",Lcedil:"\u013B",Lcy:"\u041B",LeftAngleBracket:"\u27E8",lang:"\u27E8",langle:"\u27E8",LeftArrow:"\u2190",ShortLeftArrow:"\u2190",larr:"\u2190",leftarrow:"\u2190",slarr:"\u2190",LeftArrowBar:"\u21E4",larrb:"\u21E4",LeftArrowRightArrow:"\u21C6",leftrightarrows:"\u21C6",lrarr:"\u21C6",LeftCeiling:"\u2308",lceil:"\u2308",LeftDoubleBracket:"\u27E6",lobrk:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",dharl:"\u21C3",downharpoonleft:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",lfloor:"\u230A",LeftRightArrow:"\u2194",harr:"\u2194",leftrightarrow:"\u2194",LeftRightVector:"\u294E",LeftTee:"\u22A3",dashv:"\u22A3",LeftTeeArrow:"\u21A4",mapstoleft:"\u21A4",LeftTeeVector:"\u295A",LeftTriangle:"\u22B2",vartriangleleft:"\u22B2",vltri:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",ltrie:"\u22B4",trianglelefteq:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",uharl:"\u21BF",upharpoonleft:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",leftharpoonup:"\u21BC",lharu:"\u21BC",LeftVectorBar:"\u2952",LessEqualGreater:"\u22DA",leg:"\u22DA",lesseqgtr:"\u22DA",LessFullEqual:"\u2266",lE:"\u2266",leqq:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",lg:"\u2276",LessLess:"\u2AA1",LessSlantEqual:"\u2A7D",leqslant:"\u2A7D",les:"\u2A7D",LessTilde:"\u2272",lesssim:"\u2272",lsim:"\u2272",Lfr:"\u{1D50F}",Ll:"\u22D8",Lleftarrow:"\u21DA",lAarr:"\u21DA",Lmidot:"\u013F",LongLeftArrow:"\u27F5",longleftarrow:"\u27F5",xlarr:"\u27F5",LongLeftRightArrow:"\u27F7",longleftrightarrow:"\u27F7",xharr:"\u27F7",LongRightArrow:"\u27F6",longrightarrow:"\u27F6",xrarr:"\u27F6",Lopf:"\u{1D543}",LowerLeftArrow:"\u2199",swarr:"\u2199",swarrow:"\u2199",LowerRightArrow:"\u2198",searr:"\u2198",searrow:"\u2198",Lsh:"\u21B0",lsh:"\u21B0",Lstrok:"\u0141",Lt:"\u226A",NestedLessLess:"\u226A",ll:"\u226A",Map:"\u2905",Mcy:"\u041C",MediumSpace:"\u205F",Mellintrf:"\u2133",Mscr:"\u2133",phmmat:"\u2133",Mfr:"\u{1D510}",MinusPlus:"\u2213",mnplus:"\u2213",mp:"\u2213",Mopf:"\u{1D544}",Mu:"\u039C",NJcy:"\u040A",Nacute:"\u0143",Ncaron:"\u0147",Ncedil:"\u0145",Ncy:"\u041D",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",ZeroWidthSpace:"\u200B",NewLine:`
`,Nfr:"\u{1D511}",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nbsp:"\xA0",Nopf:"\u2115",naturals:"\u2115",Not:"\u2AEC",NotCongruent:"\u2262",nequiv:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",npar:"\u2226",nparallel:"\u2226",nshortparallel:"\u2226",nspar:"\u2226",NotElement:"\u2209",notin:"\u2209",notinva:"\u2209",NotEqual:"\u2260",ne:"\u2260",NotEqualTilde:"\u2242\u0338",nesim:"\u2242\u0338",NotExists:"\u2204",nexist:"\u2204",nexists:"\u2204",NotGreater:"\u226F",ngt:"\u226F",ngtr:"\u226F",NotGreaterEqual:"\u2271",nge:"\u2271",ngeq:"\u2271",NotGreaterFullEqual:"\u2267\u0338",ngE:"\u2267\u0338",ngeqq:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",nGtv:"\u226B\u0338",NotGreaterLess:"\u2279",ntgl:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",NotGreaterTilde:"\u2275",ngsim:"\u2275",NotHumpDownHump:"\u224E\u0338",nbump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",nbumpe:"\u224F\u0338",NotLeftTriangle:"\u22EA",nltri:"\u22EA",ntriangleleft:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",nltrie:"\u22EC",ntrianglelefteq:"\u22EC",NotLess:"\u226E",nless:"\u226E",nlt:"\u226E",NotLessEqual:"\u2270",nle:"\u2270",nleq:"\u2270",NotLessGreater:"\u2278",ntlg:"\u2278",NotLessLess:"\u226A\u0338",nLtv:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",NotLessTilde:"\u2274",nlsim:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",NotPrecedes:"\u2280",npr:"\u2280",nprec:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",npre:"\u2AAF\u0338",npreceq:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",nprcue:"\u22E0",NotReverseElement:"\u220C",notni:"\u220C",notniva:"\u220C",NotRightTriangle:"\u22EB",nrtri:"\u22EB",ntriangleright:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",nrtrie:"\u22ED",ntrianglerighteq:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",nsqsube:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",nsqsupe:"\u22E3",NotSubset:"\u2282\u20D2",nsubset:"\u2282\u20D2",vnsub:"\u2282\u20D2",NotSubsetEqual:"\u2288",nsube:"\u2288",nsubseteq:"\u2288",NotSucceeds:"\u2281",nsc:"\u2281",nsucc:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",nsce:"\u2AB0\u0338",nsucceq:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",nsccue:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",nsupset:"\u2283\u20D2",vnsup:"\u2283\u20D2",NotSupersetEqual:"\u2289",nsupe:"\u2289",nsupseteq:"\u2289",NotTilde:"\u2241",nsim:"\u2241",NotTildeEqual:"\u2244",nsime:"\u2244",nsimeq:"\u2244",NotTildeFullEqual:"\u2247",ncong:"\u2247",NotTildeTilde:"\u2249",nap:"\u2249",napprox:"\u2249",NotVerticalBar:"\u2224",nmid:"\u2224",nshortmid:"\u2224",nsmid:"\u2224",Nscr:"\u{1D4A9}",Ntilde:"\xD1",Nu:"\u039D",OElig:"\u0152",Oacute:"\xD3",Ocirc:"\xD4",Ocy:"\u041E",Odblac:"\u0150",Ofr:"\u{1D512}",Ograve:"\xD2",Omacr:"\u014C",Omega:"\u03A9",ohm:"\u03A9",Omicron:"\u039F",Oopf:"\u{1D546}",OpenCurlyDoubleQuote:"\u201C",ldquo:"\u201C",OpenCurlyQuote:"\u2018",lsquo:"\u2018",Or:"\u2A54",Oscr:"\u{1D4AA}",Oslash:"\xD8",Otilde:"\xD5",Otimes:"\u2A37",Ouml:"\xD6",OverBar:"\u203E",oline:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",tbrk:"\u23B4",OverParenthesis:"\u23DC",PartialD:"\u2202",part:"\u2202",Pcy:"\u041F",Pfr:"\u{1D513}",Phi:"\u03A6",Pi:"\u03A0",PlusMinus:"\xB1",plusmn:"\xB1",pm:"\xB1",Popf:"\u2119",primes:"\u2119",Pr:"\u2ABB",Precedes:"\u227A",pr:"\u227A",prec:"\u227A",PrecedesEqual:"\u2AAF",pre:"\u2AAF",preceq:"\u2AAF",PrecedesSlantEqual:"\u227C",prcue:"\u227C",preccurlyeq:"\u227C",PrecedesTilde:"\u227E",precsim:"\u227E",prsim:"\u227E",Prime:"\u2033",Product:"\u220F",prod:"\u220F",Proportional:"\u221D",prop:"\u221D",propto:"\u221D",varpropto:"\u221D",vprop:"\u221D",Pscr:"\u{1D4AB}",Psi:"\u03A8",QUOT:'"',quot:'"',Qfr:"\u{1D514}",Qopf:"\u211A",rationals:"\u211A",Qscr:"\u{1D4AC}",RBarr:"\u2910",drbkarow:"\u2910",REG:"\xAE",circledR:"\xAE",reg:"\xAE",Racute:"\u0154",Rang:"\u27EB",Rarr:"\u21A0",twoheadrightarrow:"\u21A0",Rarrtl:"\u2916",Rcaron:"\u0158",Rcedil:"\u0156",Rcy:"\u0420",Re:"\u211C",Rfr:"\u211C",real:"\u211C",realpart:"\u211C",ReverseElement:"\u220B",SuchThat:"\u220B",ni:"\u220B",niv:"\u220B",ReverseEquilibrium:"\u21CB",leftrightharpoons:"\u21CB",lrhar:"\u21CB",ReverseUpEquilibrium:"\u296F",duhar:"\u296F",Rho:"\u03A1",RightAngleBracket:"\u27E9",rang:"\u27E9",rangle:"\u27E9",RightArrow:"\u2192",ShortRightArrow:"\u2192",rarr:"\u2192",rightarrow:"\u2192",srarr:"\u2192",RightArrowBar:"\u21E5",rarrb:"\u21E5",RightArrowLeftArrow:"\u21C4",rightleftarrows:"\u21C4",rlarr:"\u21C4",RightCeiling:"\u2309",rceil:"\u2309",RightDoubleBracket:"\u27E7",robrk:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",dharr:"\u21C2",downharpoonright:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rfloor:"\u230B",RightTee:"\u22A2",vdash:"\u22A2",RightTeeArrow:"\u21A6",map:"\u21A6",mapsto:"\u21A6",RightTeeVector:"\u295B",RightTriangle:"\u22B3",vartriangleright:"\u22B3",vrtri:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",rtrie:"\u22B5",trianglerighteq:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",uharr:"\u21BE",upharpoonright:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",rharu:"\u21C0",rightharpoonup:"\u21C0",RightVectorBar:"\u2953",Ropf:"\u211D",reals:"\u211D",RoundImplies:"\u2970",Rrightarrow:"\u21DB",rAarr:"\u21DB",Rscr:"\u211B",realine:"\u211B",Rsh:"\u21B1",rsh:"\u21B1",RuleDelayed:"\u29F4",SHCHcy:"\u0429",SHcy:"\u0428",SOFTcy:"\u042C",Sacute:"\u015A",Sc:"\u2ABC",Scaron:"\u0160",Scedil:"\u015E",Scirc:"\u015C",Scy:"\u0421",Sfr:"\u{1D516}",ShortUpArrow:"\u2191",UpArrow:"\u2191",uarr:"\u2191",uparrow:"\u2191",Sigma:"\u03A3",SmallCircle:"\u2218",compfn:"\u2218",Sopf:"\u{1D54A}",Sqrt:"\u221A",radic:"\u221A",Square:"\u25A1",squ:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",sqcap:"\u2293",SquareSubset:"\u228F",sqsub:"\u228F",sqsubset:"\u228F",SquareSubsetEqual:"\u2291",sqsube:"\u2291",sqsubseteq:"\u2291",SquareSuperset:"\u2290",sqsup:"\u2290",sqsupset:"\u2290",SquareSupersetEqual:"\u2292",sqsupe:"\u2292",sqsupseteq:"\u2292",SquareUnion:"\u2294",sqcup:"\u2294",Sscr:"\u{1D4AE}",Star:"\u22C6",sstarf:"\u22C6",Sub:"\u22D0",Subset:"\u22D0",SubsetEqual:"\u2286",sube:"\u2286",subseteq:"\u2286",Succeeds:"\u227B",sc:"\u227B",succ:"\u227B",SucceedsEqual:"\u2AB0",sce:"\u2AB0",succeq:"\u2AB0",SucceedsSlantEqual:"\u227D",sccue:"\u227D",succcurlyeq:"\u227D",SucceedsTilde:"\u227F",scsim:"\u227F",succsim:"\u227F",Sum:"\u2211",sum:"\u2211",Sup:"\u22D1",Supset:"\u22D1",Superset:"\u2283",sup:"\u2283",supset:"\u2283",SupersetEqual:"\u2287",supe:"\u2287",supseteq:"\u2287",THORN:"\xDE",TRADE:"\u2122",trade:"\u2122",TSHcy:"\u040B",TScy:"\u0426",Tab:"	",Tau:"\u03A4",Tcaron:"\u0164",Tcedil:"\u0162",Tcy:"\u0422",Tfr:"\u{1D517}",Therefore:"\u2234",there4:"\u2234",therefore:"\u2234",Theta:"\u0398",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",Tilde:"\u223C",sim:"\u223C",thicksim:"\u223C",thksim:"\u223C",TildeEqual:"\u2243",sime:"\u2243",simeq:"\u2243",TildeFullEqual:"\u2245",cong:"\u2245",TildeTilde:"\u2248",ap:"\u2248",approx:"\u2248",asymp:"\u2248",thickapprox:"\u2248",thkap:"\u2248",Topf:"\u{1D54B}",TripleDot:"\u20DB",tdot:"\u20DB",Tscr:"\u{1D4AF}",Tstrok:"\u0166",Uacute:"\xDA",Uarr:"\u219F",Uarrocir:"\u2949",Ubrcy:"\u040E",Ubreve:"\u016C",Ucirc:"\xDB",Ucy:"\u0423",Udblac:"\u0170",Ufr:"\u{1D518}",Ugrave:"\xD9",Umacr:"\u016A",UnderBar:"_",lowbar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",bbrk:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",bigcup:"\u22C3",xcup:"\u22C3",UnionPlus:"\u228E",uplus:"\u228E",Uogon:"\u0172",Uopf:"\u{1D54C}",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",udarr:"\u21C5",UpDownArrow:"\u2195",updownarrow:"\u2195",varr:"\u2195",UpEquilibrium:"\u296E",udhar:"\u296E",UpTee:"\u22A5",bot:"\u22A5",bottom:"\u22A5",perp:"\u22A5",UpTeeArrow:"\u21A5",mapstoup:"\u21A5",UpperLeftArrow:"\u2196",nwarr:"\u2196",nwarrow:"\u2196",UpperRightArrow:"\u2197",nearr:"\u2197",nearrow:"\u2197",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",Uring:"\u016E",Uscr:"\u{1D4B0}",Utilde:"\u0168",Uuml:"\xDC",VDash:"\u22AB",Vbar:"\u2AEB",Vcy:"\u0412",Vdash:"\u22A9",Vdashl:"\u2AE6",Vee:"\u22C1",bigvee:"\u22C1",xvee:"\u22C1",Verbar:"\u2016",Vert:"\u2016",VerticalBar:"\u2223",mid:"\u2223",shortmid:"\u2223",smid:"\u2223",VerticalLine:"|",verbar:"|",vert:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",wr:"\u2240",wreath:"\u2240",VeryThinSpace:"\u200A",hairsp:"\u200A",Vfr:"\u{1D519}",Vopf:"\u{1D54D}",Vscr:"\u{1D4B1}",Vvdash:"\u22AA",Wcirc:"\u0174",Wedge:"\u22C0",bigwedge:"\u22C0",xwedge:"\u22C0",Wfr:"\u{1D51A}",Wopf:"\u{1D54E}",Wscr:"\u{1D4B2}",Xfr:"\u{1D51B}",Xi:"\u039E",Xopf:"\u{1D54F}",Xscr:"\u{1D4B3}",YAcy:"\u042F",YIcy:"\u0407",YUcy:"\u042E",Yacute:"\xDD",Ycirc:"\u0176",Ycy:"\u042B",Yfr:"\u{1D51C}",Yopf:"\u{1D550}",Yscr:"\u{1D4B4}",Yuml:"\u0178",ZHcy:"\u0416",Zacute:"\u0179",Zcaron:"\u017D",Zcy:"\u0417",Zdot:"\u017B",Zeta:"\u0396",Zfr:"\u2128",zeetrf:"\u2128",Zopf:"\u2124",integers:"\u2124",Zscr:"\u{1D4B5}",aacute:"\xE1",abreve:"\u0103",ac:"\u223E",mstpos:"\u223E",acE:"\u223E\u0333",acd:"\u223F",acirc:"\xE2",acy:"\u0430",aelig:"\xE6",afr:"\u{1D51E}",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",alpha:"\u03B1",amacr:"\u0101",amalg:"\u2A3F",and:"\u2227",wedge:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",angle:"\u2220",ange:"\u29A4",angmsd:"\u2221",measuredangle:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angzarr:"\u237C",aogon:"\u0105",aopf:"\u{1D552}",apE:"\u2A70",apacir:"\u2A6F",ape:"\u224A",approxeq:"\u224A",apid:"\u224B",apos:"'",aring:"\xE5",ascr:"\u{1D4B6}",ast:"*",midast:"*",atilde:"\xE3",auml:"\xE4",awint:"\u2A11",bNot:"\u2AED",backcong:"\u224C",bcong:"\u224C",backepsilon:"\u03F6",bepsi:"\u03F6",backprime:"\u2035",bprime:"\u2035",backsim:"\u223D",bsim:"\u223D",backsimeq:"\u22CD",bsime:"\u22CD",barvee:"\u22BD",barwed:"\u2305",barwedge:"\u2305",bbrktbrk:"\u23B6",bcy:"\u0431",bdquo:"\u201E",ldquor:"\u201E",bemptyv:"\u29B0",beta:"\u03B2",beth:"\u2136",between:"\u226C",twixt:"\u226C",bfr:"\u{1D51F}",bigcirc:"\u25EF",xcirc:"\u25EF",bigodot:"\u2A00",xodot:"\u2A00",bigoplus:"\u2A01",xoplus:"\u2A01",bigotimes:"\u2A02",xotime:"\u2A02",bigsqcup:"\u2A06",xsqcup:"\u2A06",bigstar:"\u2605",starf:"\u2605",bigtriangledown:"\u25BD",xdtri:"\u25BD",bigtriangleup:"\u25B3",xutri:"\u25B3",biguplus:"\u2A04",xuplus:"\u2A04",bkarow:"\u290D",rbarr:"\u290D",blacklozenge:"\u29EB",lozf:"\u29EB",blacktriangle:"\u25B4",utrif:"\u25B4",blacktriangledown:"\u25BE",dtrif:"\u25BE",blacktriangleleft:"\u25C2",ltrif:"\u25C2",blacktriangleright:"\u25B8",rtrif:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bnot:"\u2310",bopf:"\u{1D553}",bowtie:"\u22C8",boxDL:"\u2557",boxDR:"\u2554",boxDl:"\u2556",boxDr:"\u2553",boxH:"\u2550",boxHD:"\u2566",boxHU:"\u2569",boxHd:"\u2564",boxHu:"\u2567",boxUL:"\u255D",boxUR:"\u255A",boxUl:"\u255C",boxUr:"\u2559",boxV:"\u2551",boxVH:"\u256C",boxVL:"\u2563",boxVR:"\u2560",boxVh:"\u256B",boxVl:"\u2562",boxVr:"\u255F",boxbox:"\u29C9",boxdL:"\u2555",boxdR:"\u2552",boxdl:"\u2510",boxdr:"\u250C",boxhD:"\u2565",boxhU:"\u2568",boxhd:"\u252C",boxhu:"\u2534",boxminus:"\u229F",minusb:"\u229F",boxplus:"\u229E",plusb:"\u229E",boxtimes:"\u22A0",timesb:"\u22A0",boxuL:"\u255B",boxuR:"\u2558",boxul:"\u2518",boxur:"\u2514",boxv:"\u2502",boxvH:"\u256A",boxvL:"\u2561",boxvR:"\u255E",boxvh:"\u253C",boxvl:"\u2524",boxvr:"\u251C",brvbar:"\xA6",bscr:"\u{1D4B7}",bsemi:"\u204F",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bumpE:"\u2AAE",cacute:"\u0107",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",caps:"\u2229\uFE00",caret:"\u2041",ccaps:"\u2A4D",ccaron:"\u010D",ccedil:"\xE7",ccirc:"\u0109",ccups:"\u2A4C",ccupssm:"\u2A50",cdot:"\u010B",cemptyv:"\u29B2",cent:"\xA2",cfr:"\u{1D520}",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",chi:"\u03C7",cir:"\u25CB",cirE:"\u29C3",circ:"\u02C6",circeq:"\u2257",cire:"\u2257",circlearrowleft:"\u21BA",olarr:"\u21BA",circlearrowright:"\u21BB",orarr:"\u21BB",circledS:"\u24C8",oS:"\u24C8",circledast:"\u229B",oast:"\u229B",circledcirc:"\u229A",ocir:"\u229A",circleddash:"\u229D",odash:"\u229D",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",clubs:"\u2663",clubsuit:"\u2663",colon:":",comma:",",commat:"@",comp:"\u2201",complement:"\u2201",congdot:"\u2A6D",copf:"\u{1D554}",copysr:"\u2117",crarr:"\u21B5",cross:"\u2717",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",curlyeqprec:"\u22DE",cuesc:"\u22DF",curlyeqsucc:"\u22DF",cularr:"\u21B6",curvearrowleft:"\u21B6",cularrp:"\u293D",cup:"\u222A",cupbrcap:"\u2A48",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curvearrowright:"\u21B7",curarrm:"\u293C",curlyvee:"\u22CE",cuvee:"\u22CE",curlywedge:"\u22CF",cuwed:"\u22CF",curren:"\xA4",cwint:"\u2231",cylcty:"\u232D",dHar:"\u2965",dagger:"\u2020",daleth:"\u2138",dash:"\u2010",hyphen:"\u2010",dbkarow:"\u290F",rBarr:"\u290F",dcaron:"\u010F",dcy:"\u0434",ddarr:"\u21CA",downdownarrows:"\u21CA",ddotseq:"\u2A77",eDDot:"\u2A77",deg:"\xB0",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",dfr:"\u{1D521}",diamondsuit:"\u2666",diams:"\u2666",digamma:"\u03DD",gammad:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",djcy:"\u0452",dlcorn:"\u231E",llcorner:"\u231E",dlcrop:"\u230D",dollar:"$",dopf:"\u{1D555}",doteqdot:"\u2251",eDot:"\u2251",dotminus:"\u2238",minusd:"\u2238",dotplus:"\u2214",plusdo:"\u2214",dotsquare:"\u22A1",sdotb:"\u22A1",drcorn:"\u231F",lrcorner:"\u231F",drcrop:"\u230C",dscr:"\u{1D4B9}",dscy:"\u0455",dsol:"\u29F6",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",triangledown:"\u25BF",dwangle:"\u29A6",dzcy:"\u045F",dzigrarr:"\u27FF",eacute:"\xE9",easter:"\u2A6E",ecaron:"\u011B",ecir:"\u2256",eqcirc:"\u2256",ecirc:"\xEA",ecolon:"\u2255",eqcolon:"\u2255",ecy:"\u044D",edot:"\u0117",efDot:"\u2252",fallingdotseq:"\u2252",efr:"\u{1D522}",eg:"\u2A9A",egrave:"\xE8",egs:"\u2A96",eqslantgtr:"\u2A96",egsdot:"\u2A98",el:"\u2A99",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",eqslantless:"\u2A95",elsdot:"\u2A97",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",emptyv:"\u2205",varnothing:"\u2205",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",eng:"\u014B",ensp:"\u2002",eogon:"\u0119",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",epsilon:"\u03B5",epsiv:"\u03F5",straightepsilon:"\u03F5",varepsilon:"\u03F5",equals:"=",equest:"\u225F",questeq:"\u225F",equivDD:"\u2A78",eqvparsl:"\u29E5",erDot:"\u2253",risingdotseq:"\u2253",erarr:"\u2971",escr:"\u212F",eta:"\u03B7",eth:"\xF0",euml:"\xEB",euro:"\u20AC",excl:"!",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",ffr:"\u{1D523}",filig:"\uFB01",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",fopf:"\u{1D557}",fork:"\u22D4",pitchfork:"\u22D4",forkv:"\u2AD9",fpartint:"\u2A0D",frac12:"\xBD",half:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",sfrown:"\u2322",fscr:"\u{1D4BB}",gEl:"\u2A8C",gtreqqless:"\u2A8C",gacute:"\u01F5",gamma:"\u03B3",gap:"\u2A86",gtrapprox:"\u2A86",gbreve:"\u011F",gcirc:"\u011D",gcy:"\u0433",gdot:"\u0121",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",gfr:"\u{1D524}",gimel:"\u2137",gjcy:"\u0453",glE:"\u2A92",gla:"\u2AA5",glj:"\u2AA4",gnE:"\u2269",gneqq:"\u2269",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gneq:"\u2A88",gnsim:"\u22E7",gopf:"\u{1D558}",gscr:"\u210A",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtrdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrarr:"\u2978",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",hardcy:"\u044A",harrcir:"\u2948",harrw:"\u21AD",leftrightsquigarrow:"\u21AD",hbar:"\u210F",hslash:"\u210F",planck:"\u210F",plankv:"\u210F",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",mldr:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",hksearow:"\u2925",searhk:"\u2925",hkswarow:"\u2926",swarhk:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",larrhk:"\u21A9",hookrightarrow:"\u21AA",rarrhk:"\u21AA",hopf:"\u{1D559}",horbar:"\u2015",hscr:"\u{1D4BD}",hstrok:"\u0127",hybull:"\u2043",iacute:"\xED",icirc:"\xEE",icy:"\u0438",iecy:"\u0435",iexcl:"\xA1",ifr:"\u{1D526}",igrave:"\xEC",iiiint:"\u2A0C",qint:"\u2A0C",iiint:"\u222D",tint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",ijlig:"\u0133",imacr:"\u012B",imath:"\u0131",inodot:"\u0131",imof:"\u22B7",imped:"\u01B5",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",intcal:"\u22BA",intercal:"\u22BA",intlarhk:"\u2A17",intprod:"\u2A3C",iprod:"\u2A3C",iocy:"\u0451",iogon:"\u012F",iopf:"\u{1D55A}",iota:"\u03B9",iquest:"\xBF",iscr:"\u{1D4BE}",isinE:"\u22F9",isindot:"\u22F5",isins:"\u22F4",isinsv:"\u22F3",itilde:"\u0129",iukcy:"\u0456",iuml:"\xEF",jcirc:"\u0135",jcy:"\u0439",jfr:"\u{1D527}",jmath:"\u0237",jopf:"\u{1D55B}",jscr:"\u{1D4BF}",jsercy:"\u0458",jukcy:"\u0454",kappa:"\u03BA",kappav:"\u03F0",varkappa:"\u03F0",kcedil:"\u0137",kcy:"\u043A",kfr:"\u{1D528}",kgreen:"\u0138",khcy:"\u0445",kjcy:"\u045C",kopf:"\u{1D55C}",kscr:"\u{1D4C0}",lAtail:"\u291B",lBarr:"\u290E",lEg:"\u2A8B",lesseqqgtr:"\u2A8B",lHar:"\u2962",lacute:"\u013A",laemptyv:"\u29B4",lambda:"\u03BB",langd:"\u2991",lap:"\u2A85",lessapprox:"\u2A85",laquo:"\xAB",larrbfs:"\u291F",larrfs:"\u291D",larrlp:"\u21AB",looparrowleft:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",leftarrowtail:"\u21A2",lat:"\u2AAB",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lcub:"{",lbrack:"[",lsqb:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",lcaron:"\u013E",lcedil:"\u013C",lcy:"\u043B",ldca:"\u2936",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",leq:"\u2264",leftleftarrows:"\u21C7",llarr:"\u21C7",leftthreetimes:"\u22CB",lthree:"\u22CB",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessdot:"\u22D6",ltdot:"\u22D6",lfisht:"\u297C",lfr:"\u{1D529}",lgE:"\u2A91",lharul:"\u296A",lhblk:"\u2584",ljcy:"\u0459",llhard:"\u296B",lltri:"\u25FA",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnE:"\u2268",lneqq:"\u2268",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lneq:"\u2A87",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",longmapsto:"\u27FC",xmap:"\u27FC",looparrowright:"\u21AC",rarrlp:"\u21AC",lopar:"\u2985",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",loz:"\u25CA",lozenge:"\u25CA",lpar:"(",lparlt:"\u2993",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",lsime:"\u2A8D",lsimg:"\u2A8F",lsquor:"\u201A",sbquo:"\u201A",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltrPar:"\u2996",ltri:"\u25C3",triangleleft:"\u25C3",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",mDDot:"\u223A",macr:"\xAF",strns:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",marker:"\u25AE",mcomma:"\u2A29",mcy:"\u043C",mdash:"\u2014",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midcir:"\u2AF0",minus:"\u2212",minusdu:"\u2A2A",mlcp:"\u2ADB",models:"\u22A7",mopf:"\u{1D55E}",mscr:"\u{1D4C2}",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nGg:"\u22D9\u0338",nGt:"\u226B\u20D2",nLeftarrow:"\u21CD",nlArr:"\u21CD",nLeftrightarrow:"\u21CE",nhArr:"\u21CE",nLl:"\u22D8\u0338",nLt:"\u226A\u20D2",nRightarrow:"\u21CF",nrArr:"\u21CF",nVDash:"\u22AF",nVdash:"\u22AE",nacute:"\u0144",nang:"\u2220\u20D2",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",natur:"\u266E",natural:"\u266E",ncap:"\u2A43",ncaron:"\u0148",ncedil:"\u0146",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",ncy:"\u043D",ndash:"\u2013",neArr:"\u21D7",nearhk:"\u2924",nedot:"\u2250\u0338",nesear:"\u2928",toea:"\u2928",nfr:"\u{1D52B}",nharr:"\u21AE",nleftrightarrow:"\u21AE",nhpar:"\u2AF2",nis:"\u22FC",nisd:"\u22FA",njcy:"\u045A",nlE:"\u2266\u0338",nleqq:"\u2266\u0338",nlarr:"\u219A",nleftarrow:"\u219A",nldr:"\u2025",nopf:"\u{1D55F}",not:"\xAC",notinE:"\u22F9\u0338",notindot:"\u22F5\u0338",notinvb:"\u22F7",notinvc:"\u22F6",notnivb:"\u22FE",notnivc:"\u22FD",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",nrarr:"\u219B",nrightarrow:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nscr:"\u{1D4C3}",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsubseteqq:"\u2AC5\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupseteqq:"\u2AC6\u0338",ntilde:"\xF1",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvDash:"\u22AD",nvHarr:"\u2904",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwArr:"\u21D6",nwarhk:"\u2923",nwnear:"\u2927",oacute:"\xF3",ocirc:"\xF4",ocy:"\u043E",odblac:"\u0151",odiv:"\u2A38",odsold:"\u29BC",oelig:"\u0153",ofcir:"\u29BF",ofr:"\u{1D52C}",ogon:"\u02DB",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",olcir:"\u29BE",olcross:"\u29BB",olt:"\u29C0",omacr:"\u014D",omega:"\u03C9",omicron:"\u03BF",omid:"\u29B6",oopf:"\u{1D560}",opar:"\u29B7",operp:"\u29B9",or:"\u2228",vee:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",oscr:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oslash:"\xF8",osol:"\u2298",otilde:"\xF5",otimesas:"\u2A36",ouml:"\xF6",ovbar:"\u233D",para:"\xB6",parsim:"\u2AF3",parsl:"\u2AFD",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",pertenk:"\u2031",pfr:"\u{1D52D}",phi:"\u03C6",phiv:"\u03D5",straightphi:"\u03D5",varphi:"\u03D5",phone:"\u260E",pi:"\u03C0",piv:"\u03D6",varpi:"\u03D6",planckh:"\u210E",plus:"+",plusacir:"\u2A23",pluscir:"\u2A22",plusdu:"\u2A25",pluse:"\u2A72",plussim:"\u2A26",plustwo:"\u2A27",pointint:"\u2A15",popf:"\u{1D561}",pound:"\xA3",prE:"\u2AB3",prap:"\u2AB7",precapprox:"\u2AB7",precnapprox:"\u2AB9",prnap:"\u2AB9",precneqq:"\u2AB5",prnE:"\u2AB5",precnsim:"\u22E8",prnsim:"\u22E8",prime:"\u2032",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prurel:"\u22B0",pscr:"\u{1D4C5}",psi:"\u03C8",puncsp:"\u2008",qfr:"\u{1D52E}",qopf:"\u{1D562}",qprime:"\u2057",qscr:"\u{1D4C6}",quatint:"\u2A16",quest:"?",rAtail:"\u291C",rHar:"\u2964",race:"\u223D\u0331",racute:"\u0155",raemptyv:"\u29B3",rangd:"\u2992",range:"\u29A5",raquo:"\xBB",rarrap:"\u2975",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrpl:"\u2945",rarrsim:"\u2974",rarrtl:"\u21A3",rightarrowtail:"\u21A3",rarrw:"\u219D",rightsquigarrow:"\u219D",ratail:"\u291A",ratio:"\u2236",rbbrk:"\u2773",rbrace:"}",rcub:"}",rbrack:"]",rsqb:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",rcaron:"\u0159",rcedil:"\u0157",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdsh:"\u21B3",rect:"\u25AD",rfisht:"\u297D",rfr:"\u{1D52F}",rharul:"\u296C",rho:"\u03C1",rhov:"\u03F1",varrho:"\u03F1",rightrightarrows:"\u21C9",rrarr:"\u21C9",rightthreetimes:"\u22CC",rthree:"\u22CC",ring:"\u02DA",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",ropar:"\u2986",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rsaquo:"\u203A",rscr:"\u{1D4C7}",rtimes:"\u22CA",rtri:"\u25B9",triangleright:"\u25B9",rtriltri:"\u29CE",ruluhar:"\u2968",rx:"\u211E",sacute:"\u015B",scE:"\u2AB4",scap:"\u2AB8",succapprox:"\u2AB8",scaron:"\u0161",scedil:"\u015F",scirc:"\u015D",scnE:"\u2AB6",succneqq:"\u2AB6",scnap:"\u2ABA",succnapprox:"\u2ABA",scnsim:"\u22E9",succnsim:"\u22E9",scpolint:"\u2A13",scy:"\u0441",sdot:"\u22C5",sdote:"\u2A66",seArr:"\u21D8",sect:"\xA7",semi:";",seswar:"\u2929",tosa:"\u2929",sext:"\u2736",sfr:"\u{1D530}",sharp:"\u266F",shchcy:"\u0449",shcy:"\u0448",shy:"\xAD",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",varsigma:"\u03C2",simdot:"\u2A6A",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",smashp:"\u2A33",smeparsl:"\u29E4",smile:"\u2323",ssmile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",sqcaps:"\u2293\uFE00",sqcups:"\u2294\uFE00",sscr:"\u{1D4C8}",star:"\u2606",sub:"\u2282",subset:"\u2282",subE:"\u2AC5",subseteqq:"\u2AC5",subdot:"\u2ABD",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subsetneqq:"\u2ACB",subne:"\u228A",subsetneq:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supE:"\u2AC6",supseteqq:"\u2AC6",supdot:"\u2ABE",supdsub:"\u2AD8",supedot:"\u2AC4",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supsetneqq:"\u2ACC",supne:"\u228B",supsetneq:"\u228B",supplus:"\u2AC0",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swArr:"\u21D9",swnwar:"\u292A",szlig:"\xDF",target:"\u2316",tau:"\u03C4",tcaron:"\u0165",tcedil:"\u0163",tcy:"\u0442",telrec:"\u2315",tfr:"\u{1D531}",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",vartheta:"\u03D1",thorn:"\xFE",times:"\xD7",timesbar:"\u2A31",timesd:"\u2A30",topbot:"\u2336",topcir:"\u2AF1",topf:"\u{1D565}",topfork:"\u2ADA",tprime:"\u2034",triangle:"\u25B5",utri:"\u25B5",triangleq:"\u225C",trie:"\u225C",tridot:"\u25EC",triminus:"\u2A3A",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",tscr:"\u{1D4C9}",tscy:"\u0446",tshcy:"\u045B",tstrok:"\u0167",uHar:"\u2963",uacute:"\xFA",ubrcy:"\u045E",ubreve:"\u016D",ucirc:"\xFB",ucy:"\u0443",udblac:"\u0171",ufisht:"\u297E",ufr:"\u{1D532}",ugrave:"\xF9",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",umacr:"\u016B",uogon:"\u0173",uopf:"\u{1D566}",upsi:"\u03C5",upsilon:"\u03C5",upuparrows:"\u21C8",uuarr:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",uring:"\u016F",urtri:"\u25F9",uscr:"\u{1D4CA}",utdot:"\u22F0",utilde:"\u0169",uuml:"\xFC",uwangle:"\u29A7",vBar:"\u2AE8",vBarv:"\u2AE9",vangrt:"\u299C",varsubsetneq:"\u228A\uFE00",vsubne:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",vsubnE:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",vsupne:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vsupnE:"\u2ACC\uFE00",vcy:"\u0432",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",vfr:"\u{1D533}",vopf:"\u{1D567}",vscr:"\u{1D4CB}",vzigzag:"\u299A",wcirc:"\u0175",wedbar:"\u2A5F",wedgeq:"\u2259",weierp:"\u2118",wp:"\u2118",wfr:"\u{1D534}",wopf:"\u{1D568}",wscr:"\u{1D4CC}",xfr:"\u{1D535}",xi:"\u03BE",xnis:"\u22FB",xopf:"\u{1D569}",xscr:"\u{1D4CD}",yacute:"\xFD",yacy:"\u044F",ycirc:"\u0177",ycy:"\u044B",yen:"\xA5",yfr:"\u{1D536}",yicy:"\u0457",yopf:"\u{1D56A}",yscr:"\u{1D4CE}",yucy:"\u044E",yuml:"\xFF",zacute:"\u017A",zcaron:"\u017E",zcy:"\u0437",zdot:"\u017C",zeta:"\u03B6",zfr:"\u{1D537}",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"},cT="\uE500";Zc.ngsp=cT;var vy=class{tokens;errors;nonNormalizedIcuExpressions;constructor(e,n,r){this.tokens=e,this.errors=n,this.nonNormalizedIcuExpressions=r}};function OL(t,e,n,r={}){let i=new wy(new Jf(t,e),n,r);return i.tokenize(),new vy(WL(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}var FL=/\r\n?/g;function oa(t){return`Unexpected character "${t===xt?"EOF":String.fromCharCode(t)}"`}function pb(t){return`Unknown entity "${t}" - use the "&#<decimal>;" or  "&#x<hex>;" syntax`}function BL(t,e){return`Unable to parse entity "${e}" - ${t} character reference entities must end with ";"`}var yy=(function(t){return t.HEX="hexadecimal",t.DEC="decimal",t})(yy||{}),VL=["@if","@else","@for","@switch","@case","@default","@empty","@defer","@placeholder","@loading","@error"],Jl={start:"{{",end:"}}"},wy=class{_getTagDefinition;_cursor;_tokenizeIcu;_leadingTriviaCodePoints;_currentTokenStart=null;_currentTokenType=null;_expansionCaseStack=[];_openDirectiveCount=0;_inInterpolation=!1;_preserveLineEndings;_i18nNormalizeLineEndingsInICUs;_tokenizeBlocks;_tokenizeLet;_selectorlessEnabled;tokens=[];errors=[];nonNormalizedIcuExpressions=[];constructor(e,n,r){this._getTagDefinition=n,this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map(s=>s.codePointAt(0)||0);let i=r.range||{endPos:e.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new Ey(e,i):new uh(e,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1,this._tokenizeBlocks=r.tokenizeBlocks??!0,this._tokenizeLet=r.tokenizeLet??!0,this._selectorlessEnabled=r.selectorlessEnabled??!1;try{this._cursor.init()}catch(s){this.handleError(s)}}_processCarriageReturns(e){return this._preserveLineEndings?e:e.replace(FL,`
`)}tokenize(){for(;this._cursor.peek()!==xt;){let e=this._cursor.clone();try{this._attemptCharCode(ya)?this._attemptCharCode(Qv)?this._attemptCharCode(qr)?this._consumeCdata(e):this._attemptCharCode(Wf)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(jn)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeLet&&this._cursor.peek()===ra&&!this._inInterpolation&&this._isLetStart()?this._consumeLetDeclaration(e):this._tokenizeBlocks&&this._isBlockStart()?this._consumeBlockStart(e):this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansionCase()&&!this._isInExpansionForm()&&this._attemptCharCode(Xt)?this._consumeBlockEnd(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeWithInterpolation(5,8,()=>this._isTextEnd(),()=>this._isTagStart())}catch(n){this.handleError(n)}}this._beginToken(41),this._endToken([])}_getBlockName(){let e=!1,n=this._cursor.clone();return this._attemptCharCodeUntilFn(r=>$c(r)?!e:jL(r)?(e=!0,!1):!0),this._cursor.getChars(n).trim()}_consumeBlockStart(e){this._requireCharCode(ra),this._beginToken(24,e);let n=this._endToken([this._getBlockName()]);if(this._cursor.peek()===An)if(this._cursor.advance(),this._consumeBlockParameters(),this._attemptCharCodeUntilFn(Ye),this._attemptCharCode(kt))this._attemptCharCodeUntilFn(Ye);else{n.type=28;return}this._attemptCharCode(fr)?(this._beginToken(25),this._endToken([])):this._isBlockStart()&&(n.parts[0]==="case"||n.parts[0]==="default")?(this._beginToken(25),this._endToken([]),this._beginToken(26),this._endToken([])):n.type=28}_consumeBlockEnd(e){this._beginToken(26,e),this._endToken([])}_consumeBlockParameters(){for(this._attemptCharCodeUntilFn(gb);this._cursor.peek()!==kt&&this._cursor.peek()!==xt;){this._beginToken(27);let e=this._cursor.clone(),n=null,r=0;for(;this._cursor.peek()!==xn&&this._cursor.peek()!==xt||n!==null;){let i=this._cursor.peek();if(i===js)this._cursor.advance();else if(i===n)n=null;else if(n===null&&sc(i))n=i;else if(i===An&&n===null)r++;else if(i===kt&&n===null){if(r===0)break;r>0&&r--}this._cursor.advance()}this._endToken([this._cursor.getChars(e)]),this._attemptCharCodeUntilFn(gb)}}_consumeLetDeclaration(e){if(this._requireStr("@let"),this._beginToken(29,e),$c(this._cursor.peek()))this._attemptCharCodeUntilFn(Ye);else{let i=this._endToken([this._cursor.getChars(e)]);i.type=32;return}let n=this._endToken([this._getLetDeclarationName()]);if(this._attemptCharCodeUntilFn(Ye),!this._attemptCharCode(Ut)){n.type=32;return}this._attemptCharCodeUntilFn(i=>Ye(i)&&!zf(i)),this._consumeLetDeclarationValue(),this._cursor.peek()===xn?(this._beginToken(31),this._endToken([]),this._cursor.advance()):(n.type=32,n.sourceSpan=this._cursor.getSpan(e))}_getLetDeclarationName(){let e=this._cursor.clone(),n=!1;return this._attemptCharCodeUntilFn(r=>es(r)||r===kh||r===os||n&&dr(r)?(n=!0,!1):!0),this._cursor.getChars(e).trim()}_consumeLetDeclarationValue(){let e=this._cursor.clone();for(this._beginToken(30,e);this._cursor.peek()!==xt;){let n=this._cursor.peek();if(n===xn)break;sc(n)&&(this._cursor.advance(),this._attemptCharCodeUntilFn(r=>r===js?(this._cursor.advance(),!1):r===n)),this._cursor.advance()}this._endToken([this._cursor.getChars(e)])}_tokenizeExpansionForm(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(qL(this._cursor.peek())&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===Xt){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}_beginToken(e,n=this._cursor.clone()){this._currentTokenStart=n,this._currentTokenType=e}_endToken(e,n){if(this._currentTokenStart===null)throw new K(this._cursor.getSpan(n),"Programming error - attempted to end a token when there was no start to the token");if(this._currentTokenType===null)throw new K(this._cursor.getSpan(this._currentTokenStart),"Programming error - attempted to end a token which has no token type");let r={type:this._currentTokenType,parts:e,sourceSpan:(n??this._cursor).getSpan(this._currentTokenStart,this._leadingTriviaCodePoints)};return this.tokens.push(r),this._currentTokenStart=null,this._currentTokenType=null,r}_createError(e,n){this._isInExpansionForm()&&(e+=` (Do you have an unescaped "{" in your template? Use "{{ '{' }}") to escape it.)`);let r=new K(n,e);return this._currentTokenStart=null,this._currentTokenType=null,r}handleError(e){if(e instanceof eu&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),e instanceof K)this.errors.push(e);else throw e}_attemptCharCode(e){return this._cursor.peek()===e?(this._cursor.advance(),!0):!1}_attemptCharCodeCaseInsensitive(e){return GL(this._cursor.peek(),e)?(this._cursor.advance(),!0):!1}_requireCharCode(e){let n=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(oa(this._cursor.peek()),this._cursor.getSpan(n))}_attemptStr(e){let n=e.length;if(this._cursor.charsLeft()<n)return!1;let r=this._cursor.clone();for(let i=0;i<n;i++)if(!this._attemptCharCode(e.charCodeAt(i)))return this._cursor=r,!1;return!0}_attemptStrCaseInsensitive(e){for(let n=0;n<e.length;n++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(n)))return!1;return!0}_requireStr(e){let n=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(oa(this._cursor.peek()),this._cursor.getSpan(n))}_attemptCharCodeUntilFn(e){for(;!e(this._cursor.peek());)this._cursor.advance()}_requireCharCodeUntilFn(e,n){let r=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(r)<n)throw this._createError(oa(this._cursor.peek()),this._cursor.getSpan(r))}_attemptUntilChar(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}_readChar(){let e=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),e}_peekStr(e){let n=e.length;if(this._cursor.charsLeft()<n)return!1;let r=this._cursor.clone();for(let i=0;i<n;i++){if(r.peek()!==e.charCodeAt(i))return!1;r.advance()}return!0}_isBlockStart(){return this._cursor.peek()===ra&&VL.some(e=>this._peekStr(e))}_isLetStart(){return this._cursor.peek()===ra&&this._peekStr("@let")}_consumeEntity(e){this._beginToken(9);let n=this._cursor.clone();if(this._cursor.advance(),this._attemptCharCode(Mx)){let r=this._attemptCharCode(Ux)||this._attemptCharCode(tP),i=this._cursor.clone();if(this._attemptCharCodeUntilFn($L),this._cursor.peek()!=xn){this._cursor.advance();let o=r?yy.HEX:yy.DEC;throw this._createError(BL(o,this._cursor.getChars(n)),this._cursor.getSpan())}let s=this._cursor.getChars(i);this._cursor.advance();try{let o=parseInt(s,r?16:10);this._endToken([String.fromCodePoint(o),this._cursor.getChars(n)])}catch{throw this._createError(pb(this._cursor.getChars(n)),this._cursor.getSpan())}}else{let r=this._cursor.clone();if(this._attemptCharCodeUntilFn(HL),this._cursor.peek()!=xn)this._beginToken(e,n),this._cursor=r,this._endToken(["&"]);else{let i=this._cursor.getChars(r);this._cursor.advance();let s=Zc.hasOwnProperty(i)&&Zc[i];if(!s)throw this._createError(pb(i),this._cursor.getSpan(n));this._endToken([s,`&${i};`])}}}_consumeRawText(e,n){this._beginToken(e?6:7);let r=[];for(;;){let i=this._cursor.clone(),s=n();if(this._cursor=i,s)break;e&&this._cursor.peek()===jf?(this._endToken([this._processCarriageReturns(r.join(""))]),r.length=0,this._consumeEntity(6),this._beginToken(6)):r.push(this._readChar())}this._endToken([this._processCarriageReturns(r.join(""))])}_consumeComment(e){this._beginToken(10,e),this._requireCharCode(Wf),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("-->")),this._beginToken(11),this._requireStr("-->"),this._endToken([])}_consumeCdata(e){this._beginToken(12,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,()=>this._attemptStr("]]>")),this._beginToken(13),this._requireStr("]]>"),this._endToken([])}_consumeDocType(e){this._beginToken(18,e);let n=this._cursor.clone();this._attemptUntilChar(qn);let r=this._cursor.getChars(n);this._cursor.advance(),this._endToken([r])}_consumePrefixAndName(e){let n=this._cursor.clone(),r="";for(;this._cursor.peek()!==Ur&&!UL(this._cursor.peek());)this._cursor.advance();let i;this._cursor.peek()===Ur?(r=this._cursor.getChars(n),this._cursor.advance(),i=this._cursor.clone()):i=n,this._requireCharCodeUntilFn(e,r===""?0:1);let s=this._cursor.getChars(i);return[r,s]}_consumeTagOpen(e){let n,r,i,s;try{if(this._selectorlessEnabled&&Xd(this._cursor.peek()))s=this._consumeComponentOpenStart(e),[i,r,n]=s.parts,r&&(i+=`:${r}`),n&&(i+=`:${n}`),this._attemptCharCodeUntilFn(Ye);else{if(!es(this._cursor.peek()))throw this._createError(oa(this._cursor.peek()),this._cursor.getSpan(e));s=this._consumeTagOpenStart(e),r=s.parts[0],n=i=s.parts[1],this._attemptCharCodeUntilFn(Ye)}for(;!yb(this._cursor.peek());)if(this._selectorlessEnabled&&this._cursor.peek()===ra){let a=this._cursor.clone(),l=a.clone();l.advance(),Xd(l.peek())&&this._consumeDirective(a,l)}else this._consumeAttribute();s.type===33?this._consumeComponentOpenEnd():this._consumeTagOpenEnd()}catch(a){if(a instanceof K){s?s.type=s.type===33?37:4:(this._beginToken(5,e),this._endToken(["<"]));return}throw a}let o=this._getTagDefinition(n).getContentType(r);o===Vr.RAW_TEXT?this._consumeRawTextWithTagClose(s,i,!1):o===Vr.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(s,i,!0)}_consumeRawTextWithTagClose(e,n,r){this._consumeRawText(r,()=>!this._attemptCharCode(ya)||!this._attemptCharCode(jn)||(this._attemptCharCodeUntilFn(Ye),!this._attemptStrCaseInsensitive(n))?!1:(this._attemptCharCodeUntilFn(Ye),this._attemptCharCode(qn))),this._beginToken(e.type===33?36:3),this._requireCharCodeUntilFn(i=>i===qn,3),this._cursor.advance(),this._endToken(e.parts)}_consumeTagOpenStart(e){this._beginToken(0,e);let n=this._consumePrefixAndName(Ns);return this._endToken(n)}_consumeComponentOpenStart(e){this._beginToken(33,e);let n=this._consumeComponentName();return this._endToken(n)}_consumeComponentName(){let e=this._cursor.clone();for(;vb(this._cursor.peek());)this._cursor.advance();let n=this._cursor.getChars(e),r="",i="";return this._cursor.peek()===Ur&&(this._cursor.advance(),[r,i]=this._consumePrefixAndName(Ns)),[n,r,i]}_consumeAttribute(){this._consumeAttributeName(),this._attemptCharCodeUntilFn(Ye),this._attemptCharCode(Ut)&&(this._attemptCharCodeUntilFn(Ye),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(Ye)}_consumeAttributeName(){let e=this._cursor.peek();if(e===Uc||e===Vc)throw this._createError(oa(e),this._cursor.getSpan());this._beginToken(14);let n;if(this._openDirectiveCount>0){let i=0;n=s=>{if(this._openDirectiveCount>0){if(s===An)i++;else if(s===kt){if(i===0)return!0;i--}}return Ns(s)}}else if(e===qr){let i=0;n=s=>(s===qr?i++:s===pi&&i--,i<=0?Ns(s):zf(s))}else n=Ns;let r=this._consumePrefixAndName(n);this._endToken(r)}_consumeAttributeValue(){if(this._cursor.peek()===Uc||this._cursor.peek()===Vc){let e=this._cursor.peek();this._consumeQuote(e);let n=()=>this._cursor.peek()===e;this._consumeWithInterpolation(16,17,n,n),this._consumeQuote(e)}else{let e=()=>Ns(this._cursor.peek());this._consumeWithInterpolation(16,17,e,e)}}_consumeQuote(e){this._beginToken(15),this._requireCharCode(e),this._endToken([String.fromCodePoint(e)])}_consumeTagOpenEnd(){let e=this._attemptCharCode(jn)?2:1;this._beginToken(e),this._requireCharCode(qn),this._endToken([])}_consumeComponentOpenEnd(){let e=this._attemptCharCode(jn)?35:34;this._beginToken(e),this._requireCharCode(qn),this._endToken([])}_consumeTagClose(e){if(this._selectorlessEnabled){let r=e.clone();for(;r.peek()!==qn&&!Xd(r.peek());)r.advance();if(Xd(r.peek())){this._beginToken(36,e);let i=this._consumeComponentName();this._attemptCharCodeUntilFn(Ye),this._requireCharCode(qn),this._endToken(i);return}}this._beginToken(3,e),this._attemptCharCodeUntilFn(Ye);let n=this._consumePrefixAndName(Ns);this._attemptCharCodeUntilFn(Ye),this._requireCharCode(qn),this._endToken(n)}_consumeExpansionFormStart(){this._beginToken(19),this._requireCharCode(fr),this._endToken([]),this._expansionCaseStack.push(19),this._beginToken(7);let e=this._readUntil(hn),n=this._processCarriageReturns(e);if(this._i18nNormalizeLineEndingsInICUs)this._endToken([n]);else{let i=this._endToken([e]);n!==e&&this.nonNormalizedIcuExpressions.push(i)}this._requireCharCode(hn),this._attemptCharCodeUntilFn(Ye),this._beginToken(7);let r=this._readUntil(hn);this._endToken([r]),this._requireCharCode(hn),this._attemptCharCodeUntilFn(Ye)}_consumeExpansionCaseStart(){this._beginToken(20);let e=this._readUntil(fr).trim();this._endToken([e]),this._attemptCharCodeUntilFn(Ye),this._beginToken(21),this._requireCharCode(fr),this._endToken([]),this._attemptCharCodeUntilFn(Ye),this._expansionCaseStack.push(21)}_consumeExpansionCaseEnd(){this._beginToken(22),this._requireCharCode(Xt),this._endToken([]),this._attemptCharCodeUntilFn(Ye),this._expansionCaseStack.pop()}_consumeExpansionFormEnd(){this._beginToken(23),this._requireCharCode(Xt),this._endToken([]),this._expansionCaseStack.pop()}_consumeWithInterpolation(e,n,r,i){this._beginToken(e);let s=[];for(;!r();){let o=this._cursor.clone();this._attemptStr(Jl.start)?(this._endToken([this._processCarriageReturns(s.join(""))],o),s.length=0,this._consumeInterpolation(n,o,i),this._beginToken(e)):this._cursor.peek()===jf?(this._endToken([this._processCarriageReturns(s.join(""))]),s.length=0,this._consumeEntity(e),this._beginToken(e)):s.push(this._readChar())}this._inInterpolation=!1,this._endToken([this._processCarriageReturns(s.join(""))])}_consumeInterpolation(e,n,r){let i=[];this._beginToken(e,n),i.push(Jl.start);let s=this._cursor.clone(),o=null,a=!1;for(;this._cursor.peek()!==xt&&(r===null||!r());){let l=this._cursor.clone();if(this._isTagStart()){this._cursor=l,i.push(this._getProcessedChars(s,l)),this._endToken(i);return}if(o===null)if(this._attemptStr(Jl.end)){i.push(this._getProcessedChars(s,l)),i.push(Jl.end),this._endToken(i);return}else this._attemptStr("//")&&(a=!0);let c=this._cursor.peek();this._cursor.advance(),c===js?this._cursor.advance():c===o?o=null:!a&&o===null&&sc(c)&&(o=c)}i.push(this._getProcessedChars(s,this._cursor)),this._endToken(i)}_consumeDirective(e,n){for(this._requireCharCode(ra),this._cursor.advance();vb(this._cursor.peek());)this._cursor.advance();this._beginToken(38,e);let r=this._cursor.getChars(n);if(this._endToken([r]),this._attemptCharCodeUntilFn(Ye),this._cursor.peek()===An){for(this._openDirectiveCount++,this._beginToken(39),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Ye);!yb(this._cursor.peek())&&this._cursor.peek()!==kt;)this._consumeAttribute();if(this._attemptCharCodeUntilFn(Ye),this._openDirectiveCount--,this._cursor.peek()!==kt){if(this._cursor.peek()===qn||this._cursor.peek()===jn)return;throw this._createError(oa(this._cursor.peek()),this._cursor.getSpan(e))}this._beginToken(40),this._cursor.advance(),this._endToken([]),this._attemptCharCodeUntilFn(Ye)}}_getProcessedChars(e,n){return this._processCarriageReturns(n.getChars(e))}_isTextEnd(){return!!(this._isTagStart()||this._cursor.peek()===xt||this._tokenizeIcu&&!this._inInterpolation&&(this.isExpansionFormStart()||this._cursor.peek()===Xt&&this._isInExpansionCase())||this._tokenizeBlocks&&!this._inInterpolation&&!this._isInExpansion()&&(this._isBlockStart()||this._isLetStart()||this._cursor.peek()===Xt))}_isTagStart(){if(this._cursor.peek()===ya){let e=this._cursor.clone();e.advance();let n=e.peek();if(so<=n&&n<=cu||ss<=n&&n<=Va||n===jn||n===Qv)return!0}return!1}_readUntil(e){let n=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(n)}_isInExpansion(){return this._isInExpansionCase()||this._isInExpansionForm()}_isInExpansionCase(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===21}_isInExpansionForm(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===19}isExpansionFormStart(){if(this._cursor.peek()!==fr)return!1;let e=this._cursor.clone(),n=this._attemptStr(Jl.start);return this._cursor=e,!n}};function Ye(t){return!$c(t)||t===xt}function Ns(t){return $c(t)||t===qn||t===ya||t===jn||t===Uc||t===Vc||t===Ut||t===xt}function UL(t){return(t<so||cu<t)&&(t<ss||Va<t)&&(t<h0||t>Px)}function $L(t){return t===xn||t===xt||!sP(t)}function HL(t){return t===xn||t===xt||!es(t)}function qL(t){return t!==Xt}function GL(t,e){return mb(t)===mb(e)}function mb(t){return t>=so&&t<=cu?t-so+ss:t}function jL(t){return es(t)||dr(t)||t===os}function gb(t){return t!==xn&&Ye(t)}function Xd(t){return t===os||t>=ss&&t<=Va}function vb(t){return es(t)||dr(t)||t===os}function yb(t){return t===jn||t===qn||t===ya||t===xt}function WL(t){let e=[],n;for(let r=0;r<t.length;r++){let i=t[r];n&&n.type===5&&i.type===5||n&&n.type===16&&i.type===16?(n.parts[0]+=i.parts[0],n.sourceSpan.end=i.sourceSpan.end):(n=i,e.push(n))}return e}var uh=class t{state;file;input;end;constructor(e,n){if(e instanceof t){this.file=e.file,this.input=e.input,this.end=e.end;let r=e.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!n)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=e,this.input=e.content,this.end=n.endPos,this.state={peek:-1,offset:n.startPos,line:n.startLine,column:n.startCol}}}clone(){return new t(this)}peek(){return this.state.peek}charsLeft(){return this.end-this.state.offset}diff(e){return this.state.offset-e.state.offset}advance(){this.advanceState(this.state)}init(){this.updatePeek(this.state)}getSpan(e,n){e=e||this;let r=e;if(n)for(;this.diff(e)>0&&n.indexOf(e.peek())!==-1;)r===e&&(e=e.clone()),e.advance();let i=this.locationFromCursor(e),s=this.locationFromCursor(this),o=r!==e?this.locationFromCursor(r):i;return new Z(i,s,o)}getChars(e){return this.input.substring(e.state.offset,this.state.offset)}charAt(e){return this.input.charCodeAt(e)}advanceState(e){if(e.offset>=this.end)throw this.state=e,new eu('Unexpected character "EOF"',this);let n=this.charAt(e.offset);n===Gs?(e.line++,e.column=0):zf(n)||e.column++,e.offset++,this.updatePeek(e)}updatePeek(e){e.peek=e.offset>=this.end?xt:this.charAt(e.offset)}locationFromCursor(e){return new Hc(e.file,e.state.offset,e.state.line,e.state.column)}},Ey=class t extends uh{internalState;constructor(e,n){e instanceof t?(super(e),this.internalState=A({},e.internalState)):(super(e,n),this.internalState=this.state)}advance(){this.state=this.internalState,super.advance(),this.processEscapeSequence()}init(){super.init(),this.processEscapeSequence()}clone(){return new t(this)}getChars(e){let n=e.clone(),r="";for(;n.internalState.offset<this.internalState.offset;)r+=String.fromCodePoint(n.peek()),n.advance();return r}processEscapeSequence(){let e=()=>this.internalState.peek;if(e()===js)if(this.internalState=A({},this.state),this.advanceState(this.internalState),e()===Lx)this.state.peek=Gs;else if(e()===Ox)this.state.peek=f0;else if(e()===Vx)this.state.peek=Dx;else if(e()===Fx)this.state.peek=d0;else if(e()===rP)this.state.peek=KR;else if(e()===p0)this.state.peek=kx;else if(e()===Bx)if(this.advanceState(this.internalState),e()===fr){this.advanceState(this.internalState);let n=this.clone(),r=0;for(;e()!==Xt;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(n,r)}else{let n=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(n,4)}else if(e()===Ux){this.advanceState(this.internalState);let n=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(n,2)}else if(zS(e())){let n="",r=0,i=this.clone();for(;zS(e())&&r<3;)i=this.clone(),n+=String.fromCodePoint(e()),this.advanceState(this.internalState),r++;this.state.peek=parseInt(n,8),this.internalState=i.internalState}else zf(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}decodeHexDigits(e,n){let r=this.input.slice(e.internalState.offset,e.internalState.offset+n),i=parseInt(r,16);if(isNaN(i))throw e.state=e.internalState,new eu("Invalid hexadecimal escape sequence",e);return i}},eu=class extends Error{msg;cursor;constructor(e,n){super(e),this.msg=e,this.cursor=n,Object.setPrototypeOf(this,new.target.prototype)}},dt=class t extends K{elementName;static create(e,n,r){return new t(e,n,r)}constructor(e,n,r){super(n,r),this.elementName=e}},dh=class{rootNodes;errors;constructor(e,n){this.rootNodes=e,this.errors=n}},zL=class{getTagDefinition;constructor(e){this.getTagDefinition=e}parse(e,n,r){let i=OL(e,n,this.getTagDefinition,r),s=new _y(i.tokens,this.getTagDefinition);return s.build(),new dh(s.rootNodes,[...i.errors,...s.errors])}},_y=class t{tokens;tagDefinitionResolver;_index=-1;_peek;_containerStack=[];rootNodes=[];errors=[];constructor(e,n){this.tokens=e,this.tagDefinitionResolver=n,this._advance()}build(){for(;this._peek.type!==41;)this._peek.type===0||this._peek.type===4?this._consumeElementStartTag(this._advance()):this._peek.type===3?this._consumeElementEndTag(this._advance()):this._peek.type===12?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===10?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===5||this._peek.type===7||this._peek.type===6?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===19?this._consumeExpansion(this._advance()):this._peek.type===24?(this._closeVoidElement(),this._consumeBlockOpen(this._advance())):this._peek.type===26?(this._closeVoidElement(),this._consumeBlockClose(this._advance())):this._peek.type===28?(this._closeVoidElement(),this._consumeIncompleteBlock(this._advance())):this._peek.type===29?(this._closeVoidElement(),this._consumeLet(this._advance())):this._peek.type===32?(this._closeVoidElement(),this._consumeIncompleteLet(this._advance())):this._peek.type===33||this._peek.type===37?this._consumeComponentStartTag(this._advance()):this._peek.type===36?this._consumeComponentEndTag(this._advance()):this._advance();for(let e of this._containerStack)e instanceof Wn&&this.errors.push(dt.create(e.name,e.sourceSpan,`Unclosed block "${e.name}"`))}_advance(){let e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}_advanceIf(e){return this._peek.type===e?this._advance():null}_consumeCdata(e){this._consumeText(this._advance()),this._advanceIf(13)}_consumeComment(e){let n=this._advanceIf(7),r=this._advanceIf(11),i=n!=null?n.parts[0].trim():null,s=r==null?e.sourceSpan:new Z(e.sourceSpan.start,r.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Xc(i,s))}_consumeExpansion(e){let n=this._advance(),r=this._advance(),i=[];for(;this._peek.type===20;){let o=this._parseExpansionCase();if(!o)return;i.push(o)}if(this._peek.type!==23){this.errors.push(dt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));return}let s=new Z(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Ws(n.parts[0],r.parts[0],i,s,n.sourceSpan)),this._advance()}_parseExpansionCase(){let e=this._advance();if(this._peek.type!==21)return this.errors.push(dt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;let n=this._advance(),r=this._collectExpansionExpTokens(n);if(!r)return null;let i=this._advance();r.push({type:41,parts:[],sourceSpan:i.sourceSpan});let s=new t(r,this.tagDefinitionResolver);if(s.build(),s.errors.length>0)return this.errors=this.errors.concat(s.errors),null;let o=new Z(e.sourceSpan.start,i.sourceSpan.end,e.sourceSpan.fullStart),a=new Z(n.sourceSpan.start,i.sourceSpan.end,n.sourceSpan.fullStart);return new ah(e.parts[0],s.rootNodes,o,e.sourceSpan,a)}_collectExpansionExpTokens(e){let n=[],r=[21];for(;;){if((this._peek.type===19||this._peek.type===21)&&r.push(this._peek.type),this._peek.type===22)if(wb(r,21)){if(r.pop(),r.length===0)return n}else return this.errors.push(dt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===23)if(wb(r,19))r.pop();else return this.errors.push(dt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(this._peek.type===41)return this.errors.push(dt.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.push(this._advance())}}_consumeText(e){let n=[e],r=e.sourceSpan,i=e.parts[0];if(i.length>0&&i[0]===`
`){let s=this._getContainer();s!=null&&s.children.length===0&&this._getTagDefinition(s)?.ignoreFirstLf&&(i=i.substring(1),n[0]={type:e.type,sourceSpan:e.sourceSpan,parts:[i]})}for(;this._peek.type===8||this._peek.type===5||this._peek.type===9;)e=this._advance(),n.push(e),e.type===8?i+=e.parts.join("").replace(/&([^;]+);/g,Eb):e.type===9?i+=e.parts[0]:i+=e.parts.join("");if(i.length>0){let s=e.sourceSpan;this._addToParent(new uo(i,new Z(r.start,s.end,r.fullStart,r.details),n))}}_closeVoidElement(){let e=this._getContainer();e!==null&&this._getTagDefinition(e)?.isVoid&&this._containerStack.pop()}_consumeElementStartTag(e){let n=[],r=[];this._consumeAttributesAndDirectives(n,r);let i=this._getElementFullName(e,this._getClosestElementLikeParent()),s=this._getTagDefinition(i),o=!1;this._peek.type===2?(this._advance(),o=!0,s?.canSelfClose||$v(i)!==null||s?.isVoid||this.errors.push(dt.create(i,e.sourceSpan,`Only void, custom and foreign elements can be self closed "${e.parts[1]}"`))):this._peek.type===1&&(this._advance(),o=!1);let a=this._peek.sourceSpan.fullStart,l=new Z(e.sourceSpan.start,a,e.sourceSpan.fullStart),c=new Z(e.sourceSpan.start,a,e.sourceSpan.fullStart),u=new Gn(i,n,r,[],o,l,c,void 0,s?.isVoid??!1),h=this._getContainer(),p=h!==null&&!!this._getTagDefinition(h)?.isClosedByChild(u.name);this._pushContainer(u,p),o?this._popContainer(i,Gn,l):e.type===4&&(this._popContainer(i,Gn,null),this.errors.push(dt.create(i,l,`Opening tag "${i}" not terminated.`)))}_consumeComponentStartTag(e){let n=e.parts[0],r=[],i=[];this._consumeAttributesAndDirectives(r,i);let s=this._getClosestElementLikeParent(),o=this._getComponentTagName(e,s),a=this._getComponentFullName(e,s),l=this._peek.type===35;this._advance();let c=this._peek.sourceSpan.fullStart,u=new Z(e.sourceSpan.start,c,e.sourceSpan.fullStart),h=new Z(e.sourceSpan.start,c,e.sourceSpan.fullStart),p=new un(n,o,a,r,i,[],l,u,h,void 0),m=this._getContainer(),g=m!==null&&p.tagName!==null&&!!this._getTagDefinition(m)?.isClosedByChild(p.tagName);this._pushContainer(p,g),l?this._popContainer(a,un,u):e.type===37&&(this._popContainer(a,un,null),this.errors.push(dt.create(a,u,`Opening tag "${a}" not terminated.`)))}_consumeAttributesAndDirectives(e,n){for(;this._peek.type===14||this._peek.type===38;)this._peek.type===38?n.push(this._consumeDirective(this._peek)):e.push(this._consumeAttr(this._advance()))}_consumeComponentEndTag(e){let n=this._getComponentFullName(e,this._getClosestElementLikeParent());if(!this._popContainer(n,un,e.sourceSpan)){let r=this._containerStack[this._containerStack.length-1],i;r instanceof un&&r.componentName===e.parts[0]?i=`, did you mean "${r.fullName}"?`:i=". It may happen when the tag has already been closed by another tag.";let s=`Unexpected closing tag "${n}"${i}`;this.errors.push(dt.create(n,e.sourceSpan,s))}}_getTagDefinition(e){return typeof e=="string"?this.tagDefinitionResolver(e):e instanceof Gn?this.tagDefinitionResolver(e.name):e instanceof un&&e.tagName!==null?this.tagDefinitionResolver(e.tagName):null}_pushContainer(e,n){n&&this._containerStack.pop(),this._addToParent(e),this._containerStack.push(e)}_consumeElementEndTag(e){let n=this._getElementFullName(e,this._getClosestElementLikeParent());if(this._getTagDefinition(n)?.isVoid)this.errors.push(dt.create(n,e.sourceSpan,`Void elements do not have end tags "${e.parts[1]}"`));else if(!this._popContainer(n,Gn,e.sourceSpan)){let r=`Unexpected closing tag "${n}". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags`;this.errors.push(dt.create(n,e.sourceSpan,r))}}_popContainer(e,n,r){let i=!1;for(let s=this._containerStack.length-1;s>=0;s--){let o=this._containerStack[s];if(((o instanceof un?o.fullName:o.name)===e||e===null)&&o instanceof n)return o.endSourceSpan=r,o.sourceSpan.end=r!==null?r.end:o.sourceSpan.end,this._containerStack.splice(s,this._containerStack.length-s),!i;(o instanceof Wn||!this._getTagDefinition(o)?.closedByParent)&&(i=!0)}return!1}_consumeAttr(e){let n=ff(e.parts[0],e.parts[1]),r=e.sourceSpan.end;this._peek.type===15&&this._advance();let i="",s=[],o,a;if(this._peek.type===16)for(o=this._peek.sourceSpan,a=this._peek.sourceSpan.end;this._peek.type===16||this._peek.type===17||this._peek.type===9;){let u=this._advance();s.push(u),u.type===17?i+=u.parts.join("").replace(/&([^;]+);/g,Eb):u.type===9?i+=u.parts[0]:i+=u.parts.join(""),a=r=u.sourceSpan.end}this._peek.type===15&&(r=this._advance().sourceSpan.end);let c=o&&a&&new Z(o.start,a,o.fullStart);return new my(n,i,new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),e.sourceSpan,c,s.length>0?s:void 0,void 0)}_consumeDirective(e){let n=[],r=e.sourceSpan.end,i=null;if(this._advance(),this._peek.type===39){for(r=this._peek.sourceSpan.end,this._advance();this._peek.type===14;)n.push(this._consumeAttr(this._advance()));this._peek.type===40?(i=this._peek.sourceSpan,this._advance()):this.errors.push(dt.create(null,e.sourceSpan,"Unterminated directive definition"))}let s=new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new Z(s.start,i===null?e.sourceSpan.end:i.end,s.fullStart);return new gy(e.parts[0],n,o,s,i)}_consumeBlockOpen(e){let n=[];for(;this._peek.type===27;){let a=this._advance();n.push(new lh(a.parts[0],a.sourceSpan))}this._peek.type===25&&this._advance();let r=this._peek.sourceSpan.fullStart,i=new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new Wn(e.parts[0],n,[],i,e.sourceSpan,s);this._pushContainer(o,!1)}_consumeBlockClose(e){this._popContainer(null,Wn,e.sourceSpan)||this.errors.push(dt.create(null,e.sourceSpan,'Unexpected closing block. The block may have been closed earlier. If you meant to write the } character, you should use the "&#125;" HTML entity instead.'))}_consumeIncompleteBlock(e){let n=[];for(;this._peek.type===27;){let a=this._advance();n.push(new lh(a.parts[0],a.sourceSpan))}let r=this._peek.sourceSpan.fullStart,i=new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),s=new Z(e.sourceSpan.start,r,e.sourceSpan.fullStart),o=new Wn(e.parts[0],n,[],i,e.sourceSpan,s);this._pushContainer(o,!1),this._popContainer(null,Wn,null),this.errors.push(dt.create(e.parts[0],i,`Incomplete block "${e.parts[0]}". If you meant to write the @ character, you should use the "&#64;" HTML entity instead.`))}_consumeLet(e){let n=e.parts[0],r,i;if(this._peek.type!==30){this.errors.push(dt.create(e.parts[0],e.sourceSpan,`Invalid @let declaration "${n}". Declaration must have a value.`));return}else r=this._advance();if(this._peek.type!==31){this.errors.push(dt.create(e.parts[0],e.sourceSpan,`Unterminated @let declaration "${n}". Declaration must be terminated with a semicolon.`));return}else i=this._advance();let s=i.sourceSpan.fullStart,o=new Z(e.sourceSpan.start,s,e.sourceSpan.fullStart),a=e.sourceSpan.toString().lastIndexOf(n),l=e.sourceSpan.start.moveBy(a),c=new Z(l,e.sourceSpan.end),u=new ch(n,r.parts[0],o,c,r.sourceSpan);this._addToParent(u)}_consumeIncompleteLet(e){let n=e.parts[0]??"",r=n?` "${n}"`:"";if(n.length>0){let i=e.sourceSpan.toString().lastIndexOf(n),s=e.sourceSpan.start.moveBy(i),o=new Z(s,e.sourceSpan.end),a=new Z(e.sourceSpan.start,e.sourceSpan.start.moveBy(0)),l=new ch(n,"",e.sourceSpan,o,a);this._addToParent(l)}this.errors.push(dt.create(e.parts[0],e.sourceSpan,`Incomplete @let declaration${r}. @let declarations must be written as \`@let <name> = <value>;\``))}_getContainer(){return this._containerStack.length>0?this._containerStack[this._containerStack.length-1]:null}_getClosestElementLikeParent(){for(let e=this._containerStack.length-1;e>-1;e--){let n=this._containerStack[e];if(n instanceof Gn||n instanceof un)return n}return null}_addToParent(e){let n=this._getContainer();n===null?this.rootNodes.push(e):n.children.push(e)}_getElementFullName(e,n){let r=this._getPrefix(e,n);return ff(r,e.parts[1])}_getComponentFullName(e,n){let r=e.parts[0],i=this._getComponentTagName(e,n);return i===null?r:i.startsWith(":")?r+i:`${r}:${i}`}_getComponentTagName(e,n){let r=this._getPrefix(e,n),i=e.parts[2];return!r&&!i?null:!r&&i?i:ff(r,i||"ng-component")}_getPrefix(e,n){let r,i;if(e.type===33||e.type===37||e.type===36?(r=e.parts[1],i=e.parts[2]):(r=e.parts[0],i=e.parts[1]),r=r||this._getTagDefinition(i)?.implicitNamespacePrefix||"",!r&&n){let s=n instanceof Gn?n.name:n.tagName;if(s!==null){let o=vr(s)[1],a=this._getTagDefinition(o);a!==null&&!a.preventNamespaceInheritance&&(r=$v(s))}}return r}};function wb(t,e){return t.length>0&&t[t.length-1]===e}function Eb(t,e){return Zc[e]!==void 0?Zc[e]||t:/^#x[a-f0-9]+$/i.test(e)?String.fromCodePoint(parseInt(e.slice(2),16)):/^#\d+$/.test(e)?String.fromCodePoint(parseInt(e.slice(1),10)):t}var uT="ngPreserveWhitespaces",_b=new Set(["pre","template","textarea","script","style"]),dT=` \f
\r	\v\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,JL=new RegExp(`[^${dT}]`),YL=new RegExp(`[${dT}]{2,}`,"g");function Cb(t){return t.some(e=>e.name===uT)}function fT(t){return t.replace(new RegExp(cT,"g")," ")}var fh=class{preserveSignificantWhitespace;originalNodeMap;requireContext;icuExpansionDepth=0;constructor(e,n,r=!0){this.preserveSignificantWhitespace=e,this.originalNodeMap=n,this.requireContext=r}visitElement(e,n){if(_b.has(e.name)||Cb(e.attrs)){let i=new Gn(e.name,Or(this,e.attrs),Or(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new Gn(e.name,e.attrs,e.directives,Or(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n);return this.originalNodeMap?.set(r,e),r}visitAttribute(e,n){return e.name!==uT?e:null}visitText(e,n){let r=e.value.match(JL),i=n&&(n.prev instanceof Ws||n.next instanceof Ws);if(this.icuExpansionDepth>0&&this.preserveSignificantWhitespace)return e;if(r||i){let o=e.tokens.map(u=>u.type===5?ZL(u):u);if(!this.preserveSignificantWhitespace&&o.length>0){let u=o[0];o.splice(0,1,KL(u,n));let h=o[o.length-1];o.splice(o.length-1,1,QL(h,n))}let a=pT(e.value),l=this.preserveSignificantWhitespace?a:XL(a,n),c=new uo(l,e.sourceSpan,o,e.i18n);return this.originalNodeMap?.set(c,e),c}return null}visitComment(e,n){return e}visitExpansion(e,n){this.icuExpansionDepth++;let r;try{r=new Ws(e.switchValue,e.type,Or(this,e.cases),e.sourceSpan,e.switchValueSourceSpan,e.i18n)}finally{this.icuExpansionDepth--}return this.originalNodeMap?.set(r,e),r}visitExpansionCase(e,n){let r=new ah(e.value,Or(this,e.expression),e.sourceSpan,e.valueSourceSpan,e.expSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlock(e,n){let r=new Wn(e.name,e.parameters,Or(this,e.children),e.sourceSpan,e.nameSpan,e.startSourceSpan,e.endSourceSpan);return this.originalNodeMap?.set(r,e),r}visitBlockParameter(e,n){return e}visitLetDeclaration(e,n){return e}visitComponent(e,n){if(e.tagName&&_b.has(e.tagName)||Cb(e.attrs)){let i=new un(e.componentName,e.tagName,e.fullName,Or(this,e.attrs),Or(this,e.directives),e.children,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(i,e),i}let r=new un(e.componentName,e.tagName,e.fullName,e.attrs,e.directives,Or(this,e.children),e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return this.originalNodeMap?.set(r,e),r}visitDirective(e,n){return e}visit(e,n){if(this.requireContext&&!n)throw new Error("WhitespaceVisitor requires context. Visit via `visitAllWithSiblings` to get this context.");return!1}};function KL(t,e){return t.type!==5||!!e?.prev?t:hT(t,r=>r.trimStart())}function QL(t,e){return t.type!==5||!!e?.next?t:hT(t,r=>r.trimEnd())}function XL(t,e){let n=!e?.prev,r=!e?.next,i=n?t.trimStart():t;return r?i.trimEnd():i}function ZL({type:t,parts:e,sourceSpan:n}){return{type:t,parts:[pT(e[0])],sourceSpan:n}}function hT({type:t,parts:e,sourceSpan:n},r){return{type:t,parts:[r(e[0])],sourceSpan:n}}function pT(t){return fT(t).replace(YL," ")}function Or(t,e){let n=[];return e.forEach((r,i)=>{let s={prev:e[i-1],next:e[i+1]},o=r.visit(t,s);o&&n.push(o)}),n}var X=(function(t){return t[t.Character=0]="Character",t[t.Identifier=1]="Identifier",t[t.PrivateIdentifier=2]="PrivateIdentifier",t[t.Keyword=3]="Keyword",t[t.String=4]="String",t[t.Operator=5]="Operator",t[t.Number=6]="Number",t[t.RegExpBody=7]="RegExpBody",t[t.RegExpFlags=8]="RegExpFlags",t[t.Error=9]="Error",t})(X||{}),zs=(function(t){return t[t.Plain=0]="Plain",t[t.TemplateLiteralPart=1]="TemplateLiteralPart",t[t.TemplateLiteralEnd=2]="TemplateLiteralEnd",t})(zs||{}),eO=["var","let","as","null","undefined","true","false","if","else","this","typeof","void","in"],tu=class{tokenize(e){return new Cy(e).scan()}},Pn=class{index;end;type;numValue;strValue;constructor(e,n,r,i,s){this.index=e,this.end=n,this.type=r,this.numValue=i,this.strValue=s}isCharacter(e){return this.type===X.Character&&this.numValue===e}isNumber(){return this.type===X.Number}isString(){return this.type===X.String}isOperator(e){return this.type===X.Operator&&this.strValue===e}isIdentifier(){return this.type===X.Identifier}isPrivateIdentifier(){return this.type===X.PrivateIdentifier}isKeyword(){return this.type===X.Keyword}isKeywordLet(){return this.type===X.Keyword&&this.strValue==="let"}isKeywordAs(){return this.type===X.Keyword&&this.strValue==="as"}isKeywordNull(){return this.type===X.Keyword&&this.strValue==="null"}isKeywordUndefined(){return this.type===X.Keyword&&this.strValue==="undefined"}isKeywordTrue(){return this.type===X.Keyword&&this.strValue==="true"}isKeywordFalse(){return this.type===X.Keyword&&this.strValue==="false"}isKeywordThis(){return this.type===X.Keyword&&this.strValue==="this"}isKeywordTypeof(){return this.type===X.Keyword&&this.strValue==="typeof"}isKeywordVoid(){return this.type===X.Keyword&&this.strValue==="void"}isKeywordIn(){return this.type===X.Keyword&&this.strValue==="in"}isError(){return this.type===X.Error}isRegExpBody(){return this.type===X.RegExpBody}isRegExpFlags(){return this.type===X.RegExpFlags}toNumber(){return this.type===X.Number?this.numValue:-1}isTemplateLiteralPart(){return this.isString()&&this.kind===zs.TemplateLiteralPart}isTemplateLiteralEnd(){return this.isString()&&this.kind===zs.TemplateLiteralEnd}isTemplateLiteralInterpolationStart(){return this.isOperator("${")}toString(){switch(this.type){case X.Character:case X.Identifier:case X.Keyword:case X.Operator:case X.PrivateIdentifier:case X.String:case X.Error:case X.RegExpBody:case X.RegExpFlags:return this.strValue;case X.Number:return this.numValue.toString();default:return null}}},oc=class extends Pn{kind;constructor(e,n,r,i){super(e,n,X.String,0,r),this.kind=i}};function Yl(t,e,n){return new Pn(t,e,X.Character,n,String.fromCharCode(n))}function tO(t,e,n){return new Pn(t,e,X.Identifier,0,n)}function nO(t,e,n){return new Pn(t,e,X.PrivateIdentifier,0,n)}function rO(t,e,n){return new Pn(t,e,X.Keyword,0,n)}function aa(t,e,n){return new Pn(t,e,X.Operator,0,n)}function iO(t,e,n){return new Pn(t,e,X.Number,n,"")}function sO(t,e,n){return new Pn(t,e,X.Error,0,n)}function oO(t,e,n){return new Pn(t,e,X.RegExpBody,0,n)}function aO(t,e,n){return new Pn(t,e,X.RegExpFlags,0,n)}var Zd=new Pn(-1,-1,X.Character,0,""),Cy=class{input;tokens=[];length;peek=0;index=-1;braceStack=[];constructor(e){this.input=e,this.length=e.length,this.advance()}scan(){let e=this.scanToken();for(;e!==null;)this.tokens.push(e),e=this.scanToken();return this.tokens}advance(){this.peek=++this.index>=this.length?xt:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,n=this.length,r=this.peek,i=this.index;for(;r<=Nx;)if(++i>=n){r=xt;break}else r=e.charCodeAt(i);if(this.peek=r,this.index=i,i>=n)return null;if(Sb(r))return this.scanIdentifier();if(dr(r))return this.scanNumber(i);let s=i;switch(r){case Ms:return this.advance(),dr(this.peek)?this.scanNumber(s):this.peek!==Ms?Yl(s,this.index,Ms):(this.advance(),this.peek===Ms?(this.advance(),aa(s,this.index,"...")):this.error(`Unexpected character [${String.fromCharCode(r)}]`,0));case An:case kt:case qr:case pi:case hn:case Ur:case xn:return this.scanCharacter(s,r);case fr:return this.scanOpenBrace(s,r);case Xt:return this.scanCloseBrace(s,r);case Uc:case Vc:return this.scanString();case Xv:return this.advance(),this.scanTemplateLiteralPart(s);case Mx:return this.scanPrivateIdentifier();case Rx:return this.scanComplexOperator(s,"+",Ut,"=");case Wf:return this.scanComplexOperator(s,"-",Ut,"=");case jn:return this.isStartOfRegex()?this.scanRegex(i):this.scanComplexOperator(s,"/",Ut,"=");case QR:return this.scanComplexOperator(s,"%",Ut,"=");case nP:return this.scanOperator(s,"^");case GS:return this.scanStar(s);case jS:return this.scanQuestion(s);case ya:case qn:return this.scanComplexOperator(s,String.fromCharCode(r),Ut,"=");case Qv:case Ut:return this.scanComplexOperator(s,String.fromCharCode(r),Ut,"=",Ut,"=");case jf:return this.scanComplexOperator(s,"&",jf,"&",Ut,"=");case WS:return this.scanComplexOperator(s,"|",WS,"|",Ut,"=");case $x:for(;$c(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(r)}]`,0)}scanCharacter(e,n){return this.advance(),Yl(e,this.index,n)}scanOperator(e,n){return this.advance(),aa(e,this.index,n)}scanOpenBrace(e,n){return this.braceStack.push("expression"),this.advance(),Yl(e,this.index,n)}scanCloseBrace(e,n){return this.advance(),this.braceStack.pop()==="interpolation"?(this.tokens.push(Yl(e,this.index,Xt)),this.scanTemplateLiteralPart(this.index)):Yl(e,this.index,n)}scanComplexOperator(e,n,r,i,s,o){this.advance();let a=n;return this.peek==r&&(this.advance(),a+=i),s!=null&&this.peek==s&&(this.advance(),a+=o),aa(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();bb(this.peek);)this.advance();let n=this.input.substring(e,this.index);return eO.indexOf(n)>-1?rO(e,this.index,n):tO(e,this.index,n)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!Sb(this.peek))return this.error("Invalid character [#]",-1);for(;bb(this.peek);)this.advance();let n=this.input.substring(e,this.index);return nO(e,this.index,n)}scanNumber(e){let n=this.index===e,r=!1;for(this.advance();;){if(!dr(this.peek))if(this.peek===os){if(!dr(this.input.charCodeAt(this.index-1))||!dr(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);r=!0}else if(this.peek===Ms)n=!1;else if(lO(this.peek)){if(this.advance(),cO(this.peek)&&this.advance(),!dr(this.peek))return this.error("Invalid exponent",-1);n=!1}else break;this.advance()}let i=this.input.substring(e,this.index);r&&(i=i.replace(/_/g,""));let s=n?dO(i):parseFloat(i);return iO(e,this.index,s)}scanString(){let e=this.index,n=this.peek;this.advance();let r="",i=this.index,s=this.input;for(;this.peek!=n;)if(this.peek==js){let a=this.scanStringBackslash(r,i);if(typeof a!="string")return a;r=a,i=this.index}else{if(this.peek==xt)return this.error("Unterminated quote",0);this.advance()}let o=s.substring(i,this.index);return this.advance(),new oc(e,this.index,r+o,zs.Plain)}scanQuestion(e){this.advance();let n="?";return this.peek===jS?(n+="?",this.advance(),this.peek===Ut&&(n+="=",this.advance())):this.peek===Ms&&(n+=".",this.advance()),aa(e,this.index,n)}scanTemplateLiteralPart(e){let n="",r=this.index;for(;this.peek!==Xv;)if(this.peek===js){let s=this.scanStringBackslash(n,r);if(typeof s!="string")return s;n=s,r=this.index}else if(this.peek===kh){let s=this.index;if(this.advance(),this.peek===fr)return this.braceStack.push("interpolation"),this.tokens.push(new oc(e,s,n+this.input.substring(r,s),zs.TemplateLiteralPart)),this.advance(),aa(s,this.index,this.input.substring(s,this.index))}else{if(this.peek===xt)return this.error("Unterminated template literal",0);this.advance()}let i=this.input.substring(r,this.index);return this.advance(),new oc(e,this.index,n+i,zs.TemplateLiteralEnd)}error(e,n){let r=this.index+n;return sO(r,this.index,`Lexer Error: ${e} at column ${r} in expression [${this.input}]`)}scanStringBackslash(e,n){e+=this.input.substring(n,this.index);let r;if(this.advance(),this.peek===Bx){let i=this.input.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(i))r=parseInt(i,16);else return this.error(`Invalid unicode escape [\\u${i}]`,0);for(let s=0;s<5;s++)this.advance()}else r=uO(this.peek),this.advance();return e+=String.fromCharCode(r),e}scanStar(e){this.advance();let n="*";return this.peek===GS?(n+="*",this.advance(),this.peek===Ut&&(n+="=",this.advance())):this.peek===Ut&&(n+="=",this.advance()),aa(e,this.index,n)}isStartOfRegex(){if(this.tokens.length===0)return!0;let e=this.tokens[this.tokens.length-1];if(e.isOperator("!")){let n=this.tokens.length>1?this.tokens[this.tokens.length-2]:null;return n===null||n.type!==X.Identifier&&!n.isCharacter(kt)&&!n.isCharacter(pi)}return e.type===X.Operator||e.isCharacter(An)||e.isCharacter(qr)||e.isCharacter(hn)||e.isCharacter(Ur)}scanRegex(e){this.advance();let n=this.index,r=!1,i=!1;for(;;){let l=this.peek;if(l===xt)return this.error("Unterminated regular expression",0);if(r)r=!1;else if(l===js)r=!0;else if(l===qr)i=!0;else if(l===pi)i=!1;else if(l===jn&&!i)break;this.advance()}let s=this.input.substring(n,this.index);this.advance();let o=oO(e,this.index,s),a=this.scanRegexFlags(this.index);return a!==null?(this.tokens.push(o),a):o}scanRegexFlags(e){if(!es(this.peek))return null;for(;es(this.peek);)this.advance();return aO(e,this.index,this.input.substring(e,this.index))}};function Sb(t){return so<=t&&t<=cu||ss<=t&&t<=Va||t==os||t==kh}function bb(t){return es(t)||dr(t)||t==os||t==kh}function lO(t){return t==iP||t==ZR}function cO(t){return t==Wf||t==Rx}function uO(t){switch(t){case Lx:return Gs;case p0:return kx;case Ox:return f0;case Fx:return d0;case Vx:return Dx;default:return t}}function dO(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Sy=class{strings;expressions;offsets;constructor(e,n,r){this.strings=e,this.expressions=n,this.offsets=r}},by=class{templateBindings;warnings;errors;constructor(e,n,r){this.templateBindings=e,this.warnings=n,this.errors=r}};function qi(t){return t.start.toString()||"(unknown)"}var hh=class{_lexer;_supportsDirectPipeReferences;constructor(e,n=!1){this._lexer=e,this._supportsDirectPipeReferences=n}parseAction(e,n,r){let i=[];this._checkNoInterpolation(i,e,n);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s),a=new Fs(e,n,r,o,1,i,0,this._supportsDirectPipeReferences).parseChain();return new fn(a,e,qi(n),r,i)}parseBinding(e,n,r){let i=[],s=this._parseBindingAst(e,n,r,i);return new fn(s,e,qi(n),r,i)}checkSimpleExpression(e){let n=new xy;return e.visit(n),n.errors}parseSimpleBinding(e,n,r){let i=[],s=this._parseBindingAst(e,n,r,i),o=this.checkSimpleExpression(s);return o.length>0&&i.push(ma(`Host binding expression cannot contain ${o.join(" ")}`,e,"",n)),new fn(s,e,qi(n),r,i)}_parseBindingAst(e,n,r,i){this._checkNoInterpolation(i,e,n);let{stripped:s}=this._stripComments(e),o=this._lexer.tokenize(s);return new Fs(e,n,r,o,0,i,0,this._supportsDirectPipeReferences).parseChain()}parseTemplateBindings(e,n,r,i,s){let o=this._lexer.tokenize(n),a=[];return new Fs(n,r,s,o,0,a,0,this._supportsDirectPipeReferences).parseTemplateBindings({source:e,span:new In(i,i+e.length)})}parseInterpolation(e,n,r,i){let s=[],{strings:o,expressions:a,offsets:l}=this.splitInterpolation(e,n,s,i);if(a.length===0)return null;let c=[];for(let u=0;u<a.length;++u){let h=i?.[u*2+1]?.sourceSpan,p=a[u].text,{stripped:m,hasComments:g}=this._stripComments(p),y=this._lexer.tokenize(m);if(g&&m.trim().length===0&&y.length===0){s.push(ma("Interpolation expression cannot only contain a comment",e,`at column ${a[u].start} in`,n));continue}let E=new Fs(h?p:e,h||n,r,y,0,s,l[u],this._supportsDirectPipeReferences).parseChain();c.push(E)}return this.createInterpolationAst(o.map(u=>u.text),c,e,qi(n),r,s)}parseInterpolationExpression(e,n,r){let{stripped:i}=this._stripComments(e),s=this._lexer.tokenize(i),o=[],a=new Fs(e,n,r,s,0,o,0,this._supportsDirectPipeReferences).parseChain(),l=["",""];return this.createInterpolationAst(l,[a],e,qi(n),r,o)}createInterpolationAst(e,n,r,i,s,o){let a=new to(0,r.length),l=new au(a,a.toAbsolute(s),e,n);return new fn(l,r,i,s,o)}splitInterpolation(e,n,r,i){let s=[],o=[],a=[],l=i?fO(i):null,c=0,u=!1,h=!1,p="{{",m="}}";for(;c<e.length;)if(u){let g=c,y=g+p.length,E=this._getInterpolationEndIndex(e,m,y);if(E===-1){u=!1,h=!0;break}let w=E+m.length,I=e.substring(y,E);I.trim().length===0&&r.push(ma("Blank expressions are not allowed in interpolated strings",e,`at column ${c} in`,n)),o.push({text:I,start:g,end:w});let b=(l?.get(g)??g)+p.length;a.push(b),c=w,u=!1}else{let g=c;c=e.indexOf(p,c),c===-1&&(c=e.length);let y=e.substring(g,c);s.push({text:y,start:g,end:c}),u=!0}if(!u)if(h){let g=s[s.length-1];g.text+=e.substring(c),g.end=e.length}else s.push({text:e.substring(c),start:c,end:e.length});return new Sy(s,o,a)}wrapLiteralPrimitive(e,n,r){let i=new to(0,e==null?0:e.length);return new fn(new dn(i,i.toAbsolute(r),e),e,typeof n=="string"?n:qi(n),r,[])}_stripComments(e){let n=this._commentStart(e);return n!=null?{stripped:e.substring(0,n),hasComments:!0}:{stripped:e,hasComments:!1}}_commentStart(e){let n=null;for(let r=0;r<e.length-1;r++){let i=e.charCodeAt(r),s=e.charCodeAt(r+1);if(i===jn&&s==jn&&n==null)return r;n===i?n=null:n==null&&sc(i)&&(n=i)}return null}_checkNoInterpolation(e,n,r){let i=-1,s=-1;for(let o of this._forEachUnquotedChar(n,0))if(i===-1)n.startsWith("{{")&&(i=o);else if(s=this._getInterpolationEndIndex(n,"}}",o),s>-1)break;i>-1&&s>-1&&e.push(ma("Got interpolation ({{}}) where expression was expected",n,`at column ${i} in`,r))}_getInterpolationEndIndex(e,n,r){for(let i of this._forEachUnquotedChar(e,r)){if(e.startsWith(n,i))return i;if(e.startsWith("//",i))return e.indexOf(n,i)}return-1}*_forEachUnquotedChar(e,n){let r=null,i=0;for(let s=n;s<e.length;s++){let o=e[s];sc(e.charCodeAt(s))&&(r===null||r===o)&&i%2===0?r=r===null?o:null:r===null&&(yield s),i=o==="\\"?i+1:0}}},tc=(function(t){return t[t.None=0]="None",t[t.Writable=1]="Writable",t})(tc||{}),xb=new Set(["d","g","i","m","s","u","v","y"]),Fs=class{input;parseSourceSpan;absoluteOffset;tokens;parseFlags;errors;offset;supportsDirectPipeReferences;rparensExpected=0;rbracketsExpected=0;rbracesExpected=0;context=tc.None;sourceSpanCache=new Map;index=0;constructor(e,n,r,i,s,o,a,l){this.input=e,this.parseSourceSpan=n,this.absoluteOffset=r,this.tokens=i,this.parseFlags=s,this.errors=o,this.offset=a,this.supportsDirectPipeReferences=l}peek(e){let n=this.index+e;return n<this.tokens.length?this.tokens[n]:Zd}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,n){let r=this.currentEndIndex;if(n!==void 0&&n>this.currentEndIndex&&(r=n),e>r){let i=r;r=e,e=i}return new to(e,r)}sourceSpan(e,n){let r=`${e}@${this.inputIndex}:${n}`;return this.sourceSpanCache.has(r)||this.sourceSpanCache.set(r,this.span(e,n).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(r)}advance(){this.index++}withContext(e,n){this.context|=e;let r=n();return this.context^=e,r}consumeOptionalCharacter(e){return this.next.isCharacter(e)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return this.next.isOperator(e)?(this.advance(),!0):!1}isAssignmentOperator(e){return e.type===X.Operator&&Qt.isAssignmentOperation(e.strValue)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===Zd?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null):(this.advance(),e.toString())}expectIdentifierOrKeywordOrString(){let e=this.next;return!e.isIdentifier()&&!e.isKeyword()&&!e.isString()?(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),""):(this.advance(),e.toString())}parseChain(){let e=[],n=this.inputIndex;for(;this.index<this.tokens.length;){let r=this.parsePipe();if(e.push(r),this.consumeOptionalCharacter(xn))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(xn););else if(this.index<this.tokens.length){let i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(e.length===0){let r=this.offset,i=this.offset+this.input.length;return new Kt(this.span(r,i),this.sourceSpan(r,i))}return e.length==1?e[0]:new ba(this.span(n),this.sourceSpan(n),e)}parsePipe(){let e=this.inputIndex,n=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let r=this.inputIndex,i=this.expectIdentifierOrKeyword(),s,o;i!==null?s=this.sourceSpan(r):(i="",o=this.next.index!==-1?this.next.index:this.input.length+this.offset,s=new to(o,o).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter(Ur);)a.push(this.parseExpression());let l;if(this.supportsDirectPipeReferences){let c=i.charCodeAt(0);l=c===os||c>=ss&&c<=Va?df.ReferencedDirectly:df.ReferencedByName}else l=df.ReferencedByName;n=new Nf(this.span(e),this.sourceSpan(e,o),n,i,a,l,s)}while(this.consumeOptionalOperator("|"))}return n}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,n=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let r=this.parsePipe(),i;if(this.consumeOptionalCharacter(Ur))i=this.parsePipe();else{let s=this.inputIndex,o=this.input.substring(e,s);this.error(`Conditional expression ${o} requires all 3 expressions`),i=new Kt(this.span(e),this.sourceSpan(e))}return new kf(this.span(e),this.sourceSpan(e),n,r,i)}else return n}parseLogicalOr(){let e=this.inputIndex,n=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let r=this.parseLogicalAnd();n=new Qt(this.span(e),this.sourceSpan(e),"||",n,r)}return n}parseLogicalAnd(){let e=this.inputIndex,n=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let r=this.parseNullishCoalescing();n=new Qt(this.span(e),this.sourceSpan(e),"&&",n,r)}return n}parseNullishCoalescing(){let e=this.inputIndex,n=this.parseEquality();for(;this.consumeOptionalOperator("??");){let r=this.parseEquality();n=new Qt(this.span(e),this.sourceSpan(e),"??",n,r)}return n}parseEquality(){let e=this.inputIndex,n=this.parseRelational();for(;this.next.type==X.Operator;){let r=this.next.strValue;switch(r){case"==":case"===":case"!=":case"!==":this.advance();let i=this.parseRelational();n=new Qt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseRelational(){let e=this.inputIndex,n=this.parseAdditive();for(;this.next.type==X.Operator||this.next.isKeywordIn;){let r=this.next.strValue;switch(r){case"<":case">":case"<=":case">=":case"in":this.advance();let i=this.parseAdditive();n=new Qt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseAdditive(){let e=this.inputIndex,n=this.parseMultiplicative();for(;this.next.type==X.Operator;){let r=this.next.strValue;switch(r){case"+":case"-":this.advance();let i=this.parseMultiplicative();n=new Qt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseMultiplicative(){let e=this.inputIndex,n=this.parseExponentiation();for(;this.next.type==X.Operator;){let r=this.next.strValue;switch(r){case"*":case"%":case"/":this.advance();let i=this.parseExponentiation();n=new Qt(this.span(e),this.sourceSpan(e),r,n,i);continue}break}return n}parseExponentiation(){let e=this.inputIndex,n=this.parsePrefix();for(;this.next.type==X.Operator&&this.next.strValue==="**";){(n instanceof va||n instanceof _c||n instanceof Cc||n instanceof Sc)&&this.error("Unary operator used immediately before exponentiation expression. Parenthesis must be used to disambiguate operator precedence"),this.advance();let r=this.parseExponentiation();n=new Qt(this.span(e),this.sourceSpan(e),"**",n,r)}return n}parsePrefix(){if(this.next.type==X.Operator){let e=this.inputIndex,n=this.next.strValue,r;switch(n){case"+":return this.advance(),r=this.parsePrefix(),va.createPlus(this.span(e),this.sourceSpan(e),r);case"-":return this.advance(),r=this.parsePrefix(),va.createMinus(this.span(e),this.sourceSpan(e),r);case"!":return this.advance(),r=this.parsePrefix(),new _c(this.span(e),this.sourceSpan(e),r)}}else if(this.next.isKeywordTypeof()){let e=this.inputIndex;this.advance();let n=this.parsePrefix();return new Cc(this.span(e),this.sourceSpan(e),n)}else if(this.next.isKeywordVoid()){let e=this.inputIndex;this.advance();let n=this.parsePrefix();return new Sc(this.span(e),this.sourceSpan(e),n)}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,n=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(Ms))n=this.parseAccessMember(n,e,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(An)?n=this.parseCall(n,e,!0):n=this.consumeOptionalCharacter(qr)?this.parseKeyedReadOrWrite(n,e,!0):this.parseAccessMember(n,e,!0);else if(this.consumeOptionalCharacter(qr))n=this.parseKeyedReadOrWrite(n,e,!1);else if(this.consumeOptionalCharacter(An))n=this.parseCall(n,e,!1);else if(this.consumeOptionalOperator("!"))n=new bc(this.span(e),this.sourceSpan(e),n);else if(this.next.isTemplateLiteralEnd())n=this.parseNoInterpolationTaggedTemplateLiteral(n,e);else if(this.next.isTemplateLiteralPart())n=this.parseTaggedTemplateLiteral(n,e);else return n}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(An)){this.rparensExpected++;let n=this.parsePipe();return this.consumeOptionalCharacter(kt)||(this.error("Missing closing parentheses"),this.consumeOptionalCharacter(kt)),this.rparensExpected--,new Ic(this.span(e),this.sourceSpan(e),n)}else{if(this.next.isKeywordNull())return this.advance(),new dn(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new dn(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new dn(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new dn(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordIn())return this.advance(),new dn(this.span(e),this.sourceSpan(e),"in");if(this.next.isKeywordThis())return this.advance(),new vc(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(qr))return this.parseLiteralArray(e);if(this.next.isCharacter(fr))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new Yr(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let n=this.next.toNumber();return this.advance(),new dn(this.span(e),this.sourceSpan(e),n)}else{if(this.next.isTemplateLiteralEnd())return this.parseNoInterpolationTemplateLiteral();if(this.next.isTemplateLiteralPart())return this.parseTemplateLiteral();if(this.next.isString()&&this.next.kind===zs.Plain){let n=this.next.toString();return this.advance(),new dn(this.span(e),this.sourceSpan(e),n)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new Kt(this.span(e),this.sourceSpan(e))):this.next.isRegExpBody()?this.parseRegularExpressionLiteral():this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new Kt(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new Kt(this.span(e),this.sourceSpan(e)))}}}parseLiteralArray(e){this.rbracketsExpected++;let n=[];do if(this.next.isOperator("..."))n.push(this.parseSpreadElement());else if(!this.next.isCharacter(pi))n.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(hn));return this.rbracketsExpected--,this.expectCharacter(pi),new Ec(this.span(e),this.sourceSpan(e),n)}parseLiteralMap(){let e=[],n=[],r=this.inputIndex;if(this.expectCharacter(fr),!this.consumeOptionalCharacter(Xt)){this.rbracesExpected++;do{let i=this.inputIndex;if(this.next.isOperator("...")){this.advance(),e.push({kind:"spread",span:this.span(i),sourceSpan:this.sourceSpan(i)}),n.push(this.parsePipe());continue}let s=this.next.isString(),o=this.expectIdentifierOrKeywordOrString(),a=this.span(i),l=this.sourceSpan(i),c={kind:"property",key:o,quoted:s,span:a,sourceSpan:l};e.push(c),s?(this.expectCharacter(Ur),n.push(this.parsePipe())):this.consumeOptionalCharacter(Ur)?n.push(this.parsePipe()):(c.isShorthandInitialized=!0,n.push(new Hr(a,l,l,new Yr(a,l),o)))}while(this.consumeOptionalCharacter(hn)&&!this.next.isCharacter(Xt));this.rbracesExpected--,this.expectCharacter(Xt)}return new ro(this.span(r),this.sourceSpan(r),e,n)}parseAccessMember(e,n,r){let i=this.inputIndex,s=this.withContext(tc.Writable,()=>{let a=this.expectIdentifierOrKeyword()??"";return a.length===0&&this.error("Expected identifier for property access",e.span.end),a}),o=this.sourceSpan(i);if(r)return this.isAssignmentOperator(this.next)?(this.advance(),this.error("The '?.' operator cannot be used in the assignment"),new Kt(this.span(n),this.sourceSpan(n))):new yc(this.span(n),this.sourceSpan(n),o,e,s);if(this.isAssignmentOperator(this.next)){let a=this.next.strValue;if(!(this.parseFlags&1))return this.advance(),this.error("Bindings cannot contain assignments"),new Kt(this.span(n),this.sourceSpan(n));let l=new Hr(this.span(n),this.sourceSpan(n),o,e,s);this.advance();let c=this.parseConditional();return new Qt(this.span(n),this.sourceSpan(n),a,l,c)}else return new Hr(this.span(n),this.sourceSpan(n),o,e,s)}parseCall(e,n,r){let i=this.inputIndex;this.rparensExpected++;let s=this.parseCallArguments(),o=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(kt),this.rparensExpected--;let a=this.span(n),l=this.sourceSpan(n);return r?new Rf(a,l,e,s,o):new xa(a,l,e,s,o)}parseCallArguments(){if(this.next.isCharacter(kt))return[];let e=[];do e.push(this.next.isOperator("...")?this.parseSpreadElement():this.parsePipe());while(this.consumeOptionalCharacter(hn));return e}parseSpreadElement(){this.next.isOperator("...")||this.error("Spread element must start with '...' operator");let e=this.inputIndex;this.advance();let n=this.parsePipe(),r=this.span(e),i=this.sourceSpan(e);return new Mf(r,i,n)}expectTemplateBindingKey(){let e="",n=!1,r=this.currentAbsoluteOffset;do e+=this.expectIdentifierOrKeywordOrString(),n=this.consumeOptionalOperator("-"),n&&(e+="-");while(n);return{source:e,span:new In(r,r+e.length)}}parseTemplateBindings(e){let n=[];for(n.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let r=this.parseLetBinding();if(r)n.push(r);else{let i=this.expectTemplateBindingKey(),s=this.parseAsBinding(i);s?n.push(s):(i.source=e.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),n.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new by(n,[],this.errors)}parseKeyedReadOrWrite(e,n,r){return this.withContext(tc.Writable,()=>{this.rbracketsExpected++;let i=this.parsePipe();if(i instanceof Kt&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(pi),this.isAssignmentOperator(this.next)){let s=this.next.strValue;if(r)this.advance(),this.error("The '?.' operator cannot be used in the assignment");else{let o=new no(this.span(n),this.sourceSpan(n),e,i);this.advance();let a=this.parseConditional();return new Qt(this.span(n),this.sourceSpan(n),s,o,a)}}else return r?new wc(this.span(n),this.sourceSpan(n),e,i):new no(this.span(n),this.sourceSpan(n),e,i);return new Kt(this.span(n),this.sourceSpan(n))})}parseDirectiveKeywordBindings(e){let n=[];this.consumeOptionalCharacter(Ur);let r=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,s=this.parseAsBinding(e);s||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);let o=new In(e.span.start,i);return n.push(new Bv(o,e,r)),s&&n.push(s),n}getDirectiveBoundTarget(){if(this.next===Zd||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:n,end:r}=e.span,i=this.input.substring(n,r);return new fn(e,i,qi(this.parseSourceSpan),this.absoluteOffset+n,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let n=this.expectTemplateBindingKey();this.consumeStatementTerminator();let r=new In(e.span.start,this.currentAbsoluteOffset);return new Ac(r,n,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let n=this.expectTemplateBindingKey(),r=null;this.consumeOptionalOperator("=")&&(r=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let i=new In(e,this.currentAbsoluteOffset);return new Ac(i,n,r)}parseNoInterpolationTaggedTemplateLiteral(e,n){let r=this.parseNoInterpolationTemplateLiteral();return new xc(this.span(n),this.sourceSpan(n),e,r)}parseNoInterpolationTemplateLiteral(){let e=this.next.strValue,n=this.inputIndex;this.advance();let r=this.span(n),i=this.sourceSpan(n);return new Tc(r,i,[new Pf(r,i,e)],[])}parseTaggedTemplateLiteral(e,n){let r=this.parseTemplateLiteral();return new xc(this.span(n),this.sourceSpan(n),e,r)}parseTemplateLiteral(){let e=[],n=[],r=this.inputIndex;for(;this.next!==Zd;){let i=this.next;if(i.isTemplateLiteralPart()||i.isTemplateLiteralEnd()){let s=this.inputIndex;if(this.advance(),e.push(new Pf(this.span(s),this.sourceSpan(s),i.strValue)),i.isTemplateLiteralEnd())break}else if(i.isTemplateLiteralInterpolationStart()){this.advance(),this.rbracesExpected++;let s=this.parsePipe();s instanceof Kt?this.error("Template literal interpolation cannot be empty"):n.push(s),this.rbracesExpected--}else this.advance()}return new Tc(this.span(r),this.sourceSpan(r),e,n)}parseRegularExpressionLiteral(){let e=this.next;if(this.advance(),!e.isRegExpBody())return new Kt(this.span(this.inputIndex),this.sourceSpan(this.inputIndex));let n=null;if(this.next.isRegExpFlags()){n=this.next,this.advance();let s=new Set;for(let o=0;o<n.strValue.length;o++){let a=n.strValue[o];xb.has(a)?s.has(a)?this.error(`Duplicate regular expression flag "${a}"`,n.index+o):s.add(a):this.error(`Unsupported regular expression flag "${a}". The supported flags are: `+Array.from(xb,l=>`"${l}"`).join(", "),n.index+o)}}let r=e.index,i=n?n.end:e.end;return new Lf(this.span(r,i),this.sourceSpan(r,i),e.strValue,n?n.strValue:null)}consumeStatementTerminator(){this.consumeOptionalCharacter(xn)||this.consumeOptionalCharacter(hn)}error(e,n=this.index){this.errors.push(ma(e,this.input,this.getErrorLocationText(n),this.parseSourceSpan)),this.skip()}getErrorLocationText(e){return e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,n){let r=`Private identifiers are not supported. Unexpected private identifier: ${e}`;n!==null&&(r+=`, ${n}`),this.error(r)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(xn)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(kt))&&(this.rbracesExpected<=0||!e.isCharacter(Xt))&&(this.rbracketsExpected<=0||!e.isCharacter(pi))&&(!(this.context&tc.Writable)||!this.isAssignmentOperator(e));)this.next.isError()&&this.errors.push(ma(this.next.toString(),this.input,this.getErrorLocationText(this.next.index),this.parseSourceSpan)),this.advance(),e=this.next}};function ma(t,e,n,r){n.length>0&&(n=` ${n} `);let i=qi(r),s=`Parser Error: ${t}${n}[${e}] in ${i}`;return new K(r,s)}var xy=class extends Ta{errors=[];visitPipe(){this.errors.push("pipes")}};function fO(t){let e=new Map,n=0,r=0,i=0;for(;i<t.length;){let s=t[i];if(s.type===9){let[o,a]=s.parts;n+=a.length,r+=o.length}else{let o=s.parts.reduce((a,l)=>a+l.length,0);r+=o,n+=o}e.set(r,n),i++}return e}function hO(t){return t.visit(new Ty)}var Ty=class{visitUnary(e,n){return`${e.operator}${e.expr.visit(this,n)}`}visitBinary(e,n){return`${e.left.visit(this,n)} ${e.operation} ${e.right.visit(this,n)}`}visitChain(e,n){return e.expressions.map(r=>r.visit(this,n)).join("; ")}visitConditional(e,n){return`${e.condition.visit(this,n)} ? ${e.trueExp.visit(this,n)} : ${e.falseExp.visit(this,n)}`}visitThisReceiver(){return"this"}visitImplicitReceiver(){return""}visitInterpolation(e,n){return mO(e.strings,e.expressions.map(r=>r.visit(this,n))).join("")}visitKeyedRead(e,n){return`${e.receiver.visit(this,n)}[${e.key.visit(this,n)}]`}visitLiteralArray(e,n){return`[${e.expressions.map(r=>r.visit(this,n)).join(", ")}]`}visitLiteralMap(e,n){return`{${pO(e.keys.map(r=>r.kind==="spread"?"...":r.quoted?`'${r.key}'`:r.key),e.values.map(r=>r.visit(this,n))).map(([r,i])=>`${r}: ${i}`).join(", ")}}`}visitLiteralPrimitive(e){if(e.value===null)return"null";switch(typeof e.value){case"number":case"boolean":return e.value.toString();case"undefined":return"undefined";case"string":return`'${e.value.replace(/'/g,"\\'")}'`;default:throw new Error(`Unsupported primitive type: ${e.value}`)}}visitPipe(e,n){return`${e.exp.visit(this,n)} | ${e.name}`}visitPrefixNot(e,n){return`!${e.expression.visit(this,n)}`}visitNonNullAssert(e,n){return`${e.expression.visit(this,n)}!`}visitPropertyRead(e,n){return e.receiver instanceof Yr||e.receiver instanceof vc?e.name:`${e.receiver.visit(this,n)}.${e.name}`}visitSafePropertyRead(e,n){return`${e.receiver.visit(this,n)}?.${e.name}`}visitSafeKeyedRead(e,n){return`${e.receiver.visit(this,n)}?.[${e.key.visit(this,n)}]`}visitCall(e,n){return`${e.receiver.visit(this,n)}(${e.args.map(r=>r.visit(this,n)).join(", ")})`}visitSafeCall(e,n){return`${e.receiver.visit(this,n)}?.(${e.args.map(r=>r.visit(this,n)).join(", ")})`}visitTypeofExpression(e,n){return`typeof ${e.expression.visit(this,n)}`}visitVoidExpression(e,n){return`void ${e.expression.visit(this,n)}`}visitRegularExpressionLiteral(e,n){return`/${e.body}/${e.flags||""}`}visitASTWithSource(e,n){return e.ast.visit(this,n)}visitTemplateLiteral(e,n){let r="";for(let i=0;i<e.elements.length;i++){r+=e.elements[i].visit(this,n);let s=i<e.expressions.length?e.expressions[i]:null;s!==null&&(r+="${"+s.visit(this,n)+"}")}return"`"+r+"`"}visitTemplateLiteralElement(e,n){return e.text}visitTaggedTemplateLiteral(e,n){return e.tag.visit(this,n)+e.template.visit(this,n)}visitSpreadElement(e,n){return`...${e.expression.visit(this,n)}`}visitParenthesizedExpression(e,n){return"("+e.expression.visit(this,n)+")"}};function pO(t,e){if(t.length!==e.length)throw new Error("Array lengths must match");return t.map((n,r)=>[n,e[r]])}function mO(t,e){let n=[];for(let r=0;r<Math.max(t.length,e.length);r++)r<t.length&&n.push(t[r]),r<e.length&&n.push(e[r]);return n}var pf;function Tb(){return pf||(pf={},Kl(Ne.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Kl(Ne.STYLE,["*|style"]),Kl(Ne.URL,["*|formAction","area|href","a|href","a|xlink:href","form|action","annotation|href","annotation|xlink:href","annotation-xml|href","annotation-xml|xlink:href","maction|href","maction|xlink:href","malignmark|href","malignmark|xlink:href","math|href","math|xlink:href","mroot|href","mroot|xlink:href","msqrt|href","msqrt|xlink:href","merror|href","merror|xlink:href","mfrac|href","mfrac|xlink:href","mglyph|href","mglyph|xlink:href","msub|href","msub|xlink:href","msup|href","msup|xlink:href","msubsup|href","msubsup|xlink:href","mmultiscripts|href","mmultiscripts|xlink:href","mprescripts|href","mprescripts|xlink:href","mi|href","mi|xlink:href","mn|href","mn|xlink:href","mo|href","mo|xlink:href","mpadded|href","mpadded|xlink:href","mphantom|href","mphantom|xlink:href","mrow|href","mrow|xlink:href","ms|href","ms|xlink:href","mspace|href","mspace|xlink:href","mstyle|href","mstyle|xlink:href","mtable|href","mtable|xlink:href","mtd|href","mtd|xlink:href","mtr|href","mtr|xlink:href","mtext|href","mtext|xlink:href","mover|href","mover|xlink:href","munder|href","munder|xlink:href","munderover|href","munderover|xlink:href","semantics|href","semantics|xlink:href","none|href","none|xlink:href","img|src","video|src"]),Kl(Ne.RESOURCE_URL,["base|href","embed|src","frame|src","iframe|src","link|href","object|codebase","object|data","script|src","script|href","script|xlink:href"]),Kl(Ne.ATTRIBUTE_NO_BINDING,["animate|attributeName","set|attributeName","animateMotion|attributeName","animateTransform|attributeName","unknown|attributeName","iframe|sandbox","iframe|allow","iframe|allowFullscreen","iframe|referrerPolicy","iframe|csp","iframe|fetchPriority","unknown|sandbox","unknown|allow","unknown|allowFullscreen","unknown|referrerPolicy","unknown|csp","unknown|fetchPriority"])),pf}function Kl(t,e){for(let n of e)pf[n.toLowerCase()]=t}var Iy=class{},gO="boolean",vO="number",yO="string",wO="object",EO=["[Element]|textContent,%ariaActiveDescendantElement,%ariaAtomic,%ariaAutoComplete,%ariaBusy,%ariaChecked,%ariaColCount,%ariaColIndex,%ariaColIndexText,%ariaColSpan,%ariaControlsElements,%ariaCurrent,%ariaDescribedByElements,%ariaDescription,%ariaDetailsElements,%ariaDisabled,%ariaErrorMessageElements,%ariaExpanded,%ariaFlowToElements,%ariaHasPopup,%ariaHidden,%ariaInvalid,%ariaKeyShortcuts,%ariaLabel,%ariaLabelledByElements,%ariaLevel,%ariaLive,%ariaModal,%ariaMultiLine,%ariaMultiSelectable,%ariaOrientation,%ariaOwnsElements,%ariaPlaceholder,%ariaPosInSet,%ariaPressed,%ariaReadOnly,%ariaRelevant,%ariaRequired,%ariaRoleDescription,%ariaRowCount,%ariaRowIndex,%ariaRowIndexText,%ariaRowSpan,%ariaSelected,%ariaSetSize,%ariaSort,%ariaValueMax,%ariaValueMin,%ariaValueNow,%ariaValueText,%classList,className,elementTiming,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*fullscreenchange,*fullscreenerror,*search,*webkitfullscreenchange,*webkitfullscreenerror,outerHTML,%part,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,!inert,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","abbr,address,article,aside,b,bdi,bdo,cite,content,code,dd,dfn,dt,em,figcaption,figure,footer,header,hgroup,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,search,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,autocapitalize,!autofocus,contentEditable,dir,!draggable,enterKeyHint,!hidden,innerText,inputMode,lang,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate,virtualKeyboardPolicy","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,!preservesPitch,src,%srcObject,#volume",":svg:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,%relList,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","data^[HTMLElement]|value","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*afterprint,*beforeprint,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*messageerror,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","geolocation^[HTMLElement]|accuracymode,!autolocate,*location,*promptaction,*promptdismiss,*validationstatuschange,!watch","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,allow,!allowFullscreen,!allowPaymentRequest,csp,frameBorder,height,loading,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,decoding,#height,#hspace,!isMap,loading,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocomplete,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,imageSizes,imageSrcset,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,media,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,!noModule,%referrerPolicy,src,text,type","select^[HTMLElement]|autocomplete,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","selectedcontent^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|#height,media,sizes,src,srcset,type,#width","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","search^[HTMLELement]|","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocomplete,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","time^[HTMLElement]|dateTime","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|!disablePictureInPicture,#height,*enterpictureinpicture,*leavepictureinpicture,!playsInline,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|decoding",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|",":math:^[HTMLElement]|!autofocus,nonce,*abort,*animationend,*animationiteration,*animationstart,*auxclick,*beforeinput,*beforematch,*beforetoggle,*beforexrselect,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contentvisibilityautostatechange,*contextlost,*contextmenu,*contextrestored,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*formdata,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*paste,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerrawupdate,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*scrollend,*securitypolicyviolation,*seeked,*seeking,*select,*selectionchange,*selectstart,*slotchange,*stalled,*submit,*suspend,*timeupdate,*toggle,*transitioncancel,*transitionend,*transitionrun,*transitionstart,*volumechange,*waiting,*webkitanimationend,*webkitanimationiteration,*webkitanimationstart,*webkittransitionend,*wheel,%style,#tabIndex",":math:math^:math:|",":math:maction^:math:|",":math:menclose^:math:|",":math:merror^:math:|",":math:mfenced^:math:|",":math:mfrac^:math:|",":math:mi^:math:|",":math:mmultiscripts^:math:|",":math:mn^:math:|",":math:mo^:math:|",":math:mover^:math:|",":math:mpadded^:math:|",":math:mphantom^:math:|",":math:mroot^:math:|",":math:mrow^:math:|",":math:ms^:math:|",":math:mspace^:math:|",":math:msqrt^:math:|",":math:mstyle^:math:|",":math:msub^:math:|",":math:msubsup^:math:|",":math:msup^:math:|",":math:mtable^:math:|",":math:mtd^:math:|",":math:mtext^:math:|",":math:mtr^:math:|",":math:munder^:math:|",":math:munderover^:math:|",":math:semantics^:math:|"],mT=new Map(Object.entries({class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex","aria-activedescendant":"ariaActiveDescendantElement","aria-atomic":"ariaAtomic","aria-autocomplete":"ariaAutoComplete","aria-busy":"ariaBusy","aria-checked":"ariaChecked","aria-colcount":"ariaColCount","aria-colindex":"ariaColIndex","aria-colindextext":"ariaColIndexText","aria-colspan":"ariaColSpan","aria-controls":"ariaControlsElements","aria-current":"ariaCurrent","aria-describedby":"ariaDescribedByElements","aria-description":"ariaDescription","aria-details":"ariaDetailsElements","aria-disabled":"ariaDisabled","aria-errormessage":"ariaErrorMessageElements","aria-expanded":"ariaExpanded","aria-flowto":"ariaFlowToElements","aria-haspopup":"ariaHasPopup","aria-hidden":"ariaHidden","aria-invalid":"ariaInvalid","aria-keyshortcuts":"ariaKeyShortcuts","aria-label":"ariaLabel","aria-labelledby":"ariaLabelledByElements","aria-level":"ariaLevel","aria-live":"ariaLive","aria-modal":"ariaModal","aria-multiline":"ariaMultiLine","aria-multiselectable":"ariaMultiSelectable","aria-orientation":"ariaOrientation","aria-owns":"ariaOwnsElements","aria-placeholder":"ariaPlaceholder","aria-posinset":"ariaPosInSet","aria-pressed":"ariaPressed","aria-readonly":"ariaReadOnly","aria-required":"ariaRequired","aria-roledescription":"ariaRoleDescription","aria-rowcount":"ariaRowCount","aria-rowindex":"ariaRowIndex","aria-rowindextext":"ariaRowIndexText","aria-rowspan":"ariaRowSpan","aria-selected":"ariaSelected","aria-setsize":"ariaSetSize","aria-sort":"ariaSort","aria-valuemax":"ariaValueMax","aria-valuemin":"ariaValueMin","aria-valuenow":"ariaValueNow","aria-valuetext":"ariaValueText"})),_O=Array.from(mT).reduce((t,[e,n])=>(t.set(e,n),t),new Map),Fa=class extends Iy{_schema=new Map;_eventSchema=new Map;constructor(){super(),EO.forEach(e=>{let n=new Map,r=new Set,[i,s]=e.split("|"),o=s.split(","),[a,l]=i.split("^");a.split(",").forEach(u=>{this._schema.set(u.toLowerCase(),n),this._eventSchema.set(u.toLowerCase(),r)});let c=l&&this._schema.get(l.toLowerCase());if(c){for(let[u,h]of c)n.set(u,h);for(let u of this._eventSchema.get(l.toLowerCase()))r.add(u)}o.forEach(u=>{if(u.length>0)switch(u[0]){case"*":r.add(u.substring(1));break;case"!":n.set(u.substring(1),gO);break;case"#":n.set(u.substring(1),vO);break;case"%":n.set(u.substring(1),wO);break;default:n.set(u,yO)}})})}hasProperty(e,n,r){if(r.some(s=>s.name===IS.name))return!0;if(e.indexOf("-")>-1){if(VS(e)||Uv(e))return!1;if(r.some(s=>s.name===TS.name))return!0}return(this._schema.get(e.toLowerCase())||this._schema.get("unknown")).has(n)}hasElement(e,n){return n.some(r=>r.name===IS.name)||e.indexOf("-")>-1&&(VS(e)||Uv(e)||n.some(r=>r.name===TS.name))?!0:this._schema.has(e.toLowerCase())}securityContext(e,n,r){r&&(n=this.getMappedPropName(n)),e=e.toLowerCase(),n=n.toLowerCase();let i=Tb()[e+"|"+n];return i||(i=Tb()["*|"+n],i||Ne.NONE)}getMappedPropName(e){return mT.get(e)??e}getDefaultComponentElementName(){return"ng-component"}validateProperty(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...
If '${e}' is a directive input, make sure the directive is imported by the current module.`}:{error:!1}}validateAttribute(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`}:{error:!1}}allKnownElementNames(){return Array.from(this._schema.keys())}allKnownAttributesOfElement(e){let n=this._schema.get(e.toLowerCase())||this._schema.get("unknown");return Array.from(n.keys()).map(r=>_O.get(r)??r)}allKnownEventsOfElement(e){return Array.from(this._eventSchema.get(e.toLowerCase())??[])}normalizeAnimationStyleProperty(e){return vR(e)}normalizeAnimationStyleValue(e,n,r){let i="",s=r.toString().trim(),o=null;if(CO(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&(o=`Please provide a CSS unit value for ${n}:${r}`)}return{error:o,value:s+i}}};function CO(t){switch(t){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}var me=class{closedByChildren={};contentType;closedByParent=!1;implicitNamespacePrefix;isVoid;ignoreFirstLf;canSelfClose;preventNamespaceInheritance;constructor({closedByChildren:e,implicitNamespacePrefix:n,contentType:r=Vr.PARSABLE_DATA,closedByParent:i=!1,isVoid:s=!1,ignoreFirstLf:o=!1,preventNamespaceInheritance:a=!1,canSelfClose:l=!1}={}){e&&e.length>0&&e.forEach(c=>this.closedByChildren[c]=!0),this.isVoid=s,this.closedByParent=i||s,this.implicitNamespacePrefix=n||null,this.contentType=r,this.ignoreFirstLf=o,this.preventNamespaceInheritance=a,this.canSelfClose=l??s}isClosedByChild(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}getContentType(e){return typeof this.contentType=="object"?(e===void 0?void 0:this.contentType[e])??this.contentType.default:this.contentType}},Ib,la;function Ay(t){return la||(Ib=new me({canSelfClose:!0}),la=Object.assign(Object.create(null),{base:new me({isVoid:!0}),meta:new me({isVoid:!0}),area:new me({isVoid:!0}),embed:new me({isVoid:!0}),link:new me({isVoid:!0}),img:new me({isVoid:!0}),input:new me({isVoid:!0}),param:new me({isVoid:!0}),hr:new me({isVoid:!0}),br:new me({isVoid:!0}),source:new me({isVoid:!0}),track:new me({isVoid:!0}),wbr:new me({isVoid:!0}),p:new me({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new me({closedByChildren:["tbody","tfoot"]}),tbody:new me({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new me({closedByChildren:["tbody"],closedByParent:!0}),tr:new me({closedByChildren:["tr"],closedByParent:!0}),td:new me({closedByChildren:["td","th"],closedByParent:!0}),th:new me({closedByChildren:["td","th"],closedByParent:!0}),col:new me({isVoid:!0}),svg:new me({implicitNamespacePrefix:"svg"}),foreignObject:new me({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new me({implicitNamespacePrefix:"math"}),li:new me({closedByChildren:["li"],closedByParent:!0}),dt:new me({closedByChildren:["dt","dd"]}),dd:new me({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new me({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new me({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new me({closedByChildren:["optgroup"],closedByParent:!0}),option:new me({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new me({ignoreFirstLf:!0}),listing:new me({ignoreFirstLf:!0}),style:new me({contentType:Vr.RAW_TEXT}),script:new me({contentType:Vr.RAW_TEXT}),title:new me({contentType:{default:Vr.ESCAPABLE_RAW_TEXT,svg:Vr.PARSABLE_DATA}}),textarea:new me({contentType:Vr.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),new Fa().allKnownElementNames().forEach(e=>{!la[e]&&$v(e)===null&&(la[e]=new me({canSelfClose:!1}))})),la[t]??la[t.toLowerCase()]??Ib}var Ab={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Dy=class{_placeHolderNameCounts={};_signatureToName={};getStartTagPlaceholderName(e,n,r){let i=this._hashTag(e,n,r);if(this._signatureToName[i])return this._signatureToName[i];let s=e.toUpperCase(),o=Ab[s]||`TAG_${s}`,a=this._generateUniqueName(r?o:`START_${o}`);return this._signatureToName[i]=a,a}getCloseTagPlaceholderName(e){let n=this._hashClosingTag(e);if(this._signatureToName[n])return this._signatureToName[n];let r=e.toUpperCase(),i=Ab[r]||`TAG_${r}`,s=this._generateUniqueName(`CLOSE_${i}`);return this._signatureToName[n]=s,s}getPlaceholderName(e,n){let r=e.toUpperCase(),i=`PH: ${r}=${n}`;if(this._signatureToName[i])return this._signatureToName[i];let s=this._generateUniqueName(r);return this._signatureToName[i]=s,s}getUniquePlaceholder(e){return this._generateUniqueName(e.toUpperCase())}getStartBlockPlaceholderName(e,n){let r=this._hashBlock(e,n);if(this._signatureToName[r])return this._signatureToName[r];let i=this._generateUniqueName(`START_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[r]=i,i}getCloseBlockPlaceholderName(e){let n=this._hashClosingBlock(e);if(this._signatureToName[n])return this._signatureToName[n];let r=this._generateUniqueName(`CLOSE_BLOCK_${this._toSnakeCase(e)}`);return this._signatureToName[n]=r,r}_hashTag(e,n,r){let i=`<${e}`,s=Object.keys(n).sort().map(a=>` ${a}=${n[a]}`).join(""),o=r?"/>":`></${e}>`;return i+s+o}_hashClosingTag(e){return this._hashTag(`/${e}`,{},!1)}_hashBlock(e,n){let r=n.length===0?"":` (${n.sort().join("; ")})`;return`@${e}${r} {}`}_hashClosingBlock(e){return this._hashBlock(`close_${e}`,[])}_toSnakeCase(e){return e.toUpperCase().replace(/[^A-Z0-9]/g,"_")}_generateUniqueName(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;let r=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=r+1,`${e}_${r}`}},SO=new hh(new tu);function bO(t,e){let n=new ky(SO,t,e);return(r,i,s,o,a)=>n.toI18nMessage(r,i,s,o,a)}function xO(t,e){return e}var ky=class{_expressionParser;_retainEmptyTokens;_preserveExpressionWhitespace;constructor(e,n,r){this._expressionParser=e,this._retainEmptyTokens=n,this._preserveExpressionWhitespace=r}toI18nMessage(e,n="",r="",i="",s){let o={isIcu:e.length==1&&e[0]instanceof Ws,icuDepth:0,placeholderRegistry:new Dy,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:s||xO},a=He(this,e,o);return new tn(a,o.placeholderToContent,o.placeholderToMessage,n,r,i)}visitElement(e,n){return this._visitElementLike(e,n)}visitComponent(e,n){return this._visitElementLike(e,n)}visitDirective(e,n){throw new Error("Unreachable code")}visitAttribute(e,n){let r=e.valueTokens===void 0||e.valueTokens.length===1?new Wl(e.value,e.valueSpan||e.sourceSpan):this._visitTextWithInterpolation(e.valueTokens,e.valueSpan||e.sourceSpan,n,e.i18n);return n.visitNodeFn(e,r)}visitText(e,n){let r=e.tokens.length===1?new Wl(e.value,e.sourceSpan):this._visitTextWithInterpolation(e.tokens,e.sourceSpan,n,e.i18n);return n.visitNodeFn(e,r)}visitComment(e,n){return null}visitExpansion(e,n){n.icuDepth++;let r={},i=new Gf(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach(a=>{r[a.value]=new gi(a.expression.map(l=>l.visit(this,n)),a.expSourceSpan)}),n.icuDepth--,n.isIcu||n.icuDepth>0){let a=n.placeholderRegistry.getUniquePlaceholder(`VAR_${e.type}`);return i.expressionPlaceholder=a,n.placeholderToContent[a]={text:e.switchValue,sourceSpan:e.switchValueSourceSpan},n.visitNodeFn(e,i)}let s=n.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());n.placeholderToMessage[s]=this.toI18nMessage([e],"","","",void 0);let o=new Na(i,s,e.sourceSpan);return n.visitNodeFn(e,o)}visitExpansionCase(e,n){throw new Error("Unreachable code")}visitBlock(e,n){let r=He(this,e.children,n);if(e.name==="switch")return new gi(r,e.sourceSpan);let i=e.parameters.map(l=>l.expression),s=n.placeholderRegistry.getStartBlockPlaceholderName(e.name,i),o=n.placeholderRegistry.getCloseBlockPlaceholderName(e.name);n.placeholderToContent[s]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan},n.placeholderToContent[o]={text:e.endSourceSpan?e.endSourceSpan.toString():"}",sourceSpan:e.endSourceSpan??e.sourceSpan};let a=new Xi(e.name,i,s,o,r,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return n.visitNodeFn(e,a)}visitBlockParameter(e,n){throw new Error("Unreachable code")}visitLetDeclaration(e,n){return null}_visitElementLike(e,n){let r=He(this,e.children,n),i={},s=h=>{i[h.name]=h.value},o,a;e instanceof Gn?(o=e.name,a=Ay(e.name).isVoid):(o=e.fullName,a=e.tagName?Ay(e.tagName).isVoid:!1),e.attrs.forEach(s),e.directives.forEach(h=>h.attrs.forEach(s));let l=n.placeholderRegistry.getStartTagPlaceholderName(o,i,a);n.placeholderToContent[l]={text:e.startSourceSpan.toString(),sourceSpan:e.startSourceSpan};let c="";a||(c=n.placeholderRegistry.getCloseTagPlaceholderName(o),n.placeholderToContent[c]={text:`</${o}>`,sourceSpan:e.endSourceSpan??e.sourceSpan});let u=new Qi(o,i,l,c,r,a,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return n.visitNodeFn(e,u)}_visitTextWithInterpolation(e,n,r,i){let s=[],o=!1;for(let a of e)switch(a.type){case 8:case 17:o=!0;let[l,c,u]=a.parts,h=kO(c)||"INTERPOLATION",p=r.placeholderRegistry.getPlaceholderName(h,c);if(this._preserveExpressionWhitespace)r.placeholderToContent[p]={text:a.parts.join(""),sourceSpan:a.sourceSpan},s.push(new Fc(c,p,a.sourceSpan));else{let m=this.normalizeExpression(a);r.placeholderToContent[p]={text:`${l}${m}${u}`,sourceSpan:a.sourceSpan},s.push(new Fc(m,p,a.sourceSpan))}break;default:if(a.parts[0].length>0||this._retainEmptyTokens){let m=s[s.length-1];m instanceof Wl?(m.value+=a.parts[0],m.sourceSpan=new Z(m.sourceSpan.start,a.sourceSpan.end,m.sourceSpan.fullStart,m.sourceSpan.details)):s.push(new Wl(a.parts[0],a.sourceSpan))}else this._retainEmptyTokens&&s.push(new Wl(a.parts[0],a.sourceSpan));break}return o?(TO(s,i),new gi(s,n)):s[0]}normalizeExpression(e){let n=e.parts[1],r=this._expressionParser.parseBinding(n,e.sourceSpan,e.sourceSpan.start.offset);return hO(r)}};function TO(t,e){if(e instanceof tn&&(IO(e),e=e.nodes[0]),e instanceof gi){AO(e.children,t);for(let n=0;n<t.length;n++)t[n].sourceSpan=e.children[n].sourceSpan}}function IO(t){let e=t.nodes;if(e.length!==1||!(e[0]instanceof gi))throw new Error("Unexpected previous i18n message - expected it to consist of only a single `Container` node.")}function AO(t,e){if(t.length!==e.length)throw new Error(`
The number of i18n message children changed between first and second pass.

First pass (${t.length} tokens):
${t.map(n=>`"${n.sourceSpan.toString()}"`).join(`
`)}

Second pass (${e.length} tokens):
${e.map(n=>`"${n.sourceSpan.toString()}"`).join(`
`)}
    `.trim());if(t.some((n,r)=>e[r].constructor!==n.constructor))throw new Error("The types of the i18n message children changed between first and second pass.")}var DO=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;function kO(t){return t.split(DO)[2]}var Db=new Set(["iframe|srcdoc","*|innerhtml","*|outerhtml","embed|src","object|codebase","object|data"]);function kb(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),Db.has(t+"|"+e)||Db.has("*|"+e)}var NO=t=>(e,n)=>{let r=t.get(e)??e;return r instanceof wi&&(n instanceof Na&&r.i18n instanceof tn&&(n.previousMessage=r.i18n),r.i18n=n),n},ph=class{keepI18nAttrs;enableI18nLegacyMessageIdFormat;preserveSignificantWhitespace;retainEmptyTokens;hasI18nMeta=!1;_errors=[];constructor(e=!1,n=!1,r=!0,i=!r){this.keepI18nAttrs=e,this.enableI18nLegacyMessageIdFormat=n,this.preserveSignificantWhitespace=r,this.retainEmptyTokens=i}_generateI18nMessage(e,n="",r){let{meaning:i,description:s,customId:o}=this._parseMetadata(n),l=bO(this.retainEmptyTokens,this.preserveSignificantWhitespace)(e,i,s,o,r);return this._setMessageId(l,n),this._setLegacyIds(l,n),l}visitAllWithErrors(e){let n=e.map(r=>r.visit(this,null));return new dh(n,this._errors)}visitElement(e){return this._visitElementLike(e),e}visitComponent(e,n){return this._visitElementLike(e),e}visitExpansion(e,n){let r,i=e.i18n;if(this.hasI18nMeta=!0,i instanceof Na){let s=i.name;r=this._generateI18nMessage([e],i);let o=Ix(r);o.name=s,n!==null&&(n.placeholderToMessage[s]=r)}else r=this._generateI18nMessage([e],n||i);return e.i18n=r,e}visitText(e){return e}visitAttribute(e){return e}visitComment(e){return e}visitExpansionCase(e){return e}visitBlock(e,n){return He(this,e.children,n),e}visitBlockParameter(e,n){return e}visitLetDeclaration(e,n){return e}visitDirective(e,n){return e}_visitElementLike(e){let n;if(jR(e)){this.hasI18nMeta=!0;let r=[],i={};for(let s of e.attrs)if(s.name===xx){let o=e.i18n||s.value,a=new Map,l=this.preserveSignificantWhitespace?e.children:Or(new fh(!1,a),e.children);n=this._generateI18nMessage(l,o,NO(a)),n.nodes.length===0&&(n=void 0),e.i18n=n}else if(s.name.startsWith(Kv)){let o=s.name.slice(Kv.length),a;e instanceof un?a=e.tagName===null?!1:kb(e.tagName,o):a=kb(e.name,o),a?this._reportError(s,`Translating attribute '${o}' is disallowed for security reasons.`):i[o]=s.value}else r.push(s);if(Object.keys(i).length)for(let s of r){let o=i[s.name];o!==void 0&&s.value&&(s.i18n=this._generateI18nMessage([s],s.i18n||o))}this.keepI18nAttrs||(e.attrs=r)}He(this,e.children,n)}_parseMetadata(e){return typeof e=="string"?PO(e):e instanceof tn?e:{}}_setMessageId(e,n){e.id||(e.id=n instanceof tn&&n.id||zM(e))}_setLegacyIds(e,n){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[WM(e),gx(e)];else if(typeof n!="string"){let r=n instanceof tn?n:n instanceof Na?n.previousMessage:void 0;e.legacyIds=r?r.legacyIds:[]}}_reportError(e,n){this._errors.push(new K(e.sourceSpan,n))}},MO="|",RO="@@";function PO(t=""){let e,n,r;if(t=t.trim(),t){let i=t.indexOf(RO),s=t.indexOf(MO),o;[o,e]=i>-1?[t.slice(0,i),t.slice(i+2)]:[t,""],[n,r]=s>-1?[o.slice(0,s),o.slice(s+1)]:["",o]}return{customId:e,meaning:n,description:r}}function LO(t){let e=[];return t.description?e.push({tagName:"desc",text:t.description}):e.push({tagName:"suppress",text:"{msgDescriptions}"}),t.meaning&&e.push({tagName:"meaning",text:t.meaning}),lR(e)}var OO="goog.getMsg";function FO(t,e,n,r){let i=VO(e),s=[T(i)];Object.keys(r).length&&(s.push(hy(l0(r,!0),!0)),s.push(hy({original_code:Kn(Object.keys(r).map(l=>({key:lu(l),quoted:!0,value:e.placeholders[l]?T(e.placeholders[l].sourceSpan.toString()):T(e.placeholderToMessage[l].nodes.map(c=>c.sourceSpan.toString()).join(""))})))})));let o=new wt(n.name,Ee(OO).callFn(s),hr,Mt.Final);o.addLeadingComment(LO(e));let a=new Ht(t.set(n));return[o,a]}var Ny=class{formatPh(e){return`{$${lu(e)}}`}visitText(e){return e.value}visitContainer(e){return e.children.map(n=>n.visit(this)).join("")}visitIcu(e){return lT(e)}visitTagPlaceholder(e){return e.isVoid?this.formatPh(e.startName):`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitPlaceholder(e){return this.formatPh(e.name)}visitBlockPlaceholder(e){return`${this.formatPh(e.startName)}${e.children.map(n=>n.visit(this)).join("")}${this.formatPh(e.closeName)}`}visitIcuPlaceholder(e,n){return this.formatPh(e.name)}},BO=new Ny;function VO(t){return t.nodes.map(e=>e.visit(BO,null)).join("")}function UO(t,e,n){let{messageParts:r,placeHolders:i}=$O(e),s=HO(e),o=i.map(c=>n[c.text]),a=dR(e,r,i,o,s),l=t.set(a);return[new Ht(l)]}var My=class{placeholderToMessage;pieces;constructor(e,n){this.placeholderToMessage=e,this.pieces=n}visitText(e){if(this.pieces[this.pieces.length-1]instanceof Hs)this.pieces[this.pieces.length-1].text+=e.value;else{let n=new Z(e.sourceSpan.fullStart,e.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details);this.pieces.push(new Hs(e.value,n))}}visitContainer(e){e.children.forEach(n=>n.visit(this))}visitIcu(e){this.pieces.push(new Hs(lT(e),e.sourceSpan))}visitTagPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.isVoid||(e.children.forEach(n=>n.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan)))}visitPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}visitBlockPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.startName,e.startSourceSpan??e.sourceSpan)),e.children.forEach(n=>n.visit(this)),this.pieces.push(this.createPlaceholderPiece(e.closeName,e.endSourceSpan??e.sourceSpan))}visitIcuPlaceholder(e){this.pieces.push(this.createPlaceholderPiece(e.name,e.sourceSpan,this.placeholderToMessage[e.name]))}createPlaceholderPiece(e,n,r){return new ga(lu(e,!1),n,r)}};function $O(t){let e=[],n=new My(t.placeholderToMessage,e);return t.nodes.forEach(r=>r.visit(n)),qO(e)}function HO(t){let e=t.nodes[0],n=t.nodes[t.nodes.length-1];return new Z(e.sourceSpan.fullStart,n.sourceSpan.end,e.sourceSpan.fullStart,e.sourceSpan.details)}function qO(t){let e=[],n=[];t[0]instanceof ga&&e.push(gv(t[0].sourceSpan.start));for(let r=0;r<t.length;r++){let i=t[r];i instanceof Hs?e.push(i):(n.push(i),t[r-1]instanceof ga&&e.push(gv(t[r-1].sourceSpan.end)))}return t[t.length-1]instanceof ga&&e.push(gv(t[t.length-1].sourceSpan.end)),{messageParts:e,placeHolders:n}}function gv(t){return new Hs("",new Z(t,t))}var Nb="ngI18nClosureMode",GO="i18n_",jO="I18N_EXP_",Mb="\uFFFD",WO="MSG_";function Rb(t){return`${WO}${t}`.toUpperCase()}function zO(t){return new wt(t.name,void 0,hr,void 0,t.sourceSpan)}function JO(t){let e=t.relativeContextFilePath.replace(/[^A-Za-z0-9]/g,"_").toUpperCase()+"_",n=new Map,r=new Map,i=new Map,s=new Map;for(let l of t.units)for(let c of l.ops())if(c.kind===v.ExtractedAttribute&&c.i18nContext!==null){let u=n.get(c.i18nContext)??[];u.push(c),n.set(c.i18nContext,u)}else if(c.kind===v.I18nAttributes)r.set(c.target,c);else if(c.kind===v.I18nExpression&&c.usage===Ua.I18nAttribute){let u=i.get(c.target)??[];u.push(c),i.set(c.target,u)}else c.kind===v.I18nMessage&&s.set(c.xref,c);let o=new Map,a=new Map;for(let l of t.units)for(let c of l.create)if(c.kind===v.I18nMessage){if(c.messagePlaceholder===null){let{mainVar:u,statements:h}=gT(t,e,s,c);if(c.i18nBlock!==null){let p=t.addConst(u,h);a.set(c.i18nBlock,p)}else{t.constsInitializers.push(...h),o.set(c.i18nContext,u);let p=n.get(c.i18nContext);if(p!==void 0)for(let m of p)m.expression=u.clone()}}N.remove(c)}for(let l of t.units)for(let c of l.create)if(is(c)){let u=r.get(c.xref);if(u===void 0)continue;let h=i.get(c.xref);if(h===void 0)throw new Error("AssertionError: Could not find any i18n expressions associated with an I18nAttributes instruction");let p=new Set;h=h.filter(g=>{let y=p.has(g.name);return p.add(g.name),!y});let m=h.flatMap(g=>{let y=o.get(g.context);if(y===void 0)throw new Error("AssertionError: Could not find i18n expression's value");return[T(g.name),y]});u.i18nAttributesConfig=t.addConst(new zr(m))}for(let l of t.units)for(let c of l.create)if(c.kind===v.I18nStart){let u=a.get(c.root);if(u===void 0)throw new Error("AssertionError: Could not find corresponding i18n block index for an i18n message op; was an i18n message incorrectly assumed to correspond to an attribute?");c.messageIndex=u}}function gT(t,e,n,r){let i=[],s=new Map;for(let c of r.subMessages){let u=n.get(c),{mainVar:h,statements:p}=gT(t,e,n,u);i.push(...p);let m=s.get(u.messagePlaceholder)??[];m.push(h),s.set(u.messagePlaceholder,m)}YO(r,s),r.params=new Map([...r.params.entries()].sort());let o=Ee(t.pool.uniqueName(GO)),a=XO(t.pool,r.message.id,e,t.i18nUseExternalIds),l;if(r.needsPostprocessing||r.postprocessingParams.size>0){let c=Object.fromEntries([...r.postprocessingParams.entries()].sort()),u=l0(c,!1),h=[];r.postprocessingParams.size>0&&h.push(hy(u,!0)),l=p=>G(_.i18nPostprocess).callFn([p,...h])}return i.push(...KO(r.message,o,a,r.params,l)),{mainVar:o,statements:i}}function YO(t,e){for(let[n,r]of e)r.length===1?t.params.set(n,r[0]):(t.params.set(n,T(`${Mb}${jO}${n}${Mb}`)),t.postprocessingParams.set(n,Ae(r)))}function KO(t,e,n,r,i){let s=Object.fromEntries(r),o=[zO(e),Ih(QO(),FO(e,t,n,s),UO(e,t,l0(s,!1)))];return i&&o.push(new Ht(e.set(i(e)))),o}function QO(){return ou(Ee(Nb)).notIdentical(T("undefined",s0)).and(Ee(Nb))}function XO(t,e,n,r){let i,s=n;if(r){let o=Rb("EXTERNAL_"),a=t.uniqueName(s);i=`${o}${Os(e)}$$${a}`}else{let o=Rb(s);i=t.uniqueName(o)}return Ee(i)}function ZO(t){for(let e of t.units){let n=null,r=null,i=new Map,s=new Map,o=new Map;for(let a of e.create)switch(a.kind){case v.I18nStart:if(a.context===null)throw Error("I18n op should have its context set.");n=a;break;case v.I18nEnd:n=null;break;case v.IcuStart:if(a.context===null)throw Error("Icu op should have its context set.");r=a;break;case v.IcuEnd:r=null;break;case v.Text:if(n!==null)if(i.set(a.xref,n),s.set(a.xref,r),a.icuPlaceholder!==null){let l=x2(t.allocateXrefId(),a.icuPlaceholder,[a.initialValue]);N.replace(a,l),o.set(a.xref,l)}else N.remove(a);break}for(let a of e.update)switch(a.kind){case v.InterpolateText:if(!i.has(a.target))continue;let l=i.get(a.target),c=s.get(a.target),u=o.get(a.target),h=c?c.context:l.context,p=c?Gc.Postproccessing:Gc.Creation,m=[];for(let g=0;g<a.interpolation.expressions.length;g++){let y=a.interpolation.expressions[g];m.push(zx(h,l.xref,l.xref,l.handle,y,u?.xref??null,a.interpolation.i18nPlaceholders[g]??null,p,Ua.I18nText,"",y.sourceSpan??a.sourceSpan))}N.replaceWithMany(a,m),u!==void 0&&(u.strings=a.interpolation.strings);break}}}function eF(t){for(let e of t.units)for(let n of e.create)switch(n.kind){case v.ElementStart:case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!Array.isArray(n.localRefs))throw new Error("AssertionError: expected localRefs to be an array still");if(n.numSlotsUsed+=n.localRefs.length,n.localRefs.length>0){let r=tF(n.localRefs);n.localRefs=t.addConst(r)}else n.localRefs=null;break}}function tF(t){let e=[];for(let n of t)e.push(T(n.name),T(n.target));return Ae(e)}function nF(t){for(let e of t.units){let n=$t.HTML;for(let r of e.create)r.kind===v.ElementStart&&r.namespace!==n&&(N.insertBefore(v2(r.namespace),r),n=r.namespace)}}function rF(t){let e=[],n=0,r=0,i=0,s=0,o=0,a=null;for(;n<t.length;)switch(t.charCodeAt(n++)){case 40:r++;break;case 41:r--;break;case 39:i===0?i=39:i===39&&t.charCodeAt(n-1)!==92&&(i=0);break;case 34:i===0?i=34:i===34&&t.charCodeAt(n-1)!==92&&(i=0);break;case 58:!a&&r===0&&i===0&&(a=vT(t.substring(o,n-1).trim()),s=n);break;case 59:if(a&&s>0&&r===0&&i===0){let c=t.substring(s,n-1).trim();e.push(a,c),o=n,s=0,a=null}break}if(a&&s){let l=t.slice(s).trim();e.push(a,l)}return e}function vT(t){return t.replace(/[a-z][A-Z]/g,e=>e.charAt(0)+"-"+e.charAt(1)).toLowerCase()}function iF(t){let e=new Map;for(let n of t.units)for(let r of n.create)is(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.create)if(r.kind===v.ExtractedAttribute&&r.bindingKind===H.Attribute&&Jx(r.expression)){let i=e.get(r.target);if(i!==void 0&&(i.kind===v.Template||i.kind===v.ConditionalCreate||i.kind===v.ConditionalBranchCreate)&&i.templateKind===pn.Structural)continue;if(r.name==="style"){let s=rF(r.expression.value);for(let o=0;o<s.length-1;o+=2)N.insertBefore(bn(r.target,H.StyleProperty,null,s[o],T(s[o+1]),null,null,Ne.STYLE),r);N.remove(r)}else if(r.name==="class"){let s=r.expression.value.trim().split(/\s+/g);for(let o of s)N.insertBefore(bn(r.target,H.ClassName,null,o,null,null,null,Ne.NONE),r);N.remove(r)}}}function sF(t){nc(t.root,t.componentName,{index:0},t.compatibility===Rn.TemplateDefinitionBuilder)}function nc(t,e,n,r){t.fnName===null&&(t.fnName=t.job.pool.uniqueName(Os(`${e}_${t.job.fnSuffix}`),!1));let i=new Map;for(let s of t.ops())switch(s.kind){case v.Property:case v.DomProperty:s.bindingKind===H.LegacyAnimation&&(s.name="@"+s.name);break;case v.Animation:if(s.handlerFnName===null){let u=s.name.replace(".","");s.handlerFnName=`${t.fnName}_${u}_cb`,s.handlerFnName=Os(s.handlerFnName)}break;case v.AnimationListener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let o=s.name.replace(".","");s.hostListener?s.handlerFnName=`${e}_${o}_HostBindingHandler`:s.handlerFnName=`${t.fnName}_${s.tag.replace("-","_")}_${o}_${s.targetSlot.slot}_listener`,s.handlerFnName=Os(s.handlerFnName);break;case v.Listener:if(s.handlerFnName!==null)break;if(!s.hostListener&&s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");let a="";s.isLegacyAnimationListener&&(s.name=`@${s.name}.${s.legacyAnimationPhase}`,a="animation"),s.hostListener?s.handlerFnName=`${e}_${a}${s.name}_HostBindingHandler`:s.handlerFnName=`${t.fnName}_${s.tag.replace("-","_")}_${a}${s.name}_${s.targetSlot.slot}_listener`,s.handlerFnName=Os(s.handlerFnName);break;case v.TwoWayListener:if(s.handlerFnName!==null)break;if(s.targetSlot.slot===null)throw new Error("Expected a slot to be assigned");s.handlerFnName=Os(`${t.fnName}_${s.tag.replace("-","_")}_${s.name}_${s.targetSlot.slot}_listener`);break;case v.Variable:i.set(s.xref,oF(t,s.variable,n));break;case v.RepeaterCreate:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.emptyView!==null){let u=t.job.views.get(s.emptyView);nc(u,`${e}_${s.functionNameSuffix}Empty_${s.handle.slot+2}`,n,r)}nc(t.job.views.get(s.xref),`${e}_${s.functionNameSuffix}_${s.handle.slot+1}`,n,r);break;case v.Projection:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");if(s.handle.slot===null)throw new Error("Expected slot to be assigned");if(s.fallbackView!==null){let u=t.job.views.get(s.fallbackView);nc(u,`${e}_ProjectionFallback_${s.handle.slot}`,n,r)}break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");let l=t.job.views.get(s.xref);if(s.handle.slot===null)throw new Error("Expected slot to be assigned");let c=s.functionNameSuffix.length===0?"":`_${s.functionNameSuffix}`;nc(l,`${e}${c}_${s.handle.slot}`,n,r);break;case v.StyleProp:s.name=aF(s.name),r&&(s.name=Pb(s.name));break;case v.ClassProp:r&&(s.name=Pb(s.name));break}for(let s of t.ops())It(s,o=>{if(!(!(o instanceof vi)||o.name!==null)){if(!i.has(o.xref))throw new Error(`Variable ${o.xref} not yet named`);o.name=i.get(o.xref)}})}function oF(t,e,n){if(e.name===null)switch(e.kind){case Tt.Context:e.name=`ctx_r${n.index++}`;break;case Tt.Identifier:if(t.job.compatibility===Rn.TemplateDefinitionBuilder){let r=e.identifier==="ctx"?"i":"";e.name=`${e.identifier}_${r}r${++n.index}`}else e.name=`${e.identifier}_i${n.index++}`;break;default:e.name=`_r${++n.index}`;break}return e.name}function aF(t){return t.startsWith("--")?t:vT(t)}function Pb(t){let e=t.indexOf("!important");return e>-1?t.substring(0,e):t}function lF(t){for(let e of t.units){for(let n of e.create)(n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener)&&Lb(n.handlerOps);Lb(e.update)}}function Lb(t){for(let e of t){if(e.kind!==v.Statement||!(e.statement instanceof Ht)||!(e.statement.expr instanceof Xf))continue;let n=e.statement.expr.steps,r=!0;for(let i=e.next;i.kind!==v.ListEnd&&r;i=i.next)It(i,(s,o)=>{if(!Xr(s))return s;if(r&&!(o&be.InChildOperation))switch(s.kind){case j.NextContext:s.steps+=n,N.remove(e),r=!1;break;case j.GetCurrentView:case j.Reference:case j.ContextLetReference:r=!1;break}})}}var cF="ng-container";function uF(t){for(let e of t.units){let n=new Set;for(let r of e.create)r.kind===v.ElementStart&&r.tag===cF&&(r.kind=v.ContainerStart,n.add(r.xref)),r.kind===v.ElementEnd&&n.has(r.xref)&&(r.kind=v.ContainerEnd)}}function dF(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an element-like target.");return n}function fF(t){let e=new Map;for(let n of t.units)for(let r of n.create)is(r)&&e.set(r.xref,r);for(let n of t.units)for(let r of n.create)(r.kind===v.ElementStart||r.kind===v.ContainerStart)&&r.nonBindable&&N.insertAfter(h2(r.xref),r),(r.kind===v.ElementEnd||r.kind===v.ContainerEnd)&&dF(e,r.xref).nonBindable&&N.insertBefore(p2(r.xref),r)}function $r(t){return e=>e.kind===t}function ac(t,e){return n=>n.kind===t&&e===n.expression instanceof Xe}function hF(t){return t.kind===v.Listener&&!(t.hostListener&&t.isLegacyAnimationListener)||t.kind===v.TwoWayListener||t.kind===v.Animation||t.kind===v.AnimationListener}function pF(t){return(t.kind===v.Property||t.kind===v.TwoWayProperty)&&!(t.expression instanceof Xe)}var mF=[{test:t=>t.kind===v.Listener&&t.hostListener&&t.isLegacyAnimationListener},{test:hF}],gF=[{test:$r(v.StyleMap),transform:mh},{test:$r(v.ClassMap),transform:mh},{test:$r(v.StyleProp)},{test:$r(v.ClassProp)},{test:ac(v.Attribute,!0)},{test:ac(v.Property,!0)},{test:pF},{test:ac(v.Attribute,!1)},{test:$r(v.Control)}],vF=[{test:ac(v.DomProperty,!0)},{test:ac(v.DomProperty,!1)},{test:$r(v.Attribute)},{test:$r(v.StyleMap),transform:mh},{test:$r(v.ClassMap),transform:mh},{test:$r(v.StyleProp)},{test:$r(v.ClassProp)}],Ob=new Set([v.Listener,v.TwoWayListener,v.AnimationListener,v.StyleMap,v.ClassMap,v.StyleProp,v.ClassProp,v.Property,v.TwoWayProperty,v.DomProperty,v.Attribute,v.Animation,v.Control]);function yF(t){for(let e of t.units){Fb(e.create,mF);let n=e.job.kind===B.Host?vF:gF;Fb(e.update,n)}}function Fb(t,e){let n=[],r=null;for(let i of t){let s=jc(i)?i.target:null;(!Ob.has(i.kind)||s!==r&&r!==null&&s!==null)&&(N.insertBefore(Bb(n,e),i),n=[],r=null),Ob.has(i.kind)&&(n.push(i),N.remove(i),r=s??r)}t.push(Bb(n,e))}function Bb(t,e){let n=Array.from(e,()=>new Array);for(let r of t){let i=e.findIndex(s=>s.test(r));n[i].push(r)}return n.flatMap((r,i)=>{let s=e[i].transform;return s?s(r):r})}function mh(t){return t.slice(t.length-1)}function wF(t){for(let e of t.units){let n=iT(e);for(let r of e.ops())if(r.kind===v.Binding){let i=_F(n,r.target);EF(r.name)&&i.kind===v.Projection&&N.remove(r)}}}function EF(t){return t.toLowerCase()==="select"}function _F(t,e){let n=t.get(e);if(n===void 0)throw new Error("All attributes should have an slottable target.");return n}function CF(t){for(let e of t.units)SF(e)}function SF(t){for(let e of t.update)It(e,(n,r)=>{if(Xr(n)&&n.kind===j.PipeBinding){if(r&be.InChildOperation)throw new Error("AssertionError: pipe bindings should not appear in child expressions");if(t.job.compatibility){if(e.target==null)throw new Error("AssertionError: expected slot handle to be assigned for pipe creation");bF(t,e.target,n)}else t.create.push(tT(n.target,n.targetSlot,n.name))}})}function bF(t,e,n){for(let r=t.create.head.next;r.kind!==v.ListEnd;r=r.next){if(!Ha(r)||r.xref!==e)continue;for(;r.next.kind===v.Pipe;)r=r.next;let i=tT(n.target,n.targetSlot,n.name);N.insertBefore(i,r.next);return}throw new Error(`AssertionError: unable to find insertion point for pipe ${n.name}`)}function xF(t){for(let e of t.units)for(let n of e.update)ot(n,r=>!(r instanceof lo)||r.args.length<=4?r:new Jc(r.target,r.targetSlot,r.name,Ae(r.args),r.args.length),be.None)}function TF(t){yT(t.root,0)}function yT(t,e){let n=null;for(let r of t.create)switch(r.kind){case v.I18nStart:r.subTemplateIndex=e===0?null:e,n=r;break;case v.I18nEnd:n.subTemplateIndex===null&&(e=0),n=null;break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:e=ef(t.job.views.get(r.xref),n,r.i18nPlaceholder,e);break;case v.RepeaterCreate:let i=t.job.views.get(r.xref);e=ef(i,n,r.i18nPlaceholder,e),r.emptyView!==null&&(e=ef(t.job.views.get(r.emptyView),n,r.emptyI18nPlaceholder,e));break;case v.Projection:r.fallbackView!==null&&(e=ef(t.job.views.get(r.fallbackView),n,r.fallbackViewI18nPlaceholder,e));break}return e}function ef(t,e,n,r){if(n!==void 0){if(e===null)throw Error("Expected template with i18n placeholder to be in an i18n block.");r++,IF(t,e)}return yT(t,r)}function IF(t,e){if(t.create.head.next?.kind!==v.I18nStart){let n=t.job.allocateXrefId();N.insertAfter(Mh(n,e.message,e.root,null),t.create.head),N.insertBefore(Rh(n,null),t.create.tail)}}function AF(t){for(let e of t.units)for(let n of e.ops())It(n,r=>{if(!(r instanceof ao)||r.body===null)return;let i=new Ry(r.args.length);r.fn=t.pool.getSharedConstant(i,r.body),r.body=null})}var Ry=class extends mc{numArgs;constructor(e){super(),this.numArgs=e}keyOf(e){return e instanceof ns?`param(${e.index})`:super.keyOf(e)}toSharedConstantDeclaration(e,n){let r=[];for(let s=0;s<this.numArgs;s++)r.push(new Nt("a"+s));let i=U(n,s=>s instanceof ns?Ee("a"+s.index):s,be.None);return new wt(e,new Qs(r,i),void 0,Mt.Final)}};function DF(t){for(let e of t.units)for(let n of e.update)ot(n,(r,i)=>i&be.InChildOperation?r:r instanceof zr?kF(r):r instanceof gr?NF(r):r,be.None)}function kF(t){let e=[],n=[];for(let r of t.entries){if(r instanceof Zs){if(r.expression.isConstant())e.push(r);else{let i=n.length;n.push(r.expression),e.push(new Zs(new ns(i)))}continue}if(r.isConstant())e.push(r);else{let i=n.length;n.push(r),e.push(new ns(i))}}return new ao(Ae(e),n)}function NF(t){let e=[],n=[];for(let r of t.entries){if(r instanceof Ji){if(r.expression.isConstant())e.push(r);else{let i=n.length;n.push(r.expression),e.push(new Ji(new ns(i)))}continue}if(r.value.isConstant())e.push(r);else{let i=n.length;n.push(r.value),e.push(new Ca(r.key,new ns(i),r.quoted))}}return new ao(new gr(e),n)}function MF(t){for(let e of t.units)for(let n of e.ops())ot(n,r=>r instanceof _a&&(r.flags===null||!r.flags.includes("g"))?t.pool.getSharedConstant(new Py,r):r,be.None)}var Py=class extends mc{toSharedConstantDeclaration(e,n){return new wt(e,n,void 0,Mt.Final)}};function RF(t,e,n,r,i){return as(_.element,t,e,n,r,i)}function PF(t,e,n,r,i){return as(_.elementStart,t,e,n,r,i)}function as(t,e,n,r,i,s){let o=[T(e)];return n!==null&&o.push(T(n)),i!==null?o.push(T(r),T(i)):r!==null&&o.push(T(r)),oe(t,o,s)}function wT(t,e,n,r,i,s,o,a,l){let c=[T(e),n,T(r),T(i),T(s),T(o)];for(a!==null&&(c.push(T(a)),c.push(G(_.templateRefExtractor)));c[c.length-1].isEquivalent(Sa);)c.pop();return oe(t,c,l)}function w0(t,e,n,r,i){let s=[T(e)];return n instanceof Xe?s.push(fo(n,i)):s.push(n),r!==null&&s.push(r),oe(t,s,i)}function LF(t){return oe(_.elementEnd,[],t)}function OF(t,e,n,r){return as(_.elementContainerStart,t,null,e,n,r)}function FF(t,e,n,r){return as(_.elementContainer,t,null,e,n,r)}function BF(){return oe(_.elementContainerEnd,[],null)}function VF(t,e,n,r,i,s,o,a){return wT(_.templateCreate,t,e,n,r,i,s,o,a)}function UF(){return oe(_.disableBindings,[],null)}function $F(){return oe(_.enableBindings,[],null)}function HF(t,e,n,r,i){let s=[T(t),e];return n!==null&&s.push(G(n)),oe(r?_.syntheticHostListener:_.listener,s,i)}function Vb(t,e){return G(_.twoWayBindingSet).callFn([t,e])}function qF(t,e,n){return oe(_.twoWayListener,[T(t),e],n)}function GF(t,e){return oe(_.pipe,[T(t),T(e)],null)}function jF(){return oe(_.namespaceHTML,[],null)}function WF(){return oe(_.namespaceSVG,[],null)}function zF(){return oe(_.namespaceMathML,[],null)}function JF(t,e){return oe(_.advance,t>1?[T(t)]:[],e)}function YF(t){return G(_.reference).callFn([T(t)])}function KF(t){return G(_.nextContext).callFn(t===1?[]:[T(t)])}function QF(){return G(_.getCurrentView).callFn([])}function XF(t){return G(_.restoreView).callFn([t])}function ZF(t){return G(_.resetView).callFn([t])}function eB(t,e,n){let r=[T(t,null)];return e!==""&&r.push(T(e)),oe(_.text,r,n)}function tB(t,e,n,r,i,s,o,a,l,c,u){let h=[T(t),T(e),n??T(null),T(r),T(i),T(s),o??T(null),a??T(null),l?G(_.deferEnableTimerScheduling):T(null),T(u)],p;for(;(p=h[h.length-1])!==null&&p instanceof Lt&&p.value===null;)h.pop();return oe(_.defer,h,c)}var nB=new Map([[ke.Idle,{none:_.deferOnIdle,prefetch:_.deferPrefetchOnIdle,hydrate:_.deferHydrateOnIdle}],[ke.Immediate,{none:_.deferOnImmediate,prefetch:_.deferPrefetchOnImmediate,hydrate:_.deferHydrateOnImmediate}],[ke.Timer,{none:_.deferOnTimer,prefetch:_.deferPrefetchOnTimer,hydrate:_.deferHydrateOnTimer}],[ke.Hover,{none:_.deferOnHover,prefetch:_.deferPrefetchOnHover,hydrate:_.deferHydrateOnHover}],[ke.Interaction,{none:_.deferOnInteraction,prefetch:_.deferPrefetchOnInteraction,hydrate:_.deferHydrateOnInteraction}],[ke.Viewport,{none:_.deferOnViewport,prefetch:_.deferPrefetchOnViewport,hydrate:_.deferHydrateOnViewport}],[ke.Never,{none:_.deferHydrateNever,prefetch:_.deferHydrateNever,hydrate:_.deferHydrateNever}]]);function rB(t,e,n,r){let i=nB.get(t)?.[n];if(i===void 0)throw new Error(`Unable to determine instruction for trigger ${t}`);return oe(i,e,r)}function iB(t){return oe(_.projectionDef,t?[t]:[],null)}function sB(t,e,n,r,i,s,o){let a=[T(t)];return(e!==0||n!==null||r!==null)&&(a.push(T(e)),n!==null&&a.push(n),r!==null&&(n===null&&a.push(T(null)),a.push(Ee(r),T(i),T(s)))),oe(_.projection,a,o)}function oB(t,e,n,r){let i=[T(t),T(e)];return n!==null&&i.push(T(n)),oe(_.i18nStart,i,r)}function aB(t,e,n,r,i,s,o,a){let l=[T(t),e,T(n),T(r),T(i),T(s)];for(o!==null&&(l.push(T(o)),l.push(G(_.templateRefExtractor)));l[l.length-1].isEquivalent(Sa);)l.pop();return oe(_.conditionalCreate,l,a)}function lB(t,e,n,r,i,s,o,a){let l=[T(t),e,T(n),T(r),T(i),T(s)];for(o!==null&&(l.push(T(o)),l.push(G(_.templateRefExtractor)));l[l.length-1].isEquivalent(Sa);)l.pop();return oe(_.conditionalBranchCreate,l,a)}function cB(t,e,n,r,i,s,o,a,l,c,u,h,p,m){let g=[T(t),Ee(e),T(n),T(r),T(i),T(s),o];return(a||l!==null)&&(g.push(T(a)),l!==null&&(g.push(Ee(l),T(c),T(u)),(h!==null||p!==null)&&g.push(T(h)),p!==null&&g.push(T(p)))),oe(_.repeaterCreate,g,m)}function uB(t,e){return oe(_.repeater,[t],e)}function dB(t,e,n){return t==="prefetch"?oe(_.deferPrefetchWhen,[e],n):t==="hydrate"?oe(_.deferHydrateWhen,[e],n):oe(_.deferWhen,[e],n)}function fB(t,e){return oe(_.declareLet,[T(t)],e)}function hB(t,e){return G(_.storeLet).callFn([t],e)}function pB(t){return G(_.readContextLet).callFn([T(t)])}function mB(t,e,n,r){let i=[T(t),T(e)];return n&&i.push(T(n)),oe(_.i18n,i,r)}function gB(t){return oe(_.i18nEnd,[],t)}function vB(t,e){let n=[T(t),T(e)];return oe(_.i18nAttributes,n,null)}function yB(t,e,n){return w0(_.ariaProperty,t,e,null,n)}function wB(t,e,n,r){return w0(_.property,t,e,n,r)}function EB(t,e,n,r){let i=[];return e instanceof Xe?i.push(fo(e,r)):i.push(e),i.push(T(t)),n!==null&&i.push(n),oe(_.control,i,r)}function _B(t){return oe(_.controlCreate,[],t)}function CB(t,e,n,r){let i=[T(t),e];return n!==null&&i.push(n),oe(_.twoWayProperty,i,r)}function SB(t,e,n,r,i){let s=[T(t)];return e instanceof Xe?s.push(fo(e,i)):s.push(e),(n!==null||r!==null)&&s.push(n??T(null)),r!==null&&s.push(T(r)),oe(_.attribute,s,null)}function bB(t,e,n,r){let i=[T(t)];return e instanceof Xe?i.push(fo(e,r)):i.push(e),n!==null&&i.push(T(n)),oe(_.styleProp,i,r)}function xB(t,e,n){return oe(_.classProp,[T(t),e],n)}function TB(t,e){let n=t instanceof Xe?fo(t,e):t;return oe(_.styleMap,[n],e)}function IB(t,e){let n=t instanceof Xe?fo(t,e):t;return oe(_.classMap,[n],e)}function AB(t,e,n,r,i){return as(_.domElement,t,e,n,r,i)}function DB(t,e,n,r,i){return as(_.domElementStart,t,e,n,r,i)}function kB(t){return oe(_.domElementEnd,[],t)}function NB(t,e,n,r){return as(_.domElementContainerStart,t,null,e,n,r)}function MB(t,e,n,r){return as(_.domElementContainer,t,null,e,n,r)}function RB(){return oe(_.domElementContainerEnd,[],null)}function PB(t,e,n,r){let i=[T(t),e];return n!==null&&i.push(G(n)),oe(_.domListener,i,r)}function LB(t,e,n,r,i,s,o,a){return wT(_.domTemplate,t,e,n,r,i,s,o,a)}var Ub=[_.pipeBind1,_.pipeBind2,_.pipeBind3,_.pipeBind4];function OB(t,e,n){if(n.length<1||n.length>Ub.length)throw new Error("pipeBind() argument count out of bounds");let r=Ub[n.length-1];return G(r).callFn([T(t),T(e),...n])}function FB(t,e,n){return G(_.pipeBindV).callFn([T(t),T(e),n])}function BB(t,e,n){let r=ET(t,e);return XB(YB,[],r,n)}function VB(t,e){return oe(_.i18nExp,[t],e)}function UB(t,e){return oe(_.i18nApply,[T(t)],e)}function $B(t,e,n,r){return w0(_.domProperty,t,e,n,r)}function HB(t,e,n,r){let i=[e];n!==null&&i.push(n);let s=t==="enter"?_.animationEnter:_.animationLeave;return oe(s,i,r)}function qB(t,e,n,r){let s=[e instanceof Xe?fo(e,r):e];n!==null&&s.push(n);let o=t==="enter"?_.animationEnter:_.animationLeave;return oe(o,s,r)}function GB(t,e,n,r){let i=[e],s=t==="enter"?_.animationEnterListener:_.animationLeaveListener;return oe(s,i,r)}function jB(t,e,n){return oe(_.syntheticHostProperty,[T(t),e],n)}function WB(t,e,n){return E0(QB,[T(t),e],n,null)}function zB(t,e){return oe(_.attachSourceLocations,[T(t),e],null)}function ET(t,e){if(t.length<1||e.length!==t.length-1)throw new Error("AssertionError: expected specific shape of args for strings/expressions in interpolation");let n=[];if(e.length===1&&t[0]===""&&t[1]==="")n.push(e[0]);else{let r;for(r=0;r<e.length;r++)n.push(T(t[r]),e[r]);n.push(T(t[r]))}return n}function fo(t,e){let n=ET(t.strings,t.expressions);return E0(KB,[],n,e)}function oe(t,e,n){let r=G(t).callFn(e,n);return Qn(new Ht(r,n))}function JB(t,e,n){let r=[t];return e!==null&&r.push(e),oe(_.conditional,r,n)}var YB={constant:[_.textInterpolate,_.textInterpolate1,_.textInterpolate2,_.textInterpolate3,_.textInterpolate4,_.textInterpolate5,_.textInterpolate6,_.textInterpolate7,_.textInterpolate8],variable:_.textInterpolateV,mapping:t=>{if(t%2===0)throw new Error("Expected odd number of arguments");return(t-1)/2}},KB={constant:[_.interpolate,_.interpolate1,_.interpolate2,_.interpolate3,_.interpolate4,_.interpolate5,_.interpolate6,_.interpolate7,_.interpolate8],variable:_.interpolateV,mapping:t=>{if(t%2===0)throw new Error("Expected odd number of arguments");return(t-1)/2}},QB={constant:[_.pureFunction0,_.pureFunction1,_.pureFunction2,_.pureFunction3,_.pureFunction4,_.pureFunction5,_.pureFunction6,_.pureFunction7,_.pureFunction8],variable:_.pureFunctionV,mapping:t=>t};function E0(t,e,n,r){let i=t.mapping(n.length),s=n.at(-1);if(n.length>1&&s instanceof Lt&&s.value===""&&n.pop(),i<t.constant.length)return G(t.constant[i]).callFn([...e,...n],r);if(t.variable!==null)return G(t.variable).callFn([...e,Ae(n)],r);throw new Error("AssertionError: unable to call variadic function")}function XB(t,e,n,r){return Qn(E0(t,e,n,r).toStmt())}var ZB=new Map([["window",_.resolveWindow],["document",_.resolveDocument],["body",_.resolveBody]]),eV=new Map([["class","className"],["for","htmlFor"],["formaction","formAction"],["innerHtml","innerHTML"],["readonly","readOnly"],["tabindex","tabIndex"]]);function tV(t){for(let e of t.units)nV(e,e.create),_0(e,e.update)}function nV(t,e){for(let n of e)switch(ot(n,_T,be.None),n.kind){case v.Text:N.replace(n,eB(n.handle.slot,n.initialValue,n.sourceSpan));break;case v.ElementStart:N.replace(n,t.job.mode===cn.DomOnly?DB(n.handle.slot,n.tag,n.attributes,n.localRefs,n.startSourceSpan):PF(n.handle.slot,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.Element:N.replace(n,t.job.mode===cn.DomOnly?AB(n.handle.slot,n.tag,n.attributes,n.localRefs,n.wholeSourceSpan):RF(n.handle.slot,n.tag,n.attributes,n.localRefs,n.wholeSourceSpan));break;case v.ElementEnd:N.replace(n,t.job.mode===cn.DomOnly?kB(n.sourceSpan):LF(n.sourceSpan));break;case v.ContainerStart:N.replace(n,t.job.mode===cn.DomOnly?NB(n.handle.slot,n.attributes,n.localRefs,n.startSourceSpan):OF(n.handle.slot,n.attributes,n.localRefs,n.startSourceSpan));break;case v.Container:N.replace(n,t.job.mode===cn.DomOnly?MB(n.handle.slot,n.attributes,n.localRefs,n.wholeSourceSpan):FF(n.handle.slot,n.attributes,n.localRefs,n.wholeSourceSpan));break;case v.ContainerEnd:N.replace(n,t.job.mode===cn.DomOnly?RB():BF());break;case v.I18nStart:N.replace(n,oB(n.handle.slot,n.messageIndex,n.subTemplateIndex,n.sourceSpan));break;case v.I18nEnd:N.replace(n,gB(n.sourceSpan));break;case v.I18n:N.replace(n,mB(n.handle.slot,n.messageIndex,n.subTemplateIndex,n.sourceSpan));break;case v.I18nAttributes:if(n.i18nAttributesConfig===null)throw new Error("AssertionError: i18nAttributesConfig was not set");N.replace(n,vB(n.handle.slot,n.i18nAttributesConfig));break;case v.Template:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let r=t.job.views.get(n.xref);N.replace(n,n.templateKind===pn.Block||t.job.mode===cn.DomOnly?LB(n.handle.slot,Ee(r.fnName),r.decls,r.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan):VF(n.handle.slot,Ee(r.fnName),r.decls,r.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.DisableBindings:N.replace(n,UF());break;case v.EnableBindings:N.replace(n,$F());break;case v.Pipe:N.replace(n,GF(n.handle.slot,n.name));break;case v.DeclareLet:N.replace(n,fB(n.handle.slot,n.sourceSpan));break;case v.AnimationString:N.replace(n,qB(n.animationKind,n.expression,n.sanitizer,n.sourceSpan));break;case v.Animation:let i=tf(t,n.handlerFnName,n.handlerOps,!1);N.replace(n,HB(n.animationKind,i,n.sanitizer,n.sourceSpan));break;case v.AnimationListener:let s=tf(t,n.handlerFnName,n.handlerOps,n.consumesDollarEvent);N.replace(n,GB(n.animationKind,s,null,n.sourceSpan));break;case v.Listener:let o=tf(t,n.handlerFnName,n.handlerOps,n.consumesDollarEvent),a=n.eventTarget?ZB.get(n.eventTarget):null;if(a===void 0)throw new Error(`Unexpected global target '${n.eventTarget}' defined for '${n.name}' event. Supported list of global targets: window,document,body.`);N.replace(n,t.job.mode===cn.DomOnly&&!n.hostListener&&!n.isLegacyAnimationListener?PB(n.name,o,a,n.sourceSpan):HF(n.name,o,a,n.hostListener&&n.isLegacyAnimationListener,n.sourceSpan));break;case v.TwoWayListener:N.replace(n,qF(n.name,tf(t,n.handlerFnName,n.handlerOps,!0),n.sourceSpan));break;case v.Variable:if(n.variable.name===null)throw new Error(`AssertionError: unnamed variable ${n.xref}`);N.replace(n,Qn(new wt(n.variable.name,n.initializer,void 0,Mt.Final)));break;case v.Namespace:switch(n.active){case $t.HTML:N.replace(n,jF());break;case $t.SVG:N.replace(n,WF());break;case $t.Math:N.replace(n,zF());break}break;case v.Defer:let l=!!n.loadingMinimumTime||!!n.loadingAfterTime||!!n.placeholderMinimumTime;N.replace(n,tB(n.handle.slot,n.mainSlot.slot,n.resolverFn,n.loadingSlot?.slot??null,n.placeholderSlot?.slot??null,n.errorSlot?.slot??null,n.loadingConfig,n.placeholderConfig,l,n.sourceSpan,n.flags));break;case v.DeferOn:let c=[];switch(n.trigger.kind){case ke.Never:case ke.Idle:case ke.Immediate:break;case ke.Timer:c=[T(n.trigger.delay)];break;case ke.Viewport:n.modifier==="hydrate"?c=n.trigger.options?[n.trigger.options]:[]:(c=[T(n.trigger.targetSlot?.slot??null)],n.trigger.targetSlotViewSteps!==0?c.push(T(n.trigger.targetSlotViewSteps)):n.trigger.options&&c.push(T(null)),n.trigger.options&&c.push(n.trigger.options));break;case ke.Interaction:case ke.Hover:n.modifier==="hydrate"?c=[]:(c=[T(n.trigger.targetSlot?.slot??null)],n.trigger.targetSlotViewSteps!==0&&c.push(T(n.trigger.targetSlotViewSteps)));break;default:throw new Error(`AssertionError: Unsupported reification of defer trigger kind ${n.trigger.kind}`)}N.replace(n,rB(n.trigger.kind,c,n.modifier,n.sourceSpan));break;case v.ProjectionDef:N.replace(n,iB(n.def));break;case v.Projection:if(n.handle.slot===null)throw new Error("No slot was assigned for project instruction");let u=null,h=null,p=null;if(n.fallbackView!==null){if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");let b=t.job.views.get(n.fallbackView);if(b===void 0)throw new Error("AssertionError: projection had fallback view xref, but fallback view was not found");if(b.fnName===null||b.decls===null||b.vars===null)throw new Error("AssertionError: expected projection fallback view to have been named and counted");u=b.fnName,h=b.decls,p=b.vars}N.replace(n,sB(n.handle.slot,n.projectionSlotIndex,n.attributes,u,h,p,n.sourceSpan));break;case v.ConditionalCreate:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let m=t.job.views.get(n.xref);N.replace(n,aB(n.handle.slot,Ee(m.fnName),m.decls,m.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.ConditionalBranchCreate:if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");if(Array.isArray(n.localRefs))throw new Error("AssertionError: local refs array should have been extracted into a constant");let g=t.job.views.get(n.xref);N.replace(n,lB(n.handle.slot,Ee(g.fnName),g.decls,g.vars,n.tag,n.attributes,n.localRefs,n.startSourceSpan));break;case v.RepeaterCreate:if(n.handle.slot===null)throw new Error("No slot was assigned for repeater instruction");if(!(t instanceof Jn))throw new Error("AssertionError: must be compiling a component");let y=t.job.views.get(n.xref);if(y.fnName===null)throw new Error("AssertionError: expected repeater primary view to have been named");let E=null,w=null,I=null;if(n.emptyView!==null){let b=t.job.views.get(n.emptyView);if(b===void 0)throw new Error("AssertionError: repeater had empty view xref, but empty view was not found");if(b.fnName===null||b.decls===null||b.vars===null)throw new Error("AssertionError: expected repeater empty view to have been named and counted");E=b.fnName,w=b.decls,I=b.vars}N.replace(n,cB(n.handle.slot,y.fnName,n.decls,n.vars,n.tag,n.attributes,sV(t,n),n.usesComponentInstance,E,w,I,n.emptyTag,n.emptyAttributes,n.wholeSourceSpan));break;case v.SourceLocation:let D=Ae(n.locations.map(({targetSlot:b,offset:L,line:M,column:q})=>{if(b.slot===null)throw new Error("No slot was assigned for source location");return Ae([T(b.slot),T(L),T(M),T(q)])}));N.replace(n,zB(n.templatePath,D));break;case v.ControlCreate:N.replace(n,_B(n.sourceSpan));break;case v.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of create op ${v[n.kind]}`)}}function _0(t,e){for(let n of e)switch(ot(n,_T,be.None),n.kind){case v.Advance:N.replace(n,JF(n.delta,n.sourceSpan));break;case v.Property:N.replace(n,t.job.mode===cn.DomOnly&&n.bindingKind!==H.LegacyAnimation&&n.bindingKind!==H.Animation?$b(n):rV(n));break;case v.Control:N.replace(n,iV(n));break;case v.TwoWayProperty:N.replace(n,CB(n.name,n.expression,n.sanitizer,n.sourceSpan));break;case v.StyleProp:N.replace(n,bB(n.name,n.expression,n.unit,n.sourceSpan));break;case v.ClassProp:N.replace(n,xB(n.name,n.expression,n.sourceSpan));break;case v.StyleMap:N.replace(n,TB(n.expression,n.sourceSpan));break;case v.ClassMap:N.replace(n,IB(n.expression,n.sourceSpan));break;case v.I18nExpression:N.replace(n,VB(n.expression,n.sourceSpan));break;case v.I18nApply:N.replace(n,UB(n.handle.slot,n.sourceSpan));break;case v.InterpolateText:N.replace(n,BB(n.interpolation.strings,n.interpolation.expressions,n.sourceSpan));break;case v.Attribute:N.replace(n,SB(n.name,n.expression,n.sanitizer,n.namespace,n.sourceSpan));break;case v.DomProperty:if(n.expression instanceof Xe)throw new Error("not yet handled");n.bindingKind===H.LegacyAnimation||n.bindingKind===H.Animation?N.replace(n,jB(n.name,n.expression,n.sourceSpan)):N.replace(n,$b(n));break;case v.Variable:if(n.variable.name===null)throw new Error(`AssertionError: unnamed variable ${n.xref}`);N.replace(n,Qn(new wt(n.variable.name,n.initializer,void 0,Mt.Final)));break;case v.Conditional:if(n.processed===null)throw new Error("Conditional test was not set.");N.replace(n,JB(n.processed,n.contextValue,n.sourceSpan));break;case v.Repeater:N.replace(n,uB(n.collection,n.sourceSpan));break;case v.DeferWhen:N.replace(n,dB(n.modifier,n.expr,n.sourceSpan));break;case v.StoreLet:throw new Error(`AssertionError: unexpected storeLet ${n.declaredName}`);case v.Statement:break;default:throw new Error(`AssertionError: Unsupported reification of update op ${v[n.kind]}`)}}function $b(t){return $B(eV.get(t.name)??t.name,t.expression,t.sanitizer,t.sourceSpan)}function rV(t){return sT(t.name)?yB(t.name,t.expression,t.sourceSpan):wB(t.name,t.expression,t.sanitizer,t.sourceSpan)}function iV(t){return EB(t.name,t.expression,t.sanitizer,t.sourceSpan)}function _T(t){if(!Xr(t))return t;switch(t.kind){case j.NextContext:return KF(t.steps);case j.Reference:return YF(t.targetSlot.slot+1+t.offset);case j.LexicalRead:throw new Error(`AssertionError: unresolved LexicalRead of ${t.name}`);case j.TwoWayBindingSet:throw new Error("AssertionError: unresolved TwoWayBindingSet");case j.RestoreView:if(typeof t.view=="number")throw new Error("AssertionError: unresolved RestoreView");return XF(t.view);case j.ResetView:return ZF(t.expr);case j.GetCurrentView:return QF();case j.ReadVariable:if(t.name===null)throw new Error(`Read of unnamed variable ${t.xref}`);return Ee(t.name);case j.ReadTemporaryExpr:if(t.name===null)throw new Error(`Read of unnamed temporary ${t.xref}`);return Ee(t.name);case j.AssignTemporaryExpr:if(t.name===null)throw new Error(`Assign of unnamed temporary ${t.xref}`);return Ee(t.name).set(t.expr);case j.PureFunctionExpr:if(t.fn===null)throw new Error("AssertionError: expected PureFunctions to have been extracted");return WB(t.varOffset,t.fn,t.args);case j.PureFunctionParameterExpr:throw new Error("AssertionError: expected PureFunctionParameterExpr to have been extracted");case j.PipeBinding:return OB(t.targetSlot.slot,t.varOffset,t.args);case j.PipeBindingVariadic:return FB(t.targetSlot.slot,t.varOffset,t.args);case j.SlotLiteralExpr:return T(t.slot.slot);case j.ContextLetReference:return pB(t.targetSlot.slot);case j.StoreLet:return hB(t.value,t.sourceSpan);case j.TrackContext:return Ee("this");default:throw new Error(`AssertionError: Unsupported reification of ir.Expression kind: ${j[t.kind]}`)}}function tf(t,e,n,r){_0(t,n);let i=[];for(let o of n){if(o.kind!==v.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${v[o.kind]}`);i.push(o.statement)}let s=[];return r&&s.push(new Nt("$event")),Yi(s,i,void 0,void 0,e)}function sV(t,e){if(e.trackByFn!==null)return e.trackByFn;let n=[new Nt("$index"),new Nt("$item")],r;if(e.trackByOps===null)r=e.usesComponentInstance?Yi(n,[new Rt(e.track)]):Jr(n,e.track);else{_0(t,e.trackByOps);let i=[];for(let s of e.trackByOps){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected reified statements, but found op ${v[s.kind]}`);i.push(s.statement)}r=e.usesComponentInstance||i.length!==1||!(i[0]instanceof Rt)?Yi(n,i):Jr(n,i[0].value)}return e.trackByFn=t.job.pool.getSharedFunctionReference(r,"_forTrack"),e.trackByFn}function oV(t){for(let e of t.units)for(let n of e.update)switch(n.kind){case v.Attribute:case v.Binding:case v.ClassProp:case v.ClassMap:case v.Property:case v.StyleProp:case v.StyleMap:n.expression instanceof Yc&&N.remove(n);break}}function aV(t){for(let e of t.units)for(let n of e.create)switch(n.kind){case v.I18nContext:N.remove(n);break;case v.I18nStart:n.context=null;break}}function lV(t){for(let e of t.units)for(let n of e.update){if(n.kind!==v.Variable||n.variable.kind!==Tt.Identifier||!(n.initializer instanceof Wc))continue;let r=n.variable.identifier,i=n;for(;i&&i.kind!==v.ListEnd;)ot(i,s=>s instanceof Dt&&s.name===r?T(void 0):s,be.None),i=i.prev}}function cV(t){for(let e of t.units){let n=new Set;for(let r of e.update)r.kind===v.I18nExpression&&n.add(r.i18nOwner);for(let r of e.create)switch(r.kind){case v.I18nAttributes:if(n.has(r.xref))continue;N.remove(r)}}}function uV(t){for(let e of t.units)gh(e,e.create),gh(e,e.update)}function gh(t,e){let n=new Map;n.set(t.xref,Ee("ctx"));for(let r of e)switch(r.kind){case v.Variable:r.variable.kind===Tt.Context&&n.set(r.variable.view,new vi(r.xref));break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:gh(t,r.handlerOps);break;case v.RepeaterCreate:r.trackByOps!==null&&gh(t,r.trackByOps);break}t===t.job.root&&n.set(t.xref,Ee("ctx"));for(let r of e)ot(r,i=>{if(i instanceof ts){if(!n.has(i.view))throw new Error(`No context found for reference to view ${i.view} from view ${t.xref}`);return n.get(i.view)}else return i},be.None)}function dV(t){for(let e of t.units)for(let n of e.create)if(n.kind===v.Defer){if(n.resolverFn!==null)continue;if(n.ownResolverFn!==null){if(n.handle.slot===null)throw new Error("AssertionError: slot must be assigned before extracting defer deps functions");let r=e.fnName?.replace("_Template","");n.resolverFn=t.pool.getSharedFunctionReference(n.ownResolverFn,`${r}_Defer_${n.handle.slot}_DepsFn`,!1)}}}function fV(t){for(let e of t.units)Hb(e.create),Hb(e.update)}function Hb(t){for(let e of t)(e.kind===v.Listener||e.kind===v.TwoWayListener||e.kind===v.AnimationListener)&&ot(e,n=>n instanceof Dt&&n.name==="$event"?((e.kind===v.Listener||e.kind===v.AnimationListener)&&(e.consumesDollarEvent=!0),new pr(n.name)):n,be.InChildOperation)}function hV(t){let e=new Map,n=new Map;for(let r of t.units)for(let i of r.create)switch(i.kind){case v.I18nContext:e.set(i.xref,i);break;case v.ElementStart:n.set(i.xref,i);break}Fr(t,t.root,e,n)}function Fr(t,e,n,r,i){let s=null,o=new Map;for(let a of e.create)switch(a.kind){case v.I18nStart:if(!a.context)throw Error("Could not find i18n context for i18n op");s={i18nBlock:a,i18nContext:n.get(a.context)};break;case v.I18nEnd:s=null;break;case v.ElementStart:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");qb(a,s.i18nContext,s.i18nBlock,i),i&&a.i18nPlaceholder.closeName&&o.set(a.xref,i),i=void 0}break;case v.ElementEnd:let l=r.get(a.xref);if(l&&l.i18nPlaceholder!==void 0){if(s===null)throw Error("AssertionError: i18n tag placeholder should only occur inside an i18n block");Gb(l,s.i18nContext,s.i18nBlock,o.get(a.xref)),o.delete(a.xref)}break;case v.Projection:if(a.i18nPlaceholder!==void 0){if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");qb(a,s.i18nContext,s.i18nBlock,i),Gb(a,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.fallbackView!==null){let p=t.views.get(a.fallbackView);if(a.fallbackViewI18nPlaceholder===void 0)Fr(t,p,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");nf(t,p,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Fr(t,p,n,r),rf(t,p,a.handle.slot,a.fallbackViewI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break;case v.ConditionalCreate:case v.ConditionalBranchCreate:case v.Template:let c=t.views.get(a.xref);if(a.i18nPlaceholder===void 0)Fr(t,c,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");a.templateKind===pn.Structural?Fr(t,c,n,r,a):(nf(t,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Fr(t,c,n,r),rf(t,c,a.handle.slot,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0)}break;case v.RepeaterCreate:if(i!==void 0)throw Error("AssertionError: Unexpected structural directive associated with @for block");let u=a.handle.slot+1,h=t.views.get(a.xref);if(a.i18nPlaceholder===void 0)Fr(t,h,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");nf(t,h,u,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),Fr(t,h,n,r),rf(t,h,u,a.i18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}if(a.emptyView!==null){let p=a.handle.slot+2,m=t.views.get(a.emptyView);if(a.emptyI18nPlaceholder===void 0)Fr(t,m,n,r);else{if(s===null)throw Error("i18n tag placeholder should only occur inside an i18n block");nf(t,m,p,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),Fr(t,m,n,r),rf(t,m,p,a.emptyI18nPlaceholder,s.i18nContext,s.i18nBlock,i),i=void 0}}break}}function qb(t,e,n,r){let{startName:i,closeName:s}=t.i18nPlaceholder,o=Le.ElementTag|Le.OpenTag,a=t.handle.slot;r!==void 0&&(o|=Le.TemplateTag,a={element:a,template:r.handle.slot}),s||(o|=Le.CloseTag),Ba(e.params,i,a,n.subTemplateIndex,o)}function Gb(t,e,n,r){let{closeName:i}=t.i18nPlaceholder;if(i){let s=Le.ElementTag|Le.CloseTag,o=t.handle.slot;r!==void 0&&(s|=Le.TemplateTag,o={element:o,template:r.handle.slot}),Ba(e.params,i,o,n.subTemplateIndex,s)}}function nf(t,e,n,r,i,s,o){let{startName:a,closeName:l}=r,c=Le.TemplateTag|Le.OpenTag;l||(c|=Le.CloseTag),o!==void 0&&Ba(i.params,a,o.handle.slot,s.subTemplateIndex,c),Ba(i.params,a,n,CT(t,s,e),c)}function rf(t,e,n,r,i,s,o){let{closeName:a}=r,l=Le.TemplateTag|Le.CloseTag;a&&(Ba(i.params,a,n,CT(t,s,e),l),o!==void 0&&Ba(i.params,a,o.handle.slot,s.subTemplateIndex,l))}function CT(t,e,n){for(let r of n.create)if(r.kind===v.I18nStart)return r.subTemplateIndex;return e.subTemplateIndex}function Ba(t,e,n,r,i){let s=t.get(e)??[];s.push({value:n,subTemplateIndex:r,flags:i}),t.set(e,s)}function pV(t){let e=new Map,n=new Map,r=new Map;for(let o of t.units)for(let a of o.create)switch(a.kind){case v.I18nStart:e.set(a.xref,a.subTemplateIndex);break;case v.I18nContext:n.set(a.xref,a);break;case v.IcuPlaceholder:r.set(a.xref,a);break}let i=new Map,s=o=>o.usage===Ua.I18nText?o.i18nOwner:o.context;for(let o of t.units)for(let a of o.update)if(a.kind===v.I18nExpression){let l=i.get(s(a))||0,c=e.get(a.i18nOwner)??null,u={value:l,subTemplateIndex:c,flags:Le.ExpressionIndex};mV(a,u,n,r),i.set(s(a),l+1)}}function mV(t,e,n,r){if(t.i18nPlaceholder!==null){let i=n.get(t.context),s=t.resolutionTime===Gc.Creation?i.params:i.postprocessingParams,o=s.get(t.i18nPlaceholder)||[];o.push(e),s.set(t.i18nPlaceholder,o)}t.icuPlaceholder!==null&&r.get(t.icuPlaceholder)?.expressionPlaceholders.push(e)}function gV(t){for(let e of t.units)vh(e,e.create,null),vh(e,e.update,null)}function vh(t,e,n){let r=new Map,i=new Map;for(let s of e)switch(s.kind){case v.Variable:switch(s.variable.kind){case Tt.Identifier:if(s.variable.local){if(i.has(s.variable.identifier))continue;i.set(s.variable.identifier,s.xref)}else if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case Tt.Alias:if(r.has(s.variable.identifier))continue;r.set(s.variable.identifier,s.xref);break;case Tt.SavedView:n={view:s.variable.view,variable:s.xref};break}break;case v.Animation:case v.AnimationListener:case v.Listener:case v.TwoWayListener:vh(t,s.handlerOps,n);break;case v.RepeaterCreate:s.trackByOps!==null&&vh(t,s.trackByOps,n);break}for(let s of e)s.kind==v.Listener||s.kind===v.TwoWayListener||s.kind===v.Animation||s.kind===v.AnimationListener||ot(s,o=>{if(o instanceof Dt)return i.has(o.name)?new vi(i.get(o.name)):r.has(o.name)?new vi(r.get(o.name)):new Nn(new ts(t.job.root.xref),o.name);if(o instanceof Zf&&typeof o.view=="number"){if(n===null||n.view!==o.view)throw new Error(`AssertionError: no saved view ${o.view} from view ${t.xref}`);return o.view=new vi(n.variable),o}else return o},be.None);for(let s of e)It(s,o=>{if(o instanceof Dt)throw new Error(`AssertionError: no lexical reads should remain, but found read of ${o.name}`)})}var vV=new Map([[Ne.HTML,_.sanitizeHtml],[Ne.RESOURCE_URL,_.sanitizeResourceUrl],[Ne.SCRIPT,_.sanitizeScript],[Ne.STYLE,_.sanitizeStyle],[Ne.URL,_.sanitizeUrl],[Ne.ATTRIBUTE_NO_BINDING,_.validateAttribute]]),yV=new Map([[Ne.HTML,_.trustConstantHtml],[Ne.RESOURCE_URL,_.trustConstantResourceUrl]]);function wV(t){for(let e of t.units){if(t.kind!==B.Host){for(let n of e.create)if(n.kind===v.ExtractedAttribute){let r=yV.get(jb(n.securityContext))??null;n.trustedValueFn=r!==null?G(r):null}}for(let n of e.update)switch(n.kind){case v.Property:case v.Attribute:case v.DomProperty:let r=null;Array.isArray(n.securityContext)&&n.securityContext.length===2&&n.securityContext.includes(Ne.URL)&&n.securityContext.includes(Ne.RESOURCE_URL)?r=_.sanitizeUrlOrResourceUrl:r=vV.get(jb(n.securityContext))??null,n.sanitizer=r!==null?G(r):null;break}}}function jb(t){if(Array.isArray(t)){if(t.length>1)throw Error("AssertionError: Ambiguous security context");return t[0]||Ne.NONE}return t}function EV(t){for(let e of t.units){e.create.prepend([Gi(e.job.allocateXrefId(),{kind:Tt.SavedView,name:null,view:e.xref},new ly,zn.None)]);for(let n of e.create){if(n.kind!==v.Listener&&n.kind!==v.TwoWayListener&&n.kind!==v.Animation&&n.kind!==v.AnimationListener)continue;let r=e!==t.root;if(!r)for(let i of n.handlerOps)It(i,s=>{(s instanceof Qf||s instanceof zc)&&(r=!0)});r&&_V(e,n)}}}function _V(t,e){e.handlerOps.prepend([Gi(t.job.allocateXrefId(),{kind:Tt.Context,name:null,view:t.xref},new Zf(t.xref),zn.None)]);for(let n of e.handlerOps)n.kind===v.Statement&&n.statement instanceof Rt&&(n.statement.value=new cy(n.statement.value))}function CV(t){let e=new Map;for(let n of t.units){let r=0;for(let i of n.create)Ha(i)&&(i.handle.slot=r,e.set(i.xref,i.handle.slot),r+=i.numSlotsUsed);n.decls=r}for(let n of t.units)for(let r of n.ops())if(r.kind===v.Template||r.kind===v.ConditionalCreate||r.kind===v.ConditionalBranchCreate||r.kind===v.RepeaterCreate){let i=t.views.get(r.xref);r.decls=i.decls}}function SV(t){let e=new Set,n=new Map;for(let r of t.units)for(let i of r.ops())i.kind===v.DeclareLet&&n.set(i.xref,i),It(i,s=>{s instanceof zc&&e.add(s.target)});for(let r of t.units)for(let i of r.update)ot(i,s=>s instanceof Wc&&!e.has(s.target)?(bV(s)||N.remove(n.get(s.target)),s.value):s,be.None)}function bV(t){let e=!1;return U(t,n=>((n instanceof lo||n instanceof Jc)&&(e=!0),n),be.None),e}function xV(t){let e=new Set;for(let n of t.units)for(let r of n.ops())It(r,i=>{if(i instanceof Ce)switch(i.operator){case R.Exponentiation:TV(i,e);break;case R.NullishCoalesce:IV(i,e);break;case R.And:case R.Or:AV(i,e)}});for(let n of t.units)for(let r of n.ops())ot(r,i=>i instanceof mr?e.has(i)?i:i.expr:i,be.None)}function TV(t,e){t.lhs instanceof mr&&t.lhs.expr instanceof Xs&&e.add(t.lhs)}function IV(t,e){t.lhs instanceof mr&&(Wb(t.lhs.expr)||t.lhs.expr instanceof Wr)&&e.add(t.lhs),t.rhs instanceof mr&&(Wb(t.rhs.expr)||t.rhs.expr instanceof Wr)&&e.add(t.rhs)}function AV(t,e){t.lhs instanceof mr&&t.lhs.expr instanceof Ce&&t.lhs.expr.operator===R.NullishCoalesce&&e.add(t.lhs)}function Wb(t){return t instanceof Ce&&(t.operator===R.And||t.operator===R.Or)}function DV(t){for(let e of t.units)for(let n of e.update)if(n.kind===v.Binding)switch(n.bindingKind){case H.ClassName:if(n.expression instanceof Xe)throw new Error("Unexpected interpolation in ClassName binding");N.replace(n,e2(n.target,n.name,n.expression,n.sourceSpan));break;case H.StyleProperty:N.replace(n,ZP(n.target,n.name,n.expression,n.unit,n.sourceSpan));break;case H.Property:case H.Template:n.name==="style"?N.replace(n,t2(n.target,n.expression,n.sourceSpan)):n.name==="class"&&N.replace(n,n2(n.target,n.expression,n.sourceSpan));break}}function kV(t){for(let e of t.units)e.create.prepend(yh(e.create)),e.update.prepend(yh(e.update))}function yh(t){let e=0,n=[];for(let r of t){let i=new Map;It(r,(c,u)=>{u&be.InChildOperation||c instanceof rs&&i.set(c.xref,c)});let s=0,o=new Set,a=new Set,l=new Map;It(r,(c,u)=>{u&be.InChildOperation||(c instanceof Zr?(o.has(c.xref)||(o.add(c.xref),l.set(c.xref,`tmp_${e}_${s++}`)),zb(l,c)):c instanceof rs&&(i.get(c.xref)===c&&(a.add(c.xref),s--),zb(l,c)))}),n.push(...Array.from(new Set(l.values())).map(c=>Qn(new wt(c)))),e++,r.kind===v.Listener||r.kind===v.Animation||r.kind===v.AnimationListener||r.kind===v.TwoWayListener?r.handlerOps.prepend(yh(r.handlerOps)):r.kind===v.RepeaterCreate&&r.trackByOps!==null&&r.trackByOps.prepend(yh(r.trackByOps))}return n}function zb(t,e){let n=t.get(e.xref);if(n===void 0)throw new Error(`Found xref with unassigned name: ${e.xref}`);e.name=n}function NV(t){for(let e of t.units)for(let n of e.create)if(n.kind===v.RepeaterCreate)if(n.track instanceof pr&&n.track.name==="$index")n.trackByFn=G(_.repeaterTrackByIndex);else if(n.track instanceof pr&&n.track.name==="$item")n.trackByFn=G(_.repeaterTrackByIdentity);else if(MV(t.root.xref,n.track))n.usesComponentInstance=!0,n.track.receiver.receiver.view===e.xref?n.trackByFn=n.track.receiver:(n.trackByFn=G(_.componentInstance).callFn([]).prop(n.track.receiver.name),n.track=n.trackByFn);else{n.track=U(n.track,i=>{if(i instanceof lo||i instanceof Jc)throw new Error("Illegal State: Pipes are not allowed in this context");return i instanceof ts?(n.usesComponentInstance=!0,new ay(i.view)):i},be.None);let r=new N;r.push(Qn(new Rt(n.track,n.track.sourceSpan))),n.trackByOps=r}}function MV(t,e){if(!(e instanceof mn)||e.args.length===0||e.args.length>2||!(e.receiver instanceof Nn&&e.receiver.receiver instanceof ts)||e.receiver.receiver.view!==t)return!1;let[n,r]=e.args;return!(n instanceof pr)||n.name!=="$index"?!1:e.args.length===1?!0:!(!(r instanceof pr)||r.name!=="$item")}function RV(t){for(let e of t.units)for(let n of e.create)n.kind===v.RepeaterCreate&&(n.track=U(n.track,r=>{if(r instanceof Dt){if(n.varNames.$index.has(r.name))return Ee("$index");if(r.name===n.varNames.$implicit)return Ee("$item")}return r},be.None))}function PV(t){for(let e of t.units)for(let n of e.create)n.kind===v.TwoWayListener&&ot(n,r=>{if(!(r instanceof eh))return r;let{target:i,value:s}=r;if(i instanceof Nn||i instanceof yi)return Vb(i,s).or(i.set(s));if(i instanceof vi)return Vb(i,s);throw new Error("Unsupported expression in two-way action binding.")},be.InChildOperation)}function LV(t){for(let e of t.units){let n=0;for(let r of e.ops())fv(r)&&(n+=OV(r));for(let r of e.ops())It(r,i=>{Xr(i)&&(t.compatibility===Rn.TemplateDefinitionBuilder&&i instanceof ao||(tb(i)&&(i.varOffset=n),fv(i)&&(n+=Jb(i))))});if(t.compatibility===Rn.TemplateDefinitionBuilder)for(let r of e.ops())It(r,i=>{!Xr(i)||!(i instanceof ao)||(tb(i)&&(i.varOffset=n),fv(i)&&(n+=Jb(i)))});e.vars=n}if(t instanceof Qc)for(let e of t.units)for(let n of e.create){if(n.kind!==v.Template&&n.kind!==v.RepeaterCreate&&n.kind!==v.ConditionalCreate&&n.kind!==v.ConditionalBranchCreate)continue;let r=t.views.get(n.xref);n.vars=r.vars}}function OV(t){let e;switch(t.kind){case v.Attribute:return e=1,t.expression instanceof Xe&&!FV(t.expression)&&(e+=t.expression.expressions.length),e;case v.Property:case v.DomProperty:return e=1,t.expression instanceof Xe&&(e+=t.expression.expressions.length),e;case v.Control:return 2;case v.TwoWayProperty:return 1;case v.StyleProp:case v.ClassProp:case v.StyleMap:case v.ClassMap:return e=2,t.expression instanceof Xe&&(e+=t.expression.expressions.length),e;case v.InterpolateText:return t.interpolation.expressions.length;case v.I18nExpression:case v.Conditional:case v.DeferWhen:case v.StoreLet:return 1;case v.RepeaterCreate:return t.emptyView?1:0;default:throw new Error(`Unhandled op: ${v[t.kind]}`)}}function Jb(t){switch(t.kind){case j.PureFunctionExpr:return 1+t.args.length;case j.PipeBinding:return 1+t.args.length;case j.PipeBindingVariadic:return 1+t.numArgs;case j.StoreLet:return 1;default:throw new Error(`AssertionError: unhandled ConsumesVarsTrait expression ${t.constructor.name}`)}}function FV(t){return!(t.expressions.length!==1||t.strings.length!==2||t.strings[0]!==""||t.strings[1]!=="")}function BV(t){for(let e of t.units){sf(e.create),sf(e.update);for(let n of e.create)n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener?sf(n.handlerOps):n.kind===v.RepeaterCreate&&n.trackByOps!==null&&sf(n.trackByOps);of(e.create,t.compatibility),of(e.update,t.compatibility);for(let n of e.create)n.kind===v.Listener||n.kind===v.Animation||n.kind===v.AnimationListener||n.kind===v.TwoWayListener?of(n.handlerOps,t.compatibility):n.kind===v.RepeaterCreate&&n.trackByOps!==null&&of(n.trackByOps,t.compatibility)}}var yt=(function(t){return t[t.None=0]="None",t[t.ViewContextRead=1]="ViewContextRead",t[t.ViewContextWrite=2]="ViewContextWrite",t[t.SideEffectful=4]="SideEffectful",t})(yt||{});function sf(t){let e=new Map;for(let n of t)n.kind===v.Variable&&n.flags&zn.AlwaysInline&&(It(n,r=>{if(Xr(r)&&C0(r)!==yt.None)throw new Error("AssertionError: A context-sensitive variable was marked AlwaysInline")}),e.set(n.xref,n)),ot(n,r=>r instanceof vi&&e.has(r.xref)?e.get(r.xref).initializer.clone():r,be.None);for(let n of e.values())N.remove(n)}function of(t,e){let n=new Map,r=new Map,i=new Set,s=new Map;for(let c of t){if(c.kind===v.Variable){if(n.has(c.xref)||r.has(c.xref))throw new Error(`Should not see two declarations of the same variable: ${c.xref}`);n.set(c.xref,c),r.set(c.xref,0)}s.set(c,VV(c)),UV(c,r,i)}let o=!1;for(let c of t.reversed()){let u=s.get(c);if(c.kind===v.Variable&&r.get(c.xref)===0){if(o&&u.fences&yt.ViewContextWrite||u.fences&yt.SideEffectful){let h=Qn(c.initializer.toStmt());s.set(h,u),N.replace(c,h)}else $V(c,r),N.remove(c);s.delete(c),n.delete(c.xref),r.delete(c.xref);continue}u.fences&yt.ViewContextRead&&(o=!0)}let a=[];for(let[c,u]of r){let p=!!(n.get(c).flags&zn.AlwaysInline);u!==1||p||i.has(c)||a.push(c)}let l;for(;l=a.pop();){let c=n.get(l),u=s.get(c);if(!!(c.flags&zn.AlwaysInline))throw new Error("AssertionError: Found an 'AlwaysInline' variable after the always inlining pass.");for(let p=c.next;p.kind!==v.ListEnd;p=p.next){let m=s.get(p);if(m.variablesUsed.has(l)){if(e===Rn.TemplateDefinitionBuilder&&!qV(c,p))break;if(HV(l,c.initializer,p,u.fences)){m.variablesUsed.delete(l);for(let g of u.variablesUsed)m.variablesUsed.add(g);m.fences|=u.fences,n.delete(l),r.delete(l),s.delete(c),N.remove(c)}break}if(!ST(m.fences,u.fences))break}}}function C0(t){switch(t.kind){case j.NextContext:return yt.ViewContextRead|yt.ViewContextWrite;case j.RestoreView:return yt.ViewContextRead|yt.ViewContextWrite|yt.SideEffectful;case j.StoreLet:return yt.SideEffectful;case j.Reference:case j.ContextLetReference:return yt.ViewContextRead;default:return yt.None}}function VV(t){let e=yt.None,n=new Set;return It(t,r=>{Xr(r)&&(r.kind===j.ReadVariable?n.add(r.xref):e|=C0(r))}),{fences:e,variablesUsed:n}}function UV(t,e,n){It(t,(r,i)=>{if(!Xr(r)||r.kind!==j.ReadVariable)return;let s=e.get(r.xref);s!==void 0&&(e.set(r.xref,s+1),i&be.InChildOperation&&n.add(r.xref))})}function $V(t,e){It(t,n=>{if(!Xr(n)||n.kind!==j.ReadVariable)return;let r=e.get(n.xref);if(r!==void 0){if(r===0)throw new Error(`Inaccurate variable count: ${n.xref} - found another read but count is already 0`);e.set(n.xref,r-1)}})}function ST(t,e){if(t&yt.ViewContextWrite){if(e&yt.ViewContextRead)return!1}else if(t&yt.ViewContextRead&&e&yt.ViewContextWrite)return!1;return!0}function HV(t,e,n,r){let i=!1,s=!0;return ot(n,(o,a)=>{if(!Xr(o)||i||!s)return o;if(a&be.InChildOperation&&r&yt.ViewContextRead)return o;switch(o.kind){case j.ReadVariable:if(o.xref===t)return i=!0,e;break;default:let l=C0(o);s=s&&ST(l,r);break}return o},be.None),i}function qV(t,e){switch(t.variable.kind){case Tt.Identifier:return t.initializer instanceof pr&&t.initializer.name==="ctx";case Tt.Context:return e.kind===v.Variable;default:return!0}}function GV(t){for(let e of t.units){let n=null,r=null;for(let i of e.create)switch(i.kind){case v.I18nStart:n=i;break;case v.I18nEnd:n=null;break;case v.IcuStart:n===null&&(r=t.allocateXrefId(),N.insertBefore(Mh(r,i.message,void 0,null),i));break;case v.IcuEnd:r!==null&&(N.insertAfter(Rh(r,null),i),r=null);break}}}var jV=[{kind:B.Tmpl,fn:wF},{kind:B.Both,fn:MF},{kind:B.Host,fn:ML},{kind:B.Tmpl,fn:nF},{kind:B.Tmpl,fn:TF},{kind:B.Tmpl,fn:GV},{kind:B.Both,fn:Z2},{kind:B.Both,fn:DV},{kind:B.Both,fn:B2},{kind:B.Both,fn:Y2},{kind:B.Both,fn:L2},{kind:B.Tmpl,fn:X2},{kind:B.Both,fn:iF},{kind:B.Tmpl,fn:oV},{kind:B.Both,fn:$2},{kind:B.Both,fn:yF},{kind:B.Tmpl,fn:H2},{kind:B.Tmpl,fn:CF},{kind:B.Tmpl,fn:eL},{kind:B.Tmpl,fn:xF},{kind:B.Both,fn:DF},{kind:B.Tmpl,fn:IL},{kind:B.Tmpl,fn:TL},{kind:B.Tmpl,fn:AL},{kind:B.Tmpl,fn:EV},{kind:B.Both,fn:D2},{kind:B.Both,fn:fV},{kind:B.Tmpl,fn:RV},{kind:B.Tmpl,fn:lV},{kind:B.Both,fn:gV},{kind:B.Tmpl,fn:tL},{kind:B.Tmpl,fn:PV},{kind:B.Tmpl,fn:NV},{kind:B.Both,fn:uV},{kind:B.Both,fn:wV},{kind:B.Tmpl,fn:eF},{kind:B.Both,fn:oL},{kind:B.Both,fn:xV},{kind:B.Both,fn:kV},{kind:B.Both,fn:BV},{kind:B.Both,fn:SV},{kind:B.Tmpl,fn:ZO},{kind:B.Tmpl,fn:Q2},{kind:B.Tmpl,fn:cV},{kind:B.Tmpl,fn:R2},{kind:B.Tmpl,fn:N2},{kind:B.Tmpl,fn:CV},{kind:B.Tmpl,fn:hV},{kind:B.Tmpl,fn:pV},{kind:B.Tmpl,fn:_L},{kind:B.Tmpl,fn:JO},{kind:B.Tmpl,fn:kL},{kind:B.Both,fn:W2},{kind:B.Tmpl,fn:aV},{kind:B.Both,fn:LV},{kind:B.Tmpl,fn:xL},{kind:B.Both,fn:sF},{kind:B.Tmpl,fn:dV},{kind:B.Tmpl,fn:lF},{kind:B.Tmpl,fn:uF},{kind:B.Tmpl,fn:sL},{kind:B.Tmpl,fn:P2},{kind:B.Tmpl,fn:fF},{kind:B.Both,fn:AF},{kind:B.Both,fn:tV},{kind:B.Both,fn:U2}];function bT(t,e){for(let n of jV)(n.kind===e||n.kind===B.Both)&&n.fn(t)}function WV(t,e){let n=TT(t.root);return xT(t.root,e),n}function xT(t,e){for(let n of t.job.units){if(n.parent!==t.xref)continue;xT(n,e);let r=TT(n);e.statements.push(r.toDeclStmt(r.name))}}function TT(t){if(t.fnName===null)throw new Error(`AssertionError: view ${t.xref} is unnamed`);let e=[];for(let s of t.create){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${v[s.kind]}`);e.push(s.statement)}let n=[];for(let s of t.update){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${v[s.kind]}`);n.push(s.statement)}let r=wh(1,e),i=wh(2,n);return Yi([new Nt("rf"),new Nt("ctx")],[...r,...i],void 0,void 0,t.fnName)}function wh(t,e){return e.length===0?[]:[Ih(new Ce(R.BitwiseAnd,Ee("rf"),T(t)),e)]}function zV(t){if(t.root.fnName===null)throw new Error("AssertionError: host binding function is unnamed");let e=[];for(let s of t.root.create){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all create ops to have been compiled, but got ${v[s.kind]}`);e.push(s.statement)}let n=[];for(let s of t.root.update){if(s.kind!==v.Statement)throw new Error(`AssertionError: expected all update ops to have been compiled, but got ${v[s.kind]}`);n.push(s.statement)}if(e.length===0&&n.length===0)return null;let r=wh(1,e),i=wh(2,n);return Yi([new Nt("rf"),new Nt("ctx")],[...r,...i],void 0,void 0,t.root.fnName)}var IT=Rn.TemplateDefinitionBuilder,Js=new Fa,Ys="ng-template",JV="animate.";function mf(t){return t instanceof tn}function YV(t){return mf(t)&&t.nodes.length===1&&t.nodes[0]instanceof Gf}function KV(t,e,n,r,i,s,o,a,l,c){let u=new Qc(t,n,IT,r,i,s,o,a,l,c);return Ei(u.root,e),u}function QV(t,e,n){let r=new oh(t.componentName,n,IT,cn.DomOnly);for(let i of t.properties??[]){let s=H.Property;i.name.startsWith("attr.")&&(i.name=i.name.substring(5),s=H.Attribute),i.isLegacyAnimation&&(s=H.LegacyAnimation),i.isAnimation&&(s=H.Animation);let o=e.calcPossibleSecurityContexts(t.componentSelector,i.name,s===H.Attribute).filter(a=>a!==Ne.NONE);XV(r,i,s,o)}for(let[i,s]of Object.entries(t.attributes)??[]){let o=e.calcPossibleSecurityContexts(t.componentSelector,i,!0).filter(a=>a!==Ne.NONE);ZV(r,i,s,o)}for(let i of t.events??[])eU(r,i);return r}function XV(t,e,n,r){let i,s=e.expression.ast;s instanceof au?i=new Xe(s.strings,s.expressions.map(o=>de(o,t,e.sourceSpan)),[]):i=de(s,t,e.sourceSpan),t.root.update.push(oo(t.root.xref,n,e.name,i,null,r,!1,!1,null,null,e.sourceSpan))}function ZV(t,e,n,r){let i=oo(t.root.xref,H.Attribute,e,n,null,r,!0,!1,null,null,n.sourceSpan);t.root.update.push(i)}function eU(t,e){let n;if(e.type===en.Animation)n=Zx(t.root.xref,new Ot,e.name,null,nu(t.root,e.handler,e.handlerSpan),e.name.endsWith("enter")?"enter":"leave",e.targetOrPhase,!0,e.sourceSpan);else{let[r,i]=e.type!==en.LegacyAnimation?[null,e.targetOrPhase]:[e.targetOrPhase,null];n=y0(t.root.xref,new Ot,e.name,null,nu(t.root,e.handler,e.handlerSpan),r,i,!0,e.sourceSpan)}t.root.create.push(n)}function Ei(t,e){for(let n of e)if(n instanceof Kr)tU(t,n);else if(n instanceof Dn)nU(t,n);else if(n instanceof ka)rU(t,n);else if(n instanceof Us)AT(t,n,null);else if(n instanceof Ia)DT(t,n,null);else if(n instanceof Hf)iU(t,n);else if(n instanceof $f)sU(t,n);else if(n instanceof io)oU(t,n);else if(n instanceof bx)lU(t,n);else if(n instanceof Da)cU(t,n);else if(n instanceof a0)dU(t,n);else if(!(n instanceof ic))throw new Error(`Unsupported template node: ${n.constructor.name}`)}function tU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof tn||e.i18n instanceof Qi))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let n=t.job.allocateXrefId(),[r,i]=vr(e.name),s=u2(i,n,oT(r),e.i18n instanceof Qi?e.i18n:void 0,e.startSourceSpan,e.sourceSpan);t.create.push(s),hU(t,s,e),MT(s,e);let o=null;e.i18n instanceof tn&&(o=t.job.allocateXrefId(),t.create.push(Mh(o,e.i18n,void 0,e.startSourceSpan))),Ei(t,e.children);let a=f2(n,e.endSourceSpan??e.startSourceSpan);t.create.push(a);let l=e.inputs.find(c=>c.name==="formField"&&c.type===Se.Property);l&&t.create.push(I2(l.sourceSpan)),o!==null&&N.insertBefore(Rh(o,e.endSourceSpan??e.startSourceSpan),a)}function nU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof tn||e.i18n instanceof Qi))throw Error(`Unhandled i18n metadata type for template: ${e.i18n.constructor.name}`);let n=t.job.allocateView(t.xref),r=e.tagName,i="";e.tagName&&([i,r]=vr(e.tagName));let s=e.i18n instanceof Qi?e.i18n:void 0,o=oT(i),a=r===null?"":j2(r,o),l=fU(e)?pn.NgTemplate:pn.Structural,c=Yx(n.xref,l,r,a,o,s,e.startSourceSpan,e.sourceSpan);t.create.push(c),pU(t,c,e,l),MT(c,e),Ei(n,e.children);for(let{name:u,value:h}of e.variables)n.contextVariables.set(u,h!==""?h:"$implicit");if(l===pn.NgTemplate&&e.i18n instanceof tn){let u=t.job.allocateXrefId();N.insertAfter(Mh(u,e.i18n,void 0,e.startSourceSpan),n.create.head),N.insertBefore(Rh(u,e.endSourceSpan??e.startSourceSpan),n.create.tail)}}function rU(t,e){if(e.i18n!==void 0&&!(e.i18n instanceof Qi))throw Error(`Unhandled i18n metadata type for element: ${e.i18n.constructor.name}`);let n=null;e.children.some(s=>!(s instanceof Dh)&&(!(s instanceof Us)||s.value.trim().length>0))&&(n=t.job.allocateView(t.xref),Ei(n,e.children));let r=t.job.allocateXrefId(),i=w2(r,e.selector,e.i18n,n?.xref??null,e.sourceSpan);for(let s of e.attributes){let o=Js.securityContext(e.name,s.name,!0);t.update.push(oo(i.xref,H.Attribute,s.name,T(s.value),null,o,!0,!1,null,mi(s.i18n),s.sourceSpan))}t.create.push(i)}function AT(t,e,n){t.create.push(Xx(t.job.allocateXrefId(),e.value,n,e.sourceSpan))}function DT(t,e,n){let r=e.value;if(r instanceof fn&&(r=r.ast),!(r instanceof au))throw new Error(`AssertionError: expected Interpolation for BoundText node, got ${r.constructor.name}`);if(e.i18n!==void 0&&!(e.i18n instanceof gi))throw Error(`Unhandled i18n metadata type for text interpolation: ${e.i18n?.constructor.name}`);let i=e.i18n instanceof gi?e.i18n.children.filter(a=>a instanceof Fc).map(a=>a.name):[];if(i.length>0&&i.length!==r.expressions.length)throw Error(`Unexpected number of i18n placeholders (${r.expressions.length}) for BoundText with ${r.expressions.length} expressions`);let s=t.job.allocateXrefId();t.create.push(Xx(s,"",n,e.sourceSpan));let o=t.job.compatibility?null:e.sourceSpan;t.update.push(KP(s,new Xe(r.strings,r.expressions.map(a=>de(a,t.job,o)),i),e.sourceSpan))}function iU(t,e){let n=null,r=[];for(let i=0;i<e.branches.length;i++){let s=e.branches[i],o=t.job.allocateView(t.xref),a=Eh(t,o.xref,s);s.expressionAlias!==null&&o.contextVariables.set(s.expressionAlias.name,rT);let l;if(s.i18n!==void 0){if(!(s.i18n instanceof Xi))throw Error(`Unhandled i18n metadata type for if block: ${s.i18n?.constructor.name}`);l=s.i18n}let u=(i===0?Kx:Qx)(o.xref,pn.Block,a,"Conditional",$t.HTML,l,s.startSourceSpan,s.sourceSpan);t.create.push(u),n===null&&(n=o.xref);let h=s.expression?de(s.expression,t.job,null):null,p=new nh(h,u.xref,u.handle,s.expressionAlias);r.push(p),Ei(o,s.children)}t.update.push(Wx(n,null,r,e.sourceSpan))}function sU(t,e){if(e.groups.length===0)return;let n=null,r=[];for(let i=0;i<e.groups.length;i++){let s=e.groups[i],o=t.job.allocateView(t.xref),a=Eh(t,o.xref,s),l;if(s.i18n!==void 0){if(!(s.i18n instanceof Xi))throw Error(`Unhandled i18n metadata type for switch block: ${s.i18n?.constructor.name}`);l=s.i18n}let u=(i===0?Kx:Qx)(o.xref,pn.Block,a,"Case",$t.HTML,l,s.startSourceSpan,s.sourceSpan);t.create.push(u),n===null&&(n=o.xref);for(let h of s.cases){let p=h.expression?de(h.expression,t.job,e.startSourceSpan):null,m=new nh(p,u.xref,u.handle);r.push(m)}Ei(o,s.children)}t.update.push(Wx(n,de(e.expression,t.job,null),r,e.sourceSpan))}function af(t,e,n,r,i){if(n!==void 0&&!(n instanceof Xi))throw Error("Unhandled i18n metadata type for defer block");if(r===void 0)return null;let s=t.job.allocateView(t.xref);Ei(s,r);let o=Yx(s.xref,pn.Block,null,`Defer${e}`,$t.HTML,n,i,i);return t.create.push(o),o}function oU(t,e){let n=null;if(t.job.deferMeta.mode===0){if(!t.job.deferMeta.blocks.has(e))throw new Error("AssertionError: unable to find a dependency function for this deferred block");n=t.job.deferMeta.blocks.get(e)??null}let r=af(t,"",e.i18n,e.children,e.sourceSpan),i=af(t,"Loading",e.loading?.i18n,e.loading?.children,e.loading?.sourceSpan),s=af(t,"Placeholder",e.placeholder?.i18n,e.placeholder?.children,e.placeholder?.sourceSpan),o=af(t,"Error",e.error?.i18n,e.error?.children,e.error?.sourceSpan),a=t.job.allocateXrefId(),l=E2(a,r.xref,r.handle,n,t.job.allDeferrableDepsFn,e.sourceSpan);l.placeholderView=s?.xref??null,l.placeholderSlot=s?.handle??null,l.loadingSlot=i?.handle??null,l.errorSlot=o?.handle??null,l.placeholderMinimumTime=e.placeholder?.minimumTime??null,l.loadingMinimumTime=e.loading?.minimumTime??null,l.loadingAfterTime=e.loading?.afterTime??null,l.flags=aU(e),t.create.push(l);let c=[],u=[];vv("hydrate",e.hydrateTriggers,c,u,t,a),vv("none",e.triggers,c,u,t,a),vv("prefetch",e.prefetchTriggers,c,u,t,a),c.some(p=>p.modifier==="none")||u.some(p=>p.modifier==="none")||c.push($i(a,{kind:ke.Idle},"none",null)),t.create.push(c),t.update.push(u)}function aU(t){return Object.keys(t.hydrateTriggers).length>0?1:null}function vv(t,e,n,r,i,s){if(e.idle!==void 0){let o=$i(s,{kind:ke.Idle},t,e.idle.sourceSpan);n.push(o)}if(e.immediate!==void 0){let o=$i(s,{kind:ke.Immediate},t,e.immediate.sourceSpan);n.push(o)}if(e.timer!==void 0){let o=$i(s,{kind:ke.Timer,delay:e.timer.delay},t,e.timer.sourceSpan);n.push(o)}if(e.hover!==void 0){let o=$i(s,{kind:ke.Hover,targetName:e.hover.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},t,e.hover.sourceSpan);n.push(o)}if(e.interaction!==void 0){let o=$i(s,{kind:ke.Interaction,targetName:e.interaction.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null},t,e.interaction.sourceSpan);n.push(o)}if(e.viewport!==void 0){let o=$i(s,{kind:ke.Viewport,targetName:e.viewport.reference,targetXref:null,targetSlot:null,targetView:null,targetSlotViewSteps:null,options:e.viewport.options?de(e.viewport.options,i.job,e.viewport.sourceSpan):null},t,e.viewport.sourceSpan);n.push(o)}if(e.never!==void 0){let o=$i(s,{kind:ke.Never},t,e.never.sourceSpan);n.push(o)}if(e.when!==void 0){if(e.when.value instanceof au)throw new Error("Unexpected interpolation in defer block when trigger");let o=s2(s,de(e.when.value,i.job,e.when.sourceSpan),t,e.when.sourceSpan);r.push(o)}}function lU(t,e){if(e.i18n instanceof tn&&YV(e.i18n)){let n=t.job.allocateXrefId();t.create.push(S2(n,e.i18n,Ix(e.i18n).name,null));for(let[r,i]of Object.entries(A(A({},e.vars),e.placeholders)))i instanceof Ia?DT(t,i,r):AT(t,i,r);t.create.push(b2(n))}else throw Error(`Unhandled i18n metadata type for ICU: ${e.i18n?.constructor.name}`)}function cU(t,e){let n=t.job.allocateView(t.xref),r=`\u0275$index_${n.xref}`,i=`\u0275$count_${n.xref}`,s=new Set;n.contextVariables.set(e.item.name,e.item.value);for(let w of e.contextVariables)w.value==="$index"&&s.add(w.name),w.name==="$index"?n.contextVariables.set("$index",w.value).set(r,w.value):w.name==="$count"?n.contextVariables.set("$count",w.value).set(i,w.value):n.aliases.add({kind:Tt.Alias,name:null,identifier:w.name,expression:uU(w,r,i)});let o=gt(e.trackBy.span,e.sourceSpan),a=de(e.trackBy,t.job,o);Ei(n,e.children);let l=null,c=null;e.empty!==null&&(l=t.job.allocateView(t.xref),Ei(l,e.empty.children),c=Eh(t,l.xref,e.empty));let u={$index:s,$implicit:e.item.name};if(e.i18n!==void 0&&!(e.i18n instanceof Xi))throw Error("AssertionError: Unhandled i18n metadata type or @for");if(e.empty?.i18n!==void 0&&!(e.empty.i18n instanceof Xi))throw Error("AssertionError: Unhandled i18n metadata type or @empty");let h=e.i18n,p=e.empty?.i18n,m=Eh(t,n.xref,e),g=d2(n.xref,l?.xref??null,m,a,u,c,h,p,e.startSourceSpan,e.sourceSpan);t.create.push(g);let y=de(e.expression,t.job,gt(e.expression.span,e.sourceSpan)),E=i2(g.xref,g.handle,y,e.sourceSpan);t.update.push(E)}function uU(t,e,n){switch(t.value){case"$index":return new Dt(e);case"$count":return new Dt(n);case"$first":return new Dt(e).identical(T(0));case"$last":return new Dt(e).identical(new Dt(n).minus(T(1)));case"$even":return new Dt(e).modulo(T(2)).identical(T(0));case"$odd":return new Dt(e).modulo(T(2)).notIdentical(T(0));default:throw new Error(`AssertionError: unknown @for loop variable ${t.value}`)}}function dU(t,e){let n=t.job.allocateXrefId();t.create.push(_2(n,e.name,e.sourceSpan)),t.update.push(a2(n,e.name,de(e.value,t.job,e.valueSpan),e.sourceSpan))}function de(t,e,n){if(t instanceof fn)return de(t.ast,e,n);if(t instanceof Hr)return t.receiver instanceof Yr?new Dt(t.name):new Nn(de(t.receiver,e,n),t.name,null,gt(t.span,n));if(t instanceof xa){if(t.receiver instanceof Yr)throw new Error("Unexpected ImplicitReceiver");return new mn(de(t.receiver,e,n),t.args.map(r=>de(r,e,n)),void 0,gt(t.span,n))}else{if(t instanceof dn)return T(t.value,void 0,gt(t.span,n));if(t instanceof va)switch(t.operator){case"+":return new Xs(cc.Plus,de(t.expr,e,n),void 0,gt(t.span,n));case"-":return new Xs(cc.Minus,de(t.expr,e,n),void 0,gt(t.span,n));default:throw new Error(`AssertionError: unknown unary operator ${t.operator}`)}else if(t instanceof Qt){let r=q2.get(t.operation);if(r===void 0)throw new Error(`AssertionError: unknown binary operator ${t.operation}`);return new Ce(r,de(t.left,e,n),de(t.right,e,n),void 0,gt(t.span,n))}else{if(t instanceof vc)return new ts(e.root.xref);if(t instanceof no)return new yi(de(t.receiver,e,n),de(t.key,e,n),void 0,gt(t.span,n));if(t instanceof ba)throw new Error("AssertionError: Chain in unknown context");if(t instanceof ro){let r=t.keys.map((i,s)=>{let o=de(t.values[s],e,n);return i.kind==="spread"?new Ji(o):new Ca(i.key,o,i.quoted)});return new gr(r,void 0,gt(t.span,n))}else{if(t instanceof Ec)return new zr(t.expressions.map(r=>de(r,e,n)));if(t instanceof kf)return new Wr(de(t.condition,e,n),de(t.trueExp,e,n),de(t.falseExp,e,n),void 0,gt(t.span,n));if(t instanceof bc)return de(t.expression,e,n);if(t instanceof Nf)return new lo(e.allocateXrefId(),new Ot,t.name,[de(t.exp,e,n),...t.args.map(r=>de(r,e,n))]);if(t instanceof wc)return new Pa(de(t.receiver,e,n),de(t.key,e,n),gt(t.span,n));if(t instanceof yc)return new Ra(de(t.receiver,e,n),t.name);if(t instanceof Rf)return new co(de(t.receiver,e,n),t.args.map(r=>de(r,e,n)));if(t instanceof Kt)return new Yc(gt(t.span,n));if(t instanceof _c)return cR(de(t.expression,e,n),gt(t.span,n));if(t instanceof Cc)return ou(de(t.expression,e,n));if(t instanceof Sc)return new _f(de(t.expression,e,n),void 0,gt(t.span,n));if(t instanceof Tc)return Yb(t,e,n);if(t instanceof xc)return new uc(de(t.tag,e,n),Yb(t.template,e,n),void 0,gt(t.span,n));if(t instanceof Ic)return new mr(de(t.expression,e,n),void 0,gt(t.span,n));if(t instanceof Lf)return new _a(t.body,t.flags,n);if(t instanceof Mf)return new Zs(de(t.expression,e,n));throw new Error(`Unhandled expression type "${t.constructor.name}" in file "${n?.start.file.url}"`)}}}}function Yb(t,e,n){return new fc(t.elements.map(r=>new Cf(r.text,gt(r.span,n))),t.expressions.map(r=>de(r,e,n)),gt(t.span,n))}function Ly(t,e,n,r){let i;return e instanceof au?i=new Xe(e.strings,e.expressions.map(s=>de(s,t,null)),Object.keys(mi(n)?.placeholders??{})):e instanceof Oe?i=de(e,t,null):i=T(e),i}var kT=new Map([[Se.Property,H.Property],[Se.TwoWay,H.TwoWayProperty],[Se.Attribute,H.Attribute],[Se.Class,H.ClassName],[Se.Style,H.StyleProperty],[Se.LegacyAnimation,H.LegacyAnimation],[Se.Animation,H.Animation]]);function fU(t){return vr(t.tagName??"")[1]===Ys}function mi(t){if(t==null)return null;if(!(t instanceof tn))throw Error(`Expected i18n meta to be a Message, but got: ${t.constructor.name}`);return t}function hU(t,e,n){let r=new Array,i=new Set;for(let s of n.attributes){let o=Js.securityContext(n.name,s.name,!0);r.push(oo(e.xref,H.Attribute,s.name,Ly(t.job,s.value,s.i18n),null,o,!0,!1,null,mi(s.i18n),s.sourceSpan)),s.i18n&&i.add(s.name)}for(let s of n.inputs)i.has(s.name)&&console.error(`On component ${t.job.componentName}, the binding ${s.name} is both an i18n attribute and a property. You may want to remove the property binding. This will become a compilation error in future versions of Angular.`),r.push(oo(e.xref,kT.get(s.type),s.name,Ly(t.job,ru(s.value),s.i18n),s.unit,s.securityContext,!1,!1,null,mi(s.i18n)??null,s.sourceSpan));t.create.push(r.filter(s=>s?.kind===v.ExtractedAttribute)),t.update.push(r.filter(s=>s?.kind===v.Binding));for(let s of n.outputs){if(s.type===en.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");s.type===en.TwoWay?t.create.push(eT(e.xref,e.handle,s.name,e.tag,NT(t,s.handler,s.handlerSpan),s.sourceSpan)):s.type===en.Animation?t.create.push(Zx(e.xref,e.handle,s.name,e.tag,nu(t,s.handler,s.handlerSpan),s.name.endsWith("enter")?"enter":"leave",s.target,!1,s.sourceSpan)):t.create.push(y0(e.xref,e.handle,s.name,e.tag,nu(t,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))}r.some(s=>s?.i18nMessage)!==null&&t.create.push(nT(t.job.allocateXrefId(),new Ot,e.xref))}function pU(t,e,n,r){let i=new Array;for(let s of n.templateAttrs)if(s instanceof Aa){let o=Js.securityContext(Ys,s.name,!0);i.push(lf(t,e.xref,Se.Attribute,s.name,s.value,null,o,!0,r,mi(s.i18n),s.sourceSpan))}else i.push(lf(t,e.xref,s.type,s.name,ru(s.value),s.unit,s.securityContext,!0,r,mi(s.i18n),s.sourceSpan));for(let s of n.attributes){let o=Js.securityContext(Ys,s.name,!0);i.push(lf(t,e.xref,Se.Attribute,s.name,s.value,null,o,!1,r,mi(s.i18n),s.sourceSpan))}for(let s of n.inputs)i.push(lf(t,e.xref,s.type,s.name,ru(s.value),s.unit,s.securityContext,!1,r,mi(s.i18n),s.sourceSpan));t.create.push(i.filter(s=>s?.kind===v.ExtractedAttribute)),t.update.push(i.filter(s=>s?.kind===v.Binding));for(let s of n.outputs){if(s.type===en.LegacyAnimation&&s.phase===null)throw Error("Animation listener should have a phase");if(r===pn.NgTemplate&&(s.type===en.TwoWay?t.create.push(eT(e.xref,e.handle,s.name,e.tag,NT(t,s.handler,s.handlerSpan),s.sourceSpan)):t.create.push(y0(e.xref,e.handle,s.name,e.tag,nu(t,s.handler,s.handlerSpan),s.phase,s.target,!1,s.sourceSpan))),r===pn.Structural&&s.type!==en.LegacyAnimation){let o=Js.securityContext(Ys,s.name,!1);t.create.push(bn(e.xref,H.Property,null,s.name,null,null,null,o))}}i.some(s=>s?.i18nMessage)!==null&&t.create.push(nT(t.job.allocateXrefId(),new Ot,e.xref))}function lf(t,e,n,r,i,s,o,a,l,c,u){let h=typeof i=="string";if(l===pn.Structural){if(!a)switch(n){case Se.Property:case Se.Class:case Se.Style:return bn(e,H.Property,null,r,null,null,c,o);case Se.TwoWay:return bn(e,H.TwoWayProperty,null,r,null,null,c,o)}if(!h&&(n===Se.Attribute||n===Se.LegacyAnimation||n===Se.Animation))return null}let p=kT.get(n);return l===pn.NgTemplate&&(n===Se.Class||n===Se.Style||n===Se.Attribute&&!h)&&(p=H.Property),oo(e,p,r,Ly(t.job,i,c),s,o,h,a,l,c,u)}function nu(t,e,n){e=ru(e);let r=new Array,i=e instanceof ba?e.expressions:[e];if(i.length===0)throw new Error("Expected listener to have non-empty expression list.");let s=i.map(a=>de(a,t.job,n)),o=s.pop();return r.push(...s.map(a=>Qn(new Ht(a,a.sourceSpan)))),r.push(Qn(new Rt(o,o.sourceSpan))),r}function NT(t,e,n){e=ru(e);let r=new Array;if(e instanceof ba)if(e.expressions.length===1)e=e.expressions[0];else throw new Error("Expected two-way listener to have a single expression.");let i=de(e,t.job,n),s=new Dt("$event"),o=new eh(i,s);return r.push(Qn(new Ht(o))),r.push(Qn(new Rt(s))),r}function ru(t){return t instanceof fn?t.ast:t}function MT(t,e){mU(t.localRefs);for(let{name:n,value:r}of e.references)t.localRefs.push({name:n,target:r})}function mU(t){if(!Array.isArray(t))throw new Error("AssertionError: expected an array")}function gt(t,e){if(e===null)return null;let n=e.start.moveBy(t.start),r=e.start.moveBy(t.end),i=e.fullStart.moveBy(t.start);return new Z(n,r,i)}function Eh(t,e,n){let r=null;for(let i of n.children)if(!(i instanceof Dh||i instanceof a0)){if(r!==null)return null;if(i instanceof Kr||i instanceof Dn&&i.tagName!==null)r=i;else return null}if(r!==null){for(let s of r.attributes)if(!s.name.startsWith(JV)){let o=Js.securityContext(Ys,s.name,!0);t.update.push(oo(e,H.Attribute,s.name,T(s.value),null,o,!0,!1,null,mi(s.i18n),s.sourceSpan))}for(let s of r.inputs)if(s.type!==Se.LegacyAnimation&&s.type!==Se.Animation&&s.type!==Se.Attribute){let o=Js.securityContext(Ys,s.name,!0);t.create.push(bn(e,H.Property,null,s.name,null,null,null,o))}let i=r instanceof Kr?r.name:r.tagName;return i===Ys?null:i}return null}var gU=!1;function vU(){return gU}function _h(t,e){return Ih(Ee(u0).bitwiseAnd(T(t),null),e)}function yU(t){return(t.descendants?1:0)|(t.static?2:0)|(t.emitDistinctChangesOnly?4:0)}function wU(t,e){if(Array.isArray(t.predicate)){let n=[];return t.predicate.forEach(r=>{let i=r.split(",").map(s=>T(s.trim()));n.push(...i)}),e.getConstLiteral(Ae(n),!0)}else switch(t.predicate.forwardRef){case 0:case 2:return t.predicate.expression;case 1:return G(_.resolveForwardRef).callFn([t.predicate.expression])}}function RT(t,e,n){let r=[];return n!==void 0&&r.push(...n),t.isSignal&&r.push(new Nn(Ee(Bc),t.propertyName)),r.push(wU(t,e),T(yU(t))),t.read&&r.push(t.read),r}var S0=Symbol("queryAdvancePlaceholder");function PT(t){let e=[],n=0,r=()=>{n>0&&(e.unshift(G(_.queryAdvance).callFn(n===1?[]:[T(n)]).toStmt()),n=0)};for(let i=t.length-1;i>=0;i--){let s=t[i];s===S0?n++:(r(),e.unshift(s))}return r(),e}function EU(t,e,n){let r=[],i=[],s=Ax(c=>i.push(c),c0),o=null,a=null;t.forEach(c=>{let u=RT(c,e);if(c.isSignal?(o??=G(_.viewQuerySignal),o=o.callFn(u)):(a??=G(_.viewQuery),a=a.callFn(u)),c.isSignal){i.push(S0);return}let h=s(),p=G(_.loadQuery).callFn([]),m=G(_.queryRefresh).callFn([h.set(p)]),g=Ee(Bc).prop(c.propertyName).set(c.first?h.prop("first"):h);i.push(m.and(g).toStmt())}),o!==null&&r.push(new Ht(o)),a!==null&&r.push(new Ht(a));let l=n?`${n}_Query`:null;return Yi([new Nt(u0,i0),new Nt(Bc,null)],[_h(1,r),_h(2,PT(i))],hr,null,l)}function _U(t,e,n){let r=[],i=[],s=Ax(c=>i.push(c),c0),o=null,a=null;for(let c of t){let u=RT(c,e,[Ee("dirIndex")]);if(c.isSignal?(o??=G(_.contentQuerySignal),o=o.callFn(u)):(a??=G(_.contentQuery),a=a.callFn(u)),c.isSignal){i.push(S0);continue}let h=s(),p=G(_.loadQuery).callFn([]),m=G(_.queryRefresh).callFn([h.set(p)]),g=Ee(Bc).prop(c.propertyName).set(c.first?h.prop("first"):h);i.push(m.and(g).toStmt())}o!==null&&r.push(new Ht(o)),a!==null&&r.push(new Ht(a));let l=n?`${n}_ContentQueries`:null;return Yi([new Nt(u0,i0),new Nt(Bc,null),new Nt("dirIndex",null)],[_h(1,r),_h(2,PT(i))],hr,null,l)}var Oy=class extends zL{constructor(){super(Ay)}parse(e,n,r){return super.parse(e,n,r)}},cf=".",CU="attr",yv="animate",SU="class",bU="style",xU="*",wv="animate-",Fy=class{_exprParser;_schemaRegistry;errors;constructor(e,n,r){this._exprParser=e,this._schemaRegistry=n,this.errors=r}createBoundHostProperties(e,n){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parsePropertyBinding(i,s,!0,!1,n,n.start.offset,void 0,[],r,n):this._reportError(`Value of the host property binding "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,n)}return r}createDirectiveHostEventAsts(e,n){let r=[];for(let i of Object.keys(e)){let s=e[i];typeof s=="string"?this.parseEvent(i,s,!1,n,n,[],r,n):this._reportError(`Value of the host listener "${i}" needs to be a string representing an expression but got "${s}" (${typeof s})`,n)}return r}parseInterpolation(e,n,r){let i=n.fullStart.offset;try{let s=this._exprParser.parseInterpolation(e,n,i,r);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,i)}}parseInterpolationExpression(e,n){let r=n.start.offset;try{let i=this._exprParser.parseInterpolationExpression(e,n,r);return i&&this.errors.push(...i.errors),i}catch(i){return this._reportError(`${i}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}parseInlineTemplateBinding(e,n,r,i,s,o,a,l){let c=r.start.offset+xU.length,u=this._parseTemplateBindings(e,n,r,c,i);for(let h of u){let p=Vi(r,h.sourceSpan),m=h.key.source,g=Vi(r,h.key.span);if(h instanceof Ac){let y=h.value?h.value.source:"$implicit",E=h.value?Vi(r,h.value.span):void 0;a.push(new Vv(m,y,p,g,E))}else if(h.value){let y=l?p:r,E=Vi(r,h.value.ast.sourceSpan);this._parsePropertyAst(m,h.value,!1,y,g,E,s,o)}else s.push([m,""]),this.parseLiteralAttr(m,null,g,i,void 0,s,o,g)}}_parseTemplateBindings(e,n,r,i,s){try{let o=this._exprParser.parseTemplateBindings(e,n,r,i,s);return o.errors.forEach(a=>this.errors.push(a)),o.warnings.forEach(a=>{this._reportError(a,r,ji.WARNING)}),o.templateBindings}catch(o){return this._reportError(`${o}`,r),[]}}parseLiteralAttr(e,n,r,i,s,o,a,l){Ev(e)?(e=e.substring(1),l!==void 0&&(l=Vi(l,new In(l.start.offset+1,l.end.offset))),n&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',r,ji.ERROR),this._parseLegacyAnimation(e,n,r,i,l,s,o,a)):a.push(new da(e,this._exprParser.wrapLiteralPrimitive(n,"",i),Br.LITERAL_ATTR,r,l,s))}parsePropertyBinding(e,n,r,i,s,o,a,l,c,u){e.length===0&&this._reportError("Property name is missing in binding",s);let h=!1;e.startsWith(wv)?(h=!0,e=e.substring(wv.length),u!==void 0&&(u=Vi(u,new In(u.start.offset+wv.length,u.end.offset)))):Ev(e)&&(h=!0,e=e.substring(1),u!==void 0&&(u=Vi(u,new In(u.start.offset+1,u.end.offset)))),h?this._parseLegacyAnimation(e,n,s,o,u,a,l,c):e.startsWith(`${yv}${cf}`)?this._parseAnimation(e,this.parseBinding(n,r,a||s,o),s,u,a,l,c):this._parsePropertyAst(e,this.parseBinding(n,r,a||s,o),i,s,u,a,l,c)}parsePropertyInterpolation(e,n,r,i,s,o,a,l){let c=this.parseInterpolation(n,i||r,l);return c?(this._parsePropertyAst(e,c,!1,r,a,i,s,o),!0):!1}_parsePropertyAst(e,n,r,i,s,o,a,l){a.push([e,n.source]),l.push(new da(e,n,r?Br.TWO_WAY:Br.DEFAULT,i,s,o))}_parseAnimation(e,n,r,i,s,o,a){o.push([e,n.source]),a.push(new da(e,n,Br.ANIMATION,r,i,s))}_parseLegacyAnimation(e,n,r,i,s,o,a,l){e.length===0&&this._reportError("Animation trigger is missing",r);let c=this.parseBinding(n||"undefined",!1,o||r,i);a.push([e,c.source]),l.push(new da(e,c,Br.LEGACY_ANIMATION,r,s,o))}parseBinding(e,n,r,i){try{let s=n?this._exprParser.parseSimpleBinding(e,r,i):this._exprParser.parseBinding(e,r,i);return s&&this.errors.push(...s.errors),s}catch(s){return this._reportError(`${s}`,r),this._exprParser.wrapLiteralPrimitive("ERROR",r,i)}}createBoundElementProperty(e,n,r=!1,i=!0){if(n.isLegacyAnimation)return new Ff(n.name,Se.LegacyAnimation,Ne.NONE,n.expression,null,n.sourceSpan,n.keySpan,n.valueSpan);let s=null,o,a=null,l=n.name.split(cf),c;if(l.length>1)if(l[0]==CU){a=l.slice(1).join(cf),r||this._validatePropertyOrAttributeName(a,n.sourceSpan,!0),c=_v(this._schemaRegistry,e,a,!0);let u=a.indexOf(":");if(u>-1){let h=a.substring(0,u),p=a.substring(u+1);a=ff(h,p)}o=Se.Attribute}else l[0]==SU?(a=l[1],o=Se.Class,c=[Ne.NONE]):l[0]==bU?(s=l.length>2?l[2]:null,a=l[1],o=Se.Style,c=[Ne.STYLE]):l[0]==yv&&(a=n.name,o=Se.Animation,c=[Ne.NONE]);if(a===null){let u=this._schemaRegistry.getMappedPropName(n.name);a=i?u:n.name,c=_v(this._schemaRegistry,e,u,!1),o=n.type===Br.TWO_WAY?Se.TwoWay:Se.Property,r||this._validatePropertyOrAttributeName(u,n.sourceSpan,!1)}return new Ff(a,o,c[0],n.expression,s,n.sourceSpan,n.keySpan,n.valueSpan)}parseEvent(e,n,r,i,s,o,a,l){e.length===0&&this._reportError("Event name is missing in binding",i),Ev(e)?(e=e.slice(1),l!==void 0&&(l=Vi(l,new In(l.start.offset+1,l.end.offset))),this._parseLegacyAnimationEvent(e,n,i,s,a,l)):this._parseRegularEvent(e,n,r,i,s,o,a,l)}calcPossibleSecurityContexts(e,n,r){let i=this._schemaRegistry.getMappedPropName(n);return _v(this._schemaRegistry,e,i,r)}parseEventListenerName(e){let[n,r]=yR(e,[null,e]);return{eventName:r,target:n}}parseLegacyAnimationEventName(e){let n=wR(e,[e,null]);return{eventName:n[0],phase:n[1]===null?null:n[1].toLowerCase()}}_parseLegacyAnimationEvent(e,n,r,i,s,o){let{eventName:a,phase:l}=this.parseLegacyAnimationEventName(e),c=this._parseAction(n,i);s.push(new Of(a,l,en.LegacyAnimation,c,r,i,o)),a.length===0&&this._reportError("Animation event name is missing in binding",r),l?l!=="start"&&l!=="done"&&this._reportError(`The provided animation output phase value "${l}" for "@${a}" is not supported (use start or done)`,r):this._reportError(`The animation trigger output event (@${a}) is missing its phase value name (start or done are currently supported)`,r)}_parseRegularEvent(e,n,r,i,s,o,a,l){let{eventName:c,target:u}=this.parseEventListenerName(e),h=this.errors.length,p=this._parseAction(n,s),m=this.errors.length===h;o.push([e,p.source]),r&&m&&!this._isAllowedAssignmentEvent(p)&&this._reportError("Unsupported expression in a two-way binding",i);let g=en.Regular;r&&(g=en.TwoWay),e.startsWith(`${yv}${cf}`)&&(g=en.Animation),a.push(new Of(c,u,g,p,i,s,l))}_parseAction(e,n){let r=n&&n.start?n.start.offset:0;try{let i=this._exprParser.parseAction(e,n,r);return i&&this.errors.push(...i.errors),!i||i.ast instanceof Kt?(this._reportError("Empty expressions are not allowed",n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)):i}catch(i){return this._reportError(`${i}`,n),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}_reportError(e,n,r=ji.ERROR){this.errors.push(new K(n,e,r))}_validatePropertyOrAttributeName(e,n,r){let i=r?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);i.error&&this._reportError(i.msg,n,ji.ERROR)}_isAllowedAssignmentEvent(e){return e instanceof fn?this._isAllowedAssignmentEvent(e.ast):e instanceof bc?this._isAllowedAssignmentEvent(e.expression):e instanceof xa&&e.args.length===1&&e.receiver instanceof Hr&&e.receiver.name==="$any"&&e.receiver.receiver instanceof Yr?this._isAllowedAssignmentEvent(e.args[0]):(e instanceof Hr||e instanceof no)&&!By(e)}};function By(t){return t instanceof yc||t instanceof wc?!0:t instanceof Ic?By(t.expression):t instanceof Hr||t instanceof no||t instanceof xa?By(t.receiver):!1}function Ev(t){return t[0]=="@"}function _v(t,e,n,r){let i,s=o=>t.securityContext(o,n,r);return e===null?i=t.allKnownElementNames().map(s):(i=[],wa.parse(e).forEach(o=>{let a=o.element?[o.element]:t.allKnownElementNames(),l=new Set(o.notSelectors.filter(u=>u.isElementSelector()).map(u=>u.element)),c=a.filter(u=>!l.has(u));i.push(...c.map(s))})),i.length===0?[Ne.NONE]:Array.from(new Set(i)).sort()}function Vi(t,e){let n=e.start-t.start.offset,r=e.end-t.end.offset;return new Z(t.start.moveBy(n),t.end.moveBy(r),t.fullStart.moveBy(n),t.details)}function TU(t){if(t==null||t.length===0||t[0]=="/")return!1;let e=t.match(IU);return e===null||e[1]=="package"||e[1]=="asset"}var IU=/^([^:/?#]+):/,AU="select",DU="link",kU="rel",NU="href",MU="stylesheet",RU="style",PU="script",LU="ngNonBindable",OU="ngProjectAs";function LT(t){let e=null,n=null,r=null,i=!1,s="";t.attrs.forEach(l=>{let c=l.name.toLowerCase();c==AU?e=l.value:c==NU?n=l.value:c==kU?r=l.value:l.name==LU?i=!0:l.name==OU&&l.value.length>0&&(s=l.value)}),e=FU(e);let o=t.name.toLowerCase(),a=Tn.OTHER;return Uv(o)?a=Tn.NG_CONTENT:o==RU?a=Tn.STYLE:o==PU?a=Tn.SCRIPT:o==DU&&r==MU&&(a=Tn.STYLESHEET),new Vy(a,e,n,i,s)}var Tn=(function(t){return t[t.NG_CONTENT=0]="NG_CONTENT",t[t.STYLE=1]="STYLE",t[t.STYLESHEET=2]="STYLESHEET",t[t.SCRIPT=3]="SCRIPT",t[t.OTHER=4]="OTHER",t})(Tn||{}),Vy=class{type;selectAttr;hrefAttr;nonBindable;projectAs;constructor(e,n,r,i,s){this.type=e,this.selectAttr=n,this.hrefAttr=r,this.nonBindable=i,this.projectAs=s}};function FU(t){return t===null||t.length===0?"*":t}var BU=/^\s*([0-9A-Za-z_$]*)\s+of\s+([\S\s]*)/,VU=/^track\s+([\S\s]*)/,UU=/^(as\s+)(.*)/,Ph=/^else[^\S\r\n]+if/,$U=/^let\s+([\S\s]*)/,HU=/^[$A-Z_][0-9A-Z_$]*$/i,Kb=/(\s*)(\S+)(\s*)/,lc=new Set(["$index","$first","$last","$even","$odd","$count"]);function Qb(t){return t==="empty"}function Xb(t){return t==="else"||Ph.test(t)}function qU(t,e,n,r){let i=YU(e),s=[],o=Zb(t,i,r);o!==null&&s.push(new qs(o.expression,He(n,t.children,t.children),o.expressionAlias,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.nameSpan,t.i18n));for(let h of e)if(Ph.test(h.name)){let p=Zb(h,i,r);if(p!==null){let m=He(n,h.children,h.children);s.push(new qs(p.expression,m,p.expressionAlias,h.sourceSpan,h.startSourceSpan,h.endSourceSpan,h.nameSpan,h.i18n))}}else if(h.name==="else"){let p=He(n,h.children,h.children);s.push(new qs(null,p,null,h.sourceSpan,h.startSourceSpan,h.endSourceSpan,h.nameSpan,h.i18n))}let a=s.length>0?s[0].startSourceSpan:t.startSourceSpan,l=s.length>0?s[s.length-1].endSourceSpan:t.endSourceSpan,c=t.sourceSpan,u=s[s.length-1];return u!==void 0&&(c=new Z(a.start,u.sourceSpan.end)),{node:new Hf(s,c,t.startSourceSpan,l,t.nameSpan),errors:i}}function GU(t,e,n,r){let i=[],s=WU(t,i,r),o=null,a=null;for(let l of e)l.name==="empty"?a!==null?i.push(new K(l.sourceSpan,"@for loop can only have one @empty block")):l.parameters.length>0?i.push(new K(l.sourceSpan,"@empty block cannot have parameters")):a=new Pc(He(n,l.children,l.children),l.sourceSpan,l.startSourceSpan,l.endSourceSpan,l.nameSpan,l.i18n):i.push(new K(l.sourceSpan,`Unrecognized @for loop block "${l.name}"`));if(s!==null)if(s.trackBy===null)i.push(new K(t.startSourceSpan,'@for loop must have a "track" expression'));else{let l=a?.endSourceSpan??t.endSourceSpan,c=new Z(t.sourceSpan.start,l?.end??t.sourceSpan.end);zU(s.trackBy.expression,s.trackBy.keywordSpan,i),o=new Da(s.itemName,s.expression,s.trackBy.expression,s.trackBy.keywordSpan,s.context,He(n,t.children,t.children),a,c,t.sourceSpan,t.startSourceSpan,l,t.nameSpan,t.i18n)}return{node:o,errors:i}}function jU(t,e,n){let r=KU(t),i=t.parameters.length>0?iu(t.parameters[0],n):n.parseBinding("",!1,t.sourceSpan,0),s=[],o=[],a=[],l=null;for(let u of t.children){if(!(u instanceof Wn))continue;if((u.name!=="case"||u.parameters.length===0)&&u.name!=="default"){o.push(new qf(u.name,u.sourceSpan,u.nameSpan));continue}let h=u.name==="case",p=null;h&&(p=iu(u.parameters[0],n));let m=new Jv(p,u.sourceSpan,u.startSourceSpan,u.endSourceSpan,u.nameSpan);if(a.push(m),u.children.length===0&&u.endSourceSpan!==null&&u.endSourceSpan.start.offset===u.endSourceSpan.end.offset){l===null&&(l=u.sourceSpan);continue}let y=u.sourceSpan,E=u.startSourceSpan;l!==null&&(y=new Z(l.start,u.sourceSpan.end),E=new Z(l.start,u.startSourceSpan.end),l=null);let w=new Rc(a,He(e,u.children,u.children),y,E,u.endSourceSpan,u.nameSpan,u.i18n);s.push(w),a=[]}return{node:new $f(i,s,o,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.nameSpan),errors:r}}function WU(t,e,n){if(t.parameters.length===0)return e.push(new K(t.startSourceSpan,"@for loop does not have an expression")),null;let[r,...i]=t.parameters,s=QU(r,e)?.match(BU);if(!s||s[2].trim().length===0)return e.push(new K(r.sourceSpan,'Cannot parse expression. @for loop expression must match the pattern "<identifier> of <expression>"')),null;let[,o,a]=s;lc.has(o)&&e.push(new K(r.sourceSpan,`@for loop item name cannot be one of ${Array.from(lc).join(", ")}.`));let l=r.expression.split(" ")[0],c=new Z(r.sourceSpan.start,r.sourceSpan.start.moveBy(l.length)),u={itemName:new Ki(o,"$implicit",c,c),trackBy:null,expression:iu(r,n,a),context:Array.from(lc,h=>{let p=new Z(t.startSourceSpan.end,t.startSourceSpan.end);return new Ki(h,h,p,p)})};for(let h of i){let p=h.expression.match($U);if(p!==null){let g=new Z(h.sourceSpan.start.moveBy(p[0].length-p[1].length),h.sourceSpan.end);JU(h.sourceSpan,p[1],g,o,u.context,e);continue}let m=h.expression.match(VU);if(m!==null){if(u.trackBy!==null)e.push(new K(h.sourceSpan,'@for loop can only have one "track" expression'));else{let g=iu(h,n,m[1]);g.ast instanceof Kt&&e.push(new K(t.startSourceSpan,'@for loop must have a "track" expression'));let y=new Z(h.sourceSpan.start,h.sourceSpan.start.moveBy(5));u.trackBy={expression:g,keywordSpan:y}}continue}e.push(new K(h.sourceSpan,`Unrecognized @for loop parameter "${h.expression}"`))}return u}function zU(t,e,n){let r=new Uy;t.ast.visit(r),r.hasPipe&&n.push(new K(e,"Cannot use pipes in track expressions"))}function JU(t,e,n,r,i,s){let o=e.split(","),a=n.start;for(let l of o){let c=l.split("="),u=c.length===2?c[0].trim():"",h=c.length===2?c[1].trim():"";if(u.length===0||h.length===0)s.push(new K(t,'Invalid @for loop "let" parameter. Parameter should match the pattern "<name> = <variable name>"'));else if(!lc.has(h))s.push(new K(t,`Unknown "let" parameter variable "${h}". The allowed variables are: ${Array.from(lc).join(", ")}`));else if(u===r)s.push(new K(t,`Invalid @for loop "let" parameter. Variable cannot be called "${r}"`));else if(i.some(p=>p.name===u))s.push(new K(t,`Duplicate "let" parameter variable "${h}"`));else{let[,p,m]=c[0].match(Kb)??[],g=p!==void 0&&c.length===2?new Z(a.moveBy(p.length),a.moveBy(p.length+m.length)):n,y;if(c.length===2){let[,w,I]=c[1].match(Kb)??[];y=w!==void 0?new Z(a.moveBy(c[0].length+1+w.length),a.moveBy(c[0].length+1+w.length+I.length)):void 0}let E=new Z(g.start,y?.end??g.end);i.push(new Ki(u,h,E,g,y))}a=a.moveBy(l.length+1)}}function YU(t){let e=[],n=!1;for(let r=0;r<t.length;r++){let i=t[r];i.name==="else"?(n?e.push(new K(i.startSourceSpan,"Conditional can only have one @else block")):t.length>1&&r<t.length-1?e.push(new K(i.startSourceSpan,"@else block must be last inside the conditional")):i.parameters.length>0&&e.push(new K(i.startSourceSpan,"@else block cannot have parameters")),n=!0):Ph.test(i.name)||e.push(new K(i.startSourceSpan,`Unrecognized conditional block @${i.name}`))}return e}function KU(t){let e=[],n=!1;if(t.parameters.length!==1)return e.push(new K(t.startSourceSpan,"@switch block must have exactly one parameter")),e;for(let r of t.children)if(!(r instanceof Xc||r instanceof uo&&r.value.trim().length===0)){if(!(r instanceof Wn)||r.name!=="case"&&r.name!=="default"){e.push(new K(r.sourceSpan,"@switch block can only contain @case and @default blocks"));continue}r.name==="default"?(n?e.push(new K(r.startSourceSpan,"@switch block can only have one @default block")):r.parameters.length>0&&e.push(new K(r.startSourceSpan,"@default block cannot have parameters")),n=!0):r.name==="case"&&r.parameters.length!==1&&e.push(new K(r.startSourceSpan,"@case block must have exactly one parameter"))}return e}function iu(t,e,n){let r,i;return typeof n=="string"?(r=Math.max(0,t.expression.lastIndexOf(n)),i=r+n.length):(r=0,i=t.expression.length),e.parseBinding(t.expression.slice(r,i),!1,t.sourceSpan,t.sourceSpan.start.offset+r)}function Zb(t,e,n){if(t.parameters.length===0)return e.push(new K(t.startSourceSpan,"Conditional block does not have an expression")),null;let r=iu(t.parameters[0],n),i=null;for(let s=1;s<t.parameters.length;s++){let o=t.parameters[s],a=o.expression.match(UU);if(a===null)e.push(new K(o.sourceSpan,`Unrecognized conditional parameter "${o.expression}"`));else if(t.name!=="if"&&!Ph.test(t.name))e.push(new K(o.sourceSpan,'"as" expression is only allowed on `@if` and `@else if` blocks'));else if(i!==null)e.push(new K(o.sourceSpan,'Conditional can only have one "as" expression'));else{let l=a[2].trim();if(HU.test(l)){let c=o.sourceSpan.start.moveBy(a[1].length),u=new Z(c,c.moveBy(l.length));i=new Ki(l,l,u,u)}else e.push(new K(o.sourceSpan,'"as" expression must be a valid JavaScript identifier'))}}return{expression:r,expressionAlias:i}}function QU(t,e){let n=t.expression,r=/^\s$/,i=0,s=0,o=n.length-1;for(let a=0;a<n.length;a++){let l=n[a];if(l==="(")s=a+1,i++;else{if(r.test(l))continue;break}}if(i===0)return n;for(let a=n.length-1;a>-1;a--){let l=n[a];if(l===")"){if(o=a,i--,i===0)break}else{if(r.test(l))continue;break}}return i!==0?(e.push(new K(t.sourceSpan,"Unclosed parentheses in expression")),null):n.slice(s,o)}var Uy=class extends Ta{hasPipe=!1;visitPipe(){this.hasPipe=!0}},XU=/^\d+\.?\d*(ms|s)?$/,ZU=/^\s$/,ex=new Map([[fr,Xt],[qr,pi],[An,kt]]),Zt=(function(t){return t.IDLE="idle",t.TIMER="timer",t.INTERACTION="interaction",t.IMMEDIATE="immediate",t.HOVER="hover",t.VIEWPORT="viewport",t.NEVER="never",t})(Zt||{});function e$({expression:t,sourceSpan:e},n,r){let i=t.indexOf("never"),s=new Z(e.start.moveBy(i),e.start.moveBy(i+5)),o=b0(t,e),a=x0(t,e);i===-1?r.push(new K(e,'Could not find "never" keyword in expression')):T0("never",n,r,new Gv(s,e,o,null,a))}function Cv({expression:t,sourceSpan:e},n,r,i){let s=t.indexOf("when"),o=new Z(e.start.moveBy(s),e.start.moveBy(s+4)),a=b0(t,e),l=x0(t,e);if(s===-1)i.push(new K(e,'Could not find "when" keyword in expression'));else{let c=su(t,s+1),u=n.parseBinding(t.slice(c),!1,e,e.start.offset+c);T0("when",r,i,new Bf(u,e,a,o,l))}}function Sv({expression:t,sourceSpan:e},n,r,i,s){let o=t.indexOf("on"),a=new Z(e.start.moveBy(o),e.start.moveBy(o+2)),l=b0(t,e),c=x0(t,e);if(o===-1)i.push(new K(e,'Could not find "on" keyword in expression'));else{let u=su(t,o+1),h=t.startsWith("hydrate");new $y(t,n,u,e,r,i,h?l$:a$,h,l,a,c).parse()}}function b0(t,e){return t.startsWith("prefetch")?new Z(e.start,e.start.moveBy(8)):null}function x0(t,e){return t.startsWith("hydrate")?new Z(e.start,e.start.moveBy(7)):null}var $y=class{expression;bindingParser;start;span;triggers;errors;validator;isHydrationTrigger;prefetchSpan;onSourceSpan;hydrateSpan;index=0;tokens;constructor(e,n,r,i,s,o,a,l,c,u,h){this.expression=e,this.bindingParser=n,this.start=r,this.span=i,this.triggers=s,this.errors=o,this.validator=a,this.isHydrationTrigger=l,this.prefetchSpan=c,this.onSourceSpan=u,this.hydrateSpan=h,this.tokens=new tu().tokenize(e.slice(r))}parse(){for(;this.tokens.length>0&&this.index<this.tokens.length;){let e=this.token();if(!e.isIdentifier()){this.unexpectedToken(e);break}if(this.isFollowedByOrLast(hn))this.consumeTrigger(e,[]),this.advance();else if(this.isFollowedByOrLast(An)){this.advance();let n=this.errors.length,r=this.consumeParameters();if(this.errors.length!==n)break;this.consumeTrigger(e,r),this.advance()}else this.index<this.tokens.length-1&&this.unexpectedToken(this.tokens[this.index+1]);this.advance()}}advance(){this.index++}isFollowedByOrLast(e){return this.index===this.tokens.length-1?!0:this.tokens[this.index+1].isCharacter(e)}token(){return this.tokens[Math.min(this.index,this.tokens.length-1)]}consumeTrigger(e,n){let r=this.span.start.moveBy(this.start+e.index-this.tokens[0].index),i=new Z(r,r.moveBy(e.strValue.length)),s=r.moveBy(this.token().end-e.index),o=e.index===0,a=o?this.onSourceSpan:null,l=o?this.prefetchSpan:null,c=o?this.hydrateSpan:null,u=new Z(o?this.span.start:r,s);try{switch(e.toString()){case Zt.IDLE:this.trackTrigger("idle",t$(n,i,u,l,a,c));break;case Zt.TIMER:this.trackTrigger("timer",n$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Zt.INTERACTION:this.trackTrigger("interaction",s$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Zt.IMMEDIATE:this.trackTrigger("immediate",r$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan));break;case Zt.HOVER:this.trackTrigger("hover",i$(n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;case Zt.VIEWPORT:this.trackTrigger("viewport",o$(this.start,this.isHydrationTrigger,this.bindingParser,n,i,u,this.prefetchSpan,this.onSourceSpan,this.hydrateSpan,this.validator));break;default:throw new Error(`Unrecognized trigger type "${e}"`)}}catch(h){this.error(e,h.message)}}consumeParameters(){let e=[];if(!this.token().isCharacter(An))return this.unexpectedToken(this.token()),e;this.advance();let n=[],r=[];for(;this.index<this.tokens.length;){let i=this.token();if(i.isCharacter(kt)&&n.length===0){r.length&&e.push({expression:this.tokenRangeText(r),start:r[0].index});break}if(i.type===X.Character&&ex.has(i.numValue)&&n.push(ex.get(i.numValue)),n.length>0&&i.isCharacter(n[n.length-1])&&n.pop(),n.length===0&&i.isCharacter(hn)&&r.length>0){e.push({expression:this.tokenRangeText(r),start:r[0].index}),this.advance(),r=[];continue}r.push(i),this.advance()}return(!this.token().isCharacter(kt)||n.length>0)&&this.error(this.token(),"Unexpected end of expression"),this.index<this.tokens.length-1&&!this.tokens[this.index+1].isCharacter(hn)&&this.unexpectedToken(this.tokens[this.index+1]),e}tokenRangeText(e){return e.length===0?"":this.expression.slice(this.start+e[0].index,this.start+e[e.length-1].end)}trackTrigger(e,n){T0(e,this.triggers,this.errors,n)}error(e,n){let r=this.span.start.moveBy(this.start+e.index),i=r.moveBy(e.end-e.index);this.errors.push(new K(new Z(r,i),n))}unexpectedToken(e){this.error(e,`Unexpected token "${e}"`)}};function T0(t,e,n,r){e[t]?n.push(new K(r.sourceSpan,`Duplicate "${t}" trigger is not allowed`)):e[t]=r}function t$(t,e,n,r,i,s){if(t.length>0)throw new Error(`"${Zt.IDLE}" trigger cannot have parameters`);return new jv(e,n,r,i,s)}function n$(t,e,n,r,i,s){if(t.length!==1)throw new Error(`"${Zt.TIMER}" trigger must have exactly one parameter`);let o=Ch(t[0].expression);if(o===null)throw new Error(`Could not parse time value of trigger "${Zt.TIMER}"`);return new zv(o,e,n,r,i,s)}function r$(t,e,n,r,i,s){if(t.length>0)throw new Error(`"${Zt.IMMEDIATE}" trigger cannot have parameters`);return new Wv(e,n,r,i,s)}function i$(t,e,n,r,i,s,o){return o(Zt.HOVER,t),new Vf(t[0]?.expression??null,e,n,r,i,s)}function s$(t,e,n,r,i,s,o){return o(Zt.INTERACTION,t),new Uf(t[0]?.expression??null,e,n,r,i,s)}function o$(t,e,n,r,i,s,o,a,l,c){c(Zt.VIEWPORT,r);let u,h;if(r.length===0)u=h=null;else if(!r[0].expression.startsWith("{"))u=r[0].expression,h=null;else{let p=n.parseBinding(r[0].expression,!1,s,s.start.offset+t+r[0].start);if(p.ast instanceof ro){if(p.ast.keys.some(g=>g.kind==="spread"))throw new Error("Spread operator are not allowed in this context");if(p.ast.keys.some(g=>g.kind==="property"&&g.key==="root"))throw new Error('The "root" option is not supported in the options parameter of the "viewport" trigger')}else throw new Error('Options parameter of the "viewport" trigger must be an object literal');let m=p.ast.keys.findIndex(g=>g.kind==="property"&&g.key==="trigger");if(m===-1)u=null,h=p.ast;else{let g=p.ast.values[m],y=(E,w)=>w!==m;if(!(g instanceof Hr)||!(g.receiver instanceof Yr))throw new Error('"trigger" option of the "viewport" trigger must be an identifier');u=g.name,h=new ro(p.ast.span,p.ast.sourceSpan,p.ast.keys.filter(y),p.ast.values.filter(y))}}if(e&&u!==null)throw new Error('"viewport" hydration trigger cannot have a "trigger"');if(h){let p=Hy.findDynamicNode(h);if(p!==null)throw new Error(`Options of the "viewport" trigger must be an object literal containing only literal values, but "${p.constructor.name}" was found`)}return new Dc(u,h,i,s,o,a,l)}function a$(t,e){if(e.length>1)throw new Error(`"${t}" trigger can only have zero or one parameters`)}function l$(t,e){if(t===Zt.VIEWPORT){if(e.length>1)throw new Error(`Hydration trigger "${t}" cannot have more than one parameter`);return}if(e.length>0)throw new Error(`Hydration trigger "${t}" cannot have parameters`)}function su(t,e=0){let n=!1;for(let r=e;r<t.length;r++)if(ZU.test(t[r]))n=!0;else if(n)return r;return-1}function Ch(t){let e=t.match(XU);if(!e)return null;let[n,r]=e;return parseFloat(n)*(r==="s"?1e3:1)}var Hy=class t extends Ta{dynamicNode=null;static findDynamicNode(e){let n=new t;return n.visit(e),n.dynamicNode}visit(e){!(e instanceof fn)&&!(e instanceof dn)&&!(e instanceof Ec)&&!(e instanceof ro)?this.dynamicNode=e:super.visit(e)}},c$=/^prefetch\s+when\s/,u$=/^prefetch\s+on\s/,d$=/^hydrate\s+when\s/,f$=/^hydrate\s+on\s/,h$=/^hydrate\s+never(\s*)$/,OT=/^minimum\s/,p$=/^after\s/,m$=/^when\s/,g$=/^on\s/;function qy(t){return t==="placeholder"||t==="loading"||t==="error"}function v$(t,e,n,r){let i=[],{placeholder:s,loading:o,error:a}=y$(e,i,n),{triggers:l,prefetchTriggers:c,hydrateTriggers:u}=C$(t,r,i),h=t.endSourceSpan,p=t.sourceSpan.end;if(e.length>0){let y=e[e.length-1];h=y.endSourceSpan,p=y.sourceSpan.end}let m=new Z(t.sourceSpan.start,p);return{node:new io(He(n,t.children,t.children),l,c,u,s,o,a,t.nameSpan,m,t.sourceSpan,t.startSourceSpan,h,t.i18n),errors:i}}function y$(t,e,n){let r=null,i=null,s=null;for(let o of t)try{if(!qy(o.name)){e.push(new K(o.startSourceSpan,`Unrecognized block "@${o.name}"`));break}switch(o.name){case"placeholder":r!==null?e.push(new K(o.startSourceSpan,"@defer block can only have one @placeholder block")):r=w$(o,n);break;case"loading":i!==null?e.push(new K(o.startSourceSpan,"@defer block can only have one @loading block")):i=E$(o,n);break;case"error":s!==null?e.push(new K(o.startSourceSpan,"@defer block can only have one @error block")):s=_$(o,n);break}}catch(a){e.push(new K(o.startSourceSpan,a.message))}return{placeholder:r,loading:i,error:s}}function w$(t,e){let n=null;for(let r of t.parameters)if(OT.test(r.expression)){if(n!=null)throw new Error('@placeholder block can only have one "minimum" parameter');let i=Ch(r.expression.slice(su(r.expression)));if(i===null)throw new Error('Could not parse time value of parameter "minimum"');n=i}else throw new Error(`Unrecognized parameter in @placeholder block: "${r.expression}"`);return new kc(He(e,t.children,t.children),n,t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function E$(t,e){let n=null,r=null;for(let i of t.parameters)if(p$.test(i.expression)){if(n!=null)throw new Error('@loading block can only have one "after" parameter');let s=Ch(i.expression.slice(su(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "after"');n=s}else if(OT.test(i.expression)){if(r!=null)throw new Error('@loading block can only have one "minimum" parameter');let s=Ch(i.expression.slice(su(i.expression)));if(s===null)throw new Error('Could not parse time value of parameter "minimum"');r=s}else throw new Error(`Unrecognized parameter in @loading block: "${i.expression}"`);return new Nc(He(e,t.children,t.children),n,r,t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function _$(t,e){if(t.parameters.length>0)throw new Error("@error block cannot have parameters");return new Mc(He(e,t.children,t.children),t.nameSpan,t.sourceSpan,t.startSourceSpan,t.endSourceSpan,t.i18n)}function C$(t,e,n,r){let i={},s={},o={};for(let a of t.parameters)m$.test(a.expression)?Cv(a,e,i,n):g$.test(a.expression)?Sv(a,e,i,n):c$.test(a.expression)?Cv(a,e,s,n):u$.test(a.expression)?Sv(a,e,s,n):d$.test(a.expression)?Cv(a,e,o,n):f$.test(a.expression)?Sv(a,e,o,n):h$.test(a.expression)?e$(a,o,n):n.push(new K(a.sourceSpan,"Unrecognized trigger"));return o.never&&Object.keys(o).length>1&&n.push(new K(t.startSourceSpan,"Cannot specify additional `hydrate` triggers if `hydrate never` is present")),{triggers:i,prefetchTriggers:s,hydrateTriggers:o}}var S$=/^(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*)$/,tx=1,nx=2,rx=3,ix=4,sx=5,b$=6,Ql=7,Ui={BANANA_BOX:{start:"[(",end:")]"},PROPERTY:{start:"[",end:"]"},EVENT:{start:"(",end:")"}},bv="*",x$=new Set(["link","style","script","ng-template","ng-container","ng-content"]),T$=new Set(["ngProjectAs","ngNonBindable"]);function I$(t,e,n){let r=new Gy(e,n),i=He(r,t,t),s=e.errors.concat(r.errors),o={nodes:i,errors:s,styleUrls:r.styleUrls,styles:r.styles,ngContentSelectors:r.ngContentSelectors};return n.collectCommentNodes&&(o.commentNodes=r.commentNodes),o}var Gy=class{bindingParser;options;errors=[];styles=[];styleUrls=[];ngContentSelectors=[];commentNodes=[];inI18nBlock=!1;processedNodes=new Set;constructor(e,n){this.bindingParser=e,this.options=n}visitElement(e){let n=mf(e.i18n);n&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);let r=LT(e);if(r.type===Tn.SCRIPT)return null;if(r.type===Tn.STYLE){let w=A$(e);return w!==null&&this.styles.push(w),null}else if(r.type===Tn.STYLESHEET&&TU(r.hrefAttr))return this.styleUrls.push(r.hrefAttr),null;let i=UR(e.name),{attributes:s,boundEvents:o,references:a,variables:l,templateVariables:c,elementHasInlineTemplate:u,parsedProperties:h,templateParsedProperties:p,i18nAttrsMeta:m}=this.prepareAttributes(e.attrs,i),g=this.extractDirectives(e),y;r.nonBindable?y=He(ox,e.children).flat(1/0):y=He(this,e.children,e.children);let E;if(r.type===Tn.NG_CONTENT){let w=r.selectAttr,I=e.attrs.map(D=>this.visitAttribute(D));E=new ka(w,I,y,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n),this.ngContentSelectors.push(w)}else if(i){let w=this.categorizePropertyAttributes(e.name,h,m);E=new Dn(e.name,s,w.bound,o,g,[],y,a,l,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{let w=this.categorizePropertyAttributes(e.name,h,m);if(e.name==="ng-container")for(let I of w.bound)I.type===Se.Attribute&&this.reportError("Attribute bindings are not supported on ng-container. Use property bindings instead.",I.sourceSpan);E=new Kr(e.name,s,w.bound,o,g,y,a,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid,e.i18n)}return u&&(E=this.wrapInTemplate(E,p,c,m,i,n)),n&&(this.inI18nBlock=!1),E}visitAttribute(e){return new Aa(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return this.processedNodes.has(e)?null:this._visitTextWithInterpolation(e.value,e.sourceSpan,e.tokens,e.i18n)}visitExpansion(e){if(!e.i18n)return null;if(!mf(e.i18n))throw new Error(`Invalid type "${e.i18n.constructor}" for "i18n" property of ${e.sourceSpan.toString()}. Expected a "Message"`);let n=e.i18n,r={},i={};return Object.keys(n.placeholders).forEach(s=>{let o=n.placeholders[s];if(s.startsWith(GR)){let a=s.trim(),l=this.bindingParser.parseInterpolationExpression(o.text,o.sourceSpan);r[a]=new Ia(l,o.sourceSpan)}else i[s]=this._visitTextWithInterpolation(o.text,o.sourceSpan,null)}),new bx(r,i,e.sourceSpan,n)}visitExpansionCase(e){return null}visitComment(e){return this.options.collectCommentNodes&&this.commentNodes.push(new Dh(e.value||"",e.sourceSpan)),null}visitLetDeclaration(e,n){let r=this.bindingParser.parseBinding(e.value,!1,e.valueSpan,e.valueSpan.start.offset);return r.errors.length===0&&r.ast instanceof Kt&&this.reportError("@let declaration value cannot be empty",e.valueSpan),new a0(e.name,r,e.sourceSpan,e.nameSpan,e.valueSpan)}visitComponent(e){let n=mf(e.i18n);if(n&&(this.inI18nBlock&&this.reportError("Cannot mark a component as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0),e.tagName!==null&&x$.has(e.tagName))return this.reportError(`Tag name "${e.tagName}" cannot be used as a component tag`,e.startSourceSpan),null;let{attributes:r,boundEvents:i,references:s,templateVariables:o,elementHasInlineTemplate:a,parsedProperties:l,templateParsedProperties:c,i18nAttrsMeta:u}=this.prepareAttributes(e.attrs,!1);this.validateSelectorlessReferences(s);let h=this.extractDirectives(e),p;e.attrs.find(y=>y.name==="ngNonBindable")?p=He(ox,e.children).flat(1/0):p=He(this,e.children,e.children);let m=this.categorizePropertyAttributes(e.tagName,l,u),g=new ic(e.componentName,e.tagName,e.fullName,r,m.bound,i,h,p,s,e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);return a&&(g=this.wrapInTemplate(g,c,o,u,!1,n)),n&&(this.inI18nBlock=!1),g}visitDirective(){return null}visitBlockParameter(){return null}visitBlock(e,n){let r=Array.isArray(n)?n.indexOf(e):-1;if(r===-1)throw new Error("Visitor invoked incorrectly. Expecting visitBlock to be invoked siblings array as its context");if(this.processedNodes.has(e))return null;let i=null;switch(e.name){case"defer":i=v$(e,this.findConnectedBlocks(r,n,qy),this,this.bindingParser);break;case"switch":i=jU(e,this,this.bindingParser);break;case"for":i=GU(e,this.findConnectedBlocks(r,n,Qb),this,this.bindingParser);break;case"if":i=qU(e,this.findConnectedBlocks(r,n,Xb),this,this.bindingParser);break;default:let s;qy(e.name)?(s=`@${e.name} block can only be used after an @defer block.`,this.processedNodes.add(e)):Qb(e.name)?(s=`@${e.name} block can only be used after an @for block.`,this.processedNodes.add(e)):Xb(e.name)?(s=`@${e.name} block can only be used after an @if or @else if block.`,this.processedNodes.add(e)):s=`Unrecognized block @${e.name}.`,i={node:new qf(e.name,e.sourceSpan,e.nameSpan),errors:[new K(e.sourceSpan,s)]};break}return this.errors.push(...i.errors),i.node}findConnectedBlocks(e,n,r){let i=[];for(let s=e+1;s<n.length;s++){let o=n[s];if(!(o instanceof Xc)){if(o instanceof uo&&o.value.trim().length===0){this.processedNodes.add(o);continue}if(!(o instanceof Wn)||!r(o.name))break;i.push(o),this.processedNodes.add(o)}}return i}categorizePropertyAttributes(e,n,r){let i=[],s=[];return n.forEach(o=>{let a=r[o.name];if(o.isLiteral)s.push(new Aa(o.name,o.expression.source||"",o.sourceSpan,o.keySpan,o.valueSpan,a));else{let l=this.bindingParser.createBoundElementProperty(e,o,!0,!1);i.push(Hv.fromBoundElementProperty(l,a))}}),{bound:i,literal:s}}prepareAttributes(e,n){let r=[],i=[],s=[],o=[],a=[],l={},c=[],u=[],h=!1;for(let p of e){let m=!1,g=ax(p.name),y=!1;if(p.i18n&&(l[p.name]=p.i18n),g.startsWith(bv)){h&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",p.sourceSpan),y=!0,h=!0;let E=p.value,w=g.substring(bv.length),I=[],D=p.valueSpan?p.valueSpan.fullStart.offset:p.sourceSpan.fullStart.offset+p.name.length;this.bindingParser.parseInlineTemplateBinding(w,E,p.sourceSpan,D,[],c,I,!0),u.push(...I.map(b=>new Ki(b.name,b.value,b.sourceSpan,b.keySpan,b.valueSpan)))}else m=this.parseAttribute(n,p,[],r,i,s,o);!m&&!y&&a.push(this.visitAttribute(p))}return{attributes:a,boundEvents:i,references:o,variables:s,templateVariables:u,elementHasInlineTemplate:h,parsedProperties:r,templateParsedProperties:c,i18nAttrsMeta:l}}parseAttribute(e,n,r,i,s,o,a){let l=ax(n.name),c=n.value,u=n.sourceSpan,h=n.valueSpan?n.valueSpan.fullStart.offset:u.fullStart.offset;function p(w,I,D){let b=n.name.length-l.length,L=w.start.moveBy(I.length+b),M=L.moveBy(D.length);return new Z(L,M,L,D)}let m=l.match(S$);if(m){if(m[tx]!=null){let w=m[Ql],I=p(u,m[tx],w);this.bindingParser.parsePropertyBinding(w,c,!1,!1,u,h,n.valueSpan,r,i,I)}else if(m[nx])if(e){let w=m[Ql],I=p(u,m[nx],w);this.parseVariable(w,c,u,I,n.valueSpan,o)}else this.reportError('"let-" is only supported on ng-template elements.',u);else if(m[rx]){let w=m[Ql],I=p(u,m[rx],w);this.parseReference(w,c,u,I,n.valueSpan,a)}else if(m[ix]){let w=[],I=m[Ql],D=p(u,m[ix],I);this.bindingParser.parseEvent(I,c,!1,u,n.valueSpan||u,r,w,D),xv(w,s)}else if(m[sx]){let w=m[Ql],I=p(u,m[sx],w);this.bindingParser.parsePropertyBinding(w,c,!1,!0,u,h,n.valueSpan,r,i,I),this.parseAssignmentEvent(w,c,u,n.valueSpan,r,s,I,h)}else if(m[b$]){let w=p(u,"",l);this.bindingParser.parseLiteralAttr(l,c,u,h,n.valueSpan,r,i,w)}return!0}let g=null;if(l.startsWith(Ui.BANANA_BOX.start)?g=Ui.BANANA_BOX:l.startsWith(Ui.PROPERTY.start)?g=Ui.PROPERTY:l.startsWith(Ui.EVENT.start)&&(g=Ui.EVENT),g!==null&&l.endsWith(g.end)&&l.length>g.start.length+g.end.length){let w=l.substring(g.start.length,l.length-g.end.length),I=p(u,g.start,w);if(g.start===Ui.BANANA_BOX.start)this.bindingParser.parsePropertyBinding(w,c,!1,!0,u,h,n.valueSpan,r,i,I),this.parseAssignmentEvent(w,c,u,n.valueSpan,r,s,I,h);else if(g.start===Ui.PROPERTY.start)this.bindingParser.parsePropertyBinding(w,c,!1,!1,u,h,n.valueSpan,r,i,I);else{let D=[];this.bindingParser.parseEvent(w,c,!1,u,n.valueSpan||u,r,D,I),xv(D,s)}return!0}let y=p(u,"",l);return this.bindingParser.parsePropertyInterpolation(l,c,u,n.valueSpan,r,i,y,n.valueTokens??null)}extractDirectives(e){let n=e instanceof un?e.tagName:e.name,r=[],i=new Set;for(let s of e.directives){let o=!1;for(let m of s.attrs)m.name.startsWith(bv)?(o=!0,this.reportError(`Shorthand template syntax "${m.name}" is not supported inside a directive context`,m.sourceSpan)):T$.has(m.name)&&(o=!0,this.reportError(`Attribute "${m.name}" is not supported in a directive context`,m.sourceSpan));if(!o&&i.has(s.name)&&(o=!0,this.reportError(`Cannot apply directive "${s.name}" multiple times on the same element`,s.sourceSpan)),o)continue;let{attributes:a,parsedProperties:l,boundEvents:c,references:u,i18nAttrsMeta:h}=this.prepareAttributes(s.attrs,!1);this.validateSelectorlessReferences(u);let{bound:p}=this.categorizePropertyAttributes(n,l,h);for(let m of p)m.type!==Se.Property&&m.type!==Se.TwoWay&&(o=!0,this.reportError("Binding is not supported in a directive context",m.sourceSpan));o||(i.add(s.name),r.push(new Sx(s.name,a,p,c,u,s.sourceSpan,s.startSourceSpan,s.endSourceSpan,void 0)))}return r}filterAnimationAttributes(e){return e.filter(n=>!n.name.startsWith("animate."))}filterAnimationInputs(e){return e.filter(n=>n.type!==Se.Animation)}wrapInTemplate(e,n,r,i,s,o){let a=this.categorizePropertyAttributes("ng-template",n,i),l=[];a.literal.forEach(p=>l.push(p)),a.bound.forEach(p=>l.push(p));let c={attributes:[],inputs:[],outputs:[]};(e instanceof Kr||e instanceof ic)&&(c.attributes.push(...this.filterAnimationAttributes(e.attributes)),c.inputs.push(...this.filterAnimationInputs(e.inputs)),c.outputs.push(...e.outputs));let u=s&&o?void 0:e.i18n,h;return e instanceof ic?h=e.tagName:e instanceof Dn?h=null:h=e.name,new Dn(h,c.attributes,c.inputs,c.outputs,[],l,[e],[],r,!1,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,u)}_visitTextWithInterpolation(e,n,r,i){let s=fT(e),o=this.bindingParser.parseInterpolation(s,n,r);return o?new Ia(o,n,i):new Us(s,n)}parseVariable(e,n,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',r):e.length===0&&this.reportError("Variable does not have a name",r),o.push(new Ki(e,n,r,i,s))}parseReference(e,n,r,i,s,o){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',r):e.length===0?this.reportError("Reference does not have a name",r):o.some(a=>a.name===e)&&this.reportError(`Reference "#${e}" is defined more than once`,r),o.push(new Lc(e,n,r,i,s))}parseAssignmentEvent(e,n,r,i,s,o,a,l){let c=[];this.bindingParser.parseEvent(`${e}Change`,n,!0,r,i||r,s,c,a),xv(c,o)}validateSelectorlessReferences(e){if(e.length===0)return;let n=new Set;for(let r of e)r.value.length>0?this.reportError("Cannot specify a value for a local reference in this context",r.valueSpan||r.sourceSpan):n.has(r.name)?this.reportError("Duplicate reference names are not allowed",r.sourceSpan):n.add(r.name)}reportError(e,n,r=ji.ERROR){this.errors.push(new K(n,e,r))}},jy=class{visitElement(e){let n=LT(e);if(n.type===Tn.SCRIPT||n.type===Tn.STYLE||n.type===Tn.STYLESHEET)return null;let r=He(this,e.children,null);return new Kr(e.name,He(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.isVoid)}visitComment(e){return null}visitAttribute(e){return new Aa(e.name,e.value,e.sourceSpan,e.keySpan,e.valueSpan,e.i18n)}visitText(e){return new Us(e.value,e.sourceSpan)}visitExpansion(e){return null}visitExpansionCase(e){return null}visitBlock(e,n){let r=[new Us(e.startSourceSpan.toString(),e.startSourceSpan),...He(this,e.children)];return e.endSourceSpan!==null&&r.push(new Us(e.endSourceSpan.toString(),e.endSourceSpan)),r}visitBlockParameter(e,n){return null}visitLetDeclaration(e,n){return new Us(`@let ${e.name} = ${e.value};`,e.sourceSpan)}visitComponent(e,n){let r=He(this,e.children,null);return new Kr(e.fullName,He(this,e.attrs),[],[],[],r,[],e.isSelfClosing,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,!1)}visitDirective(e,n){return null}},ox=new jy;function ax(t){return/^data-/i.test(t)?t.substring(5):t}function xv(t,e){e.push(...t.map(n=>qv.fromParsedEvent(n)))}function A$(t){return t.children.length!==1||!(t.children[0]instanceof uo)?null:t.children[0].value}var D$=[" ",`
`,"\r","	"];function k$(t,e,n={}){let{preserveWhitespaces:r,enableI18nLegacyMessageIdFormat:i}=n,s=n.enableSelectorless??!1,o=Sh(s),l=new Oy().parse(t,e,te(A({leadingTriviaChars:D$},n),{tokenizeExpansionForms:!0,tokenizeBlocks:n.enableBlockSyntax??!0,tokenizeLet:n.enableLetSyntax??!0,selectorlessEnabled:s}));if(!n.alwaysAttemptHtmlToR3AstConversion&&l.errors&&l.errors.length>0){let b={preserveWhitespaces:r,errors:l.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return n.collectCommentNodes&&(b.commentNodes=[]),b}let c=l.rootNodes,u=!(n.preserveSignificantWhitespace??!0),h=new ph(!r,i,n.preserveSignificantWhitespace,u),p=h.visitAllWithErrors(c);if(!n.alwaysAttemptHtmlToR3AstConversion&&p.errors&&p.errors.length>0){let b={preserveWhitespaces:r,errors:p.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};return n.collectCommentNodes&&(b.commentNodes=[]),b}c=p.rootNodes,r||(c=He(new fh(!0,void 0,!1),c),h.hasI18nMeta&&(c=He(new ph(!1,void 0,!0,u),c)));let{nodes:m,errors:g,styleUrls:y,styles:E,ngContentSelectors:w,commentNodes:I}=I$(c,o,{collectCommentNodes:!!n.collectCommentNodes});g.push(...l.errors,...p.errors);let D={preserveWhitespaces:r,errors:g.length>0?g:null,nodes:m,styleUrls:y,styles:E,ngContentSelectors:w};return n.collectCommentNodes&&(D.commentNodes=I),D}var N$=new Fa;function Sh(t=!1){return new Fy(new hh(new tu,t),N$,[])}var FT="%COMP%",M$=`_nghost-${FT}`,R$=`_ngcontent-${FT}`;function BT(t,e,n){let r=new Zi,i=n0(t.selector);return r.set("type",t.type.value),i.length>0&&r.set("selectors",fa(i)),t.queries.length>0&&r.set("contentQueries",_U(t.queries,e,t.name)),t.viewQueries.length&&r.set("viewQuery",EU(t.viewQueries,e,t.name)),r.set("hostBindings",$$(t.host,t.typeSourceSpan,n,e,t.selector||"",t.name,r)),r.set("inputs",US(t.inputs,!0)),r.set("outputs",US(t.outputs)),t.exportAs!==null&&r.set("exportAs",Ae(t.exportAs.map(s=>T(s)))),t.isStandalone===!1&&r.set("standalone",T(!1)),t.isSignal&&r.set("signals",T(!0)),r}function VT(t,e){let n=[],r=e.providers,i=e.viewProviders;if(r||i){let s=[r||new zr([])];i&&s.push(i),n.push(G(_.ProvidersFeature).callFn(s))}if(e.hostDirectives?.length&&n.push(G(_.HostDirectivesFeature).callFn([W$(e.hostDirectives)])),e.usesInheritance&&n.push(G(_.InheritDefinitionFeature)),e.lifecycle.usesOnChanges&&n.push(G(_.NgOnChangesFeature)),"externalStyles"in e&&e.externalStyles?.length){let s=e.externalStyles.map(o=>T(o));n.push(G(_.ExternalStylesFeature).callFn([Ae(s)]))}n.length&&t.set("features",Ae(n))}function P$(t,e,n){let r=BT(t,e,n);VT(r,t);let i=G(_.defineDirective).callFn([r.toLiteralMap()],void 0,!0),s=U$(t);return{expression:i,type:s,statements:[]}}function L$(t,e,n){let r=BT(t,e,n);VT(r,t);let i=t.selector&&wa.parse(t.selector),s=i&&i[0];if(s){let g=s.getAttrs();g.length&&r.set("attrs",e.getConstLiteral(Ae(g.map(y=>y!=null?T(y):T(void 0))),!0))}let o=t.name,a=null;if(t.defer.mode===1&&t.defer.dependenciesFn!==null){let g=`${o}_DeferFn`;e.statements.push(new wt(g,t.defer.dependenciesFn,void 0,Mt.Final)),a=Ee(g)}let l=t.isStandalone&&!t.hasDirectiveDependencies?cn.DomOnly:cn.Full,c=KV(t.name,t.template.nodes,e,l,t.relativeContextFilePath,t.i18nUseExternalIds,t.defer,a,t.relativeTemplatePath,vU());bT(c,B.Tmpl);let u=WV(c,e);if(c.contentSelectors!==null&&r.set("ngContentSelectors",c.contentSelectors),r.set("decls",T(c.root.decls)),r.set("vars",T(c.root.vars)),c.consts.length>0&&(c.constsInitializers.length>0?r.set("consts",Jr([],[...c.constsInitializers,new Rt(Ae(c.consts))])):r.set("consts",Ae(c.consts))),r.set("template",u),t.declarationListEmitMode!==3&&t.declarations.length>0)r.set("dependencies",F$(Ae(t.declarations.map(g=>g.type)),t.declarationListEmitMode));else if(t.declarationListEmitMode===3){let g=[t.type.value];t.rawImports&&g.push(t.rawImports),r.set("dependencies",G(_.getComponentDepsFactory).callFn(g))}t.encapsulation===null&&(t.encapsulation=Ps.Emulated);let h=!!t.externalStyles?.length;if(t.styles&&t.styles.length){let y=(t.encapsulation==Ps.Emulated?j$(t.styles,R$,M$):t.styles).reduce((E,w)=>(w.trim().length>0&&E.push(e.getConstLiteral(T(w))),E),[]);y.length>0&&(h=!0,r.set("styles",Ae(y)))}!h&&t.encapsulation===Ps.Emulated&&(t.encapsulation=Ps.None),t.encapsulation!==Ps.Emulated&&r.set("encapsulation",T(t.encapsulation)),t.animations!==null&&r.set("data",Kn([{key:"animation",value:t.animations,quoted:!1}])),t.changeDetection!==null&&(typeof t.changeDetection=="number"&&t.changeDetection!==t0.Default?r.set("changeDetection",T(t.changeDetection)):typeof t.changeDetection=="object"&&r.set("changeDetection",t.changeDetection));let p=G(_.defineComponent).callFn([r.toLiteralMap()],void 0,!0),m=O$(t);return{expression:p,type:m,statements:[]}}function O$(t){let e=UT(t);return e.push(zy(t.template.ngContentSelectors)),e.push(Pt(T(t.isStandalone))),e.push($T(t)),t.isSignal&&e.push(Pt(T(t.isSignal))),Pt(G(_.ComponentDeclaration,e))}function F$(t,e){switch(e){case 0:return t;case 1:return Jr([],t);case 2:let n=t.prop("map").callFn([G(_.resolveForwardRef)]);return Jr([],n);case 3:throw new Error("Unsupported with an array of pre-resolved dependencies")}}function B$(t){return Pt(T(t))}function Wy(t){let e=Object.keys(t).map(n=>{let r=Array.isArray(t[n])?t[n][0]:t[n];return{key:n,value:T(r),quoted:!0}});return Kn(e)}function zy(t){return t.length>0?Pt(Ae(t.map(e=>T(e)))):jr}function UT(t){let e=t.selector!==null?t.selector.replace(/\n/g,""):null;return[Ah(t.type.type,t.typeArgumentCount),e!==null?B$(e):jr,t.exportAs!==null?zy(t.exportAs):jr,Pt(V$(t)),Pt(Wy(t.outputs)),zy(t.queries.map(n=>n.propertyName))]}function V$(t){return Kn(Object.keys(t.inputs).map(e=>{let n=t.inputs[e],r=[{key:"alias",value:T(n.bindingPropertyName),quoted:!0},{key:"required",value:T(n.required),quoted:!0}];return n.isSignal&&r.push({key:"isSignal",value:T(n.isSignal),quoted:!0}),{key:e,value:Kn(r),quoted:!0}}))}function U$(t){let e=UT(t);return e.push(jr),e.push(Pt(T(t.isStandalone))),e.push($T(t)),t.isSignal&&e.push(Pt(T(t.isSignal))),Pt(G(_.DirectiveDeclaration,e))}function $$(t,e,n,r,i,s,o){let a=n.createBoundHostProperties(t.properties,e),l=n.createDirectiveHostEventAsts(t.listeners,e);t.specialAttributes.styleAttr&&(t.attributes.style=T(t.specialAttributes.styleAttr)),t.specialAttributes.classAttr&&(t.attributes.class=T(t.specialAttributes.classAttr));let c=QV({componentName:s,componentSelector:i,properties:a,events:l,attributes:t.attributes},n,r);bT(c,B.Host),o.set("hostAttrs",c.root.attributes);let u=c.root.vars;return u!==null&&u>0&&o.set("hostVars",T(u)),zV(c)}var H$=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;function q$(t){let e={},n={},r={},i={};for(let s of Object.keys(t)){let o=t[s],a=s.match(H$);if(a===null)switch(s){case"class":if(typeof o!="string")throw new Error("Class binding must be string");i.classAttr=o;break;case"style":if(typeof o!="string")throw new Error("Style binding must be string");i.styleAttr=o;break;default:typeof o=="string"?e[s]=T(o):e[s]=o}else if(a[1]!=null){if(typeof o!="string")throw new Error("Property binding must be string");r[a[1]]=o}else if(a[2]!=null){if(typeof o!="string")throw new Error("Event binding must be string");n[a[2]]=o}}return{attributes:e,listeners:n,properties:r,specialAttributes:i}}function G$(t,e){let n=Sh();return n.createDirectiveHostEventAsts(t.listeners,e),n.createBoundHostProperties(t.properties,e),n.errors}function j$(t,e,n){let r=new ry;return t.map(i=>r.shimCssText(i,e,n))}function $T(t){return t.hostDirectives?.length?Pt(Ae(t.hostDirectives.map(e=>Kn([{key:"directive",value:ou(e.directive.type),quoted:!1},{key:"inputs",value:Wy(e.inputs||{}),quoted:!1},{key:"outputs",value:Wy(e.outputs||{}),quoted:!1}])))):jr}function W$(t){let e=[],n=!1;for(let r of t){if(!r.inputs&&!r.outputs)e.push(r.directive.type);else{let i=[{key:"directive",value:r.directive.type,quoted:!1}];if(r.inputs){let s=lx(r.inputs);s&&i.push({key:"inputs",value:s,quoted:!1})}if(r.outputs){let s=lx(r.outputs);s&&i.push({key:"outputs",value:s,quoted:!1})}e.push(Kn(i))}r.isForwardReference&&(n=!0)}return n?new zi([],[new Rt(Ae(e))]):Ae(e)}function lx(t){let e=[];for(let n in t)t.hasOwnProperty(n)&&e.push(T(n),T(t[n]));return e.length>0?Ae(e):null}var Jy=class extends Ta{visit(e){e instanceof fn?this.visit(e.ast):e.visit(this)}visitElement(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitTemplate(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.templateAttrs),this.visitAllTemplateNodes(e.variables),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitContent(e){this.visitAllTemplateNodes(e.children)}visitBoundAttribute(e){this.visit(e.value)}visitBoundEvent(e){this.visit(e.handler)}visitBoundText(e){this.visit(e.value)}visitIcu(e){Object.keys(e.vars).forEach(n=>this.visit(e.vars[n])),Object.keys(e.placeholders).forEach(n=>this.visit(e.placeholders[n]))}visitDeferredBlock(e){e.visitAll(this)}visitDeferredTrigger(e){e instanceof Bf?this.visit(e.value):e instanceof Dc&&e.options!==null&&this.visit(e.options)}visitDeferredBlockPlaceholder(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockError(e){this.visitAllTemplateNodes(e.children)}visitDeferredBlockLoading(e){this.visitAllTemplateNodes(e.children)}visitSwitchBlock(e){this.visit(e.expression),this.visitAllTemplateNodes(e.groups)}visitSwitchBlockCase(e){e.expression&&this.visit(e.expression)}visitSwitchBlockCaseGroup(e){this.visitAllTemplateNodes(e.cases),this.visitAllTemplateNodes(e.children)}visitForLoopBlock(e){e.item.visit(this),this.visitAllTemplateNodes(e.contextVariables),this.visit(e.expression),this.visitAllTemplateNodes(e.children),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.visitAllTemplateNodes(e.children)}visitIfBlock(e){this.visitAllTemplateNodes(e.branches)}visitIfBlockBranch(e){e.expression&&this.visit(e.expression),e.expressionAlias?.visit(this),this.visitAllTemplateNodes(e.children)}visitLetDeclaration(e){this.visit(e.value)}visitComponent(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.directives),this.visitAllTemplateNodes(e.references),this.visitAllTemplateNodes(e.children)}visitDirective(e){this.visitAllTemplateNodes(e.attributes),this.visitAllTemplateNodes(e.inputs),this.visitAllTemplateNodes(e.outputs),this.visitAllTemplateNodes(e.references)}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitText(e){}visitUnknownBlock(e){}visitAllTemplateNodes(e){for(let n of e)this.visit(n)}};var Yy=class{directiveMatcher;constructor(e){this.directiveMatcher=e}bind(e){if(!e.template&&!e.host)throw new Error("Empty bound targets are not supported");let n=new Map,r=[],i=new Set,s=new Map,o=new Map,a=new Map,l=new Map,c=new Map,u=new Map,h=new Set,p=new Set,m=[];if(e.template){let g=bh.apply(e.template);z$(g,a),Ky.apply(e.template,this.directiveMatcher,n,r,i,s,o),xh.applyWithScope(e.template,g,l,c,u,h,p,m)}return e.host&&(n.set(e.host.node,e.host.directives),xh.applyWithScope(e.host.node,bh.apply(e.host.node),l,c,u,h,p,m)),new Qy(e,n,r,i,s,o,l,c,u,a,h,p,m)}},bh=class t{parentScope;rootNode;namedEntities=new Map;elementLikeInScope=new Set;childScopes=new Map;isDeferred;constructor(e,n){this.parentScope=e,this.rootNode=n,this.isDeferred=e!==null&&e.isDeferred?!0:n instanceof io}static newRootScope(){return new t(null,null)}static apply(e){let n=t.newRootScope();return n.ingest(e),n}ingest(e){e instanceof Dn?(e.variables.forEach(n=>this.visitVariable(n)),e.children.forEach(n=>n.visit(this))):e instanceof qs?(e.expressionAlias!==null&&this.visitVariable(e.expressionAlias),e.children.forEach(n=>n.visit(this))):e instanceof Da?(this.visitVariable(e.item),e.contextVariables.forEach(n=>this.visitVariable(n)),e.children.forEach(n=>n.visit(this))):e instanceof Rc||e instanceof Pc||e instanceof io||e instanceof Mc||e instanceof kc||e instanceof Nc||e instanceof ka?e.children.forEach(n=>n.visit(this)):e instanceof Oc||e.forEach(n=>n.visit(this))}visitElement(e){this.visitElementLike(e)}visitTemplate(e){e.directives.forEach(n=>n.visit(this)),e.references.forEach(n=>this.visitReference(n)),this.ingestScopedNode(e)}visitVariable(e){this.maybeDeclare(e)}visitReference(e){this.maybeDeclare(e)}visitDeferredBlock(e){this.ingestScopedNode(e),e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlock(e){e.groups.forEach(n=>n.visit(this))}visitSwitchBlockCase(e){}visitSwitchBlockCaseGroup(e){this.ingestScopedNode(e)}visitForLoopBlock(e){this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlock(e){e.branches.forEach(n=>n.visit(this))}visitIfBlockBranch(e){this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){this.maybeDeclare(e)}visitComponent(e){this.visitElementLike(e)}visitDirective(e){e.references.forEach(n=>this.visitReference(n))}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundText(e){}visitText(e){}visitTextAttribute(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitElementLike(e){e.directives.forEach(n=>n.visit(this)),e.references.forEach(n=>this.visitReference(n)),e.children.forEach(n=>n.visit(this)),this.elementLikeInScope.add(e)}maybeDeclare(e){this.namedEntities.has(e.name)||this.namedEntities.set(e.name,e)}lookup(e){return this.namedEntities.has(e)?this.namedEntities.get(e):this.parentScope!==null?this.parentScope.lookup(e):null}getChildScope(e){let n=this.childScopes.get(e);if(n===void 0)throw new Error(`Assertion error: child scope for ${e} not found`);return n}ingestScopedNode(e){let n=new t(this,e);n.ingest(e),this.childScopes.set(e,n)}},Ky=class t{directiveMatcher;directives;eagerDirectives;missingDirectives;bindings;references;isInDeferBlock=!1;constructor(e,n,r,i,s,o){this.directiveMatcher=e,this.directives=n,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o}static apply(e,n,r,i,s,o,a){new t(n,r,i,s,o,a).ingest(e)}ingest(e){e.forEach(n=>n.visit(this))}visitElement(e){this.visitElementOrTemplate(e)}visitTemplate(e){this.visitElementOrTemplate(e)}visitDeferredBlock(e){let n=this.isInDeferBlock;this.isInDeferBlock=!0,e.children.forEach(r=>r.visit(this)),this.isInDeferBlock=n,e.placeholder?.visit(this),e.loading?.visit(this),e.error?.visit(this)}visitDeferredBlockPlaceholder(e){e.children.forEach(n=>n.visit(this))}visitDeferredBlockError(e){e.children.forEach(n=>n.visit(this))}visitDeferredBlockLoading(e){e.children.forEach(n=>n.visit(this))}visitSwitchBlock(e){e.groups.forEach(n=>n.visit(this))}visitSwitchBlockCase(e){}visitSwitchBlockCaseGroup(e){e.children.forEach(n=>n.visit(this))}visitForLoopBlock(e){e.item.visit(this),e.contextVariables.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this)),e.empty?.visit(this)}visitForLoopBlockEmpty(e){e.children.forEach(n=>n.visit(this))}visitIfBlock(e){e.branches.forEach(n=>n.visit(this))}visitIfBlockBranch(e){e.expressionAlias?.visit(this),e.children.forEach(n=>n.visit(this))}visitContent(e){e.children.forEach(n=>n.visit(this))}visitComponent(e){if(this.directiveMatcher instanceof vf){let n=this.directiveMatcher.match(e.componentName);n.length>0?this.trackSelectorlessMatchesAndDirectives(e,n):this.missingDirectives.add(e.componentName)}e.directives.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this))}visitDirective(e){if(this.directiveMatcher instanceof vf){let n=this.directiveMatcher.match(e.name);n.length>0?this.trackSelectorlessMatchesAndDirectives(e,n):this.missingDirectives.add(e.name)}}visitElementOrTemplate(e){if(this.directiveMatcher instanceof gf){let n=[],r=zR(e);this.directiveMatcher.match(r,(i,s)=>n.push(...s)),this.trackSelectorBasedBindingsAndDirectives(e,n)}else e.references.forEach(n=>{n.value.trim()===""&&this.references.set(n,e)});e.directives.forEach(n=>n.visit(this)),e.children.forEach(n=>n.visit(this))}trackMatchedDirectives(e,n){n.length>0&&(this.directives.set(e,n),this.isInDeferBlock||this.eagerDirectives.push(...n))}trackSelectorlessMatchesAndDirectives(e,n){if(n.length===0)return;this.trackMatchedDirectives(e,n);let r=(i,s,o)=>{i[o].hasBindingPropertyName(s.name)&&this.bindings.set(s,i)};for(let i of n)e.inputs.forEach(s=>r(i,s,"inputs")),e.attributes.forEach(s=>r(i,s,"inputs")),e.outputs.forEach(s=>r(i,s,"outputs"));e.references.forEach(i=>this.references.set(i,{directive:n[0],node:e}))}trackSelectorBasedBindingsAndDirectives(e,n){this.trackMatchedDirectives(e,n),e.references.forEach(i=>{let s=null;if(i.value.trim()==="")s=n.find(o=>o.isComponent)||null;else if(s=n.find(o=>o.exportAs!==null&&o.exportAs.some(a=>a===i.value))||null,s===null)return;s!==null?this.references.set(i,{directive:s,node:e}):this.references.set(i,e)});let r=(i,s)=>{let o=n.find(l=>l[s].hasBindingPropertyName(i.name)),a=o!==void 0?o:e;this.bindings.set(i,a)};e.inputs.forEach(i=>r(i,"inputs")),e.attributes.forEach(i=>r(i,"inputs")),e instanceof Dn&&e.templateAttrs.forEach(i=>r(i,"inputs")),e.outputs.forEach(i=>r(i,"outputs"))}visitVariable(e){}visitReference(e){}visitTextAttribute(e){}visitBoundAttribute(e){}visitBoundEvent(e){}visitBoundAttributeOrEvent(e){}visitText(e){}visitBoundText(e){}visitIcu(e){}visitDeferredTrigger(e){}visitUnknownBlock(e){}visitLetDeclaration(e){}},xh=class t extends Jy{bindings;symbols;usedPipes;eagerPipes;deferBlocks;nestingLevel;scope;rootNode;level;visitNode=e=>e.visit(this);constructor(e,n,r,i,s,o,a,l,c){super(),this.bindings=e,this.symbols=n,this.usedPipes=r,this.eagerPipes=i,this.deferBlocks=s,this.nestingLevel=o,this.scope=a,this.rootNode=l,this.level=c}static applyWithScope(e,n,r,i,s,o,a,l){let c=e instanceof Dn?e:null;new t(r,i,o,a,l,s,n,c,0).ingest(e)}ingest(e){if(e instanceof Dn)e.variables.forEach(this.visitNode),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof qs)e.expressionAlias!==null&&this.visitNode(e.expressionAlias),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof Da)this.visitNode(e.item),e.contextVariables.forEach(n=>this.visitNode(n)),e.trackBy.visit(this),e.children.forEach(this.visitNode),this.nestingLevel.set(e,this.level);else if(e instanceof io){if(this.scope.rootNode!==e)throw new Error(`Assertion error: resolved incorrect scope for deferred block ${e}`);this.deferBlocks.push([e,this.scope]),e.children.forEach(n=>n.visit(this)),this.nestingLevel.set(e,this.level)}else e instanceof Rc||e instanceof Pc||e instanceof Mc||e instanceof kc||e instanceof Nc||e instanceof ka?(e.children.forEach(n=>n.visit(this)),this.nestingLevel.set(e,this.level)):e instanceof Oc?this.nestingLevel.set(e,0):e.forEach(this.visitNode)}visitTemplate(e){e.inputs.forEach(this.visitNode),e.outputs.forEach(this.visitNode),e.directives.forEach(this.visitNode),e.templateAttrs.forEach(this.visitNode),e.references.forEach(this.visitNode),this.ingestScopedNode(e)}visitVariable(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitReference(e){this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitDeferredBlock(e){this.ingestScopedNode(e),e.triggers.when?.value.visit(this),e.prefetchTriggers.when?.value.visit(this),e.hydrateTriggers.when?.value.visit(this),e.hydrateTriggers.never?.visit(this),e.placeholder&&this.visitNode(e.placeholder),e.loading&&this.visitNode(e.loading),e.error&&this.visitNode(e.error)}visitDeferredBlockPlaceholder(e){this.ingestScopedNode(e)}visitDeferredBlockError(e){this.ingestScopedNode(e)}visitDeferredBlockLoading(e){this.ingestScopedNode(e)}visitSwitchBlockCase(e){e.expression?.visit(this)}visitSwitchBlockCaseGroup(e){e.cases.forEach(n=>n.visit(this)),this.ingestScopedNode(e)}visitForLoopBlock(e){e.expression.visit(this),this.ingestScopedNode(e),e.empty?.visit(this)}visitForLoopBlockEmpty(e){this.ingestScopedNode(e)}visitIfBlockBranch(e){e.expression?.visit(this),this.ingestScopedNode(e)}visitContent(e){this.ingestScopedNode(e)}visitLetDeclaration(e){super.visitLetDeclaration(e),this.rootNode!==null&&this.symbols.set(e,this.rootNode)}visitPipe(e,n){return this.usedPipes.add(e.name),this.scope.isDeferred||this.eagerPipes.add(e.name),super.visitPipe(e,n)}visitPropertyRead(e,n){return this.maybeMap(e,e.name),super.visitPropertyRead(e,n)}visitSafePropertyRead(e,n){return this.maybeMap(e,e.name),super.visitSafePropertyRead(e,n)}ingestScopedNode(e){let n=this.scope.getChildScope(e);new t(this.bindings,this.symbols,this.usedPipes,this.eagerPipes,this.deferBlocks,this.nestingLevel,n,e,this.level+1).ingest(e)}maybeMap(e,n){if(!(e.receiver instanceof Yr))return;let r=this.scope.lookup(n);r!==null&&this.bindings.set(e,r)}},Qy=class{target;directives;eagerDirectives;missingDirectives;bindings;references;exprTargets;symbols;nestingLevel;scopedNodeEntities;usedPipes;eagerPipes;deferredBlocks;deferredScopes;constructor(e,n,r,i,s,o,a,l,c,u,h,p,m){this.target=e,this.directives=n,this.eagerDirectives=r,this.missingDirectives=i,this.bindings=s,this.references=o,this.exprTargets=a,this.symbols=l,this.nestingLevel=c,this.scopedNodeEntities=u,this.usedPipes=h,this.eagerPipes=p,this.deferredBlocks=m.map(g=>g[0]),this.deferredScopes=new Map(m)}getEntitiesInScope(e){return this.scopedNodeEntities.get(e)??new Set}getDirectivesOfNode(e){return this.directives.get(e)||null}getReferenceTarget(e){return this.references.get(e)||null}getConsumerOfBinding(e){return this.bindings.get(e)||null}getExpressionTarget(e){return this.exprTargets.get(e)||null}getDefinitionNodeOfSymbol(e){return this.symbols.get(e)||null}getNestingLevel(e){return this.nestingLevel.get(e)||0}getUsedDirectives(){let e=new Set;return this.directives.forEach(n=>n.forEach(r=>e.add(r))),Array.from(e.values())}getEagerlyUsedDirectives(){let e=new Set(this.eagerDirectives);return Array.from(e.values())}getUsedPipes(){return Array.from(this.usedPipes)}getEagerlyUsedPipes(){return Array.from(this.eagerPipes)}getDeferBlocks(){return this.deferredBlocks}getDeferredTriggerTarget(e,n){if(!(n instanceof Uf)&&!(n instanceof Dc)&&!(n instanceof Vf))return null;let r=n.reference;if(r===null){let s=null;if(e.placeholder!==null){for(let o of e.placeholder.children)if(!(o instanceof Dh)){if(s!==null)return null;o instanceof Kr&&(s=o)}}return s}let i=this.findEntityInScope(e,r);if(i instanceof Lc&&this.getDefinitionNodeOfSymbol(i)!==e){let s=this.getReferenceTarget(i);if(s!==null)return this.referenceTargetToElement(s)}if(e.placeholder!==null){let s=this.findEntityInScope(e.placeholder,r),o=s instanceof Lc?this.getReferenceTarget(s):null;if(o!==null)return this.referenceTargetToElement(o)}return null}isDeferred(e){for(let n of this.deferredBlocks){if(!this.deferredScopes.has(n))continue;let r=[this.deferredScopes.get(n)];for(;r.length>0;){let i=r.pop();if(i.elementLikeInScope.has(e))return!0;r.push(...i.childScopes.values())}}return!1}referencedDirectiveExists(e){return!this.missingDirectives.has(e)}findEntityInScope(e,n){let r=this.getEntitiesInScope(e);for(let i of r)if(i.name===n)return i;return null}referenceTargetToElement(e){return e instanceof Kr?e:e instanceof Dn||e.node instanceof ic||e.node instanceof Sx||e.node instanceof Oc?null:this.referenceTargetToElement(e.node)}};function z$(t,e){let n=new Map;function r(s){if(n.has(s.rootNode))return n.get(s.rootNode);let o=s.namedEntities,a;return s.parentScope!==null?a=new Map([...r(s.parentScope),...o]):a=new Map(o),n.set(s.rootNode,a),a}let i=[t];for(;i.length>0;){let s=i.pop();for(let o of s.childScopes.values())i.push(o);r(s)}for(let[s,o]of n)e.set(s,new Set(o.values()))}var Xy=class{},Zy=class{jitEvaluator;FactoryTarget=hi;ResourceLoader=Xy;elementSchemaRegistry=new Fa;constructor(e=new ey){this.jitEvaluator=e}compilePipe(e,n,r){let i={name:r.name,type:vt(r.type),typeArgumentCount:0,deps:null,pipeName:r.pipeName,pure:r.pure,isStandalone:r.isStandalone},s=QS(i);return this.jitExpression(s.expression,e,n,[])}compilePipeDeclaration(e,n,r){let i=u8(r),s=QS(i);return this.jitExpression(s.expression,e,n,[])}compileInjectable(e,n,r){let{expression:i,statements:s}=$S({name:r.name,type:vt(r.type),typeArgumentCount:r.typeArgumentCount,providedIn:px(r.providedIn),useClass:ca(r,"useClass"),useFactory:hx(r,"useFactory"),useValue:ca(r,"useValue"),useExisting:ca(r,"useExisting"),deps:r.deps?.map(jT)},!0);return this.jitExpression(i,e,n,s)}compileInjectableDeclaration(e,n,r){let{expression:i,statements:s}=$S({name:r.type.name,type:vt(r.type),typeArgumentCount:0,providedIn:px(r.providedIn),useClass:ca(r,"useClass"),useFactory:hx(r,"useFactory"),useValue:ca(r,"useValue"),useExisting:ca(r,"useExisting"),deps:r.deps?.map(mx)},!0);return this.jitExpression(i,e,n,s)}compileInjector(e,n,r){let i={name:r.name,type:vt(r.type),providers:r.providers&&r.providers.length>0?new ye(r.providers):null,imports:r.imports.map(o=>new ye(o))},s=KS(i);return this.jitExpression(s.expression,e,n,[])}compileInjectorDeclaration(e,n,r){let i=d8(r),s=KS(i);return this.jitExpression(s.expression,e,n,[])}compileNgModule(e,n,r){let i={kind:Wi.Global,type:vt(r.type),bootstrap:r.bootstrap.map(vt),declarations:r.declarations.map(vt),publicDeclarationTypes:null,imports:r.imports.map(vt),includeImportTypes:!0,exports:r.exports.map(vt),selectorScopeMode:Yf.Inline,containsForwardDecls:!1,schemas:r.schemas?r.schemas.map(vt):null,id:r.id?new ye(r.id):null},s=hP(i);return this.jitExpression(s.expression,e,n,[])}compileNgModuleDeclaration(e,n,r){let i=pP(r);return this.jitExpression(i,e,n,[])}compileDirective(e,n,r){let i=dx(r);return this.compileDirectiveFromMeta(e,n,i)}compileDirectiveDeclaration(e,n,r){let i=this.createParseSourceSpan("Directive",r.type.name,n),s=qT(r,i);return this.compileDirectiveFromMeta(e,n,s)}compileDirectiveFromMeta(e,n,r){let i=new If,s=Sh(),o=P$(r,i,s);return this.jitExpression(o.expression,e,n,i.statements)}compileComponent(e,n,r){let{template:i,defer:s}=GT(r.template,r.name,n,r.preserveWhitespaces,void 0),o=te(A(A({},r),dx(r)),{selector:r.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:i,declarations:r.declarations.map(Q$),declarationListEmitMode:0,defer:s,styles:[...r.styles,...i.styles],encapsulation:r.encapsulation,changeDetection:r.changeDetection??null,animations:r.animations!=null?new ye(r.animations):null,viewProviders:r.viewProviders!=null?new ye(r.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null}),a=`ng:///${r.name}.js`;return this.compileComponentFromMeta(e,a,o)}compileComponentDeclaration(e,n,r){let i=this.createParseSourceSpan("Component",r.type.name,n),s=K$(r,i,n);return this.compileComponentFromMeta(e,n,s)}compileComponentFromMeta(e,n,r){let i=new If,s=Sh(),o=L$(r,i,s);return this.jitExpression(o.expression,e,n,i.statements)}compileFactory(e,n,r){let i=Ls({name:r.name,type:vt(r.type),typeArgumentCount:r.typeArgumentCount,deps:e8(r.deps),target:r.target});return this.jitExpression(i.expression,e,n,i.statements)}compileFactoryDeclaration(e,n,r){let i=Ls({name:r.type.name,type:vt(r.type),typeArgumentCount:0,deps:Array.isArray(r.deps)?r.deps.map(mx):r.deps,target:r.target});return this.jitExpression(i.expression,e,n,i.statements)}createParseSourceSpan(e,n,r){return oP(e,n,r)}jitExpression(e,n,r,i){let s=[...i,new wt("$def",e,void 0,Mt.Exported)];return this.jitEvaluator.evaluateStatements(r,s,new ny(n),!0).$def}};function cx(t){return te(A({},t),{isSignal:t.isSignal,predicate:HT(t.predicate),read:t.read?new ye(t.read):null,static:t.static,emitDistinctChangesOnly:t.emitDistinctChangesOnly})}function ux(t){return{propertyName:t.propertyName,first:t.first??!1,predicate:HT(t.predicate),descendants:t.descendants??!1,read:t.read?new ye(t.read):null,static:t.static??!1,emitDistinctChangesOnly:t.emitDistinctChangesOnly??!0,isSignal:!!t.isSignal}}function HT(t){return Array.isArray(t)?t:o0(new ye(t),1)}function dx(t){let e=c8(t.inputs||[]),n=Iv(t.outputs||[]),r=t.propMetadata,i={},s={};for(let a in r)r.hasOwnProperty(a)&&r[a].forEach(l=>{s8(l)?i[a]={bindingPropertyName:l.alias||a,classPropertyName:a,required:l.required||!1,isSignal:!!l.isSignal,transformFunction:l.transform!=null?new ye(l.transform):null}:o8(l)&&(s[a]=l.alias||a)});let o=t.hostDirectives?.length?t.hostDirectives.map(a=>typeof a=="function"?{directive:vt(a),inputs:null,outputs:null,isForwardReference:!1}:{directive:vt(a.directive),isForwardReference:!1,inputs:a.inputs?Iv(a.inputs):null,outputs:a.outputs?Iv(a.outputs):null}):null;return te(A({},t),{typeArgumentCount:0,typeSourceSpan:t.typeSourceSpan,type:vt(t.type),deps:null,host:A({},n8(t.propMetadata,t.typeSourceSpan,t.host)),inputs:A(A({},e),i),outputs:A(A({},n),s),queries:t.queries.map(cx),providers:t.providers!=null?new ye(t.providers):null,viewQueries:t.viewQueries.map(cx),hostDirectives:o})}function qT(t,e){let n=t.hostDirectives?.length?t.hostDirectives.map(r=>({directive:vt(r.directive),isForwardReference:!1,inputs:r.inputs?fx(r.inputs):null,outputs:r.outputs?fx(r.outputs):null})):null;return{name:t.type.name,type:vt(t.type),typeSourceSpan:e,selector:t.selector??null,inputs:t.inputs?a8(t.inputs):{},outputs:t.outputs??{},host:J$(t.host),queries:(t.queries??[]).map(ux),viewQueries:(t.viewQueries??[]).map(ux),providers:t.providers!==void 0?new ye(t.providers):null,exportAs:t.exportAs??null,usesInheritance:t.usesInheritance??!1,lifecycle:{usesOnChanges:t.usesOnChanges??!1},deps:null,typeArgumentCount:0,isStandalone:t.isStandalone??Cx(t.version),isSignal:t.isSignal??!1,hostDirectives:n}}function J$(t={}){return{attributes:Y$(t.attributes??{}),listeners:t.listeners??{},properties:t.properties??{},specialAttributes:{classAttr:t.classAttribute,styleAttr:t.styleAttribute}}}function fx(t){let e=null;for(let n=1;n<t.length;n+=2)e=e||{},e[t[n-1]]=t[n];return e}function Y$(t){let e={};for(let n of Object.keys(t))e[n]=new ye(t[n]);return e}function K$(t,e,n){let{template:r,defer:i}=GT(t.template,t.type.name,n,t.preserveWhitespaces??!1,t.deferBlockDependencies),s=[];if(t.dependencies)for(let a of t.dependencies)switch(a.kind){case"directive":case"component":s.push(Tv(a));break;case"pipe":s.push(Z$(a));break}else(t.components||t.directives||t.pipes)&&(t.components&&s.push(...t.components.map(a=>Tv(a,!0))),t.directives&&s.push(...t.directives.map(a=>Tv(a))),t.pipes&&s.push(...X$(t.pipes)));let o=s.some(({kind:a})=>a===Ma.Directive||a===Ma.NgModule);return te(A({},qT(t,e)),{template:r,styles:t.styles??[],declarations:s,viewProviders:t.viewProviders!==void 0?new ye(t.viewProviders):null,animations:t.animations!==void 0?new ye(t.animations):null,defer:i,changeDetection:t.changeDetection??t0.Default,encapsulation:t.encapsulation??Ps.Emulated,declarationListEmitMode:2,relativeContextFilePath:"",i18nUseExternalIds:!0,relativeTemplatePath:null,hasDirectiveDependencies:o})}function Q$(t){return te(A({},t),{type:new ye(t.type)})}function Tv(t,e=null){return{kind:Ma.Directive,isComponent:e||t.kind==="component",selector:t.selector,type:new ye(t.type),inputs:t.inputs??[],outputs:t.outputs??[],exportAs:t.exportAs??null}}function X$(t){return t?Object.keys(t).map(e=>({kind:Ma.Pipe,name:e,type:new ye(t[e])})):[]}function Z$(t){return{kind:Ma.Pipe,name:t.name,type:new ye(t.type)}}function GT(t,e,n,r,i){let s=k$(t,n,{preserveWhitespaces:r});if(s.errors!==null){let l=s.errors.map(c=>c.toString()).join(", ");throw new Error(`Errors during JIT compilation of template for ${e}: ${l}`)}let a=new Yy(null).bind({template:s.nodes});return{template:s,defer:t8(a,i)}}function ca(t,e){if(t.hasOwnProperty(e))return o0(new ye(t[e]),0)}function hx(t,e){if(t.hasOwnProperty(e))return new ye(t[e])}function px(t){let e=typeof t=="function"?new ye(t):new Lt(t??null);return o0(e,0)}function e8(t){return t==null?null:t.map(jT)}function jT(t){let e=t.attribute!=null,n=t.token===null?null:new ye(t.token),r=e?new ye(t.attribute):n;return WT(r,e,t.host,t.optional,t.self,t.skipSelf)}function mx(t){let e=t.attribute??!1,n=t.token===null?null:new ye(t.token);return WT(n,e,t.host??!1,t.optional??!1,t.self??!1,t.skipSelf??!1)}function WT(t,e,n,r,i,s){let o=e?T("unknown"):null;return{token:t,attributeNameType:o,host:n,optional:r,self:i,skipSelf:s}}function t8(t,e){let n=t.getDeferBlocks(),r=new Map;for(let i=0;i<n.length;i++){let s=e?.[i];r.set(n[i],s?new ye(s):null)}return{mode:0,blocks:r}}function n8(t,e,n){let r=q$(n||{}),i=G$(r,e);if(i.length)throw new Error(i.map(s=>s.msg).join(`
`));for(let s in t)t.hasOwnProperty(s)&&t[s].forEach(o=>{r8(o)?r.properties[o.hostPropertyName||s]=DR("this",s):i8(o)&&(r.listeners[o.eventName||s]=`${s}(${(o.args||[]).join(",")})`)});return r}function r8(t){return t.ngMetadataName==="HostBinding"}function i8(t){return t.ngMetadataName==="HostListener"}function s8(t){return t.ngMetadataName==="Input"}function o8(t){return t.ngMetadataName==="Output"}function a8(t){return Object.keys(t).reduce((e,n)=>{let r=t[n];return typeof r=="string"||Array.isArray(r)?e[n]=l8(r):e[n]={bindingPropertyName:r.publicName,classPropertyName:n,transformFunction:r.transformFunction!==null?new ye(r.transformFunction):null,required:r.isRequired,isSignal:r.isSignal},e},{})}function l8(t){return typeof t=="string"?{bindingPropertyName:t,classPropertyName:t,transformFunction:null,required:!1,isSignal:!1}:{bindingPropertyName:t[0],classPropertyName:t[1],transformFunction:t[2]?new ye(t[2]):null,required:!1,isSignal:!1}}function c8(t){return t.reduce((e,n)=>{if(typeof n=="string"){let[r,i]=zT(n);e[i]={bindingPropertyName:r,classPropertyName:i,required:!1,isSignal:!1,transformFunction:null}}else e[n.name]={bindingPropertyName:n.alias||n.name,classPropertyName:n.name,required:n.required||!1,isSignal:!1,transformFunction:n.transform!=null?new ye(n.transform):null};return e},{})}function Iv(t){return t.reduce((e,n)=>{let[r,i]=zT(n);return e[i]=r,e},{})}function zT(t){let[e,n]=t.split(":",2).map(r=>r.trim());return[n??e,e]}function u8(t){return{name:t.type.name,type:vt(t.type),typeArgumentCount:0,pipeName:t.name,deps:null,pure:t.pure??!0,isStandalone:t.isStandalone??Cx(t.version)}}function d8(t){return{name:t.type.name,type:vt(t.type),providers:t.providers!==void 0&&t.providers.length>0?new ye(t.providers):null,imports:t.imports!==void 0?t.imports.map(e=>new ye(e)):[]}}function f8(t){let e=t.ng||(t.ng={});e.\u0275compilerFacade=new Zy}var e0=class{closedByParent=!1;implicitNamespacePrefix=null;isVoid=!1;ignoreFirstLf=!1;canSelfClose=!0;preventNamespaceInheritance=!1;requireExtraParent(e){return!1}isClosedByChild(e){return!1}getContentType(){return Vr.PARSABLE_DATA}},MQ=new e0;var RQ=new Rv("21.1.4");f8(rc);var qt=null,Lh=!1,k0=1,h8=null,Ln=Symbol("SIGNAL");function ie(t){let e=qt;return qt=t,e}function Fh(){return qt}var qa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function N0(t){if(Lh)throw new Error("");if(qt===null)return;qt.consumerOnSignalRead(t);let e=qt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=qt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:qt.producers,n!==void 0&&n.producer===t)){qt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===qt&&(!r||m8(i,qt)))return;let s=ja(qt),o={producer:t,consumer:qt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};qt.producersTail=o,e!==void 0?e.nextProducer=o:qt.producers=o,s&&QT(t,o)}function JT(){k0++}function M0(t){if(!(ja(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===k0)){if(!t.producerMustRecompute(t)&&!Vh(t)){D0(t);return}t.producerRecomputeValue(t),D0(t)}}function R0(t){if(t.consumers===void 0)return;let e=Lh;Lh=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||p8(r)}}finally{Lh=e}}function P0(){return qt?.consumerAllowSignalWrites!==!1}function p8(t){t.dirty=!0,R0(t),t.consumerMarkedDirty?.(t)}function D0(t){t.dirty=!1,t.lastCleanEpoch=k0}function uu(t){return t&&YT(t),ie(t)}function YT(t){t.producersTail=void 0,t.recomputing=!0}function Bh(t,e){ie(e),t&&KT(t)}function KT(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ja(t))do n=L0(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Vh(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(M0(n),r!==n.version))return!0}return!1}function Ga(t){if(ja(t)){let e=t.producers;for(;e!==void 0;)e=L0(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function QT(t,e){let n=t.consumersTail,r=ja(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)QT(i.producer,i)}function L0(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ja(e)){let s=e.producers;for(;s!==void 0;)s=L0(s)}return n}function ja(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function O0(t){h8?.(t)}function m8(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function F0(t,e){return Object.is(t,e)}function Uh(t,e){let n=Object.create(g8);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(M0(n),N0(n),n.value===Oh)throw n.error;return n.value};return r[Ln]=n,O0(n),r}var I0=Symbol("UNSET"),A0=Symbol("COMPUTING"),Oh=Symbol("ERRORED"),g8=te(A({},qa),{value:I0,dirty:!0,error:null,equal:F0,kind:"computed",producerMustRecompute(t){return t.value===I0||t.value===A0},producerRecomputeValue(t){if(t.value===A0)throw new Error("");let e=t.value;t.value=A0;let n=uu(t),r,i=!1;try{r=t.computation(),ie(null),i=e!==I0&&e!==Oh&&r!==Oh&&t.equal(e,r)}catch(s){r=Oh,t.error=s}finally{Bh(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function v8(){throw new Error}var XT=v8;function ZT(t){XT(t)}function B0(t){XT=t}var y8=null;function V0(t,e){let n=Object.create(nI);n.value=t,e!==void 0&&(n.equal=e);let r=()=>eI(n);return r[Ln]=n,O0(n),[r,o=>U0(n,o),o=>tI(n,o)]}function eI(t){return N0(t),t.value}function U0(t,e){P0()||ZT(t),t.equal(t.value,e)||(t.value=e,w8(t))}function tI(t,e){P0()||ZT(t),U0(t,e(t.value))}var nI=te(A({},qa),{equal:F0,value:void 0,kind:"signal"});function w8(t){t.version++,JT(),R0(t),y8?.(t)}function $0(t){let e=ie(null);try{return t()}finally{ie(e)}}var H0=te(A({},qa),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function q0(t){if(t.dirty=!1,t.version>0&&!Vh(t))return;t.version++;let e=uu(t);try{t.cleanup(),t.fn()}finally{Bh(t,e)}}function Re(t){return typeof t=="function"}function $h(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hh=$h(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function du(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var rn=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(s){e=s instanceof Hh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{rI(s)}catch(o){e=e??[],o instanceof Hh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)rI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&du(n,e)}remove(e){let{_finalizers:n}=this;n&&du(n,e),e instanceof t&&e._removeParent(this)}};rn.EMPTY=(()=>{let t=new rn;return t.closed=!0,t})();var G0=rn.EMPTY;function qh(t){return t instanceof rn||t&&"closed"in t&&Re(t.remove)&&Re(t.add)&&Re(t.unsubscribe)}function rI(t){Re(t)?t():t.unsubscribe()}var yr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wa={setTimeout(t,e,...n){let{delegate:r}=Wa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Wa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gh(t){Wa.setTimeout(()=>{let{onUnhandledError:e}=yr;if(e)e(t);else throw t})}function j0(){}var iI=W0("C",void 0,void 0);function sI(t){return W0("E",void 0,t)}function oI(t){return W0("N",t,void 0)}function W0(t,e,n){return{kind:t,value:e,error:n}}var ho=null;function za(t){if(yr.useDeprecatedSynchronousErrorHandling){let e=!ho;if(e&&(ho={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ho;if(ho=null,n)throw r}}else t()}function aI(t){yr.useDeprecatedSynchronousErrorHandling&&ho&&(ho.errorThrown=!0,ho.error=t)}var po=class extends rn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qh(e)&&e.add(this)):this.destination=C8}static create(e,n,r){return new Ja(e,n,r)}next(e){this.isStopped?J0(oI(e),this):this._next(e)}error(e){this.isStopped?J0(sI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?J0(iI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},E8=Function.prototype.bind;function z0(t,e){return E8.call(t,e)}var Y0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){jh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){jh(r)}else jh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){jh(n)}}},Ja=class extends po{constructor(e,n,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&yr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&z0(e.next,s),error:e.error&&z0(e.error,s),complete:e.complete&&z0(e.complete,s)}):i=e}this.destination=new Y0(i)}};function jh(t){yr.useDeprecatedSynchronousErrorHandling?aI(t):Gh(t)}function _8(t){throw t}function J0(t,e){let{onStoppedNotification:n}=yr;n&&Wa.setTimeout(()=>n(t,e))}var C8={closed:!0,next:j0,error:_8,complete:j0};var Ya=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lI(t){return t}function cI(t){return t.length===0?lI:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var at=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=b8(n)?n:new Ja(n,r,i);return za(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uI(r),new r((i,s)=>{let o=new Ja({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ya](){return this}pipe(...n){return cI(n)(this)}toPromise(n){return n=uI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function uI(t){var e;return(e=t??yr.Promise)!==null&&e!==void 0?e:Promise}function S8(t){return t&&Re(t.next)&&Re(t.error)&&Re(t.complete)}function b8(t){return t&&t instanceof po||S8(t)&&qh(t)}function x8(t){return Re(t?.lift)}function Ka(t){return e=>{if(x8(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qa(t,e,n,r,i){return new K0(t,e,n,r,i)}var K0=class extends po{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var dI=$h(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var wr=(()=>{class t extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Wh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dI}next(n){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?G0:(this.currentObservers=null,s.push(n),new rn(()=>{this.currentObservers=null,du(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new at;return n.source=this,n}}return t.create=(e,n)=>new Wh(e,n),t})(),Wh=class extends wr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:G0}};var fu=class extends wr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function T8(t){return t[t.length-1]}function fI(t){return Re(T8(t))?t.pop():void 0}function go(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zh(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function hI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(t){return this instanceof mo?(this.v=t,this):new mo(t)}function pI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(g){return Promise.resolve(g).then(m,h)}}function a(m,g){r[m]&&(i[m]=function(y){return new Promise(function(E,w){s.push([m,y,E,w])>1||l(m,y)})},g&&(i[m]=g(i[m])))}function l(m,g){try{c(r[m](g))}catch(y){p(s[0][3],y)}}function c(m){m.value instanceof mo?Promise.resolve(m.value.v).then(u,h):p(s[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function p(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function mI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hI=="function"?hI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Jh=t=>t&&typeof t.length=="number"&&typeof t!="function";function Yh(t){return Re(t?.then)}function Kh(t){return Re(t[Ya])}function Qh(t){return Symbol.asyncIterator&&Re(t?.[Symbol.asyncIterator])}function Xh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function I8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zh=I8();function ep(t){return Re(t?.[Zh])}function tp(t){return pI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mo(n.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{n.releaseLock()}})}function np(t){return Re(t?.getReader)}function ls(t){if(t instanceof at)return t;if(t!=null){if(Kh(t))return A8(t);if(Jh(t))return D8(t);if(Yh(t))return k8(t);if(Qh(t))return gI(t);if(ep(t))return N8(t);if(np(t))return M8(t)}throw Xh(t)}function A8(t){return new at(e=>{let n=t[Ya]();if(Re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function D8(t){return new at(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function k8(t){return new at(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gh)})}function N8(t){return new at(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gI(t){return new at(e=>{R8(t,e).catch(n=>e.error(n))})}function M8(t){return gI(tp(t))}function R8(t,e){var n,r,i,s;return zh(this,void 0,void 0,function*(){try{for(n=mI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ei(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function rp(t,e=0){return Ka((n,r)=>{n.subscribe(Qa(r,i=>ei(r,t,()=>r.next(i),e),()=>ei(r,t,()=>r.complete(),e),i=>ei(r,t,()=>r.error(i),e)))})}function ip(t,e=0){return Ka((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vI(t,e){return ls(t).pipe(ip(e),rp(e))}function yI(t,e){return ls(t).pipe(ip(e),rp(e))}function wI(t,e){return new at(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function EI(t,e){return new at(n=>{let r;return ei(n,e,()=>{r=t[Zh](),ei(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function sp(t,e){if(!t)throw new Error("Iterable cannot be null");return new at(n=>{ei(n,e,()=>{let r=t[Symbol.asyncIterator]();ei(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _I(t,e){return sp(tp(t),e)}function CI(t,e){if(t!=null){if(Kh(t))return vI(t,e);if(Jh(t))return wI(t,e);if(Yh(t))return yI(t,e);if(Qh(t))return sp(t,e);if(ep(t))return EI(t,e);if(np(t))return _I(t,e)}throw Xh(t)}function Q0(t,e){return e?CI(t,e):ls(t)}function vo(t,e){return Ka((n,r)=>{let i=0;n.subscribe(Qa(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:P8}=Array;function L8(t,e){return P8(e)?t(...e):t(e)}function SI(t){return vo(e=>L8(t,e))}var{isArray:O8}=Array,{getPrototypeOf:F8,prototype:B8,keys:V8}=Object;function bI(t){if(t.length===1){let e=t[0];if(O8(e))return{args:e,keys:null};if(U8(e)){let n=V8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function U8(t){return t&&typeof t=="object"&&F8(t)===B8}function xI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function X0(...t){let e=fI(t),{args:n,keys:r}=bI(t),i=new at(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;ls(n[u]).subscribe(Qa(s,p=>{h||(h=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(r?xI(r,a):a),s.complete())}))}});return e?i.pipe(SI(e)):i}var Z0;function op(){return Z0}function ti(t){let e=Z0;return Z0=t,e}var TI=Symbol("NotFound");function Xa(t){return t===TI||t?.name==="\u0275NotFound"}var hp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ue=class extends Error{code;constructor(e,n){super(pp(e,n)),this.code=e}};function $8(t){return`NG0${Math.abs(t)}`}function pp(t,e){return`${$8(t)}${e?": "+e:""}`}var So=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("")}function NI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function cs(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(cs).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function mp(t,e){return t?e?`${t} ${e}`:t:e||""}var H8=Ve({__forward_ref__:Ve});function xi(t){return t.__forward_ref__=xi,t.toString=function(){return cs(this())},t}function Ft(t){return fw(t)?t():t}function fw(t){return typeof t=="function"&&t.hasOwnProperty(H8)&&t.__forward_ref__===xi}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hs(t){return{providers:t.providers||[],imports:t.imports||[]}}function gp(t){return q8(t,vp)}function q8(t,e){return t.hasOwnProperty(e)&&t[e]||null}function G8(t){let e=t?.[vp]??null;return e||null}function tw(t){return t&&t.hasOwnProperty(lp)?t[lp]:null}var vp=Ve({\u0275prov:Ve}),lp=Ve({\u0275inj:Ve}),_e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hw(t){return t&&!!t.\u0275providers}var pw=Ve({\u0275cmp:Ve}),mw=Ve({\u0275dir:Ve}),gw=Ve({\u0275pipe:Ve});var pu=Ve({\u0275fac:Ve}),bo=Ve({__NG_ELEMENT_ID__:Ve}),II=Ve({__NG_ENV_ID__:Ve});function xo(t){return yw(t,"@Component"),t[pw]||null}function vw(t){return yw(t,"@Directive"),t[mw]||null}function MI(t){return yw(t,"@Pipe"),t[gw]||null}function yw(t,e){if(t==null)throw new ue(-919,!1)}function yp(t){return typeof t=="string"?t:t==null?"":String(t)}var RI=Ve({ngErrorCode:Ve}),j8=Ve({ngErrorMessage:Ve}),W8=Ve({ngTokenPath:Ve});function ww(t,e){return PI("",-200,e)}function wp(t,e){throw new ue(-201,!1)}function PI(t,e,n){let r=new ue(e,t);return r[RI]=e,r[j8]=t,n&&(r[W8]=n),r}function z8(t){return t[RI]}var nw;function LI(){return nw}function sn(t){let e=nw;return nw=t,e}function Ew(t,e,n){let r=gp(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;wp(t,"")}var J8={},yo=J8,Y8="__NG_DI_FLAG__",rw=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=wo(n)||0;try{return this.injector.get(e,r&8?null:yo,r)}catch(i){if(Xa(i))return i;throw i}}};function K8(t,e=0){let n=op();if(n===void 0)throw new ue(-203,!1);if(n===null)return Ew(t,void 0,e);{let r=Q8(e),i=n.retrieve(t,r);if(Xa(i)){if(r.optional)return null;throw i}return i}}function Fe(t,e=0){return(LI()||K8)(Ft(t),e)}function ae(t,e){return Fe(t,wo(e))}function wo(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Q8(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function iw(t){let e=[];for(let n=0;n<t.length;n++){let r=Ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],l=X8(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(Fe(i,s))}else e.push(Fe(r))}return e}function X8(t){return t[Y8]}function us(t,e){let n=t.hasOwnProperty(pu);return n?t[pu]:null}function OI(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function FI(t){return t.flat(Number.POSITIVE_INFINITY)}function Ep(t,e){t.forEach(n=>Array.isArray(n)?Ep(n,e):e(n))}function _w(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function BI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function _p(t,e,n){let r=el(t,e);return r>=0?t[r|1]=n:(r=~r,BI(t,r,e,n)),r}function Cp(t,e){let n=el(t,e);if(n>=0)return t[n|1]}function el(t,e){return Z8(t,e,1)}function Z8(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ps={},on=[],Eu=new _e(""),Cw=new _e("",-1),Sw=new _e(""),mu=class{get(e,n=yo){if(n===yo){let i=PI("",-201);throw i.name="\u0275NotFound",i}return n}};function bw(t){return{\u0275providers:t}}function VI(...t){return{\u0275providers:xw(!0,t),\u0275fromNgModule:!0}}function xw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Ep(e,o=>{let a=o;cp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UI(i,s),n}function UI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Tw(i,s=>{e(s,r)})}}function cp(t,e,n,r){if(t=Ft(t),!t)return!1;let i=null,s=tw(t),o=!s&&xo(t);if(!s&&!o){let l=t.ngModule;if(s=tw(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)cp(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;Ep(s.imports,u=>{cp(u,e,n,r)&&(c||=[],c.push(u))}),c!==void 0&&UI(c,e)}if(!a){let c=us(i)||(()=>new i);e({provide:i,useFactory:c,deps:on},i),e({provide:Sw,useValue:i,multi:!0},i),e({provide:Eu,useValue:()=>Fe(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=t;Tw(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Tw(t,e){for(let n of t)hw(n)&&(n=n.\u0275providers),Array.isArray(n)?Tw(n,e):e(n)}var eH=Ve({provide:String,useValue:Ve});function $I(t){return t!==null&&typeof t=="object"&&eH in t}function tH(t){return!!(t&&t.useExisting)}function nH(t){return!!(t&&t.useFactory)}function Eo(t){return typeof t=="function"}function HI(t){return!!t.useClass}var _u=new _e(""),ap={},AI={},ew;function Cu(){return ew===void 0&&(ew=new mu),ew}var Zn=class{},_o=class extends Zn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,ow(e,o=>this.processProvider(o)),this.records.set(Cw,Za(void 0,this)),i.has("environment")&&this.records.set(Zn,Za(void 0,this));let s=this.records.get(_u);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Sw,on,{self:!0}))}retrieve(e,n){let r=wo(n)||0;try{return this.get(e,yo,r)}catch(i){if(Xa(i))return i;throw i}}destroy(){hu(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return hu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hu(this);let n=ti(this),r=sn(void 0),i;try{return e()}finally{ti(n),sn(r)}}get(e,n=yo,r){if(hu(this),e.hasOwnProperty(II))return e[II](this);let i=wo(r),s,o=ti(this),a=sn(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let u=aH(e)&&gp(e);u&&this.injectableDefInScope(u)?c=Za(sw(e),ap):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?Cu():this.parent;return n=i&8&&n===yo?null:n,l.get(e,n)}catch(l){let c=z8(l);throw c===-200||c===-201?new ue(c,null):l}finally{sn(a),ti(o)}}resolveInjectorInitializers(){let e=ie(null),n=ti(this),r=sn(void 0),i;try{let s=this.get(Eu,on,{self:!0});for(let o of s)o()}finally{ti(n),sn(r),ie(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(cs(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ft(e);let n=Eo(e)?e:Ft(e&&e.provide),r=iH(e);if(!Eo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Za(void 0,ap,!0),i.factory=()=>iw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ie(null);try{if(n.value===AI)throw ww(cs(e));return n.value===ap&&(n.value=AI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&oH(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sw(t){let e=gp(t),n=e!==null?e.factory:us(t);if(n!==null)return n;if(t instanceof _e)throw new ue(204,!1);if(t instanceof Function)return rH(t);throw new ue(204,!1)}function rH(t){if(t.length>0)throw new ue(204,!1);let n=G8(t);return n!==null?()=>n.factory(t):()=>new t}function iH(t){if($I(t))return Za(void 0,t.useValue);{let e=Iw(t);return Za(e,ap)}}function Iw(t,e,n){let r;if(Eo(t)){let i=Ft(t);return us(i)||sw(i)}else if($I(t))r=()=>Ft(t.useValue);else if(nH(t))r=()=>t.useFactory(...iw(t.deps||[]));else if(tH(t))r=(i,s)=>Fe(Ft(t.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Ft(t&&(t.useClass||t.provide));if(sH(t))r=()=>new i(...iw(t.deps));else return us(i)||sw(i)}return r}function hu(t){if(t.destroyed)throw new ue(205,!1)}function Za(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sH(t){return!!t.deps}function oH(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function aH(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function ow(t,e){for(let n of t)Array.isArray(n)?ow(n,e):n&&hw(n)?ow(n.\u0275providers,e):e(n)}function Sp(t,e){let n;t instanceof _o?(hu(t),n=t):n=new rw(t);let r,i=ti(n),s=sn(void 0);try{return e()}finally{ti(i),sn(s)}}function qI(){return LI()!==void 0||op()!=null}var Er=0,se=1,fe=2,Et=3,tr=4,nr=5,tl=6,nl=7,lt=8,Ti=9,ni=10,je=11,rl=12,Aw=13,To=14,On=15,ms=16,Io=17,ri=18,Ii=19,Dw=20,Ci=21,bp=22,ds=23,Fn=24,xp=25,Ao=26,ct=27,GI=1,kw=6,gs=7,Su=8,Do=9,rt=10;function ii(t){return Array.isArray(t)&&typeof t[GI]=="object"}function _r(t){return Array.isArray(t)&&t[GI]===!0}function Nw(t){return(t.flags&4)!==0}function vs(t){return t.componentOffset>-1}function Tp(t){return(t.flags&1)===1}function si(t){return!!t.template}function il(t){return(t[fe]&512)!==0}function ko(t){return(t[fe]&256)===256}var Mw="svg",jI="math";function rr(t){for(;Array.isArray(t);)t=t[Er];return t}function Rw(t,e){return rr(e[t])}function Cr(t,e){return rr(e[t.index])}function bu(t,e){return t.data[e]}function Pw(t,e){return t[e]}function xu(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ir(t,e){let n=e[t];return ii(n)?n:n[Er]}function WI(t){return(t[fe]&4)===4}function Ip(t){return(t[fe]&128)===128}function zI(t){return _r(t[Et])}function oi(t,e){return e==null?null:t[e]}function Lw(t){t[Io]=0}function Ow(t){t[fe]&1024||(t[fe]|=1024,Ip(t)&&sl(t))}function JI(t,e){for(;t>0;)e=e[To],t--;return e}function Tu(t){return!!(t[fe]&9216||t[Fn]?.dirty)}function Ap(t){t[ni].changeDetectionScheduler?.notify(8),t[fe]&64&&(t[fe]|=1024),Tu(t)&&sl(t)}function sl(t){t[ni].changeDetectionScheduler?.notify(0);let e=fs(t);for(;e!==null&&!(e[fe]&8192||(e[fe]|=8192,!Ip(e)));)e=fs(e)}function Fw(t,e){if(ko(t))throw new ue(911,!1);t[Ci]===null&&(t[Ci]=[]),t[Ci].push(e)}function YI(t,e){if(t[Ci]===null)return;let n=t[Ci].indexOf(e);n!==-1&&t[Ci].splice(n,1)}function fs(t){let e=t[Et];return _r(e)?e[Et]:e}function Bw(t){return t[nl]??=[]}function Vw(t){return t.cleanup??=[]}function KI(t,e,n,r){let i=Bw(e);i.push(n),t.firstCreatePass&&Vw(t).push(r,i.length-1)}var we={lFrame:uA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var aw=!1;function QI(){return we.lFrame.elementDepthCount}function XI(){we.lFrame.elementDepthCount++}function Uw(){we.lFrame.elementDepthCount--}function ZI(){return we.bindingsEnabled}function eA(){return we.skipHydrationRootTNode!==null}function $w(t){return we.skipHydrationRootTNode===t}function Hw(){we.skipHydrationRootTNode=null}function he(){return we.lFrame.lView}function Ze(){return we.lFrame.tView}function J(t){return we.lFrame.contextLView=t,t[lt]}function Y(t){return we.lFrame.contextLView=null,t}function jt(){let t=qw();for(;t!==null&&t.type===64;)t=t.parent;return t}function qw(){return we.lFrame.currentTNode}function tA(){let t=we.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function No(t,e){let n=we.lFrame;n.currentTNode=t,n.isParent=e}function Gw(){return we.lFrame.isParent}function nA(){we.lFrame.isParent=!1}function rA(){return we.lFrame.contextLView}function jw(){return aw}function gu(t){let e=aw;return aw=t,e}function Ww(){let t=we.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function iA(t){return we.lFrame.bindingIndex=t}function ys(){return we.lFrame.bindingIndex++}function zw(t){let e=we.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function sA(){return we.lFrame.inI18n}function oA(t,e){let n=we.lFrame;n.bindingIndex=n.bindingRootIndex=t,Dp(e)}function aA(){return we.lFrame.currentDirectiveIndex}function Dp(t){we.lFrame.currentDirectiveIndex=t}function lA(t){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jw(){return we.lFrame.currentQueryIndex}function kp(t){we.lFrame.currentQueryIndex=t}function lH(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[nr]:null}function Yw(t,e,n){if(n&4){let i=e,s=t;for(;i=i.parent,i===null&&!(n&1);)if(i=lH(s),i===null||(s=s[To],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=we.lFrame=cA();return r.currentTNode=e,r.lView=t,!0}function Np(t){let e=cA(),n=t[se];we.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function cA(){let t=we.lFrame,e=t===null?null:t.child;return e===null?uA(t):e}function uA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function dA(){let t=we.lFrame;return we.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Kw=dA;function Mp(){let t=dA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fA(t){return(we.lFrame.contextLView=JI(t,we.lFrame.contextLView))[lt]}function ai(){return we.lFrame.selectedIndex}function ws(t){we.lFrame.selectedIndex=t}function Iu(){let t=we.lFrame;return bu(t.tView,t.selectedIndex)}function Ke(){we.lFrame.currentNamespace=Mw}function ft(){cH()}function cH(){we.lFrame.currentNamespace=null}function hA(){return we.lFrame.currentNamespace}var pA=!0;function Rp(){return pA}function Pp(t){pA=t}function lw(t,e=null,n=null,r){let i=mA(t,e,n,r);return i.resolveInjectorInitializers(),i}function mA(t,e=null,n=null,r,i=new Set){let s=[n||on,VI(t)];return r=r||(typeof t=="object"?void 0:cs(t)),new _o(s,e||Cu(),r||null,i)}var Si=class t{static THROW_IF_NOT_FOUND=yo;static NULL=new mu;static create(e,n){if(Array.isArray(e))return lw({name:""},n,e,"");{let r=e.name??"";return lw({name:r},e.parent,e.providers,r)}}static \u0275prov=Pe({token:t,providedIn:"any",factory:()=>Fe(Cw)});static __NG_ELEMENT_ID__=-1},Sr=new _e(""),ol=(()=>{class t{static __NG_ELEMENT_ID__=uH;static __NG_ENV_ID__=n=>n}return t})(),up=class extends ol{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ko(this._lView)}onDestroy(e){let n=this._lView;return Fw(n,e),()=>YI(n,e)}};function uH(){return new up(he())}var gA=!1,vA=new _e(""),al=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new fu(!1);debugTaskTracker=ae(vA,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new at(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})(),cw=class extends wr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qI()&&(this.destroyRef=ae(ol,{optional:!0})??void 0,this.pendingTasks=ae(al,{optional:!0})??void 0)}emit(e){let n=ie(null);try{super.next(e)}finally{ie(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof rn&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Gt=cw;function dp(...t){}function Qw(t){let e,n;function r(){t=dp;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yA(t){return queueMicrotask(()=>t()),()=>{t=dp}}var Xw="isAngularZone",vu=Xw+"_ID",dH=0,er=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Gt(!1);onMicrotaskEmpty=new Gt(!1);onStable=new Gt(!1);onError=new Gt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=gA}=e;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,pH(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Xw)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ue(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,fH,dp,dp);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},fH={};function Zw(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hH(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Qw(()=>{t.callbackScheduled=!1,uw(t),t.isCheckStableRunning=!0,Zw(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),uw(t)}function pH(t){let e=()=>{hH(t)},n=dH++;t._inner=t._inner.fork({name:"angular",properties:{[Xw]:!0,[vu]:n,[vu+n]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(mH(l))return r.invokeTask(s,o,a,l);try{return DI(t),r.invokeTask(s,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),kI(t)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return DI(t),r.invoke(s,o,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gH(l)&&e(),kI(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,uw(t),Zw(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function uw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function DI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kI(t){t._nesting--,Zw(t)}var yu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Gt;onMicrotaskEmpty=new Gt;onStable=new Gt;onError=new Gt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function mH(t){return wA(t,"__ignore_ng_zone__")}function gH(t){return wA(t,"__scheduler_tick__")}function wA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var bi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mo=new _e("",{factory:()=>{let t=ae(er),e=ae(Zn),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(bi),n.handleError(r))})}}}),EA={provide:Eu,useValue:()=>{let t=ae(bi,{optional:!0})},multi:!0};function Be(t,e){let[n,r,i]=V0(t,e?.equal),s=n,o=s[Ln];return s.set=r,s.update=i,s.asReadonly=_A.bind(s),s}function _A(){let t=this[Ln];if(t.readonlyFn===void 0){let e=()=>this();e[Ln]=t,t.readonlyFn=e}return t.readonlyFn}var Lp=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=vH}return t})();function vH(){return new Lp(he(),jt())}var Co=class{},Au=new _e("",{factory:()=>!0});var eE=new _e("");var Op=(()=>{class t{static \u0275prov=Pe({token:t,providedIn:"root",factory:()=>new dw})}return t})(),dw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},fp=class{[Ln];constructor(e){this[Ln]=e}destroy(){this[Ln].destroy()}};function Du(t,e){let n=e?.injector??ae(Si),r=e?.manualCleanup!==!0?n.get(ol):null,i,s=n.get(Lp,null,{optional:!0}),o=n.get(Co);return s!==null?(i=EH(s.view,o,t),r instanceof up&&r._lView===s.view&&(r=null)):i=_H(t,n.get(Op),o),i.injector=n,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new fp(i)}var CA=te(A({},H0),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let t=gu(!1);try{q0(this)}finally{gu(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=ie(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ie(t)}}}),yH=te(A({},CA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Ga(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.scheduler.remove(this)}}),wH=te(A({},CA),{consumerMarkedDirty(){this.view[fe]|=8192,sl(this.view),this.notifier.notify(13)},destroy(){if(Ga(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.view[ds]?.delete(this)}});function EH(t,e,n){let r=Object.create(wH);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=SA(r,n),t[ds]??=new Set,t[ds].add(r),r.consumerMarkedDirty(r),r}function _H(t,e,n){let r=Object.create(yH);return r.fn=SA(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function SA(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function br(t){return $0(t)}function $u(t){return{toString:t}.toString()}function kH(t){return typeof t=="function"}function KA(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var qp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Hu=(()=>{let t=()=>QA;return t.ngInherit=!0,t})();function QA(t){return t.type.prototype.ngOnChanges&&(t.setInput=MH),NH}function NH(){let t=ZA(this),e=t?.current;if(e){let n=t.previous;if(n===ps)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function MH(t,e,n,r,i){let s=this.declaredInputs[r],o=ZA(t)||RH(t,{previous:ps,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new qp(c&&c.currentValue,n,l===ps),KA(t,e,i,n)}var XA="__ngSimpleChanges__";function ZA(t){return t[XA]||null}function RH(t,e){return t[XA]=e}var bA=[];var Ue=function(t,e=null,n){for(let r=0;r<bA.length;r++){let i=bA[r];i(t,e,n)}},De=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(De||{});function PH(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=QA(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function LH(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Bp(t,e,n){eD(t,e,3,n)}function Vp(t,e,n,r){(t[fe]&3)===n&&eD(t,e,n,r)}function tE(t,e){let n=t[fe];(n&3)===e&&(n&=16383,n+=1,t[fe]=n)}function eD(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Io]+=65536),(a<s||s==-1)&&(OH(t,n,e,l),t[Io]=(t[Io]&4294901760)+l+2),l++}function xA(t,e){Ue(De.LifecycleHookStart,t,e);let n=ie(null);try{e.call(t)}finally{ie(n),Ue(De.LifecycleHookEnd,t,e)}}function OH(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[fe]>>14<t[Io]>>16&&(t[fe]&3)===e&&(t[fe]+=16384,xA(a,s)):xA(a,s)}var cl=-1,Po=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function FH(t){return(t.flags&8)!==0}function BH(t){return(t.flags&16)!==0}function VH(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];$H(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function UH(t){return t===3||t===4||t===6}function $H(t){return t.charCodeAt(0)===64}function ul(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?TA(t,n,i,null,e[++r]):TA(t,n,i,null,null))}}return t}function TA(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function tD(t){return t!==cl}function Gp(t){return t&32767}function HH(t){return t>>16}function jp(t,e){let n=HH(t),r=e;for(;n>0;)r=r[To],n--;return r}var fE=!0;function Wp(t){let e=fE;return fE=t,e}var qH=256,nD=qH-1,rD=5,GH=0,li={};function jH(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(bo)&&(r=n[bo]),r==null&&(r=n[bo]=GH++);let i=r&nD,s=1<<i;e.data[t+(i>>rD)]|=s}function zp(t,e){let n=iD(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,nE(r.data,t),nE(e,null),nE(r.blueprint,null));let i=$E(t,e),s=t.injectorIndex;if(tD(i)){let o=Gp(i),a=jp(i,e),l=a[se].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function nE(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function $E(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=cD(i),r===null)return cl;if(n++,i=i[To],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return cl}function hE(t,e,n){jH(t,e,n)}function sD(t,e,n){if(n&8||t!==void 0)return t;wp(e,"NodeInjector")}function oD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ti],s=sn(void 0);try{return i?i.get(e,r,n&8):Ew(e,r,n&8)}finally{sn(s)}}return sD(r,e,n)}function aD(t,e,n,r=0,i){if(t!==null){if(e[fe]&2048&&!(r&2)){let o=YH(t,e,n,r,li);if(o!==li)return o}let s=lD(t,e,n,r,li);if(s!==li)return s}return oD(e,n,r,i)}function lD(t,e,n,r,i){let s=zH(n);if(typeof s=="function"){if(!Yw(e,t,r))return r&1?sD(i,n,r):oD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&8))wp(n);else return o}finally{Kw()}}else if(typeof s=="number"){let o=null,a=iD(t,e),l=cl,c=r&1?e[On][nr]:null;for((a===-1||r&4)&&(l=a===-1?$E(t,e):e[a+8],l===cl||!AA(r,!1)?a=-1:(o=e[se],a=Gp(l),e=jp(l,e)));a!==-1;){let u=e[se];if(IA(s,a,u.data)){let h=WH(a,e,n,o,r,c);if(h!==li)return h}l=e[a+8],l!==cl&&AA(r,e[se].data[a+8]===c)&&IA(s,a,e)?(o=u,a=Gp(l),e=jp(l,e)):a=-1}}return i}function WH(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],l=r==null?vs(a)&&fE:r!=o&&(a.type&3)!==0,c=i&1&&s===a,u=Up(a,o,n,l,c);return u!==null?Ru(e,o,u,a,i):li}function Up(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,h=r?a:a+u,p=i?a+u:c;for(let m=h;m<p;m++){let g=o[m];if(m<l&&n===g||m>=l&&g.type===n)return m}if(i){let m=o[l];if(m&&si(m)&&m.type===n)return l}return null}function Ru(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof Po){let a=s;if(a.resolving)throw ww("");let l=Wp(a.canSeeViewProviders);a.resolving=!0;let c=o[n].type||o[n],u,h=a.injectImpl?sn(a.injectImpl):null,p=Yw(t,r,0);try{s=t[n]=a.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&PH(n,o[n],e)}finally{h!==null&&sn(h),Wp(l),a.resolving=!1,Kw()}}return s}function zH(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(bo)?t[bo]:void 0;return typeof e=="number"?e>=0?e&nD:JH:e}function IA(t,e,n){let r=1<<t;return!!(n[e+(t>>rD)]&r)}function AA(t,e){return!(t&2)&&!(t&1&&e)}var Ro=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aD(this._tNode,this._lView,e,wo(r),n)}};function JH(){return new Ro(jt(),he())}function rm(t){return $u(()=>{let e=t.prototype.constructor,n=e[pu]||pE(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[pu]||pE(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function pE(t){return fw(t)?()=>{let e=pE(Ft(t));return e&&e()}:us(t)}function YH(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[fe]&2048&&!il(o);){let a=lD(s,o,n,r|2,li);if(a!==li)return a;let l=s.parent;if(!l){let c=o[Dw];if(c){let u=c.get(n,li,r);if(u!==li)return u}l=cD(o),o=o[To]}s=l}return i}function cD(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[nr]:null}function KH(){return pl(jt(),he())}function pl(t,e){return new Ai(Cr(t,e))}var Ai=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=KH}return t})();function QH(t){return t instanceof Ai?t.nativeElement:t}function XH(){return this._results[Symbol.iterator]()}var Jp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new wr}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=FI(e);(this._changesDetected=!OI(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=XH};function uD(t){return(t.flags&128)===128}var HE=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(HE||{}),dD=new Map,ZH=0;function e3(){return ZH++}function t3(t){dD.set(t[Ii],t)}function mE(t){dD.delete(t[Ii])}var DA="__ngContext__";function dl(t,e){ii(e)?(t[DA]=e[Ii],t3(e)):t[DA]=e}function fD(t){return pD(t[rl])}function hD(t){return pD(t[tr])}function pD(t){for(;t!==null&&!_r(t);)t=t[tr];return t}var n3;function qE(t){n3=t}var im=new _e("",{factory:()=>r3}),r3="ng";var sm=new _e(""),qu=new _e("",{providedIn:"platform",factory:()=>"unknown"});var om=new _e("",{factory:()=>ae(Sr).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mD="r";var gD="di";var vD=!1,yD=new _e("",{factory:()=>vD});var i3=(t,e,n,r)=>{};function s3(t,e,n,r){i3(t,e,n,r)}function GE(t){return(t.flags&32)===32}var o3=()=>null;function wD(t,e,n=!1){return o3(t,e,n)}function ED(t,e){let n=t.contentQueries;if(n!==null){let r=ie(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];kp(s),a.contentQueries(2,e[o],o)}}}finally{ie(r)}}}function gE(t,e,n){kp(0);let r=ie(null);try{e(t,n)}finally{ie(r)}}function _D(t,e,n){if(Nw(e)){let r=ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{ie(r)}}}var Ir=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Ir||{});var Yp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hp})`}};function am(t){return t instanceof Yp?t.changingThisBreaksApplicationSecurity:t}function CD(t,e){let n=SD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${hp})`)}return n===e}function SD(t){return t instanceof Yp&&t.getTypeName()||null}var a3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bD(t){return t=String(t),t.match(a3)?t:"unsafe:"+t}function l3(t,e){return t.createText(e)}function c3(t,e,n){t.setValue(e,n)}function xD(t,e,n){return t.createElement(e,n)}function Kp(t,e,n,r,i){t.insertBefore(e,n,r,i)}function TD(t,e,n){t.appendChild(e,n)}function kA(t,e,n,r,i){r!==null?Kp(t,e,n,r,i):TD(t,e,n)}function ID(t,e,n,r){t.removeChild(null,e,n,r)}function u3(t,e,n){t.setAttribute(e,"style",n)}function d3(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function AD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&VH(t,e,r),i!==null&&d3(t,e,i),s!==null&&u3(t,e,s)}var jE=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(jE||{});function lm(t){let e=f3();return e?e.sanitize(jE.URL,t)||"":CD(t,"URL")?am(t):bD(yp(t))}function f3(){let t=he();return t&&t[ni].sanitizer}function h3(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var DD="ng-template";function p3(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&h3(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(WE(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function WE(t){return t.type===4&&t.value!==DD}function m3(t,e,n){let r=t.type===4&&!n?DD:t.value;return e===r}function g3(t,e,n){let r=4,i=t.attrs,s=i!==null?w3(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!xr(r)&&!xr(l))return!1;if(o&&xr(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!m3(t,l,n)||l===""&&e.length===1){if(xr(r))return!1;o=!0}}else if(r&8){if(i===null||!p3(t,i,l,n)){if(xr(r))return!1;o=!0}}else{let c=e[++a],u=v3(l,i,WE(t),n);if(u===-1){if(xr(r))return!1;o=!0;continue}if(c!==""){let h;if(u>s?h="":h=i[u+1].toLowerCase(),r&2&&c!==h){if(xr(r))return!1;o=!0}}}}return xr(r)||o}function xr(t){return(t&1)===0}function v3(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return E3(e,t)}function y3(t,e,n=!1){for(let r=0;r<e.length;r++)if(g3(t,e[r],n))return!0;return!1}function w3(t){for(let e=0;e<t.length;e++){let n=t[e];if(UH(n))return e}return t.length}function E3(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function NA(t,e){return t?":not("+e.trim()+")":e}function _3(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!xr(o)&&(e+=NA(s,i),i=""),r=o,s=s||!xr(r);n++}return i!==""&&(e+=NA(s,i)),e}function C3(t){return t.map(_3).join(",")}function S3(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!xr(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var Bn={};function zE(t,e,n,r,i,s,o,a,l,c,u){let h=ct+r,p=h+i,m=b3(h,p),g=typeof c=="function"?c():c;return m[se]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function b3(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Bn);return n}function x3(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=zE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function JE(t,e,n,r,i,s,o,a,l,c,u){let h=e.blueprint.slice();return h[Er]=i,h[fe]=r|4|128|8|64|1024,(c!==null||t&&t[fe]&2048)&&(h[fe]|=2048),Lw(h),h[Et]=h[To]=t,h[lt]=n,h[ni]=o||t&&t[ni],h[je]=a||t&&t[je],h[Ti]=l||t&&t[Ti]||null,h[nr]=s,h[Ii]=e3(),h[tl]=u,h[Dw]=c,h[On]=e.type==2?t[On]:h,h}function T3(t,e,n){let r=Cr(e,t),i=x3(n),s=t[ni].rendererFactory,o=YE(t,JE(t,i,null,kD(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function kD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ND(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function YE(t,e){return t[rl]?t[Aw][tr]=e:t[rl]=e,t[Aw]=e,e}function P(t=1){MD(Ze(),he(),ai()+t,!1)}function MD(t,e,n,r){if(!r)if((e[fe]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Bp(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Vp(e,s,0,n)}ws(n)}var cm=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(cm||{});function vE(t,e,n,r){let i=ie(null);try{let[s,o,a]=t.inputs[n],l=null;(o&cm.SignalBased)!==0&&(l=e[s][Ln]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,s):KA(e,l,s,r)}finally{ie(i)}}var ci=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(ci||{}),I3;function KE(t,e){return I3(t,e)}var Lo=new Set,QE=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(QE||{}),Gu=new _e(""),MA=new Set;function _s(t){MA.has(t)||(MA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var RD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();var XE=new _e("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:ae(Zn)})});function PD(t,e,n){let r=t.get(XE);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function A3(t,e){let n=t.get(XE);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function D3(t,e){for(let[n,r]of e)PD(t,r.animateFns)}function k3(t,e){let n=t.get(XE);if(Array.isArray(e))for(let r of e)n.queue.delete(r);else n.queue.delete(e)}function RA(t,e,n,r){let i=t?.[Ao]?.enter;e!==null&&i&&i.has(n.index)&&D3(r,i)}function ll(t,e,n,r,i,s,o,a){if(i!=null){let l,c=!1;_r(i)?l=i:ii(i)&&(c=!0,i=i[Er]);let u=rr(i);t===0&&r!==null?(RA(a,r,s,n),o==null?TD(e,r,u):Kp(e,r,u,o||null,!0)):t===1&&r!==null?(RA(a,r,s,n),Kp(e,r,u,o||null,!0)):t===2?PA(a,s,n,h=>{ID(e,u,c,h)}):t===3&&PA(a,s,n,()=>{e.destroyNode(u)}),l!=null&&q3(e,t,n,l,s,r,o)}}function N3(t,e){LD(t,e),e[Er]=null,e[nr]=null}function M3(t,e,n,r,i,s){r[Er]=i,r[nr]=e,dm(t,r,n,1,i,s)}function LD(t,e){e[ni].changeDetectionScheduler?.notify(9),dm(t,e,e[je],2,null,null)}function R3(t){let e=t[rl];if(!e)return rE(t[se],t);for(;e;){let n=null;if(ii(e))n=e[rl];else{let r=e[rt];r&&(n=r)}if(!n){for(;e&&!e[tr]&&e!==t;)ii(e)&&rE(e[se],e),e=e[Et];e===null&&(e=t),ii(e)&&rE(e[se],e),n=e&&e[tr]}e=n}}function ZE(t,e){let n=t[Do],r=n.indexOf(e);n.splice(r,1)}function um(t,e){if(ko(e))return;let n=e[je];n.destroyNode&&dm(t,e,n,3,null,null),R3(e)}function rE(t,e){if(ko(e))return;let n=ie(null);try{e[fe]&=-129,e[fe]|=256,e[Fn]&&Ga(e[Fn]),O3(t,e),L3(t,e),e[se].type===1&&e[je].destroy();let r=e[ms];if(r!==null&&_r(e[Et])){r!==e[Et]&&ZE(r,e);let i=e[ri];i!==null&&i.detachView(t)}mE(e)}finally{ie(n)}}function PA(t,e,n,r){let i=t?.[Ao];if(i?.enter?.has(e.index)&&k3(n,i.enter.get(e.index).animateFns),i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Lo.add(t[Ii]),PD(n,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let l=0;l<o.animateFns.length;l++){let c=o.animateFns[l],{promise:u}=c();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),P3(t,r)}else t&&Lo.delete(t[Ii]),r(!1)},i)}function P3(t,e){let n=t[Ao]?.running;if(n){n.then(()=>{t[Ao].running=void 0,Lo.delete(t[Ii]),e(!0)});return}e(!1)}function L3(t,e){let n=t.cleanup,r=e[nl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[nl]=null);let i=e[Ci];if(i!==null){e[Ci]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[ds];if(s!==null){e[ds]=null;for(let o of s)o.destroy()}}function O3(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Po)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ue(De.LifecycleHookStart,a,l);try{l.call(a)}finally{Ue(De.LifecycleHookEnd,a,l)}}else{Ue(De.LifecycleHookStart,i,s);try{s.call(i)}finally{Ue(De.LifecycleHookEnd,i,s)}}}}}function F3(t,e,n){return B3(t,e.parent,n)}function B3(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Er];if(vs(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ir.None||i===Ir.Emulated)return null}return Cr(r,n)}function V3(t,e,n){return $3(t,e,n)}function U3(t,e,n){return t.type&40?Cr(t,n):null}var $3=U3,LA;function e_(t,e,n,r){let i=F3(t,r,e),s=e[je],o=r.parent||e[nr],a=V3(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)kA(s,i,n[l],a,!1);else kA(s,i,n,a,!1);LA!==void 0&&LA(s,r,e,n,i)}function Nu(t,e){if(e!==null){let n=e.type;if(n&3)return Cr(e,t);if(n&4)return yE(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Nu(t,r);{let i=t[e.index];return _r(i)?yE(-1,i):rr(i)}}else{if(n&128)return Nu(t,e.next);if(n&32)return KE(e,t)()||rr(t[e.index]);{let r=OD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fs(t[On]);return Nu(i,r)}else return Nu(t,e.next)}}}return null}function OD(t,e){if(e!==null){let r=t[On][nr],i=e.projection;return r.projection[i]}return null}function yE(t,e){let n=rt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return Nu(r,i)}return e[gs]}function t_(t,e,n,r,i,s,o){for(;n!=null;){let a=r[Ti];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(o&&e===0&&(l&&dl(rr(l),r),n.flags|=2),!GE(n))if(c&8)t_(t,e,n.child,r,i,s,!1),ll(e,t,a,i,l,n,s,r);else if(c&32){let u=KE(n,r),h;for(;h=u();)ll(e,t,a,i,h,n,s,r);ll(e,t,a,i,l,n,s,r)}else c&16?H3(t,e,r,n,i,s):ll(e,t,a,i,l,n,s,r);n=o?n.projectionNext:n.next}}function dm(t,e,n,r,i,s){t_(n,r,t.firstChild,e,i,s,!1)}function H3(t,e,n,r,i,s){let o=n[On],l=o[nr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];ll(e,t,n[Ti],i,u,r,s,n)}else{let c=l,u=o[Et];uD(r)&&(c.flags|=128),t_(t,e,c,u,i,s,!0)}}function q3(t,e,n,r,i,s,o){let a=r[gs],l=rr(r);a!==l&&ll(e,t,n,s,a,i,o);for(let c=rt;c<r.length;c++){let u=r[c];dm(u[se],u,t,e,s,a)}}function G3(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:ci.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ci.Important),t.setStyle(n,r,i,s))}}function FD(t,e,n,r,i){let s=ai(),o=r&2;try{ws(-1),o&&e.length>ct&&MD(t,e,ct,!1);let a=o?De.TemplateUpdateStart:De.TemplateCreateStart;Ue(a,i,n),n(r,i)}finally{ws(s);let a=o?De.TemplateUpdateEnd:De.TemplateCreateEnd;Ue(a,i,n)}}function BD(t,e,n){K3(t,e,n),(n.flags&64)===64&&Q3(t,e,n)}function n_(t,e,n=Cr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function j3(t,e,n,r){let s=r.get(yD,vD)||n===Ir.ShadowDom||n===Ir.ExperimentalIsolatedShadowDom,o=t.selectRootElement(e,s);return W3(o),o}function W3(t){z3(t)}var z3=()=>null;function J3(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function VD(t,e,n,r,i,s){let o=e[se];if(r_(t,o,e,n,r)){vs(t)&&Y3(e,t.index);return}t.type&3&&(n=J3(n)),UD(t,e,n,r,i,s)}function UD(t,e,n,r,i,s){if(t.type&3){let o=Cr(t,e);r=s!=null?s(r,t.value||"",n):r,i.setProperty(o,n,r)}else t.type&12}function Y3(t,e){let n=ir(e,t);n[fe]&16||(n[fe]|=64)}function K3(t,e,n){let r=n.directiveStart,i=n.directiveEnd;vs(n)&&T3(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||zp(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let a=t.data[o],l=Ru(e,t,o,n);if(dl(l,e),s!==null&&n5(e,o-r,l,a,n,s),si(a)){let c=ir(n.index,e);c[lt]=Ru(e,t,o,n)}}}function Q3(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=aA();try{ws(s);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Dp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&X3(l,c)}}finally{ws(-1),Dp(o)}}function X3(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Z3(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];y3(e,s.selectors,!1)&&(r??=[],si(s)?r.unshift(s):r.push(s))}return r}function e5(t,e,n,r,i,s){let o=Cr(t,e);t5(e[je],o,s,t.value,n,r,i)}function t5(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?yp(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function n5(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];vE(r,n,l,c)}}function $D(t,e,n,r,i){let s=ct+n,o=e[se],a=i(o,e,t,r,n);e[s]=a,No(t,!0);let l=t.type===2;return l?(AD(e[je],a,t),(QI()===0||Tp(t))&&dl(a,e),XI()):dl(a,e),Rp()&&(!l||!GE(t))&&e_(o,e,a,t),t}function HD(t){let e=t;return Gw()?nA():(e=e.parent,No(e,!1)),e}function r5(t,e){let n=t[Ti];if(!n)return;let r;try{r=n.get(Mo,null)}catch{r=null}r?.(e)}function r_(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],h=e.data[c];vE(h,n[c],u,i),a=!0}if(s)for(let l of s){let c=n[l],u=e.data[l];vE(u,c,r,i),a=!0}return a}function i5(t,e){let n=ir(e,t),r=n[se];s5(r,n);let i=n[Er];i!==null&&n[tl]===null&&(n[tl]=wD(i,n[Ti])),Ue(De.ComponentStart);try{i_(r,n,n[lt])}finally{Ue(De.ComponentEnd,n[lt])}}function s5(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function i_(t,e,n){Np(e);try{let r=t.viewQuery;r!==null&&gE(1,r,n);let i=t.template;i!==null&&FD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ri]?.finishViewCreation(t),t.staticContentQueries&&ED(t,e),t.staticViewQueries&&gE(2,t.viewQuery,n);let s=t.components;s!==null&&o5(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,Mp()}}function o5(t,e){for(let n=0;n<e.length;n++)i5(t,e[n])}function fm(t,e,n,r){let i=ie(null);try{let s=e.tView,a=t[fe]&4096?4096:16,l=JE(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[ms]=c;let u=t[ri];return u!==null&&(l[ri]=u.createEmbeddedView(s)),i_(s,l,n),l}finally{ie(i)}}function Pu(t,e){return!e||e.firstChild===null||uD(t)}function Lu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(rr(s)),_r(s)&&qD(s,r);let o=n.type;if(o&8)Lu(t,e,n.child,r);else if(o&32){let a=KE(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=OD(e,n);if(Array.isArray(a))r.push(...a);else{let l=fs(e[On]);Lu(l[se],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function qD(t,e){for(let n=rt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&Lu(r[se],r,i,e)}t[gs]!==t[Er]&&e.push(t[gs])}function GD(t){if(t[xp]!==null){for(let e of t[xp])e.impl.addSequence(e);t[xp].length=0}}var jD=[];function a5(t){return t[Fn]??l5(t)}function l5(t){let e=jD.pop()??Object.create(u5);return e.lView=t,e}function c5(t){t.lView[Fn]!==t&&(t.lView=null,jD.push(t))}var u5=te(A({},qa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{sl(t.lView)},consumerOnSignalRead(){this.lView[Fn]=this}});function d5(t){let e=t[Fn]??Object.create(f5);return e.lView=t,e}var f5=te(A({},qa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fs(t.lView);for(;e&&!WD(e[se]);)e=fs(e);e&&Ow(e)},consumerOnSignalRead(){this.lView[Fn]=this}});function WD(t){return t.type!==2}function zD(t){if(t[ds]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ds])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[fe]&8192)}}var h5=100;function JD(t,e=0){let r=t[ni].rendererFactory,i=!1;i||r.begin?.();try{p5(t,e)}finally{i||r.end?.()}}function p5(t,e){let n=jw();try{gu(!0),wE(t,e);let r=0;for(;Tu(t);){if(r===h5)throw new ue(103,!1);r++,wE(t,1)}}finally{gu(n)}}function m5(t,e,n,r){if(ko(e))return;let i=e[fe],s=!1,o=!1;Np(e);let a=!0,l=null,c=null;s||(WD(t)?(c=a5(e),l=uu(c)):Fh()===null?(a=!1,c=d5(e),l=uu(c)):e[Fn]&&(Ga(e[Fn]),e[Fn]=null));try{Lw(e),iA(t.bindingStartIndex),n!==null&&FD(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let m=t.preOrderCheckHooks;m!==null&&Bp(e,m,null)}else{let m=t.preOrderHooks;m!==null&&Vp(e,m,0,null),tE(e,0)}if(o||g5(e),zD(e),YD(e,0),t.contentQueries!==null&&ED(t,e),!s)if(u){let m=t.contentCheckHooks;m!==null&&Bp(e,m)}else{let m=t.contentHooks;m!==null&&Vp(e,m,1),tE(e,1)}y5(t,e);let h=t.components;h!==null&&QD(e,h,0);let p=t.viewQuery;if(p!==null&&gE(2,p,r),!s)if(u){let m=t.viewCheckHooks;m!==null&&Bp(e,m)}else{let m=t.viewHooks;m!==null&&Vp(e,m,2),tE(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bp]){for(let m of e[bp])m();e[bp]=null}s||(GD(e),e[fe]&=-73)}catch(u){throw s||sl(e),u}finally{c!==null&&(Bh(c,l),a&&c5(c)),Mp()}}function YD(t,e){for(let n=fD(t);n!==null;n=hD(n))for(let r=rt;r<n.length;r++){let i=n[r];KD(i,e)}}function g5(t){for(let e=fD(t);e!==null;e=hD(e)){if(!(e[fe]&2))continue;let n=e[Do];for(let r=0;r<n.length;r++){let i=n[r];Ow(i)}}}function v5(t,e,n){Ue(De.ComponentStart);let r=ir(e,t);try{KD(r,n)}finally{Ue(De.ComponentEnd,r[lt])}}function KD(t,e){Ip(t)&&wE(t,e)}function wE(t,e){let r=t[se],i=t[fe],s=t[Fn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Vh(s)),o||=!1,s&&(s.dirty=!1),t[fe]&=-9217,o)m5(r,t,r.template,t[lt]);else if(i&8192){let a=ie(null);try{zD(t),YD(t,1);let l=r.components;l!==null&&QD(t,l,1),GD(t)}finally{ie(a)}}}function QD(t,e,n){for(let r=0;r<e.length;r++)v5(t,e[r],n)}function y5(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ws(~i);else{let s=i,o=n[++r],a=n[++r];oA(o,s);let l=e[s];Ue(De.HostBindingsUpdateStart,l);try{a(2,l)}finally{Ue(De.HostBindingsUpdateEnd,l)}}}}finally{ws(-1)}}function s_(t,e){let n=jw()?64:1088;for(t[ni].changeDetectionScheduler?.notify(e);t;){t[fe]|=n;let r=fs(t);if(il(t)&&!r)return t;t=r}return null}function XD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ZD(t,e){let n=rt+e;if(n<t.length)return t[n]}function hm(t,e,n,r=!0){let i=e[se];if(w5(i,e,t,n),r){let o=yE(n,t),a=e[je],l=a.parentNode(t[gs]);l!==null&&M3(i,t[nr],a,e,l,o)}let s=e[tl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ek(t,e){let n=Ou(t,e);return n!==void 0&&um(n[se],n),n}function Ou(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n];if(r){let i=r[ms];i!==null&&i!==t&&ZE(i,r),e>0&&(t[n-1][tr]=r[tr]);let s=wu(t,rt+e);N3(r[se],r);let o=s[ri];o!==null&&o.detachView(s[se]),r[Et]=null,r[tr]=null,r[fe]&=-129}return r}function w5(t,e,n,r){let i=rt+r,s=n.length;r>0&&(n[i-1][tr]=e),r<s-rt?(e[tr]=n[i],_w(n,rt+r,e)):(n.push(e),e[tr]=null),e[Et]=n;let o=e[ms];o!==null&&n!==o&&tk(o,e);let a=e[ri];a!==null&&a.insertView(t),Ap(e),e[fe]|=128}function tk(t,e){let n=t[Do],r=e[Et];if(ii(r))t[fe]|=2;else{let i=r[Et][On];e[On]!==i&&(t[fe]|=2)}n===null?t[Do]=[e]:n.push(e)}var Es=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[se];return Lu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[lt]}set context(e){this._lView[lt]=e}get destroyed(){return ko(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(_r(e)){let n=e[Su],r=n?n.indexOf(this):-1;r>-1&&(Ou(e,r),wu(n,r))}this._attachedToViewContainer=!1}um(this._lView[se],this._lView)}onDestroy(e){Fw(this._lView,e)}markForCheck(){s_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[fe]&=-129}reattach(){Ap(this._lView),this._lView[fe]|=128}detectChanges(){this._lView[fe]|=1024,JD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=il(this._lView),n=this._lView[ms];n!==null&&!e&&ZE(n,this._lView),LD(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let n=il(this._lView),r=this._lView[ms];r!==null&&!n&&tk(r,this._lView),Ap(this._lView)}};var fl=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=E5;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let s=fm(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Es(s)}}return t})();function E5(){return o_(jt(),he())}function o_(t,e){return t.type&4?new fl(e,t,pl(t,e)):null}function ju(t,e,n,r,i){let s=t.data[e];if(s===null)s=_5(t,e,n,r,i),sA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=tA();s.injectorIndex=o===null?-1:o.injectorIndex}return No(s,!0),s}function _5(t,e,n,r,i){let s=qw(),o=Gw(),a=o?s:s&&s.parent,l=t.data[e]=S5(t,a,n,e,r,i);return C5(t,l,s,o),l}function C5(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function S5(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return eA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function b5(t){let e=t[kw]??[],r=t[Et][je],i=[];for(let s of e)s.data[gD]!==void 0?i.push(s):x5(s,r);t[kw]=i}function x5(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[mD];for(;n<i;){let s=r.nextSibling;ID(e,r,!1),r=s,n++}}}var T5=()=>null,I5=()=>null;function EE(t,e){return T5(t,e)}function nk(t,e,n){return I5(t,e,n)}var rk=class{},pm=class{},_E=class{resolveComponentFactory(e){throw new ue(917,!1)}},mm=class{static NULL=new _E},Oo=class{},Wu=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>A5()}return t})();function A5(){let t=he(),e=jt(),n=ir(e.index,t);return(ii(n)?n:t)[je]}var ik=(()=>{class t{static \u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();var $p={},CE=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,$p,r);return i!==$p||n===$p?i:this.parentInjector.get(e,n,r)}};function Qp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=mp(i,a);else if(s==2){let l=a,c=e[++o];r=mp(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function We(t,e=0){let n=he();if(n===null)return Fe(t,e);let r=jt();return aD(r,n,Ft(t),e)}function D5(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let a=o,l=null,c=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(o);break}M5(t,e,n,a,s,l,c)}s!==null&&r!==null&&k5(n,r,s)}function k5(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new ue(-301,!1);r.push(e[i],s)}}function N5(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function M5(t,e,n,r,i,s,o){let a=r.length,l=null;for(let p=0;p<a;p++){let m=r[p];l===null&&si(m)&&(l=m,N5(t,n,p)),hE(zp(n,e),t,m.type)}B5(n,t.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,h=ND(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(n.mergedAttrs=ul(n.mergedAttrs,m.hostAttrs),P5(t,n,e,h,m),F5(h,m,i),o!==null&&o.has(m)){let[y,E]=o.get(m);n.directiveToIndex.set(m.type,[h,y+n.directiveStart,E+n.directiveStart])}else(s===null||!s.has(m))&&n.directiveToIndex.set(m.type,h);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let g=m.type.prototype;!c&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),h++}R5(t,n,s)}function R5(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))OA(0,e,i,r),OA(1,e,i,r),BA(e,r,!1);else{let s=n.get(i);FA(0,e,s,r),FA(1,e,s,r),BA(e,r,!0)}}}function OA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),sk(e,s)}}function FA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),sk(e,o)}}function sk(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function BA(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||WE(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(n&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(o)}function P5(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=us(i.type,!0)),o=new Po(s,si(i),We,null);t.blueprint[r]=o,n[r]=o,L5(t,e,r,ND(t,n,i.hostVars,Bn),i)}function L5(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;O5(o)!=a&&o.push(a),o.push(n,r,s)}}function O5(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function F5(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;si(e)&&(n[""]=t)}}function B5(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ok(t,e,n,r,i,s,o,a){let l=e[se],c=l.consts,u=oi(c,o),h=ju(l,t,n,r,u);return s&&D5(l,e,h,oi(c,a),i),h.mergedAttrs=ul(h.mergedAttrs,h.attrs),h.attrs!==null&&Qp(h,h.attrs,!1),h.mergedAttrs!==null&&Qp(h,h.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,h),h}function ak(t,e){LH(t,e),Nw(e)&&t.queries.elementEnd(e)}function V5(t,e,n,r,i,s){let o=e.consts,a=oi(o,i),l=ju(e,t,n,r,a);if(l.mergedAttrs=ul(l.mergedAttrs,l.attrs),s!=null){let c=oi(o,s);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Qp(l,l.attrs,!1),l.mergedAttrs!==null&&Qp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function lk(t,e,n){return t[e]=n}function U5(t,e){return t[e]}function Ar(t,e,n){if(n===Bn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function $5(t,e,n,r){let i=Ar(t,e,n);return Ar(t,e+1,r)||i}function Hp(t,e,n){return function r(i){let s=vs(t)?ir(t.index,e):e;s_(s,5);let o=e[lt],a=VA(e,o,n,i),l=r.__ngNextListenerFn__;for(;l;)a=VA(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function VA(t,e,n,r){let i=ie(null);try{return Ue(De.OutputStart,e,n),n(r)!==!1}catch(s){return r5(t,s),!1}finally{Ue(De.OutputEnd,e,n),ie(i)}}function ck(t,e,n,r,i,s,o,a){let l=Tp(t),c=!1,u=null;if(!r&&l&&(u=q5(e,n,s,t.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,c=!0}else{let h=Cr(t,n),p=r?r(h):h;s3(n,p,s,a);let m=i.listen(p,s,a);if(!H5(s)){let g=r?y=>r(rr(y[t.index])):t.index;uk(g,e,n,s,a,m,!1)}}return c}function H5(t){return t.startsWith("animation")||t.startsWith("transition")}function q5(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[nl],l=i[s+2];return a&&a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function uk(t,e,n,r,i,s,o){let a=e.firstCreatePass?Vw(e):null,l=Bw(n),c=l.length;l.push(i,s),a&&a.push(r,t,c,(c+1)*(o?-1:1))}function UA(t,e,n,r,i,s){let o=e[n],a=e[se],c=a.data[n].outputs[r],h=o[c].subscribe(s);uk(t.index,a,e,i,s,h,!0)}var SE=Symbol("BINDING");var bE=class extends mm{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=xo(e);return new Fu(n,this.ngModule)}};function G5(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&cm.SignalBased)!==0};return i&&(s.transform=i),s})}function j5(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function W5(t,e,n){let r=e instanceof Zn?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new CE(n,r):n}function z5(t){let e=t.get(Oo,null);if(e===null)throw new ue(407,!1);let n=t.get(ik,null),r=t.get(Co,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function J5(t,e){let n=dk(t);return xD(e,n,n==="svg"?Mw:n==="math"?jI:null)}function dk(t){return(t.selectors[0][0]||"div").toLowerCase()}var Fu=class extends pm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=G5(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=j5(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=C3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,s,o){Ue(De.DynamicComponentStart);let a=ie(null);try{let l=this.componentDef,c=Y5(r,l,o,s),u=W5(l,i||this.ngModule,e),h=z5(u),p=h.rendererFactory.createRenderer(null,l),m=r?j3(p,r,l.encapsulation,u):J5(l,p),g=o?.some($A)||s?.some(w=>typeof w!="function"&&w.bindings.some($A)),y=JE(null,c,null,512|kD(l),null,null,h,p,u,null,wD(m,u,!0));y[ct]=m,Np(y);let E=null;try{let w=ok(ct,y,2,"#host",()=>c.directiveRegistry,!0,0);AD(p,m,w),dl(m,y),BD(c,y,w),_D(c,w,y),ak(c,w),n!==void 0&&Q5(w,this.ngContentSelectors,n),E=ir(w.index,y),y[lt]=E[lt],i_(c,y,null)}catch(w){throw E!==null&&mE(E),mE(y),w}finally{Ue(De.DynamicComponentEnd),Mp()}return new Xp(this.componentType,y,!!g)}finally{ie(a)}}};function Y5(t,e,n,r){let i=t?["ng-version","21.1.4"]:S3(e.selectors[0]),s=null,o=null,a=0;if(n)for(let u of n)a+=u[SE].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let h=r[u];if(typeof h!="function")for(let p of h.bindings){a+=p[SE].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(s??=[]).push(p)),p.update&&(p.targetIdx=m,(o??=[]).push(p))}}let l=[e];if(r)for(let u of r){let h=typeof u=="function"?u:u.type,p=vw(h);l.push(p)}return zE(0,null,K5(s,o),1,a,l,null,null,null,[i],null)}function K5(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function $A(t){let e=t[SE].kind;return e==="input"||e==="twoWay"}var Xp=class extends rk{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=bu(n[se],ct),this.location=pl(this._tNode,n),this.instance=ir(this._tNode.index,n)[lt],this.hostView=this.changeDetectorRef=new Es(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=r_(r,i[se],i,e,n);this.previousInputValues.set(e,n);let o=ir(r.index,i);s_(o,1)}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Q5(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var zu=(()=>{class t{static __NG_ELEMENT_ID__=X5}return t})();function X5(){let t=jt();return hk(t,he())}var Z5=zu,fk=class extends Z5{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pl(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=$E(this._hostTNode,this._hostLView);if(tD(e)){let n=jp(e,this._hostLView),r=Gp(e),i=n[se].data[r+8];return new Ro(i,n)}else return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=HA(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=EE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Pu(this._hostTNode,o)),a}createComponent(e,n,r,i,s,o,a){let l=e&&!kH(e),c;if(l)c=n;else{let E=n||{};c=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef,o=E.directives,a=E.bindings}let u=l?e:new Fu(xo(e)),h=r||this.parentInjector;if(!s&&u.ngModule==null){let w=(l?h:this.parentInjector).get(Zn,null);w&&(s=w)}let p=xo(u.componentType??{}),m=EE(this._lContainer,p?.id??null),g=m?.firstChild??null,y=u.create(h,i,g,s,o,a);return this.insertImpl(y.hostView,c,Pu(this._hostTNode,m)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(zI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Et],c=new fk(l,l[nr],l[Et]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return hm(o,i,s,r),e.attachToViewContainerRef(),_w(iE(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=HA(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ou(this._lContainer,n);r&&(wu(iE(this._lContainer),n),um(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ou(this._lContainer,n);return r&&wu(iE(this._lContainer),n)!=null?new Es(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function HA(t){return t[Su]}function iE(t){return t[Su]||(t[Su]=[])}function hk(t,e){let n,r=e[t.index];return _r(r)?n=r:(n=XD(r,e,null,t),e[t.index]=n,YE(e,n)),tq(n,e,t,r),new fk(n,t,e)}function eq(t,e){let n=t[je],r=n.createComment(""),i=Cr(e,t),s=n.parentNode(i);return Kp(n,s,r,n.nextSibling(i),!1),r}var tq=iq,nq=()=>!1;function rq(t,e,n){return nq(t,e,n)}function iq(t,e,n,r){if(t[gs])return;let i;n.type&8?i=rr(r):i=eq(e,n),t[gs]=i}var xE=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},TE=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)a_(e,n).matches!==null&&this.queries[n].setDirty()}},IE=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=fq(e):this.predicate=e}},AE=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},DE=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,sq(n,s)),this.matchTNodeWithReadOption(e,n,Up(n,e,s,!1,!1))}else r===fl?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Up(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ai||i===zu||i===fl&&n.type&4)this.addMatch(n.index,-2);else{let s=Up(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function sq(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function oq(t,e){return t.type&11?pl(t,e):t.type&4?o_(t,e):null}function aq(t,e,n,r){return n===-1?oq(e,t):n===-2?lq(t,e,r):Ru(t,t[se],n,e)}function lq(t,e,n){if(n===Ai)return pl(e,t);if(n===fl)return o_(e,t);if(n===zu)return hk(e,t)}function pk(t,e,n,r){let i=e[ri].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(aq(e,u,o[l+1],n.metadata.read))}}i.matches=a}return i.matches}function kE(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=pk(t,e,i,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)r.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let h=rt;h<u.length;h++){let p=u[h];p[ms]===p[Et]&&kE(p[se],p,c,r)}if(u[Do]!==null){let h=u[Do];for(let p=0;p<h.length;p++){let m=h[p];kE(m[se],m,c,r)}}}}}return r}function cq(t,e){return t[ri].queries[e].queryList}function uq(t,e,n){let r=new Jp((n&4)===4);return KI(t,e,r,r.destroy),(e[ri]??=new TE).queries.push(new xE(r))-1}function dq(t,e,n){let r=Ze();return r.firstCreatePass&&(hq(r,new IE(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),uq(r,he(),e)}function fq(t){return t.split(",").map(e=>e.trim())}function hq(t,e,n){t.queries===null&&(t.queries=new AE),t.queries.track(new DE(e,n))}function a_(t,e){return t.queries.getByIndex(e)}function pq(t,e){let n=t[se],r=a_(n,e);return r.crossesNgTemplate?kE(n,t,e,[]):pk(n,t,r,e)}var Bu=class{};var Vu=class extends Bu{injector;componentFactoryResolver=new bE(this);instance=null;constructor(e){super();let n=new _o([...e.providers,{provide:Bu,useValue:this},{provide:mm,useValue:this.componentFactoryResolver}],e.parent||Cu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function mk(t,e,n=null){return new Vu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var mq=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=xw(!1,n.type),i=r.length>0?mk([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(Fe(Zn))})}return t})();function Vn(t){return $u(()=>{let e=gk(t),n=te(A({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(mq).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ir.Emulated,styles:t.styles||on,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&_s("NgStandalone"),vk(n);let r=t.dependencies;return n.directiveDefs=qA(r,gq),n.pipeDefs=qA(r,MI),n.id=wq(n),n})}function gq(t){return xo(t)||vw(t)}function Bo(t){return $u(()=>({type:t.type,bootstrap:t.bootstrap||on,declarations:t.declarations||on,imports:t.imports||on,exports:t.exports||on,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function vq(t,e){if(t==null)return ps;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=cm.None,l=null),n[s]=[r,a,l],e[s]=o}return n}function yq(t){if(t==null)return ps;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Un(t){return $u(()=>{let e=gk(t);return vk(e),e})}function l_(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function gk(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ps,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||on,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:vq(t.inputs,e),outputs:yq(t.outputs),debugInfo:null}}function vk(t){t.features?.forEach(e=>e(t))}function qA(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let s=e(i);s!==null&&r.push(s)}return r}:null}function wq(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Eq(t){return Object.getPrototypeOf(t.prototype).constructor}function ui(t){let e=Eq(t.type),n=!0,r=[t];for(;e;){let i;if(si(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=sE(t.inputs),o.declaredInputs=sE(t.declaredInputs),o.outputs=sE(t.outputs);let a=i.hostBindings;a&&xq(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&Sq(t,l),c&&bq(t,c),_q(t,i),NI(t.outputs,i.outputs),si(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===ui&&(n=!1)}}e=Object.getPrototypeOf(e)}Cq(r)}function _q(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Cq(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ul(i.hostAttrs,n=ul(n,i.hostAttrs))}}function sE(t){return t===ps?{}:t===on?[]:t}function Sq(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function bq(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function xq(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Tq(t,e,n,r,i,s,o,a){if(n.firstCreatePass){t.mergedAttrs=ul(t.mergedAttrs,t.attrs);let u=t.tView=zE(2,t,i,s,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),No(t,!1);let l=Iq(n,e,t,r);Rp()&&e_(n,e,l,t),dl(l,e);let c=XD(l,e,l,t);e[r+ct]=c,YE(e,c),rq(c,t,e)}function Zp(t,e,n,r,i,s,o,a,l,c,u){let h=n+ct,p;if(e.firstCreatePass){if(p=ju(e,h,4,o||null,a||null),c!=null){let m=oi(e.consts,c);p.localNames=[];for(let g=0;g<m.length;g+=2)p.localNames.push(m[g],-1)}}else p=e.data[h];return Tq(p,t,e,n,r,i,s,l),c!=null&&n_(t,p,u),p}var Iq=Aq;function Aq(t,e,n,r){return Pp(!0),e[je].createComment("")}function yk(t){return typeof t=="function"&&t[Ln]!==void 0}function c_(t){return yk(t)&&typeof t.set=="function"}var u_=new _e("");function ml(t){return!!t&&typeof t.then=="function"}function d_(t){return!!t&&typeof t.subscribe=="function"}var wk=new _e("");var f_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=ae(wk,{optional:!0})??[];injector=ae(Si);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Sp(this.injector,i);if(ml(s))n.push(s);else if(d_(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ek=new _e("");function _k(){B0(()=>{let t="";throw new ue(600,t)})}function Ck(t){return t.isBoundToModule}var Dq=10;var Ju=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ae(Mo);afterRenderManager=ae(RD);zonelessEnabled=ae(Au);rootEffectScheduler=ae(Op);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new wr;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ae(al);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(vo(n=>!n))}constructor(){ae(Gu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=ae(Zn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Si.NULL){return this._injector.get(er).run(()=>{Ue(De.BootstrapComponentStart);let o=n instanceof pm;if(!this._injector.get(f_).done){let g="";throw new ue(405,g)}let l;o?l=n:l=this._injector.get(mm).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=Ck(l)?void 0:this._injector.get(Bu),u=r||l.selector,h=l.create(i,[],u,c),p=h.location.nativeElement,m=h.injector.get(u_,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Mu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),Ue(De.BootstrapComponentEnd,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ue(De.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(QE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ue(De.ChangeDetectionEnd),new ue(101,!1);let n=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(n),this.afterTick.next(),Ue(De.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Oo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Dq;){Ue(De.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ue(De.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Tu(i))continue;let s=r&&!this.zonelessEnabled?0:1;JD(i,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Tu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Mu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ek,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Mu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ue(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function gl(t,e,n,r){let i=he(),s=ys();if(Ar(i,s,e)){let o=Ze(),a=Iu();e5(a,i,t,e,n,r)}return gl}var yne=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var NE=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function oE(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function kq(t,e,n,r){let i,s,o=0,a=t.length-1,l=void 0;if(Array.isArray(e)){ie(r);let c=e.length-1;for(ie(null);o<=a&&o<=c;){let u=t.at(o),h=e[o],p=oE(o,u,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(a),g=e[c],y=oE(a,m,c,g,n);if(y!==0){y<0&&t.updateValue(a,g),a--,c--;continue}let E=n(o,u),w=n(a,m),I=n(o,h);if(Object.is(I,w)){let D=n(c,g);Object.is(D,E)?(t.swap(o,a),t.updateValue(a,g),c--,a--):t.move(a,o),t.updateValue(o,h),o++;continue}if(i??=new em,s??=jA(t,o,a,n),ME(t,i,o,I))t.updateValue(o,h),o++,a++;else if(s.has(I))i.set(E,t.detach(o)),a--;else{let D=t.create(o,e[o]);t.attach(o,D),o++,a++}}for(;o<=c;)GA(t,i,n,o,e[o]),o++}else if(e!=null){ie(r);let c=e[Symbol.iterator]();ie(null);let u=c.next();for(;!u.done&&o<=a;){let h=t.at(o),p=u.value,m=oE(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,u=c.next();else{i??=new em,s??=jA(t,o,a,n);let g=n(o,p);if(ME(t,i,o,g))t.updateValue(o,p),o++,a++,u=c.next();else if(!s.has(g))t.attach(o,t.create(o,p)),o++,a++,u=c.next();else{let y=n(o,h);i.set(y,t.detach(o)),a--}}}for(;!u.done;)GA(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function ME(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function GA(t,e,n,r,i){if(ME(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function jA(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var em=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ge(t,e,n,r,i,s,o,a){_s("NgControlFlow");let l=he(),c=Ze(),u=oi(c.consts,s);return Zp(l,c,t,e,n,r,i,u,256,o,a),h_}function h_(t,e,n,r,i,s,o,a){_s("NgControlFlow");let l=he(),c=Ze(),u=oi(c.consts,s);return Zp(l,c,t,e,n,r,i,u,512,o,a),h_}function ve(t,e){_s("NgControlFlow");let n=he(),r=ys(),i=n[r]!==Bn?n[r]:-1,s=i!==-1?tm(n,ct+i):void 0,o=0;if(Ar(n,r,t)){let a=ie(null);try{if(s!==void 0&&ek(s,o),t!==-1){let l=ct+t,c=tm(n,l),u=OE(n[se],l),h=nk(c,u,n),p=fm(n,u,e,{dehydratedView:h});hm(c,p,o,Pu(u,h))}}finally{ie(a)}}else if(s!==void 0){let a=ZD(s,o);a!==void 0&&(a[lt]=e)}}var RE=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-rt}};function Yu(t){return t}function Ku(t,e){return e}var PE=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Wt(t,e,n,r,i,s,o,a,l,c,u,h,p){_s("NgControlFlow");let m=he(),g=Ze(),y=l!==void 0,E=he(),w=a?o.bind(E[On][lt]):o,I=new PE(y,w);E[ct+t]=I,Zp(m,g,t+1,e,n,r,i,oi(g.consts,s),256),y&&Zp(m,g,t+2,l,c,u,h,oi(g.consts,p),512)}var LE=class extends NE{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[lt].$implicit}attach(e,n){let r=n[tl];this.needsIndexUpdate||=e!==this.length,hm(this.lContainer,n,e,Pu(this.templateTNode,r)),Nq(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Mq(this.lContainer,e),Rq(this.lContainer,e)}create(e,n){let r=EE(this.lContainer,this.templateTNode.tView.ssrId);return fm(this.hostLView,this.templateTNode,new RE(this.lContainer,n,e),{dehydratedView:r})}destroy(e){um(e[se],e)}updateValue(e,n){this.getLView(e)[lt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[lt].$index=e}getLView(e){return Pq(this.lContainer,e)}};function zt(t){let e=ie(null),n=ai();try{let r=he(),i=r[se],s=r[n],o=n+1,a=tm(r,o);if(s.liveCollection===void 0){let c=OE(i,o);s.liveCollection=new LE(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(kq(l,t,s.trackByFn,e),l.updateIndexes(),s.hasEmptyBlock){let c=ys(),u=l.length===0;if(Ar(r,c,u)){let h=n+2,p=tm(r,h);if(u){let m=OE(i,h),g=nk(p,m,r),y=fm(r,m,void 0,{dehydratedView:g});hm(p,y,0,Pu(m,g))}else i.firstUpdatePass&&b5(p),ek(p,0)}}}finally{ie(e)}}function tm(t,e){return t[e]}function Nq(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n],i=r?r[Ao]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Ti];A3(s,i),Lo.delete(r[Ii]),i.detachedLeaveAnimationFns=void 0}}function Mq(t,e){if(t.length<=rt)return;let n=rt+e,r=t[n],i=r?r[Ao]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Rq(t,e){return Ou(t,e)}function Pq(t,e){return ZD(t,e)}function OE(t,e){return bu(t,e)}function Di(t,e,n){let r=he(),i=ys();if(Ar(r,i,e)){let s=Ze(),o=Iu();VD(o,r,t,e,r[je],n)}return Di}function FE(t,e,n,r,i){r_(e,t,n,i?"class":"style",r)}function x(t,e,n,r){let i=he(),s=i[se],o=t+ct,a=s.firstCreatePass?ok(o,i,2,e,Z3,ZI(),n,r):s.data[o];if($D(a,i,t,e,Sk),Tp(a)){let l=i[se];BD(l,i,a),_D(l,a,i)}return r!=null&&n_(i,a),x}function k(){let t=Ze(),e=jt(),n=HD(e);return t.firstCreatePass&&ak(t,n),$w(n)&&Hw(),Uw(),n.classesWithoutHost!=null&&FH(n)&&FE(t,n,he(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&BH(n)&&FE(t,n,he(),n.stylesWithoutHost,!1),k}function Te(t,e,n,r){return x(t,e,n,r),k(),Te}function O(t,e,n,r){let i=he(),s=i[se],o=t+ct,a=s.firstCreatePass?V5(o,s,2,e,n,r):s.data[o];return $D(a,i,t,e,Sk),r!=null&&n_(i,a),O}function F(){let t=jt(),e=HD(t);return $w(e)&&Hw(),Uw(),F}function _t(t,e,n,r){return O(t,e,n,r),F(),_t}var Sk=(t,e,n,r,i)=>(Pp(!0),xD(e[je],r,hA()));function qe(){return he()}function gm(t,e,n){let r=he(),i=ys();if(Ar(r,i,e)){let s=Ze(),o=Iu();UD(o,r,t,e,r[je],n)}return gm}var ku=void 0;function Lq(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Oq=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",ku,ku,ku],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Lq],aE={};function $n(t){let e=Fq(t),n=WA(e);if(n)return n;let r=e.split("-")[0];if(n=WA(r),n)return n;if(r==="en")return Oq;throw new ue(701,!1)}function WA(t){return t in aE||(aE[t]=So.ng&&So.ng.common&&So.ng.common.locales&&So.ng.common.locales[t]),aE[t]}var ut=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ut||{});function Fq(t){return t.toLowerCase().replace(/_/g,"-")}var Qu="en-US";var Bq=Qu;function bk(t){typeof t=="string"&&(Bq=t.toLowerCase().replace(/_/g,"-"))}function Q(t,e,n){let r=he(),i=Ze(),s=jt();return xk(i,r,r[je],s,t,e,n),Q}function it(t,e,n){let r=he(),i=Ze(),s=jt();return(s.type&3||n)&&ck(s,i,r,n,r[je],t,e,Hp(s,r,e)),it}function xk(t,e,n,r,i,s,o){let a=!0,l=null;if((r.type&3||o)&&(l??=Hp(r,e,s),ck(r,t,e,o,n,i,s,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let h=0;h<u.length;h+=2){let p=u[h],m=u[h+1];l??=Hp(r,e,s),UA(r,e,p,m,i,l)}if(c&&c.length)for(let h of c)l??=Hp(r,e,s),UA(r,e,h,i,i,l)}}function V(t=1){return fA(t)}function vl(t,e,n){return dq(t,e,n),vl}function Xu(t){let e=he(),n=Ze(),r=Jw();kp(r+1);let i=a_(n,r);if(t.dirty&&WI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=pq(e,r);t.reset(s,QH),t.notifyOnChanges()}return!0}return!1}function Zu(){return cq(he(),Jw())}function Fp(t,e){return t<<17|e<<2}function Fo(t){return t>>17&32767}function Vq(t){return(t&2)==2}function Uq(t,e){return t&131071|e<<17}function BE(t){return t|2}function hl(t){return(t&131068)>>2}function lE(t,e){return t&-131069|e<<2}function $q(t){return(t&1)===1}function VE(t){return t|1}function Hq(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Fo(o),l=hl(o);t[r]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||el(h,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let p=Fo(t[a+1]);t[r+1]=Fp(p,a),p!==0&&(t[p+1]=lE(t[p+1],r)),t[a+1]=Uq(t[a+1],r)}else t[r+1]=Fp(a,0),a!==0&&(t[a+1]=lE(t[a+1],r)),a=r;else t[r+1]=Fp(l,0),a===0?a=r:t[l+1]=lE(t[l+1],r),l=r;c&&(t[r+1]=BE(t[r+1])),zA(t,u,r,!0),zA(t,u,r,!1),qq(e,u,t,r,s),o=Fp(a,l),s?e.classBindings=o:e.styleBindings=o}function qq(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&el(s,e)>=0&&(n[r+1]=VE(n[r+1]))}function zA(t,e,n,r){let i=t[n+1],s=e===null,o=r?Fo(i):hl(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];Gq(l,e)&&(a=!0,t[o+1]=r?VE(c):BE(c)),o=r?Fo(c):hl(c)}a&&(t[n+1]=r?BE(i):VE(i))}function Gq(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?el(t,e)>=0:!1}var Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jq(t){return t.substring(Tr.key,Tr.keyEnd)}function Wq(t){return zq(t),Tk(t,Ik(t,0,Tr.textEnd))}function Tk(t,e){let n=Tr.textEnd;return n===e?-1:(e=Tr.keyEnd=Jq(t,Tr.key=e,n),Ik(t,e,n))}function zq(t){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=t.length}function Ik(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Jq(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function yl(t,e,n){return Ak(t,e,n,!1),yl}function et(t,e){return Ak(t,e,null,!0),et}function vm(t){Kq(nG,Yq,t,!0)}function Yq(t,e){for(let n=Wq(e);n>=0;n=Tk(e,n))_p(t,jq(e),!0)}function Ak(t,e,n,r){let i=he(),s=Ze(),o=zw(2);if(s.firstUpdatePass&&kk(s,t,o,r),e!==Bn&&Ar(i,o,e)){let a=s.data[ai()];Nk(s,a,i,i[je],t,i[o+1]=iG(e,n),r,o)}}function Kq(t,e,n,r){let i=Ze(),s=zw(2);i.firstUpdatePass&&kk(i,null,s,r);let o=he();if(n!==Bn&&Ar(o,s,n)){let a=i.data[ai()];if(Mk(a,r)&&!Dk(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=mp(l,n||"")),FE(i,a,o,n,r)}else rG(i,a,o,o[je],o[s+1],o[s+1]=tG(t,e,n),r,s)}}function Dk(t,e){return e>=t.expandoStartIndex}function kk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ai()],o=Dk(t,n);Mk(s,r)&&e===null&&!o&&(e=!1),e=Qq(i,s,e,r),Hq(i,s,e,n,o,r)}}function Qq(t,e,n,r){let i=lA(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=cE(null,t,e,n,r),n=Uu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=cE(i,t,e,n,r),s===null){let l=Xq(t,e,r);l!==void 0&&Array.isArray(l)&&(l=cE(null,t,e,l[1],r),l=Uu(l,e.attrs,r),Zq(t,e,r,l))}else s=eG(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Xq(t,e,n){let r=n?e.classBindings:e.styleBindings;if(hl(r)!==0)return t[Fo(r)]}function Zq(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Fo(i)]=r}function eG(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Uu(r,o,n)}return Uu(r,e.attrs,n)}function cE(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Uu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Uu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_p(t,o,n?!0:e[++s]))}return t===void 0?null:t}function tG(t,e,n){if(n==null||n==="")return on;let r=[],i=am(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(i instanceof Set)for(let s of i)t(r,s,!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function nG(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&_p(t,r,n)}function rG(t,e,n,r,i,s,o,a){i===Bn&&(i=on);let l=0,c=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;u!==null||h!==null;){let p=l<i.length?i[l+1]:void 0,m=c<s.length?s[c+1]:void 0,g=null,y;u===h?(l+=2,c+=2,p!==m&&(g=h,y=m)):h===null||u!==null&&u<h?(l+=2,g=u):(c+=2,g=h,y=m),g!==null&&Nk(t,e,n,r,g,y,o,a),u=l<i.length?i[l]:null,h=c<s.length?s[c]:null}}function Nk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=$q(c)?JA(l,e,n,i,hl(c),o):void 0;if(!nm(u)){nm(s)||Vq(c)&&(s=JA(l,null,n,i,a,o));let h=Rw(ai(),n);G3(r,o,h,i,s)}}function JA(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,h=u===null,p=n[i+1];p===Bn&&(p=h?on:void 0);let m=h?Cp(p,r):u===r?p:void 0;if(c&&!nm(m)&&(m=Cp(l,r)),nm(m)&&(a=m,o))return a;let g=t[i+1];i=o?Fo(g):hl(g)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Cp(l,r))}return a}function nm(t){return t!==void 0}function iG(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=cs(am(t)))),t}function Mk(t,e){return(t.flags&(e?8:16))!==0}function S(t,e=""){let n=he(),r=Ze(),i=t+ct,s=r.firstCreatePass?ju(r,i,1,e,null):r.data[i],o=sG(r,n,s,e);n[i]=o,Rp()&&e_(r,n,o,s),No(s,!1)}var sG=(t,e,n,r)=>(Pp(!0),l3(e[je],r));function Rk(t,e,n,r=""){return Ar(t,ys(),n)?e+yp(n)+r:Bn}function ze(t){return Ge("",t),ze}function Ge(t,e,n){let r=he(),i=Rk(r,t,e,n);return i!==Bn&&oG(r,ai(),i),Ge}function oG(t,e,n){let r=Rw(e,t);c3(t[je],r,n)}function Vo(t,e,n){c_(e)&&(e=e());let r=he(),i=ys();if(Ar(r,i,e)){let s=Ze(),o=Iu();VD(o,r,t,e,r[je],n)}return Vo}function wl(t,e){let n=c_(t);return n&&t.set(e),n}function Uo(t,e){let n=he(),r=Ze(),i=jt();return xk(r,n,n[je],i,t,e),Uo}var Pk={};function ym(t){_s("NgLet");let e=Ze(),n=he(),r=t+ct,i=ju(e,r,128,null,null);return No(i,!1),xu(e,n,r,Pk),ym}function wm(t){let e=Ze(),n=he(),r=ai();return xu(e,n,r,t),t}function Em(t){let e=rA(),n=Pw(e,ct+t);if(n===Pk)throw new ue(314,!1);return n}function _m(t,e,n=""){return Rk(he(),t,e,n)}function YA(t,e,n){let r=Ze();r.firstCreatePass&&Lk(e,r.data,r.blueprint,si(t),n)}function Lk(t,e,n,r,i){if(t=Ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)Lk(t[s],e,n,r,i);else{let s=Ze(),o=he(),a=jt(),l=Eo(t)?t:Ft(t.provide),c=Iw(t),u=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Eo(t)||!t.multi){let m=new Po(c,i,We,null),g=dE(l,e,i?u:u+p,h);g===-1?(hE(zp(a,o),s,l),uE(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[g]=m,o[g]=m)}else{let m=dE(l,e,u+p,h),g=dE(l,e,u,u+p),y=m>=0&&n[m],E=g>=0&&n[g];if(i&&!E||!i&&!y){hE(zp(a,o),s,l);let w=cG(i?lG:aG,n.length,i,r,c,t);!i&&E&&(n[g].providerFactory=w),uE(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=Ok(n[i?g:m],c,!i&&r);uE(s,t,m>-1?m:g,w)}!i&&r&&E&&n[g].componentProviders++}}}function uE(t,e,n,r){let i=Eo(e),s=HI(e);if(i||s){let l=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Ok(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aG(t,e,n,r,i){return UE(this.multi,[])}function lG(t,e,n,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Ru(r,r[se],this.providerFactory.index,i);o=l.slice(0,a),UE(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],UE(s,o);return o}function UE(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function cG(t,e,n,r,i,s){let o=new Po(t,n,We,null);return o.multi=[],o.index=e,o.componentProviders=0,Ok(o,i,r&&!n),o}function El(t,e){return n=>{n.providersResolver=(r,i)=>YA(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>YA(r,i?i(e):e,!0))}}function p_(t,e){let n=Ww()+t,r=he();return r[n]===Bn?lk(r,n,e()):U5(r,n)}function uG(t,e){let n=t[e];return n===Bn?void 0:n}function dG(t,e,n,r,i,s,o){let a=e+n;return $5(t,a,i,s)?lk(t,a+2,o?r.call(o,i,s):r(i,s)):uG(t,a+2)}function m_(t,e){let n=Ze(),r,i=t+ct;n.firstCreatePass?(r=fG(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=us(r.type,!0)),o,a=sn(We);try{let l=Wp(!1),c=s();return Wp(l),xu(n,he(),i,c),c}finally{sn(a)}}function fG(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function g_(t,e,n,r){let i=t+ct,s=he(),o=Pw(s,i);return hG(s,i)?dG(s,Ww(),e,o.transform,n,r,o):o.transform(n,r)}function hG(t,e){return t[se].data[e].pure}var Fk=(()=>{class t{applicationErrorHandler=ae(Mo);appRef=ae(Ju);taskService=ae(al);ngZone=ae(er);zonelessEnabled=ae(Au);tracing=ae(Gu,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ae(eE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?yA:Qw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function v_(){return _s("NgZoneless"),bw([...y_(),[]])}function y_(){return[{provide:Co,useExisting:Fk},{provide:er,useClass:yu},{provide:Au,useValue:!0}]}function pG(){return typeof $localize<"u"&&$localize.locale||Qu}var ed=new _e("",{factory:()=>ae(ed,{optional:!0,skipSelf:!0})||pG()});function ki(t,e){return Uh(t,e?.equal)}var w_=new _e(""),IG=new _e("");function td(t){return!t.moduleRef}function AG(t){let e=td(t)?t.r3Injector:t.moduleRef.injector,n=e.get(er);return n.run(()=>{td(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Mo),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),td(t)){let s=()=>e.destroy(),o=t.platformInjector.get(w_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(w_);o.add(s),t.moduleRef.onDestroy(()=>{Mu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return kG(r,n,()=>{let s=e.get(al),o=s.add(),a=e.get(f_);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(ed,Qu);if(bk(l||Qu),!e.get(IG,!0))return td(t)?e.get(Ju):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(td(t)){let u=e.get(Ju);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return DG?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{s.remove(o)})})})}var DG;function kG(t,e,n){try{let r=n();return ml(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Cm=null;function NG(t=[],e){return Si.create({name:e,providers:[{provide:_u,useValue:"platform"},{provide:w_,useValue:new Set([()=>Cm=null])},...t]})}function MG(t=[]){if(Cm)return Cm;let e=NG(t);return Cm=e,_k(),RG(e),e}function RG(t){let e=t.get(sm,null);Sp(t,()=>{e?.forEach(n=>n())})}var PG=1e4;var $le=PG-1e3;var E_=(()=>{class t{static __NG_ELEMENT_ID__=LG}return t})();function LG(t){return OG(jt(),he(),(t&16)===16)}function OG(t,e,n){if(vs(t)&&!n){let r=ir(t.index,e);return new Es(r,r)}else if(t.type&175){let r=e[On];return new Es(r,e)}return null}function Bk(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ue(De.BootstrapApplicationStart);try{let s=i?.injector??MG(r),o=[y_(),EA,...n||[]],a=new Vu({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return AG({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Ue(De.BootstrapApplicationEnd)}}function __(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Vk=null;function Cs(){return Vk}function C_(t){Vk??=t}var nd=class{};var Jt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Jt||{}),$e=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})($e||{}),yn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(yn||{}),Mi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $k(t){return $n(t)[ut.LocaleId]}function Hk(t,e,n){let r=$n(t),i=[r[ut.DayPeriodsFormat],r[ut.DayPeriodsStandalone]],s=sr(i,e);return sr(s,n)}function qk(t,e,n){let r=$n(t),i=[r[ut.DaysFormat],r[ut.DaysStandalone]],s=sr(i,e);return sr(s,n)}function Gk(t,e,n){let r=$n(t),i=[r[ut.MonthsFormat],r[ut.MonthsStandalone]],s=sr(i,e);return sr(s,n)}function jk(t,e){let r=$n(t)[ut.Eras];return sr(r,e)}function rd(t,e){let n=$n(t);return sr(n[ut.DateFormat],e)}function id(t,e){let n=$n(t);return sr(n[ut.TimeFormat],e)}function sd(t,e){let r=$n(t)[ut.DateTimeFormat];return sr(r,e)}function od(t,e){let n=$n(t),r=n[ut.NumberSymbols][e];if(typeof r>"u"){if(e===Mi.CurrencyDecimal)return n[ut.NumberSymbols][Mi.Decimal];if(e===Mi.CurrencyGroup)return n[ut.NumberSymbols][Mi.Group]}return r}function Wk(t){if(!t[ut.ExtraData])throw new ue(2303,!1)}function zk(t){let e=$n(t);return Wk(e),(e[ut.ExtraData][2]||[]).map(r=>typeof r=="string"?S_(r):[S_(r[0]),S_(r[1])])}function Jk(t,e,n){let r=$n(t);Wk(r);let i=[r[ut.ExtraData][0],r[ut.ExtraData][1]],s=sr(i,e)||[];return sr(s,n)||[]}function sr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new ue(2304,!1)}function S_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var FG=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sm={},BG=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Yk(t,e,n,r){let i=zG(t);e=Ni(n,e)||e;let o=[],a;for(;e;)if(a=BG.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let l=i.getTimezoneOffset();r&&(l=Qk(r,l),i=WG(i,r));let c="";return o.forEach(u=>{let h=GG(u);c+=h?h(i,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Am(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ni(t,e){let n=$k(t);if(Sm[n]??={},Sm[n][e])return Sm[n][e];let r="";switch(e){case"shortDate":r=rd(t,yn.Short);break;case"mediumDate":r=rd(t,yn.Medium);break;case"longDate":r=rd(t,yn.Long);break;case"fullDate":r=rd(t,yn.Full);break;case"shortTime":r=id(t,yn.Short);break;case"mediumTime":r=id(t,yn.Medium);break;case"longTime":r=id(t,yn.Long);break;case"fullTime":r=id(t,yn.Full);break;case"short":let i=Ni(t,"shortTime"),s=Ni(t,"shortDate");r=bm(sd(t,yn.Short),[i,s]);break;case"medium":let o=Ni(t,"mediumTime"),a=Ni(t,"mediumDate");r=bm(sd(t,yn.Medium),[o,a]);break;case"long":let l=Ni(t,"longTime"),c=Ni(t,"longDate");r=bm(sd(t,yn.Long),[l,c]);break;case"full":let u=Ni(t,"fullTime"),h=Ni(t,"fullDate");r=bm(sd(t,yn.Full),[u,h]);break}return r&&(Sm[n][e]=r),r}function bm(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Dr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function VG(t,e){return Dr(t,3).substring(0,e)}function ht(t,e,n=0,r=!1,i=!1){return function(s,o){let a=UG(t,s);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return VG(a,e);let l=od(o,Mi.MinusSign);return Dr(a,e,l,r,i)}}function UG(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ue(2301,!1)}}function Je(t,e,n=Jt.Format,r=!1){return function(i,s){return $G(i,s,t,e,n,r)}}function $G(t,e,n,r,i,s){switch(n){case 2:return Gk(e,i,r)[t.getMonth()];case 1:return qk(e,i,r)[t.getDay()];case 0:let o=t.getHours(),a=t.getMinutes();if(s){let c=zk(e),u=Jk(e,i,r),h=c.findIndex(p=>{if(Array.isArray(p)){let[m,g]=p,y=o>=m.hours&&a>=m.minutes,E=o<g.hours||o===g.hours&&a<g.minutes;if(m.hours<g.hours){if(y&&E)return!0}else if(y||E)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return Hk(e,i,r)[o<12?0:1];case 3:return jk(e,r)[t.getFullYear()<=0?0:1];default:let l=n;throw new ue(2302,!1)}}function xm(t){return function(e,n,r){let i=-1*r,s=od(n,Mi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Dr(o,2,s)+Dr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Dr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Dr(o,2,s)+":"+Dr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Dr(o,2,s)+":"+Dr(Math.abs(i%60),2,s);default:throw new ue(2310,!1)}}}var HG=0,Im=4;function qG(t){let e=Am(t,HG,1).getDay();return Am(t,0,1+(e<=Im?Im:Im+7)-e)}function Kk(t){let e=t.getDay(),n=e===0?-3:Im-e;return Am(t.getFullYear(),t.getMonth(),t.getDate()+n)}function b_(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=Kk(n),o=qG(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Dr(i,t,od(r,Mi.MinusSign))}}function Tm(t,e=!1){return function(n,r){let s=Kk(n).getFullYear();return Dr(s,t,od(r,Mi.MinusSign),e)}}var x_={};function GG(t){if(x_[t])return x_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Je(3,$e.Abbreviated);break;case"GGGG":e=Je(3,$e.Wide);break;case"GGGGG":e=Je(3,$e.Narrow);break;case"y":e=ht(0,1,0,!1,!0);break;case"yy":e=ht(0,2,0,!0,!0);break;case"yyy":e=ht(0,3,0,!1,!0);break;case"yyyy":e=ht(0,4,0,!1,!0);break;case"Y":e=Tm(1);break;case"YY":e=Tm(2,!0);break;case"YYY":e=Tm(3);break;case"YYYY":e=Tm(4);break;case"M":case"L":e=ht(1,1,1);break;case"MM":case"LL":e=ht(1,2,1);break;case"MMM":e=Je(2,$e.Abbreviated);break;case"MMMM":e=Je(2,$e.Wide);break;case"MMMMM":e=Je(2,$e.Narrow);break;case"LLL":e=Je(2,$e.Abbreviated,Jt.Standalone);break;case"LLLL":e=Je(2,$e.Wide,Jt.Standalone);break;case"LLLLL":e=Je(2,$e.Narrow,Jt.Standalone);break;case"w":e=b_(1);break;case"ww":e=b_(2);break;case"W":e=b_(1,!0);break;case"d":e=ht(2,1);break;case"dd":e=ht(2,2);break;case"c":case"cc":e=ht(7,1);break;case"ccc":e=Je(1,$e.Abbreviated,Jt.Standalone);break;case"cccc":e=Je(1,$e.Wide,Jt.Standalone);break;case"ccccc":e=Je(1,$e.Narrow,Jt.Standalone);break;case"cccccc":e=Je(1,$e.Short,Jt.Standalone);break;case"E":case"EE":case"EEE":e=Je(1,$e.Abbreviated);break;case"EEEE":e=Je(1,$e.Wide);break;case"EEEEE":e=Je(1,$e.Narrow);break;case"EEEEEE":e=Je(1,$e.Short);break;case"a":case"aa":case"aaa":e=Je(0,$e.Abbreviated);break;case"aaaa":e=Je(0,$e.Wide);break;case"aaaaa":e=Je(0,$e.Narrow);break;case"b":case"bb":case"bbb":e=Je(0,$e.Abbreviated,Jt.Standalone,!0);break;case"bbbb":e=Je(0,$e.Wide,Jt.Standalone,!0);break;case"bbbbb":e=Je(0,$e.Narrow,Jt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Je(0,$e.Abbreviated,Jt.Format,!0);break;case"BBBB":e=Je(0,$e.Wide,Jt.Format,!0);break;case"BBBBB":e=Je(0,$e.Narrow,Jt.Format,!0);break;case"h":e=ht(3,1,-12);break;case"hh":e=ht(3,2,-12);break;case"H":e=ht(3,1);break;case"HH":e=ht(3,2);break;case"m":e=ht(4,1);break;case"mm":e=ht(4,2);break;case"s":e=ht(5,1);break;case"ss":e=ht(5,2);break;case"S":e=ht(6,1);break;case"SS":e=ht(6,2);break;case"SSS":e=ht(6,3);break;case"Z":case"ZZ":case"ZZZ":e=xm(0);break;case"ZZZZZ":e=xm(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=xm(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=xm(2);break;default:return null}return x_[t]=e,e}function Qk(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function jG(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function WG(t,e,n){let i=t.getTimezoneOffset(),s=Qk(e,i);return jG(t,-1*(s-i))}function zG(t){if(Uk(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Am(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(FG))return JG(r)}let e=new Date(t);if(!Uk(e))throw new ue(2311,!1);return e}function JG(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,l,c),e}function Uk(t){return t instanceof Date&&!isNaN(t.valueOf())}function YG(t,e){return new ue(2100,!1)}var KG="mediumDate",Xk=new _e(""),Zk=new _e(""),T_=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??KG,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Yk(n,o,s||this.locale,a)}catch(o){throw YG(t,o.message)}}static \u0275fac=function(r){return new(r||t)(We(ed,16),We(Xk,24),We(Zk,24))};static \u0275pipe=l_({name:"date",type:t,pure:!0})}return t})();var di=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bo({type:t});static \u0275inj=hs({})}return t})();function I_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ad=class{};var e1="browser";var ld=class{_doc;constructor(e){this._doc=e}manager},Dm=(()=>{class t extends ld{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,s){return n.addEventListener(r,i,s),()=>this.removeEventListener(n,r,i,s)}removeEventListener(n,r,i,s){return n.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||t)(Fe(Sr))};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),Mm=new _e(""),N_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});let i=n.filter(o=>!(o instanceof Dm));this._plugins=i.slice().reverse();let s=n.find(o=>o instanceof Dm);s&&this._plugins.push(s)}addEventListener(n,r,i,s){return this._findPluginFor(r).addEventListener(n,r,i,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Fe(Mm),Fe(er))};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),A_="ng-app-id";function t1(t){for(let e of t)e.remove()}function n1(t,e){let n=e.createElement("style");return n.textContent=t,n}function ZG(t,e,n,r){let i=t.head?.querySelectorAll(`style[${A_}="${e}"],link[${A_}="${e}"]`);if(i)for(let s of i)s.removeAttribute(A_),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function k_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var M_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,ZG(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,n1);r?.forEach(i=>this.addUsage(i,this.external,k_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(t1(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])t1(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,n1(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,k_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Fe(Sr),Fe(im),Fe(om,8),Fe(qu))};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),D_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},R_=/%COMP%/g;var i1="%COMP%",e4=`_nghost-${i1}`,t4=`_ngcontent-${i1}`,n4=!0,r4=new _e("",{factory:()=>n4});function i4(t){return t4.replace(R_,t)}function s4(t){return e4.replace(R_,t)}function s1(t,e){return e.map(n=>n.replace(R_,t))}var P_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,s,o,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=l,this.tracingService=c,this.defaultRenderer=new cd(n,o,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Nm?i.applyToHost(n):i instanceof ud&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.tracingService;switch(r.encapsulation){case Ir.Emulated:s=new Nm(l,c,r,this.appId,u,o,a,h);break;case Ir.ShadowDom:return new km(l,n,r,o,a,this.nonce,h,c);case Ir.ExperimentalIsolatedShadowDom:return new km(l,n,r,o,a,this.nonce,h);default:s=new ud(l,c,r,u,o,a,h);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Fe(N_),Fe(M_),Fe(im),Fe(r4),Fe(Sr),Fe(er),Fe(om),Fe(Gu,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),cd=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(D_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(r1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(r1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=D_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=D_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ci.DashCase|ci.Important)?e.style.setProperty(n,r,i&ci.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ci.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Cs().getGlobalEventTarget(this.doc,e),!e))throw new ue(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,n,s)),this.eventManager.addEventListener(e,n,s,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function r1(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var km=class extends cd{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,s,o,a,l){super(e,i,s,a),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=r.styles;c=s1(r.id,c);for(let h of c){let p=document.createElement("style");o&&p.setAttribute("nonce",o),p.textContent=h,this.shadowRoot.appendChild(p)}let u=r.getExternalStyles?.();if(u)for(let h of u){let p=k_(h,i);o&&p.setAttribute("nonce",o),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ud=class extends cd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let c=r.styles;this.styles=l?s1(l,c):c,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Lo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Nm=class extends ud{contentAttr;hostAttr;constructor(e,n,r,i,s,o,a,l){let c=i+"-"+r.id;super(e,n,r,s,o,a,l,c),this.contentAttr=i4(c),this.hostAttr=s4(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Rm=class t extends nd{supportsDOMEvents=!0;static makeCurrent(){C_(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=o4();return n==null?null:a4(n)}resetBaseElement(){dd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return I_(document.cookie,e)}},dd=null;function o4(){return dd=dd||document.head.querySelector("base"),dd?dd.getAttribute("href"):null}function a4(t){return new URL(t,document.baseURI).pathname}var l4=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),o1=["alt","control","meta","shift"],c4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},u4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},a1=(()=>{class t extends ld{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cs().onAndCancel(n,o.domEventName,a,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),o1.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=c4[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),o1.forEach(o=>{if(o!==i){let a=u4[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Fe(Sr))};static \u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();async function L_(t,e,n){let r=A({rootComponent:t},d4(e,n));return Bk(r)}function d4(t,e){return{platformRef:e?.platformRef,appProviders:[...g4,...t?.providers??[]],platformProviders:m4}}function f4(){Rm.makeCurrent()}function h4(){return new bi}function p4(){return qE(document),document}var m4=[{provide:qu,useValue:e1},{provide:sm,useValue:f4,multi:!0},{provide:Sr,useFactory:p4}];var g4=[{provide:_u,useValue:"root"},{provide:bi,useFactory:h4},{provide:Mm,useClass:Dm,multi:!0},{provide:Mm,useClass:a1,multi:!0},P_,M_,N_,{provide:Oo,useExisting:P_},{provide:ad,useClass:l4},[]];var an=class{static createInitialBoard(e="chess"){let n=Array(8).fill(null).map(()=>Array(8).fill(null));if(e==="chess"){for(let i=0;i<8;i++)n[1][i]={type:"p",color:"b"},n[6][i]={type:"p",color:"w"};let r=["r","n","b","q","k","b","n","r"];for(let i=0;i<8;i++)n[0][i]={type:r[i],color:"b"},n[7][i]={type:r[i],color:"w"}}else{for(let r=0;r<3;r++)for(let i=0;i<8;i++)(r+i)%2!==0&&(n[r][i]={type:"cm",color:"b"});for(let r=5;r<8;r++)for(let i=0;i<8;i++)(r+i)%2!==0&&(n[r][i]={type:"cm",color:"w"})}return n}static isValidPos(e){return e.row>=0&&e.row<8&&e.col>=0&&e.col<8}static getValidMoves(e,n,r="chess",i=null,s=!0){let o=e[n.row][n.col];if(!o)return[];let a=[];if(r==="checkers"){let h=e[n.row][n.col];if(!h)return[];let p=h.type==="ck"?[[1,1],[1,-1],[-1,1],[-1,-1]]:h.color==="w"?[[-1,-1],[-1,1]]:[[1,-1],[1,1]],m=[];for(let[g,y]of p){let E=n.row+g,w=n.col+y,I=n.row+g*2,D=n.col+y*2;if(this.isValidPos({row:I,col:D})&&e[I][D]===null){let b=e[E][w];if(b&&b.color!==h.color){if(h.type==="cm"&&b.type==="ck")continue;m.push({row:I,col:D})}}}if(m.length>0)return m;for(let[g,y]of p){let E=n.row+g,w=n.col+y;this.isValidPos({row:E,col:w})&&e[E][w]===null&&a.push({row:E,col:w})}return a}let l=o.color==="w"?-1:1,c=o.color==="w"?6:1,u=(h,p,m=!1,g=!1)=>{if(!this.isValidPos({row:h,col:p}))return!1;let y=e[h][p];return g&&y!==null||m&&(y===null||y.color===o.color)||!m&&!g&&y?.color===o.color?!1:(a.push({row:h,col:p}),y!==null)};if(o.type==="p"){let h=n.row+l;if(this.isValidPos({row:h,col:n.col})&&e[h][n.col]===null){a.push({row:h,col:n.col});let p=n.row+l*2;n.row===c&&this.isValidPos({row:p,col:n.col})&&e[p][n.col]===null&&a.push({row:p,col:n.col})}[[h,n.col-1],[h,n.col+1]].forEach(([p,m])=>{if(this.isValidPos({row:p,col:m})){let g=e[p][m];g&&g.color!==o.color&&a.push({row:p,col:m}),!g&&i&&i.piece.type==="p"&&i.to.row===n.row&&i.to.col===m&&Math.abs(i.from.row-i.to.row)===2&&a.push({row:p,col:m})}})}else{let p={r:[[1,0],[-1,0],[0,1],[0,-1]],b:[[1,1],[1,-1],[-1,1],[-1,-1]],q:[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]],n:[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],k:[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]]}[o.type]||[],m=o.type==="n"||o.type==="k";for(let[g,y]of p){let E=n.row+g,w=n.col+y;for(;this.isValidPos({row:E,col:w});){let I=e[E][w];if(I===null){if(a.push({row:E,col:w}),m)break}else{I.color!==o.color&&a.push({row:E,col:w});break}E+=g,w+=y}}if(s&&o.type==="k"&&!o.hasMoved&&!this.isKingInCheck(e,o.color)){let g=e[n.row][7];g&&g.type==="r"&&!g.hasMoved&&!e[n.row][5]&&!e[n.row][6]&&(this.isSquareAttacked(e,{row:n.row,col:5},o.color)||a.push({row:n.row,col:6}));let y=e[n.row][0];y&&y.type==="r"&&!y.hasMoved&&!e[n.row][1]&&!e[n.row][2]&&!e[n.row][3]&&(this.isSquareAttacked(e,{row:n.row,col:3},o.color)||a.push({row:n.row,col:2}))}}return a}static getLegalMoves(e,n,r="chess",i=null){let s=this.getValidMoves(e,n,r,i);if(r==="checkers"){let a=e[n.row][n.col];if(!a)return[];let l=!1;for(let c=0;c<8;c++){for(let u=0;u<8;u++){let h=e[c][u];if(h&&h.color===a.color&&this.getValidMoves(e,{row:c,col:u},"checkers",i).some(g=>Math.abs(g.row-c)===2)){l=!0;break}}if(l)break}return l?s.filter(c=>Math.abs(c.row-n.row)===2):s}let o=e[n.row][n.col];return o?s.filter(a=>{let l=this.simulateMove(e,n,a);return!this.isKingInCheck(l,o.color)}):[]}static isKingInCheck(e,n){let r=null;for(let i=0;i<8;i++){for(let s=0;s<8;s++){let o=e[i][s];if(o&&o.type==="k"&&o.color===n){r={row:i,col:s};break}}if(r)break}return r?this.isSquareAttacked(e,r,n):!1}static isSquareAttacked(e,n,r){let i=r==="w"?"b":"w";for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=e[s][o];if(a&&a.color===i&&this.getValidMoves(e,{row:s,col:o},"chess",null,!1).some(c=>c.row===n.row&&c.col===n.col))return!0}return!1}static simulateMove(e,n,r){let i=e.map(s=>[...s]);return i[r.row][r.col]=i[n.row][n.col],i[n.row][n.col]=null,i}static isCheckmate(e,n){if(!this.isKingInCheck(e,n))return!1;for(let r=0;r<8;r++)for(let i=0;i<8;i++){let s=e[r][i];if(s&&s.color===n&&this.getLegalMoves(e,{row:r,col:i},"chess").length>0)return!1}return!0}static isStalemate(e,n){if(this.isKingInCheck(e,n))return!1;for(let r=0;r<8;r++)for(let i=0;i<8;i++){let s=e[r][i];if(s&&s.color===n&&this.getLegalMoves(e,{row:r,col:i},"chess").length>0)return!1}return!0}static{this.PIECE_VALUES={p:100,n:320,b:330,r:500,q:900,k:2e4,cm:100,ck:300}}static{this.PAWN_PST=[[0,0,0,0,0,0,0,0],[50,50,50,50,50,50,50,50],[10,10,20,30,30,20,10,10],[5,5,10,25,25,10,5,5],[0,0,0,20,20,0,0,0],[5,-5,-10,0,0,-10,-5,5],[5,10,10,-20,-20,10,10,5],[0,0,0,0,0,0,0,0]]}static{this.CHECKERS_PST=[[0,50,0,50,0,50,0,50],[40,0,40,0,40,0,40,0],[0,30,0,10,0,10,0,30],[20,0,25,0,25,0,20,0],[0,20,0,25,0,25,0,20],[30,0,10,0,10,0,30,0],[0,40,0,40,0,40,0,40],[50,0,50,0,50,0,50,0]]}static{this.KNIGHT_PST=[[-50,-40,-30,-30,-30,-30,-40,-50],[-40,-20,0,0,0,0,-20,-40],[-30,0,10,15,15,10,0,-30],[-30,5,15,20,20,15,5,-30],[-30,0,15,20,20,15,0,-30],[-30,5,10,15,15,10,5,-30],[-40,-20,0,5,5,0,-20,-40],[-50,-40,-30,-30,-30,-30,-40,-50]]}static evaluateBoard(e,n="chess"){let r=0;for(let i=0;i<8;i++)for(let s=0;s<8;s++){let o=e[i][s];if(o){let a=this.PIECE_VALUES[o.type]||0,l=0;if(n==="chess"){let c=o.color==="w"?i:7-i;o.type==="p"&&(l=this.PAWN_PST[c][s]),o.type==="n"&&(l=this.KNIGHT_PST[c][s])}else if(n==="checkers"){let c=o.color==="w"?i:7-i;l=this.CHECKERS_PST[c][s]}o.color==="w"?r+=a+l:r-=a+l}}return r}static getBestMoveLocal(e,n,r,i){let s=null,o=i==="w"?-1/0:1/0,a=this.getAllUciMoves(e,i,n);for(let l of a){let c=this.uciToCoords(l.substring(0,2)),u=this.uciToCoords(l.substring(2,4));if(!c||!u)continue;let h=this.simulateMove(e,c,u),p=this.minimax(h,r-1,-1/0,1/0,i==="b",n);i==="w"?p>o&&(o=p,s=l):p<o&&(o=p,s=l)}return s}static minimax(e,n,r,i,s,o){if(n===0)return this.evaluateBoard(e,o);let a=s?"w":"b",l=this.getAllUciMoves(e,a,o);if(l.length===0)return this.isKingInCheck(e,a)?s?-1e5:1e5:0;if(s){let c=-1/0;for(let u of l){let h=this.uciToCoords(u.substring(0,2)),p=this.uciToCoords(u.substring(2,4)),m=this.minimax(this.simulateMove(e,h,p),n-1,r,i,!1,o);if(c=Math.max(c,m),r=Math.max(r,m),i<=r)break}return c}else{let c=1/0;for(let u of l){let h=this.uciToCoords(u.substring(0,2)),p=this.uciToCoords(u.substring(2,4)),m=this.minimax(this.simulateMove(e,h,p),n-1,r,i,!0,o);if(c=Math.min(c,m),i=Math.min(i,m),i<=r)break}return c}}static getAllUciMoves(e,n,r){let i=[],s=["a","b","c","d","e","f","g","h"];for(let o=0;o<8;o++)for(let a=0;a<8;a++){let l=e[o][a];if(l&&l.color===n){let c={row:o,col:a};this.getLegalMoves(e,c,r).forEach(h=>{i.push(`${s[c.col]}${8-c.row}${s[h.col]}${8-h.row}`)})}}return i}static uciToCoords(e){let r={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7}[e[0]],i=8-parseInt(e[1]);return isNaN(i)||r===void 0?null:{row:i,col:r}}static boardToFEN(e,n){let r="";for(let i=0;i<8;i++){let s=0;for(let o=0;o<8;o++){let a=e[i][o];if(a){s>0&&(r+=s,s=0);let l=a.type;l==="ck"&&(l="k"),l==="cm"&&(l="p"),r+=a.color==="w"?l.toUpperCase():l.toLowerCase()}else s++}s>0&&(r+=s),i<7&&(r+="/")}return r+=` ${n} - - 0 1`,r}};var v4=Object.prototype.toString,y4=t=>v4.call(t)==="[object Error]",w4=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function O_(t){if(!(t&&y4(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:w4.has(n)}function E4(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Pm(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be \u2265 ${n}.`)}}var fd=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function _4(t,e){let n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1,i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function l1(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function C4({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){let s=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(s instanceof fd)throw s.originalError;let o=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,a=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:s,attemptNumber:e,retriesLeft:o,retriesConsumed:n});if(await i.onFailedAttempt(l),l1(r,a)<=0)throw s;let c=await i.shouldConsumeRetry(l),u=l1(r,a);if(u<=0||o<=0)throw s;if(s instanceof TypeError&&!O_(s)){if(c)throw s;return i.signal?.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw s;if(!c)return i.signal?.throwIfAborted(),!1;let h=_4(n,i),p=Math.min(h,u);return i.signal?.throwIfAborted(),p>0&&await new Promise((m,g)=>{let y=()=>{clearTimeout(E),i.signal?.removeEventListener("abort",y),g(i.signal.reason)},E=setTimeout(()=>{i.signal?.removeEventListener("abort",y),m()},p);i.unref&&E.unref?.(),i.signal?.addEventListener("abort",y,{once:!0})}),i.signal?.throwIfAborted(),!0}async function F_(t,e={}){if(e=A({},e),E4(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??=10,e.factor??=2,e.minTimeout??=1e3,e.maxTimeout??=Number.POSITIVE_INFINITY,e.maxRetryTime??=Number.POSITIVE_INFINITY,e.randomize??=!1,e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.shouldConsumeRetry??=()=>!0,Pm("factor",e.factor,{min:0,allowInfinity:!1}),Pm("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Pm("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Pm("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),e.signal?.throwIfAborted();let n=0,r=0,i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{e.signal?.throwIfAborted();let s=await t(n);return e.signal?.throwIfAborted(),s}catch(s){await C4({error:s,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var S4,b4;function x4(){return{geminiUrl:S4,vertexUrl:b4}}function T4(t,e,n,r){var i,s;if(!t?.baseUrl){let o=x4();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}var Mr=class{};function $(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){let o=e[s];if(o.endsWith("[]")){let a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){let l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let u=l[c];f(u,e.slice(s+1),n[c])}else for(let c of l)f(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){let a=o.slice(0,-3);a in t||(t[a]=[{}]);let l=t[a];f(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}let r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;let i=e[r];if(i.endsWith("[]")){let s=i.slice(0,-2);if(s in t){let o=t[s];return Array.isArray(o)?o.map(a=>d(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function I4(t,e){for(let[n,r]of Object.entries(e)){let i=n.split("."),s=r.split("."),o=new Set,a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){let c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}$_(t,i,s,0,o)}}function $_(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;let s=e[r];if(s.endsWith("[]")){let o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(let l of a[o])$_(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(let c of a)l[c]=o[c];for(let[c,u]of Object.entries(l)){let h=[];for(let p of n.slice(r))p==="*"?h.push(c):h.push(p);f(o,h,u)}for(let c of a)delete o[c]}}else{let o=t;s in o&&$_(o[s],e,n,r+1,i)}}function UC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function A4(t){let e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);let r=d(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function D4(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],N4(o)),e}function k4(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],M4(o)),e}function N4(t){let e={},n=d(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>R4(o))),f(e,["generatedVideos"],s)}let r=d(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);let i=d(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function M4(t){let e={},n=d(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>P4(o))),f(e,["generatedVideos"],s)}let r=d(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);let i=d(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function R4(t){let e={},n=d(t,["video"]);return n!=null&&f(e,["video"],U4(n)),e}function P4(t){let e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],$4(n)),e}function L4(t){let e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function O4(t){let e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function F4(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],B4(o)),e}function B4(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function R1(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],V4(o)),e}function V4(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function U4(t){let e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);let r=d(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],UC(r));let i=d(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function $4(t){let e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);let r=d(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],UC(r));let i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}var qo=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(qo||{});var H_=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(H_||{});var P1=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(P1||{});var L1=(function(t){return t.COLLECTION="COLLECTION",t})(L1||{});var pd=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(pd||{});var gd=class{constructor(e){let n={};for(let r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Ho=class{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1,h=[];for(let p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",u=[];for(let h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&u.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if(c?.length!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(u?.length!==0)return(c=u?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(u?.length!==0)return(c=u?.[0])===null||c===void 0?void 0:c.output}},Hm=class{},qm=class{},q_=class{},G_=class{},j_=class{},W_=class{},Gm=class{},jm=class{},Wm=class{},z_=class{};var zm=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,i,s=e;return n?i=k4(s):i=D4(s),Object.assign(r,i),r}},Jm=class{},Ym=class{},Km=class{},Qm=class{},J_=class{},Y_=class{},K_=class{};var Q_=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,s=F4(e);return Object.assign(r,s),r}},X_=class{},Z_=class{},eC=class{},tC=class{};var Xm=class{};var nC=class{get text(){var e,n,r;let i="",s=!1,o=[];for(let a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="",s=[];for(let o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var rC=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var iC=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,s=R1(e);return Object.assign(r,s),r}};function Ie(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function O1(t,e){let n=Ie(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function F1(t){return Array.isArray(t)?t.map(e=>Zm(e)):[Zm(t)]}function Zm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function B1(t){let e=Zm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function V1(t){let e=Zm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function c1(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function U1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>c1(e)):[c1(t)]}function sC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function u1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function d1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Yt(t){if(t==null)throw new Error("ContentUnion is required");return sC(t)?t:{role:"user",parts:U1(t)}}function $C(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let r=Yt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){let n=Yt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Yt(n)):[Yt(e)]}function or(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(u1(t)||d1(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(t)]}let e=[],n=[],r=sC(t[0]);for(let i of t){let s=sC(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(u1(i)||d1(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:U1(n)}),e}function H4(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(qo).includes(n[0].toUpperCase())?n[0].toUpperCase():qo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of n)e.anyOf.push({type:Object.values(qo).includes(r.toUpperCase())?r.toUpperCase():qo.TYPE_UNSPECIFIED})}}function Sl(t){let e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&H4(t.type,e);for(let[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(qo).includes(a.toUpperCase())?a.toUpperCase():qo.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Sl(a);else if(r.includes(o)){let l=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Sl(c))}e[o]=l}else if(i.includes(o)){let l={};for(let[c,u]of Object.entries(a))l[c]=Sl(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function HC(t){return Sl(t)}function qC(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function GC(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Il(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sl(e.response));return t}function Al(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function q4(t,e,n,r=1){let i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Pi(t,e){if(typeof e!="string")throw new Error("name must be a string");return q4(t,e,"cachedContents")}function $1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ss(t){return UC(t)}function G4(t){return t!=null&&typeof t=="object"&&"name"in t}function j4(t){return t!=null&&typeof t=="object"&&"video"in t}function W4(t){return t!=null&&typeof t=="object"&&"uri"in t}function H1(t){var e;let n;if(G4(t)&&(n=t.name),!(W4(t)&&(n=t.uri,n===void 0))&&!(j4(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function q1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function G1(t){for(let e of["models","tunedModels","publisherModels"])if(z4(t,e))return t[e];return[]}function z4(t,e){return t!==null&&typeof t=="object"&&e in t}function J4(t,e={}){let n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Y4(t,e={}){let n=[],r=new Set;for(let i of t){let s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);let o=J4(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function j1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function K4(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function W1(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(let o of i){if(typeof o!="object"||o===null)continue;let l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Dl(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function z1(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Q4(t){let e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);let r=d(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>N6(o))),f(e,["inlinedResponses"],s)}let i=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["inlinedEmbedContentResponses"],s)}return e}function X4(t){let e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);let r=d(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);let i=d(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function Z4(t){let e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);let r=d(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);let i=d(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Um(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);let i=d(t,["metadata","state"]);i!=null&&f(e,["state"],z1(i));let s=d(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);let o=d(t,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);let a=d(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);let l=d(t,["metadata","model"]);l!=null&&f(e,["model"],l);let c=d(t,["metadata","output"]);return c!=null&&f(e,["dest"],Q4(W1(c))),e}function oC(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["displayName"]);r!=null&&f(e,["displayName"],r);let i=d(t,["state"]);i!=null&&f(e,["state"],z1(i));let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);let a=d(t,["startTime"]);a!=null&&f(e,["startTime"],a);let l=d(t,["endTime"]);l!=null&&f(e,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);let u=d(t,["model"]);u!=null&&f(e,["model"],u);let h=d(t,["inputConfig"]);h!=null&&f(e,["src"],e6(h));let p=d(t,["outputConfig"]);p!=null&&f(e,["dest"],X4(W1(p)));let m=d(t,["completionStats"]);return m!=null&&f(e,["completionStats"],m),e}function e6(t){let e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);let r=d(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);let i=d(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function t6(t,e){let n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=d(e,["fileName"]);r!=null&&f(n,["fileName"],r);let i=d(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>k6(t,o))),f(n,["requests","requests"],s)}return n}function n6(t){let e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);let r=d(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);let i=d(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function r6(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function i6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function s6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function o6(t){let e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);let r=d(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],a6(r));let i=d(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);let s=d(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);let o=d(t,["avgLogprobs"]);o!=null&&f(e,["avgLogprobs"],o);let a=d(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);let l=d(t,["index"]);l!=null&&f(e,["index"],l);let c=d(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);let u=d(t,["safetyRatings"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["safetyRatings"],p)}let h=d(t,["urlContextMetadata"]);return h!=null&&f(e,["urlContextMetadata"],h),e}function a6(t){let e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function J1(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>B6(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function l6(t,e){let n={},r=d(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function c6(t,e){let n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);let i=d(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],Z4(K4(i))),n}function f1(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["_url","model"],Ie(t,r));let i=d(e,["src"]);i!=null&&f(n,["batch","inputConfig"],t6(t,j1(t,i)));let s=d(e,["config"]);return s!=null&&l6(s,n),n}function u6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],Ie(t,r));let i=d(e,["src"]);i!=null&&f(n,["inputConfig"],n6(j1(t,i)));let s=d(e,["config"]);return s!=null&&c6(s,n),n}function d6(t,e){let n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function f6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["_url","model"],Ie(t,r));let i=d(e,["src"]);i!=null&&f(n,["batch","inputConfig"],w6(t,i));let s=d(e,["config"]);return s!=null&&d6(s,n),n}function h6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function p6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function m6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function g6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function v6(t,e){let n={},r=d(e,["contents"]);if(r!=null){let s=$C(t,r);Array.isArray(s)&&(s=s.map(o=>o)),f(n,["requests[]","request","content"],s)}let i=d(e,["config"]);return i!=null&&(f(n,["_self"],y6(i,n)),I4(n,{"requests[].*":"requests[].request.*"})),n}function y6(t,e){let n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);let i=d(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);let s=d(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function w6(t,e){let n={},r=d(e,["fileName"]);r!=null&&f(n,["file_name"],r);let i=d(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],v6(t,i)),n}function E6(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function _6(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C6(t){let e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);let r=d(t,["mode"]);if(r!=null&&f(e,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S6(t,e,n){let r={},i=d(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],J1(Yt(i)));let s=d(e,["temperature"]);s!=null&&f(r,["temperature"],s);let o=d(e,["topP"]);o!=null&&f(r,["topP"],o);let a=d(e,["topK"]);a!=null&&f(r,["topK"],a);let l=d(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);let c=d(e,["maxOutputTokens"]);c!=null&&f(r,["maxOutputTokens"],c);let u=d(e,["stopSequences"]);u!=null&&f(r,["stopSequences"],u);let h=d(e,["responseLogprobs"]);h!=null&&f(r,["responseLogprobs"],h);let p=d(e,["logprobs"]);p!=null&&f(r,["logprobs"],p);let m=d(e,["presencePenalty"]);m!=null&&f(r,["presencePenalty"],m);let g=d(e,["frequencyPenalty"]);g!=null&&f(r,["frequencyPenalty"],g);let y=d(e,["seed"]);y!=null&&f(r,["seed"],y);let E=d(e,["responseMimeType"]);E!=null&&f(r,["responseMimeType"],E);let w=d(e,["responseSchema"]);w!=null&&f(r,["responseSchema"],HC(w));let I=d(e,["responseJsonSchema"]);if(I!=null&&f(r,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let D=d(e,["safetySettings"]);if(n!==void 0&&D!=null){let mt=D;Array.isArray(mt)&&(mt=mt.map(bt=>V6(bt))),f(n,["safetySettings"],mt)}let b=d(e,["tools"]);if(n!==void 0&&b!=null){let mt=Al(b);Array.isArray(mt)&&(mt=mt.map(bt=>$6(Il(bt)))),f(n,["tools"],mt)}let L=d(e,["toolConfig"]);if(n!==void 0&&L!=null&&f(n,["toolConfig"],U6(L)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let M=d(e,["cachedContent"]);n!==void 0&&M!=null&&f(n,["cachedContent"],Pi(t,M));let q=d(e,["responseModalities"]);q!=null&&f(r,["responseModalities"],q);let z=d(e,["mediaResolution"]);z!=null&&f(r,["mediaResolution"],z);let re=d(e,["speechConfig"]);if(re!=null&&f(r,["speechConfig"],qC(re)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let le=d(e,["thinkingConfig"]);le!=null&&f(r,["thinkingConfig"],le);let nt=d(e,["imageConfig"]);nt!=null&&f(r,["imageConfig"],D6(nt));let Vt=d(e,["enableEnhancedCivicAnswers"]);if(Vt!=null&&f(r,["enableEnhancedCivicAnswers"],Vt),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function b6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>o6(c))),f(e,["candidates"],l)}let i=d(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);let s=d(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);let o=d(t,["responseId"]);o!=null&&f(e,["responseId"],o);let a=d(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function x6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function T6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Dl(t,r)),n}function I6(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function A6(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function D6(t){let e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);let r=d(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function k6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["request","model"],Ie(t,r));let i=d(e,["contents"]);if(i!=null){let a=or(i);Array.isArray(a)&&(a=a.map(l=>J1(l))),f(n,["request","contents"],a)}let s=d(e,["metadata"]);s!=null&&f(n,["metadata"],s);let o=d(e,["config"]);return o!=null&&f(n,["request","generationConfig"],S6(t,o,d(n,["request"],{}))),n}function N6(t){let e={},n=d(t,["response"]);n!=null&&f(e,["response"],b6(n));let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["error"]);return i!=null&&f(e,["error"],i),e}function M6(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function R6(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);let s=d(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function P6(t){let e={},n=d(t,["config"]);return n!=null&&M6(n,e),e}function L6(t){let e={},n=d(t,["config"]);return n!=null&&R6(n,e),e}function O6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Um(o))),f(e,["batchJobs"],s)}return e}function F6(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>oC(o))),f(e,["batchJobs"],s)}return e}function B6(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],E6(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],_6(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],r6(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function V6(t){let e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=d(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function U6(t){let e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);let r=d(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],C6(r)),e}function $6(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],I6(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],A6(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}var bs=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(bs||{}),Ri=class{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var aC=class extends Mr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ri(bs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=f1(this.apiClient,e),r=n._url,i=$("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let u of l){let h=Object.assign({},u);if(h.systemInstruction){let p=h.systemInstruction;delete h.systemInstruction;let m=h.request;m.systemInstruction=p,h.request=m}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){let s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=u6(this.apiClient,e);return a=$("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>oC(u))}else{let c=f1(this.apiClient,e);return a=$("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Um(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=f6(this.apiClient,e);return s=$("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>Um(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=T6(this.apiClient,e);return a=$("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>oC(u))}else{let c=x6(this.apiClient,e);return a=$("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Um(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let l=s6(this.apiClient,e);o=$("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=i6(this.apiClient,e);o=$("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=L6(e);return a=$("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=F6(u),p=new Xm;return Object.assign(p,h),p})}else{let c=P6(e);return a=$("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=O6(u),p=new Xm;return Object.assign(p,h),p})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=p6(this.apiClient,e);return a=$("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>g6(u))}else{let c=h6(this.apiClient,e);return a=$("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>m6(u))}}};function H6(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function h1(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>dj(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function q6(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);let s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);let o=d(t,["contents"]);if(e!==void 0&&o!=null){let u=or(o);Array.isArray(u)&&(u=u.map(h=>h1(h))),f(e,["contents"],u)}let a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],h1(Yt(a)));let l=d(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>hj(h))),f(e,["tools"],u)}let c=d(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],fj(c)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function G6(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);let s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);let o=d(t,["contents"]);if(e!==void 0&&o!=null){let h=or(o);Array.isArray(h)&&(h=h.map(p=>p)),f(e,["contents"],h)}let a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Yt(a));let l=d(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>pj(p))),f(e,["tools"],h)}let c=d(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);let u=d(t,["kmsKeyName"]);return e!==void 0&&u!=null&&f(e,["encryption_spec","kmsKeyName"],u),n}function j6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],O1(t,r));let i=d(e,["config"]);return i!=null&&q6(i,n),n}function W6(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["model"],O1(t,r));let i=d(e,["config"]);return i!=null&&G6(i,n),n}function z6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Pi(t,r)),n}function J6(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Pi(t,r)),n}function Y6(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function K6(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Q6(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function X6(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Z6(t){let e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);let r=d(t,["mode"]);if(r!=null&&f(e,["mode"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ej(t){let e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["parameters"]);i!=null&&f(e,["parameters"],i);let s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);let o=d(t,["response"]);o!=null&&f(e,["response"],o);let a=d(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Pi(t,r)),n}function nj(t,e){let n={},r=d(e,["name"]);return r!=null&&f(n,["_url","name"],Pi(t,r)),n}function rj(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function ij(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function sj(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function oj(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function aj(t){let e={},n=d(t,["config"]);return n!=null&&sj(n,e),e}function lj(t){let e={},n=d(t,["config"]);return n!=null&&oj(n,e),e}function cj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function uj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["cachedContents"],s)}return e}function dj(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],Q6(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],X6(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],H6(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function fj(t){let e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);let r=d(t,["functionCallingConfig"]);return r!=null&&f(e,["functionCallingConfig"],Z6(r)),e}function hj(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],rj(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],ij(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function pj(t){let e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);let r=d(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=d(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);let s=d(t,["enterpriseWebSearch"]);s!=null&&f(e,["enterpriseWebSearch"],s);let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>ej(p))),f(e,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);let l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);let c=d(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function mj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function gj(t,e){let n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);let i=d(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function vj(t,e){let n={},r=d(e,["name"]);r!=null&&f(n,["_url","name"],Pi(t,r));let i=d(e,["config"]);return i!=null&&mj(i,n),n}function yj(t,e){let n={},r=d(e,["name"]);r!=null&&f(n,["_url","name"],Pi(t,r));let i=d(e,["config"]);return i!=null&&gj(i,n),n}var lC=class extends Mr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ri(bs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=W6(this.apiClient,e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=j6(this.apiClient,e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=nj(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=tj(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=J6(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=K6(u),p=new Km;return Object.assign(p,h),p})}else{let c=z6(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=Y6(u),p=new Km;return Object.assign(p,h),p})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=yj(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{let c=vj(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=lj(e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=uj(u),p=new Qm;return Object.assign(p,h),p})}else{let c=aj(e);return a=$("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=cj(u),p=new Qm;return Object.assign(p,h),p})}}};function eg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function p1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(t){return this instanceof pe?(this.v=t,this):new pe(t)}function kr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(g){return Promise.resolve(g).then(m,h)}}function a(m,g){r[m]&&(i[m]=function(y){return new Promise(function(E,w){s.push([m,y,E,w])>1||l(m,y)})},g&&(i[m]=g(i[m])))}function l(m,g){try{c(r[m](g))}catch(y){p(s[0][3],y)}}function c(m){m.value instanceof pe?Promise.resolve(m.value.v).then(u,h):p(s[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function p(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Nr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof p1=="function"?p1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function wj(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Y1(n)}function Y1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ej(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function m1(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{let i=[],s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!Y1(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}var cC=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new uC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},uC=class{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Ej(s)}async sendMessage(e){var n;await this.sendPromise;let r=Yt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;let l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length,p=[];u!=null&&(p=(a=u.slice(h))!==null&&a!==void 0?a:[]);let m=c?[c]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;let r=Yt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){let n=e?m1(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return kr(this,arguments,function*(){var i,s,o,a,l,c;let u=[];try{for(var h=!0,p=Nr(e),m;m=yield pe(p.next()),i=m.done,!i;h=!0){a=m.value,h=!1;let g=a;if(wj(g)){let y=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;y!==void 0&&u.push(y)}yield yield pe(g)}}catch(g){s={error:g}}finally{try{!h&&!i&&(o=p.return)&&(yield pe(o.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...m1(r)):this.history.push(e),this.history.push(...i)}};var vd=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function _j(t){let e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function Cj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Sj(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],H1(n)),e}function bj(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function xj(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],H1(n)),e}function Tj(t){let e={},n=d(t,["uris"]);return n!=null&&f(e,["uris"],n),e}function Ij(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Aj(t){let e={},n=d(t,["config"]);return n!=null&&Ij(n,e),e}function Dj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["files"],s)}return e}function kj(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["files"],i)}return e}var dC=class extends Mr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ri(bs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Aj(e);return s=$("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=Dj(l),u=new X_;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=_j(e);return s=$("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Cj(l),u=new Z_;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=xj(e);return s=$("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Sj(e);return s=$("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=bj(l),u=new eC;return Object.assign(u,c),u})}}async registerFilesInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Tj(e);return s=$("files:register",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=kj(l),u=new tC;return Object.assign(u,c),u})}}};function $m(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Nj(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>zj(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function Mj(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Rj(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Pj(t){let e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);let r=d(t,["name"]);r!=null&&f(e,["name"],r);let i=d(t,["parameters"]);i!=null&&f(e,["parameters"],i);let s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);let o=d(t,["response"]);o!=null&&f(e,["response"],o);let a=d(t,["responseJsonSchema"]);if(a!=null&&f(e,["responseJsonSchema"],a),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Lj(t){let e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);let r=d(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);let i=d(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);let s=d(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);let o=d(t,["enableAffectiveDialog"]);o!=null&&f(e,["enableAffectiveDialog"],o);let a=d(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);let l=d(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);let c=d(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);let u=d(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);let h=d(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);let p=d(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);let m=d(t,["responseMimeType"]);m!=null&&f(e,["responseMimeType"],m);let g=d(t,["responseModalities"]);g!=null&&f(e,["responseModalities"],g);let y=d(t,["responseSchema"]);y!=null&&f(e,["responseSchema"],y);let E=d(t,["routingConfig"]);E!=null&&f(e,["routingConfig"],E);let w=d(t,["seed"]);w!=null&&f(e,["seed"],w);let I=d(t,["speechConfig"]);I!=null&&f(e,["speechConfig"],I);let D=d(t,["stopSequences"]);D!=null&&f(e,["stopSequences"],D);let b=d(t,["temperature"]);b!=null&&f(e,["temperature"],b);let L=d(t,["thinkingConfig"]);L!=null&&f(e,["thinkingConfig"],L);let M=d(t,["topK"]);M!=null&&f(e,["topK"],M);let q=d(t,["topP"]);if(q!=null&&f(e,["topP"],q),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Oj(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Fj(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Bj(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],GC(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Nj(Yt(g)));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let M=Al(y);Array.isArray(M)&&(M=M.map(q=>Yj(Il(q)))),f(e,["setup","tools"],M)}let E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&f(e,["setup","sessionResumption"],Jj(E));let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);let D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);let b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);let L=d(t,["proactivity"]);if(e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Vj(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],Lj(r));let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],GC(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Yt(g));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let q=Al(y);Array.isArray(q)&&(q=q.map(z=>Kj(Il(z)))),f(e,["setup","tools"],q)}let E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&f(e,["setup","sessionResumption"],E);let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);let D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);let b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);let L=d(t,["proactivity"]);e!==void 0&&L!=null&&f(e,["setup","proactivity"],L);let M=d(t,["explicitVadSignal"]);return e!==void 0&&M!=null&&f(e,["setup","explicitVadSignal"],M),n}function Uj(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],Ie(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],Bj(i,n)),n}function $j(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],Ie(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],Vj(i,n)),n}function Hj(t){let e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function qj(t){let e={},n=d(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function Gj(t){let e={},n=d(t,["media"]);if(n!=null){let c=F1(n);Array.isArray(c)&&(c=c.map(u=>$m(u))),f(e,["mediaChunks"],c)}let r=d(t,["audio"]);r!=null&&f(e,["audio"],$m(V1(r)));let i=d(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);let s=d(t,["video"]);s!=null&&f(e,["video"],$m(B1(s)));let o=d(t,["text"]);o!=null&&f(e,["text"],o);let a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function jj(t){let e={},n=d(t,["media"]);if(n!=null){let c=F1(n);Array.isArray(c)&&(c=c.map(u=>u)),f(e,["mediaChunks"],c)}let r=d(t,["audio"]);r!=null&&f(e,["audio"],V1(r));let i=d(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);let s=d(t,["video"]);s!=null&&f(e,["video"],B1(s));let o=d(t,["text"]);o!=null&&f(e,["text"],o);let a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);let l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function Wj(t){let e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);let r=d(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);let i=d(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);let s=d(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);let o=d(t,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],Qj(o));let a=d(t,["goAway"]);a!=null&&f(e,["goAway"],a);let l=d(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);let c=d(t,["voiceActivityDetectionSignal"]);c!=null&&f(e,["voiceActivityDetectionSignal"],c);let u=d(t,["voiceActivity"]);return u!=null&&f(e,["voiceActivity"],Xj(u)),e}function zj(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],Mj(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],Rj(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],$m(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function Jj(t){let e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Yj(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],Oj(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Fj(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Kj(t){let e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);let r=d(t,["computerUse"]);if(r!=null&&f(e,["computerUse"],r),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=d(t,["codeExecution"]);i!=null&&f(e,["codeExecution"],i);let s=d(t,["enterpriseWebSearch"]);s!=null&&f(e,["enterpriseWebSearch"],s);let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>Pj(p))),f(e,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);let l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l);let c=d(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function Qj(t){let e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);let r=d(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);let i=d(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);let s=d(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);let o=d(t,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);let a=d(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);let l=d(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["promptTokensDetails"],m)}let c=d(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["cacheTokensDetails"],m)}let u=d(t,["candidatesTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["responseTokensDetails"],m)}let h=d(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),f(e,["toolUsePromptTokensDetails"],m)}let p=d(t,["trafficType"]);return p!=null&&f(e,["trafficType"],p),e}function Xj(t){let e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}function Zj(t,e){let n={},r=d(t,["data"]);if(r!=null&&f(n,["data"],r),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function e9(t,e){let n={},r=d(t,["content"]);r!=null&&f(n,["content"],r);let i=d(t,["citationMetadata"]);i!=null&&f(n,["citationMetadata"],t9(i));let s=d(t,["tokenCount"]);s!=null&&f(n,["tokenCount"],s);let o=d(t,["finishReason"]);o!=null&&f(n,["finishReason"],o);let a=d(t,["avgLogprobs"]);a!=null&&f(n,["avgLogprobs"],a);let l=d(t,["groundingMetadata"]);l!=null&&f(n,["groundingMetadata"],l);let c=d(t,["index"]);c!=null&&f(n,["index"],c);let u=d(t,["logprobsResult"]);u!=null&&f(n,["logprobsResult"],u);let h=d(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),f(n,["safetyRatings"],m)}let p=d(t,["urlContextMetadata"]);return p!=null&&f(n,["urlContextMetadata"],p),n}function t9(t,e){let n={},r=d(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(n,["citations"],i)}return n}function n9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let o=or(s);Array.isArray(o)&&(o=o.map(a=>a)),f(r,["contents"],o)}return r}function r9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(n,["tokensInfo"],s)}return n}function i9(t,e){let n={},r=d(t,["values"]);r!=null&&f(n,["values"],r);let i=d(t,["statistics"]);return i!=null&&f(n,["statistics"],s9(i)),n}function s9(t,e){let n={},r=d(t,["truncated"]);r!=null&&f(n,["truncated"],r);let i=d(t,["token_count"]);return i!=null&&f(n,["tokenCount"],i),n}function mg(t,e){let n={},r=d(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>pW(o))),f(n,["parts"],s)}let i=d(t,["role"]);return i!=null&&f(n,["role"],i),n}function o9(t,e){let n={},r=d(t,["controlType"]);r!=null&&f(n,["controlType"],r);let i=d(t,["enableControlImageComputation"]);return i!=null&&f(n,["computeControl"],i),n}function a9(t,e){let n={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function l9(t,e,n){let r={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Yt(i));let s=d(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Z1(l))),f(e,["tools"],a)}let o=d(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],Z9(o)),r}function c9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let a=or(s);Array.isArray(a)&&(a=a.map(l=>mg(l))),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&a9(o),r}function u9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let a=or(s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&l9(o,r),r}function d9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["totalTokens"]);i!=null&&f(n,["totalTokens"],i);let s=d(t,["cachedContentTokenCount"]);return s!=null&&f(n,["cachedContentTokenCount"],s),n}function f9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["totalTokens"]);return i!=null&&f(n,["totalTokens"],i),n}function h9(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],Ie(t,i)),r}function p9(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],Ie(t,i)),r}function m9(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function g9(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function v9(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);let o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);let l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);let c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);let g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);let y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);let E=d(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E);let w=d(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);let I=d(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);let D=d(t,["editMode"]);e!==void 0&&D!=null&&f(e,["parameters","editMode"],D);let b=d(t,["baseSteps"]);return e!==void 0&&b!=null&&f(e,["parameters","editConfig","baseSteps"],b),r}function y9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>EW(c))),f(r,["instances[0]","referenceImages"],l)}let a=d(e,["config"]);return a!=null&&v9(a,r),r}function w9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>gg(o))),f(n,["generatedImages"],s)}return n}function E9(t,e,n){let r={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);let s=d(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);let o=d(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function _9(t,e,n){let r={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);let s=d(t,["title"]);e!==void 0&&s!=null&&f(e,["instances[]","title"],s);let o=d(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);let a=d(t,["mimeType"]);e!==void 0&&a!=null&&f(e,["instances[]","mimeType"],a);let l=d(t,["autoTruncate"]);return e!==void 0&&l!=null&&f(e,["parameters","autoTruncate"],l),r}function C9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let l=$C(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(r,["requests[]","content"],l)}let o=d(e,["config"]);o!=null&&E9(o,r);let a=d(e,["model"]);return a!==void 0&&f(r,["requests[]","model"],Ie(t,a)),r}function S9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let a=$C(t,s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["instances[]","content"],a)}let o=d(e,["config"]);return o!=null&&_9(o,r),r}function b9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),f(n,["embeddings"],o)}let s=d(t,["metadata"]);return s!=null&&f(n,["metadata"],s),n}function x9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>i9(a))),f(n,["embeddings"],o)}let s=d(t,["metadata"]);return s!=null&&f(n,["metadata"],s),n}function T9(t,e){let n={},r=d(t,["endpoint"]);r!=null&&f(n,["name"],r);let i=d(t,["deployedModelId"]);return i!=null&&f(n,["deployedModelId"],i),n}function I9(t,e){let n={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["fileUri"]);r!=null&&f(n,["fileUri"],r);let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function A9(t,e){let n={},r=d(t,["id"]);r!=null&&f(n,["id"],r);let i=d(t,["args"]);i!=null&&f(n,["args"],i);let s=d(t,["name"]);if(s!=null&&f(n,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function D9(t,e){let n={},r=d(t,["allowedFunctionNames"]);r!=null&&f(n,["allowedFunctionNames"],r);let i=d(t,["mode"]);if(i!=null&&f(n,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function k9(t,e){let n={},r=d(t,["description"]);r!=null&&f(n,["description"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["parameters"]);s!=null&&f(n,["parameters"],s);let o=d(t,["parametersJsonSchema"]);o!=null&&f(n,["parametersJsonSchema"],o);let a=d(t,["response"]);a!=null&&f(n,["response"],a);let l=d(t,["responseJsonSchema"]);if(l!=null&&f(n,["responseJsonSchema"],l),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function N9(t,e,n,r){let i={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],mg(Yt(s)));let o=d(e,["temperature"]);o!=null&&f(i,["temperature"],o);let a=d(e,["topP"]);a!=null&&f(i,["topP"],a);let l=d(e,["topK"]);l!=null&&f(i,["topK"],l);let c=d(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);let u=d(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);let h=d(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);let p=d(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=d(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);let g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);let y=d(e,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);let E=d(e,["seed"]);E!=null&&f(i,["seed"],E);let w=d(e,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);let I=d(e,["responseSchema"]);I!=null&&f(i,["responseSchema"],HC(I));let D=d(e,["responseJsonSchema"]);if(D!=null&&f(i,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let b=d(e,["safetySettings"]);if(n!==void 0&&b!=null){let bt=b;Array.isArray(bt)&&(bt=bt.map(Bi=>_W(Bi))),f(n,["safetySettings"],bt)}let L=d(e,["tools"]);if(n!==void 0&&L!=null){let bt=Al(L);Array.isArray(bt)&&(bt=bt.map(Bi=>AW(Il(Bi)))),f(n,["tools"],bt)}let M=d(e,["toolConfig"]);if(n!==void 0&&M!=null&&f(n,["toolConfig"],IW(M)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let q=d(e,["cachedContent"]);n!==void 0&&q!=null&&f(n,["cachedContent"],Pi(t,q));let z=d(e,["responseModalities"]);z!=null&&f(i,["responseModalities"],z);let re=d(e,["mediaResolution"]);re!=null&&f(i,["mediaResolution"],re);let le=d(e,["speechConfig"]);if(le!=null&&f(i,["speechConfig"],qC(le)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let nt=d(e,["thinkingConfig"]);nt!=null&&f(i,["thinkingConfig"],nt);let Vt=d(e,["imageConfig"]);Vt!=null&&f(i,["imageConfig"],iW(Vt));let mt=d(e,["enableEnhancedCivicAnswers"]);if(mt!=null&&f(i,["enableEnhancedCivicAnswers"],mt),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function M9(t,e,n,r){let i={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],Yt(s));let o=d(e,["temperature"]);o!=null&&f(i,["temperature"],o);let a=d(e,["topP"]);a!=null&&f(i,["topP"],a);let l=d(e,["topK"]);l!=null&&f(i,["topK"],l);let c=d(e,["candidateCount"]);c!=null&&f(i,["candidateCount"],c);let u=d(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);let h=d(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);let p=d(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=d(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);let g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);let y=d(e,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);let E=d(e,["seed"]);E!=null&&f(i,["seed"],E);let w=d(e,["responseMimeType"]);w!=null&&f(i,["responseMimeType"],w);let I=d(e,["responseSchema"]);I!=null&&f(i,["responseSchema"],HC(I));let D=d(e,["responseJsonSchema"]);D!=null&&f(i,["responseJsonSchema"],D);let b=d(e,["routingConfig"]);b!=null&&f(i,["routingConfig"],b);let L=d(e,["modelSelectionConfig"]);L!=null&&f(i,["modelConfig"],L);let M=d(e,["safetySettings"]);if(n!==void 0&&M!=null){let ur=M;Array.isArray(ur)&&(ur=ur.map(Gl=>Gl)),f(n,["safetySettings"],ur)}let q=d(e,["tools"]);if(n!==void 0&&q!=null){let ur=Al(q);Array.isArray(ur)&&(ur=ur.map(Gl=>Z1(Il(Gl)))),f(n,["tools"],ur)}let z=d(e,["toolConfig"]);n!==void 0&&z!=null&&f(n,["toolConfig"],z);let re=d(e,["labels"]);n!==void 0&&re!=null&&f(n,["labels"],re);let le=d(e,["cachedContent"]);n!==void 0&&le!=null&&f(n,["cachedContent"],Pi(t,le));let nt=d(e,["responseModalities"]);nt!=null&&f(i,["responseModalities"],nt);let Vt=d(e,["mediaResolution"]);Vt!=null&&f(i,["mediaResolution"],Vt);let mt=d(e,["speechConfig"]);mt!=null&&f(i,["speechConfig"],qC(mt));let bt=d(e,["audioTimestamp"]);bt!=null&&f(i,["audioTimestamp"],bt);let Bi=d(e,["thinkingConfig"]);Bi!=null&&f(i,["thinkingConfig"],Bi);let Jd=d(e,["imageConfig"]);if(Jd!=null&&f(i,["imageConfig"],sW(Jd)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let ov=d(e,["modelArmorConfig"]);return n!==void 0&&ov!=null&&f(n,["modelArmorConfig"],ov),i}function g1(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let a=or(s);Array.isArray(a)&&(a=a.map(l=>mg(l))),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&f(r,["generationConfig"],N9(t,o,r)),r}function v1(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["contents"]);if(s!=null){let a=or(s);Array.isArray(a)&&(a=a.map(l=>l)),f(r,["contents"],a)}let o=d(e,["config"]);return o!=null&&f(r,["generationConfig"],M9(t,o,r)),r}function y1(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>e9(u))),f(n,["candidates"],c)}let s=d(t,["modelVersion"]);s!=null&&f(n,["modelVersion"],s);let o=d(t,["promptFeedback"]);o!=null&&f(n,["promptFeedback"],o);let a=d(t,["responseId"]);a!=null&&f(n,["responseId"],a);let l=d(t,["usageMetadata"]);return l!=null&&f(n,["usageMetadata"],l),n}function w1(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>h)),f(n,["candidates"],u)}let s=d(t,["createTime"]);s!=null&&f(n,["createTime"],s);let o=d(t,["modelVersion"]);o!=null&&f(n,["modelVersion"],o);let a=d(t,["promptFeedback"]);a!=null&&f(n,["promptFeedback"],a);let l=d(t,["responseId"]);l!=null&&f(n,["responseId"],l);let c=d(t,["usageMetadata"]);return c!=null&&f(n,["usageMetadata"],c),n}function R9(t,e,n){let r={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);let o=d(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);let l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);let c=d(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&f(e,["parameters","includeSafetyAttributes"],c);let u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);let h=d(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);let p=d(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);let m=d(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let g=d(t,["imageSize"]);if(e!==void 0&&g!=null&&f(e,["parameters","sampleImageSize"],g),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function P9(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);let o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);let l=d(t,["guidanceScale"]);e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l);let c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);let m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);let g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);let y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);let E=d(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E);let w=d(t,["addWatermark"]);e!==void 0&&w!=null&&f(e,["parameters","addWatermark"],w);let I=d(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);let D=d(t,["imageSize"]);e!==void 0&&D!=null&&f(e,["parameters","sampleImageSize"],D);let b=d(t,["enhancePrompt"]);return e!==void 0&&b!=null&&f(e,["parameters","enhancePrompt"],b),r}function L9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["config"]);return o!=null&&R9(o,r),r}function O9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["config"]);return o!=null&&P9(o,r),r}function F9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Y9(a))),f(n,["generatedImages"],o)}let s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&f(n,["positivePromptSafetyAttributes"],Q1(s)),n}function B9(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gg(a))),f(n,["generatedImages"],o)}let s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&f(n,["positivePromptSafetyAttributes"],X1(s)),n}function V9(t,e,n){let r={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let s=d(t,["durationSeconds"]);if(e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);let a=d(t,["resolution"]);e!==void 0&&a!=null&&f(e,["parameters","resolution"],a);let l=d(t,["personGeneration"]);if(e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=d(t,["negativePrompt"]);e!==void 0&&c!=null&&f(e,["parameters","negativePrompt"],c);let u=d(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let h=d(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],vg(h));let p=d(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>$W(g))),f(e,["instances[0]","referenceImages"],m)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function U9(t,e,n){let r={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);let o=d(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);let a=d(t,["durationSeconds"]);e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a);let l=d(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);let c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);let u=d(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);let h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);let p=d(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);let m=d(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);let g=d(t,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);let y=d(t,["generateAudio"]);e!==void 0&&y!=null&&f(e,["parameters","generateAudio"],y);let E=d(t,["lastFrame"]);e!==void 0&&E!=null&&f(e,["instances[0]","lastFrame"],Rr(E));let w=d(t,["referenceImages"]);if(e!==void 0&&w!=null){let b=w;Array.isArray(b)&&(b=b.map(L=>HW(L))),f(e,["instances[0]","referenceImages"],b)}let I=d(t,["mask"]);e!==void 0&&I!=null&&f(e,["instances[0]","mask"],UW(I));let D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&f(e,["parameters","compressionQuality"],D),r}function $9(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["metadata"]);i!=null&&f(n,["metadata"],i);let s=d(t,["done"]);s!=null&&f(n,["done"],s);let o=d(t,["error"]);o!=null&&f(n,["error"],o);let a=d(t,["response","generateVideoResponse"]);return a!=null&&f(n,["response"],j9(a)),n}function H9(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["metadata"]);i!=null&&f(n,["metadata"],i);let s=d(t,["done"]);s!=null&&f(n,["done"],s);let o=d(t,["error"]);o!=null&&f(n,["error"],o);let a=d(t,["response"]);return a!=null&&f(n,["response"],W9(a)),n}function q9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["image"]);o!=null&&f(r,["instances[0]","image"],vg(o));let a=d(e,["video"]);a!=null&&f(r,["instances[0]","video"],eN(a));let l=d(e,["source"]);l!=null&&z9(l,r);let c=d(e,["config"]);return c!=null&&V9(c,r),r}function G9(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["prompt"]);s!=null&&f(r,["instances[0]","prompt"],s);let o=d(e,["image"]);o!=null&&f(r,["instances[0]","image"],Rr(o));let a=d(e,["video"]);a!=null&&f(r,["instances[0]","video"],tN(a));let l=d(e,["source"]);l!=null&&J9(l,r);let c=d(e,["config"]);return c!=null&&U9(c,r),r}function j9(t,e){let n={},r=d(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Q9(a))),f(n,["generatedVideos"],o)}let i=d(t,["raiMediaFilteredCount"]);i!=null&&f(n,["raiMediaFilteredCount"],i);let s=d(t,["raiMediaFilteredReasons"]);return s!=null&&f(n,["raiMediaFilteredReasons"],s),n}function W9(t,e){let n={},r=d(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>X9(a))),f(n,["generatedVideos"],o)}let i=d(t,["raiMediaFilteredCount"]);i!=null&&f(n,["raiMediaFilteredCount"],i);let s=d(t,["raiMediaFilteredReasons"]);return s!=null&&f(n,["raiMediaFilteredReasons"],s),n}function z9(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],vg(s));let o=d(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],eN(o)),r}function J9(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Rr(s));let o=d(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],tN(o)),r}function Y9(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["image"],oW(r));let i=d(t,["raiFilteredReason"]);i!=null&&f(n,["raiFilteredReason"],i);let s=d(t,["_self"]);return s!=null&&f(n,["safetyAttributes"],Q1(s)),n}function gg(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["image"],K1(r));let i=d(t,["raiFilteredReason"]);i!=null&&f(n,["raiFilteredReason"],i);let s=d(t,["_self"]);s!=null&&f(n,["safetyAttributes"],X1(s));let o=d(t,["prompt"]);return o!=null&&f(n,["enhancedPrompt"],o),n}function K9(t,e){let n={},r=d(t,["_self"]);r!=null&&f(n,["mask"],K1(r));let i=d(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(n,["labels"],s)}return n}function Q9(t,e){let n={},r=d(t,["video"]);return r!=null&&f(n,["video"],BW(r)),n}function X9(t,e){let n={},r=d(t,["_self"]);return r!=null&&f(n,["video"],VW(r)),n}function Z9(t,e){let n={},r=d(t,["modelSelectionConfig"]);r!=null&&f(n,["modelConfig"],r);let i=d(t,["responseJsonSchema"]);i!=null&&f(n,["responseJsonSchema"],i);let s=d(t,["audioTimestamp"]);s!=null&&f(n,["audioTimestamp"],s);let o=d(t,["candidateCount"]);o!=null&&f(n,["candidateCount"],o);let a=d(t,["enableAffectiveDialog"]);a!=null&&f(n,["enableAffectiveDialog"],a);let l=d(t,["frequencyPenalty"]);l!=null&&f(n,["frequencyPenalty"],l);let c=d(t,["logprobs"]);c!=null&&f(n,["logprobs"],c);let u=d(t,["maxOutputTokens"]);u!=null&&f(n,["maxOutputTokens"],u);let h=d(t,["mediaResolution"]);h!=null&&f(n,["mediaResolution"],h);let p=d(t,["presencePenalty"]);p!=null&&f(n,["presencePenalty"],p);let m=d(t,["responseLogprobs"]);m!=null&&f(n,["responseLogprobs"],m);let g=d(t,["responseMimeType"]);g!=null&&f(n,["responseMimeType"],g);let y=d(t,["responseModalities"]);y!=null&&f(n,["responseModalities"],y);let E=d(t,["responseSchema"]);E!=null&&f(n,["responseSchema"],E);let w=d(t,["routingConfig"]);w!=null&&f(n,["routingConfig"],w);let I=d(t,["seed"]);I!=null&&f(n,["seed"],I);let D=d(t,["speechConfig"]);D!=null&&f(n,["speechConfig"],D);let b=d(t,["stopSequences"]);b!=null&&f(n,["stopSequences"],b);let L=d(t,["temperature"]);L!=null&&f(n,["temperature"],L);let M=d(t,["thinkingConfig"]);M!=null&&f(n,["thinkingConfig"],M);let q=d(t,["topK"]);q!=null&&f(n,["topK"],q);let z=d(t,["topP"]);if(z!=null&&f(n,["topP"],z),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function eW(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],Ie(t,i)),r}function tW(t,e,n){let r={},i=d(e,["model"]);return i!=null&&f(r,["_url","name"],Ie(t,i)),r}function nW(t,e){let n={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=d(t,["enableWidget"]);return r!=null&&f(n,["enableWidget"],r),n}function rW(t,e){let n={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=d(t,["timeRangeFilter"]);return r!=null&&f(n,["timeRangeFilter"],r),n}function iW(t,e){let n={},r=d(t,["aspectRatio"]);r!=null&&f(n,["aspectRatio"],r);let i=d(t,["imageSize"]);if(i!=null&&f(n,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function sW(t,e){let n={},r=d(t,["aspectRatio"]);r!=null&&f(n,["aspectRatio"],r);let i=d(t,["imageSize"]);i!=null&&f(n,["imageSize"],i);let s=d(t,["personGeneration"]);s!=null&&f(n,["personGeneration"],s);let o=d(t,["outputMimeType"]);o!=null&&f(n,["imageOutputOptions","mimeType"],o);let a=d(t,["outputCompressionQuality"]);return a!=null&&f(n,["imageOutputOptions","compressionQuality"],a),n}function oW(t,e){let n={},r=d(t,["bytesBase64Encoded"]);r!=null&&f(n,["imageBytes"],Ss(r));let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function K1(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["bytesBase64Encoded"]);i!=null&&f(n,["imageBytes"],Ss(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function vg(t,e){let n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=d(t,["imageBytes"]);r!=null&&f(n,["bytesBase64Encoded"],Ss(r));let i=d(t,["mimeType"]);return i!=null&&f(n,["mimeType"],i),n}function Rr(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["imageBytes"]);i!=null&&f(n,["bytesBase64Encoded"],Ss(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function aW(t,e,n,r){let i={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);let o=d(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);let a=d(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);let l=d(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],q1(t,l)),i}function lW(t,e,n,r){let i={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);let o=d(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);let a=d(e,["filter"]);n!==void 0&&a!=null&&f(n,["_query","filter"],a);let l=d(e,["queryBase"]);return n!==void 0&&l!=null&&f(n,["_url","models_url"],q1(t,l)),i}function cW(t,e,n){let r={},i=d(e,["config"]);return i!=null&&aW(t,i,r),r}function uW(t,e,n){let r={},i=d(e,["config"]);return i!=null&&lW(t,i,r),r}function dW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["_self"]);if(s!=null){let o=G1(s);Array.isArray(o)&&(o=o.map(a=>fC(a))),f(n,["models"],o)}return n}function fW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["_self"]);if(s!=null){let o=G1(s);Array.isArray(o)&&(o=o.map(a=>hC(a))),f(n,["models"],o)}return n}function hW(t,e){let n={},r=d(t,["maskMode"]);r!=null&&f(n,["maskMode"],r);let i=d(t,["segmentationClasses"]);i!=null&&f(n,["maskClasses"],i);let s=d(t,["maskDilation"]);return s!=null&&f(n,["dilation"],s),n}function fC(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["displayName"]);i!=null&&f(n,["displayName"],i);let s=d(t,["description"]);s!=null&&f(n,["description"],s);let o=d(t,["version"]);o!=null&&f(n,["version"],o);let a=d(t,["_self"]);a!=null&&f(n,["tunedModelInfo"],DW(a));let l=d(t,["inputTokenLimit"]);l!=null&&f(n,["inputTokenLimit"],l);let c=d(t,["outputTokenLimit"]);c!=null&&f(n,["outputTokenLimit"],c);let u=d(t,["supportedGenerationMethods"]);u!=null&&f(n,["supportedActions"],u);let h=d(t,["temperature"]);h!=null&&f(n,["temperature"],h);let p=d(t,["maxTemperature"]);p!=null&&f(n,["maxTemperature"],p);let m=d(t,["topP"]);m!=null&&f(n,["topP"],m);let g=d(t,["topK"]);g!=null&&f(n,["topK"],g);let y=d(t,["thinking"]);return y!=null&&f(n,["thinking"],y),n}function hC(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["name"],r);let i=d(t,["displayName"]);i!=null&&f(n,["displayName"],i);let s=d(t,["description"]);s!=null&&f(n,["description"],s);let o=d(t,["versionId"]);o!=null&&f(n,["version"],o);let a=d(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>T9(m))),f(n,["endpoints"],p)}let l=d(t,["labels"]);l!=null&&f(n,["labels"],l);let c=d(t,["_self"]);c!=null&&f(n,["tunedModelInfo"],kW(c));let u=d(t,["defaultCheckpointId"]);u!=null&&f(n,["defaultCheckpointId"],u);let h=d(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(n,["checkpoints"],p)}return n}function pW(t,e){let n={},r=d(t,["mediaResolution"]);r!=null&&f(n,["mediaResolution"],r);let i=d(t,["codeExecutionResult"]);i!=null&&f(n,["codeExecutionResult"],i);let s=d(t,["executableCode"]);s!=null&&f(n,["executableCode"],s);let o=d(t,["fileData"]);o!=null&&f(n,["fileData"],I9(o));let a=d(t,["functionCall"]);a!=null&&f(n,["functionCall"],A9(a));let l=d(t,["functionResponse"]);l!=null&&f(n,["functionResponse"],l);let c=d(t,["inlineData"]);c!=null&&f(n,["inlineData"],Zj(c));let u=d(t,["text"]);u!=null&&f(n,["text"],u);let h=d(t,["thought"]);h!=null&&f(n,["thought"],h);let p=d(t,["thoughtSignature"]);p!=null&&f(n,["thoughtSignature"],p);let m=d(t,["videoMetadata"]);return m!=null&&f(n,["videoMetadata"],m),n}function mW(t,e){let n={},r=d(t,["productImage"]);return r!=null&&f(n,["image"],Rr(r)),n}function gW(t,e,n){let r={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);let s=d(t,["baseSteps"]);e!==void 0&&s!=null&&f(e,["parameters","baseSteps"],s);let o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let a=d(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);let l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);let c=d(t,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);let u=d(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);let h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);let p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);let m=d(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);let g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),r}function vW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["source"]);s!=null&&wW(s,r);let o=d(e,["config"]);return o!=null&&gW(o,r),r}function yW(t,e){let n={},r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>gg(s))),f(n,["generatedImages"],i)}return n}function wW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["personImage"]);e!==void 0&&s!=null&&f(e,["instances[0]","personImage","image"],Rr(s));let o=d(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>mW(l))),f(e,["instances[0]","productImages"],a)}return r}function EW(t,e){let n={},r=d(t,["referenceImage"]);r!=null&&f(n,["referenceImage"],Rr(r));let i=d(t,["referenceId"]);i!=null&&f(n,["referenceId"],i);let s=d(t,["referenceType"]);s!=null&&f(n,["referenceType"],s);let o=d(t,["maskImageConfig"]);o!=null&&f(n,["maskImageConfig"],hW(o));let a=d(t,["controlImageConfig"]);a!=null&&f(n,["controlImageConfig"],o9(a));let l=d(t,["styleImageConfig"]);l!=null&&f(n,["styleImageConfig"],l);let c=d(t,["subjectImageConfig"]);return c!=null&&f(n,["subjectImageConfig"],c),n}function Q1(t,e){let n={},r=d(t,["safetyAttributes","categories"]);r!=null&&f(n,["categories"],r);let i=d(t,["safetyAttributes","scores"]);i!=null&&f(n,["scores"],i);let s=d(t,["contentType"]);return s!=null&&f(n,["contentType"],s),n}function X1(t,e){let n={},r=d(t,["safetyAttributes","categories"]);r!=null&&f(n,["categories"],r);let i=d(t,["safetyAttributes","scores"]);i!=null&&f(n,["scores"],i);let s=d(t,["contentType"]);return s!=null&&f(n,["contentType"],s),n}function _W(t,e){let n={},r=d(t,["category"]);if(r!=null&&f(n,["category"],r),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=d(t,["threshold"]);return i!=null&&f(n,["threshold"],i),n}function CW(t,e){let n={},r=d(t,["image"]);return r!=null&&f(n,["image"],Rr(r)),n}function SW(t,e,n){let r={},i=d(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);let s=d(t,["maxPredictions"]);e!==void 0&&s!=null&&f(e,["parameters","maxPredictions"],s);let o=d(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);let a=d(t,["maskDilation"]);e!==void 0&&a!=null&&f(e,["parameters","maskDilation"],a);let l=d(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","binaryColorThreshold"],l);let c=d(t,["labels"]);return e!==void 0&&c!=null&&f(e,["labels"],c),r}function bW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["source"]);s!=null&&TW(s,r);let o=d(e,["config"]);return o!=null&&SW(o,r),r}function xW(t,e){let n={},r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>K9(s))),f(n,["generatedMasks"],i)}return n}function TW(t,e,n){let r={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);let s=d(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Rr(s));let o=d(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],CW(o)),r}function IW(t,e){let n={},r=d(t,["retrievalConfig"]);r!=null&&f(n,["retrievalConfig"],r);let i=d(t,["functionCallingConfig"]);return i!=null&&f(n,["functionCallingConfig"],D9(i)),n}function AW(t,e){let n={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=d(t,["computerUse"]);r!=null&&f(n,["computerUse"],r);let i=d(t,["fileSearch"]);i!=null&&f(n,["fileSearch"],i);let s=d(t,["codeExecution"]);if(s!=null&&f(n,["codeExecution"],s),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=d(t,["functionDeclarations"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>p)),f(n,["functionDeclarations"],h)}let a=d(t,["googleMaps"]);a!=null&&f(n,["googleMaps"],nW(a));let l=d(t,["googleSearch"]);l!=null&&f(n,["googleSearch"],rW(l));let c=d(t,["googleSearchRetrieval"]);c!=null&&f(n,["googleSearchRetrieval"],c);let u=d(t,["urlContext"]);return u!=null&&f(n,["urlContext"],u),n}function Z1(t,e){let n={},r=d(t,["retrieval"]);r!=null&&f(n,["retrieval"],r);let i=d(t,["computerUse"]);if(i!=null&&f(n,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=d(t,["codeExecution"]);s!=null&&f(n,["codeExecution"],s);let o=d(t,["enterpriseWebSearch"]);o!=null&&f(n,["enterpriseWebSearch"],o);let a=d(t,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>k9(m))),f(n,["functionDeclarations"],p)}let l=d(t,["googleMaps"]);l!=null&&f(n,["googleMaps"],l);let c=d(t,["googleSearch"]);c!=null&&f(n,["googleSearch"],c);let u=d(t,["googleSearchRetrieval"]);u!=null&&f(n,["googleSearchRetrieval"],u);let h=d(t,["urlContext"]);return h!=null&&f(n,["urlContext"],h),n}function DW(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["createTime"]);i!=null&&f(n,["createTime"],i);let s=d(t,["updateTime"]);return s!=null&&f(n,["updateTime"],s),n}function kW(t,e){let n={},r=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["createTime"]);i!=null&&f(n,["createTime"],i);let s=d(t,["updateTime"]);return s!=null&&f(n,["updateTime"],s),n}function NW(t,e,n){let r={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),r}function MW(t,e,n){let r={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let o=d(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),r}function RW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","name"],Ie(t,i));let s=d(e,["config"]);return s!=null&&NW(s,r),r}function PW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["config"]);return s!=null&&MW(s,r),r}function LW(t,e,n){let r={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=d(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);let o=d(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);let a=d(t,["includeRaiReason"]);e!==void 0&&a!=null&&f(e,["parameters","includeRaiReason"],a);let l=d(t,["outputMimeType"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","mimeType"],l);let c=d(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&f(e,["parameters","outputOptions","compressionQuality"],c);let u=d(t,["enhanceInputImage"]);e!==void 0&&u!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],u);let h=d(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);let p=d(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);let m=d(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);let g=d(t,["mode"]);return e!==void 0&&g!=null&&f(e,["parameters","mode"],g),r}function OW(t,e,n){let r={},i=d(e,["model"]);i!=null&&f(r,["_url","model"],Ie(t,i));let s=d(e,["image"]);s!=null&&f(r,["instances[0]","image"],Rr(s));let o=d(e,["upscaleFactor"]);o!=null&&f(r,["parameters","upscaleConfig","upscaleFactor"],o);let a=d(e,["config"]);return a!=null&&LW(a,r),r}function FW(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>gg(o))),f(n,["generatedImages"],s)}return n}function BW(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["uri"],r);let i=d(t,["encodedVideo"]);i!=null&&f(n,["videoBytes"],Ss(i));let s=d(t,["encoding"]);return s!=null&&f(n,["mimeType"],s),n}function VW(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["uri"],r);let i=d(t,["bytesBase64Encoded"]);i!=null&&f(n,["videoBytes"],Ss(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function UW(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["_self"],Rr(r));let i=d(t,["maskMode"]);return i!=null&&f(n,["maskMode"],i),n}function $W(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["image"],vg(r));let i=d(t,["referenceType"]);return i!=null&&f(n,["referenceType"],i),n}function HW(t,e){let n={},r=d(t,["image"]);r!=null&&f(n,["image"],Rr(r));let i=d(t,["referenceType"]);return i!=null&&f(n,["referenceType"],i),n}function eN(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["uri"],r);let i=d(t,["videoBytes"]);i!=null&&f(n,["encodedVideo"],Ss(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["encoding"],s),n}function tN(t,e){let n={},r=d(t,["uri"]);r!=null&&f(n,["gcsUri"],r);let i=d(t,["videoBytes"]);i!=null&&f(n,["bytesBase64Encoded"],Ss(i));let s=d(t,["mimeType"]);return s!=null&&f(n,["mimeType"],s),n}function qW(t,e){let n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function GW(t){let e={},n=d(t,["config"]);return n!=null&&qW(n,e),e}function jW(t,e){let n={},r=d(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function WW(t){let e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);let r=d(t,["config"]);return r!=null&&jW(r,e),e}function zW(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function JW(t,e){let n={},r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["customMetadata"],s)}let i=d(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function YW(t){let e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);let r=d(t,["metadata"]);r!=null&&f(e,["metadata"],r);let i=d(t,["done"]);i!=null&&f(e,["done"],i);let s=d(t,["error"]);s!=null&&f(e,["error"],s);let o=d(t,["response"]);return o!=null&&f(e,["response"],QW(o)),e}function KW(t){let e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);let r=d(t,["fileName"]);r!=null&&f(e,["fileName"],r);let i=d(t,["config"]);return i!=null&&JW(i,e),e}function QW(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["parent"]);r!=null&&f(e,["parent"],r);let i=d(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function XW(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function ZW(t){let e={},n=d(t,["config"]);return n!=null&&XW(n,e),e}function ez(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["fileSearchStores"],s)}return e}function nN(t,e){let n={},r=d(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);let i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}let o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),n}function tz(t){let e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);let r=d(t,["config"]);return r!=null&&nN(r,e),e}function nz(t){let e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}var rz="Content-Type",iz="X-Server-Timeout",sz="User-Agent",pC="x-goog-api-client",oz="1.41.0",az=`google-genai-sdk/${oz}`,lz="v1beta1",cz="v1beta",uz=5,dz=[408,429,500,502,503,504],mC=class{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:lz}else{if(!this.clientOptions.apiKey)throw new vd({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cz,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){let i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===L1.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(let[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){let r=JSON.parse(JSON.stringify(e));for(let[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){let s=new AbortController,o=s.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&fz(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await E1(i),new gd(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await E1(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return kr(this,arguments,function*(){var r;let i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:u}=yield pe(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let h=s.decode(u,{stream:!0});try{let g=JSON.parse(h);if("error"in g){let y=JSON.parse(JSON.stringify(g.error)),E=y.status,w=y.code,I=`got status: ${E}. ${JSON.stringify(g)}`;if(w>=400&&w<600)throw new vd({message:I,status:w})}}catch(g){if(g.name==="ApiError")throw g}o+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(let E of l){let w=o.indexOf(E);w!==-1&&(p===-1||w<p)&&(p=w,m=E.length)}if(p===-1)break;let g=o.substring(0,p);o=o.substring(p+m);let y=g.trim();if(y.startsWith(a)){let E=y.substring(a.length).trim();try{let w=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield pe(new gd(w))}catch(w){throw new Error(`exception parsing stream chunk ${E}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);let i=this.clientOptions.httpOptions.retryOptions;return F_(async()=>{let o=await fetch(e,n);if(o.ok)return o;throw dz.includes(o.status)?new Error(`Retryable HTTP Error: ${o.statusText}`):new fd(`Non-retryable exception ${o.statusText} sending request`)},{retries:((r=i.attempts)!==null&&r!==void 0?r:uz)-1})}getDefaultHeaders(){let e={},n=az+" "+this.clientOptions.userAgentExtra;return e[sz]=n,e[pC]=n,e[rz]="application/json",e}async getHeadersInternal(e,n){let r=new Headers;if(e&&e.headers){for(let[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(iz,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;let i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);let a=(r=n?.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let l={file:i},c=this.getFileName(e),u=$("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n?.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;let s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r?.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),h={};r!=null&&nN(r,h);let p=await this.fetchUploadUrl(c,a,l,u,h,r?.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};let c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}};async function E1(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(r);throw n>=400&&n<600?new vd({message:i,status:n}):new Error(i)}}function fz(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){let a=Object.assign({},s);for(let l in o)if(Object.prototype.hasOwnProperty.call(o,l)){let c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let i=r(n,e);t.body=JSON.stringify(i)}var hz="mcp_used/unknown",pz=!1;function rN(t){for(let e of t)if(mz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pz}function iN(t){var e;let n=(e=t[pC])!==null&&e!==void 0?e:"";t[pC]=(n+` ${hz}`).trimStart()}function mz(t){return t!==null&&typeof t=="object"&&t instanceof gC}function gz(t){return kr(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){let o=yield pe(n.listTools({cursor:i}));for(let a of o.tools)yield yield pe(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}var gC=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;let s={},o=[];for(let u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Nr(gz(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let h=i;o.push(h);let p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=u}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Y4(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[r.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}};async function vz(t,e,n){let r=new rC,i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}var vC=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=wz(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},u=new Promise(D=>{c=D}),h=e.callbacks,p=function(){c({})},m=this.apiClient,g={onopen:p,onmessage:D=>{vz(m,h.onmessage,D)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(D){}},y=this.webSocketFactory.create(l,yz(o),g);y.connect(),await u;let I={setup:{model:Ie(this.apiClient,e.model)}};return y.send(JSON.stringify(I)),new yC(y,this.apiClient)}},yC=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=qj(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=Hj(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pd.PLAY)}pause(){this.sendPlaybackControl(pd.PAUSE)}stop(){this.sendPlaybackControl(pd.STOP)}resetContext(){this.sendPlaybackControl(pd.RESET_CONTEXT)}close(){this.conn.close()}};function yz(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function wz(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var Ez="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _z(t,e,n){let r=new nC,i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;let s=JSON.parse(i);if(t.isVertexAI()){let o=Wj(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}var wC=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new vC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),u,h=this.apiClient.getHeaders();e.config&&e.config.tools&&rN(e.config.tools)&&iN(h);let p=bz(h);if(this.apiClient.isVertexAI()){let re=this.apiClient.getProject(),le=this.apiClient.getLocation(),nt=this.apiClient.getApiKey(),Vt=!!re&&!!le||!!nt;this.apiClient.getCustomBaseUrl()&&!Vt?u=l:(u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,u))}else{let re=this.apiClient.getApiKey(),le="BidiGenerateContent",nt="key";re?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",nt="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${le}?${nt}=${re}`}let m=()=>{},g=new Promise(re=>{m=re}),y=e.callbacks,E=function(){var re;(re=y?.onopen)===null||re===void 0||re.call(y),m({})},w=this.apiClient,I={onopen:E,onmessage:re=>{_z(w,y.onmessage,re)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(re){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(re){}},D=this.webSocketFactory.create(u,Sz(p),I);D.connect(),await g;let b=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){let re=this.apiClient.getProject(),le=this.apiClient.getLocation();re&&le&&(b=`projects/${re}/locations/${le}/`+b)}let L={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[H_.AUDIO]}:e.config.responseModalities=[H_.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let M=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],q=[];for(let re of M)if(this.isCallableTool(re)){let le=re;q.push(await le.tool())}else q.push(re);q.length>0&&(e.config.tools=q);let z={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=$j(this.apiClient,z):L=Uj(this.apiClient,z),delete L.config,D.send(JSON.stringify(L)),new EC(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Cz={turnComplete:!0},EC=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=or(n.turns),e.isVertexAI()||(r=r.map(i=>mg(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Ez)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Cz),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:jj(e)}:n={realtimeInput:Gj(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function Sz(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function bz(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var _1=10;function C1(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let o of(n=t?.tools)!==null&&n!==void 0?n:[])if(bl(o)){i=!0;break}if(!i)return!0;let s=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function bl(t){return"callTool"in t&&typeof t.callTool=="function"}function xz(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>bl(i)))!==null&&r!==void 0?r:!1}function S1(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(bl(r))return;let s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function b1(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var _C=class extends Mr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!xz(n)||C1(n.config))return await this.generateContentInternal(l);let c=S1(n);if(c.length>0){let y=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let u,h,p=or(l.contents),m=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:_1,g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){let y=u.candidates[0].content,E=[];for(let w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(bl(w)){let D=await w.callTool(u.functionCalls);E.push(...D)}g++,h={role:"user",parts:E},l.contents=or(l.contents),l.contents.push(y),l.contents.push(h),b1(l.config)&&(p.push(y),p.push(h))}return b1(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),C1(n.config)){let h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}let l=S1(n);if(l.length>0){let h=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(s=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n?.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s,o=[];if(r?.generatedImages)for(let l of r.generatedImages)l&&l?.safetyAttributes&&((i=l?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l?.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;let o={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Ri(bs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;let s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;let o=await Promise.all(s.map(async l=>bl(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&rN(e.config.tools)){let l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),iN(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;let s=new Map;for(let o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(bl(o)){let a=o,l=await a.tool();for(let c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;let s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:_1,o=!1,a=0,l=await this.initAfcToolsMap(e);return(function(c,u,h){return kr(this,arguments,function*(){for(var p,m,g,y,E,w;a<s;){o&&(a++,o=!1);let L=yield pe(c.processParamsMaybeAddMcpUsage(h)),M=yield pe(c.generateContentStreamInternal(L)),q=[],z=[];try{for(var I=!0,D=(m=void 0,Nr(M)),b;b=yield pe(D.next()),p=b.done,!p;I=!0){y=b.value,I=!1;let re=y;if(yield yield pe(re),re.candidates&&(!((E=re.candidates[0])===null||E===void 0)&&E.content)){z.push(re.candidates[0].content);for(let le of(w=re.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(le.functionCall.name)){let nt=yield pe(u.get(le.functionCall.name).callTool([le.functionCall]));q.push(...nt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(re){m={error:re}}finally{try{!I&&!p&&(g=D.return)&&(yield pe(g.call(D)))}finally{if(m)throw m.error}}if(q.length>0){o=!0;let re=new Ho;re.candidates=[{content:{role:"user",parts:q}}],yield yield pe(re);let le=[];le.push(...z),le.push({role:"user",parts:q});let nt=or(h.contents).concat(le);h.contents=nt}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=v1(this.apiClient,e);return a=$("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=w1(u),p=new Ho;return Object.assign(p,h),p})}else{let c=g1(this.apiClient,e);return a=$("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=y1(u),p=new Ho;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=v1(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return kr(this,arguments,function*(){var p,m,g,y;try{for(var E=!0,w=Nr(h),I;I=yield pe(w.next()),p=I.done,!p;E=!0){y=I.value,E=!1;let D=y,b=w1(yield pe(D.json()),e);b.sdkHttpResponse={headers:D.headers};let L=new Ho;Object.assign(L,b),yield yield pe(L)}}catch(D){m={error:D}}finally{try{!E&&!p&&(g=w.return)&&(yield pe(g.call(w)))}finally{if(m)throw m.error}}})})}else{let c=g1(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return kr(this,arguments,function*(){var p,m,g,y;try{for(var E=!0,w=Nr(h),I;I=yield pe(w.next()),p=I.done,!p;E=!0){y=I.value,E=!1;let D=y,b=y1(yield pe(D.json()),e);b.sdkHttpResponse={headers:D.headers};let L=new Ho;Object.assign(L,b),yield yield pe(L)}}catch(D){m={error:D}}finally{try{!E&&!p&&(g=w.return)&&(yield pe(g.call(w)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=S9(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=x9(u),p=new Hm;return Object.assign(p,h),p})}else{let c=C9(this.apiClient,e);return a=$("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=b9(u),p=new Hm;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=O9(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=B9(u),p=new qm;return Object.assign(p,h),p})}else{let c=L9(this.apiClient,e);return a=$("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=F9(u),p=new qm;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=y9(this.apiClient,e);return s=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=w9(l),u=new q_;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=OW(this.apiClient,e);return s=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=FW(l),u=new G_;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=vW(this.apiClient,e);return s=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=yW(l),u=new j_;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=bW(this.apiClient,e);return s=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=xW(l),u=new W_;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=tW(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>hC(u))}else{let c=eW(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>fC(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=uW(this.apiClient,e);return a=$("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=fW(u),p=new Gm;return Object.assign(p,h),p})}else{let c=cW(this.apiClient,e);return a=$("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=dW(u),p=new Gm;return Object.assign(p,h),p})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=PW(this.apiClient,e);return a=$("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>hC(u))}else{let c=RW(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>fC(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=p9(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=g9(u),p=new jm;return Object.assign(p,h),p})}else{let c=h9(this.apiClient,e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=m9(u),p=new jm;return Object.assign(p,h),p})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=u9(this.apiClient,e);return a=$("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=f9(u),p=new Wm;return Object.assign(p,h),p})}else{let c=c9(this.apiClient,e);return a=$("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=d9(u),p=new Wm;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=n9(this.apiClient,e);return s=$("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{let c=r9(l),u=new z_;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=G9(this.apiClient,e);return a=$("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{let h=H9(u),p=new zm;return Object.assign(p,h),p})}else{let c=q9(this.apiClient,e);return a=$("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{let h=$9(u),p=new zm;return Object.assign(p,h),p})}}};var CC=class extends Mr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],s;r&&"httpOptions"in r&&(s=r.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],s;r&&"httpOptions"in r&&(s=r.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=O4(e);return a=$("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{let c=L4(e);return a=$("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=A4(e);return s=$("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};function Tz(t){let e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Iz(t){let e={},n=d(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Oz(s))),f(e,["parts"],i)}let r=d(t,["role"]);return r!=null&&f(e,["role"],r),e}function Az(t,e,n){let r={},i=d(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);let s=d(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);let o=d(e,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);let a=d(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],Lz(t,a));let l=d(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function Dz(t,e){let n={},r=d(e,["config"]);return r!=null&&f(n,["config"],Az(t,r,n)),n}function kz(t){let e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);let r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Nz(t){let e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);let r=d(t,["args"]);r!=null&&f(e,["args"],r);let i=d(t,["name"]);if(i!=null&&f(e,["name"],i),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Mz(t){let e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Rz(t){let e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Pz(t,e){let n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);let i=d(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);let s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);let o=d(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);let a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);let l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);let c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);let h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],GC(h));let p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);let m=d(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],m);let g=d(t,["systemInstruction"]);e!==void 0&&g!=null&&f(e,["setup","systemInstruction"],Iz(Yt(g)));let y=d(t,["tools"]);if(e!==void 0&&y!=null){let M=Al(y);Array.isArray(M)&&(M=M.map(q=>Bz(Il(q)))),f(e,["setup","tools"],M)}let E=d(t,["sessionResumption"]);e!==void 0&&E!=null&&f(e,["setup","sessionResumption"],Fz(E));let w=d(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&f(e,["setup","inputAudioTranscription"],w);let I=d(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","outputAudioTranscription"],I);let D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);let b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);let L=d(t,["proactivity"]);if(e!==void 0&&L!=null&&f(e,["setup","proactivity"],L),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Lz(t,e){let n={},r=d(e,["model"]);r!=null&&f(n,["setup","model"],Ie(t,r));let i=d(e,["config"]);return i!=null&&f(n,["config"],Pz(i,n)),n}function Oz(t){let e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);let r=d(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);let i=d(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);let s=d(t,["fileData"]);s!=null&&f(e,["fileData"],kz(s));let o=d(t,["functionCall"]);o!=null&&f(e,["functionCall"],Nz(o));let a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);let l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],Tz(l));let c=d(t,["text"]);c!=null&&f(e,["text"],c);let u=d(t,["thought"]);u!=null&&f(e,["thought"],u);let h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);let p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function Fz(t){let e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Bz(t){let e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);let r=d(t,["fileSearch"]);r!=null&&f(e,["fileSearch"],r);let i=d(t,["codeExecution"]);if(i!=null&&f(e,["codeExecution"],i),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=d(t,["functionDeclarations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}let o=d(t,["googleMaps"]);o!=null&&f(e,["googleMaps"],Mz(o));let a=d(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],Rz(a));let l=d(t,["googleSearchRetrieval"]);l!=null&&f(e,["googleSearchRetrieval"],l);let c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Vz(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Uz(t,e){let n=null,r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(n){let s=Vz(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));let l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}var SC=class extends Mr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=Dz(this.apiClient,e);s=$("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;let l=Uz(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};function $z(t,e){let n={},r=d(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function Hz(t){let e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);let r=d(t,["config"]);return r!=null&&$z(r,e),e}function qz(t){let e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Gz(t,e){let n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);let i=d(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function jz(t){let e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);let r=d(t,["config"]);return r!=null&&Gz(r,e),e}function Wz(t){let e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);let r=d(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);let i=d(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),f(e,["documents"],s)}return e}var bC=class extends Mr{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ri(bs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=qz(e);return s=$("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=Hz(e);i=$("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=jz(e);return s=$("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=Wz(l),u=new J_;return Object.assign(u,c),u})}}};var xC=class extends Mr{constructor(e,n=new bC(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ri(bs.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=GW(e);return s=$("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=zW(e);return s=$("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let o=WW(e);i=$("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ZW(e);return s=$("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=ez(l),u=new Y_;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=tz(e);return s=$("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=nz(l),u=new K_;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=KW(e);return s=$("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=YW(l),u=new Q_;return Object.assign(u,c),u})}}};var sN=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return sN=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))},zz=()=>sN();function TC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var IC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var wn=class extends Error{},En=class t extends wn{constructor(e,n,r,i){super(`${t.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){let i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new xl({message:r,cause:IC(n)});let s=n;return e===400?new ng(e,s,r,i):e===401?new rg(e,s,r,i):e===403?new ig(e,s,r,i):e===404?new sg(e,s,r,i):e===409?new og(e,s,r,i):e===422?new ag(e,s,r,i):e===429?new lg(e,s,r,i):e>=500?new cg(e,s,r,i):new t(e,s,r,i)}},yd=class extends En{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},xl=class extends En{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},tg=class extends xl{constructor({message:e}={}){super({message:e??"Request timed out."})}},ng=class extends En{},rg=class extends En{},ig=class extends En{},sg=class extends En{},og=class extends En{},ag=class extends En{},lg=class extends En{},cg=class extends En{};var Jz=/^[a-z][a-z0-9+.-]*:/i,Yz=t=>Jz.test(t),AC=t=>(AC=Array.isArray,AC(t)),Kz=AC,Qz=Kz,x1=Qz;function Xz(t){if(!t)return!0;for(let e in t)return!1;return!0}function Zz(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var e7=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wn(`${t} must be an integer`);if(e<0)throw new wn(`${t} must be a positive integer`);return e},t7=t=>{try{return JSON.parse(t)}catch{return}};var n7=t=>new Promise(e=>setTimeout(e,t));var Cl="0.0.1";function r7(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var i7=()=>{var t,e,n,r,i;let s=r7();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":I1(Deno.build.os),"X-Stainless-Arch":T1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":I1((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":T1((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};let o=s7();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function s7(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let r=n.exec(navigator.userAgent);if(r){let i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}var T1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",I1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),Lm,o7=()=>Lm??(Lm=i7());function a7(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oN(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function l7(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return oN({start(){},async pull(n){let{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function aN(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function c7(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let r=t.getReader(),i=r.cancel();r.releaseLock(),await i}var u7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var lN=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function B_(t,e,n){return lN(),new File(t,e??"unknown_file",n)}function d7(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var f7=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var cN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",h7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&cN(t),p7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function m7(t,e,n){if(lN(),t=await t,h7(t))return t instanceof File?t:B_([await t.arrayBuffer()],t.name);if(p7(t)){let i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),B_(await DC(i),e,n)}let r=await DC(t);if(e||(e=d7(t)),!n?.type){let i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return B_(r,e,n)}async function DC(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(cN(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(f7(t))try{for(var a=!0,l=Nr(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let u=i;o.push(...await DC(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{let u=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${g7(t)}`)}return o}function g7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var v7=(()=>{class t{constructor(n){this._client=n}}t._key=[];return t})();function uN(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var A1=Object.freeze(Object.create(null)),y7=(t=uN)=>function(n,...r){if(n.length===1)return n[0];let i=!1,s=[],o=n.reduce((u,h,p)=>{var m,g,y;/[?#]/.test(h)&&(i=!0);let E=r[p],w=(i?encodeURIComponent:t)(""+E);return p!==r.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((g=Object.getPrototypeOf((m=E.hasOwnProperty)!==null&&m!==void 0?m:A1))!==null&&g!==void 0?g:A1))===null||y===void 0?void 0:y.toString))&&(w=E+"",s.push({start:u.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),u+h+(p===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,h)=>u.start-h.start),s.length>0){let u=0,h=s.reduce((p,m)=>{let g=" ".repeat(m.start-u),y="^".repeat(m.length);return u=m.start+m.length,p+g+y},"");throw new wn(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${o}
${h}`)}return o},Om=y7(uN);var ug=class extends v7{create(e,n){var r;let{api_version:i=this._client.apiVersion}=e,s=eg(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new wn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new wn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Om`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){let{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Om`/${i}/interactions/${e}`,r)}cancel(e,n={},r){let{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Om`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;let s=n??{},{api_version:o=this._client.apiVersion}=s,a=eg(s,["api_version"]);return this._client.get(Om`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}};ug._key=Object.freeze(["interactions"]);var dg=class extends ug{};function w7(t){let e=0;for(let i of t)e+=i.length;let n=new Uint8Array(e),r=0;for(let i of t)n.set(i,r),r+=i.length;return n}var Fm;function jC(t){let e;return(Fm??(e=new globalThis.TextEncoder,Fm=e.encode.bind(e)))(t)}var Bm;function D1(t){let e;return(Bm??(e=new globalThis.TextDecoder,Bm=e.decode.bind(e)))(t)}var Tl=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?jC(e):e;this.buffer=w7([this.buffer,n]);let r=[],i;for(;(i=E7(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(D1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=D1(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}};Tl.NEWLINE_CHARS=new Set([`
`,"\r"]);Tl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function E7(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function _7(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}var fg={off:0,error:200,warn:300,info:400,debug:500},k1=(t,e,n)=>{if(t){if(Zz(fg,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(fg))}`)}};function md(){}function Vm(t,e,n){return!e||fg[t]>fg[n]?md:e[t].bind(e)}var C7={error:md,warn:md,info:md,debug:md},N1=new WeakMap;function ln(t){var e;let n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return C7;let i=N1.get(n);if(i&&i[0]===r)return i[1];let s={error:Vm("error",n,r),warn:Vm("warn",n,r),info:Vm("info",n,r),debug:Vm("debug",n,r)};return N1.set(n,[r,s]),s}var $o=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var kC=class t{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1,s=r?ln(r):console;function o(){return kr(this,arguments,function*(){var l,c,u,h;if(i)throw new wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,g=Nr(S7(e,n)),y;y=yield pe(g.next()),l=y.done,!l;m=!0){h=y.value,m=!1;let E=h;if(!p)if(E.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield pe(JSON.parse(E.data))}catch(w){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),w}}}catch(E){c={error:E}}finally{try{!m&&!l&&(u=g.return)&&(yield pe(u.call(g)))}finally{if(c)throw c.error}}p=!0}catch(E){if(TC(E))return yield pe(void 0);throw E}finally{p||n.abort()}})}return new t(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return kr(this,arguments,function*(){var l,c,u,h;let p=new Tl,m=aN(e);try{for(var g=!0,y=Nr(m),E;E=yield pe(y.next()),l=E.done,!l;g=!0){h=E.value,g=!1;let w=h;for(let I of p.decode(w))yield yield pe(I)}}catch(w){c={error:w}}finally{try{!g&&!l&&(u=y.return)&&(yield pe(u.call(y)))}finally{if(c)throw c.error}}for(let w of p.flush())yield yield pe(w)})}function o(){return kr(this,arguments,function*(){var l,c,u,h;if(i)throw new wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let p=!1;try{try{for(var m=!0,g=Nr(s()),y;y=yield pe(g.next()),l=y.done,!l;m=!0){h=y.value,m=!1;let E=h;p||E&&(yield yield pe(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!m&&!l&&(u=g.return)&&(yield pe(u.call(g)))}finally{if(c)throw c.error}}p=!0}catch(E){if(TC(E))return yield pe(void 0);throw E}finally{p||n.abort()}})}return new t(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){let o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new t(()=>i(e),this.controller,this.client),new t(()=>i(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return oN({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{let{value:i,done:s}=await n.next();if(s)return r.close();let o=jC(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function S7(t,e){return kr(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wn("Attempted to iterate over a response with no body");let a=new NC,l=new Tl,c=aN(t.body);try{for(var u=!0,h=Nr(b7(c)),p;p=yield pe(h.next()),r=p.done,!r;u=!0){o=p.value,u=!1;let m=o;for(let g of l.decode(m)){let y=a.decode(g);y&&(yield yield pe(y))}}}catch(m){i={error:m}}finally{try{!u&&!r&&(s=h.return)&&(yield pe(s.call(h)))}finally{if(i)throw i.error}}for(let m of l.flush()){let g=a.decode(m);g&&(yield yield pe(g))}})}function b7(t){return kr(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Nr(t),c;c=yield pe(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;let u=s;if(u==null)continue;let h=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?jC(u):u,p=new Uint8Array(o.length+h.length);p.set(o),p.set(h,o.length),o=p;let m;for(;(m=_7(o))!==-1;)yield yield pe(o.slice(0,m)),o=o.slice(m)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield pe(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield pe(o))})}var NC=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=x7(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function x7(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function T7(t,e){let{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):kC.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return ln(t).debug(`[${r}] response parsed`,$o({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}var MC=class t extends Promise{constructor(e,n,r=T7){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var dN=Symbol("brand.privateNullableHeaders");function*I7(t){if(!t)return;if(dN in t){let{values:r,nulls:i}=t;yield*r.entries();for(let s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():x1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){let i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let s=x1(r[1])?r[1]:[r[1]],o=!1;for(let a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}var hd=t=>{let e=new Headers,n=new Set;for(let r of t){let i=new Set;for(let[s,o]of I7(r)){let a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[dN]:!0,values:e,nulls:n}};var V_=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};var fN,A7=(()=>{class t{constructor(n){var r,i,s,o,a,l,c,{baseURL:u=V_("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(r=V_("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:p="v1beta"}=n,m=eg(n,["baseURL","apiKey","apiVersion"]);let g=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:t.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;let y="warn";this.logLevel=y,this.logLevel=(a=(o=k1(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:k1(V_("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(l=g.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:a7(),this.encoder=u7,this._options=g,this.apiKey=h,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:r}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let r=hd([n.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return hd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([r,i])=>typeof i<"u").map(([r,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(r)}=`;throw new wn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Cl}`}defaultIdempotencyKey(){return`stainless-node-retry-${zz()}`}makeStatusError(n,r,i,s){return En.generate(n,r,i,s)}buildURL(n,r,i){let s=!this.baseURLOverridden()&&i||this.baseURL,o=Yz(n)?new URL(n):new URL(s+(s.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),a=this.defaultQuery();return Xz(a)||(r=Object.assign(Object.assign({},a),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let r=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(n,{url:r,options:i}){}get(n,r){return this.methodRequest("get",n,r)}post(n,r){return this.methodRequest("post",n,r)}patch(n,r){return this.methodRequest("patch",n,r)}put(n,r){return this.methodRequest("put",n,r)}delete(n,r){return this.methodRequest("delete",n,r)}methodRequest(n,r,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:n,path:r},s)))}request(n,r=null){return new MC(this,this.makeRequest(n,r,void 0))}async makeRequest(n,r,i){var s,o,a;let l=await n,c=(s=l.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r==null&&(r=c),await this.prepareOptions(l);let{req:u,url:h,timeout:p}=await this.buildRequest(l,{retryCount:c-r});await this.prepareRequest(u,{url:h,options:l});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(ln(this).debug(`[${m}] sending request`,$o({retryOfRequestLogID:i,method:l.method,url:h,options:l,headers:u.headers})),!((o=l.signal)===null||o===void 0)&&o.aborted)throw new yd;let E=new AbortController,w=await this.fetchWithTimeout(h,u,p,E).catch(IC),I=Date.now();if(w instanceof globalThis.Error){let b=`retrying, ${r} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new yd;let L=TC(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(r)return ln(this).info(`[${m}] connection ${L?"timed out":"failed"} - ${b}`),ln(this).debug(`[${m}] connection ${L?"timed out":"failed"} (${b})`,$o({retryOfRequestLogID:i,url:h,durationMs:I-y,message:w.message})),this.retryRequest(l,r,i??m);throw ln(this).info(`[${m}] connection ${L?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${m}] connection ${L?"timed out":"failed"} (error; no more retries left)`,$o({retryOfRequestLogID:i,url:h,durationMs:I-y,message:w.message})),L?new tg:new xl({cause:w})}let D=`[${m}${g}] ${u.method} ${h} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${I-y}ms`;if(!w.ok){let b=await this.shouldRetry(w);if(r&&b){let le=`retrying, ${r} attempts remaining`;return await c7(w.body),ln(this).info(`${D} - ${le}`),ln(this).debug(`[${m}] response error (${le})`,$o({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:I-y})),this.retryRequest(l,r,i??m,w.headers)}let L=b?"error; no more retries left":"error; not retryable";ln(this).info(`${D} - ${L}`);let M=await w.text().catch(le=>IC(le).message),q=t7(M),z=q?void 0:M;throw ln(this).debug(`[${m}] response error (${L})`,$o({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:z,durationMs:Date.now()-y})),this.makeStatusError(w.status,q,z,w.headers)}return ln(this).info(D),ln(this).debug(`[${m}] response start`,$o({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:I-y})),{response:w,options:l,controller:E,requestLogID:m,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(n,r,i,s){let o=r||{},{signal:a,method:l}=o,c=eg(o,["signal","method"]),u=this._makeAbort(s);a&&a.addEventListener("abort",u,{once:!0});let h=setTimeout(u,i),p=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),c);l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,n,m)}finally{clearTimeout(h)}}async shouldRetry(n){let r=n.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,r,i,s){var o;let a,l=s?.get("retry-after-ms");if(l){let u=parseFloat(l);Number.isNaN(u)||(a=u)}let c=s?.get("retry-after");if(c&&!a){let u=parseFloat(c);Number.isNaN(u)?a=Date.parse(c)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){let u=(o=n.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,u)}return await n7(a),this.makeRequest(n,r-1,i)}calculateDefaultRetryTimeoutMillis(n,r){let o=r-n,a=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(n,{retryCount:r=0}={}){var i,s,o;let a=Object.assign({},n),{method:l,path:c,query:u,defaultBaseURL:h}=a,p=this.buildURL(c,u,h);"timeout"in a&&e7("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:g}=this.buildBody({options:a}),y=await this.buildHeaders({options:n,method:l,bodyHeaders:m,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:a.timeout}}async buildHeaders({options:n,method:r,bodyHeaders:i,retryCount:s}){let o={};this.idempotencyHeader&&r!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=n.idempotencyKey);let a=await this.authHeaders(n),l=hd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),o7()),this._options.defaultHeaders,i,n.headers,a]);return this.validateHeaders(l),l.values}_makeAbort(n){return()=>n.abort()}buildBody({options:{body:n,headers:r}}){if(!n)return{bodyHeaders:void 0,body:void 0};let i=hd([r]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&i.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:l7(n)}:this.encoder({body:n,headers:i})}}return t.DEFAULT_TIMEOUT=6e4,t})(),pt=class extends A7{constructor(){super(...arguments),this.interactions=new dg(this)}};fN=pt;pt.GeminiNextGenAPIClient=fN;pt.GeminiNextGenAPIClientError=wn;pt.APIError=En;pt.APIConnectionError=xl;pt.APIConnectionTimeoutError=tg;pt.APIUserAbortError=yd;pt.NotFoundError=sg;pt.ConflictError=og;pt.RateLimitError=lg;pt.BadRequestError=ng;pt.AuthenticationError=rg;pt.InternalServerError=cg;pt.PermissionDeniedError=ig;pt.UnprocessableEntityError=ag;pt.toFile=m7;pt.Interactions=dg;function D7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function k7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function N7(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function M7(t,e){let n={},r=d(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function R7(t,e,n){let r={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=d(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=d(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);let o=d(t,["learningRateMultiplier"]);if(o!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=d(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);let l=d(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(d(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function P7(t,e,n){let r={},i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let M=d(t,["validationDataset"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec"],U_(M))}else if(i==="PREFERENCE_TUNING"){let M=d(t,["validationDataset"]);e!==void 0&&M!=null&&f(e,["preferenceOptimizationSpec"],U_(M))}else if(i==="DISTILLATION"){let M=d(t,["validationDataset"]);e!==void 0&&M!=null&&f(e,["distillationSpec"],U_(M))}let s=d(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);let o=d(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let M=d(t,["epochCount"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],M)}else if(a==="PREFERENCE_TUNING"){let M=d(t,["epochCount"]);e!==void 0&&M!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],M)}else if(a==="DISTILLATION"){let M=d(t,["epochCount"]);e!==void 0&&M!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],M)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let M=d(t,["learningRateMultiplier"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],M)}else if(l==="PREFERENCE_TUNING"){let M=d(t,["learningRateMultiplier"]);e!==void 0&&M!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],M)}else if(l==="DISTILLATION"){let M=d(t,["learningRateMultiplier"]);e!==void 0&&M!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],M)}let c=d(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let M=d(t,["exportLastCheckpointOnly"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],M)}else if(c==="PREFERENCE_TUNING"){let M=d(t,["exportLastCheckpointOnly"]);e!==void 0&&M!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],M)}else if(c==="DISTILLATION"){let M=d(t,["exportLastCheckpointOnly"]);e!==void 0&&M!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],M)}let u=d(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let M=d(t,["adapterSize"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],M)}else if(u==="PREFERENCE_TUNING"){let M=d(t,["adapterSize"]);e!==void 0&&M!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],M)}else if(u==="DISTILLATION"){let M=d(t,["adapterSize"]);e!==void 0&&M!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],M)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){let M=d(t,["tuningMode"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","tuningMode"],M)}let p=d(t,["customBaseModel"]);e!==void 0&&p!=null&&f(e,["customBaseModel"],p);let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let M=d(t,["batchSize"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],M)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let M=d(t,["learningRate"]);e!==void 0&&M!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],M)}let y=d(t,["labels"]);e!==void 0&&y!=null&&f(e,["labels"],y);let E=d(t,["beta"]);e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E);let w=d(t,["baseTeacherModel"]);e!==void 0&&w!=null&&f(e,["distillationSpec","baseTeacherModel"],w);let I=d(t,["tunedTeacherModelSource"]);e!==void 0&&I!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],I);let D=d(t,["sftLossWeightMultiplier"]);e!==void 0&&D!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],D);let b=d(t,["outputUri"]);e!==void 0&&b!=null&&f(e,["outputUri"],b);let L=d(t,["encryptionSpec"]);return e!==void 0&&L!=null&&f(e,["encryptionSpec"],L),r}function L7(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);let s=d(t,["trainingDataset"]);s!=null&&W7(s);let o=d(t,["config"]);return o!=null&&R7(o,n),n}function O7(t,e){let n={},r=d(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);let i=d(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);let s=d(t,["trainingDataset"]);s!=null&&z7(s,n,e);let o=d(t,["config"]);return o!=null&&P7(o,n,e),n}function F7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function B7(t,e){let n={},r=d(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function V7(t,e,n){let r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);let o=d(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),r}function U7(t,e,n){let r={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);let s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);let o=d(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),r}function $7(t,e){let n={},r=d(t,["config"]);return r!=null&&V7(r,n),n}function H7(t,e){let n={},r=d(t,["config"]);return r!=null&&U7(r,n),n}function q7(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>hN(a))),f(n,["tuningJobs"],o)}return n}function G7(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);let s=d(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>RC(a))),f(n,["tuningJobs"],o)}return n}function j7(t,e){let n={},r=d(t,["name"]);r!=null&&f(n,["model"],r);let i=d(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function W7(t,e){let n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=d(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),f(n,["examples","examples"],i)}return n}function z7(t,e,n){let r={},i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(i==="DISTILLATION"){let o=d(t,["gcsUri"]);e!==void 0&&o!=null&&f(e,["distillationSpec","promptDatasetUri"],o)}let s=d(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){let o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&f(e,["distillationSpec","promptDatasetUri"],o)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function hN(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["state"]);s!=null&&f(n,["state"],$1(s));let o=d(t,["createTime"]);o!=null&&f(n,["createTime"],o);let a=d(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);let l=d(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);let u=d(t,["description"]);u!=null&&f(n,["description"],u);let h=d(t,["baseModel"]);h!=null&&f(n,["baseModel"],h);let p=d(t,["_self"]);return p!=null&&f(n,["tunedModel"],j7(p)),n}function RC(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["state"]);s!=null&&f(n,["state"],$1(s));let o=d(t,["createTime"]);o!=null&&f(n,["createTime"],o);let a=d(t,["startTime"]);a!=null&&f(n,["startTime"],a);let l=d(t,["endTime"]);l!=null&&f(n,["endTime"],l);let c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);let u=d(t,["error"]);u!=null&&f(n,["error"],u);let h=d(t,["description"]);h!=null&&f(n,["description"],h);let p=d(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);let m=d(t,["tunedModel"]);m!=null&&f(n,["tunedModel"],m);let g=d(t,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);let y=d(t,["supervisedTuningSpec"]);y!=null&&f(n,["supervisedTuningSpec"],y);let E=d(t,["preferenceOptimizationSpec"]);E!=null&&f(n,["preferenceOptimizationSpec"],E);let w=d(t,["distillationSpec"]);w!=null&&f(n,["distillationSpec"],w);let I=d(t,["tuningDataStats"]);I!=null&&f(n,["tuningDataStats"],I);let D=d(t,["encryptionSpec"]);D!=null&&f(n,["encryptionSpec"],D);let b=d(t,["partnerModelTuningSpec"]);b!=null&&f(n,["partnerModelTuningSpec"],b);let L=d(t,["customBaseModel"]);L!=null&&f(n,["customBaseModel"],L);let M=d(t,["experiment"]);M!=null&&f(n,["experiment"],M);let q=d(t,["labels"]);q!=null&&f(n,["labels"],q);let z=d(t,["outputUri"]);z!=null&&f(n,["outputUri"],z);let re=d(t,["pipelineJob"]);re!=null&&f(n,["pipelineJob"],re);let le=d(t,["serviceAccount"]);le!=null&&f(n,["serviceAccount"],le);let nt=d(t,["tunedModelDisplayName"]);nt!=null&&f(n,["tunedModelDisplayName"],nt);let Vt=d(t,["veoTuningSpec"]);return Vt!=null&&f(n,["veoTuningSpec"],Vt),n}function J7(t,e){let n={},r=d(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);let i=d(t,["name"]);i!=null&&f(n,["name"],i);let s=d(t,["metadata"]);s!=null&&f(n,["metadata"],s);let o=d(t,["done"]);o!=null&&f(n,["done"],o);let a=d(t,["error"]);return a!=null&&f(n,["error"],a),n}function U_(t,e){let n={},r=d(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);let i=d(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}var PC=class extends Mr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ri(bs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),s=await this.tuneMldevInternal(i),o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:P1.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=B7(e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>RC(u))}else{let c=F7(e);return a=$("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>hN(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=H7(e);return a=$("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=G7(u),p=new Jm;return Object.assign(p,h),p})}else{let c=$7(e);return a=$("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=q7(u),p=new Jm;return Object.assign(p,h),p})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){let c=k7(e);return a=$("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=M7(u),p=new Ym;return Object.assign(p,h),p})}else{let c=D7(e);return a=$("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:u.headers},p})),o.then(u=>{let h=N7(u),p=new Ym;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=O7(e,e);return s=$("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>RC(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=L7(e);return s=$("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>J7(l))}}};var LC=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},Y7=1024*1024*8,K7=3,Q7=1e3,X7=2,hg="x-goog-upload-status";async function Z7(t,e,n){var r;let i=await pN(t,e,n),s=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[hg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function eJ(t,e,n){var r;let i=await pN(t,e,n),s=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[hg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let o=R1(s),a=new iC;return Object.assign(a,o),a}async function pN(t,e,n){var r,i;let s=0,o=0,a=new gd(new Response),l="upload";for(s=t.size;o<s;){let c=Math.min(Y7,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,p=Q7;for(;h<K7&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a?.headers)===null||r===void 0)&&r[hg]));)h++,await nJ(p),p=p*X7;if(o+=c,((i=a?.headers)===null||i===void 0?void 0:i[hg])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function tJ(t){return{size:t.size,type:t.type}}function nJ(t){return new Promise(e=>setTimeout(e,t))}var OC=class{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Z7(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eJ(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tJ(e)}};var FC=class{create(e,n,r){return new BC(e,n,r)}},BC=class{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var M1="x-goog-api-key",VC=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(M1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(M1,this.apiKey)}}};var rJ="gl-node/",pg=class{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let n=this.httpOptions;n?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let r=new pt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n?.timeout,maxRetries:(e=n?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let r=T4(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let i=new VC(this.apiKey);this.apiClient=new mC({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:rJ+"web",uploader:new OC,downloader:new LC}),this.models=new _C(this.apiClient),this.live=new wC(this.apiClient,i,new FC),this.batches=new aC(this.apiClient),this.chats=new cC(this.models,this.apiClient),this.caches=new lC(this.apiClient),this.files=new dC(this.apiClient),this.operations=new CC(this.apiClient),this.authTokens=new SC(this.apiClient),this.tunings=new PC(this.apiClient),this.fileSearchStores=new xC(this.apiClient)}};var xs={production:!1,aiProvider:"gemini",geminiApiKey:"AIzaSyBxWYvz9KqVNxH7mQ3jP8kL2nR5tC4vD6wE",deepseekApiKey:""};var yg=class t{constructor(){this.geminiAI=null;this.aiProvider="local";this.modelName="gemini-2.0-flash-exp";this.quotaExceeded=!1;this.initializeAI()}initializeAI(){try{let e=xs.aiProvider||"local";e==="gemini"&&xs.geminiApiKey&&xs.geminiApiKey.trim()!==""?(this.geminiAI=new pg({apiKey:xs.geminiApiKey}),this.aiProvider="gemini",console.log("\u2705 AiService: Gemini Flash inizializzato (GRATUITO - 1500 req/giorno)")):e==="deepseek"&&xs.deepseekApiKey&&xs.deepseekApiKey.trim()!==""?(this.aiProvider="deepseek",console.log("\u2705 AiService: DeepSeek inizializzato (GRATUITO)")):(this.aiProvider="local",console.warn("\u26A0\uFE0F AiService: Nessuna API configurata. Uso motore locale (CPU)."),console.info("\u{1F4A1} Per velocizzare l'AI:"),console.info("   - GEMINI (consigliato): https://aistudio.google.com/app/apikey"),console.info("   - DEEPSEEK: https://platform.deepseek.com/api_keys"))}catch(e){console.error("\u274C AiService: Errore inizializzazione:",e),this.aiProvider="local"}}async getBestMove(e,n,r="chess",i=1){return this.quotaExceeded?(console.warn("\u26A0\uFE0F Quota API esaurita. Uso motore locale."),null):this.aiProvider==="gemini"&&this.geminiAI?await this.getGeminiMove(e,n,r,i):this.aiProvider==="deepseek"?await this.getDeepSeekMove(e,n,r,i):null}async getGeminiMove(e,n,r,i){if(!this.geminiAI)return null;try{let s=this.buildPrompt(e,n,r,i),a=(await this.geminiAI.models.generateContent({model:this.modelName,contents:s,config:{temperature:i<40?.7:.1,maxOutputTokens:50}})).text;return console.log("\u{1F916} AI Raw Response:",a),a?(console.log("\u{1F916} AI Parsed Text:",a),this.parseMove(a,n)):(console.warn("\u26A0\uFE0F AI: Nessun testo restituito da Gemini"),null)}catch(s){return s.status===429||s.message&&s.message.includes("429")?(this.quotaExceeded=!0,console.warn("\u26A0\uFE0F Quota Gemini esaurita (1500/giorno). Passo al motore locale.")):console.error("\u274C Errore Gemini:",s.message||s),null}}async getDeepSeekMove(e,n,r,i){try{let s=this.buildPrompt(e,n,r,i),o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xs.deepseekApiKey}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"Sei un esperto di scacchi. Rispondi SOLO con la mossa in formato UCI (es: e2e4)."},{role:"user",content:s}],temperature:i<40?.7:.1,max_tokens:20})});if(!o.ok)throw new Error(`DeepSeek API error: ${o.status}`);let l=(await o.json()).choices?.[0]?.message?.content;return l?this.parseMove(l,n):null}catch(s){return console.error("\u274C Errore DeepSeek:",s.message),null}}buildPrompt(e,n,r,i){let s=800+i*15,o="";return i<=30?o="Principiante (800-1200 ELO). A volte ignori minacce immediate.":i<=70?o="Intermedio (1400-1700 ELO). Giochi in modo solido.":o="Grandmaster (2000+ ELO). Precisione assoluta, tattiche brutali.",r==="chess"?`RUOLO: Gran Maestro FIDE. Giochi con il NERO.
      
STATO:
FEN: ${e}
MOSSE LEGALI: [${n.join(", ")}]
LIVELLO: ${i}/100 (${s} ELO)
COMPORTAMENTO: ${o}

ISTRUZIONI:
1. Analizza le mosse legali
2. Scegli la migliore per il NERO
3. Rispondi SOLO con la mossa (es: "e7e5")
4. NO spiegazioni, NO testo extra

MOSSA:`:`RUOLO: Esperto Dama Italiana. Giochi con il NERO.

STATO:
FEN: ${e}
MOSSE LEGALI: [${n.join(", ")}]
LIVELLO: ${i}/100

REGOLE CRITICHE:
- Presa obbligatoria se disponibile
- Pedine muovono solo avanti
- Dame muovono in tutte le direzioni

ISTRUZIONI:
1. Analizza le mosse legali
2. RISPETTA la presa obbligatoria
3. Rispondi SOLO con la mossa (es: "c3d4")

MOSSA:`}parseMove(e,n){let r=e.trim().toLowerCase();if(n.includes(r))return r;let i=r.replace(/[^a-z0-9]/g,"");if(n.includes(i))return i;let s=/[a-h][1-8][a-h][1-8]/g,o=e.match(s);if(o){for(let a of o)if(n.includes(a))return a}return console.warn("\u26A0\uFE0F AI ha restituito una mossa non valida:",e),null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var mN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);var kl=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},wd=class extends kl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Nl=class extends kl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Ml=class extends kl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},wg=(function(t){return t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",t})(wg||{});var Ed=class{constructor(e,{headers:n={},customFetch:r,region:i=wg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=mN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return zh(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{let{headers:a,method:l,body:c,signal:u,timeout:h}=r,p={},{region:m}=r;m||(m=this.region);let g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(p["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(p["Content-Type"]="application/json",y=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?y=JSON.stringify(c):y=c;let E=u;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),u?(E=o.signal,u.addEventListener("abort",()=>o.abort())):E=o.signal);let w=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:y,signal:E}).catch(L=>{throw new wd(L)}),I=w.headers.get("x-relay-error");if(I&&I==="true")throw new Nl(w);if(!w.ok)throw new Ml(w);let D=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),b;return D==="application/json"?b=yield w.json():D==="application/octet-stream"||D==="application/pdf"?b=yield w.blob():D==="text/event-stream"?b=w:D==="multipart/form-data"?b=yield w.formData():b=yield w.text(),{data:b,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof Ml||a instanceof Nl?a.context:void 0}}finally{s&&clearTimeout(s)}})}};var yN=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},iJ=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var h,p;if(n.method!=="HEAD"){var m;let w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}let y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),E=(p=s.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&E&&E.length>1&&(l=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;let y=await s.text();try{o=JSON.parse(y),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&y===""?(c=204,u="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new yN(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="",l="",c="",u=s?.cause;if(u){var h,p,m,g;let w=(h=u?.message)!==null&&h!==void 0?h:"",I=(p=u?.code)!==null&&p!==void 0?p:"";a=`${(m=s?.name)!==null&&m!==void 0?m:"FetchError"}: ${s?.message}`,a+=`

Caused by: ${(g=u?.name)!==null&&g!==void 0?g:"Error"}: ${w}`,I&&(a+=` (${I})`),u?.stack&&(a+=`
${u.stack}`)}else{var y;a=(y=s?.stack)!==null&&y!==void 0?y:""}let E=this.url.toString().length;return s?.name==="AbortError"||s?.code==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(u?.name==="HeadersOverflowError"||u?.code==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(l+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:a,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},sJ=class extends iJ{select(t){let e=!1,n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;let a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}},gN=new RegExp("[,()]"),Rl=class extends sJ{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},oJ=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){let{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET",s=!1,o=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Rl({method:i,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;let i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){let a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){let l=[...new Set(a)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new Rl({method:i,url:s,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;let o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){let u=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",u.join(","))}}return new Rl({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;let r="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Rl({method:r,url:i,headers:s,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Rl({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function aJ(t,e){if(_d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lJ(t){var e=aJ(t,"string");return _d(e)=="symbol"?e:e+""}function cJ(t,e,n){return(e=lJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vN(Object(n),!0).forEach(function(r){cJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wN=class EN{constructor(e,{headers:n={},schema:r,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;let a=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(l,c)=>{let u=new AbortController,h=setTimeout(()=>u.abort(),s),p=c?.signal;if(p){if(p.aborted)return clearTimeout(h),a(l,c);let m=()=>{clearTimeout(h),u.abort()};return p.addEventListener("abort",m,{once:!0}),a(l,Eg(Eg({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(h),p.removeEventListener("abort",m)})}return a(l,Eg(Eg({},c),{},{signal:u.signal})).finally(()=>clearTimeout(h))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new oJ(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new EN(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a,l=new URL(`${this.url}/rpc/${e}`),c,u=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(u)),h=r&&Object.values(n).some(u);h?(a="POST",c=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{l.searchParams.append(m,g)})):(a="POST",c=n);let p=new Headers(this.headers);return h?p.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&p.set("Prefer",`count=${s}`),new Rl({method:a,url:l,headers:p,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};var WC=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){let r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},zC=WC;var _N="2.95.3";var CN=`realtime-js/${_N}`,SN="1.0.0",JC="2.0.0",YC=JC;var Cd=1e4,bN=1e3,xN=100,Ts=(function(t){return t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",t})(Ts||{}),Ct=(function(t){return t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",t})(Ct||{}),ar=(function(t){return t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",t})(ar||{}),KC=(function(t){return t.websocket="websocket",t})(KC||{}),Go=(function(t){return t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",t})(Go||{});var _g=class{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;let o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);let p=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+p),g=new DataView(m),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,l.length),g.setUint8(y++,a.length),g.setUint8(y++,o.length),g.setUint8(y++,c.length),g.setUint8(y++,h.length),g.setUint8(y++,n),Array.from(l,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(a,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(o,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(c,w=>g.setUint8(y++,w.charCodeAt(0))),Array.from(h,w=>g.setUint8(y++,w.charCodeAt(0)));var E=new Uint8Array(m.byteLength+r.byteLength);return E.set(new Uint8Array(m),0),E.set(new Uint8Array(r),m.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){let n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){let i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4),l=this.HEADER_LENGTH+4,c=r.decode(e.slice(l,l+i));l=l+i;let u=r.decode(e.slice(l,l+s));l=l+s;let h=r.decode(e.slice(l,l+o));l=l+o;let p=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,g={type:this.BROADCAST_EVENT,event:u,payload:m};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}};var Pl=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Qe=(function(t){return t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",t})(Qe||{}),XC=(t,e,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=uJ(o,t,e,i),s),{}):{}},uJ=(t,e,n,r)=>{let i=e.find(a=>a.name===t),s=i?.type,o=n[t];return s&&!r.includes(s)?TN(s,o):QC(o)},TN=(t,e)=>{if(t.charAt(0)==="_"){let n=t.slice(1,t.length);return pJ(e,n)}switch(t){case Qe.bool:return dJ(e);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return fJ(e);case Qe.json:case Qe.jsonb:return hJ(e);case Qe.timestamp:return mJ(e);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return QC(e);default:return QC(e)}},QC=t=>t,dJ=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fJ=t=>{if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hJ=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},pJ=(t,e)=>{if(typeof t!="string")return t;let n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s,o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>TN(e,a))}return t},mJ=t=>typeof t=="string"?t.replace(" ","T"):t,Cg=t=>{let e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var Ll=class{constructor(e,n,r={},i=Cd){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Sd=class t{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=t.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=t.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){let s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let h=s[c];if(h){let p=u.map(E=>E.presence_ref),m=h.map(E=>E.presence_ref),g=u.filter(E=>m.indexOf(E.presence_ref)<0),y=h.filter(E=>p.indexOf(E.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){let{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;let u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){let h=e[a].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;let u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{let i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var bd=(function(t){return t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",t})(bd||{}),Li=(function(t){return t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",t})(Li||{});var xd=class t{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ll(this,ar.join,this.params,this.timeout),this.rejoinTimer=new Pl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ar.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Sd(this),this.broadcastEndpointURL=Cg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){let{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[bd.PRESENCE]&&this.bindings[bd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(Li.CHANNEL_ERROR,m)),this._onClose(()=>e?.(Li.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e?.(Li.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,E=(g=y?.length)!==null&&g!==void 0?g:0,w=[];for(let I=0;I<E;I++){let D=y[I],{filter:{event:b,schema:L,table:M,filter:q}}=D,z=m&&m[I];if(z&&z.event===b&&t.isFilterValueEqual(z.schema,L)&&t.isFilterValueEqual(z.table,M)&&t.isFilterValueEqual(z.filter,q))w.push(Object.assign(Object.assign({},D),{id:z.id}));else{this.unsubscribe(),this.state=Ct.errored,e?.(Li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Li.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ct.errored,e?.(Li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(Li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ct.joined&&e===bd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);let o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{let c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{let c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;let c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ct.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ar.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ll(this,ar.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ll(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xN){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ar;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,y,E;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((E=(y=m.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,y,E,w,I,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){let b=m.id,L=(g=m.filter)===null||g===void 0?void 0:g.event;return b&&((y=n.ids)===null||y===void 0?void 0:y.includes(b))&&(L==="*"||L?.toLocaleLowerCase()===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let b=(I=(w=m?.filter)===null||w===void 0?void 0:w.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return b==="*"||b===((D=n?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:y,table:E,commit_timestamp:w,type:I,errors:D}=g;p=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:w,eventType:I,new:{},old:{},errors:D}),this._getPayloadRecords(g))}m.callback(p,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){let i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&t.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(let r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ar.close,{},e)}_onError(e){this._on(ar.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=XC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=XC(e.columns,e.old_record)),n}};var ZC=()=>{},Sg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vJ=[1e3,2e3,5e3,1e4],yJ=1e4,wJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Td=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cd,this.transport=null,this.heartbeatIntervalMs=Sg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ZC,this.ref=0,this.reconnectTimer=null,this.vsn=YC,this.logger=ZC,this.conn=null,this.sendBuffer=[],this.serializer=new _g,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${KC.websocket}`,this.httpEndpoint=Cg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zC.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ts.connecting:return Go.Connecting;case Ts.open:return Go.Open;case Ts.closing:return Go.Closing;default:return Go.Closed}}isConnected(){return this.connectionState()===Go.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{let s=new xd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){let{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Sg.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ts.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ts.open||this.conn.readyState===Ts.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ar.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{let r=new Blob([wJ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let s={access_token:n,version:CN};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(ar.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Pl(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,h,p,m;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Cd,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Sg.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:ZC,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:YC,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:g=>vJ[g-1]||yJ,this.vsn){case SN:this.encode=(u=e?.encode)!==null&&u!==void 0?u:(g,y)=>y(JSON.stringify(g)),this.decode=(h=e?.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case JC:this.encode=(p=e?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};var Id=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function EJ(t,e,n){let r=new URL(e,t);if(n)for(let[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function _J(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function CJ(t){let e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){let a=EJ(t.baseUrl,r,i),l=await _J(t.auth),c=await e(a,{method:n,headers:A(A(A({},s?{"Content-Type":"application/json"}:{}),l),o),body:s?JSON.stringify(s):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),p=h&&u?JSON.parse(u):u;if(!c.ok){let m=h?p:void 0,g=m?.error;throw new Id(g?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:g?.type,icebergCode:g?.code,details:m})}return{status:c.status,headers:c.headers,data:p}}}}function bg(t){return t.join("")}var SJ=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){let e=t?{parent:bg(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){let n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bg(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bg(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bg(t.namespace)}`}),!0}catch(e){if(e instanceof Id&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Id&&n.status===409)return;throw n}}};function Ol(t){return t.join("")}var bJ=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){let e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ol(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Id&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Id&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},IN=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);let n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=CJ({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new SJ(this.client,e),this.tableOps=new bJ(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};var Tg=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Ig(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var xg=class extends Tg{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},NN=class extends Tg{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};var xJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TJ=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eS=t=>{if(Array.isArray(t))return t.map(n=>eS(n));if(typeof t=="function"||t!==Object(t))return t;let e={};return Object.entries(t).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=eS(r)}),e},IJ=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(t)}function AJ(t,e){if(Dd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DJ(t){var e=AJ(t,"string");return Dd(e)=="symbol"?e:e+""}function kJ(t,e,n){return(e=DJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(n),!0).forEach(function(r){kJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var DN=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},NJ=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){let i=t,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{let a=o?.statusCode||o?.code||s+"";e(new xg(DN(o),s,a,r))}).catch(()=>{if(r==="vectors"){let o=s+"";e(new xg(i.statusText||`HTTP ${s} error`,s,o,r))}else{let o=s+"";e(new xg(i.statusText||`HTTP ${s} error`,s,o,r))}});else{let o=s+"";e(new xg(i.statusText||`HTTP ${s} error`,s,o,r))}}else e(new NN(DN(t),t,r))},MJ=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?ce(ce({},i),n):(TJ(r)?(i.headers=ce({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),ce(ce({},i),n))};async function Ad(t,e,n,r,i,s,o){return new Promise((a,l)=>{t(n,MJ(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;if(o==="vectors"){let u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>NJ(c,l,r,o))})}function MN(t="storage"){return{get:async(e,n,r,i)=>Ad(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,s)=>Ad(e,"POST",n,i,s,r,t),put:async(e,n,r,i,s)=>Ad(e,"PUT",n,i,s,r,t),head:async(e,n,r,i)=>Ad(e,"HEAD",n,ce(ce({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,s)=>Ad(e,"DELETE",n,i,s,r,t)}}var RJ=MN("storage"),{get:kd,post:Pr,put:tS,head:PJ,remove:nS}=RJ,Hn=MN("vectors"),Fl=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=xJ(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ig(n))return{data:null,error:n};throw n}}},LJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ig(e))return{data:null,error:e};throw e}}},RN;RN=Symbol.toStringTag;var OJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[RN]="BlobDownloadBuilder",this.promise=null}asStream(){return new LJ(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ig(e))return{data:null,error:e};throw e}}},FJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},BJ=class extends Fl{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let s,o=ce(ce({},kN),r),a=ce(ce({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=ce(ce({},a),r.headers));let c=i._removeEmptyFolders(e),u=i._getFinalPath(c),h=await(t=="PUT"?tS:Pr)(i.fetch,`${i.url}/object/${u}`,s,ce({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;let s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),i.handleOperation(async()=>{let l,c=ce({upsert:kN.upsert},r),u=ce(ce({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:s,fullPath:(await tS(i.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t),i=ce({},n.headers);e?.upsert&&(i["x-upsert"]="true");let s=await Pr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new Tg("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Pr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Pr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),s=await Pr(r.fetch,`${r.url}/object/sign/${i}`,ce({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{let i=await Pr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(o=>ce(ce({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null}))})}download(t,e,n){let r=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",o=this._getFinalPath(t),a=()=>kd(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0},n);return new OJ(a,this.shouldThrowOnError)}async info(t){var e=this;let n=e._getFinalPath(t);return e.handleOperation(async()=>eS(await kd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;let n=e._getFinalPath(t);try{return await PJ(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ig(r)&&r instanceof NN){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){let n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);let s=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await nS(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{let i=ce(ce(ce({},FJ),e),{},{prefix:t||""});return await Pr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{let r=ce({},t);return await Pr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}},VJ="2.95.3",Nd={"X-Client-Info":`storage-js/${VJ}`},UJ=class extends Fl{constructor(t,e={},n,r){let i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let s=i.href.replace(/\/$/,""),o=ce(ce({},Nd),e);super(s,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{let n=e.listBucketOptionsToQueryString(t);return await kd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await kd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Pr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await tS(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Pr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await nS(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},$J=class extends Fl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Nd),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Pr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{let n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);let r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await kd(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await nS(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!IJ(t))throw new Tg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new IN({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){let o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},HJ=class extends Fl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Nd),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Hn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Hn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},qJ=class extends Fl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Nd),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},GJ=class extends Fl{constructor(t,e={},n){let r=t.replace(/\/$/,""),i=ce(ce({},Nd),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Hn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},jJ=class extends GJ{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new WJ(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},WJ=class extends HJ{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new zJ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},zJ=class extends qJ{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},PN=class extends UJ{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new BJ(this.url,this.headers,t,this.fetch)}get vectors(){return new jJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $J(this.url+"/iceberg",this.headers,this.fetch)}};var Ag="2.95.3";var jo=30*1e3,Dg=3,kg=Dg*jo,LN="http://localhost:9999",ON="supabase.auth.token";var FN={"X-Client-Info":`gotrue-js/${Ag}`};var Md="X-Supabase-Api-Version",rS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VN=600*1e3;var Is=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function W(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}var Ng=class extends Is{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function UN(t){return W(t)&&t.name==="AuthApiError"}var lr=class extends Is{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Lr=class extends Is{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},Bt=class extends Lr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Rg(t){return W(t)&&t.name==="AuthSessionMissingError"}var Oi=class extends Lr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Wo=class extends Lr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},zo=class extends Lr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function $N(t){return W(t)&&t.name==="AuthImplicitGrantRedirectError"}var Rd=class extends Lr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Mg=class extends Lr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var Bl=class extends Lr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function Pg(t){return W(t)&&t.name==="AuthRetryableFetchError"}var Pd=class extends Lr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var Jo=class extends Lr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var Lg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),HN=` 	
\r=`.split(""),JJ=(()=>{let t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<HN.length;e+=1)t[HN[e].charCodeAt(0)]=-2;for(let e=0;e<Lg.length;e+=1)t[Lg[e].charCodeAt(0)]=e;return t})();function qN(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(Lg[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(Lg[r]),e.queuedBits-=6}}function GN(t,e,n){let r=JJ[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function iS(t){let e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{QJ(o,r,n)};for(let o=0;o<t.length;o+=1)GN(t.charCodeAt(o),i,s);return e.join("")}function YJ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function KJ(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}YJ(r,e)}}function QJ(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function As(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)GN(t.charCodeAt(i),n,r);return new Uint8Array(e)}function jN(t){let e=[];return KJ(t,n=>e.push(n)),new Uint8Array(e)}function Fi(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>qN(i,n,r)),qN(null,n,r),e.join("")}function WN(t){return Math.round(Date.now()/1e3)+t}function zN(){return Symbol("auth-callback")}var St=()=>typeof window<"u"&&typeof document<"u",Yo={tested:!1,writable:!1},Og=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yo.tested)return Yo.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yo.tested=!0,Yo.writable=!0}catch{Yo.tested=!0,Yo.writable=!1}return Yo.writable};function JN(t){let e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}var Fg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),YN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ko=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ds=async(t,e)=>{let n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},At=async(t,e)=>{await t.removeItem(e)},Ld=class t{constructor(){this.promise=new t.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};Ld.promiseConstructor=Promise;function Od(t){let e=t.split(".");if(e.length!==3)throw new Jo("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BN.test(e[r]))throw new Jo("JWT not in base64url format");return{header:JSON.parse(iS(e[0])),payload:JSON.parse(iS(e[1])),signature:As(e[2]),raw:{header:e[0],payload:e[1]}}}async function KN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QN(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{let o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function XJ(t){return("0"+t.toString(16)).substr(-2)}function ZJ(){let e=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,XJ).join("")}async function eY(t){let n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function tY(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;let n=await eY(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qo(t,e,n=!1){let r=ZJ(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ko(t,`${e}-code-verifier`,i);let s=await tY(r);return[s,r===s?"plain":"s256"]}var nY=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XN(t){let e=t.headers.get(Md);if(!e||!e.match(nY))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ZN(t){if(!t)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function eM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var rY=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xo(t){if(!rY.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bg(){let t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tM(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function sS(t){return JSON.parse(JSON.stringify(t))}var Zo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iY=[502,503,504];async function nM(t){var e;if(!YN(t))throw new Bl(Zo(t),0);if(iY.includes(t.status))throw new Bl(Zo(t),t.status);let n;try{n=await t.json()}catch(s){throw new lr(Zo(s),s)}let r,i=XN(t);if(i&&i.getTime()>=rS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pd(Zo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Bt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Pd(Zo(n),t.status,n.weak_password.reasons);throw new Ng(Zo(n),t.status||500,r)}var sY=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ne(t,e,n,r){var i;let s=Object.assign({},r?.headers);s[Md]||(s[Md]=rS["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await oY(t,e,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function oY(t,e,n,r,i,s){let o=sY(e,r,i,s),a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Bl(Zo(l),0)}if(a.ok||await nM(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await nM(l)}}function cr(t){var e;let n=null;aY(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=WN(t.expires_in)));let r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function oS(t){let e=cr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function rM(t){return{data:t,error:null}}function iM(t){let{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=go(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function aS(t){return t}function aY(t){return t.access_token&&t.refresh_token&&t.expires_in}var Vg=["global","local","others"];var Vl=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Fg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Vg[0]){if(Vg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vg.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fi})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{let{options:n}=e,r=go(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:iM,redirectTo:n?.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fi})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:aS});if(u.error)throw u.error;let h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{let y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(g.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(W(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Xo(e);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fi})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Xo(e);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:fi})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Xo(e);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:fi})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Xo(e.userId);try{let{data:n,error:r}=await ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Xo(e.userId),Xo(e.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:aS});if(u.error)throw u.error;let h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{let y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(g.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(W(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}};function lS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}var ea={debug:!!(globalThis&&Og()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Fd=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Ug=class extends Fd{};async function cS(t,e,n){ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ea.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ug(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ea.debug)try{let s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function sM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function uS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function oM(t){return parseInt(t,16)}function aM(t){let e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function lM(t){var e;let{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}let m=uS(t.address),g=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",E=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`,w=`URI: ${h}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let I=`
Resources:`;for(let D of c){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);I+=`
- ${D}`}w+=I}return`${E}
${w}`}var tt=class extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}},ta=class extends tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}};function cM({error:t,options:e}){var n,r,i;let{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){let o=window.location.hostname;if(dS(o)){if(s.rp.id!==o)return new tt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function uM({error:t,options:e}){let{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){let r=window.location.hostname;if(dS(r)){if(n.rpId!==r)return new tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var fS=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},lY=new fS;function fM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);let{challenge:e,user:n,excludeCredentials:r}=t,i=go(t,["challenge","user","excludeCredentials"]),s=As(e).buffer,o=Object.assign(Object.assign({},n),{id:As(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:As(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function hM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);let{challenge:e,allowCredentials:n}=t,r=go(t,["challenge","allowCredentials"]),i=As(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){let a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:As(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function pM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fi(new Uint8Array(i.authenticatorData)),clientDataJSON:Fi(new Uint8Array(i.clientDataJSON)),signature:Fi(new Uint8Array(i.signature)),userHandle:i.userHandle?Fi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function dM(){var t,e;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function cY(t){try{let e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ta("Browser returned unexpected credential type",e)}:{data:null,error:new ta("Empty credential response",e)}}catch(e){return{data:null,error:cM({error:e,options:t})}}}async function uY(t){try{let e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ta("Browser returned unexpected credential type",e)}:{data:null,error:new ta("Empty credential response",e)}}catch(e){return{data:null,error:uM({error:e,options:t})}}}var dY={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fY={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $g(...t){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of t)if(i)for(let s in i){let o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){let a=r[s];e(a)?r[s]=$g(a,o):r[s]=$g(o)}else r[s]=o}return r}function hY(t,e){return $g(dY,t,e||{})}function pY(t,e){return $g(fY,t,e||{})}var Hg=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){var o;try{let{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};let c=i??lY.createNewAbortSignal();if(a.webauthn.type==="create"){let{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){let h=r;if(h)u.name=`${u.id}:${h}`;else{let m=(await this.client.getUser()).data.user,g=((o=m?.user_metadata)===null||o===void 0?void 0:o.name)||m?.email||m?.id||"User";u.name=`${u.id}:${g}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{let u=hY(a.webauthn.credential_options.publicKey,s?.create),{data:h,error:p}=await cY({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{let u=pY(a.webauthn.credential_options.publicKey,s?.request),{data:h,error:p}=await uY(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return W(a)?{data:null,error:a}:{data:null,error:new lr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Is("rpId is required for WebAuthn authentication")};try{if(!dM())return{data:null,error:new lr("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};let{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new lr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Is("rpId is required for WebAuthn registration")};try{if(!dM())return{data:null,error:new lr("Browser does not support WebAuthn",null)};let{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new lr("Unexpected error in register",o)}}}};sM();var mY={url:LN,storageKey:ON,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gM(t,e,n){return await n()}var Ul={},gY=(()=>{class t{get jwks(){var n,r;return(r=(n=Ul[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ul[this.storageKey]=Object.assign(Object.assign({},Ul[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ul[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ul[this.storageKey]=Object.assign(Object.assign({},Ul[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let o=Object.assign(Object.assign({},mY),n);if(this.storageKey=o.storageKey,this.instanceID=(r=t.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,t.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&St()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Vl({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Fg(o.fetch),this.lock=o.lock||gM,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&St()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=cS:this.lock=gM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Hg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Og()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=lS(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ag}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(St()&&(r=JN(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),St()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=await this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),$N(o)){let c=(n=o.details)===null||n===void 0?void 0:n.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return{error:o}}let{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?this._returnResult({error:r}):this._returnResult({error:new lr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,s;try{let o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=n?.options)===null||s===void 0?void 0:s.captchaToken}},xform:cr}),{data:a,error:l}=o;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(n){var r,i,s;try{let o;if("email"in n){let{email:h,password:p,options:m}=n,g=null,y=null;this.flowType==="pkce"&&([g,y]=await Qo(this.storage,this.storageKey)),o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},xform:cr})}else if("phone"in n){let{phone:h,password:p,options:m}=n;o=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=m?.data)!==null&&i!==void 0?i:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:cr})}else throw new Wo("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return await At(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(n){try{let r;if("email"in n){let{email:o,password:a,options:l}=n;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:oS})}else if("phone"in n){let{phone:o,password:a,options:l}=n;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:oS})}else throw new Wo("You must provide either an email or phone number and a password");let{data:i,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){let o=new Oi;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,s,o;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=n.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=n.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,s,o,a,l,c,u,h,p,m;let g,y;if("message"in n)g=n.message,y=n.signature;else{let{chain:E,wallet:w,statement:I,options:D}=n,b;if(St())if(typeof w=="object")b=w;else{let le=window;if("ethereum"in le&&typeof le.ethereum=="object"&&"request"in le.ethereum&&typeof le.ethereum.request=="function")b=le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}let L=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href),M=await b.request({method:"eth_requestAccounts"}).then(le=>le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let q=uS(M[0]),z=(i=D?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!z){let le=await b.request({method:"eth_chainId"});z=oM(le)}let re={domain:L.host,address:q,statement:I,uri:L.href,version:"1",chainId:z,nonce:(s=D?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=D?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=D?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=D?.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=lM(re),y=await b.request({method:"personal_sign",params:[aM(g),q]})}try{let{data:E,error:w}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((p=n.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=n.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:cr});if(w)throw w;if(!E||!E.session||!E.user){let I=new Oi;return this._returnResult({data:{user:null,session:null},error:I})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:w})}catch(E){if(W(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(n){var r,i,s,o,a,l,c,u,h,p,m,g;let y,E;if("message"in n)y=n.message,E=n.signature;else{let{chain:w,wallet:I,statement:D,options:b}=n,L;if(St())if(typeof I=="object")L=I;else{let q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))L=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=I}let M=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){let q=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),D?{statement:D}:null)),z;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")z=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)z=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)y=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),E=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${M.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(s=(i=b?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((p=(h=b?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...b.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);let q=await L.signMessage(new TextEncoder().encode(y),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=q}}try{let{data:w,error:I}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Fi(E)},!((m=n.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:cr});if(I)throw I;if(!w||!w.session||!w.user){let D=new Oi;return this._returnResult({data:{user:null,session:null},error:D})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:I})}catch(w){if(W(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(n){let r=await Ds(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Mg;let{data:o,error:a}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:cr});if(await At(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){let l=new Oi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(n){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=n,l=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:cr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){let h=new Oi;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,s,o,a;try{if("email"in n){let{email:l,options:c}=n,u=null,h=null;this.flowType==="pkce"&&([u,h]=await Qo(this.storage,this.storageKey));let{error:p}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in n){let{phone:l,options:c}=n,{data:u,error:h}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new Wo("You must provide either an email or phone number.")}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(n){var r,i;try{let s,o;"options"in n&&(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo,o=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:cr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(n){var r,i,s,o,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Qo(this.storage,this.storageKey));let u=await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=n?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:rM});return!((o=u.data)===null||o===void 0)&&o.url&&St()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Bt;let{error:s}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:s,options:o}=n,{error:a}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:s,options:o}=n,{data:a,error:l}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:l})}throw new Wo("You must provide either an email or phone number and a type")}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await Ds(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<kg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await Ds(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Bg()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=tM(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:s,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:fi}):await this._useSession(async r=>{var i,s,o;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:fi})})}catch(r){if(W(r))return Rg(r)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:s,error:o}=i;if(o)throw o;if(!s.session)throw new Bt;let a=s.session,l=null,c=null;this.flowType==="pkce"&&n.email!=null&&([l,c]=await Qo(this.storage,this.storageKey));let{data:u,error:h}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:fi});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Bt;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=Od(n.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{data:l,error:c}=await this._callRefreshToken(n.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=await this._getUser(n.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});o={access_token:n.access_token,refresh_token:n.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(W(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:l}=r;if(l)throw l;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Bt;let{data:s,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!St())throw new zo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new zo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Rd("No code detected.");let{data:D,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;let L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:D.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=n;if(!o||!l||!a||!u)throw new zo("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(l),m=h+p;c&&(m=parseInt(c));let g=m-h;g*1e3<=jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let y=m-p;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,h);let{data:E,error:w}=await this._getUser(o);if(w)throw w;let I={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:m,refresh_token:a,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:n.type},error:null})}catch(i){if(W(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await Ds(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o&&!Rg(o))return this._returnResult({error:o});let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,n);if(l&&!(UN(l)&&(l.status===404||l.status===401||l.status===403)||Rg(l)))return this._returnResult({error:l})}return n!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=zN(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",n,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",o),console.error(o)}})}async resetPasswordForEmail(n,r={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Qo(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:s}=await this._useSession(async o=>{var a,l,c,u,h;let{data:p,error:m}=o;if(m)throw m;let g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return St()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(W(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:s,data:{session:o}}=r;if(s)throw s;let{options:a,provider:l,token:c,access_token:u,nonce:h}=n,p=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:cr}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Oi}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(s){if(await At(this.storage,`${this.storageKey}-code-verifier`),W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)throw a;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await QN(async s=>(s>0&&await KN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:cr})),(s,o)=>{let a=200*Math.pow(2,s);return o&&Pg(o)&&Date.now()+a-i<jo})}catch(i){if(this._debug(r,"error",i),W(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),St()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let s=await Ds(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ds(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ko(this.userStorage,this.storageKey+"-user",a)),s.user=(n=a?.user)!==null&&n!==void 0?n:Bg()}else if(s&&!s.user&&!s.user){let a=await Ds(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await At(this.storage,this.storageKey+"-user"),await Ko(this.storage,this.storageKey,s)):s.user=Bg()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}let o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kg;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${kg}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Pg(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:l}=await this._getUser(s.access_token);!l&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ld;let{data:o,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!o.session)throw new Bt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),W(o)){let a={data:null,error:o};return Pg(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(n,r,i=!0){let s=`#_notifyAllSubscribers(${n})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(n,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await At(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Ko(this.userStorage,this.storageKey+"-user",{user:r.user});let s=Object.assign({},r);delete s.user;let o=sS(s);await Ko(this.storage,this.storageKey,o)}else{let s=sS(r);await Ko(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await At(this.storage,this.storageKey),await At(this.storage,this.storageKey+"-code-verifier"),await At(this.storage,this.storageKey+"-user"),this.userStorage&&await At(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),jo);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-n)/jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jo}ms, refresh threshold is ${Dg} ticks`),s<=Dg&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Fd)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=await Qo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${s.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await ne(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,s;let{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});let l=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:c,error:u}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?pM(n.webauthn.credential_response):mM(n.webauthn.credential_response)})}:{code:n.code}),{data:l,error:c}=await ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});let a=await ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:fM(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:hM(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let s={all:[],phone:[],totp:[],webauthn:[]};for(let o of(n=r?.factors)!==null&&n!==void 0?n:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,s,o;if(n)try{let{payload:g}=Od(n),y=null;g.aal&&(y=g.aal);let E=y,{data:{user:w},error:I}=await this.getUser(n);if(I)return this._returnResult({data:null,error:I});((i=(r=w?.factors)===null||r===void 0?void 0:r.filter(L=>L.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(E="aal2");let b=g.amr||[];return{data:{currentLevel:y,nextLevel:E,currentAuthenticationMethods:b},error:null}}catch(g){if(W(g))return this._returnResult({data:null,error:g});throw g}let{data:{session:a},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:c}=Od(a.access_token),u=null;c.aal&&(u=c.aal);let h=u;((o=(s=a.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(h="aal2");let m=c.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?await ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Bt});let a=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:s},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Bt});let a=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;return s?this._returnResult({data:null,error:s}):i?(await ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bt})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(l=>l.kid===n);if(i)return i;let s=Date.now();if(i=this.jwks.keys.find(l=>l.kid===n),i&&this.jwks_cached_at+VN>s)return i;let{data:o,error:a}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,i=o.keys.find(l=>l.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});i=g.session.access_token}let{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=Od(i);r?.allowExpired||ZN(o.exp);let u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:o,header:s,signature:a},error:null}}let h=eM(s.alg),p=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,jN(`${l}.${c}`)))throw new Jo("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(i){if(W(i))return this._returnResult({data:null,error:i});throw i}}}return t.nextInstanceID={},t})(),hS=gY;var vY=hS,pS=vY;var yY="2.95.3",Bd="";typeof Deno<"u"?Bd="deno":typeof document<"u"?Bd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bd="react-native":Bd="node";var wY={"X-Client-Info":`supabase-js-${Bd}/${yY}`},EY={headers:wY},_Y={schema:"public"},CY={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SY={};function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function bY(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xY(t){var e=bY(t,"string");return Vd(e)=="symbol"?e:e+""}function TY(t,e,n){return(e=xY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vM(Object(n),!0).forEach(function(r){TY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var IY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),AY=()=>Headers,DY=(t,e,n)=>{let r=IY(n),i=AY();return async(s,o)=>{var a;let l=(a=await e())!==null&&a!==void 0?a:t,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,st(st({},o),{},{headers:c}))}};function kY(t){return t.endsWith("/")?t:t+"/"}function NY(t,e){var n,r;let{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,p={db:st(st({},l),i),auth:st(st({},c),s),realtime:st(st({},u),o),storage:{},global:st(st(st({},h),a),{},{headers:st(st({},(n=h?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function MY(t){let e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(kY(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var RY=class extends pS{constructor(t){super(t)}},PY=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;let s=MY(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);let o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:_Y,realtime:SY,auth:st(st({},CY),{},{storageKey:o}),global:EY},l=NY(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=DY(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(st({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new wN(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new PN(this.storageUrl.href,this.headers,this.fetch,n?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Ed(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();let{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,h){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RY({url:this.authUrl.href,headers:st(st({},p),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Td(this.realtimeUrl.href,st(st({},t),{},{params:st(st({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},yM=(t,e,n)=>new PY(t,e,n);function LY(){if(typeof window<"u")return!1;let t=globalThis.process;if(!t)return!1;let e=t.version;if(e==null)return!1;let n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}LY()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var _n=class t{constructor(){this.user=Be(null);this.username=Be(null);this.avatarUrl=Be(null);this.loading=Be(!0);this.supabaseUrl="https://xxvlfbozkveeydritfeo.supabase.co";this.supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4dmxmYm96a3ZlZXlkcml0ZmVvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5MDAyOTYsImV4cCI6MjA4NjQ3NjI5Nn0.P43jKtqWYzvBoBcW69BUWssCb68nU5m6zw03PdRf1vs";this.authService={signUp:async(e,n,r)=>{console.log("AuthService: Tentativo registrazione per",r);let{data:i}=await this.supabase.from("profiles").select("username, nickname").or(`username.ilike.${r},nickname.ilike.${r}`).maybeSingle();if(i)return{data:{user:null,session:null},error:{message:`Il nome "${r}" \xE8 gi\xE0 in uso.`}};let s=await this.supabase.auth.signUp({email:e,password:n,options:{data:{username:r}}});return s.error||s.data.user&&await this.supabase.from("profiles").upsert({id:s.data.user.id,username:r,nickname:r,email:e}),s},signIn:async(e,n)=>{console.log("AuthService: Login per",e);let{data:r,error:i}=await this.supabase.from("profiles").select("email").or(`username.eq.${e},nickname.eq.${e}`).maybeSingle();return i?{data:null,error:i}:r?await this.supabase.auth.signInWithPassword({email:r.email,password:n}):{data:null,error:{message:"Operatore non trovato."}}},signOut:async()=>{await this.supabase.auth.signOut(),this.user.set(null),this.username.set(null),this.avatarUrl.set(null)}};this.profileService={getProfile:async e=>{let{data:n,error:r}=await this.supabase.from("profiles").select("*").eq("id",e).maybeSingle();return{data:n,error:r}},getCareerProgress:async e=>{let{data:n,error:r}=await this.supabase.from("career_progress").select("*").eq("user_id",e).maybeSingle();if(!n&&!r){let i={user_id:e,chess_level:1,checkers_level:1,total_points:0},{data:s}=await this.supabase.from("career_progress").insert(i).select().maybeSingle();return{data:s||i,error:null}}return{data:n,error:r}}};this.supabase=yM(this.supabaseUrl,this.supabaseKey),this.initAuth()}async initAuth(){let{data:{session:e}}=await this.supabase.auth.getSession();this.user.set(e?.user??null),await this.fetchProfile(e?.user?.id),this.loading.set(!1),this.supabase.auth.onAuthStateChange(async(n,r)=>{this.user.set(r?.user??null),await this.fetchProfile(r?.user?.id)})}async fetchProfile(e){if(!e){this.username.set(null),this.avatarUrl.set(null);return}let{data:n}=await this.supabase.from("profiles").select("username, avatar_url").eq("id",e).maybeSingle();this.username.set(n?.username??null),this.avatarUrl.set(n?.avatar_url??null)}async loadUserProfile(){let e=this.user()?.id;e&&await this.fetchProfile(e)}get client(){return this.supabase}async signUp(e,n,r){return this.authService.signUp(e,n,r)}async signInWithNickname(e,n){return this.authService.signIn(e,n)}async signOut(){return this.authService.signOut()}async getCareerProgress(){let{data:e}=await this.profileService.getCareerProgress(this.user()?.id||"");return e}async saveCareerGame(e,n,r){let i=this.user()?.id;i&&await this.supabase.from("career_progress").upsert({user_id:i,current_game_state:{type:e,level:n,state:r},updated_at:new Date().toISOString()})}async updateCareerProgress(e,n,r){let i=this.user()?.id;if(!i)return;let s=await this.getCareerProgress(),o=e==="chess"?"chess_level":"checkers_level",a=Math.max(s[o],n+1);await this.supabase.from("career_progress").upsert({user_id:i,[o]:a,total_points:(s.total_points||0)+r,games_played:(s.games_played||0)+1,games_won:(s.games_won||0)+1,current_game_state:null,updated_at:new Date().toISOString()})}async trackGamePlayed(){let e=this.user()?.id;if(!e)return;let n=await this.getCareerProgress();await this.supabase.from("career_progress").upsert({user_id:e,games_played:(n.games_played||0)+1,updated_at:new Date().toISOString()})}async clearSavedGame(){let e=this.user()?.id;e&&await this.supabase.from("career_progress").update({current_game_state:null}).eq("user_id",e)}async saveUserAssetPreference(e,n){let r=this.user()?.id;if(!r)return;let{data:i}=await this.supabase.from("profiles").select("active_assets").eq("id",r).maybeSingle(),s=i?.active_assets||{};s[e]=n,await this.supabase.from("profiles").update({active_assets:s}).eq("id",r)}async getUserAssetPreferences(){let e=this.user()?.id;if(!e)return{};let{data:n}=await this.supabase.from("profiles").select("active_assets").eq("id",e).maybeSingle();return n?.active_assets||{}}async uploadCustomAssetFile(e,n){let r=this.user()?.id;if(!r)throw new Error("User not logged in");let i=e.name.split(".").pop()||"glb",s=`${r}/${n}.${i}`,{error:o}=await this.supabase.storage.from("custom_assets").upload(s,e,{upsert:!0});if(o)throw o;let{data:a}=this.supabase.storage.from("custom_assets").getPublicUrl(s);return a.publicUrl}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var Cn=class t{constructor(){this.aiService=ae(yg);this.supabase=ae(_n);this.viewState=Be("home");this.gameMode=Be("chess");this.playerMode=Be("local");this.board=Be(an.createInitialBoard("chess"));this.turn=Be("w");this.selectedPos=Be(null);this.pieceStyle=Be("classic");this.useOriginalTexture=Be(!1);this.bgBlur=Be(!0);this.customMeshUrls=Be({});this.careerLevel=Be(1);this.careerPoints=Be(0);this.isCareerGame=ki(()=>this.playerMode()==="career");this.lastMove=Be(null);this.validMoves=ki(()=>{let e=this.selectedPos();return e?an.getLegalMoves(this.board(),e,this.gameMode(),this.lastMove()):[]});this.isAiThinking=Be(!1);this.isGameOver=Be(!1);this.gameStatus=Be("Tocca al Bianco")}setPieceStyle(e){this.pieceStyle.set(e)}async loadUserAssets(){if(this.supabase.user())try{let e=await this.supabase.getUserAssetPreferences();if(e&&Object.keys(e).length>0){let n=!1;this.customMeshUrls.update(r=>{let i=A({},r);return Object.keys(e).forEach(s=>{i[s]=e[s],s!=="board"&&(n=!0)}),i}),n&&this.setPieceStyle("custom"),console.log("\u2705 GameService: Custom Assets Synchronized",e)}}catch(e){console.error("\u274C GameService: Error syncing assets",e)}}toggleOriginalTexture(e){this.useOriginalTexture.set(e),this.pieceStyle()==="custom"&&this.pieceStyle.set("custom")}setView(e){this.viewState.set(e)}startGame(e,n="local",r){this.gameMode.set(e),this.playerMode.set(n),n==="career"&&r&&this.careerLevel.set(r),this.resetGame(),this.viewState.set("game"),this.supabase.user()&&this.supabase.trackGamePlayed()}setGameMode(e){this.gameMode.set(e),this.resetGame()}selectSquare(e){if(this.isAiThinking()||this.isGameOver())return;let r=this.board()[e.row][e.col],i=this.selectedPos();if(r&&r.color===this.turn()){this.selectedPos.set(e);return}i&&(this.validMoves().some(a=>a.row===e.row&&a.col===e.col)?this.executeMove(i,e):this.selectedPos.set(null))}async executeMove(e,n){let r=this.board(),i=r[e.row][e.col];if(!i||i.color!==this.turn()){console.warn("Attempted to move invalid piece");return}let s=this.gameMode(),o=null,a=null,l=!1;if(s==="checkers"){if(Math.abs(n.row-e.row)===2){let g=(e.row+n.row)/2,y=(e.col+n.col)/2;o=r[g][y],a={row:g,col:y},l=!0}}else{let g=r[n.row][n.col];g&&(o=g,a=A({},n),l=!0),i.type==="n"&&(l=!0)}let c={from:e,to:n,piece:A({},i),capturedPiece:o,capturedPos:a,isJump:l};this.board.update(g=>{let y=g.map(w=>[...w]),E=A({},y[e.row][e.col]);if(E.hasMoved=!0,E.type==="p"&&!o&&n.col!==e.col){let w=e.row,I=n.col;y[w][I]=null}if(E.type==="k"&&Math.abs(n.col-e.col)===2){let w=n.col===6,I=w?7:0,D=w?5:3,b=A({},y[e.row][I]);b.hasMoved=!0,y[e.row][D]=b,y[e.row][I]=null}return s==="chess"&&E.type==="p"&&(E.color==="w"&&n.row===0||E.color==="b"&&n.row===7)&&(E.type="q",c.piece=A({},E)),s==="checkers"&&E?.type==="cm"&&(E.color==="w"&&n.row===0||E.color==="b"&&n.row===7)&&(E.type="ck",c.piece=A({},E)),a&&s==="checkers"&&(y[a.row][a.col]=null),y[n.row][n.col]=E,y[e.row][e.col]=null,y}),this.lastMove.set(c),this.selectedPos.set(null);let u=this.turn()==="w"?"b":"w";this.turn.set(u);let h=this.board(),p=!1,m=null;if(s==="chess"?an.isCheckmate(h,u)?(this.gameStatus.set(`SCACCO MATTO! Vince il ${this.turn()==="b"?"Bianco":"Nero"}`),p=!0,m=this.turn()):an.isStalemate(h,u)?(this.gameStatus.set("STALLO! Pareggio."),p=!0,m="draw"):an.isKingInCheck(h,u)?this.gameStatus.set(`SCACCO al ${u==="w"?"Bianco":"Nero"}!`):this.gameStatus.set(`Tocca al ${u==="w"?"Bianco":"Nero"}`):this.getAllLegalMoves(u).length>0?this.gameStatus.set(`Tocca al ${u==="w"?"Bianco":"Nero"}`):(this.gameStatus.set(`${this.turn()==="b"?"Bianco":"Nero"} vince!`),p=!0,m=this.turn()),p){this.isGameOver.set(!0),this.playerMode()==="career"&&this.handleCareerEnd(m);return}this.playerMode()==="career"&&this.saveCareerState(),u==="b"&&(this.playerMode()==="ai"||this.playerMode()==="career")&&setTimeout(()=>this.triggerAiMove(),700)}saveCareerState(){this.supabase.saveCareerGame(this.gameMode(),this.careerLevel(),{board:this.board(),turn:this.turn(),lastMove:this.lastMove()})}async handleCareerEnd(e){if(e==="w"){let n=100+this.careerLevel()*10;await this.supabase.updateCareerProgress(this.gameMode(),this.careerLevel(),n),this.gameStatus.set(`${this.gameStatus()} +${n} PUNTI! LIVELLO SUPERATO.`)}else await this.supabase.clearSavedGame()}async triggerAiMove(){if(this.turn()==="b"){this.isAiThinking.set(!0),this.gameStatus.set("Gemini sta pensando...");try{let e=an.boardToFEN(this.board(),"b"),n=an.getAllUciMoves(this.board(),"b",this.gameMode());if(n.length===0){this.gameStatus.set("Partita finita. Nessuna mossa legale."),this.isAiThinking.set(!1);return}let r=this.playerMode()==="career"?this.careerLevel():50,i=await this.aiService.getBestMove(e,n,this.gameMode(),r);if(!i){console.warn("\u{1F916} AI: Gemini Offline/Quota Esaurita. Utilizzo Motore Locale (Minimax)..."),this.gameStatus.set("Calcolo mossa locale...");let s=r<30?2:r<70?3:4;console.log(`\u{1F916} AI local: Calcolo profondit\xE0 ${s}...`),i=an.getBestMoveLocal(this.board(),this.gameMode(),s,"b"),console.log("\u{1F916} AI local move:",i)}if((!i||!n.includes(i))&&(console.warn("Motore Locale Fallito. Fallback Random."),i=n[Math.floor(Math.random()*n.length)]),i){let s=an.uciToCoords(i.substring(0,2)),o=an.uciToCoords(i.substring(2,4));s&&o&&this.executeMove(s,o)}}catch(e){console.error("AI Critical Error",e),this.gameStatus.set("Errore IA. Tocca a te."),this.turn.set("w")}finally{this.isAiThinking.set(!1)}}}getAllLegalMoves(e){let n=[],r=this.board(),i=["a","b","c","d","e","f","g","h"];for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=r[s][o];if(a&&a.color===e){let l={row:s,col:o};an.getLegalMoves(r,l,this.gameMode()).forEach(u=>{let h=`${i[l.col]}${8-l.row}${i[u.col]}${8-u.row}`;n.push(h)})}}return n}handleAiError(e){this.gameStatus.set(`${e} Tocca a te.`),this.turn.set("w")}resetGame(){this.board.set(an.createInitialBoard(this.gameMode())),this.turn.set("w"),this.selectedPos.set(null),this.lastMove.set(null),this.gameStatus.set("Tocca al Bianco"),this.isAiThinking.set(!1),this.isGameOver.set(!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var OY=["canvas"];function FY(t,e){if(t&1&&_t(0,"div",7),t&2){let n=e.$implicit;yl("left",n.x,"%")("top",n.y,"%")("width",n.size,"px")("height",n.size,"px")("animation-duration",n.duration,"s")("animation-delay",n.delay,"s")}}function BY(t,e){t&1&&(O(0,"div",6)(1,"div",8),_t(2,"div",9),O(3,"span",10),S(4,"Caricamento Studio 3D..."),F()()())}var Ud=class t{constructor(){this.gameService=ae(Cn);this.loading=!0;this.lightPoints=Array.from({length:20},()=>({x:Math.random()*100,y:Math.random()*100,size:3+Math.random()*8,duration:10+Math.random()*20,delay:Math.random()*10}));this.isLoadingModel=!1;this.animationId=0;this.currentlyAnimatingMove=null;this.lastAnimatedMove=null;this.customCache=new Map;this.customBoardGeometry=null;this.onResize=()=>{if(!this.three||!this.camera||!this.renderer)return;let e=this.canvasRef.nativeElement.getBoundingClientRect(),n=e.width||window.innerWidth,r=e.height||window.innerHeight;this.camera.aspect=n/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,r,!0)};Du(()=>{let e=this.gameService.board(),n=this.gameService.validMoves(),r=this.gameService.selectedPos(),i=this.gameService.pieceStyle(),s=this.gameService.lastMove(),o=this.gameService.useOriginalTexture();if(this.three&&this.scene){let a=this.gameService.customMeshUrls();if(Object.keys(a).forEach(l=>{!this.customCache.has(l)&&l!=="board_last_loaded"&&this.loadCustomModelFromUrl(a[l],l)}),!this.isLoadingModel){let l=s&&s!==this.lastAnimatedMove;l&&(this.currentlyAnimatingMove=s,this.lastAnimatedMove=s),this.updatePieces(e,r,i,s),this.updateHighlights(n,r),l&&this.animateMove(s,i)}}})}async ngAfterViewInit(){try{await this.initThree()}catch(e){console.error("Three.js Init Error:",e)}finally{this.loading=!1}this.three&&(this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null),this.updateHighlights(this.gameService.validMoves(),this.gameService.selectedPos()))}async loadCustomModelFromUrl(e,n){if(!(!this.three||!e)&&!(this.customCache.has(n)||this.isLoadingModel)){this.isLoadingModel=!0;try{let r=e.toLowerCase().includes(".glb")||e.toLowerCase().includes(".gltf"),i=e.toLowerCase().includes(".stl"),s=null;i?s={geometry:await this.loadSTL(e),material:null}:r&&(s=await this.loadGLTF(e)),s&&s.geometry&&this.processAndCacheGeometry(s.geometry,s.material,n)}catch(r){console.error("Failed to load Model from URL:",e,r)}finally{this.isLoadingModel=!1,this.forceRedraw()}}}async loadCustomModel(e,n){if(!this.three)return;this.isLoadingModel=!0;let r=URL.createObjectURL(e),i=e.name.toLowerCase();try{let s=null;if(i.endsWith(".stl")?s={geometry:await this.loadSTL(r),material:null}:(i.endsWith(".glb")||i.endsWith(".gltf"))&&(s=await this.loadGLTF(r)),!s||!s.geometry)throw new Error("No geometry found");this.processAndCacheGeometry(s.geometry,s.material,n)}catch(s){console.error("Failed to load Model",s)}finally{r.startsWith("blob:")&&URL.revokeObjectURL(r),this.isLoadingModel=!1,this.forceRedraw()}}processAndCacheGeometry(e,n,r){e.center(),e.computeBoundingBox();let i=new this.three.Vector3;if(e.boundingBox.getSize(i),r!=="board"){i.z>i.y*1.2&&i.z>i.x?e.rotateX(-Math.PI/2):i.x>i.y*1.2&&i.x>i.z&&e.rotateZ(-Math.PI/2),e.computeBoundingBox(),e.center();let a=e.attributes.position.array,l=e.boundingBox,c=l.max.y-l.min.y,u=l.min.y+c*.2,h=l.max.y-c*.2,p=0,m=0;for(let g=0;g<a.length;g+=3){let y=a[g],E=a[g+1],w=a[g+2],I=y*y+w*w;E<u?p=Math.max(p,I):E>h&&(m=Math.max(m,I))}m>p*1.2&&(e.rotateX(Math.PI),e.center()),r.includes("n")&&(e.rotateY(-Math.PI/2),e.computeBoundingBox(),e.center())}e.computeBoundingBox();let s=e.boundingBox,o=new this.three.Vector3;if(s.getSize(o),r==="board"){let c=12/Math.max(o.x,o.z);e.scale(c,c,c),e.computeBoundingBox();let h=-.05-e.boundingBox.max.y;e.translate(0,h,0),e.computeVertexNormals(),this.customBoardGeometry=e,this.createBoard()}else{let c=.7/Math.max(o.x,o.z);e.scale(c,c,c),e.computeBoundingBox();let h=-e.boundingBox.min.y;e.translate(0,h,0),e.computeVertexNormals(),this.customCache.set(r,{geometry:e,material:n}),this.gameService.pieceStyle()==="custom"&&this.gameService.setPieceStyle("custom")}}forceRedraw(){this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null)}loadSTL(e){return new Promise((n,r)=>{this.stlLoader.load(e,i=>n(i),void 0,r)})}loadGLTF(e){return new Promise((n,r)=>{this.gltfLoader.load(e,i=>{let s=null,o=null;i.scene.traverse(a=>{!s&&a.isMesh&&(s=a.geometry.clone(),a.material&&(o=a.material.clone()))}),s?n({geometry:s,material:o}):r("No mesh found in GLTF")},void 0,r)})}ngOnDestroy(){cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onResize),this.renderer&&this.renderer.dispose()}async initThree(){let e=await import("./chunk-H73ONTST.js");this.three=e;let{OrbitControls:n}=await import("./chunk-STDGT6VI.js"),{STLLoader:r}=await import("./chunk-5MPC2VOI.js"),{GLTFLoader:i}=await import("./chunk-D5GDW5BX.js");this.stlLoader=new r,this.gltfLoader=new i;let s=this.canvasRef.nativeElement.getBoundingClientRect(),o=s.width,a=s.height;(o===0||a===0)&&(o=window.innerWidth,a=window.innerHeight,console.warn("Canvas dimensions are 0, falling back to window size:",o,a)),this.scene=new this.three.Scene,this.scene.background=null,this.camera=new this.three.PerspectiveCamera(45,o/a,.1,100),this.camera.position.set(0,12,12),this.camera.lookAt(0,0,0),this.renderer=new this.three.WebGLRenderer({canvas:this.canvasRef.nativeElement,antialias:!0,alpha:!0,powerPreference:"high-performance"}),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(o,a,!0),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.three.PCFSoftShadowMap,this.renderer.toneMapping=this.three.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1.35,this.controls=new n(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.maxPolarAngle=Math.PI/2.1,this.controls.minDistance=4,this.controls.maxDistance=20;let l=new this.three.HemisphereLight(16777215,4473924,.6);this.scene.add(l);let c=new this.three.DirectionalLight(16773341,2.8);c.position.set(5,12,5),c.castShadow=!0,c.shadow.mapSize.width=4096,c.shadow.mapSize.height=4096,c.shadow.camera.near=.1,c.shadow.camera.far=50,c.shadow.bias=-5e-4;let u=8;c.shadow.camera.left=-u,c.shadow.camera.right=u,c.shadow.camera.top=u,c.shadow.camera.bottom=-u,this.scene.add(c);let h=new this.three.DirectionalLight(14412542,1.5);h.position.set(-5,6,-5),this.scene.add(h);let p=new this.three.SpotLight(6333946,3);p.position.set(0,5,-8),p.lookAt(0,0,0),this.scene.add(p),this.boardGroup=new this.three.Group,this.scene.add(this.boardGroup),this.createBoard(),this.piecesGroup=new this.three.Group,this.scene.add(this.piecesGroup),this.highlightsGroup=new this.three.Group,this.scene.add(this.highlightsGroup),this.animGroup=new this.three.Group,this.scene.add(this.animGroup),this.raycaster=new this.three.Raycaster,this.mouse=new this.three.Vector2,this.canvasRef.nativeElement.addEventListener("click",g=>this.onCanvasClick(g));let m=()=>{this.animationId=requestAnimationFrame(m),this.controls&&this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)};m(),window.addEventListener("resize",this.onResize)}animateMove(e,n){if(!this.three)return;if(this.isLoadingModel){this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null);return}this.animGroup.clear(),this.currentlyAnimatingMove=e;let r=e.from.col-3.5,i=e.from.row-3.5,s=e.to.col-3.5,o=e.to.row-3.5,a=this.createPieceMesh(e.piece,!1,n);a.position.set(r,.1,i),a.userData&&(a.userData={}),a.children&&a.children.forEach(L=>L.userData={}),this.animGroup.add(a);let l=null;e.capturedPiece&&e.capturedPos&&(l=this.createPieceMesh(e.capturedPiece,!1,n),l.position.set(e.capturedPos.col-3.5,.1,e.capturedPos.row-3.5),l.userData&&(l.userData={}),l.children&&l.children.forEach(L=>L.userData={}),this.animGroup.add(l));let c=performance.now(),u=650,h=e.piece.type==="n",p=!!e.capturedPiece,m=h||p||e.isJump,g=m?2.5:.6,y=s-r,E=o-i,w=Math.sqrt(y*y+E*E),I=Math.atan2(y,E),D=e.piece.type==="n"?e.piece.color==="w"?0:Math.PI:0,b=L=>{let M=L-c,q=Math.min(M/u,1),z=this.easeInOutCubic(q),re=r+(s-r)*z,le=i+(o-i)*z,nt=.1+4*g*z*(1-z);if(a.position.set(re,nt,le),w>.2){a.rotation.set(0,0,0),a.rotateY(D);let mt=(1-2*z)*.35,bt=Math.cos(I),Bi=-Math.sin(I),Jd=new this.three.Vector3(bt,0,Bi);m&&a.rotateOnWorldAxis(Jd,mt);let ur=Math.sin(z*Math.PI*2)*.15,Gl=new this.three.Vector3(Math.sin(I),0,Math.cos(I));a.rotateOnWorldAxis(Gl,ur)}if(l&&z>.7){let Vt=(z-.7)/.3,mt=Math.max(0,1-Vt);l.scale.setScalar(mt),l.rotation.y+=.25}q<1?requestAnimationFrame(b):(this.animGroup.clear(),this.currentlyAnimatingMove=null,this.updatePieces(this.gameService.board(),this.gameService.selectedPos(),this.gameService.pieceStyle(),null))};requestAnimationFrame(b)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}createPieceMesh(e,n,r){let i;return e.type==="cm"||e.type==="ck"?i=this.createCheckersPiece(e,n,r):r==="classic"?i=this.createClassicPiece(e,n):r==="neon"?i=this.createNeonPiece(e,n):r==="custom"?i=this.createCustomPiece(e,n):i=this.createMinimalPiece(e,n),i}createPieceMaterial(e,n){return new this.three.MeshPhysicalMaterial({color:e,roughness:.2,metalness:.1,clearcoat:1,clearcoatRoughness:.1,emissive:n?16766720:0,emissiveIntensity:n?.4:0})}createBoard(){if(!(!this.three||!this.boardGroup))if(this.boardGroup.clear(),this.customBoardGeometry){let e=new this.three.MeshStandardMaterial({color:8947848,roughness:.4,metalness:.3}),n=new this.three.Mesh(this.customBoardGeometry,e);n.receiveShadow=!0,n.castShadow=!0,this.boardGroup.add(n);let r=new this.three.BoxGeometry(1,.2,1),i=new this.three.MeshBasicMaterial({visible:!1});for(let s=0;s<8;s++)for(let o=0;o<8;o++){let a=new this.three.Mesh(r,i);a.position.set(s-3.5,0,o-3.5),a.userData={isSquare:!0,row:o,col:s},this.boardGroup.add(a)}}else{let e=new this.three.BoxGeometry(1,.2,1),n=new this.three.MeshPhysicalMaterial({color:3359061,roughness:.4,metalness:.1,clearcoat:.2}),r=new this.three.MeshPhysicalMaterial({color:15857145,roughness:.4,metalness:.1,clearcoat:.2});for(let a=0;a<8;a++)for(let l=0;l<8;l++){let c=(a+l)%2===0,u=new this.three.Mesh(e,c?r:n);u.position.set(a-3.5,0,l-3.5),u.receiveShadow=!0,u.userData={isSquare:!0,row:l,col:a},this.boardGroup.add(u)}let i=new this.three.BoxGeometry(8.6,.3,8.6),s=new this.three.MeshStandardMaterial({color:988970,roughness:.6}),o=new this.three.Mesh(i,s);o.position.y=-.15,o.receiveShadow=!0,this.boardGroup.add(o)}}updatePieces(e,n,r,i){this.three&&(this.piecesGroup.clear(),e.forEach((s,o)=>{s.forEach((a,l)=>{if(a){let c=!0;if(this.currentlyAnimatingMove&&this.currentlyAnimatingMove.to.row===o&&this.currentlyAnimatingMove.to.col===l&&(c=!1),c){let u=n&&n.row===o&&n.col===l,h=this.createPieceMesh(a,u,r);h.position.set(l-3.5,.1,o-3.5),h.type==="Group"?h.children.forEach(p=>{p.userData={isPiece:!0,row:o,col:l}}):h.userData={isPiece:!0,row:o,col:l},this.piecesGroup.add(h)}}})}))}createCustomPiece(e,n){let r=`${e.type}_${e.color}`,i=this.customCache.get(r);if(i||(i=this.customCache.get(e.type)),i){let s;if(this.gameService.useOriginalTexture()&&i.material)s=i.material,n&&s.emissive&&(s=s.clone(),s.emissive.setHex(16766720),s.emissiveIntensity=.4);else{let a=e.color==="w"?16777215:2894892;s=this.createPieceMaterial(a,n)}let o=new this.three.Mesh(i.geometry,s);return o.castShadow=!0,o.receiveShadow=!0,e.type==="n"&&(o.rotation.y=e.color==="w"?0:Math.PI),o}else return e.type==="cm"||e.type==="ck"?this.createCheckersPiece(e,n,"minimal"):this.createMinimalPiece(e,n)}createCheckersPiece(e,n,r){let i=e.color==="w"?16643811:2894892,s=this.createPieceMaterial(i,n),o=new this.three.Group,a=new this.three.CylinderGeometry(.35,.35,.15,32);a.translate(0,.075,0);let l=new this.three.Mesh(a,s);if(l.castShadow=!0,l.receiveShadow=!0,o.add(l),e.type==="ck"){let c=new this.three.CylinderGeometry(.35,.35,.15,32);c.translate(0,.225,0);let u=new this.three.Mesh(c,s);u.castShadow=!0,u.receiveShadow=!0,o.add(u);let h=new this.three.Mesh(new this.three.TorusGeometry(.2,.02,16,32),new this.three.MeshBasicMaterial({color:16766720}));h.rotation.x=Math.PI/2,h.position.y=.31,o.add(h)}else{let c=new this.three.CylinderGeometry(.25,.25,.16,32);c.translate(0,.075,0);let u=new this.three.Mesh(c,s);o.add(u)}return o}createMinimalPiece(e,n){let r=e.color==="w"?16777215:3359061,i=this.createPieceMaterial(r,n),s;switch(e.type){case"p":s=new this.three.CylinderGeometry(.25,.25,.6,32);break;case"r":s=new this.three.BoxGeometry(.55,.8,.55);break;case"n":s=new this.three.CylinderGeometry(.3,.4,.9,4);break;case"b":s=new this.three.ConeGeometry(.3,1,32);break;case"q":s=new this.three.CylinderGeometry(.35,.2,1.4,32);break;case"k":s=new this.three.CylinderGeometry(.4,.3,1.6,8);break;default:s=new this.three.SphereGeometry(.3)}s.translate(0,.3,0);let o=new this.three.Mesh(s,i);return o.castShadow=!0,o.receiveShadow=!0,o}createNeonPiece(e,n){let r=e.color==="w"?65535:16711935,i=new this.three.MeshBasicMaterial({color:n?16776960:r,wireframe:!0}),s;switch(e.type){case"p":s=new this.three.OctahedronGeometry(.3);break;case"r":s=new this.three.BoxGeometry(.5,.8,.5);break;case"n":s=new this.three.IcosahedronGeometry(.4);break;case"b":s=new this.three.ConeGeometry(.3,1.1,4);break;case"q":s=new this.three.TorusKnotGeometry(.25,.1,64,8);break;case"k":s=new this.three.CylinderGeometry(.4,0,1.5,4);break;default:s=new this.three.SphereGeometry(.3)}return s.translate(0,.4,0),new this.three.Mesh(s,i)}createClassicPiece(e,n){let r=e.color==="w"?16643811:2894892,i=this.createPieceMaterial(r,n),s=new this.three.Group,o=new this.three.CylinderGeometry(.38,.42,.15,32);o.translate(0,.075,0);let a=new this.three.Mesh(o,i);if(s.add(a),e.type==="p"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.15,.35,.4,32),i);l.position.y=.35;let c=new this.three.Mesh(new this.three.CylinderGeometry(.12,.15,.3,32),i);c.position.y=.65;let u=new this.three.Mesh(new this.three.CylinderGeometry(.2,.2,.05,32),i);u.position.y=.8;let h=new this.three.Mesh(new this.three.SphereGeometry(.2,32,16),i);h.position.y=.95,s.add(l,c,u,h)}else if(e.type==="r"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.25,.3,.6,32),i);l.position.y=.4;let c=new this.three.Mesh(new this.three.CylinderGeometry(.32,.32,.25,32),i);c.position.y=.8,s.add(l,c)}else if(e.type==="n"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.2,.3,.5,32),i);l.position.y=.35;let c=new this.three.BoxGeometry(.25,.45,.55);c.translate(0,.2,.1);let u=new this.three.Mesh(c,i);u.position.y=.55,u.rotation.x=-.2,s.add(l,u),s.rotation.y=e.color==="w"?Math.PI:0}else if(e.type==="b"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.1,.25,.8,32),i);l.position.y=.5;let c=new this.three.Mesh(new this.three.CylinderGeometry(.2,.2,.05,32),i);c.position.y=.85;let u=new this.three.Mesh(new this.three.SphereGeometry(.15),i);u.position.y=1,s.add(l,c,u)}else if(e.type==="q"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.15,.3,1,32),i);l.position.y=.6;let c=new this.three.Mesh(new this.three.SphereGeometry(.25),i);c.position.y=1.15;let u=new this.three.Mesh(new this.three.SphereGeometry(.1),i);u.position.y=1.4,s.add(l,c,u)}else if(e.type==="k"){let l=new this.three.Mesh(new this.three.CylinderGeometry(.2,.3,1.1,32),i);l.position.y=.65;let c=new this.three.BoxGeometry(.1,.3,.1),u=new this.three.BoxGeometry(.25,.1,.1),h=new this.three.Mesh(c,i),p=new this.three.Mesh(u,i);h.position.y=1.35,p.position.y=1.35,s.add(l,h,p)}return s.traverse(l=>{l.isMesh&&(l.castShadow=!0,l.receiveShadow=!0)}),s}updateHighlights(e,n){if(!this.three)return;if(this.highlightsGroup.clear(),n){let s=new this.three.PlaneGeometry(.9,.9);s.rotateX(-Math.PI/2);let o=new this.three.MeshBasicMaterial({color:6333946,transparent:!0,opacity:.4,side:this.three.DoubleSide}),a=new this.three.Mesh(s,o);a.position.set(n.col-3.5,.11,n.row-3.5),this.highlightsGroup.add(a)}let r=new this.three.RingGeometry(.2,.35,32);r.rotateX(-Math.PI/2);let i=new this.three.MeshBasicMaterial({color:3462041,transparent:!0,opacity:.6,side:this.three.DoubleSide});e.forEach(s=>{let o=new this.three.Mesh(r,i);o.position.set(s.col-3.5,.11,s.row-3.5),this.highlightsGroup.add(o)})}onCanvasClick(e){if(!this.camera||!this.scene||!this.three||this.currentlyAnimatingMove)return;let n=this.canvasRef.nativeElement.getBoundingClientRect();this.mouse.x=(e.clientX-n.left)/n.width*2-1,this.mouse.y=-((e.clientY-n.top)/n.height)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let r=this.raycaster.intersectObjects(this.scene.children,!0);for(let i of r){let s=i.object.userData;if(s&&(s.isSquare||s.isPiece)){this.gameService.selectSquare({row:s.row,col:s.col});break}}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-chess-scene"]],viewQuery:function(n,r){if(n&1&&vl(OY,5),n&2){let i;Xu(i=Zu())&&(r.canvasRef=i.first)}},hostAttrs:[1,"block","w-full","h-full",2,"display","block","width","100%","height","100%"],decls:8,vars:1,consts:[["canvas",""],[1,"relative","w-full","h-full",2,"width","100%","height","100%","min-height","200px"],[1,"absolute","inset-0","bg-gradient-to-br","from-slate-950","via-indigo-950","to-slate-900","overflow-hidden"],[1,"absolute","inset-0","bg-radial-gradient","opacity-20"],[1,"light-point",3,"left","top","width","height","animation-duration","animation-delay"],[1,"block","w-full","h-full","outline-none","relative","z-10",2,"display","block","width","100%","height","100%"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-[#0f172a]","text-blue-200","font-mono","z-30",2,"position","absolute","inset","0","background","#0f172a","z-index","30","display","flex","align-items","center"],[1,"light-point"],[1,"flex","flex-col","items-center","gap-4"],[1,"w-12","h-12","border-4","border-blue-500","border-t-transparent","rounded-full","animate-spin",2,"width","48px","height","48px","border","4px solid rgba(59,130,246,0.3)","border-top-color","#3b82f6","border-radius","50%"],[2,"margin-top","10px"]],template:function(n,r){n&1&&(O(0,"div",1)(1,"div",2),_t(2,"div",3),Wt(3,FY,1,12,"div",4,Yu),F(),_t(5,"canvas",5,0),ge(7,BY,5,0,"div",6),F()),n&2&&(P(3),zt(r.lightPoints),P(4),ve(r.loading?7:-1))},styles:[".light-point[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(139,92,246,.8) 0%,rgba(99,102,241,.4) 40%,transparent 70%);filter:blur(3px);animation:_ngcontent-%COMP%_float-light linear infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_float-light{0%,to{transform:translate(0) scale(1);opacity:.3}25%{transform:translate(15px,-25px) scale(1.2);opacity:.7}50%{transform:translate(-10px,-50px) scale(.8);opacity:.2}75%{transform:translate(-20px,-25px) scale(1.1);opacity:.6}}.bg-radial-gradient[_ngcontent-%COMP%]{background:radial-gradient(ellipse at 50% 50%,rgba(99,102,241,.1) 0%,transparent 60%);animation:_ngcontent-%COMP%_pulse-radial 8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-radial{0%,to{opacity:.2}50%{opacity:.4}}"]})}};var IM=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(We(Wu),We(Ai))};static \u0275dir=Un({type:t})}return t})(),VY=(()=>{class t extends IM{static \u0275fac=(()=>{let n;return function(i){return(n||(n=rm(t)))(i||t)}})();static \u0275dir=Un({type:t,features:[ui]})}return t})(),AM=new _e("");var UY={provide:AM,useExisting:xi(()=>Qg),multi:!0};function $Y(){let t=Cs()?Cs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var HY=new _e(""),Qg=(()=>{class t extends IM{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!$Y())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(We(Wu),We(Ai),We(HY,8))};static \u0275dir=Un({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[El([UY]),ui]})}return t})();function qY(t){return t==null||GY(t)===0}function GY(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var vS=new _e(""),DM=new _e("");function jY(t){return qY(t.value)?{required:!0}:null}function wM(t){return null}function kM(t){return t!=null}function NM(t){return ml(t)?Q0(t):t}function MM(t){let e={};return t.forEach(n=>{e=n!=null?A(A({},e),n):e}),Object.keys(e).length===0?null:e}function RM(t,e){return e.map(n=>n(t))}function WY(t){return!t.validate}function PM(t){return t.map(e=>WY(e)?e:n=>e.validate(n))}function zY(t){if(!t)return null;let e=t.filter(kM);return e.length==0?null:function(n){return MM(RM(n,e))}}function yS(t){return t!=null?zY(PM(t)):null}function JY(t){if(!t)return null;let e=t.filter(kM);return e.length==0?null:function(n){let r=RM(n,e).map(NM);return X0(r).pipe(vo(MM))}}function wS(t){return t!=null?JY(PM(t)):null}function EM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function YY(t){return t._rawValidators}function KY(t){return t._rawAsyncValidators}function mS(t){return t?Array.isArray(t)?t:[t]:[]}function Gg(t,e){return Array.isArray(t)?t.includes(e):t===e}function _M(t,e){let n=mS(e);return mS(t).forEach(i=>{Gg(n,i)||n.push(i)}),n}function CM(t,e){return mS(e).filter(n=>!Gg(t,n))}var jg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control?.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ql=class extends jg{name;get formDirective(){return null}get path(){return null}},Wd=class extends jg{_parent=null;name=null;valueAccessor=null},Wg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var LM=(()=>{class t extends Wg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(We(Wd,2))};static \u0275dir=Un({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ui]})}return t})(),OM=(()=>{class t extends Wg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(We(ql,10))};static \u0275dir=Un({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&et("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ui]})}return t})();var $d="VALID",qg="INVALID",$l="PENDING",Hd="DISABLED",ks=class{},zg=class extends ks{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Gd=class extends ks{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},jd=class extends ks{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Hl=class extends ks{status;source;constructor(e,n){super(),this.status=e,this.source=n}},gS=class extends ks{source;constructor(e){super(),this.source=e}},Jg=class extends ks{source;constructor(e){super(),this.source=e}};function FM(t){return(Xg(t)?t.validators:t)||null}function QY(t){return Array.isArray(t)?yS(t):t||null}function BM(t,e){return(Xg(e)?e.asyncValidators:t)||null}function XY(t){return Array.isArray(t)?wS(t):t||null}function Xg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function ZY(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[n])throw new ue(1001,"")}function eK(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new ue(1002,"")})}var Yg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return br(this.statusReactive)}set status(e){br(()=>this.statusReactive.set(e))}_status=ki(()=>this.statusReactive());statusReactive=Be(void 0);get valid(){return this.status===$d}get invalid(){return this.status===qg}get pending(){return this.status==$l}get disabled(){return this.status===Hd}get enabled(){return this.status!==Hd}errors;get pristine(){return br(this.pristineReactive)}set pristine(e){br(()=>this.pristineReactive.set(e))}_pristine=ki(()=>this.pristineReactive());pristineReactive=Be(!0);get dirty(){return!this.pristine}get touched(){return br(this.touchedReactive)}set touched(e){br(()=>this.touchedReactive.set(e))}_touched=ki(()=>this.touchedReactive());touchedReactive=Be(!1);get untouched(){return!this.touched}_events=new wr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_M(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_M(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CM(e,this._rawAsyncValidators))}hasValidator(e){return Gg(this._rawValidators,e)}hasAsyncValidator(e){return Gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsTouched(te(A({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new jd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),e.onlySelf||this._parent?._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new jd(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;e.onlySelf||this._parent?.markAsDirty(te(A({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Gd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),e.onlySelf||this._parent?._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Gd(!0,r))}markAsPending(e={}){this.status=$l;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Hl(this.status,n)),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.markAsPending(te(A({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Hd,this.errors=null,this._forEachChild(i=>{i.disable(te(A({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zg(this.value,r)),this._events.next(new Hl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(A({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$d,this._forEachChild(r=>{r.enable(te(A({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(A({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){e.onlySelf||(this._parent?.updateValueAndValidity(e),e.skipPristineCheck||this._parent?._updatePristine({},n),this._parent?._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$d||this.status===$l)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zg(this.value,n)),this._events.next(new Hl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.updateValueAndValidity(te(A({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hd:$d}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=$l,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=NM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r?.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Hl(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Gt,this.statusChanges=new Gt}_calculateStatus(){return this._allControlsDisabled()?Hd:this.errors?qg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($l)?$l:this._anyControlsHaveStatus(qg)?qg:$d}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,e.onlySelf||this._parent?._updatePristine(e,n),i&&this._events.next(new Gd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new jd(this.touched,n)),e.onlySelf||this._parent?._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!!this._parent?.dirty&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=QY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=XY(this._rawAsyncValidators)}},Kg=class extends Yg{constructor(e,n,r){super(FM(n),BM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){eK(this,!0,e),Object.keys(e).forEach(r=>{ZY(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,te(A({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Jg(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ES=new _e("",{factory:()=>_S}),_S="always";function tK(t,e){return[...e.path,t]}function VM(t,e,n=_S){UM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),rK(t,e),sK(t,e),iK(t,e),nK(t,e)}function SM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function nK(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function UM(t,e){let n=YY(t);e.validator!==null?t.setValidators(EM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=KY(t);e.asyncValidator!==null?t.setAsyncValidators(EM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();SM(e._rawValidators,i),SM(e._rawAsyncValidators,i)}function rK(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&$M(t,e)})}function iK(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&$M(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function $M(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function sK(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function oK(t,e){t==null,UM(t,e)}function aK(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function lK(t){return Object.getPrototypeOf(t.constructor)===VY}function cK(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uK(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Qg?n=s:lK(s)?r=s:i=s}),i||r||n||null}var dK={provide:ql,useExisting:xi(()=>CS)},qd=Promise.resolve(),CS=(()=>{class t extends ql{callSetDisabledState;get submitted(){return br(this.submittedReactive)}_submitted=ki(()=>this.submittedReactive());submittedReactive=Be(!1);_directives=new Set;form;ngSubmit=new Gt;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Kg({},yS(n),wS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){qd.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),VM(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){qd.then(()=>{this._findContainer(n.path)?.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){qd.then(()=>{let r=this._findContainer(n.path),i=new Kg({});oK(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){qd.then(()=>{this._findContainer(n.path)?.removeControl?.(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){qd.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),cK(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new gS(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(We(vS,10),We(DM,10),We(ES,8))};static \u0275dir=Un({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Q("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[El([dK]),ui]})}return t})();function bM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var fK=class extends Yg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(FM(n),BM(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Jg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hK={provide:Wd,useExisting:xi(()=>SS)},TM=Promise.resolve(),SS=(()=>{class t extends Wd{_changeDetectorRef;callSetDisabledState;control=new fK;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Gt;constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uK(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),aK(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective?.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){TM.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&__(r);TM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?tK(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(We(ql,9),We(vS,10),We(DM,10),We(AM,10),We(E_,8),We(ES,8))};static \u0275dir=Un({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[El([hK]),ui,Hu]})}return t})();var HM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Un({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var pK=(()=>{class t{_validator=wM;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wM,this._onChange?.()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Un({type:t,features:[Hu]})}return t})();var mK={provide:vS,useExisting:xi(()=>bS),multi:!0};var bS=(()=>{class t extends pK{required;inputName="required";normalizeInput=__;createValidator=n=>jY;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=rm(t)))(i||t)}})();static \u0275dir=Un({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&gl("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[El([mK]),ui]})}return t})();var gK=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bo({type:t});static \u0275inj=hs({})}return t})();var Zg=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ES,useValue:n.callSetDisabledState??_S}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Bo({type:t});static \u0275inj=hs({imports:[gK]})}return t})();var ev=class t{static processAvatarImage(e){return new Promise((n,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=s=>{let o=new Image;o.src=s.target?.result,o.onload=()=>{let a=document.createElement("canvas"),l=a.getContext("2d");if(!l){r(new Error("Canvas context failed"));return}let c=256,u=Math.min(o.width,o.height),h=(o.width-u)/2,p=(o.height-u)/2;a.width=c,a.height=c,l.drawImage(o,h,p,u,u,0,0,c,c);let m=a.toDataURL("image/jpeg",.7);n(m)},o.onerror=a=>r(a)},i.onerror=s=>r(s)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var zd=(t,e)=>e.id;function yK(t,e){if(t&1&&Te(0,"div",72),t&2){let n=e.$implicit;yl("width",n.size,"px")("height",n.size,"px")("left",n.x,"%")("top",n.y,"%")("animation-duration",n.duration+"s")("animation-delay",n.delay+"s")("background",n.color)}}function wK(t,e){if(t&1&&(x(0,"div",7)(1,"p",73),S(2),k()()),t&2){let n=V();P(2),Ge(" ",n.supabase.username()," ")}}function EK(t,e){if(t&1&&Te(0,"img",11),t&2){let n=V();Di("src",n.supabase.avatarUrl(),lm)}}function _K(t,e){if(t&1&&(Ke(),x(0,"svg",12),Te(1,"circle",74)(2,"path",75),k()),t&2){let n=V();gl("fill",n.supabase.user()?"white":"#64748b")}}function CK(t,e){if(t&1&&(x(0,"span",13),S(1),k()),t&2){let n=V();P(),Ge(" ",n.supabase.username()," ")}}function SK(t,e){if(t&1){let n=qe();x(0,"div",84)(1,"label",85),S(2,"Email"),k(),x(3,"input",94),Uo("ngModelChange",function(i){J(n);let s=V(2);return wl(s.authEmail,i)||(s.authEmail=i),Y(i)}),k()()}if(t&2){let n=V(2);P(3),Vo("ngModel",n.authEmail)}}function bK(t,e){if(t&1&&(x(0,"p",88),S(1),k()),t&2){let n=V(2);P(),ze(n.authError)}}function xK(t,e){if(t&1&&(x(0,"p",89),S(1),k()),t&2){let n=V(2);P(),ze(n.authSuccess)}}function TK(t,e){if(t&1){let n=qe();x(0,"div",76),Q("click",function(){J(n);let i=V();return Y(i.showAuth=!1)}),x(1,"div",77),Q("click",function(i){return J(n),Y(i.stopPropagation())}),Te(2,"div",78),x(3,"div",79)(4,"div",80)(5,"h2",81),S(6),k(),x(7,"p",82),S(8),k()(),x(9,"form",83),Q("submit",function(i){J(n);let s=V();return Y(s.handleAuth(i))}),x(10,"div",84)(11,"label",85),S(12,"Nickname"),k(),x(13,"input",86),Uo("ngModelChange",function(i){J(n);let s=V();return wl(s.authNickname,i)||(s.authNickname=i),Y(i)}),k()(),ge(14,SK,4,1,"div",84),x(15,"div",84)(16,"label",85),S(17,"Password"),k(),x(18,"input",87),Uo("ngModelChange",function(i){J(n);let s=V();return wl(s.authPassword,i)||(s.authPassword=i),Y(i)}),k()(),ge(19,bK,2,1,"p",88),ge(20,xK,2,1,"p",89),x(21,"button",90),S(22),k()(),x(23,"div",91)(24,"button",92),Q("click",function(){J(n);let i=V();return Y(i.toggleAuthMode())}),S(25),k()(),x(26,"button",93),Q("click",function(){J(n);let i=V();return Y(i.showAuth=!1)}),S(27,"\u2715"),k()()()()}if(t&2){let n=V();P(6),Ge(" ",n.authMode==="admin"?"Pannello Admin":n.authMode==="login"?"Bentornato":"Inizia Ora"," "),P(2),Ge(" ",n.authMode==="admin"?"Accesso Riservato":n.authMode==="login"?"Accedi al Regno":"Unisciti alla Leggenda"," "),P(5),Vo("ngModel",n.authNickname),P(),ve(n.authMode==="register"?14:-1),P(4),Vo("ngModel",n.authPassword),P(),ve(n.authError?19:-1),P(),ve(n.authSuccess?20:-1),P(),Di("disabled",n.loadingAuth),P(),Ge(" ",n.loadingAuth?"Caricamento...":n.authMode==="admin"?"Accedi Amministratore":n.authMode==="login"?"Accedi":"Registrati"," "),P(3),Ge(" ",n.authMode==="login"?"Nuovo qui? Registrati":"Hai gi\xE0 un account? Accedi"," ")}}function IK(t,e){if(t&1&&Te(0,"img",101),t&2){let n=V(2);Di("src",n.supabase.avatarUrl(),lm)}}function AK(t,e){t&1&&(x(0,"div",102),Ke(),x(1,"svg",127),Te(2,"circle",74)(3,"path",75),k()())}function DK(t,e){if(t&1){let n=qe();x(0,"input",128),Uo("ngModelChange",function(i){J(n);let s=V(2);return wl(s.tempNickname,i)||(s.tempNickname=i),Y(i)}),Q("blur",function(){J(n);let i=V(2);return Y(i.saveNickname())})("keydown.enter",function(){J(n);let i=V(2);return Y(i.saveNickname())}),k(),x(1,"p",129),S(2,"Premi Invio per salvare"),k()}if(t&2){let n=V(2);Vo("ngModel",n.tempNickname)}}function kK(t,e){if(t&1){let n=qe();x(0,"h2",130),Q("dblclick",function(){J(n);let i=V(2);return Y(i.startEditingName())}),S(1),k()}if(t&2){let n=V(2);P(),Ge(" ",n.supabase.username()," ")}}function NK(t,e){if(t&1){let n=qe();x(0,"button",131),Q("click",function(){J(n);let i=V(2);return Y(i.deleteProfilePhoto())}),S(1,"Rimuovi Avatar"),k()}}function MK(t,e){if(t&1&&(x(0,"div",132)(1,"span",133),S(2),k(),x(3,"div",134)(4,"p",135),S(5),k(),x(6,"p",136),S(7),k()()()),t&2){let n=e.$implicit;P(2),ze(n.icon),P(3),ze(n.name),P(2),ze(n.date)}}function RK(t,e){if(t&1&&Wt(0,MK,8,3,"div",132,zd),t&2){let n=V(2);zt(n.userStats.achievements)}}function PK(t,e){t&1&&(x(0,"p",125),S(1,"Nessun premio ancora conquistato"),k())}function LK(t,e){if(t&1&&(x(0,"div",137)(1,"div")(2,"p",135),S(3),k(),x(4,"p",136),S(5),k()(),x(6,"p",138),S(7),k()()),t&2){let n=e.$implicit;P(3),ze(n.name),P(2),ze(n.date),P(2),Ge("\u20AC",n.price)}}function OK(t,e){if(t&1&&Wt(0,LK,8,3,"div",137,zd),t&2){let n=V(2);zt(n.userStats.purchases)}}function FK(t,e){t&1&&(x(0,"p",125),S(1,"Nessun acquisto effettuato"),k())}function BK(t,e){if(t&1&&(x(0,"div",137)(1,"div")(2,"p",135),S(3),k(),x(4,"p",136),S(5),k()(),x(6,"span",139),S(7,"GRATIS"),k()()),t&2){let n=e.$implicit;P(3),ze(n.name),P(2),ze(n.date)}}function VK(t,e){if(t&1&&Wt(0,BK,8,2,"div",137,zd),t&2){let n=V(2);zt(n.userStats.downloads)}}function UK(t,e){t&1&&(x(0,"p",125),S(1,"Nessun download gratuito"),k())}function $K(t,e){if(t&1){let n=qe();x(0,"div",95),Q("click",function(){J(n);let i=V();return Y(i.showAccountManager=!1)}),x(1,"div",96),Q("click",function(i){return J(n),Y(i.stopPropagation())}),x(2,"button",97),Q("click",function(){J(n);let i=V();return Y(i.showAccountManager=!1)}),S(3,"\u2715"),k(),x(4,"div",98)(5,"div",99)(6,"div",46)(7,"div",100),ge(8,IK,1,1,"img",101)(9,AK,4,0,"div",102),k(),x(10,"label",103),Ke(),x(11,"svg",104),Te(12,"path",105)(13,"path",106),k(),ft(),x(14,"input",107),Q("change",function(i){J(n);let s=V();return Y(s.onProfilePhotoSelected(i))}),k()()(),x(15,"div",108)(16,"div",109),ge(17,DK,3,1)(18,kK,2,1,"h2",110),k(),x(19,"p",111),S(20),k(),x(21,"div",112),ge(22,NK,2,0,"button",113),k()()(),x(23,"div",114)(24,"div",115)(25,"p",116),S(26,"Partite"),k(),x(27,"p",117),S(28),k()(),x(29,"div",115)(30,"p",116),S(31,"Vinte"),k(),x(32,"p",118),S(33),k()(),x(34,"div",115)(35,"p",116),S(36,"Win Rate"),k(),x(37,"p",119),S(38),k()(),x(39,"div",115)(40,"p",116),S(41,"Punti"),k(),x(42,"p",120),S(43),k()()(),x(44,"div",121)(45,"h3",122)(46,"span",123),S(47,"\u{1F3C6}"),k(),S(48," Premi Conquistati "),k(),x(49,"div",124),ge(50,RK,2,0)(51,PK,2,0,"p",125),k()(),x(52,"div",121)(53,"h3",122)(54,"span",123),S(55,"\u{1F4B3}"),k(),S(56," Acquisti Effettuati "),k(),x(57,"div",124),ge(58,OK,2,0)(59,FK,2,0,"p",125),k()(),x(60,"div",121)(61,"h3",122)(62,"span",123),S(63,"\u{1F4E6}"),k(),S(64," Download Gratuiti "),k(),x(65,"div",124),ge(66,VK,2,0)(67,UK,2,0,"p",125),k()(),x(68,"button",126),Q("click",function(){J(n);let i=V();return Y(i.logout())}),S(69," Esci dall'Account "),k()()()()}if(t&2){let n=V();P(8),ve(n.supabase.avatarUrl()?8:9),P(9),ve(n.isEditingName?17:18),P(3),ze(n.supabase.username()),P(2),ve(n.supabase.avatarUrl()?22:-1),P(6),ze(n.userStats.gamesPlayed),P(5),ze(n.userStats.gamesWon),P(5),Ge("",n.userStats.winRate,"%"),P(5),ze(n.userStats.totalPoints),P(7),ve(n.userStats.achievements.length>0?50:51),P(8),ve(n.userStats.purchases.length>0?58:59),P(8),ve(n.userStats.downloads.length>0?66:67)}}function HK(t,e){if(t&1){let n=qe();x(0,"div",140),Q("click",function(){J(n);let i=V();return Y(i.showLocalGameModeSelector=!1)}),x(1,"div",141),Q("click",function(i){return J(n),Y(i.stopPropagation())}),x(2,"h3",142),S(3,"Scegli Gioco (Locale)"),k(),x(4,"div",143)(5,"button",144),Q("click",function(){J(n);let i=V();return Y(i.selectLocalGameMode("chess"))}),x(6,"span",145),S(7,"\u2654"),k(),x(8,"span",146),S(9,"Scacchi"),k()(),x(10,"button",144),Q("click",function(){J(n);let i=V();return Y(i.selectLocalGameMode("checkers"))}),x(11,"span",145),S(12,"\u25CE"),k(),x(13,"span",146),S(14,"Dama"),k()()()()()}}function qK(t,e){if(t&1){let n=qe();x(0,"div",140),Q("click",function(){J(n);let i=V();return Y(i.showAIGameModeSelector=!1)}),x(1,"div",141),Q("click",function(i){return J(n),Y(i.stopPropagation())}),x(2,"h3",142),S(3,"Scegli Gioco (AI)"),k(),x(4,"div",143)(5,"button",147),Q("click",function(){J(n);let i=V();return Y(i.selectAIGameMode("chess"))}),x(6,"span",145),S(7,"\u2654"),k(),x(8,"span",146),S(9,"Scacchi"),k()(),x(10,"button",147),Q("click",function(){J(n);let i=V();return Y(i.selectAIGameMode("checkers"))}),x(11,"span",145),S(12,"\u25CE"),k(),x(13,"span",146),S(14,"Dama"),k()()()()()}}function GK(t,e){if(t&1){let n=qe();x(0,"div",181)(1,"div",4)(2,"div",184),S(3),k(),x(4,"h4",185),S(5),k()(),x(6,"div",186)(7,"label",187),S(8),x(9,"input",178),Q("change",function(i){let s=J(n).$implicit,o=V(3);return Y(o.onFileSelected(i,s.id,"w"))}),k()(),x(10,"label",187),S(11),x(12,"input",178),Q("change",function(i){let s=J(n).$implicit,o=V(3);return Y(o.onFileSelected(i,s.id,"b"))}),k()()()()}if(t&2){let n=e.$implicit,r=V(3);P(3),Ge(" ",r.getIconForType(n.id)," "),P(2),ze(n.label),P(3),Ge(" ",r.loadedStatus[n.id+"_w"]?"BIANCO OK":"CARICA BIANCO"," "),P(3),Ge(" ",r.loadedStatus[n.id+"_b"]?"NERO OK":"CARICA NERO"," ")}}function jK(t,e){if(t&1){let n=qe();x(0,"div",183)(1,"div",4)(2,"div",188),S(3,"\u25CE"),k(),x(4,"h4",185),S(5),k()(),x(6,"div",186)(7,"label",187),S(8),x(9,"input",178),Q("change",function(i){let s=J(n).$implicit,o=V(3);return Y(o.onFileSelected(i,s.id,"w"))}),k()(),x(10,"label",187),S(11),x(12,"input",178),Q("change",function(i){let s=J(n).$implicit,o=V(3);return Y(o.onFileSelected(i,s.id,"b"))}),k()()()()}if(t&2){let n=e.$implicit,r=V(3);P(5),ze(n.label),P(3),Ge(" ",r.loadedStatus[n.id+"_w"]?"BIANCO OK":"CARICA BIANCO"," "),P(3),Ge(" ",r.loadedStatus[n.id+"_b"]?"NERO OK":"CARICA NERO"," ")}}function WK(t,e){if(t&1){let n=qe();x(0,"div",159)(1,"div",161)(2,"div",162)(3,"div",163),Ke(),x(4,"svg",164),Te(5,"rect",165)(6,"rect",166)(7,"rect",167)(8,"rect",168)(9,"rect",169)(10,"rect",170)(11,"rect",171)(12,"rect",172)(13,"rect",173),k()(),ft(),x(14,"div",134)(15,"h4",174),S(16,"Scacchiera 3D"),k(),x(17,"p",175),S(18),k()()(),x(19,"label",176)(20,"span",177),S(21," Carica file STL / GLB / GLTF "),k(),x(22,"input",178),Q("change",function(i){J(n);let s=V(2);return Y(s.onFileSelected(i,"board"))}),k()()(),x(23,"div")(24,"h4",179),S(25,"Set Scacchi Custom"),k(),x(26,"div",180),Wt(27,GK,13,4,"div",181,zd),k()(),x(29,"div")(30,"h4",182),S(31,"Set Dama Custom"),k(),x(32,"div",180),Wt(33,jK,13,3,"div",183,zd),k()()()}if(t&2){let n=V(2);P(18),Ge(" ",n.loadedStatus.board?"Stato: Caricato OK":"Stato: Modello Standard"," "),P(9),zt(n.pieceTypes),P(6),zt(n.checkerTypes)}}function zK(t,e){if(t&1){let n=qe();x(0,"div",160)(1,"div")(2,"h4",189),S(3,"Set Completi (Scacchi)"),k(),x(4,"div",180)(5,"div",190)(6,"div",191)(7,"span",192),S(8,"\u{1F3F0}"),k(),x(9,"div",193)(10,"button",194),Q("click",function(){J(n);let i=V(2);return Y(i.selectLibrarySet("classic_ivory"))}),S(11,"Usa Questo"),k()()(),x(12,"div",195)(13,"h5",196),S(14,"Classic Ivory"),k(),x(15,"p",197),S(16,"Stile classico pregiato"),k()()(),x(17,"div",198)(18,"div",191)(19,"span",192),S(20,"\u{1F52E}"),k(),x(21,"div",199),S(22,"Premium"),k(),x(23,"div",193)(24,"button",200),Q("click",function(){J(n);let i=V(2);return Y(i.selectLibrarySet("neon_cyber"))}),S(25,"Sblocca"),k()()(),x(26,"div",195)(27,"h5",196),S(28,"Neon Cyber"),k(),x(29,"p",197),S(30,"Stile futuristico luminoso"),k()()()()(),x(31,"div")(32,"h4",201),S(33,"Scacchiere"),k(),x(34,"div",202)(35,"div",203),Q("click",function(){J(n);let i=V(2);return Y(i.selectLibrarySet("board_wood"))}),Te(36,"div",204),x(37,"span",205),S(38,"Legno"),k()(),x(39,"div",203),Q("click",function(){J(n);let i=V(2);return Y(i.selectLibrarySet("board_marble"))}),Te(40,"div",206),x(41,"span",205),S(42,"Marmo"),k()(),x(43,"div",203),Q("click",function(){J(n);let i=V(2);return Y(i.selectLibrarySet("board_glass"))}),Te(44,"div",207),x(45,"span",205),S(46,"Vetro"),k()()()()()}}function JK(t,e){if(t&1){let n=qe();x(0,"div",148),Q("click",function(){J(n);let i=V();return Y(i.showSetup=!1)}),x(1,"div",149),Q("click",function(i){return J(n),Y(i.stopPropagation())}),x(2,"div",150)(3,"div",151)(4,"h3",152),S(5,"Libreria Modelli 3D"),k(),x(6,"p",153),S(7,"Personalizza i tuoi pezzi e la scacchiera"),k()(),x(8,"button",154),Q("click",function(){J(n);let i=V();return Y(i.showSetup=!1)}),S(9,"\u2715"),k()(),x(10,"div",155)(11,"button",156),S(12," Configurazione Pezzi "),k(),x(13,"button",157),Q("click",function(){J(n);let i=V();return i.gameService.setView("marketplace"),Y(i.showSetup=!1)}),S(14," Visita lo Shop \u2728 "),k()(),x(15,"div",158),ge(16,WK,35,1,"div",159),ge(17,zK,47,0,"div",160),k()()()}if(t&2){let n=V();P(16),ve(n.setupTab==="upload"?16:-1),P(),ve(n.setupTab==="library"?17:-1)}}var tv=class t{constructor(){this.gameService=ae(Cn);this.supabase=ae(_n);this.showSetup=!1;this.fileSelected=new Gt;this.showAIGameModeSelector=!1;this.showLocalGameModeSelector=!1;this.showAccountManager=!1;this.showAuth=!1;this.authMode="login";this.authNickname="";this.authEmail="";this.authPassword="";this.authError="";this.authSuccess="";this.loadingAuth=!1;this.uploadingPhoto=!1;this.pieceTypes=[{id:"p",label:"Pedone"},{id:"r",label:"Torre"},{id:"n",label:"Cavallo"},{id:"b",label:"Alfiere"},{id:"q",label:"Regina"},{id:"k",label:"Re"}];this.checkerTypes=[{id:"cm",label:"Pedina (Man)"},{id:"ck",label:"Dama (King)"}];this.loadedStatus={};this.isEditingName=!1;this.tempNickname="";this.userStats={gamesPlayed:0,gamesWon:0,winRate:0,totalPoints:0,achievements:[],purchases:[],downloads:[]};this.orbs=Array.from({length:12},(e,n)=>{let r=["radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, rgba(99, 102, 241, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, rgba(168, 85, 247, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(236, 72, 153, 0.15) 0%, rgba(236, 72, 153, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 50%, transparent 100%)","radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 50%, transparent 100%)"];return{x:Math.random()*100,y:Math.random()*100,size:250+Math.random()*400,duration:15+Math.random()*25,delay:Math.random()*10,color:r[n%r.length]}});this.setupTab="upload"}getIconForType(e){return{p:"\u265F",r:"\u265C",n:"\u265E",b:"\u265D",q:"\u265B",k:"\u265A"}[e]||"?"}toggleAuth(){this.showAuth=!this.showAuth,this.authError="",this.authSuccess=""}toggleAuthMode(){this.authMode==="admin"?this.authMode="login":this.authMode=this.authMode==="login"?"register":"login",this.authError="",this.authSuccess=""}openAdminLogin(){this.authMode="admin",this.authNickname="",this.authPassword="",this.authError="",this.authSuccess="",this.showAuth=!0}async handleAuth(e){e.preventDefault(),this.loadingAuth=!0,this.authError="",this.authSuccess="",console.log("HomeView: Inizio procedura auth",this.authMode);try{if(this.authMode==="admin")if(this.authNickname==="admin"&&this.authPassword==="accessometti"){this.authSuccess="Benvenuto Admin! Redirect in corso...",setTimeout(()=>{this.showAuth=!1,this.gameService.setView("admin")},1500);return}else{this.authError="Credenziali Admin Errante!",this.loadingAuth=!1;return}let n=null;this.authMode==="login"?n=await this.supabase.authService.signIn(this.authNickname,this.authPassword):n=await this.supabase.authService.signUp(this.authEmail,this.authPassword,this.authNickname);let{data:r,error:i}=n;if(i){console.error("HomeView: Errore durante auth:",i);let s=i.message||"Si \xE8 verificato un errore.";s.includes("Invalid login credentials")?s="Credenziali non valide. Verifica nickname e password.":s.includes("User already registered")?s="Email gi\xE0 registrata. Prova ad accedere!":s.includes("Password should be at least")?s="La password deve avere almeno 6 caratteri.":s.includes("Email not confirmed")?s="Email non confermata. Controlla la tua posta elettronica.":s.includes("Nickname gi\xE0 in uso")&&(s="Questo nickname \xE8 gi\xE0 stato preso. Scegline un altro!"),this.authError=s}else this.authMode==="register"&&!r?.session?(this.authSuccess="Account creato! Ti abbiamo inviato un'email di conferma. Clicca sul link per attivare l'account.",this.authError=""):(this.authSuccess="Accesso in corso...",this.authError="",setTimeout(()=>{this.showAuth=!1,this.authSuccess=""},2e3),await this.supabase.loadUserProfile(),await this.loadUserStats(),this.authNickname="",this.authEmail="",this.authPassword="",console.log("HomeView: Login completato con successo"))}catch(n){this.authError="Errore di connessione al database.",console.error("HomeView: Critical Auth Error:",n)}finally{this.loadingAuth=!1}}async logout(){await this.supabase.signOut(),this.showAccountManager=!1,this.userStats={gamesPlayed:0,gamesWon:0,winRate:0,totalPoints:0,achievements:[],purchases:[],downloads:[]},console.log("HomeView: Logout effettuato")}openCareer(){this.supabase.user()?this.gameService.setView("career"):(this.toggleAuth(),this.authError="Registrazione obbligatoria per la Carriera")}openAdventure(){this.supabase.user()?alert("Modalit\xE0 Avventura in arrivo! \u{1F3F0}"):(this.toggleAuth(),this.authError="Registrazione obbligatoria per l'Avventura")}async openAccountManager(){if(!this.supabase.user()){this.toggleAuth();return}this.showAccountManager=!0,await this.loadUserStats()}async loadUserStats(){try{if(!this.supabase.user()?.id)return;let n=await this.supabase.getCareerProgress();n?(this.userStats.totalPoints=n.total_points||0,this.userStats.gamesPlayed=n.games_played||0,this.userStats.gamesWon=n.games_won||0,this.userStats.gamesPlayed>0?this.userStats.winRate=Number((this.userStats.gamesWon/this.userStats.gamesPlayed*100).toFixed(1)):this.userStats.winRate=0):(this.userStats.gamesPlayed=0,this.userStats.gamesWon=0,this.userStats.winRate=0,this.userStats.totalPoints=0)}catch(e){console.error("Error loading stats:",e)}}async onProfilePhotoSelected(e){let n=e.target;if(!n.files||!n.files[0])return;let r=n.files[0],i=this.supabase.user()?.id;if(i){this.uploadingPhoto=!0;try{let s=await ev.processAvatarImage(r),a=await(await fetch(s)).blob(),l=r.name.split(".").pop()||"jpg",u=`${`${i}-${Date.now()}.${l}`}`,{data:h,error:p}=await this.supabase.client.storage.from("avatars").upload(u,a,{contentType:"image/jpeg",upsert:!0});if(p)throw p.message.includes("Bucket not found")?new Error("Manca il bucket 'avatars' su Supabase. Crealo come Pubblico."):p;let{data:m}=this.supabase.client.storage.from("avatars").getPublicUrl(u);await this.supabase.client.from("profiles").update({avatar_url:m.publicUrl}).eq("id",i),await this.supabase.loadUserProfile(),alert("Foto aggiornata con successo! \u2728")}catch(s){console.error("Upload Error:",s),alert(`Impossibile caricare la foto: ${s.message}`)}finally{this.uploadingPhoto=!1}}}startEditingName(){this.tempNickname=this.supabase.username()||"",this.isEditingName=!0}async saveNickname(){if(!this.tempNickname.trim()){this.isEditingName=!1;return}try{let e=this.supabase.user()?.id;e&&(await this.supabase.client.from("profiles").update({username:this.tempNickname}).eq("id",e),this.supabase.username.set(this.tempNickname))}catch(e){console.error("Error saving name",e)}this.isEditingName=!1}async deleteProfilePhoto(){let e=this.supabase.user()?.id;if(e)try{await this.supabase.client.from("profiles").update({avatar_url:null}).eq("id",e),await this.supabase.loadUserProfile()}catch{alert("Errore cancellazione foto")}}selectAIGameMode(e){this.showAIGameModeSelector=!1,this.gameService.startGame(e,"ai")}selectLocalGameMode(e){this.showLocalGameModeSelector=!1,this.gameService.startGame(e,"local")}async ngOnInit(){this.supabase.user()&&await this.supabase.loadUserProfile(),await this.loadUserStats()}async selectLibrarySet(e){if(!this.supabase.user()){alert("Devi accedere per salvare le preferenze!");return}let n={board_wood:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_wood.glb",board_marble:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_marble.glb",board_glass:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/board_glass.glb",classic_ivory:{p_w:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/ivory_pawn_w.glb",n_w:"https://xxvlfbozkveeydritfeo.supabase.co/storage/v1/object/public/library/ivory_knight_w.glb"},neon_cyber:"LOCKED"};if(e==="neon_cyber"){alert("Questo set \xE8 bloccato (Premium). Acquistalo nello Shop!");return}try{let r=n[e];if(typeof r=="string")await this.supabase.saveUserAssetPreference("board",r),this.gameService.customMeshUrls.update(i=>te(A({},i),{board:r})),this.loadedStatus.board=!0;else if(typeof r=="object"){let i={};for(let[s,o]of Object.entries(r))await this.supabase.saveUserAssetPreference(s,o),i[s]=o,this.loadedStatus[s]=!0;this.gameService.customMeshUrls.update(s=>A(A({},s),i))}}catch(r){console.error("Library Error",r),alert("Errore applicazione asset: "+r.message)}}async onFileSelected(e,n,r){let i=e.target;if(!i.files||!i.files[0])return;let s=i.files[0],o=n;n!=="board"&&r&&(o=`${n}_${r}`);try{if(this.supabase.user()?.id){let l=await this.supabase.uploadCustomAssetFile(s,o);await this.supabase.saveUserAssetPreference(o,l),this.gameService.customMeshUrls.update(c=>te(A({},c),{[o]:l})),this.loadedStatus[o]=!0,n!=="board"&&this.gameService.setPieceStyle("custom"),this.fileSelected.emit({event:e,type:n,colorSuffix:r})}else{let l=URL.createObjectURL(s);this.gameService.customMeshUrls.update(c=>te(A({},c),{[o]:l})),this.loadedStatus[o]=!0,n!=="board"&&this.gameService.setPieceStyle("custom"),this.fileSelected.emit({event:e,type:n,colorSuffix:r})}}catch(a){console.error("Asset Upload Error:",a),alert(`Errore caricamento: ${a.message}`)}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-home-view"]],inputs:{showSetup:"showSetup"},outputs:{fileSelected:"fileSelected"},decls:123,vars:28,consts:[[1,"fixed","inset-0","z-50","flex","flex-col","p-4","md:p-6","overflow-y-auto","custom-scrollbar"],[1,"absolute","inset-0","z-0","pointer-events-none","overflow-hidden"],[1,"absolute","rounded-full","blur-[120px]","animate-float-slow",3,"width","height","left","top","animation-duration","animation-delay","background"],[1,"relative","z-50","flex","items-center","justify-between","mb-6","md:mb-8"],[1,"flex","items-center","gap-4"],[1,"relative","flex","flex-col","items-center"],[1,"text-4xl","sm:text-6xl","md:text-7xl","font-black","uppercase","tracking-tighter","bg-gradient-to-r","from-yellow-400","via-yellow-500","to-amber-600","text-transparent","bg-clip-text","drop-shadow-[0_0_30px_rgba(251,191,36,0.5)]","animate-pulse-subtle"],[1,"mt-2","animate-fade-in"],[1,"flex","flex-col","items-center","gap-1.5","group/auth"],[1,"relative","flex","items-center","justify-center","w-12","h-12","rounded-full","backdrop-blur-md","border","transition-all","group","shadow-2xl",3,"click"],[1,"w-full","h-full","rounded-full","flex","items-center","justify-center","p-2","transition-all","duration-500","group-hover:scale-105","border","border-transparent","overflow-hidden"],["alt","Avatar",1,"w-full","h-full","object-cover","rounded-full",3,"src"],["viewBox","0 0 100 100",1,"w-full","h-full","drop-shadow-md"],[1,"text-[9px]","font-black","text-indigo-400/60","uppercase","tracking-[0.2em]","opacity-0","group-hover/auth:opacity-100","transition-opacity","duration-300"],[1,"flex-1","flex","items-center","justify-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-4","md:gap-6","w-full","max-w-[1600px]","z-10","px-4"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-orange-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-orange-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"relative","flex","flex-col","items-center","text-center","gap-4"],[1,"w-16","h-16","rounded-2xl","bg-orange-500/20","flex","items-center","justify-center","border","border-orange-500/20","group-hover:bg-orange-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-orange-400"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-slate-400","text-[10px]","font-bold","uppercase","tracking-[0.2em]","mt-1"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-indigo-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-indigo-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-indigo-500/20","flex","items-center","justify-center","border","border-indigo-500/20","group-hover:bg-indigo-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-indigo-400"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"],["cx","12","cy","12","r","3"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-cyan-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-cyan-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-cyan-500/20","flex","items-center","justify-center","border","border-cyan-500/20","group-hover:bg-cyan-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-cyan-400"],["d","M12 20h9"],["d","M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"],[1,"group","relative","overflow-hidden","bg-slate-900/40","backdrop-blur-2xl","border","border-white/5","hover:border-yellow-500/30","rounded-[2rem]","p-6","md:p-8","transition-all","hover:scale-[1.02]","shadow-2xl",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-yellow-500/10","via-transparent","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"w-16","h-16","rounded-2xl","bg-yellow-500/20","flex","items-center","justify-center","border","border-yellow-500/20","group-hover:bg-yellow-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-yellow-400"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5"],["d","M2 12l10 5 10-5"],[1,"relative","group"],[1,"absolute","inset-0","z-50","flex","items-center","justify-center","bg-slate-950/80","backdrop-blur-sm","rounded-[2rem]","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none"],[1,"px-6","py-2","bg-emerald-500","rounded-full","shadow-[0_0_30px_rgba(16,185,129,0.4)]"],[1,"text-white","font-black","uppercase","text-sm","tracking-[0.2em]"],[1,"w-full","relative","overflow-hidden","bg-slate-900/20","backdrop-blur-2xl","border","border-white/5","rounded-[2rem]","p-6","md:p-8","transition-all","opacity-40","cursor-not-allowed"],[1,"w-16","h-16","rounded-2xl","bg-emerald-500/20","flex","items-center","justify-center","border","border-emerald-500/20","group-hover:bg-emerald-500/30","transition-all"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-emerald-400"],["d","M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"],["points","9 22 9 12 15 12 15 22"],[1,"text-2xl","font-black","text-slate-400","uppercase","tracking-tighter"],[1,"text-slate-600","text-[10px]","font-bold","uppercase","tracking-[0.2em]","mt-1"],[1,"px-6","py-2","bg-rose-500","rounded-full","shadow-[0_0_30px_rgba(244,63,94,0.4)]"],[1,"w-16","h-16","rounded-2xl","bg-slate-800","flex","items-center","justify-center","border","border-white/5"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-8","h-8","text-slate-500"],["cx","12","cy","12","r","10"],["d","M8 14s1.5 2 4 2 4-2 4-2"],["x1","9","y1","9","x2","9.01","y2","9"],["x1","15","y1","9","x2","15.01","y2","9"],["d","M21 8l-2-2H5L3 8v10a2 2 0 002 2h14a2 2 0 002-2V8z"],["d","M3 8h18M10 12h4"],[1,"relative","z-10","mt-auto","pt-8","pb-4","flex","justify-center","opacity-30","hover:opacity-100","transition-opacity"],[1,"text-[10px]","font-black","text-slate-500","uppercase","tracking-[0.3em]","hover:text-indigo-400","transition-colors",3,"click"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-gradient-to-br","from-slate-950/98","via-indigo-950/95","to-slate-900/98","backdrop-blur-2xl","animate-fade-in","p-4"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/98","backdrop-blur-2xl","p-4","animate-fade-in"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-xl","p-4","animate-fade-in"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in"],[1,"absolute","rounded-full","blur-[120px]","animate-float-slow"],[1,"text-[10px]","md:text-[11px]","font-black","text-orange-400/80","uppercase","tracking-[0.4em]"],["cx","50","cy","35","r","20"],["d","M20 80 Q50 60 80 80 L80 90 L20 90 Z"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-gradient-to-br","from-slate-950/98","via-indigo-950/95","to-slate-900/98","backdrop-blur-2xl","animate-fade-in","p-4",3,"click"],[1,"relative","bg-slate-900/60","backdrop-blur-3xl","border","border-white/10","rounded-[3rem]","max-w-lg","w-full","shadow-[0_0_120px_rgba(99,102,241,0.25)]","overflow-hidden",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-indigo-600/10","via-purple-600/5","to-pink-600/10","animate-gradient-shift"],[1,"relative","z-10","p-8","md:p-12"],[1,"flex","flex-col","items-center","text-center","mb-10"],[1,"text-4xl","md:text-5xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-white","via-indigo-200","to-white","tracking-tight","uppercase","mb-2"],[1,"text-indigo-300/80","text-sm","font-bold","uppercase","tracking-[0.2em]"],[1,"space-y-5",3,"submit"],[1,"space-y-2"],[1,"text-xs","font-black","text-indigo-300","uppercase","tracking-[0.15em]","ml-2"],["type","text","name","nickname","required","",1,"w-full","bg-slate-950/70","border","border-white/10","rounded-2xl","px-6","py-4","text-white","text-lg","focus:border-indigo-400/60","transition-all",3,"ngModelChange","ngModel"],["type","password","name","password","required","",1,"w-full","bg-slate-950/70","border","border-white/10","rounded-2xl","px-6","py-4","text-white","text-lg","focus:border-indigo-400/60","transition-all",3,"ngModelChange","ngModel"],[1,"text-rose-400","text-sm","font-bold","text-center","uppercase","tracking-wide","bg-rose-500/10","py-3","rounded-xl","border","border-rose-500/20","shadow-lg","animate-fade-in","px-4"],[1,"text-emerald-400","text-sm","font-bold","text-center","uppercase","tracking-wide","bg-emerald-500/10","py-3","rounded-xl","border","border-emerald-500/20","shadow-lg","animate-fade-in","px-4"],["type","submit",1,"w-full","bg-gradient-to-r","from-indigo-600","to-purple-600","text-white","font-black","py-5","text-lg","rounded-2xl","shadow-xl","transition-all","active:scale-[0.98]","uppercase","tracking-widest","mt-6",3,"disabled"],[1,"mt-8","text-center","text-slate-400","text-sm","font-bold","uppercase","tracking-widest"],[1,"hover:text-white","transition-colors",3,"click"],[1,"absolute","top-6","right-6","text-slate-500","hover:text-white","transition-colors",3,"click"],["type","email","name","email","required","",1,"w-full","bg-slate-950/70","border","border-white/10","rounded-2xl","px-6","py-4","text-white","text-lg","focus:border-indigo-400/60","transition-all",3,"ngModelChange","ngModel"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/98","backdrop-blur-2xl","p-4","animate-fade-in",3,"click"],[1,"relative","bg-slate-900/80","backdrop-blur-3xl","border","border-white/10","rounded-[3rem]","max-w-2xl","w-full","max-h-[90vh]","shadow-[0_0_120px_rgba(99,102,241,0.25)]","overflow-hidden","flex","flex-col",3,"click"],[1,"absolute","top-6","right-6","z-50","w-10","h-10","rounded-full","bg-slate-800/80","flex","items-center","justify-center","text-white","border","border-white/10","hover:border-red-500/50","transition-all",3,"click"],[1,"p-8","md:p-12","overflow-y-auto","custom-scrollbar","relative","z-10"],[1,"flex","flex-col","md:flex-row","items-center","gap-8","mb-10","pb-10","border-b","border-white/5"],[1,"w-32","h-32","rounded-full","overflow-hidden","border-4","border-indigo-500/30","shadow-2xl","bg-slate-800"],[1,"w-full","h-full","object-cover",3,"src"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gradient-to-br","from-indigo-600","to-purple-600"],[1,"absolute","bottom-0","right-0","w-11","h-11","rounded-2xl","bg-indigo-600","flex","items-center","justify-center","cursor-pointer","shadow-[0_0_20px_rgba(79,70,229,0.5)]","hover:bg-indigo-500","hover:scale-110","transition-all","active:scale-90","border-2","border-slate-900","group-hover:rotate-12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","white",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15a2.25 2.25 0 0 0 2.25-2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"text-center","md:text-left","relative","group"],[1,"relative"],["title","Doppio click per modificare",1,"text-5xl","md:text-6xl","font-black","text-white","uppercase","tracking-tighter","drop-shadow-[0_0_15px_rgba(255,255,255,0.2)]","mb-1","cursor-pointer","hover:text-indigo-200","transition-colors"],[1,"text-indigo-400/60","font-black","uppercase","tracking-[0.2em]","text-[10px]"],[1,"flex","gap-3","mt-8","justify-center","md:justify-start"],[1,"px-5","py-2.5","bg-rose-500/10","text-rose-400","border","border-rose-500/20","rounded-2xl","text-[10px]","font-black","uppercase","tracking-widest","hover:bg-rose-500/20","transition-all","shadow-lg","active:scale-95"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-8"],[1,"bg-white/5","border","border-white/5","p-6","rounded-2xl","text-center"],[1,"text-[10px]","text-slate-500","font-black","uppercase","tracking-widest","mb-1"],[1,"text-3xl","font-black","text-white"],[1,"text-3xl","font-black","text-green-400"],[1,"text-3xl","font-black","text-indigo-400"],[1,"text-3xl","font-black","text-yellow-500"],[1,"mb-8"],[1,"text-xl","font-black","text-white","uppercase","tracking-tighter","mb-4","flex","items-center","gap-2"],[1,"text-2xl"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","max-h-48","overflow-y-auto","custom-scrollbar"],[1,"text-slate-500","text-sm","text-center","py-4"],[1,"w-full","py-5","bg-rose-500/10","text-rose-400","border","border-rose-500/20","rounded-2xl","font-black","uppercase","tracking-[0.2em]","hover:bg-rose-500/20","transition-all","shadow-xl",3,"click"],["viewBox","0 0 100 100","fill","white",1,"w-20","h-20"],["type","text","autoFocus","",1,"text-5xl","md:text-6xl","font-black","text-white","uppercase","tracking-tighter","bg-transparent","border-b-2","border-indigo-500","focus:outline-none","w-full","text-center","md:text-left","mb-1",3,"ngModelChange","blur","keydown.enter","ngModel"],[1,"text-xs","text-indigo-400","mt-1"],["title","Doppio click per modificare",1,"text-5xl","md:text-6xl","font-black","text-white","uppercase","tracking-tighter","drop-shadow-[0_0_15px_rgba(255,255,255,0.2)]","mb-1","cursor-pointer","hover:text-indigo-200","transition-colors",3,"dblclick"],[1,"px-5","py-2.5","bg-rose-500/10","text-rose-400","border","border-rose-500/20","rounded-2xl","text-[10px]","font-black","uppercase","tracking-widest","hover:bg-rose-500/20","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"flex","items-center","gap-4","p-3","bg-slate-800/50","rounded-xl","mb-2","last:mb-0"],[1,"text-3xl"],[1,"flex-1"],[1,"text-sm","font-bold","text-white"],[1,"text-[10px]","text-slate-400"],[1,"flex","items-center","justify-between","p-3","bg-slate-800/50","rounded-xl","mb-2","last:mb-0"],[1,"text-sm","font-black","text-green-400"],[1,"text-xs","font-black","text-indigo-400","bg-indigo-500/10","px-2","py-1","rounded-full"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-slate-950/90","backdrop-blur-xl","p-4","animate-fade-in",3,"click"],[1,"bg-slate-900","border","border-white/10","rounded-[2.5rem]","p-8","max-w-md","w-full",3,"click"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter","text-center","mb-6"],[1,"grid","grid-cols-2","gap-4"],[1,"p-6","bg-slate-800","hover:bg-orange-500/20","border","border-white/10","rounded-2xl","group","transition-all",3,"click"],[1,"text-4xl","block","mb-2"],[1,"text-xs","font-black","text-white","uppercase","tracking-widest"],[1,"p-6","bg-slate-800","hover:bg-indigo-500/20","border","border-white/10","rounded-2xl","group","transition-all",3,"click"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in",3,"click"],[1,"bg-slate-900/90","backdrop-blur-2xl","border","border-white/10","shadow-2xl","rounded-[2.5rem]","w-full","max-w-4xl","overflow-hidden","flex","flex-col","max-h-[90vh]",3,"click"],[1,"p-6","border-b","border-white/10","bg-black/20","flex","justify-between","items-center"],[1,"flex","flex-col"],[1,"text-2xl","font-black","text-white","uppercase","tracking-wider"],[1,"text-xs","text-slate-400","mt-1","uppercase","font-bold","tracking-widest"],[1,"text-slate-400","hover:text-white","p-2","text-xl","transition-colors",3,"click"],[1,"flex","border-b","border-white/10","px-8"],[1,"px-6","py-4","text-sm","font-black","uppercase","tracking-widest","border-b-2","transition-all","border-blue-500","text-white"],[1,"px-6","py-4","text-sm","font-black","uppercase","tracking-widest","border-b-2","transition-all","border-transparent","text-slate-500","hover:text-indigo-400",3,"click"],[1,"p-8","overflow-y-auto","custom-scrollbar","bg-transparent","flex-1"],[1,"space-y-10","animate-fade-in"],[1,"space-y-8","animate-fade-in"],[1,"bg-indigo-900/10","border","border-white/5","rounded-[2rem]","p-8","space-y-6"],[1,"flex","items-center","gap-6"],[1,"w-14","h-14","rounded-2xl","bg-slate-800/50","flex","items-center","justify-center","border","border-white/10"],["viewBox","0 0 24 24","fill","currentColor",1,"w-8","h-8","text-slate-400"],["x","2","y","2","width","20","height","20","rx","2","fill","none","stroke","currentColor","stroke-width","2"],["x","2","y","2","width","5","height","5"],["x","12","y","2","width","5","height","5"],["x","7","y","7","width","5","height","5"],["x","17","y","7","width","5","height","5"],["x","2","y","12","width","5","height","5"],["x","12","y","12","width","5","height","5"],["x","7","y","17","width","5","height","5"],["x","17","y","17","width","5","height","5"],[1,"text-xl","font-black","text-white","uppercase","tracking-tight"],[1,"text-[10px]","text-indigo-400","font-bold","uppercase","tracking-widest","mt-1"],[1,"cursor-pointer","block"],[1,"w-full","bg-slate-800","hover:bg-slate-700","text-slate-300","text-xs","font-black","uppercase","text-center","py-4","rounded-xl","border","border-white/10","transition-all","block","shadow-lg"],["type","file","accept",".stl,.glb,.gltf",1,"hidden",3,"change"],[1,"text-sm","font-black","text-blue-400","uppercase","tracking-widest","mb-6","border-b","border-blue-500/30","pb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","flex","flex-col","gap-4","group","hover:border-blue-500/30","transition-all"],[1,"text-sm","font-black","text-emerald-400","uppercase","tracking-widest","mb-6","border-b","border-emerald-500/30","pb-3"],[1,"bg-white/5","border","border-white/5","rounded-2xl","p-4","flex","flex-col","gap-4","group","hover:border-emerald-500/30","transition-all"],[1,"w-10","h-10","rounded-lg","bg-black/40","flex","items-center","justify-center","text-xl","text-slate-400","border","border-white/5"],[1,"text-base","font-black","text-white","uppercase"],[1,"grid","grid-cols-2","gap-3"],[1,"cursor-pointer","bg-slate-800","hover:bg-slate-700","text-slate-300","text-[10px]","font-black","uppercase","text-center","py-3","rounded-xl","border","border-white/10","transition-all"],[1,"w-10","h-10","rounded-lg","bg-black/40","flex","items-center","justify-center","text-xl","text-emerald-500","border","border-white/5"],[1,"text-sm","font-black","text-purple-400","uppercase","tracking-widest","mb-4"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","border","border-white/10","rounded-2xl","p-1","overflow-hidden","group"],[1,"relative","h-32","bg-slate-950/50","rounded-xl","overflow-hidden","mb-3","flex","items-center","justify-center"],[1,"text-4xl"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],[1,"px-4","py-2","bg-white","text-black","font-black","uppercase","text-xs","rounded-full","tracking-wider","transform","translate-y-2","group-hover:translate-y-0","transition-all",3,"click"],[1,"px-3","pb-3"],[1,"text-white","font-bold","uppercase","text-sm"],[1,"text-xs","text-slate-500","mt-1"],[1,"bg-gradient-to-br","from-slate-800","to-slate-900","border","border-purple-500/30","rounded-2xl","p-1","overflow-hidden","group","shadow-[0_0_20px_rgba(168,85,247,0.15)]"],[1,"absolute","top-2","right-2","bg-purple-500","text-white","text-[10px]","font-black","px-2","py-1","rounded-full","uppercase","tracking-wider"],[1,"px-4","py-2","bg-purple-500","text-white","font-black","uppercase","text-xs","rounded-full","tracking-wider","transform","translate-y-2","group-hover:translate-y-0","transition-all",3,"click"],[1,"text-sm","font-black","text-cyan-400","uppercase","tracking-widest","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3"],[1,"bg-slate-800/50","border","border-white/5","rounded-xl","p-3","flex","flex-col","items-center","gap-2","cursor-pointer","hover:bg-slate-700/50","transition-all",3,"click"],[1,"w-12","h-12","rounded","bg-[#5c4033]"],[1,"text-[10px]","font-bold","text-white","uppercase"],[1,"w-12","h-12","rounded","bg-slate-300"],[1,"w-12","h-12","rounded","bg-cyan-900/40","border","border-cyan-500/30"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1),Wt(2,yK,1,14,"div",2,Yu),k(),x(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1",6),S(8," THE KING "),k(),ge(9,wK,3,1,"div",7),k()(),x(10,"div",8)(11,"button",9),Q("click",function(){return r.supabase.user()?r.openAccountManager():r.toggleAuth()}),x(12,"div",10),ge(13,EK,1,1,"img",11)(14,_K,3,1,":svg:svg",12),k()(),ge(15,CK,2,1,"span",13),k()(),x(16,"div",14)(17,"div",15)(18,"button",16),Q("click",function(){return r.showLocalGameModeSelector=!0}),Te(19,"div",17),x(20,"div",18)(21,"div",19),Ke(),x(22,"svg",20),Te(23,"path",21)(24,"circle",22)(25,"path",23)(26,"path",24),k()(),ft(),x(27,"div")(28,"h2",25),S(29,"Sfida Locale"),k(),x(30,"p",26),S(31,"Multiplayer Offline"),k()()()(),x(32,"button",27),Q("click",function(){return r.showAIGameModeSelector=!0}),Te(33,"div",28),x(34,"div",18)(35,"div",29),Ke(),x(36,"svg",30),Te(37,"path",31)(38,"circle",32),k()(),ft(),x(39,"div")(40,"h2",25),S(41,"Sfida AI"),k(),x(42,"p",26),S(43,"vs Gemini AI"),k()()()(),x(44,"button",33),Q("click",function(){return r.showSetup=!0}),Te(45,"div",34),x(46,"div",18)(47,"div",35),Ke(),x(48,"svg",36),Te(49,"path",37)(50,"path",38),k()(),ft(),x(51,"div")(52,"h2",25),S(53,"Setup"),k(),x(54,"p",26),S(55,"Modelli 3D"),k()()()(),x(56,"button",39),Q("click",function(){return r.openCareer()}),Te(57,"div",40),x(58,"div",18)(59,"div",41),Ke(),x(60,"svg",42),Te(61,"path",43)(62,"path",44)(63,"path",45),k()(),ft(),x(64,"div")(65,"h2",25),S(66,"Carriera"),k(),x(67,"p",26),S(68,"100 Livelli"),k()()()(),x(69,"div",46)(70,"div",47)(71,"div",48)(72,"span",49),S(73,"Soon"),k()()(),x(74,"button",50)(75,"div",18)(76,"div",51),Ke(),x(77,"svg",52),Te(78,"path",53)(79,"polyline",54),k()(),ft(),x(80,"div")(81,"h2",55),S(82,"Avventura"),k(),x(83,"p",56),S(84,"Missioni Epiche"),k()()()()(),x(85,"div",46)(86,"div",47)(87,"div",57)(88,"span",49),S(89,"Soon"),k()()(),x(90,"button",50)(91,"div",18)(92,"div",58),Ke(),x(93,"svg",59),Te(94,"circle",60)(95,"path",61)(96,"line",62)(97,"line",63),k()(),ft(),x(98,"div")(99,"h2",55),S(100,"Sfida Online"),k(),x(101,"p",56),S(102,"Multiplayer PvP"),k()()()()(),x(103,"button",39),Q("click",function(){return r.gameService.setView("marketplace")}),Te(104,"div",40),x(105,"div",18)(106,"div",41),Ke(),x(107,"svg",42),Te(108,"path",64)(109,"path",65),k()(),ft(),x(110,"div")(111,"h2",25),S(112,"Shop"),k(),x(113,"p",26),S(114,"Skin & Assets"),k()()()()()(),x(115,"div",66)(116,"button",67),Q("click",function(){return r.openAdminLogin()}),S(117," Area Amministrazione "),k()(),ge(118,TK,28,10,"div",68),ge(119,$K,70,11,"div",69),ge(120,HK,15,0,"div",70),ge(121,qK,15,0,"div",70),ge(122,JK,18,2,"div",71),k()),n&2&&(P(2),zt(r.orbs),P(7),ve(r.supabase.user()&&r.supabase.username()?9:-1),P(2),et("bg-indigo-500/20",r.supabase.user())("border-indigo-400/50",r.supabase.user())("bg-slate-800/40",!r.supabase.user())("border-white/10",!r.supabase.user()),P(),et("bg-gradient-to-br",r.supabase.user())("from-indigo-500",r.supabase.user())("to-purple-600",r.supabase.user())("shadow-[0_0_30px_rgba(99,102,241,0",r.supabase.user())("bg-slate-700/50",!r.supabase.user())("opacity-40",!r.supabase.user()),P(),ve(r.supabase.user()&&r.supabase.avatarUrl()?13:14),P(2),ve(r.supabase.user()&&r.supabase.username()?15:-1),P(103),ve(r.showAuth?118:-1),P(),ve(r.showAccountManager?119:-1),P(),ve(r.showLocalGameModeSelector?120:-1),P(),ve(r.showAIGameModeSelector?121:-1),P(),ve(r.showSetup?122:-1))},dependencies:[di,Zg,HM,Qg,LM,OM,bS,SS,CS],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6366f14d;border-radius:10px}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translate(0)}33%{transform:translate(30px,-50px)}66%{transform:translate(-20px,20px)}}.animate-float-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float infinite ease-in-out}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out}@keyframes _ngcontent-%COMP%_gradient-shift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.animate-gradient-shift[_ngcontent-%COMP%]{background-size:200% 200%;animation:_ngcontent-%COMP%_gradient-shift 15s ease infinite}@keyframes _ngcontent-%COMP%_pulse-subtle{0%,to{filter:drop-shadow(0 0 30px rgba(251,191,36,.5))}50%{filter:drop-shadow(0 0 50px rgba(251,191,36,.8))}}.animate-pulse-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-subtle 3s ease-in-out infinite}"]})}};function YK(t,e){if(t&1){let n=qe();O(0,"div",18)(1,"div",20)(2,"div")(3,"h2",21),S(4,"Set Gratuiti"),F(),O(5,"p",22),S(6,"Disponibili subito per il tuo account"),F()()(),O(7,"div",23)(8,"div",24)(9,"div",25)(10,"span",26),S(11,"\u{1F3F0}"),F(),O(12,"div",27),S(13,"Default"),F()(),O(14,"div",28)(15,"h3",29),S(16,"Classic Kit v1"),F(),O(17,"p",30),S(18,"Modelli standard ottimizzati per browser"),F(),O(19,"button",31),it("click",function(){J(n);let i=V();return Y(i.useKit("default"))}),S(20," Attiva Kit "),F()()(),O(21,"div",32)(22,"span",33),S(23,"\u{1F4E6}"),F(),O(24,"p",34),S(25,"New Kit Soon"),F()()()()}}function KK(t,e){t&1&&(O(0,"div",19)(1,"div",35)(2,"span",36),S(3,"\u{1F48E}"),F()(),O(4,"h2",37),S(5,"Collezione Premium"),F(),O(6,"p",38),S(7,"Stiamo forgiando nuovi pezzi leggendari. Torna presto per sbloccare set esclusivi realizzati dai migliori artisti 3D."),F()())}function QK(t,e){t&1&&(O(0,"div",19)(1,"div",39)(2,"span",36),S(3,"\u{1F680}"),F()(),O(4,"h2",37),S(5,"User Market"),F(),O(6,"p",38),S(7,"Carica le tue creazioni e vendile alla community di THE KING. Una piattaforma decentralizzata per asset di scacchi 3D."),F()())}var nv=class t{constructor(){this.supabase=ae(_n);this.gameService=ae(Cn);this.assets=[];this.loading=!0;this.activeTab="free"}ngOnInit(){this.fetchAssets()}async fetchAssets(){this.loading=!0;try{let{data:e,error:n}=await this.supabase.client.from("asset_collections").select("*").eq("is_public",!0);!n&&e&&(this.assets=e)}catch(e){console.error("Error fetching assets:",e)}finally{this.loading=!1}}useKit(e){e==="default"&&(this.gameService.setPieceStyle("classic"),this.gameService.customMeshUrls.set({}),alert("Kit Classic v1 Attivato! \u{1F451}"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-marketplace-view"]],decls:34,vars:13,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950/98","backdrop-blur-3xl","animate-fade-in","font-sans"],[1,"relative","z-10","px-8","py-8","md:px-16","flex","items-center","justify-between","border-b","border-white/5","bg-slate-900/40","shadow-2xl"],[1,"flex","items-center","gap-8"],[1,"w-14","h-14","rounded-2xl","bg-slate-800","hover:bg-slate-700","border","border-white/10","hover:border-indigo-400/50","transition-all","flex","items-center","justify-center","group","shadow-xl",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-6","h-6","text-slate-400","group-hover:text-indigo-400","transition-colors"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"text-4xl","md:text-5xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-indigo-400/80","text-[10px]","md:text-xs","font-black","uppercase","tracking-[0.4em]"],[1,"hidden","lg:flex","items-center","gap-6"],[1,"flex","flex-col","items-end"],[1,"text-[10px]","text-slate-500","font-black","uppercase","tracking-widest"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter"],[1,"px-6","py-3","bg-indigo-600","rounded-xl","font-black","uppercase","text-[10px]","tracking-widest","shadow-[0_0_20px_rgba(79,70,229,0.4)]","hover:scale-105","transition-all"],[1,"px-8","md:px-16","pt-10","flex","gap-4","overflow-x-auto","scrollbar-hide"],[1,"px-8","py-4","rounded-2xl","font-black","uppercase","text-xs","tracking-widest","transition-all","border","border-white/5","min-w-[180px]",3,"click"],[1,"px-8","py-4","bg-slate-900/30","text-slate-600","rounded-2xl","font-black","uppercase","text-xs","tracking-widest","border","border-white/5","opacity-60","min-w-[220px]","flex","items-center","justify-between","gap-4","cursor-not-allowed",3,"click"],[1,"px-3","py-1","bg-black/40","rounded-full","text-[8px]"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-8","md:p-16"],[1,"max-w-7xl","mx-auto","space-y-12","animate-fade-in"],[1,"flex","flex-col","items-center","justify-center","py-32","text-center","animate-fade-in"],[1,"flex","items-end","justify-between","border-b","border-white/5","pb-6"],[1,"text-3xl","font-black","text-white","uppercase","tracking-tight"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","mt-1"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-8"],[1,"group","relative","bg-slate-900/40","border","border-white/5","rounded-[2.5rem]","overflow-hidden","hover:border-indigo-500/30","transition-all","hover:translate-y-[-8px]","shadow-2xl","flex","flex-col"],[1,"aspect-[4/3]","bg-slate-950","relative","overflow-hidden","flex","items-center","justify-center"],[1,"text-6xl","group-hover:scale-110","transition-transform","duration-500"],[1,"absolute","top-6","left-6","px-3","py-1","bg-indigo-500","text-white","text-[9px]","font-black","uppercase","rounded-full","tracking-widest","shadow-lg"],[1,"p-8"],[1,"text-xl","font-black","text-white","uppercase","tracking-tighter","mb-2"],[1,"text-[10px]","text-slate-500","font-bold","uppercase","tracking-widest","mb-6"],[1,"w-full","py-4","bg-white/5","hover:bg-indigo-600","text-slate-400","hover:text-white","border","border-white/5","hover:border-indigo-400/50","rounded-2xl","font-black","uppercase","tracking-[0.2em]","text-[10px]","transition-all",3,"click"],[1,"border-2","border-dashed","border-white/5","rounded-[2.5rem]","flex","flex-col","items-center","justify-center","p-8","opacity-20"],[1,"text-4xl","mb-4"],[1,"text-[9px]","font-black","uppercase","tracking-[0.3em]"],[1,"w-32","h-32","rounded-[2.5rem]","bg-indigo-600/10","border","border-indigo-500/20","flex","items-center","justify-center","mb-10","shadow-[0_0_50px_rgba(79,70,229,0.1)]"],[1,"text-6xl"],[1,"text-5xl","font-black","text-white","uppercase","tracking-tighter","mb-4"],[1,"text-slate-500","text-sm","font-bold","uppercase","tracking-widest","max-w-lg","leading-relaxed"],[1,"w-32","h-32","rounded-[2.5rem]","bg-emerald-600/10","border","border-emerald-500/20","flex","items-center","justify-center","mb-10"]],template:function(n,r){n&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),it("click",function(){return r.gameService.setView("home")}),Ke(),O(4,"svg",4),_t(5,"path",5),F()(),ft(),O(6,"div")(7,"h1",6),S(8,"THE KING SHOP"),F(),O(9,"p",7),S(10,"Asset Collection & Custom Models"),F()()(),O(11,"div",8)(12,"div",9)(13,"p",10),S(14,"Saldo Crediti"),F(),O(15,"p",11),S(16,"0.00 \u20AC"),F()(),O(17,"button",12),S(18,"Ricarica"),F()()(),O(19,"div",13)(20,"button",14),it("click",function(){return r.activeTab="free"}),S(21," Libreria Gratis "),F(),O(22,"button",15),it("click",function(){return r.activeTab="paid"}),S(23," Premium Pack "),O(24,"span",16),S(25,"Soon"),F()(),O(26,"button",15),it("click",function(){return r.activeTab="community"}),S(27," User Marketplace "),O(28,"span",16),S(29,"Soon"),F()()(),O(30,"div",17),ge(31,YK,26,0,"div",18),ge(32,KK,8,0,"div",19),ge(33,QK,8,0,"div",19),F()()),n&2&&(P(20),et("bg-indigo-600",r.activeTab==="free")("text-white",r.activeTab==="free")("bg-slate-900/50",r.activeTab!=="free")("text-slate-500",r.activeTab!=="free"),P(2),et("bg-amber-600",r.activeTab==="paid"),P(9),ve(r.activeTab==="free"?31:-1),P(),ve(r.activeTab==="paid"?32:-1),P(),ve(r.activeTab==="community"?33:-1))},dependencies:[di],styles:[".scrollbar-hide[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scrollbar-hide[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s ease-out}"]})}};function XK(t,e){if(t&1){let n=qe();O(0,"div",20)(1,"div",2)(2,"div",23),Ke(),O(3,"svg",24),_t(4,"path",25),F()(),ft(),O(5,"div")(6,"h3",26),S(7,"Partita in Corso"),F(),O(8,"p",27),S(9),F()()(),O(10,"div",28)(11,"button",29),it("click",function(){J(n);let i=V();return Y(i.resumeGame())}),S(12," Riprendi "),F(),O(13,"button",30),it("click",function(){J(n);let i=V();return Y(i.abandonSavedGame())}),S(14," Abbandona "),F()()()}if(t&2){let n=V();P(9),Ge("Livello ",n.savedGame.level," \u2022 Hai ancora una mossa!")}}function ZK(t,e){t&1&&_t(0,"div",32)}function eQ(t,e){if(t&1&&(O(0,"span"),S(1),F(),O(2,"span",34),S(3),F()),t&2){let n=V().$implicit,r=Em(1),i=V();vm(_m("text-2xl font-black ",r?"text-orange-400":"text-white"," group-hover:scale-110 transition-transform")),P(),ze(n),P(2),ze(n<(i.activeMode==="chess"?i.currentChessLevel:i.currentCheckersLevel)?"Completato":"Inizia")}}function tQ(t,e){t&1&&(Ke(),O(0,"svg",33),_t(1,"rect",35)(2,"path",36),F())}function nQ(t,e){if(t&1){let n=qe();ym(0)(1),O(2,"button",31),it("click",function(){let i=J(n).$implicit,s=Em(0),o=V();return Y(s?o.startLevel(i):null)}),ge(3,ZK,1,0,"div",32),ge(4,eQ,4,5)(5,tQ,3,0,":svg:svg",33),F()}if(t&2){let n=e.$implicit,r=V(),i=wm(n<=(r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel));P();let s=wm(n===(r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel));P(),vm(_m(`group relative aspect-square rounded-2xl flex flex-col items-center justify-center transition-all duration-300
                         `,i?"bg-slate-900 hover:bg-slate-800 border-white/10":"bg-slate-950 border-white/5 cursor-not-allowed",`
                         border hover:border-orange-500/40 shadow-xl overflow-hidden`)),et("opacity-40",!i)("grayscale",!i)("scale-105",s)("ring-4",s)("ring-orange-500/50",s),gm("disabled",!i),P(),ve(s&&i?3:-1),P(),ve(i?4:5)}}var rv=class t{constructor(){this.supabase=ae(_n);this.gameService=ae(Cn);this.activeMode="chess";this.currentChessLevel=1;this.currentCheckersLevel=1;this.totalPoints=0;this.savedGame=null;this.loading=!0;this.levels=Array.from({length:100},(e,n)=>n+1)}ngOnInit(){this.loadProgress()}async loadProgress(){this.loading=!0;let e=await this.supabase.getCareerProgress();e&&(this.currentChessLevel=e.chess_level||1,this.currentCheckersLevel=e.checkers_level||1,this.totalPoints=e.total_points||0,this.savedGame=e.current_game_state),this.loading=!1}startLevel(e){this.gameService.startGame(this.activeMode,"career",e)}resumeGame(){this.savedGame&&(this.gameService.gameMode.set(this.savedGame.type),this.gameService.playerMode.set("career"),this.gameService.careerLevel.set(this.savedGame.level),this.gameService.board.set(this.savedGame.state.board),this.gameService.turn.set(this.savedGame.state.turn),this.gameService.lastMove.set(this.savedGame.state.lastMove),this.gameService.viewState.set("game"))}async abandonSavedGame(){await this.supabase.clearSavedGame(),this.savedGame=null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-career-view"]],decls:32,vars:15,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950/98","backdrop-blur-3xl","animate-fade-in","overflow-hidden"],[1,"relative","z-10","px-6","py-6","md:px-12","flex","items-center","justify-between","border-b","border-white/5","bg-slate-900/40"],[1,"flex","items-center","gap-6"],[1,"w-12","h-12","rounded-2xl","bg-slate-800","hover:bg-slate-700","border","border-white/10","hover:border-orange-400/50","transition-all","flex","items-center","justify-center","group","shadow-xl",3,"click"],["viewBox","0 0 100 100","fill","none","stroke","currentColor","stroke-width","8",1,"w-6","h-6","text-slate-400","group-hover:text-orange-400","transition-colors"],["d","M70 20 L30 50 L70 80","stroke-linecap","round","stroke-linejoin","round"],[1,"text-3xl","md:text-4xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-orange-400/80","text-[10px]","md:text-xs","font-bold","uppercase","tracking-widest"],[1,"flex","items-center","gap-4","bg-slate-950/60","px-6","py-3","rounded-2xl","border","border-orange-500/20","shadow-[0_0_20px_rgba(249,115,22,0.1)]"],[1,"text-right"],[1,"text-[10px]","text-slate-500","font-bold","uppercase","tracking-widest","leading-none"],[1,"text-xl","font-black","text-transparent","bg-clip-text","bg-gradient-to-r","from-orange-400","to-yellow-400"],[1,"w-10","h-10","rounded-xl","bg-gradient-to-br","from-orange-500","to-amber-600","flex","items-center","justify-center","shadow-lg","animate-pulse-subtle"],["viewBox","0 0 24 24","fill","white",1,"w-6","h-6"],["d","M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"],[1,"flex","justify-center","p-6","bg-slate-900/20"],[1,"flex","p-1.5","bg-slate-900","rounded-2xl","border","border-white/5","shadow-2xl"],[1,"px-8","py-3","rounded-xl","font-black","uppercase","text-xs","tracking-widest","transition-all",3,"click"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-6","md:p-12"],[1,"max-w-6xl","mx-auto"],[1,"mb-12","p-8","rounded-[2.5rem]","bg-gradient-to-r","from-orange-600/20","to-amber-600/10","border","border-orange-500/30","backdrop-blur-md","shadow-2xl","flex","flex-col","md:flex-row","items-center","justify-between","gap-6"],[1,"grid","grid-cols-2","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-10","gap-4","md:gap-6"],[3,"disabled","opacity-40","grayscale","scale-105","ring-4","ring-orange-500/50","class"],[1,"w-20","h-20","rounded-3xl","bg-orange-500","flex","items-center","justify-center","shadow-[0_10px_30px_rgba(249,115,22,0.4)]"],["viewBox","0 0 24 24","fill","white",1,"w-10","h-10","animate-bounce-subtle"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"],[1,"text-2xl","font-black","text-white","uppercase","tracking-tighter"],[1,"text-orange-400","font-bold","uppercase","text-xs","tracking-widest"],[1,"flex","gap-4","w-full","md:w-auto"],[1,"flex-1","md:flex-none","px-10","py-4","bg-orange-500","hover:bg-orange-400","text-white","font-black","rounded-2xl","shadow-xl","transition-all","uppercase","tracking-widest","text-xs",3,"click"],[1,"px-6","py-4","bg-slate-800","hover:bg-rose-900/40","text-slate-400","hover:text-rose-400","font-black","rounded-2xl","transition-all","uppercase","tracking-widest","text-[10px]","border","border-white/5",3,"click"],[3,"click","disabled"],[1,"absolute","inset-0","bg-gradient-to-br","from-orange-500/20","to-amber-500/20","animate-pulse"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-6","h-6","text-slate-700"],[1,"text-[8px]","font-bold","text-slate-500","uppercase","tracking-widest","mt-1"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"]],template:function(n,r){n&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),it("click",function(){return r.gameService.setView("home")}),Ke(),O(4,"svg",4),_t(5,"path",5),F()(),ft(),O(6,"div")(7,"h1",6),S(8,"Carriera Reale"),F(),O(9,"p",7),S(10),F()()(),O(11,"div",8)(12,"div",9)(13,"p",10),S(14,"Punti Gloria"),F(),O(15,"p",11),S(16),F()(),O(17,"div",12),Ke(),O(18,"svg",13),_t(19,"path",14),F()()()(),ft(),O(20,"div",15)(21,"div",16)(22,"button",17),it("click",function(){return r.activeMode="chess"}),S(23," Scacchi "),F(),O(24,"button",17),it("click",function(){return r.activeMode="checkers"}),S(25," Dama "),F()()(),O(26,"div",18)(27,"div",19),ge(28,XK,15,1,"div",20),O(29,"div",21),Wt(30,nQ,6,18,"button",22,Ku),F()()()()),n&2&&(P(10),Ge("Ascesa al Trono \u2022 Livello ",r.activeMode==="chess"?r.currentChessLevel:r.currentCheckersLevel),P(6),ze(r.totalPoints),P(6),et("bg-orange-500",r.activeMode==="chess")("text-white",r.activeMode==="chess")("text-slate-500",r.activeMode!=="chess"),P(2),et("bg-orange-500",r.activeMode==="checkers")("text-white",r.activeMode==="checkers")("text-slate-500",r.activeMode!=="checkers"),P(4),ve(r.savedGame&&r.savedGame.type===r.activeMode?28:-1),P(2),zt(r.levels))},dependencies:[di],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#f973164d;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s ease-out}@keyframes _ngcontent-%COMP%_pulse-subtle{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.animate-pulse-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-subtle 2s infinite ease-in-out}@keyframes _ngcontent-%COMP%_bounce-subtle{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.animate-bounce-subtle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-subtle 2s infinite ease-in-out}"]})}};var rQ=(t,e)=>e.id;function iQ(t,e){if(t&1){let n=qe();O(0,"tr",27)(1,"td",28)(2,"span",29),S(3),F()(),O(4,"td",28)(5,"span",30),S(6),F()(),O(7,"td",28)(8,"span",31),S(9),m_(10,"date"),F()(),O(11,"td",28)(12,"span",32),S(13),F()(),O(14,"td",33)(15,"button",34),it("click",function(){let i=J(n).$implicit,s=V(2);return Y(s.deleteUser(i.id))}),S(16,"Elimina"),F()()()}if(t&2){let n=e.$implicit;P(3),ze(n.username),P(3),ze(n.email),P(3),ze(g_(10,12,n.created_at,"dd/MM/yyyy")),P(3),et("bg-emerald-500/20",n.is_active)("text-emerald-400",n.is_active)("bg-rose-500/20",!n.is_active)("text-rose-400",!n.is_active),P(),Ge(" ",n.is_active?"Attivo":"Non Attivo"," ")}}function sQ(t,e){if(t&1){let n=qe();O(0,"div",15)(1,"div",18)(2,"div")(3,"h2",19),S(4,"Utenti Iscritti"),F(),O(5,"p",20),S(6),F()(),O(7,"button",21),it("click",function(){J(n);let i=V();return Y(i.fetchUsers())}),S(8,"Aggiorna Lista"),F()(),O(9,"div",22)(10,"table",23)(11,"thead")(12,"tr",24)(13,"th",25),S(14,"Username"),F(),O(15,"th",25),S(16,"Email"),F(),O(17,"th",25),S(18,"Registrato"),F(),O(19,"th",25),S(20,"Status"),F(),O(21,"th",26),S(22,"Azioni"),F()()(),O(23,"tbody"),Wt(24,iQ,17,15,"tr",27,rQ),F()()()()}if(t&2){let n=V();P(6),Ge("Totale Account: ",n.users.length),P(18),zt(n.users)}}function oQ(t,e){t&1&&(O(0,"div",16)(1,"div")(2,"h2",19),S(3,"Caricamento Kit"),F(),O(4,"p",20),S(5,"Aggiungi nuovi modelli alla libreria"),F()(),O(6,"div",35)(7,"div",36)(8,"h3",37)(9,"span",38),S(10,"\u{1F381}"),F(),S(11," Kit Gratuito "),F(),O(12,"div",39),_t(13,"input",40),O(14,"div",41)(15,"div",42)(16,"p",43),S(17,"Seleziona GLB"),F()()(),O(18,"button",44),S(19,"Pubblica Kit Gratis"),F()()(),O(20,"div",45)(21,"h3",37)(22,"span",46),S(23,"\u{1F4B0}"),F(),S(24," Kit a Pagamento "),F(),O(25,"div",39),_t(26,"input",47)(27,"input",48),O(28,"button",49),S(29,"Pubblica Prodotto"),F()()()()())}function aQ(t,e){t&1&&(O(0,"div",17)(1,"div",50)(2,"span",51),S(3,"\u2696\uFE0F"),F()(),O(4,"h2",6),S(5,"In Attesa di Revisione"),F(),O(6,"p",52),S(7,"Quest'area permetter\xE0 di approvare i kit caricati dagli utenti prima della messa in vendita."),F(),O(8,"div",53)(9,"span",54),S(10,"Coming Soon"),F()()())}var iv=class t{constructor(){this.supabase=ae(_n);this.gameService=ae(Cn);this.activeTab="users";this.users=[];this.loading=!1}ngOnInit(){this.fetchUsers()}async fetchUsers(){this.loading=!0;try{let{data:e,error:n}=await this.supabase.client.from("profiles").select("*").order("created_at",{ascending:!1});!n&&e&&(this.users=e.map(r=>te(A({},r),{is_active:!0})))}catch(e){console.error("Error fetching users",e)}finally{this.loading=!1}}async deleteUser(e){if(confirm("Sei sicuro di voler eliminare questo utente? L'azione \xE8 irreversibile."))try{await this.supabase.client.from("career_progress").delete().eq("user_id",e);let{error:n}=await this.supabase.client.from("profiles").delete().eq("id",e);n?alert("Errore RLS: Non puoi eliminare record senza permessi service_role."):(this.users=this.users.filter(r=>r.id!==e),alert("Utente eliminato dal database."))}catch(n){console.error("Delete error",n)}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-admin-view"]],decls:27,vars:21,consts:[[1,"fixed","inset-0","z-[100]","flex","flex-col","bg-slate-950","text-white","overflow-hidden","font-sans"],[1,"px-8","py-6","bg-slate-900","border-b","border-white/10","flex","items-center","justify-between","shadow-2xl"],[1,"flex","items-center","gap-6"],[1,"w-10","h-10","rounded-xl","bg-slate-800","hover:bg-red-500/20","border","border-white/10","flex","items-center","justify-center","transition-all","group",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5",1,"w-5","h-5","text-slate-400","group-hover:text-red-400"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"text-2xl","font-black","uppercase","tracking-tighter"],[1,"text-rose-500","text-[10px]","font-black","uppercase","tracking-[0.3em]"],[1,"flex","items-center","gap-4"],[1,"px-4","py-2","bg-emerald-500/10","border","border-emerald-500/20","rounded-lg"],[1,"text-emerald-500","text-[10px]","font-black","uppercase","tracking-widest"],[1,"flex-1","flex","overflow-hidden"],[1,"w-64","bg-slate-900/50","border-r","border-white/5","p-6","flex","flex-col","gap-2"],[1,"w-full","text-left","px-4","py-3","rounded-xl","font-black","uppercase","text-xs","tracking-widest","transition-all",3,"click"],[1,"flex-1","overflow-y-auto","custom-scrollbar","p-10"],[1,"space-y-8","animate-fade-in"],[1,"space-y-10","animate-fade-in"],[1,"flex","flex-col","items-center","justify-center","py-24","text-center"],[1,"flex","justify-between","items-end"],[1,"text-4xl","font-black","uppercase","tracking-tighter"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-widest","mt-1"],[1,"px-6","py-2","bg-slate-800","hover:bg-slate-700","rounded-lg","text-[10px]","font-black","uppercase","tracking-widest","border","border-white/10",3,"click"],[1,"bg-slate-900/40","border","border-white/5","rounded-[2rem]","overflow-hidden"],[1,"w-full","border-collapse"],[1,"bg-black/20","border-b","border-white/5","text-left"],[1,"px-6","py-4","text-[10px]","font-black","text-slate-500","uppercase","tracking-widest"],[1,"px-6","py-4","text-[10px]","font-black","text-slate-500","uppercase","tracking-widest","text-right"],[1,"border-b","border-white/5","hover:bg-white/5","transition-colors","group"],[1,"px-6","py-4"],[1,"font-bold","text-white"],[1,"text-slate-400","text-sm"],[1,"text-slate-500","text-[10px]","uppercase","font-bold"],[1,"px-2","py-1","rounded","text-[9px]","font-black","uppercase"],[1,"px-6","py-4","text-right"],[1,"px-4","py-2","bg-rose-500/10","text-rose-500","hover:bg-rose-500","hover:text-white","rounded-lg","text-[9px]","font-black","uppercase","tracking-widest","transition-all",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"bg-indigo-600/10","border","border-indigo-500/20","rounded-[2rem]","p-8","space-y-6"],[1,"text-xl","font-black","uppercase","tracking-tight","text-white","flex","items-center","gap-3"],[1,"p-2","bg-indigo-500/20","rounded-lg"],[1,"space-y-4"],["type","text","placeholder","Nome Kit",1,"w-full","bg-black/40","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-indigo-400","outline-none"],[1,"flex","gap-4"],[1,"flex-1","border-2","border-dashed","border-white/10","rounded-xl","p-6","text-center","hover:border-indigo-500/50","cursor-pointer","transition-all"],[1,"text-[10px]","font-black","text-slate-500","uppercase"],[1,"w-full","bg-indigo-600","py-4","rounded-xl","font-black","uppercase","text-xs","tracking-widest","shadow-lg"],[1,"bg-amber-600/10","border","border-amber-500/20","rounded-[2rem]","p-8","space-y-6"],[1,"p-2","bg-amber-500/20","rounded-lg"],["type","text","placeholder","Nome Kit",1,"w-full","bg-black/40","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-amber-400","outline-none"],["type","number","placeholder","Prezzo (\u20AC)",1,"w-full","bg-black/40","border","border-white/10","rounded-xl","px-4","py-3","text-sm","focus:border-amber-400","outline-none"],[1,"w-full","bg-amber-600","py-4","rounded-xl","font-black","uppercase","text-xs","tracking-widest","shadow-lg"],[1,"w-20","h-20","rounded-full","bg-slate-900","border","border-white/10","flex","items-center","justify-center","mb-6"],[1,"text-3xl"],[1,"text-slate-500","text-xs","font-bold","uppercase","tracking-[0.2em]","mt-2","max-w-sm"],[1,"mt-8","px-6","py-2","bg-slate-800","rounded-full"],[1,"text-indigo-400","text-[9px]","font-black","uppercase","tracking-widest"]],template:function(n,r){n&1&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),it("click",function(){return r.gameService.setView("home")}),Ke(),O(4,"svg",4),_t(5,"path",5),F()(),ft(),O(6,"div")(7,"h1",6),S(8,"Pannello Admin"),F(),O(9,"p",7),S(10,"Sistema di Controllo THE KING"),F()()(),O(11,"div",8)(12,"div",9)(13,"span",10),S(14,"Sistema: Online"),F()()()(),O(15,"div",11)(16,"div",12)(17,"button",13),it("click",function(){return r.activeTab="users"}),S(18," Gestione Utenti "),F(),O(19,"button",13),it("click",function(){return r.activeTab="kits"}),S(20," Gestione Kit "),F(),O(21,"button",13),it("click",function(){return r.activeTab="approval"}),S(22," Approvazioni "),F()(),O(23,"div",14),ge(24,sQ,26,1,"div",15),ge(25,oQ,30,0,"div",16),ge(26,aQ,11,0,"div",17),F()()()),n&2&&(P(17),et("bg-indigo-600",r.activeTab==="users")("text-white",r.activeTab==="users")("text-slate-500",r.activeTab!=="users"),P(2),et("bg-indigo-600",r.activeTab==="kits")("text-white",r.activeTab==="kits")("text-slate-500",r.activeTab!=="kits"),P(2),et("bg-indigo-600",r.activeTab==="approval")("text-white",r.activeTab==="approval")("text-slate-500",r.activeTab!=="approval"),P(3),ve(r.activeTab==="users"?24:-1),P(),ve(r.activeTab==="kits"?25:-1),P(),ve(r.activeTab==="approval"?26:-1))},dependencies:[di,Zg,T_],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6366f133;border-radius:10px}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out}"]})}};var lQ=()=>["classic","neon","minimal"];function cQ(t,e){if(t&1&&Te(0,"app-home-view",2),t&2){let n=V();Di("showSetup",n.gameService.viewState()==="settings")}}function uQ(t,e){t&1&&Te(0,"app-marketplace-view")}function dQ(t,e){t&1&&Te(0,"app-career-view")}function fQ(t,e){t&1&&Te(0,"app-admin-view")}function hQ(t,e){if(t&1){let n=qe();x(0,"div",3)(1,"button",5),Q("click",function(){J(n);let i=V();return Y(i.gameService.setView("home"))}),Ke(),x(2,"svg",6),Te(3,"path",7),k()()()}}function pQ(t,e){if(t&1){let n=qe();x(0,"button",20),Q("click",function(){let i=J(n).$implicit,s=V(2);return Y(s.gameService.pieceStyle.set(i))}),S(1),k()}if(t&2){let n=e.$implicit,r=V(2);et("border-blue-500",r.gameService.pieceStyle()===n),P(),Ge(" ",n," ")}}function mQ(t,e){if(t&1){let n=qe();x(0,"div",4)(1,"div",8)(2,"div",9)(3,"h2",10),S(4,"Impostazioni Partita"),k(),x(5,"button",11),Q("click",function(){J(n);let i=V();return Y(i.showMenu=!1)}),S(6,"\u2715"),k()(),x(7,"div",12)(8,"div")(9,"label",13),S(10,"Stile Pezzi"),k(),x(11,"div",14),Wt(12,pQ,2,3,"button",15,Ku),k()(),x(14,"div")(15,"label",13),S(16,"Effetti Visivi"),k(),x(17,"div",16)(18,"span",17),S(19,"Sfocatura Sfondo Home"),k(),x(20,"input",18),Q("change",function(){J(n);let i=V();return Y(i.gameService.bgBlur.set(!i.gameService.bgBlur()))}),k()()(),x(21,"button",19),Q("click",function(){J(n);let i=V();return Y(i.showMenu=!1)}),S(22," Conferma e Chiudi "),k()()()()}if(t&2){let n=V();P(12),zt(p_(1,lQ)),P(8),Di("checked",n.gameService.bgBlur())}}var sv=class t{constructor(){this.gameService=ae(Cn);this.supabase=ae(_n);this.showAssets=!1;this.showMenu=!1;this.pieceTypes=[{id:"p",label:"Pedone"},{id:"r",label:"Torre"},{id:"n",label:"Cavallo"},{id:"b",label:"Alfiere"},{id:"q",label:"Regina"},{id:"k",label:"Re"}];this.checkerTypes=[{id:"cm",label:"Pedina (Man)"},{id:"ck",label:"Dama (King)"}];this.loadedStatus={board:!1};Du(async()=>{this.supabase.user()&&(console.log("AppComponent: User detected, loading persistent assets..."),await this.gameService.loadUserAssets())})}toggleMenu(){this.showMenu=!this.showMenu}openImportPanel(){this.showMenu=!1,this.showAssets=!0}getIconForType(e){return{p:"\u265F",r:"\u265C",n:"\u265E",b:"\u265D",q:"\u265B",k:"\u265A"}[e]||"?"}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Vn({type:t,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&vl(Ud,5),n&2){let i;Xu(i=Zu())&&(r.scene=i.first)}},decls:9,vars:10,consts:[[1,"h-screen","w-full","relative","overflow-hidden","bg-slate-950","main-container"],[1,"absolute","inset-0","transition-all","duration-1000"],[3,"showSetup"],[1,"absolute","top-6","left-6","z-40"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-6"],[1,"group","w-12","h-12","md:w-14","md:h-14","rounded-xl","bg-slate-900/80","backdrop-blur-md","border","border-white/10","hover:border-indigo-400/50","text-white","hover:bg-slate-800","transition-all","flex","items-center","justify-center","shadow-lg",3,"click"],["viewBox","0 0 100 100","fill","currentColor",1,"w-6","h-6","md:w-7","md:h-7","text-slate-400","group-hover:text-indigo-400","transition-colors"],["d","M50 20 L20 45 L30 45 L30 80 L45 80 L45 60 L55 60 L55 80 L70 80 L70 45 L80 45 Z"],[1,"bg-slate-900","border","border-white/10","rounded-3xl","p-8","max-w-lg","w-full"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],[1,"text-slate-400",3,"click"],[1,"space-y-6"],[1,"text-sm","text-slate-400","mb-2","block","uppercase","tracking-widest","font-bold"],[1,"grid","grid-cols-2","gap-2"],[1,"p-3","rounded-xl","bg-slate-800","border-2","border-transparent","transition-all","capitalize","text-white",3,"border-blue-500"],[1,"flex","items-center","justify-between","p-4","bg-slate-800","rounded-xl"],[1,"text-white"],["type","checkbox",1,"w-6","h-6","rounded","border-white/10","bg-slate-700",3,"change","checked"],[1,"w-full","py-4","bg-blue-600","rounded-2xl","font-bold","text-white","shadow-lg","hover:bg-blue-500","transition-all",3,"click"],[1,"p-3","rounded-xl","bg-slate-800","border-2","border-transparent","transition-all","capitalize","text-white",3,"click"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"div",1),Te(2,"app-chess-scene"),k(),ge(3,cQ,1,1,"app-home-view",2),ge(4,uQ,1,0,"app-marketplace-view"),ge(5,dQ,1,0,"app-career-view"),ge(6,fQ,1,0,"app-admin-view"),ge(7,hQ,4,0,"div",3),ge(8,mQ,23,2,"div",4),k()),n&2&&(P(),et("blur-xl",r.gameService.viewState()!=="game"&&r.gameService.bgBlur())("scale-110",r.gameService.viewState()!=="game"&&r.gameService.bgBlur()),P(2),ve(r.gameService.viewState()==="home"||r.gameService.viewState()==="settings"?3:-1),P(),ve(r.gameService.viewState()==="marketplace"?4:-1),P(),ve(r.gameService.viewState()==="career"?5:-1),P(),ve(r.gameService.viewState()==="admin"?6:-1),P(),ve(r.gameService.viewState()==="game"?7:-1),P(),ve(r.showMenu?8:-1))},dependencies:[Ud,tv,nv,rv,iv],styles:["@keyframes _ngcontent-%COMP%_float-particle{0%{transform:translateY(0) translate(0)}50%{transform:translateY(-20px) translate(10px)}to{transform:translateY(0) translate(0)}}[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background:transparent}.main-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;background:radial-gradient(ellipse at top,#1e293b,#0f172a,#020617)}.animate-blob[_ngcontent-%COMP%]{animation:blob 15s infinite alternate ease-in-out}.animate-twinkle[_ngcontent-%COMP%]{animation:twinkle 4s infinite ease-in-out}.animate-float-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float-particle 10s infinite ease-in-out}.animate-float-medium[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float-particle 7s infinite ease-in-out}.animation-delay-2000[_ngcontent-%COMP%]{animation-delay:2s}.animation-delay-4000[_ngcontent-%COMP%]{animation-delay:4s}.animation-delay-1000[_ngcontent-%COMP%]{animation-delay:1s}"]})}};console.log("index.tsx: Inizio Bootstrap Application");try{L_(sv,{providers:[v_()]}).then(()=>{console.log("index.tsx: Bootstrap completato con successo")}).catch(t=>{console.error("index.tsx: Errore durante il bootstrap (Promise):",t)})}catch(t){console.error("index.tsx: ERRORE FATALE durante il bootstrap:",t)}
